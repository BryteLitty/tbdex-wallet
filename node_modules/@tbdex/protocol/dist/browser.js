"use strict";var tbDEX=(()=>{var f7=Object.create;var Cm=Object.defineProperty;var p7=Object.getOwnPropertyDescriptor;var h7=Object.getOwnPropertyNames;var m7=Object.getPrototypeOf,y7=Object.prototype.hasOwnProperty;var eC=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Ot=(t,e)=>()=>(t&&(e=t(t=0)),e);var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ar=(t,e)=>{for(var r in e)Cm(t,r,{get:e[r],enumerable:!0})},tC=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of h7(e))!y7.call(t,s)&&s!==r&&Cm(t,s,{get:()=>e[s],enumerable:!(n=p7(e,s))||n.enumerable});return t};var ui=(t,e,r)=>(r=t!=null?f7(m7(t)):{},tC(e||!t||!t.__esModule?Cm(r,"default",{value:t,enumerable:!0}):r,t)),Rf=t=>tC(Cm({},"__esModule",{value:!0}),t);var dC=D((Mhe,lC)=>{var C7=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Tm=()=>C7.now(),P7=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Cb=t=>t===1/0||P7(t),Mf=class{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:s=!1,noUpdateTTL:i=!1,dispose:o,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!Cb(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!Cb(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!s,this.noUpdateTTL=!!i,this.noDisposeOnSet=!!a,o!==void 0){if(typeof o!="function")throw new TypeError("dispose must be function if set");this.dispose=o}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let s in this.expirations){this.setTimer(s,s-Tm());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==Mf.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let s=this.expirations[n];!s||s.length<=1?delete this.expirations[n]:this.expirations[n]=s.filter(i=>i!==e)}if(r!==1/0){let s=Math.floor(Tm()+r);this.expirationMap.set(e,s),this.expirations[s]||(this.expirations[s]=[],this.setTimer(s,r)),this.expirations[s].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:s=this.noUpdateTTL,noDisposeOnSet:i=this.noDisposeOnSet}={}){if(!Cb(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){s||this.setTTL(e,n);let o=this.data.get(e);o!==r&&(this.data.set(e,r),i||this.dispose(o,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-Tm())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:s=this.checkAgeOnGet}={}){let i=this.data.get(e);if(s&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),i}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let s=this.expirations[r];return s&&(s.length<=1?delete this.expirations[r]:this.expirations[r]=s.filter(i=>i!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let s of r)n.push([s,this.data.get(s)]),this.data.delete(s),this.expirationMap.delete(s);for(let[s,i]of n)this.dispose(i,s,"evict")}else{let n=this.size-this.max,s=[];for(let i of r.splice(0,n))s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(Tm());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],s=[];delete this.expirations[r];for(let i of n)s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};lC.exports=Mf});var PC=D(CC=>{"use strict";CC.supports=function(...e){let r=e.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var is=D((kme,OC)=>{"use strict";OC.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var IC=D(Rm=>{"use strict";Rm.byteLength=aL;Rm.toByteArray=cL;Rm.fromByteArray=fL;var $s=[],Si=[],oL=typeof Uint8Array<"u"?Uint8Array:Array,jb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Xu=0,kC=jb.length;Xu<kC;++Xu)$s[Xu]=jb[Xu],Si[jb.charCodeAt(Xu)]=Xu;var Xu,kC;Si["-".charCodeAt(0)]=62;Si["_".charCodeAt(0)]=63;function BC(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function aL(t){var e=BC(t),r=e[0],n=e[1];return(r+n)*3/4-n}function uL(t,e,r){return(e+r)*3/4-r}function cL(t){var e,r=BC(t),n=r[0],s=r[1],i=new oL(uL(t,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)e=Si[t.charCodeAt(u)]<<18|Si[t.charCodeAt(u+1)]<<12|Si[t.charCodeAt(u+2)]<<6|Si[t.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=Si[t.charCodeAt(u)]<<2|Si[t.charCodeAt(u+1)]>>4,i[o++]=e&255),s===1&&(e=Si[t.charCodeAt(u)]<<10|Si[t.charCodeAt(u+1)]<<4|Si[t.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function lL(t){return $s[t>>18&63]+$s[t>>12&63]+$s[t>>6&63]+$s[t&63]}function dL(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(lL(n));return s.join("")}function fL(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(dL(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push($s[e>>2]+$s[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push($s[e>>10]+$s[e>>4&63]+$s[e<<2&63]+"=")),s.join("")}});var TC=D(qb=>{qb.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?s-1:0,h=r?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=h,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+d],d+=h,l-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-c}return(f?-1:1)*o*Math.pow(2,i-n)};qb.write=function(t,e,r,n,s,i){var o,a,u,c=i*8-s-1,l=(1<<c)-1,d=l>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=h/u:e+=h*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*u-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[r+f]=o&255,f+=p,o/=256,c-=8);t[r+f-p]|=g*128}});var Ai=D(Rl=>{"use strict";var Lb=IC(),Tl=TC(),FC=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Rl.Buffer=Y;Rl.SlowBuffer=vL;Rl.INSPECT_MAX_BYTES=50;var $m=2147483647;Rl.kMaxLength=$m;Y.TYPED_ARRAY_SUPPORT=pL();!Y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function pL(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(Y.prototype,"parent",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.buffer}});Object.defineProperty(Y.prototype,"offset",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.byteOffset}});function Fo(t){if(t>$m)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,Y.prototype),e}function Y(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Hb(t)}return MC(t,e,r)}Y.poolSize=8192;function MC(t,e,r){if(typeof t=="string")return mL(t,e);if(ArrayBuffer.isView(t))return yL(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ns(t,ArrayBuffer)||t&&Ns(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ns(t,SharedArrayBuffer)||t&&Ns(t.buffer,SharedArrayBuffer)))return Kb(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return Y.from(n,e,r);let s=gL(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return Y.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}Y.from=function(t,e,r){return MC(t,e,r)};Object.setPrototypeOf(Y.prototype,Uint8Array.prototype);Object.setPrototypeOf(Y,Uint8Array);function jC(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function hL(t,e,r){return jC(t),t<=0?Fo(t):e!==void 0?typeof r=="string"?Fo(t).fill(e,r):Fo(t).fill(e):Fo(t)}Y.alloc=function(t,e,r){return hL(t,e,r)};function Hb(t){return jC(t),Fo(t<0?0:Wb(t)|0)}Y.allocUnsafe=function(t){return Hb(t)};Y.allocUnsafeSlow=function(t){return Hb(t)};function mL(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Y.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=qC(t,e)|0,n=Fo(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function Ub(t){let e=t.length<0?0:Wb(t.length)|0,r=Fo(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function yL(t){if(Ns(t,Uint8Array)){let e=new Uint8Array(t);return Kb(e.buffer,e.byteOffset,e.byteLength)}return Ub(t)}function Kb(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,Y.prototype),n}function gL(t){if(Y.isBuffer(t)){let e=Wb(t.length)|0,r=Fo(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||Jb(t.length)?Fo(0):Ub(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ub(t.data)}function Wb(t){if(t>=$m)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$m.toString(16)+" bytes");return t|0}function vL(t){return+t!=t&&(t=0),Y.alloc(+t)}Y.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Y.prototype};Y.compare=function(e,r){if(Ns(e,Uint8Array)&&(e=Y.from(e,e.offset,e.byteLength)),Ns(r,Uint8Array)&&(r=Y.from(r,r.offset,r.byteLength)),!Y.isBuffer(e)||!Y.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==r[i]){n=e[i],s=r[i];break}return n<s?-1:s<n?1:0};Y.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Y.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Y.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let s=Y.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let o=e[n];if(Ns(o,Uint8Array))i+o.length>s.length?(Y.isBuffer(o)||(o=Y.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(Y.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function qC(t,e){if(Y.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ns(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Vb(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return GC(t).length;default:if(s)return n?-1:Vb(t).length;e=(""+e).toLowerCase(),s=!0}}Y.byteLength=qC;function bL(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return OL(this,e,r);case"utf8":case"utf-8":return UC(this,e,r);case"ascii":return CL(this,e,r);case"latin1":case"binary":return PL(this,e,r);case"base64":return AL(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kL(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Y.prototype._isBuffer=!0;function Yu(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}Y.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Yu(this,r,r+1);return this};Y.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Yu(this,r,r+3),Yu(this,r+1,r+2);return this};Y.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Yu(this,r,r+7),Yu(this,r+1,r+6),Yu(this,r+2,r+5),Yu(this,r+3,r+4);return this};Y.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?UC(this,0,e):bL.apply(this,arguments)};Y.prototype.toLocaleString=Y.prototype.toString;Y.prototype.equals=function(e){if(!Y.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Y.compare(this,e)===0};Y.prototype.inspect=function(){let e="",r=Rl.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};FC&&(Y.prototype[FC]=Y.prototype.inspect);Y.prototype.compare=function(e,r,n,s,i){if(Ns(e,Uint8Array)&&(e=Y.from(e,e.offset,e.byteLength)),!Y.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),r<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;let o=i-s,a=n-r,u=Math.min(o,a),c=this.slice(s,i),l=e.slice(r,n);for(let d=0;d<u;++d)if(c[d]!==l[d]){o=c[d],a=l[d];break}return o<a?-1:a<o?1:0};function LC(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Jb(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=Y.from(e,n)),Y.isBuffer(e))return e.length===0?-1:RC(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):RC(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function RC(t,e,r,n,s){let i=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,o/=2,a/=2,r/=2}function u(l,d){return i===1?l[d]:l.readUInt16BE(d*i)}let c;if(s){let l=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===a)return l*i}else l!==-1&&(c-=c-l),l=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let l=!0;for(let d=0;d<a;d++)if(u(t,c+d)!==u(e,d)){l=!1;break}if(l)return c}return-1}Y.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Y.prototype.indexOf=function(e,r,n){return LC(this,e,r,n,!0)};Y.prototype.lastIndexOf=function(e,r,n){return LC(this,e,r,n,!1)};function wL(t,e,r,n){r=Number(r)||0;let s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;let i=e.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(Jb(a))return o;t[r+o]=a}return o}function EL(t,e,r,n){return Nm(Vb(e,t.length-r),t,r,n)}function _L(t,e,r,n){return Nm(FL(e),t,r,n)}function DL(t,e,r,n){return Nm(GC(e),t,r,n)}function SL(t,e,r,n){return Nm(RL(e,t.length-r),t,r,n)}Y.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return wL(this,e,r,n);case"utf8":case"utf-8":return EL(this,e,r,n);case"ascii":case"latin1":case"binary":return _L(this,e,r,n);case"base64":return DL(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return SL(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};Y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function AL(t,e,r){return e===0&&r===t.length?Lb.fromByteArray(t):Lb.fromByteArray(t.slice(e,r))}function UC(t,e,r){r=Math.min(t.length,r);let n=[],s=e;for(;s<r;){let i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=r){let u,c,l,d;switch(a){case 1:i<128&&(o=i);break;case 2:u=t[s+1],(u&192)===128&&(d=(i&31)<<6|u&63,d>127&&(o=d));break;case 3:u=t[s+1],c=t[s+2],(u&192)===128&&(c&192)===128&&(d=(i&15)<<12|(u&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=t[s+1],c=t[s+2],l=t[s+3],(u&192)===128&&(c&192)===128&&(l&192)===128&&(d=(i&15)<<18|(u&63)<<12|(c&63)<<6|l&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return xL(n)}var $C=4096;function xL(t){let e=t.length;if(e<=$C)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=$C));return r}function CL(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function PL(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function OL(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let i=e;i<r;++i)s+=$L[t[i]];return s}function kL(t,e,r){let n=t.slice(e,r),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}Y.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let s=this.subarray(e,r);return Object.setPrototypeOf(s,Y.prototype),s};function Xr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Y.prototype.readUintLE=Y.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Xr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return s};Y.prototype.readUintBE=Y.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Xr(e,r,this.length);let s=this[e+--r],i=1;for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s};Y.prototype.readUint8=Y.prototype.readUInt8=function(e,r){return e=e>>>0,r||Xr(e,1,this.length),this[e]};Y.prototype.readUint16LE=Y.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Xr(e,2,this.length),this[e]|this[e+1]<<8};Y.prototype.readUint16BE=Y.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Xr(e,2,this.length),this[e]<<8|this[e+1]};Y.prototype.readUint32LE=Y.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Xr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Y.prototype.readUint32BE=Y.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Xr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Y.prototype.readBigUInt64LE=Ma(function(e){e=e>>>0,Fl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kf(e,this.length-8);let s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});Y.prototype.readBigUInt64BE=Ma(function(e){e=e>>>0,Fl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kf(e,this.length-8);let s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});Y.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Xr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};Y.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Xr(e,r,this.length);let s=r,i=1,o=this[e+--s];for(;s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};Y.prototype.readInt8=function(e,r){return e=e>>>0,r||Xr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Y.prototype.readInt16LE=function(e,r){e=e>>>0,r||Xr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Y.prototype.readInt16BE=function(e,r){e=e>>>0,r||Xr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Y.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Xr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Y.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Xr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Y.prototype.readBigInt64LE=Ma(function(e){e=e>>>0,Fl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kf(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});Y.prototype.readBigInt64BE=Ma(function(e){e=e>>>0,Fl(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kf(e,this.length-8);let s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});Y.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Xr(e,4,this.length),Tl.read(this,e,!0,23,4)};Y.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Xr(e,4,this.length),Tl.read(this,e,!1,23,4)};Y.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Xr(e,8,this.length),Tl.read(this,e,!0,52,8)};Y.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Xr(e,8,this.length),Tl.read(this,e,!1,52,8)};function Vn(t,e,r,n,s,i){if(!Y.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Y.prototype.writeUintLE=Y.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;Vn(this,e,r,n,a,0)}let i=1,o=0;for(this[r]=e&255;++o<n&&(i*=256);)this[r+o]=e/i&255;return r+n};Y.prototype.writeUintBE=Y.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;Vn(this,e,r,n,a,0)}let i=n-1,o=1;for(this[r+i]=e&255;--i>=0&&(o*=256);)this[r+i]=e/o&255;return r+n};Y.prototype.writeUint8=Y.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,1,255,0),this[r]=e&255,r+1};Y.prototype.writeUint16LE=Y.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};Y.prototype.writeUint16BE=Y.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};Y.prototype.writeUint32LE=Y.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};Y.prototype.writeUint32BE=Y.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function KC(t,e,r,n,s){JC(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function VC(t,e,r,n,s){JC(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}Y.prototype.writeBigUInt64LE=Ma(function(e,r=0){return KC(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeBigUInt64BE=Ma(function(e,r=0){return VC(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);Vn(this,e,r,n,u-1,-u)}let i=0,o=1,a=0;for(this[r]=e&255;++i<n&&(o*=256);)e<0&&a===0&&this[r+i-1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};Y.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);Vn(this,e,r,n,u-1,-u)}let i=n-1,o=1,a=0;for(this[r+i]=e&255;--i>=0&&(o*=256);)e<0&&a===0&&this[r+i+1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};Y.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};Y.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};Y.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};Y.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};Y.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Vn(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};Y.prototype.writeBigInt64LE=Ma(function(e,r=0){return KC(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Y.prototype.writeBigInt64BE=Ma(function(e,r=0){return VC(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function HC(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function WC(t,e,r,n,s){return e=+e,r=r>>>0,s||HC(t,e,r,4,34028234663852886e22,-34028234663852886e22),Tl.write(t,e,r,n,23,4),r+4}Y.prototype.writeFloatLE=function(e,r,n){return WC(this,e,r,!0,n)};Y.prototype.writeFloatBE=function(e,r,n){return WC(this,e,r,!1,n)};function zC(t,e,r,n,s){return e=+e,r=r>>>0,s||HC(t,e,r,8,17976931348623157e292,-17976931348623157e292),Tl.write(t,e,r,n,52,8),r+8}Y.prototype.writeDoubleLE=function(e,r,n){return zC(this,e,r,!0,n)};Y.prototype.writeDoubleBE=function(e,r,n){return zC(this,e,r,!1,n)};Y.prototype.copy=function(e,r,n,s){if(!Y.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);let i=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),i};Y.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!Y.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let o=e.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let o=Y.isBuffer(e)?e:Y.from(e,s),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=o[i%a]}return this};var Il={};function zb(t,e,r){Il[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}zb("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);zb("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);zb("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=NC(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=NC(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function NC(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function BL(t,e,r){Fl(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Kf(e,t.length-(r+1))}function JC(t,e,r,n,s,i){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw i>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:a=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Il.ERR_OUT_OF_RANGE("value",a,t)}BL(n,s,i)}function Fl(t,e){if(typeof t!="number")throw new Il.ERR_INVALID_ARG_TYPE(e,"number",t)}function Kf(t,e,r){throw Math.floor(t)!==t?(Fl(t,r),new Il.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Il.ERR_BUFFER_OUT_OF_BOUNDS:new Il.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var IL=/[^+/0-9A-Za-z-_]/g;function TL(t){if(t=t.split("=")[0],t=t.trim().replace(IL,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Vb(t,e){e=e||1/0;let r,n=t.length,s=null,i=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function FL(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function RL(t,e){let r,n,s,i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function GC(t){return Lb.toByteArray(TL(t))}function Nm(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function Ns(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function Jb(t){return t!==t}var $L=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function Ma(t){return typeof BigInt>"u"?NL:t}function NL(){throw new Error("BigInt not supported")}});var Xb=D((Rme,XC)=>{"use strict";var Gb=null;XC.exports=function(){return Gb===null&&(Gb={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),Gb}});var Qb=D(YC=>{"use strict";var Yb=is(),ML=new Set(["buffer","view","utf8"]),Zb=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!ML.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new Yb(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new Yb(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new Yb(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};YC.Encoding=Zb});var n1=D(Mm=>{"use strict";var{Buffer:t1}=Ai()||{},{Encoding:r1}=Qb(),jL=Xb(),Vf=class extends r1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Hf({encode:this.encode,decode:e=>this.decode(t1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Hf=class extends r1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Vf({encode:e=>{let r=this.encode(e);return t1.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},e1=class extends r1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Vf({encode:e=>t1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=jL();return new Hf({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Mm.BufferFormat=Vf;Mm.ViewFormat=Hf;Mm.UTF8Format=e1});var tP=D(Zu=>{"use strict";var{Buffer:En}=Ai()||{Buffer:{isBuffer:()=>!1}},{textEncoder:QC,textDecoder:ZC}=Xb()(),{BufferFormat:Wf,ViewFormat:i1,UTF8Format:eP}=n1(),jm=t=>t;Zu.utf8=new eP({encode:function(t){return En.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?ZC.decode(t):String(t)},decode:jm,name:"utf8",createViewTranscoder(){return new i1({encode:function(t){return ArrayBuffer.isView(t)?t:QC.encode(t)},decode:function(t){return ZC.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new Wf({encode:function(t){return En.isBuffer(t)?t:ArrayBuffer.isView(t)?En.from(t.buffer,t.byteOffset,t.byteLength):En.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});Zu.json=new eP({encode:JSON.stringify,decode:JSON.parse,name:"json"});Zu.buffer=new Wf({encode:function(t){return En.isBuffer(t)?t:ArrayBuffer.isView(t)?En.from(t.buffer,t.byteOffset,t.byteLength):En.from(String(t),"utf8")},decode:jm,name:"buffer",createViewTranscoder(){return new i1({encode:function(t){return ArrayBuffer.isView(t)?t:En.from(String(t),"utf8")},decode:function(t){return En.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});Zu.view=new i1({encode:function(t){return ArrayBuffer.isView(t)?t:QC.encode(t)},decode:jm,name:"view",createBufferTranscoder(){return new Wf({encode:function(t){return En.isBuffer(t)?t:ArrayBuffer.isView(t)?En.from(t.buffer,t.byteOffset,t.byteLength):En.from(String(t),"utf8")},decode:jm,name:`${this.name}+buffer`})}});Zu.hex=new Wf({encode:function(t){return En.isBuffer(t)?t:En.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});Zu.base64=new Wf({encode:function(t){return En.isBuffer(t)?t:En.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var iP=D(nP=>{"use strict";var rP=is(),Lm=tP(),{Encoding:qL}=Qb(),{BufferFormat:LL,ViewFormat:UL,UTF8Format:KL}=n1(),zf=Symbol("formats"),qm=Symbol("encodings"),VL=new Set(["buffer","view","utf8"]),s1=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>VL.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[qm]=new Map,this[zf]=new Set(e);for(let r in Lm)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[qm].values()))}encoding(e){let r=this[qm].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=JL[e],!r)throw new rP(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=HL(e)}let{name:n,format:s}=r;if(!this[zf].has(s))if(this[zf].has("view"))r=r.createViewTranscoder();else if(this[zf].has("buffer"))r=r.createBufferTranscoder();else if(this[zf].has("utf8"))r=r.createUTF8Transcoder();else throw new rP(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let i of[e,n,r.name,r.commonName])this[qm].set(i,r)}return r}};nP.Transcoder=s1;function HL(t){if(t instanceof qL)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${GL++}`;switch(WL(t)){case"view":return new UL({...t,name:r});case"utf8":return new KL({...t,name:r});case"buffer":return new LL({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function WL(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var zL={binary:Lm.buffer,"utf-8":Lm.utf8},JL={...Lm,...zL},GL=0});var Jf=D((qme,o1)=>{"use strict";var $l=typeof Reflect=="object"?Reflect:null,sP=$l&&typeof $l.apply=="function"?$l.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Um;$l&&typeof $l.ownKeys=="function"?Um=$l.ownKeys:Object.getOwnPropertySymbols?Um=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Um=function(e){return Object.getOwnPropertyNames(e)};function XL(t){console&&console.warn&&console.warn(t)}var aP=Number.isNaN||function(e){return e!==e};function Mt(){Mt.init.call(this)}o1.exports=Mt;o1.exports.once=eU;Mt.EventEmitter=Mt;Mt.prototype._events=void 0;Mt.prototype._eventsCount=0;Mt.prototype._maxListeners=void 0;var oP=10;function Km(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Mt,"defaultMaxListeners",{enumerable:!0,get:function(){return oP},set:function(t){if(typeof t!="number"||t<0||aP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");oP=t}});Mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Mt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||aP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function uP(t){return t._maxListeners===void 0?Mt.defaultMaxListeners:t._maxListeners}Mt.prototype.getMaxListeners=function(){return uP(this)};Mt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")sP(u,this,r);else for(var c=u.length,l=pP(u,c),n=0;n<c;++n)sP(l[n],this,r);return!0};function cP(t,e,r,n){var s,i,o;if(Km(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=uP(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,XL(a)}return t}Mt.prototype.addListener=function(e,r){return cP(this,e,r,!1)};Mt.prototype.on=Mt.prototype.addListener;Mt.prototype.prependListener=function(e,r){return cP(this,e,r,!0)};function YL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function lP(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=YL.bind(n);return s.listener=r,n.wrapFn=s,s}Mt.prototype.once=function(e,r){return Km(r),this.on(e,lP(this,e,r)),this};Mt.prototype.prependOnceListener=function(e,r){return Km(r),this.prependListener(e,lP(this,e,r)),this};Mt.prototype.removeListener=function(e,r){var n,s,i,o,a;if(Km(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():ZL(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Mt.prototype.off=Mt.prototype.removeListener;Mt.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function dP(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?QL(s):pP(s,s.length)}Mt.prototype.listeners=function(e){return dP(this,e,!0)};Mt.prototype.rawListeners=function(e){return dP(this,e,!1)};Mt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):fP.call(t,e)};Mt.prototype.listenerCount=fP;function fP(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Mt.prototype.eventNames=function(){return this._eventsCount>0?Um(this._events):[]};function pP(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function ZL(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function QL(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function eU(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}hP(t,e,i,{once:!0}),e!=="error"&&tU(t,s,{once:!0})})}function tU(t,e,r){typeof t.on=="function"&&hP(t,"error",e,r)}function hP(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var yP=D((Lme,mP)=>{mP.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var Gf=D(a1=>{"use strict";var gP=yP();a1.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,s){t=function(i,o){i?s(i):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};a1.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){gP(()=>e(null,r))}).catch(function(r){gP(()=>e(r))})}});var Vm=D(u1=>{"use strict";u1.getCallback=function(t,e){return typeof t=="function"?t:e};u1.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var Va=D(Jm=>{"use strict";var{fromCallback:c1}=Gf(),ci=is(),{getOptions:l1,getCallback:vP}=Vm(),Qu=Symbol("promise"),Nl=Symbol("callback"),Ms=Symbol("working"),ec=Symbol("handleOne"),Ro=Symbol("handleMany"),d1=Symbol("autoClose"),Ua=Symbol("finishWork"),js=Symbol("returnMany"),ja=Symbol("closing"),Xf=Symbol("handleClose"),Hm=Symbol("closed"),Yf=Symbol("closeCallbacks"),La=Symbol("keyEncoding"),tc=Symbol("valueEncoding"),f1=Symbol("abortOnClose"),Wm=Symbol("legacy"),p1=Symbol("keys"),h1=Symbol("values"),qa=Symbol("limit"),xi=Symbol("count"),zm=Object.freeze({}),rU=()=>{},bP=!1,Zf=class{constructor(e,r,n){if(typeof e!="object"||e===null){let s=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[Hm]=!1,this[Yf]=[],this[Ms]=!1,this[ja]=!1,this[d1]=!1,this[Nl]=null,this[ec]=this[ec].bind(this),this[Ro]=this[Ro].bind(this),this[Xf]=this[Xf].bind(this),this[La]=r[La],this[tc]=r[tc],this[Wm]=n,this[qa]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[xi]=0,this[f1]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[xi]}get limit(){return this[qa]}next(e){let r;if(e===void 0)r=new Promise((n,s)=>{e=(i,o,a)=>{i?s(i):this[Wm]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[ja]?this.nextTick(e,new ci("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ms]?this.nextTick(e,new ci("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ms]=!0,this[Nl]=e,this[xi]>=this[qa]?this.nextTick(this[ec],null):this._next(this[ec])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=vP(r,n),n=c1(n,Qu),r=l1(r,zm),Number.isInteger(e)?(this[ja]?this.nextTick(n,new ci("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ms]?this.nextTick(n,new ci("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[qa]<1/0&&(e=Math.min(e,this[qa]-this[xi])),this[Ms]=!0,this[Nl]=n,e<=0?this.nextTick(this[Ro],null,[]):this._nextv(e,r,this[Ro])),n[Qu]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Qu])}_nextv(e,r,n){let s=[],i=(o,a,u)=>{if(o)return n(o);if(this[Wm]?a===void 0&&u===void 0:a===void 0)return n(null,s);s.push(this[Wm]?[a,u]:a),s.length===e?n(null,s):this._next(i)};this._next(i)}all(e,r){return r=vP(e,r),r=c1(r,Qu),e=l1(e,zm),this[ja]?this.nextTick(r,new ci("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ms]?this.nextTick(r,new ci("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ms]=!0,this[Nl]=r,this[d1]=!0,this[xi]>=this[qa]?this.nextTick(this[Ro],null,[]):this._all(e,this[Ro])),r[Qu]}_all(e,r){let n=this[xi],s=[],i=()=>{let a=this[qa]<1/0?Math.min(1e3,this[qa]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,zm,o)},o=(a,u)=>{a?r(a):u.length===0?r(null,s):(s.push.apply(s,u),n+=u.length,i())};i()}[Ua](){let e=this[Nl];return this[f1]&&e===null?rU:(this[Ms]=!1,this[Nl]=null,this[ja]&&this._close(this[Xf]),e)}[js](e,r,n){this[d1]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=l1(r,zm),!this[ja]){if(this[Ms])throw new ci("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[La]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});let i=this.db.prefixKey(n.encode(e),s);this._seek(i,r)}}}_seek(e,r){throw new ci("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=c1(e,Qu),this[Hm]?this.nextTick(e):this[ja]?this[Yf].push(e):(this[ja]=!0,this[Yf].push(e),this[Ms]?this[f1]&&this[Ua]()(new ci("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Xf])),e[Qu]}_close(e){this.nextTick(e)}[Xf](){this[Hm]=!0,this.db.detachResource(this);let e=this[Yf];this[Yf]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Hm]||await this.close()}}},Ml=class extends Zf{constructor(e,r){super(e,r,!0),this[p1]=r.keys!==!1,this[h1]=r.values!==!1}[ec](e,r,n){let s=this[Ua]();if(e)return s(e);try{r=this[p1]&&r!==void 0?this[La].decode(r):void 0,n=this[h1]&&n!==void 0?this[tc].decode(n):void 0}catch(i){return s(new Ka("entry",i))}r===void 0&&n===void 0||this[xi]++,s(null,r,n)}[Ro](e,r){let n=this[Ua]();if(e)return this[js](n,e);try{for(let s of r){let i=s[0],o=s[1];s[0]=this[p1]&&i!==void 0?this[La].decode(i):void 0,s[1]=this[h1]&&o!==void 0?this[tc].decode(o):void 0}}catch(s){return this[js](n,new Ka("entries",s))}this[xi]+=r.length,this[js](n,null,r)}end(e){return!bP&&typeof console<"u"&&(bP=!0,console.warn(new ci("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},m1=class extends Zf{constructor(e,r){super(e,r,!1)}[ec](e,r){let n=this[Ua]();if(e)return n(e);try{r=r!==void 0?this[La].decode(r):void 0}catch(s){return n(new Ka("key",s))}r!==void 0&&this[xi]++,n(null,r)}[Ro](e,r){let n=this[Ua]();if(e)return this[js](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[La].decode(i):void 0}}catch(s){return this[js](n,new Ka("keys",s))}this[xi]+=r.length,this[js](n,null,r)}},y1=class extends Zf{constructor(e,r){super(e,r,!1)}[ec](e,r){let n=this[Ua]();if(e)return n(e);try{r=r!==void 0?this[tc].decode(r):void 0}catch(s){return n(new Ka("value",s))}r!==void 0&&this[xi]++,n(null,r)}[Ro](e,r){let n=this[Ua]();if(e)return this[js](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[tc].decode(i):void 0}}catch(s){return this[js](n,new Ka("values",s))}this[xi]+=r.length,this[js](n,null,r)}},Ka=class extends ci{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(Ml.prototype,t.split(" ")[0],{get(){throw new ci(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ci(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});Ml.keyEncoding=La;Ml.valueEncoding=tc;Jm.AbstractIterator=Ml;Jm.AbstractKeyIterator=m1;Jm.AbstractValueIterator=y1});var wP=D(g1=>{"use strict";var{AbstractKeyIterator:nU,AbstractValueIterator:iU}=Va(),rc=Symbol("iterator"),Qf=Symbol("callback"),jl=Symbol("handleOne"),nc=Symbol("handleMany"),ep=class extends nU{constructor(e,r){super(e,r),this[rc]=e.iterator({...r,keys:!0,values:!1}),this[jl]=this[jl].bind(this),this[nc]=this[nc].bind(this)}},Gm=class extends iU{constructor(e,r){super(e,r),this[rc]=e.iterator({...r,keys:!1,values:!0}),this[jl]=this[jl].bind(this),this[nc]=this[nc].bind(this)}};for(let t of[ep,Gm]){let e=t===ep,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[Qf]=n,this[rc].next(this[jl])},t.prototype[jl]=function(n,s,i){let o=this[Qf];n?o(n):o(null,e?s:i)},t.prototype._nextv=function(n,s,i){this[Qf]=i,this[rc].nextv(n,s,this[nc])},t.prototype._all=function(n,s){this[Qf]=s,this[rc].all(n,this[nc])},t.prototype[nc]=function(n,s){let i=this[Qf];n?i(n):i(null,s.map(r))},t.prototype._seek=function(n,s){this[rc].seek(n,s)},t.prototype._close=function(n){this[rc].close(n)}}g1.DefaultKeyIterator=ep;g1.DefaultValueIterator=Gm});var EP=D(ty=>{"use strict";var{AbstractIterator:sU,AbstractKeyIterator:oU,AbstractValueIterator:aU}=Va(),v1=is(),Hn=Symbol("nut"),Qm=Symbol("undefer"),ey=Symbol("factory"),Xm=class extends sU{constructor(e,r){super(e,r),this[Hn]=null,this[ey]=()=>e.iterator(r),this.db.defer(()=>this[Qm]())}},Ym=class extends oU{constructor(e,r){super(e,r),this[Hn]=null,this[ey]=()=>e.keys(r),this.db.defer(()=>this[Qm]())}},Zm=class extends aU{constructor(e,r){super(e,r),this[Hn]=null,this[ey]=()=>e.values(r),this.db.defer(()=>this[Qm]())}};for(let t of[Xm,Ym,Zm])t.prototype[Qm]=function(){this.db.status==="open"&&(this[Hn]=this[ey]())},t.prototype._next=function(e){this[Hn]!==null?this[Hn].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new v1("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Hn]!==null?this[Hn].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new v1("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Hn]!==null?this[Hn].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new v1("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Hn]!==null?this[Hn]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Hn]!==null?this[Hn].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};ty.DeferredIterator=Xm;ty.DeferredKeyIterator=Ym;ty.DeferredValueIterator=Zm});var w1=D(DP=>{"use strict";var{fromCallback:_P}=Gf(),ry=is(),{getCallback:uU,getOptions:cU}=Vm(),ny=Symbol("promise"),Ci=Symbol("status"),ql=Symbol("operations"),tp=Symbol("finishClose"),Ll=Symbol("closeCallbacks"),b1=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[ql]=[],this[Ll]=[],this[Ci]="open",this[tp]=this[tp].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[ql].length}put(e,r,n){if(this[Ci]!=="open")throw new ry("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let s=this.db._checkKey(e)||this.db._checkValue(r);if(s)throw s;let i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),u=i.valueEncoding(n&&n.valueEncoding),c=a.format;n={...n,keyEncoding:c,valueEncoding:u.format},i!==this.db&&(n.sublevel=null);let l=i.prefixKey(a.encode(e),c),d=u.encode(r);return this._put(l,d,n),this[ql].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[Ci]!=="open")throw new ry("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(e),a),r),this[ql].push({...i,type:"del",key:e}),this}_del(e,r){}clear(){if(this[Ci]!=="open")throw new ry("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[ql]=[],this}_clear(){}write(e,r){return r=uU(e,r),r=_P(r,ny),e=cU(e),this[Ci]!=="open"?this.nextTick(r,new ry("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[Ci]="writing",this._write(e,n=>{this[Ci]="closing",this[Ll].push(()=>r(n)),n||this.db.emit("batch",this[ql]),this._close(this[tp])})),r[ny]}_write(e,r){}close(e){return e=_P(e,ny),this[Ci]==="closing"?this[Ll].push(e):this[Ci]==="closed"?this.nextTick(e):(this[Ll].push(e),this[Ci]!=="writing"&&(this[Ci]="closing",this._close(this[tp]))),e[ny]}_close(e){this.nextTick(e)}[tp](){this[Ci]="closed",this.db.detachResource(this);let e=this[Ll];this[Ll]=[];for(let r of e)r()}};DP.AbstractChainedBatch=b1});var AP=D(SP=>{"use strict";var{AbstractChainedBatch:lU}=w1(),dU=is(),Ul=Symbol("encoded"),E1=class extends lU{constructor(e){super(e),this[Ul]=[]}_put(e,r,n){this[Ul].push({...n,type:"put",key:e,value:r})}_del(e,r){this[Ul].push({...r,type:"del",key:e})}_clear(){this[Ul]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[Ul].length===0?this.nextTick(r):this.db._batch(this[Ul],e,r):this.nextTick(r,new dU("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};SP.DefaultChainedBatch=E1});var PP=D((Gme,CP)=>{"use strict";var xP=is(),fU=Object.prototype.hasOwnProperty,pU=new Set(["lt","lte","gt","gte"]);CP.exports=function(t,e){let r={};for(let n in t)if(fU.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new xP(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new xP("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});pU.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var _1=D((Xme,kP)=>{var OP;kP.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(OP||(OP=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var TP=D((Yme,IP)=>{"use strict";var BP=_1();IP.exports=function(t,...e){e.length===0?BP(t):BP(()=>t(...e))}});var FP=D(iy=>{"use strict";var{AbstractIterator:hU,AbstractKeyIterator:mU,AbstractValueIterator:yU}=Va(),Kl=Symbol("unfix"),ss=Symbol("iterator"),ic=Symbol("handleOne"),Ha=Symbol("handleMany"),$o=Symbol("callback"),rp=class extends hU{constructor(e,r,n,s){super(e,r),this[ss]=n,this[Kl]=s,this[ic]=this[ic].bind(this),this[Ha]=this[Ha].bind(this),this[$o]=null}[ic](e,r,n){let s=this[$o];if(e)return s(e);r!==void 0&&(r=this[Kl](r)),s(e,r,n)}[Ha](e,r){let n=this[$o];if(e)return n(e);for(let s of r){let i=s[0];i!==void 0&&(s[0]=this[Kl](i))}n(e,r)}},np=class extends mU{constructor(e,r,n,s){super(e,r),this[ss]=n,this[Kl]=s,this[ic]=this[ic].bind(this),this[Ha]=this[Ha].bind(this),this[$o]=null}[ic](e,r){let n=this[$o];if(e)return n(e);r!==void 0&&(r=this[Kl](r)),n(e,r)}[Ha](e,r){let n=this[$o];if(e)return n(e);for(let s=0;s<r.length;s++){let i=r[s];i!==void 0&&(r[s]=this[Kl](i))}n(e,r)}},ip=class extends yU{constructor(e,r,n){super(e,r),this[ss]=n}};for(let t of[rp,np])t.prototype._next=function(e){this[$o]=e,this[ss].next(this[ic])},t.prototype._nextv=function(e,r,n){this[$o]=n,this[ss].nextv(e,r,this[Ha])},t.prototype._all=function(e,r){this[$o]=r,this[ss].all(e,this[Ha])};for(let t of[ip])t.prototype._next=function(e){this[ss].next(e)},t.prototype._nextv=function(e,r,n){this[ss].nextv(e,r,n)},t.prototype._all=function(e,r){this[ss].all(e,r)};for(let t of[rp,np,ip])t.prototype._seek=function(e,r){this[ss].seek(e,r)},t.prototype._close=function(e){this[ss].close(e)};iy.AbstractSublevelIterator=rp;iy.AbstractSublevelKeyIterator=np;iy.AbstractSublevelValueIterator=ip});var MP=D((Qme,NP)=>{"use strict";var D1=is(),{Buffer:x1}=Ai()||{},{AbstractSublevelIterator:gU,AbstractSublevelKeyIterator:vU,AbstractSublevelValueIterator:bU}=FP(),No=Symbol("prefix"),RP=Symbol("upperBound"),sp=Symbol("prefixRange"),li=Symbol("parent"),S1=Symbol("unfix"),$P=new TextEncoder,wU={separator:"!"};NP.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new D1("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new D1("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?wU:n.separator?n:{...n,separator:"!"}}constructor(n,s,i){let{separator:o,manifest:a,...u}=e.defaults(i);s=_U(s,o);let c=o.charCodeAt(0)+1,l=n[li]||n;if(!$P.encode(s).every(f=>f>c&&f<127))throw new D1(`Prefix must use bytes > ${c} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(EU(l,a),u);let d=(n.prefix||"")+o+s+o,h=d.slice(0,-1)+String.fromCharCode(c);this[li]=l,this[No]=new sy(d),this[RP]=new sy(h),this[S1]=new C1,this.nextTick=l.nextTick}prefixKey(n,s){if(s==="utf8")return this[No].utf8+n;if(n.byteLength===0)return this[No][s];if(s==="view"){let i=this[No].view,o=new Uint8Array(i.byteLength+n.byteLength);return o.set(i,0),o.set(n,i.byteLength),o}else{let i=this[No].buffer;return x1.concat([i,n],i.byteLength+n.byteLength)}}[sp](n,s){n.gte!==void 0?n.gte=this.prefixKey(n.gte,s):n.gt!==void 0?n.gt=this.prefixKey(n.gt,s):n.gte=this[No][s],n.lte!==void 0?n.lte=this.prefixKey(n.lte,s):n.lt!==void 0?n.lt=this.prefixKey(n.lt,s):n.lte=this[RP][s]}get prefix(){return this[No].utf8}get db(){return this[li]}_open(n,s){this[li].open({passive:!0},s)}_put(n,s,i,o){this[li].put(n,s,i,o)}_get(n,s,i){this[li].get(n,s,i)}_getMany(n,s,i){this[li].getMany(n,s,i)}_del(n,s,i){this[li].del(n,s,i)}_batch(n,s,i){this[li].batch(n,s,i)}_clear(n,s){this[sp](n,n.keyEncoding),this[li].clear(n,s)}_iterator(n){this[sp](n,n.keyEncoding);let s=this[li].iterator(n),i=this[S1].get(this[No].utf8.length,n.keyEncoding);return new gU(this,n,s,i)}_keys(n){this[sp](n,n.keyEncoding);let s=this[li].keys(n),i=this[S1].get(this[No].utf8.length,n.keyEncoding);return new vU(this,n,s,i)}_values(n){this[sp](n,n.keyEncoding);let s=this[li].values(n);return new bU(this,n,s)}}return{AbstractSublevel:e}};var EU=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:A1(t,"utf8"),buffer:A1(t,"buffer"),view:A1(t,"view")}}},A1=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},sy=class{constructor(e){this.utf8=e,this.view=$P.encode(e),this.buffer=x1?x1.from(this.view.buffer,0,this.view.byteLength):{}}},C1=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=function(s,i){return i.subarray(s)}.bind(null,e):n=function(s,i){return i.slice(s)}.bind(null,e),this.cache.set(r,n)),n}},_U=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var I1=D(B1=>{"use strict";var{supports:DU}=PC(),{Transcoder:SU}=iP(),{EventEmitter:AU}=Jf(),{fromCallback:Wa}=Gf(),os=is(),{AbstractIterator:sc}=Va(),{DefaultKeyIterator:xU,DefaultValueIterator:CU}=wP(),{DeferredIterator:PU,DeferredKeyIterator:OU,DeferredValueIterator:kU}=EP(),{DefaultChainedBatch:jP}=AP(),{getCallback:oc,getOptions:za}=Vm(),oy=PP(),rt=Symbol("promise"),Mo=Symbol("landed"),ac=Symbol("resources"),P1=Symbol("closeResources"),op=Symbol("operations"),ap=Symbol("undefer"),ay=Symbol("deferOpen"),qP=Symbol("options"),mt=Symbol("status"),uc=Symbol("defaultOptions"),Vl=Symbol("transcoder"),uy=Symbol("keyEncoding"),O1=Symbol("valueEncoding"),BU=()=>{},up=class extends AU{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=za(r);let{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[ac]=new Set,this[op]=[],this[ay]=!0,this[qP]=o,this[mt]="opening",this.supports=DU(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Vl]=new SU(IU(this)),this[uy]=this[Vl].encoding(n||"utf8"),this[O1]=this[Vl].encoding(s||"utf8");for(let a of this[Vl].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[uc]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[uy].commonName,valueEncoding:this[O1].commonName}),key:Object.freeze({keyEncoding:this[uy].commonName})},this.nextTick(()=>{this[ay]&&this.open({passive:!1},BU)})}get status(){return this[mt]}keyEncoding(e){return this[Vl].encoding(e??this[uy])}valueEncoding(e){return this[Vl].encoding(e??this[O1])}open(e,r){r=oc(e,r),r=Wa(r,rt),e={...this[qP],...za(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=s=>{this[mt]==="closing"||this[mt]==="opening"?this.once(Mo,s?()=>n(s):n):this[mt]!=="open"?r(new os("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return e.passive?this[mt]==="opening"?this.once(Mo,n):this.nextTick(n):this[mt]==="closed"||this[ay]?(this[ay]=!1,this[mt]="opening",this.emit("opening"),this._open(e,s=>{if(s){this[mt]="closed",this[P1](()=>{this.emit(Mo),n(s)}),this[ap]();return}this[mt]="open",this[ap](),this.emit(Mo),this[mt]==="open"&&this.emit("open"),this[mt]==="open"&&this.emit("ready"),n()})):this[mt]==="open"?this.nextTick(n):this.once(Mo,()=>this.open(e,r)),r[rt]}_open(e,r){this.nextTick(r)}close(e){e=Wa(e,rt);let r=n=>{this[mt]==="opening"||this[mt]==="closing"?this.once(Mo,n?r(n):r):this[mt]!=="closed"?e(new os("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[mt]==="open"){this[mt]="closing",this.emit("closing");let n=s=>{this[mt]="open",this[ap](),this.emit(Mo),r(s)};this[P1](()=>{this._close(s=>{if(s)return n(s);this[mt]="closed",this[ap](),this.emit(Mo),this[mt]==="closed"&&this.emit("closed"),r()})})}else this[mt]==="closed"?this.nextTick(r):this.once(Mo,()=>this.close(e));return e[rt]}[P1](e){if(this[ac].size===0)return this.nextTick(e);let r=this[ac].size,n=!0,s=()=>{--r===0&&(n?this.nextTick(e):e())};for(let i of this[ac])i.close(s);n=!1,this[ac].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=oc(r,n),n=Wa(n,rt),r=za(r,this[uc].entry),this[mt]==="opening")return this.defer(()=>this.get(e,r,n)),n[rt];if(Hl(this,n))return n[rt];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[rt];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,u=o.format;return(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),a),r,(c,l)=>{if(c)return(c.code==="LEVEL_NOT_FOUND"||c.notFound||/NotFound/i.test(c))&&(c.code||(c.code="LEVEL_NOT_FOUND"),c.notFound||(c.notFound=!0),c.status||(c.status=404)),n(c);try{l=o.decode(l)}catch(d){return n(new os("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[rt]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=oc(r,n),n=Wa(n,rt),r=za(r,this[uc].entry),this[mt]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[rt];if(Hl(this,n))return n[rt];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[rt];if(e.length===0)return this.nextTick(n,null,[]),n[rt];let s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));let u=new Array(e.length);for(let c=0;c<e.length;c++){let l=e[c],d=this._checkKey(l);if(d)return this.nextTick(n,d),n[rt];u[c]=this.prefixKey(s.encode(l),o)}return this._getMany(u,r,(c,l)=>{if(c)return n(c);try{for(let d=0;d<l.length;d++)l[d]!==void 0&&(l[d]=i.decode(l[d]))}catch(d){return n(new os(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[rt]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,s){if(s=oc(n,s),s=Wa(s,rt),n=za(n,this[uc].entry),this[mt]==="opening")return this.defer(()=>this.put(e,r,n,s)),s[rt];if(Hl(this,s))return s[rt];let i=this._checkKey(e)||this._checkValue(r);if(i)return this.nextTick(s,i),s[rt];let o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),u=o.format,c=a.format;(n.keyEncoding!==u||n.valueEncoding!==c)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:c}));let l=this.prefixKey(o.encode(e),u),d=a.encode(r);return this._put(l,d,n,h=>{if(h)return s(h);this.emit("put",e,r),s()}),s[rt]}_put(e,r,n,s){this.nextTick(s)}del(e,r,n){if(n=oc(r,n),n=Wa(n,rt),r=za(r,this[uc].key),this[mt]==="opening")return this.defer(()=>this.del(e,r,n)),n[rt];if(Hl(this,n))return n[rt];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[rt];let i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[rt]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[mt]==="opening")return new jP(this);if(this[mt]!=="open")throw new os("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=oc(r,n),n=Wa(n,rt),r=za(r,this[uc].empty),this[mt]==="opening")return this.defer(()=>this.batch(e,r,n)),n[rt];if(Hl(this,n))return n[rt];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[rt];if(e.length===0)return this.nextTick(n),n[rt];let s=new Array(e.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[rt];let c=Object.assign({},e[u]);if(c.type!=="put"&&c.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[rt];let l=this._checkKey(c.key);if(l)return this.nextTick(n,l),n[rt];let d=c.sublevel!=null?c.sublevel:this,h=d.keyEncoding(c.keyEncoding||i),f=h.format;if(c.key=d.prefixKey(h.encode(c.key),f),c.keyEncoding=f,c.type==="put"){let p=this._checkValue(c.value);if(p)return this.nextTick(n,p),n[rt];let g=d.valueEncoding(c.valueEncoding||o);c.value=g.encode(c.value),c.valueEncoding=g.format}d!==this&&(c.sublevel=null),s[u]=c}return this._batch(s,a,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[rt]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,k1.defaults(r))}_sublevel(e,r){return new k1(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=oc(e,r),r=Wa(r,rt),e=za(e,this[uc].empty),this[mt]==="opening")return this.defer(()=>this.clear(e,r)),r[rt];if(Hl(this,r))return r[rt];let n=e,s=this.keyEncoding(e.keyEncoding);return e=oy(e,s),e.keyEncoding=s.format,e.limit===0?this.nextTick(r):this._clear(e,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[rt]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=oy(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[sc.keyEncoding]=r,e[sc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[mt]==="opening")return new PU(this,e);if(this[mt]!=="open")throw new os("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new sc(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=oy(e,r),e[sc.keyEncoding]=r,e[sc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[mt]==="opening")return new OU(this,e);if(this[mt]!=="open")throw new os("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new xU(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=oy(e,r),e[sc.keyEncoding]=r,e[sc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[mt]==="opening")return new kU(this,e);if(this[mt]!=="open")throw new os("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new CU(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[op].push(e)}[ap](){if(this[op].length===0)return;let e=this[op];this[op]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[ac].add(e)}detachResource(e){this[ac].delete(e)}_chainedBatch(){return new jP(this)}_checkKey(e){if(e==null)return new os("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new os("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};up.prototype.nextTick=TP();var{AbstractSublevel:k1}=MP()({AbstractLevel:up});B1.AbstractLevel=up;B1.AbstractSublevel=k1;var Hl=function(t,e){return t[mt]!=="open"?(t.nextTick(e,new os("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},IU=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var T1=D(cc=>{"use strict";cc.AbstractLevel=I1().AbstractLevel;cc.AbstractSublevel=I1().AbstractSublevel;cc.AbstractIterator=Va().AbstractIterator;cc.AbstractKeyIterator=Va().AbstractKeyIterator;cc.AbstractValueIterator=Va().AbstractValueIterator;cc.AbstractChainedBatch=w1().AbstractChainedBatch});var UP=D((rye,LP)=>{LP.exports=FU;var TU=_1();function FU(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,u=!0,c;Array.isArray(t)?(n=[],i=s=t.length):(o=Object.keys(t),n={},i=s=o.length);function l(h){function f(){r&&r(h,n),r=null}u?TU(f):f()}function d(h,f,p){if(n[h]=p,f&&(a=!0),--i===0||f)l(f);else if(!a&&c<s){let g;o?(g=o[c],c+=1,t[g](function(w,P){d(g,w,P)})):(g=c,c+=1,t[g](function(w,P){d(g,w,P)}))}}c=e,i?o?o.some(function(h,f){return t[h](function(p,g){d(h,p,g)}),f===e-1}):t.some(function(h,f){return h(function(p,g){d(f,p,g)}),f===e-1}):l(null),u=!1}});var F1=D((nye,KP)=>{"use strict";KP.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null}});var R1=D((iye,VP)=>{"use strict";var RU=new TextEncoder;VP.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):RU.encode(t)}});var GP=D(JP=>{"use strict";var{AbstractIterator:$U}=T1(),HP=F1(),cy=R1(),qs=Symbol("cache"),jo=Symbol("finished"),di=Symbol("options"),qo=Symbol("currentOptions"),lc=Symbol("position"),$1=Symbol("location"),Wl=Symbol("first"),WP={},N1=class extends $U{constructor(e,r,n){super(e,n),this[qs]=[],this[jo]=this.limit===0,this[di]=n,this[qo]={...n},this[lc]=void 0,this[$1]=r,this[Wl]=!0}_nextv(e,r,n){if(this[Wl]=!1,this[jo])return this.nextTick(n,null,[]);if(this[qs].length>0)return e=Math.min(e,this[qs].length),this.nextTick(n,null,this[qs].splice(0,e));this[lc]!==void 0&&(this[di].reverse?(this[qo].lt=this[lc],this[qo].lte=void 0):(this[qo].gt=this[lc],this[qo].gte=void 0));let s;try{s=HP(this[qo])}catch{return this[jo]=!0,this.nextTick(n,null,[])}let i=this.db.db.transaction([this[$1]],"readonly"),o=i.objectStore(this[$1]),a=[];if(this[di].reverse){let u=!this[di].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](s,"prev").onsuccess=c=>{let l=c.target.result;if(l){let{key:d,value:h}=l;this[lc]=d,a.push([this[di].keys&&d!==void 0?cy(d):void 0,this[di].values&&h!==void 0?cy(h):void 0]),a.length<e?l.continue():zP(i)}else this[jo]=!0}}else{let u,c,l=()=>{if(u===void 0||c===void 0)return;let d=Math.max(u.length,c.length);d===0||e===1/0?this[jo]=!0:this[lc]=u[d-1],a.length=d;for(let h=0;h<d;h++){let f=u[h],p=c[h];a[h]=[this[di].keys&&f!==void 0?cy(f):void 0,this[di].values&&p!==void 0?cy(p):void 0]}zP(i)};this[di].keys||e<1/0?o.getAllKeys(s,e<1/0?e:void 0).onsuccess=d=>{u=d.target.result,l()}:(u=[],this.nextTick(l)),this[di].values?o.getAll(s,e<1/0?e:void 0).onsuccess=d=>{c=d.target.result,l()}:(c=[],this.nextTick(l))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[qs].length>0){let[r,n]=this[qs].shift();this.nextTick(e,null,r,n)}else if(this[jo])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[Wl]&&(this[Wl]=!1,r=1),this._nextv(r,WP,(n,s)=>{if(n)return e(n);this[qs]=s,this._next(e)})}}_all(e,r){this[Wl]=!1;let n=this[qs].splice(0,this[qs].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,WP,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[Wl]=!0,this[qs]=[],this[jo]=!1,this[lc]=void 0,this[qo]={...this[di]};let n;try{n=HP(this[di])}catch{this[jo]=!0;return}n!==null&&!n.includes(e)?this[jo]=!0:this[di].reverse?this[qo].lte=e:this[qo].gte=e}};JP.Iterator=N1;function zP(t){typeof t.commit=="function"&&t.commit()}});var YP=D((oye,XP)=>{"use strict";XP.exports=function(e,r,n,s,i){if(s.limit===0)return e.nextTick(i);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),u=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};let c=a.openKeyCursor?"openKeyCursor":"openCursor",l=s.reverse?"prev":"next";a[c](n,l).onsuccess=function(d){let h=d.target.result;h&&(a.delete(h.key).onsuccess=function(){(s.limit<=0||++u<s.limit)&&h.continue()})}}});var nO=D(rO=>{"use strict";var{AbstractLevel:NU}=T1(),ZP=is(),MU=UP(),{fromCallback:jU}=Gf(),{Iterator:qU}=GP(),QP=R1(),LU=YP(),UU=F1(),tO="level-js-",cp=Symbol("idb"),M1=Symbol("namePrefix"),Lo=Symbol("location"),j1=Symbol("version"),dc=Symbol("store"),lp=Symbol("onComplete"),eO=Symbol("promise"),ly=class extends NU{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new ZP("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[Lo]=e,this[M1]=s??tO,this[j1]=parseInt(i||1,10),this[cp]=null}get location(){return this[Lo]}get namePrefix(){return this[M1]}get version(){return this[j1]}get db(){return this[cp]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[M1]+this[Lo],this[j1]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[cp]=n.result,r()},n.onupgradeneeded=s=>{let i=s.target.result;i.objectStoreNames.contains(this[Lo])||i.createObjectStore(this[Lo])}}[dc](e){return this[cp].transaction([this[Lo]],e).objectStore(this[Lo])}[lp](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let s=this[dc]("readonly"),i;try{i=s.get(e)}catch(o){return this.nextTick(n,o)}this[lp](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new ZP("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,QP(a))})}_getMany(e,r,n){let s=this[dc]("readonly"),i=e.map(o=>a=>{let u;try{u=s.get(o)}catch(c){return a(c)}u.onsuccess=()=>{let c=u.result;a(null,c===void 0?c:QP(c))},u.onerror=c=>{c.stopPropagation(),a(u.error)}});MU(i,16,n)}_del(e,r,n){let s=this[dc]("readwrite"),i;try{i=s.delete(e)}catch(o){return this.nextTick(n,o)}this[lp](i,n)}_put(e,r,n,s){let i=this[dc]("readwrite"),o;try{o=i.put(r,e)}catch(a){return this.nextTick(s,a)}this[lp](o,s)}_iterator(e){return new qU(this,this[Lo],e)}_batch(e,r,n){let s=this[dc]("readwrite"),i=s.transaction,o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function u(){let c=e[o++],l=c.key,d;try{d=c.type==="del"?s.delete(l):s.put(c.value,l)}catch(h){a=h,i.abort();return}o<e.length?d.onsuccess=u:typeof i.commit=="function"&&i.commit()}u()}_clear(e,r){let n,s;try{n=UU(e)}catch{return this.nextTick(r)}if(e.limit>=0)return LU(this,this[Lo],n,e,r);try{let i=this[dc]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[lp](s,r)}_close(e){this[cp].close(),this.nextTick(e)}};ly.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=tO),r=jU(r,eO);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[eO]};rO.BrowserLevel=ly});var q1=D(iO=>{iO.Level=nO().BrowserLevel});var Or=D((fye,sO)=>{"use strict";sO.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var Ls=D((pye,U1)=>{"use strict";var VU=Ai(),HU=Object.getPrototypeOf(async function(){}).constructor,oO=globalThis.Blob||VU.Blob,WU=typeof oO<"u"?function(e){return e instanceof oO}:function(e){return!1},L1=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};U1.exports={AggregateError:L1,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...s)=>n?r(n):e(...s))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let s=e.shift();return n==="f"?s.toFixed(6):n==="j"?JSON.stringify(s):n==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof HU},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:WU};U1.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var py=D((hye,fy)=>{"use strict";var{AbortController:aO,AbortSignal:zU}=typeof self<"u"?self:typeof window<"u"?window:void 0;fy.exports=aO;fy.exports.AbortSignal=zU;fy.exports.default=aO});var Bn=D((mye,lO)=>{"use strict";var{format:JU,inspect:hy,AggregateError:GU}=Ls(),XU=globalThis.AggregateError||GU,YU=Symbol("kIsNodeError"),ZU=["string","function","number","object","Function","Object","boolean","bigint","symbol"],QU=/^([A-Z][a-z0-9]*)+$/,eK="__node_internal_",my={};function pc(t,e){if(!t)throw new my.ERR_INTERNAL_ASSERTION(e)}function uO(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function tK(t,e,r){if(typeof e=="function")return pc(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return pc(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:JU(e,...r)}function on(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(tK(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[YU]=!0,my[t]=n}function cO(t){let e=eK+t.name;return Object.defineProperty(t,"name",{value:e}),t}function rK(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new XU([e,t],e.message);return r.code=e.code,r}return t||e}var K1=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new my.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};on("ERR_ASSERTION","%s",Error);on("ERR_INVALID_ARG_TYPE",(t,e,r)=>{pc(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let s=[],i=[],o=[];for(let u of e)pc(typeof u=="string","All expected entries have to be of type string"),ZU.includes(u)?s.push(u.toLowerCase()):QU.test(u)?i.push(u):(pc(u!=="object",'The value "object" should be written as "Object"'),o.push(u));if(i.length>0){let u=s.indexOf("object");u!==-1&&(s.splice(s,u,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of type ${s.join(", ")}, or ${u}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`an instance of ${i.join(", ")}, or ${u}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`one of ${o.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=hy(r,{depth:-1});n+=`. Received ${u}`}}else{let u=hy(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);on("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=hy(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);on("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError);on("ERR_MISSING_ARGS",(...t)=>{pc(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);on("ERR_OUT_OF_RANGE",(t,e,r)=>{pc(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=uO(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=uO(n)),n+="n"):n=hy(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);on("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);on("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);on("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);on("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);on("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);on("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);on("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);on("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);on("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);on("ERR_STREAM_WRITE_AFTER_END","write after end",Error);on("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);lO.exports={AbortError:K1,aggregateTwoErrors:cO(rK),hideStackFrames:cO,codes:my}});var dp=D((yye,bO)=>{"use strict";var{ArrayIsArray:H1,ArrayPrototypeIncludes:hO,ArrayPrototypeJoin:mO,ArrayPrototypeMap:nK,NumberIsInteger:W1,NumberIsNaN:iK,NumberMAX_SAFE_INTEGER:sK,NumberMIN_SAFE_INTEGER:oK,NumberParseInt:aK,ObjectPrototypeHasOwnProperty:uK,RegExpPrototypeExec:yO,String:cK,StringPrototypeToUpperCase:lK,StringPrototypeTrim:dK}=Or(),{hideStackFrames:Pi,codes:{ERR_SOCKET_BAD_PORT:fK,ERR_INVALID_ARG_TYPE:In,ERR_INVALID_ARG_VALUE:zl,ERR_OUT_OF_RANGE:hc,ERR_UNKNOWN_SIGNAL:dO}}=Bn(),{normalizeEncoding:pK}=Ls(),{isAsyncFunction:hK,isArrayBufferView:mK}=Ls().types,fO={};function yK(t){return t===(t|0)}function gK(t){return t===t>>>0}var vK=/^[0-7]+$/,bK="must be a 32-bit unsigned integer or an octal string";function wK(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(yO(vK,t)===null)throw new zl(e,t,bK);t=aK(t,8)}return gO(t,e),t}var EK=Pi((t,e,r=oK,n=sK)=>{if(typeof t!="number")throw new In(e,"number",t);if(!W1(t))throw new hc(e,"an integer",t);if(t<r||t>n)throw new hc(e,`>= ${r} && <= ${n}`,t)}),_K=Pi((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new In(e,"number",t);if(!W1(t))throw new hc(e,"an integer",t);if(t<r||t>n)throw new hc(e,`>= ${r} && <= ${n}`,t)}),gO=Pi((t,e,r=!1)=>{if(typeof t!="number")throw new In(e,"number",t);if(!W1(t))throw new hc(e,"an integer",t);let n=r?1:0,s=4294967295;if(t<n||t>s)throw new hc(e,`>= ${n} && <= ${s}`,t)});function z1(t,e){if(typeof t!="string")throw new In(e,"string",t)}function DK(t,e,r=void 0,n){if(typeof t!="number")throw new In(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&iK(t))throw new hc(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var SK=Pi((t,e,r)=>{if(!hO(r,t)){let s="must be one of: "+mO(nK(r,i=>typeof i=="string"?`'${i}'`:cK(i)),", ");throw new zl(e,t,s)}});function vO(t,e){if(typeof t!="boolean")throw new In(e,"boolean",t)}function V1(t,e,r){return t==null||!uK(t,e)?r:t[e]}var AK=Pi((t,e,r=null)=>{let n=V1(r,"allowArray",!1),s=V1(r,"allowFunction",!1);if(!V1(r,"nullable",!1)&&t===null||!n&&H1(t)||typeof t!="object"&&(!s||typeof t!="function"))throw new In(e,"Object",t)}),xK=Pi((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new In(e,"a dictionary",t)}),J1=Pi((t,e,r=0)=>{if(!H1(t))throw new In(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new zl(e,t,n)}});function CK(t,e){J1(t,e);for(let r=0;r<t.length;r++)z1(t[r],`${e}[${r}]`)}function PK(t,e){J1(t,e);for(let r=0;r<t.length;r++)vO(t[r],`${e}[${r}]`)}function OK(t,e="signal"){if(z1(t,e),fO[t]===void 0)throw fO[lK(t)]!==void 0?new dO(t+" (signals must use all capital letters)"):new dO(t)}var kK=Pi((t,e="buffer")=>{if(!mK(t))throw new In(e,["Buffer","TypedArray","DataView"],t)});function BK(t,e){let r=pK(e),n=t.length;if(r==="hex"&&n%2!==0)throw new zl("encoding",e,`is invalid for data of length ${n}`)}function IK(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&dK(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new fK(e,t,r);return t|0}var TK=Pi((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new In(e,"AbortSignal",t)}),FK=Pi((t,e)=>{if(typeof t!="function")throw new In(e,"Function",t)}),RK=Pi((t,e)=>{if(typeof t!="function"||hK(t))throw new In(e,"Function",t)}),$K=Pi((t,e)=>{if(t!==void 0)throw new In(e,"undefined",t)});function NK(t,e,r){if(!hO(r,t))throw new In(e,`('${mO(r,"|")}')`,t)}var MK=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function pO(t,e){if(typeof t>"u"||!yO(MK,t))throw new zl(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function jK(t){if(typeof t=="string")return pO(t,"hints"),t;if(H1(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let s=t[n];pO(s,"hints"),r+=s,n!==e-1&&(r+=", ")}return r}throw new zl("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}bO.exports={isInt32:yK,isUint32:gK,parseFileMode:wK,validateArray:J1,validateStringArray:CK,validateBooleanArray:PK,validateBoolean:vO,validateBuffer:kK,validateDictionary:xK,validateEncoding:BK,validateFunction:FK,validateInt32:_K,validateInteger:EK,validateNumber:DK,validateObject:AK,validateOneOf:SK,validatePlainFunction:RK,validatePort:IK,validateSignalName:OK,validateString:z1,validateUint32:gO,validateUndefined:$K,validateUnion:NK,validateAbortSignal:TK,validateLinkHeaderValue:jK}});var Ja=D((gye,DO)=>{var _r=DO.exports={},Us,Ks;function G1(){throw new Error("setTimeout has not been defined")}function X1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Us=setTimeout:Us=G1}catch{Us=G1}try{typeof clearTimeout=="function"?Ks=clearTimeout:Ks=X1}catch{Ks=X1}})();function wO(t){if(Us===setTimeout)return setTimeout(t,0);if((Us===G1||!Us)&&setTimeout)return Us=setTimeout,setTimeout(t,0);try{return Us(t,0)}catch{try{return Us.call(null,t,0)}catch{return Us.call(this,t,0)}}}function qK(t){if(Ks===clearTimeout)return clearTimeout(t);if((Ks===X1||!Ks)&&clearTimeout)return Ks=clearTimeout,clearTimeout(t);try{return Ks(t)}catch{try{return Ks.call(null,t)}catch{return Ks.call(this,t)}}}var Uo=[],Jl=!1,mc,yy=-1;function LK(){!Jl||!mc||(Jl=!1,mc.length?Uo=mc.concat(Uo):yy=-1,Uo.length&&EO())}function EO(){if(!Jl){var t=wO(LK);Jl=!0;for(var e=Uo.length;e;){for(mc=Uo,Uo=[];++yy<e;)mc&&mc[yy].run();yy=-1,e=Uo.length}mc=null,Jl=!1,qK(t)}}_r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Uo.push(new _O(t,e)),Uo.length===1&&!Jl&&wO(EO)};function _O(t,e){this.fun=t,this.array=e}_O.prototype.run=function(){this.fun.apply(null,this.array)};_r.title="browser";_r.browser=!0;_r.env={};_r.argv=[];_r.version="";_r.versions={};function Ko(){}_r.on=Ko;_r.addListener=Ko;_r.once=Ko;_r.off=Ko;_r.removeListener=Ko;_r.removeAllListeners=Ko;_r.emit=Ko;_r.prependListener=Ko;_r.prependOnceListener=Ko;_r.listeners=function(t){return[]};_r.binding=function(t){throw new Error("process.binding is not supported")};_r.cwd=function(){return"/"};_r.chdir=function(t){throw new Error("process.chdir is not supported")};_r.umask=function(){return 0}});var Hs=D((vye,jO)=>{"use strict";var{Symbol:gy,SymbolAsyncIterator:SO,SymbolIterator:AO,SymbolFor:xO}=Or(),CO=gy("kDestroyed"),PO=gy("kIsErrored"),Y1=gy("kIsReadable"),OO=gy("kIsDisturbed"),UK=xO("nodejs.webstream.isClosedPromise"),KK=xO("nodejs.webstream.controllerErrorFunction");function vy(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function by(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function VK(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Vs(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function kO(t){return!!(t&&!Vs(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function BO(t){return!!(t&&!Vs(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function IO(t){return!!(t&&!Vs(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function HK(t){return kO(t)||BO(t)||IO(t)}function WK(t,e){return t==null?!1:e===!0?typeof t[SO]=="function":e===!1?typeof t[AO]=="function":typeof t[SO]=="function"||typeof t[AO]=="function"}function wy(t){if(!Vs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[CO]||n!=null&&n.destroyed)}function TO(t){if(!by(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function zK(t,e){if(!by(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function JK(t){if(!vy(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function FO(t,e){if(!vy(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function RO(t){return t&&t[Y1]!=null?t[Y1]:typeof t?.readable!="boolean"?null:wy(t)?!1:vy(t)&&t.readable&&!FO(t)}function $O(t){return typeof t?.writable!="boolean"?null:wy(t)?!1:by(t)&&t.writable&&!TO(t)}function GK(t,e){return Vs(t)?wy(t)?!0:!(e?.readable!==!1&&RO(t)||e?.writable!==!1&&$O(t)):null}function XK(t){var e,r;return Vs(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function YK(t){var e,r;return Vs(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function ZK(t){if(!Vs(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&NO(t)?t._closed:null}function NO(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function MO(t){return typeof t._sent100=="boolean"&&NO(t)}function QK(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function eV(t){if(!Vs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&MO(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function tV(t){var e;return!!(t&&((e=t[OO])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function rV(t){var e,r,n,s,i,o,a,u,c,l;return!!(t&&((e=(r=(n=(s=(i=(o=t[PO])!==null&&o!==void 0?o:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&s!==void 0?s:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}jO.exports={kDestroyed:CO,isDisturbed:tV,kIsDisturbed:OO,isErrored:rV,kIsErrored:PO,isReadable:RO,kIsReadable:Y1,kIsClosedPromise:UK,kControllerErrorFunction:KK,isClosed:ZK,isDestroyed:wy,isDuplexNodeStream:VK,isFinished:GK,isIterable:WK,isReadableNodeStream:vy,isReadableStream:kO,isReadableEnded:JK,isReadableFinished:FO,isReadableErrored:YK,isNodeStream:Vs,isWebStream:HK,isWritable:$O,isWritableNodeStream:by,isWritableStream:BO,isWritableEnded:TO,isWritableFinished:zK,isWritableErrored:XK,isServerRequest:QK,isServerResponse:MO,willEmitClose:eV,isTransformStream:IO}});var Vo=D((bye,rw)=>{var Ga=Ja(),{AbortError:JO,codes:nV}=Bn(),{ERR_INVALID_ARG_TYPE:iV,ERR_STREAM_PREMATURE_CLOSE:qO}=nV,{kEmptyObject:Q1,once:ew}=Ls(),{validateAbortSignal:sV,validateFunction:oV,validateObject:aV,validateBoolean:uV}=dp(),{Promise:cV,PromisePrototypeThen:lV}=Or(),{isClosed:dV,isReadable:LO,isReadableNodeStream:Z1,isReadableStream:fV,isReadableFinished:UO,isReadableErrored:KO,isWritable:VO,isWritableNodeStream:HO,isWritableStream:pV,isWritableFinished:WO,isWritableErrored:zO,isNodeStream:hV,willEmitClose:mV,kIsClosedPromise:yV}=Hs();function gV(t){return t.setHeader&&typeof t.abort=="function"}var tw=()=>{};function GO(t,e,r){var n,s;if(arguments.length===2?(r=e,e=Q1):e==null?e=Q1:aV(e,"options"),oV(r,"callback"),sV(e.signal,"options.signal"),r=ew(r),fV(t)||pV(t))return vV(t,e,r);if(!hV(t))throw new iV("stream",["ReadableStream","WritableStream","Stream"],t);let i=(n=e.readable)!==null&&n!==void 0?n:Z1(t),o=(s=e.writable)!==null&&s!==void 0?s:HO(t),a=t._writableState,u=t._readableState,c=()=>{t.writable||h()},l=mV(t)&&Z1(t)===i&&HO(t)===o,d=WO(t,!1),h=()=>{d=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||i))&&(!i||f)&&r.call(t)},f=UO(t,!1),p=()=>{f=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||o))&&(!o||d)&&r.call(t)},g=B=>{r.call(t,B)},w=dV(t),P=()=>{w=!0;let B=zO(t)||KO(t);if(B&&typeof B!="boolean")return r.call(t,B);if(i&&!f&&Z1(t,!0)&&!UO(t,!1))return r.call(t,new qO);if(o&&!d&&!WO(t,!1))return r.call(t,new qO);r.call(t)},C=()=>{w=!0;let B=zO(t)||KO(t);if(B&&typeof B!="boolean")return r.call(t,B);r.call(t)},v=()=>{t.req.on("finish",h)};gV(t)?(t.on("complete",h),l||t.on("abort",P),t.req?v():t.on("request",v)):o&&!a&&(t.on("end",c),t.on("close",c)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",P),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",g),t.on("close",P),w?Ga.nextTick(P):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?l||Ga.nextTick(C):(!i&&(!l||LO(t))&&(d||VO(t)===!1)||!o&&(!l||VO(t))&&(f||LO(t)===!1)||u&&t.req&&t.aborted)&&Ga.nextTick(C);let k=()=>{r=tw,t.removeListener("aborted",P),t.removeListener("complete",h),t.removeListener("abort",P),t.removeListener("request",v),t.req&&t.req.removeListener("finish",h),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",g),t.removeListener("close",P)};if(e.signal&&!w){let B=()=>{let T=r;k(),T.call(t,new JO(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Ga.nextTick(B);else{let T=r;r=ew((...M)=>{e.signal.removeEventListener("abort",B),T.apply(t,M)}),e.signal.addEventListener("abort",B)}}return k}function vV(t,e,r){let n=!1,s=tw;if(e.signal)if(s=()=>{n=!0,r.call(t,new JO(void 0,{cause:e.signal.reason}))},e.signal.aborted)Ga.nextTick(s);else{let o=r;r=ew((...a)=>{e.signal.removeEventListener("abort",s),o.apply(t,a)}),e.signal.addEventListener("abort",s)}let i=(...o)=>{n||Ga.nextTick(()=>r.apply(t,o))};return lV(t[yV].promise,i,i),tw}function bV(t,e){var r;let n=!1;return e===null&&(e=Q1),(r=e)!==null&&r!==void 0&&r.cleanup&&(uV(e.cleanup,"cleanup"),n=e.cleanup),new cV((s,i)=>{let o=GO(t,e,a=>{n&&o(),a?i(a):s()})})}rw.exports=GO;rw.exports.finished=bV});var yc=D((wye,n5)=>{"use strict";var Ws=Ja(),{aggregateTwoErrors:wV,codes:{ERR_MULTIPLE_CALLBACK:EV},AbortError:_V}=Bn(),{Symbol:ZO}=Or(),{kDestroyed:DV,isDestroyed:SV,isFinished:AV,isServerRequest:xV}=Hs(),QO=ZO("kDestroy"),nw=ZO("kConstruct");function e5(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function CV(t,e){let r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(e5(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?XO(this,t,e):this.once(QO,function(i){XO(this,wV(i,t),e)}),this)}function XO(t,e,r){let n=!1;function s(i){if(n)return;n=!0;let o=t._readableState,a=t._writableState;e5(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?Ws.nextTick(PV,t,i):Ws.nextTick(t5,t)}try{t._destroy(e||null,s)}catch(i){s(i)}}function PV(t,e){iw(t,e),t5(t)}function t5(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function iw(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function OV(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function sw(t,e,r){let n=t._readableState,s=t._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?t.destroy(e):e&&(e.stack,s&&!s.errored&&(s.errored=e),n&&!n.errored&&(n.errored=e),r?Ws.nextTick(iw,t,e):iw(t,e))}function kV(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(nw,e),!(t.listenerCount(nw)>1)&&Ws.nextTick(BV,t)}function BV(t){let e=!1;function r(n){if(e){sw(t,n??new EV);return}e=!0;let s=t._readableState,i=t._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?t.emit(QO,n):n?sw(t,n,!0):Ws.nextTick(IV,t)}try{t._construct(n=>{Ws.nextTick(r,n)})}catch(n){Ws.nextTick(r,n)}}function IV(t){t.emit(nw)}function YO(t){return t?.setHeader&&typeof t.abort=="function"}function r5(t){t.emit("close")}function TV(t,e){t.emit("error",e),Ws.nextTick(r5,t)}function FV(t,e){!t||SV(t)||(!e&&!AV(t)&&(e=new _V),xV(t)?(t.socket=null,t.destroy(e)):YO(t)?t.abort():YO(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ws.nextTick(TV,t,e):Ws.nextTick(r5,t),t.destroyed||(t[DV]=!0))}n5.exports={construct:kV,destroyer:FV,destroy:CV,undestroy:OV,errorOrDestroy:sw}});var Dy=D((Eye,s5)=>{"use strict";var{ArrayIsArray:RV,ObjectSetPrototypeOf:i5}=Or(),{EventEmitter:Ey}=Jf();function _y(t){Ey.call(this,t)}i5(_y.prototype,Ey.prototype);i5(_y,Ey);_y.prototype.pipe=function(t,e){let r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function u(l){c(),Ey.listenerCount(this,"error")===0&&this.emit("error",l)}ow(r,"error",u),ow(t,"error",u);function c(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function ow(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):RV(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}s5.exports={Stream:_y,prependListener:ow}});var fp=D((_ye,Sy)=>{"use strict";var{AbortError:o5,codes:$V}=Bn(),{isNodeStream:a5,isWebStream:NV,kControllerErrorFunction:MV}=Hs(),jV=Vo(),{ERR_INVALID_ARG_TYPE:u5}=$V,qV=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new u5(e,"AbortSignal",t)};Sy.exports.addAbortSignal=function(e,r){if(qV(e,"signal"),!a5(r)&&!NV(r))throw new u5("stream",["ReadableStream","WritableStream","Stream"],r);return Sy.exports.addAbortSignalNoValidate(e,r)};Sy.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=a5(e)?()=>{e.destroy(new o5(void 0,{cause:t.reason}))}:()=>{e[MV](new o5(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),jV(e,()=>t.removeEventListener("abort",r))),e}});var d5=D((Sye,l5)=>{"use strict";var{StringPrototypeSlice:c5,SymbolIterator:LV,TypedArrayPrototypeSet:Ay,Uint8Array:UV}=Or(),{Buffer:aw}=Ai(),{inspect:KV}=Ls();l5.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return aw.alloc(0);let r=aw.allocUnsafe(e>>>0),n=this.head,s=0;for(;n;)Ay(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let s=n.slice(0,e);return this.head.data=n.slice(e),s}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[LV](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,s=0;do{let i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=c5(i,0,e),this.head=n,n.data=c5(i,e));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(e){let r=aw.allocUnsafe(e),n=e,s=this.head,i=0;do{let o=s.data;if(e>o.length)Ay(r,o,n-e),e-=o.length;else{e===o.length?(Ay(r,o,n-e),++i,s.next?this.head=s.next:this.head=this.tail=null):(Ay(r,new UV(o.buffer,o.byteOffset,e),n-e),this.head=s,s.data=o.slice(e));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return KV(this,{...r,depth:0,customInspect:!1})}}});var xy=D((Aye,p5)=>{"use strict";var{MathFloor:VV,NumberIsInteger:HV}=Or(),{ERR_INVALID_ARG_VALUE:WV}=Bn().codes;function zV(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function f5(t){return t?16:16*1024}function JV(t,e,r,n){let s=zV(e,n,r);if(s!=null){if(!HV(s)||s<0){let i=n?`options.${r}`:"options.highWaterMark";throw new WV(i,s)}return VV(s)}return f5(t.objectMode)}p5.exports={getHighWaterMark:JV,getDefaultHighWaterMark:f5}});var y5=D((uw,m5)=>{var Cy=Ai(),zs=Cy.Buffer;function h5(t,e){for(var r in t)e[r]=t[r]}zs.from&&zs.alloc&&zs.allocUnsafe&&zs.allocUnsafeSlow?m5.exports=Cy:(h5(Cy,uw),uw.Buffer=gc);function gc(t,e,r){return zs(t,e,r)}gc.prototype=Object.create(zs.prototype);h5(zs,gc);gc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return zs(t,e,r)};gc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=zs(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};gc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return zs(t)};gc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Cy.SlowBuffer(t)}});var b5=D(v5=>{"use strict";var lw=y5().Buffer,g5=lw.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function GV(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function XV(t){var e=GV(t);if(typeof e!="string"&&(lw.isEncoding===g5||!g5(t)))throw new Error("Unknown encoding: "+t);return e||t}v5.StringDecoder=pp;function pp(t){this.encoding=XV(t);var e;switch(this.encoding){case"utf16le":this.text=rH,this.end=nH,e=4;break;case"utf8":this.fillLast=QV,e=4;break;case"base64":this.text=iH,this.end=sH,e=3;break;default:this.write=oH,this.end=aH;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=lw.allocUnsafe(e)}pp.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};pp.prototype.end=tH;pp.prototype.text=eH;pp.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function cw(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function YV(t,e,r){var n=e.length-1;if(n<r)return 0;var s=cw(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=cw(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=cw(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function ZV(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function QV(t){var e=this.lastTotal-this.lastNeed,r=ZV(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function eH(t,e){var r=YV(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function tH(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function rH(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function nH(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function iH(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function sH(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function oH(t){return t.toString(this.encoding)}function aH(t){return t&&t.length?this.write(t):""}});var dw=D((Cye,D5)=>{"use strict";var w5=Ja(),{PromisePrototypeThen:uH,SymbolAsyncIterator:E5,SymbolIterator:_5}=Or(),{Buffer:cH}=Ai(),{ERR_INVALID_ARG_TYPE:lH,ERR_STREAM_NULL_VALUES:dH}=Bn().codes;function fH(t,e,r){let n;if(typeof e=="string"||e instanceof cH)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let s;if(e&&e[E5])s=!0,n=e[E5]();else if(e&&e[_5])s=!1,n=e[_5]();else throw new lH("iterable",["Iterable"],e);let i=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;i._read=function(){o||(o=!0,u())},i._destroy=function(c,l){uH(a(c),()=>w5.nextTick(l,c),d=>w5.nextTick(l,d||c))};async function a(c){let l=c!=null,d=typeof n.throw=="function";if(l&&d){let{value:h,done:f}=await n.throw(c);if(await h,f)return}if(typeof n.return=="function"){let{value:h}=await n.return();await h}}async function u(){for(;;){try{let{value:c,done:l}=s?await n.next():n.next();if(l)i.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new dH;if(i.push(d))continue;o=!1}}catch(c){i.destroy(c)}break}}return i}D5.exports=fH});var hp=D((Pye,$5)=>{var as=Ja(),{ArrayPrototypeIndexOf:pH,NumberIsInteger:hH,NumberIsNaN:mH,NumberParseInt:yH,ObjectDefineProperties:x5,ObjectKeys:gH,ObjectSetPrototypeOf:C5,Promise:vH,SafeSet:bH,SymbolAsyncIterator:wH,Symbol:EH}=Or();$5.exports=ut;ut.ReadableState=gw;var{EventEmitter:_H}=Jf(),{Stream:Xa,prependListener:DH}=Dy(),{Buffer:fw}=Ai(),{addAbortSignal:SH}=fp(),AH=Vo(),yt=Ls().debuglog("stream",t=>{yt=t}),xH=d5(),Xl=yc(),{getHighWaterMark:CH,getDefaultHighWaterMark:PH}=xy(),{aggregateTwoErrors:S5,codes:{ERR_INVALID_ARG_TYPE:OH,ERR_METHOD_NOT_IMPLEMENTED:kH,ERR_OUT_OF_RANGE:BH,ERR_STREAM_PUSH_AFTER_EOF:IH,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:TH}}=Bn(),{validateObject:FH}=dp(),vc=EH("kPaused"),{StringDecoder:P5}=b5(),RH=dw();C5(ut.prototype,Xa.prototype);C5(ut,Xa);var pw=()=>{},{errorOrDestroy:Gl}=Xl;function gw(t,e,r){typeof r!="boolean"&&(r=e instanceof Js()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?CH(this,t,"readableHighWaterMark",r):PH(!1),this.buffer=new xH,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[vc]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new P5(t.encoding),this.encoding=t.encoding)}function ut(t){if(!(this instanceof ut))return new ut(t);let e=this instanceof Js();this._readableState=new gw(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&SH(t.signal,this)),Xa.call(this,t),Xl.construct(this,()=>{this._readableState.needReadable&&Py(this,this._readableState)})}ut.prototype.destroy=Xl.destroy;ut.prototype._undestroy=Xl.undestroy;ut.prototype._destroy=function(t,e){e(t)};ut.prototype[_H.captureRejectionSymbol]=function(t){this.destroy(t)};ut.prototype.push=function(t,e){return O5(this,t,e,!1)};ut.prototype.unshift=function(t,e){return O5(this,t,e,!0)};function O5(t,e,r,n){yt("readableAddChunk",e);let s=t._readableState,i;if(s.objectMode||(typeof e=="string"?(r=r||s.defaultEncoding,s.encoding!==r&&(n&&s.encoding?e=fw.from(e,r).toString(s.encoding):(e=fw.from(e,r),r=""))):e instanceof fw?r="":Xa._isUint8Array(e)?(e=Xa._uint8ArrayToBuffer(e),r=""):e!=null&&(i=new OH("chunk",["string","Buffer","Uint8Array"],e))),i)Gl(t,i);else if(e===null)s.reading=!1,MH(t,s);else if(s.objectMode||e&&e.length>0)if(n)if(s.endEmitted)Gl(t,new TH);else{if(s.destroyed||s.errored)return!1;hw(t,s,e,!0)}else if(s.ended)Gl(t,new IH);else{if(s.destroyed||s.errored)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?hw(t,s,e,!1):Py(t,s)):hw(t,s,e,!1)}else n||(s.reading=!1,Py(t,s));return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function hw(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Oy(t)),Py(t,e)}ut.prototype.isPaused=function(){let t=this._readableState;return t[vc]===!0||t.flowing===!1};ut.prototype.setEncoding=function(t){let e=new P5(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let s of r)n+=e.write(s);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var $H=1073741824;function NH(t){if(t>$H)throw new BH("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function A5(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:mH(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}ut.prototype.read=function(t){yt("read",t),t===void 0?t=NaN:hH(t)||(t=yH(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=NH(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return yt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?mw(this):Oy(this),null;if(t=A5(t,e),t===0&&e.ended)return e.length===0&&mw(this),null;let n=e.needReadable;if(yt("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,yt("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,yt("reading, ended or constructing",n);else if(n){yt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(i){Gl(this,i)}e.sync=!1,e.reading||(t=A5(r,e))}let s;return t>0?s=F5(t,e):s=null,s===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&mw(this)),s!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",s)),s};function MH(t,e){if(yt("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Oy(t):(e.needReadable=!1,e.emittedReadable=!0,k5(t))}}function Oy(t){let e=t._readableState;yt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(yt("emitReadable",e.flowing),e.emittedReadable=!0,as.nextTick(k5,t))}function k5(t){let e=t._readableState;yt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,I5(t)}function Py(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,as.nextTick(jH,t,e))}function jH(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(yt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ut.prototype._read=function(t){throw new kH("_read()")};ut.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new bH(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),yt("pipe count=%d opts=%j",n.pipes.length,e);let i=(!e||e.end!==!1)&&t!==as.stdout&&t!==as.stderr?a:w;n.endEmitted?as.nextTick(i):r.once("end",i),t.on("unpipe",o);function o(P,C){yt("onunpipe"),P===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,l())}function a(){yt("onend"),t.end()}let u,c=!1;function l(){yt("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),u&&t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",w),r.removeListener("data",h),c=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(yt("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(yt("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=qH(r,t),t.on("drain",u))}r.on("data",h);function h(P){yt("ondata");let C=t.write(P);yt("dest.write",C),C===!1&&d()}function f(P){if(yt("onerror",P),w(),t.removeListener("error",f),t.listenerCount("error")===0){let C=t._writableState||t._readableState;C&&!C.errorEmitted?Gl(t,P):t.emit("error",P)}}DH(t,"error",f);function p(){t.removeListener("finish",g),w()}t.once("close",p);function g(){yt("onfinish"),t.removeListener("close",p),w()}t.once("finish",g);function w(){yt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&d():n.flowing||(yt("pipe resume"),r.resume()),t};function qH(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(yt("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(yt("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}ut.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let s=e.pipes;e.pipes=[],this.pause();for(let i=0;i<s.length;i++)s[i].emit("unpipe",this,{hasUnpiped:!1});return this}let n=pH(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};ut.prototype.on=function(t,e){let r=Xa.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,yt("on readable",n.length,n.reading),n.length?Oy(this):n.reading||as.nextTick(LH,this)),r};ut.prototype.addListener=ut.prototype.on;ut.prototype.removeListener=function(t,e){let r=Xa.prototype.removeListener.call(this,t,e);return t==="readable"&&as.nextTick(B5,this),r};ut.prototype.off=ut.prototype.removeListener;ut.prototype.removeAllListeners=function(t){let e=Xa.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&as.nextTick(B5,this),e};function B5(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[vc]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function LH(t){yt("readable nexttick read 0"),t.read(0)}ut.prototype.resume=function(){let t=this._readableState;return t.flowing||(yt("resume"),t.flowing=!t.readableListening,UH(this,t)),t[vc]=!1,this};function UH(t,e){e.resumeScheduled||(e.resumeScheduled=!0,as.nextTick(KH,t,e))}function KH(t,e){yt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),I5(t),e.flowing&&!e.reading&&t.read(0)}ut.prototype.pause=function(){return yt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(yt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[vc]=!0,this};function I5(t){let e=t._readableState;for(yt("flow",e.flowing);e.flowing&&t.read()!==null;);}ut.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Gl(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=gH(t);for(let n=1;n<r.length;n++){let s=r[n];this[s]===void 0&&typeof t[s]=="function"&&(this[s]=t[s].bind(t))}return this};ut.prototype[wH]=function(){return T5(this)};ut.prototype.iterator=function(t){return t!==void 0&&FH(t,"options"),T5(this,t)};function T5(t,e){typeof t.read!="function"&&(t=ut.wrap(t,{objectMode:!0}));let r=VH(t,e);return r.stream=t,r}async function*VH(t,e){let r=pw;function n(o){this===t?(r(),r=pw):r=o}t.on("readable",n);let s,i=AH(t,{writable:!1},o=>{s=o?S5(s,o):null,r(),r=pw});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(s)throw s;if(s===null)return;await new vH(n)}}}catch(o){throw s=S5(s,o),s}finally{(s||e?.destroyOnReturn!==!1)&&(s===void 0||t._readableState.autoDestroy)?Xl.destroyer(t,null):(t.off("readable",n),i())}}x5(ut.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});x5(gw.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[vc]!==!1},set(t){this[vc]=!!t}}});ut._fromList=F5;function F5(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function mw(t){let e=t._readableState;yt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,as.nextTick(HH,e,t))}function HH(t,e){if(yt("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)as.nextTick(WH,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function WH(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}ut.from=function(t,e){return RH(ut,t,e)};var yw;function R5(){return yw===void 0&&(yw={}),yw}ut.fromWeb=function(t,e){return R5().newStreamReadableFromReadableStream(t,e)};ut.toWeb=function(t,e){return R5().newReadableStreamFromStreamReadable(t,e)};ut.wrap=function(t,e){var r,n;return new ut({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(s,i){Xl.destroyer(t,s),i(s)}}).wrap(t)}});var Sw=D((Oye,J5)=>{var bc=Ja(),{ArrayPrototypeSlice:j5,Error:zH,FunctionPrototypeSymbolHasInstance:q5,ObjectDefineProperty:L5,ObjectDefineProperties:JH,ObjectSetPrototypeOf:U5,StringPrototypeToLowerCase:GH,Symbol:XH,SymbolHasInstance:YH}=Or();J5.exports=ur;ur.WritableState=gp;var{EventEmitter:ZH}=Jf(),mp=Dy().Stream,{Buffer:ky}=Ai(),Ty=yc(),{addAbortSignal:QH}=fp(),{getHighWaterMark:eW,getDefaultHighWaterMark:tW}=xy(),{ERR_INVALID_ARG_TYPE:rW,ERR_METHOD_NOT_IMPLEMENTED:nW,ERR_MULTIPLE_CALLBACK:K5,ERR_STREAM_CANNOT_PIPE:iW,ERR_STREAM_DESTROYED:yp,ERR_STREAM_ALREADY_FINISHED:sW,ERR_STREAM_NULL_VALUES:oW,ERR_STREAM_WRITE_AFTER_END:aW,ERR_UNKNOWN_ENCODING:V5}=Bn().codes,{errorOrDestroy:Yl}=Ty;U5(ur.prototype,mp.prototype);U5(ur,mp);function ww(){}var Zl=XH("kOnFinished");function gp(t,e,r){typeof r!="boolean"&&(r=e instanceof Js()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?eW(this,t,"writableHighWaterMark",r):tW(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=cW.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Iy(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Zl]=[]}function Iy(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}gp.prototype.getBuffer=function(){return j5(this.buffered,this.bufferedIndex)};L5(gp.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ur(t){let e=this instanceof Js();if(!e&&!q5(ur,this))return new ur(t);this._writableState=new gp(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&QH(t.signal,this)),mp.call(this,t),Ty.construct(this,()=>{let r=this._writableState;r.writing||_w(this,r),Dw(this,r)})}L5(ur,YH,{__proto__:null,value:function(t){return q5(this,t)?!0:this!==ur?!1:t&&t._writableState instanceof gp}});ur.prototype.pipe=function(){Yl(this,new iW)};function H5(t,e,r,n){let s=t._writableState;if(typeof r=="function")n=r,r=s.defaultEncoding;else{if(!r)r=s.defaultEncoding;else if(r!=="buffer"&&!ky.isEncoding(r))throw new V5(r);typeof n!="function"&&(n=ww)}if(e===null)throw new oW;if(!s.objectMode)if(typeof e=="string")s.decodeStrings!==!1&&(e=ky.from(e,r),r="buffer");else if(e instanceof ky)r="buffer";else if(mp._isUint8Array(e))e=mp._uint8ArrayToBuffer(e),r="buffer";else throw new rW("chunk",["string","Buffer","Uint8Array"],e);let i;return s.ending?i=new aW:s.destroyed&&(i=new yp("write")),i?(bc.nextTick(n,i),Yl(t,i,!0),i):(s.pendingcb++,uW(t,s,e,r,n))}ur.prototype.write=function(t,e,r){return H5(this,t,e,r)===!0};ur.prototype.cork=function(){this._writableState.corked++};ur.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||_w(this,t))};ur.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=GH(e)),!ky.isEncoding(e))throw new V5(e);return this._writableState.defaultEncoding=e,this};function uW(t,e,r,n,s){let i=e.objectMode?1:r.length;e.length+=i;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:s}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&s!==ww&&(e.allNoop=!1)):(e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function N5(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new yp("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1}function M5(t,e,r,n){--e.pendingcb,n(r),Ew(e),Yl(t,r)}function cW(t,e){let r=t._writableState,n=r.sync,s=r.writecb;if(typeof s!="function"){Yl(t,new K5);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?bc.nextTick(M5,t,r,e,s):M5(t,r,e,s)):(r.buffered.length>r.bufferedIndex&&_w(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===s?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:s,stream:t,state:r},bc.nextTick(lW,r.afterWriteTickInfo)):W5(t,r,1,s))}function lW({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,W5(t,e,r,n)}function W5(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Ew(e),Dw(t,e)}function Ew(t){if(t.writing)return;for(let s=t.bufferedIndex;s<t.buffered.length;++s){var e;let{chunk:i,callback:o}=t.buffered[s],a=t.objectMode?1:i.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new yp("write"))}let r=t[Zl].splice(0);for(let s=0;s<r.length;s++){var n;r[s]((n=t.errored)!==null&&n!==void 0?n:new yp("end"))}Iy(t)}function _w(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:s}=e,i=r.length-n;if(!i)return;let o=n;if(e.bufferProcessing=!0,i>1&&t._writev){e.pendingcb-=i-1;let a=e.allNoop?ww:c=>{for(let l=o;l<r.length;++l)r[l].callback(c)},u=e.allNoop&&o===0?r:j5(r,o);u.allBuffers=e.allBuffers,N5(t,e,!0,e.length,u,"",a),Iy(e)}else{do{let{chunk:a,encoding:u,callback:c}=r[o];r[o++]=null;let l=s?1:a.length;N5(t,e,!1,l,a,u,c)}while(o<r.length&&!e.writing);o===r.length?Iy(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ur.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new nW("_write()")};ur.prototype._writev=null;ur.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let s;if(t!=null){let i=H5(this,t,e);i instanceof zH&&(s=i)}return n.corked&&(n.corked=1,this.uncork()),s||(!n.errored&&!n.ending?(n.ending=!0,Dw(this,n,!0),n.ended=!0):n.finished?s=new sW("end"):n.destroyed&&(s=new yp("end"))),typeof r=="function"&&(s||n.finished?bc.nextTick(r,s):n[Zl].push(r)),this};function By(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function dW(t,e){let r=!1;function n(s){if(r){Yl(t,s??K5());return}if(r=!0,e.pendingcb--,s){let i=e[Zl].splice(0);for(let o=0;o<i.length;o++)i[o](s);Yl(t,s,e.sync)}else By(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,bc.nextTick(bw,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(s){n(s)}e.sync=!1}function fW(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,dW(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Dw(t,e,r){By(e)&&(fW(t,e),e.pendingcb===0&&(r?(e.pendingcb++,bc.nextTick((n,s)=>{By(s)?bw(n,s):s.pendingcb--},t,e)):By(e)&&(e.pendingcb++,bw(t,e))))}function bw(t,e){e.pendingcb--,e.finished=!0;let r=e[Zl].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}JH(ur.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var pW=Ty.destroy;ur.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Zl].length)&&bc.nextTick(Ew,r),pW.call(this,t,e),this};ur.prototype._undestroy=Ty.undestroy;ur.prototype._destroy=function(t,e){e(t)};ur.prototype[ZH.captureRejectionSymbol]=function(t){this.destroy(t)};var vw;function z5(){return vw===void 0&&(vw={}),vw}ur.fromWeb=function(t,e){return z5().newStreamWritableFromWritableStream(t,e)};ur.toWeb=function(t){return z5().newWritableStreamFromStreamWritable(t)}});var o3=D((kye,s3)=>{var Aw=Ja(),hW=Ai(),{isReadable:mW,isWritable:yW,isIterable:G5,isNodeStream:gW,isReadableNodeStream:X5,isWritableNodeStream:Y5,isDuplexNodeStream:vW}=Hs(),Z5=Vo(),{AbortError:i3,codes:{ERR_INVALID_ARG_TYPE:bW,ERR_INVALID_RETURN_VALUE:Q5}}=Bn(),{destroyer:Ql}=yc(),wW=Js(),EW=hp(),{createDeferredPromise:e3}=Ls(),t3=dw(),r3=globalThis.Blob||hW.Blob,_W=typeof r3<"u"?function(e){return e instanceof r3}:function(e){return!1},DW=globalThis.AbortController||py().AbortController,{FunctionPrototypeCall:n3}=Or(),wc=class extends wW{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};s3.exports=function t(e,r){if(vW(e))return e;if(X5(e))return Fy({readable:e});if(Y5(e))return Fy({writable:e});if(gW(e))return Fy({writable:!1,readable:!1});if(typeof e=="function"){let{value:s,write:i,final:o,destroy:a}=SW(e);if(G5(s))return t3(wc,s,{objectMode:!0,write:i,final:o,destroy:a});let u=s?.then;if(typeof u=="function"){let c,l=n3(u,s,d=>{if(d!=null)throw new Q5("nully","body",d)},d=>{Ql(c,d)});return c=new wc({objectMode:!0,readable:!1,write:i,final(d){o(async()=>{try{await l,Aw.nextTick(d,null)}catch(h){Aw.nextTick(d,h)}})},destroy:a})}throw new Q5("Iterable, AsyncIterable or AsyncFunction",r,s)}if(_W(e))return t(e.arrayBuffer());if(G5(e))return t3(wc,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let s=e!=null&&e.readable?X5(e?.readable)?e?.readable:t(e.readable):void 0,i=e!=null&&e.writable?Y5(e?.writable)?e?.writable:t(e.writable):void 0;return Fy({readable:s,writable:i})}let n=e?.then;if(typeof n=="function"){let s;return n3(n,e,i=>{i!=null&&s.push(i),s.push(null)},i=>{Ql(s,i)}),s=new wc({objectMode:!0,writable:!1,read(){}})}throw new bW(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function SW(t){let{promise:e,resolve:r}=e3(),n=new DW,s=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:u,cb:c}=await o;if(Aw.nextTick(c),u)return;if(s.aborted)throw new i3(void 0,{cause:s.reason});({promise:e,resolve:r}=e3()),yield a}}(),{signal:s}),write(o,a,u){let c=r;r=null,c({chunk:o,done:!1,cb:u})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function Fy(t){let e=t.readable&&typeof t.readable.read!="function"?EW.wrap(t.readable):t.readable,r=t.writable,n=!!mW(e),s=!!yW(r),i,o,a,u,c;function l(d){let h=u;u=null,h?h(d):d&&c.destroy(d)}return c=new wc({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:s}),s&&(Z5(r,d=>{s=!1,d&&Ql(e,d),l(d)}),c._write=function(d,h,f){r.write(d,h)?f():i=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(i){let d=i;i=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(Z5(e,d=>{n=!1,d&&Ql(e,d),l(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,h){!d&&u!==null&&(d=new i3),a=null,i=null,o=null,u===null?h(d):(u=h,Ql(r,d),Ql(e,d))},c}});var Js=D((Bye,c3)=>{"use strict";var{ObjectDefineProperties:AW,ObjectGetOwnPropertyDescriptor:Ho,ObjectKeys:xW,ObjectSetPrototypeOf:a3}=Or();c3.exports=us;var Pw=hp(),Oi=Sw();a3(us.prototype,Pw.prototype);a3(us,Pw);{let t=xW(Oi.prototype);for(let e=0;e<t.length;e++){let r=t[e];us.prototype[r]||(us.prototype[r]=Oi.prototype[r])}}function us(t){if(!(this instanceof us))return new us(t);Pw.call(this,t),Oi.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}AW(us.prototype,{writable:{__proto__:null,...Ho(Oi.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Ho(Oi.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Ho(Oi.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Ho(Oi.prototype,"writableBuffer")},writableLength:{__proto__:null,...Ho(Oi.prototype,"writableLength")},writableFinished:{__proto__:null,...Ho(Oi.prototype,"writableFinished")},writableCorked:{__proto__:null,...Ho(Oi.prototype,"writableCorked")},writableEnded:{__proto__:null,...Ho(Oi.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Ho(Oi.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var xw;function u3(){return xw===void 0&&(xw={}),xw}us.fromWeb=function(t,e){return u3().newStreamDuplexFromReadableWritablePair(t,e)};us.toWeb=function(t){return u3().newReadableWritablePairFromDuplex(t)};var Cw;us.from=function(t){return Cw||(Cw=o3()),Cw(t,"body")}});var Bw=D((Iye,d3)=>{"use strict";var{ObjectSetPrototypeOf:l3,Symbol:CW}=Or();d3.exports=Wo;var{ERR_METHOD_NOT_IMPLEMENTED:PW}=Bn().codes,kw=Js(),{getHighWaterMark:OW}=xy();l3(Wo.prototype,kw.prototype);l3(Wo,kw);var vp=CW("kCallback");function Wo(t){if(!(this instanceof Wo))return new Wo(t);let e=t?OW(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),kw.call(this,t),this._readableState.sync=!1,this[vp]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",kW)}function Ow(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function kW(){this._final!==Ow&&Ow.call(this)}Wo.prototype._final=Ow;Wo.prototype._transform=function(t,e,r){throw new PW("_transform()")};Wo.prototype._write=function(t,e,r){let n=this._readableState,s=this._writableState,i=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[vp]=r})};Wo.prototype._read=function(){if(this[vp]){let t=this[vp];this[vp]=null,t()}}});var Tw=D((Tye,p3)=>{"use strict";var{ObjectSetPrototypeOf:f3}=Or();p3.exports=ed;var Iw=Bw();f3(ed.prototype,Iw.prototype);f3(ed,Iw);function ed(t){if(!(this instanceof ed))return new ed(t);Iw.call(this,t)}ed.prototype._transform=function(t,e,r){r(null,t)}});var My=D((Fye,v3)=>{var bp=Ja(),{ArrayIsArray:BW,Promise:IW,SymbolAsyncIterator:TW}=Or(),Ny=Vo(),{once:FW}=Ls(),RW=yc(),h3=Js(),{aggregateTwoErrors:$W,codes:{ERR_INVALID_ARG_TYPE:Lw,ERR_INVALID_RETURN_VALUE:Fw,ERR_MISSING_ARGS:NW,ERR_STREAM_DESTROYED:MW,ERR_STREAM_PREMATURE_CLOSE:jW},AbortError:qW}=Bn(),{validateFunction:LW,validateAbortSignal:UW}=dp(),{isIterable:Ec,isReadable:Rw,isReadableNodeStream:$y,isNodeStream:m3,isTransformStream:td,isWebStream:KW,isReadableStream:$w,isReadableEnded:VW}=Hs(),HW=globalThis.AbortController||py().AbortController,Nw,Mw;function y3(t,e,r){let n=!1;t.on("close",()=>{n=!0});let s=Ny(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,RW.destroyer(t,i||new MW("pipe")))},cleanup:s}}function WW(t){return LW(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function jw(t){if(Ec(t))return t;if($y(t))return zW(t);throw new Lw("val",["Readable","Iterable","AsyncIterable"],t)}async function*zW(t){Mw||(Mw=hp()),yield*Mw.prototype[TW].call(t)}async function Ry(t,e,r,{end:n}){let s,i=null,o=c=>{if(c&&(s=c),i){let l=i;i=null,l()}},a=()=>new IW((c,l)=>{s?l(s):i=()=>{s?l(s):c()}});e.on("drain",o);let u=Ny(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&e.end(),await a(),r()}catch(c){r(s!==c?$W(s,c):c)}finally{u(),e.off("drain",o)}}async function qw(t,e,r,{end:n}){td(e)&&(e=e.writable);let s=e.getWriter();try{for await(let i of t)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function JW(...t){return g3(t,FW(WW(t)))}function g3(t,e,r){if(t.length===1&&BW(t[0])&&(t=t[0]),t.length<2)throw new NW("streams");let n=new HW,s=n.signal,i=r?.signal,o=[];UW(i,"options.signal");function a(){f(new qW)}i?.addEventListener("abort",a);let u,c,l=[],d=0;function h(C){f(C,--d===0)}function f(C,v){if(C&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=C),!(!u&&!v)){for(;l.length;)l.shift()(u);i?.removeEventListener("abort",a),n.abort(),v&&(u||o.forEach(k=>k()),bp.nextTick(e,u,c))}}let p;for(let C=0;C<t.length;C++){let v=t[C],k=C<t.length-1,B=C>0,T=k||r?.end!==!1,M=C===t.length-1;if(m3(v)){let y=function(b){b&&b.name!=="AbortError"&&b.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(b)};var P=y;if(T){let{destroy:b,cleanup:E}=y3(v,k,B);l.push(b),Rw(v)&&M&&o.push(E)}v.on("error",y),Rw(v)&&M&&o.push(()=>{v.removeListener("error",y)})}if(C===0)if(typeof v=="function"){if(p=v({signal:s}),!Ec(p))throw new Fw("Iterable, AsyncIterable or Stream","source",p)}else Ec(v)||$y(v)||td(v)?p=v:p=h3.from(v);else if(typeof v=="function"){if(td(p)){var g;p=jw((g=p)===null||g===void 0?void 0:g.readable)}else p=jw(p);if(p=v(p,{signal:s}),k){if(!Ec(p,!0))throw new Fw("AsyncIterable",`transform[${C-1}]`,p)}else{var w;Nw||(Nw=Tw());let y=new Nw({objectMode:!0}),b=(w=p)===null||w===void 0?void 0:w.then;if(typeof b=="function")d++,b.call(p,S=>{c=S,S!=null&&y.write(S),T&&y.end(),bp.nextTick(h)},S=>{y.destroy(S),bp.nextTick(h,S)});else if(Ec(p,!0))d++,Ry(p,y,h,{end:T});else if($w(p)||td(p)){let S=p.readable||p;d++,Ry(S,y,h,{end:T})}else throw new Fw("AsyncIterable or Promise","destination",p);p=y;let{destroy:E,cleanup:I}=y3(p,!1,!0);l.push(E),M&&o.push(I)}}else if(m3(v)){if($y(p)){d+=2;let y=GW(p,v,h,{end:T});Rw(v)&&M&&o.push(y)}else if(td(p)||$w(p)){let y=p.readable||p;d++,Ry(y,v,h,{end:T})}else if(Ec(p))d++,Ry(p,v,h,{end:T});else throw new Lw("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=v}else if(KW(v)){if($y(p))d++,qw(jw(p),v,h,{end:T});else if($w(p)||Ec(p))d++,qw(p,v,h,{end:T});else if(td(p))d++,qw(p.readable,v,h,{end:T});else throw new Lw("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=v}else p=h3.from(v)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&bp.nextTick(a),p}function GW(t,e,r,{end:n}){let s=!1;if(e.on("close",()=>{s||r(new jW)}),t.pipe(e,{end:!1}),n){let o=function(){s=!0,e.end()};var i=o;VW(t)?bp.nextTick(o):t.once("end",o)}else r();return Ny(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Ny(e,{readable:!1,writable:!0},r)}v3.exports={pipelineImpl:g3,pipeline:JW}});var Kw=D((Rye,S3)=>{"use strict";var{pipeline:XW}=My(),jy=Js(),{destroyer:YW}=yc(),{isNodeStream:qy,isReadable:b3,isWritable:w3,isWebStream:Uw,isTransformStream:_c,isWritableStream:E3,isReadableStream:_3}=Hs(),{AbortError:ZW,codes:{ERR_INVALID_ARG_VALUE:D3,ERR_MISSING_ARGS:QW}}=Bn(),ez=Vo();S3.exports=function(...e){if(e.length===0)throw new QW("streams");if(e.length===1)return jy.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=jy.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=jy.from(e[f])}for(let f=0;f<e.length;++f)if(!(!qy(e[f])&&!Uw(e[f]))){if(f<e.length-1&&!(b3(e[f])||_3(e[f])||_c(e[f])))throw new D3(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(w3(e[f])||E3(e[f])||_c(e[f])))throw new D3(`streams[${f}]`,r[f],"must be writable")}let n,s,i,o,a;function u(f){let p=o;o=null,p?p(f):f?a.destroy(f):!h&&!d&&a.destroy()}let c=e[0],l=XW(e,u),d=!!(w3(c)||E3(c)||_c(c)),h=!!(b3(l)||_3(l)||_c(l));if(a=new jy({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(l!=null&&l.writableObjectMode),writable:d,readable:h}),d){if(qy(c))a._write=function(p,g,w){c.write(p,g)?w():n=w},a._final=function(p){c.end(),s=p},c.on("drain",function(){if(n){let p=n;n=null,p()}});else if(Uw(c)){let g=(_c(c)?c.writable:c).getWriter();a._write=async function(w,P,C){try{await g.ready,g.write(w).catch(()=>{}),C()}catch(v){C(v)}},a._final=async function(w){try{await g.ready,g.close().catch(()=>{}),s=w}catch(P){w(P)}}}let f=_c(l)?l.readable:l;ez(f,()=>{if(s){let p=s;s=null,p()}})}if(h){if(qy(l))l.on("readable",function(){if(i){let f=i;i=null,f()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=l.read();if(f===null){i=a._read;return}if(!a.push(f))return}};else if(Uw(l)){let p=(_c(l)?l.readable:l).getReader();a._read=async function(){for(;;)try{let{value:g,done:w}=await p.read();if(!a.push(g))return;if(w){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new ZW),i=null,n=null,s=null,o===null?p(f):(o=p,qy(l)&&YW(l,f))},a}});var I3=D(($ye,Ww)=>{"use strict";var P3=globalThis.AbortController||py().AbortController,{codes:{ERR_INVALID_ARG_VALUE:tz,ERR_INVALID_ARG_TYPE:wp,ERR_MISSING_ARGS:rz,ERR_OUT_OF_RANGE:nz},AbortError:Gs}=Bn(),{validateAbortSignal:Dc,validateInteger:iz,validateObject:Sc}=dp(),sz=Or().Symbol("kWeak"),{finished:oz}=Vo(),az=Kw(),{addAbortSignalNoValidate:uz}=fp(),{isWritable:cz,isNodeStream:lz}=Hs(),{ArrayPrototypePush:dz,MathFloor:fz,Number:pz,NumberIsNaN:hz,Promise:A3,PromiseReject:x3,PromisePrototypeThen:mz,Symbol:O3}=Or(),Ly=O3("kEmpty"),C3=O3("kEof");function yz(t,e){if(e!=null&&Sc(e,"options"),e?.signal!=null&&Dc(e.signal,"options.signal"),lz(t)&&!cz(t))throw new tz("stream",t,"must be writable");let r=az(this,t);return e!=null&&e.signal&&uz(e.signal,r),r}function Uy(t,e){if(typeof t!="function")throw new wp("fn",["Function","AsyncFunction"],t);e!=null&&Sc(e,"options"),e?.signal!=null&&Dc(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=fz(e.concurrency)),iz(r,"concurrency",1),async function*(){var s,i;let o=new P3,a=this,u=[],c=o.signal,l={signal:c},d=()=>o.abort();e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted&&d(),e==null||(i=e.signal)===null||i===void 0||i.addEventListener("abort",d);let h,f,p=!1;function g(){p=!0}async function w(){try{for await(let v of a){var P;if(p)return;if(c.aborted)throw new Gs;try{v=t(v,l)}catch(k){v=x3(k)}v!==Ly&&(typeof((P=v)===null||P===void 0?void 0:P.catch)=="function"&&v.catch(g),u.push(v),h&&(h(),h=null),!p&&u.length&&u.length>=r&&await new A3(k=>{f=k}))}u.push(C3)}catch(v){let k=x3(v);mz(k,void 0,g),u.push(k)}finally{var C;p=!0,h&&(h(),h=null),e==null||(C=e.signal)===null||C===void 0||C.removeEventListener("abort",d)}}w();try{for(;;){for(;u.length>0;){let P=await u[0];if(P===C3)return;if(c.aborted)throw new Gs;P!==Ly&&(yield P),u.shift(),f&&(f(),f=null)}await new A3(P=>{h=P})}}finally{o.abort(),p=!0,f&&(f(),f=null)}}.call(this)}function gz(t=void 0){return t!=null&&Sc(t,"options"),t?.signal!=null&&Dc(t.signal,"options.signal"),async function*(){let r=0;for await(let s of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Gs({cause:t.signal.reason});yield[r++,s]}}.call(this)}async function k3(t,e=void 0){for await(let r of Hw.call(this,t,e))return!0;return!1}async function vz(t,e=void 0){if(typeof t!="function")throw new wp("fn",["Function","AsyncFunction"],t);return!await k3.call(this,async(...r)=>!await t(...r),e)}async function bz(t,e){for await(let r of Hw.call(this,t,e))return r}async function wz(t,e){if(typeof t!="function")throw new wp("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s),Ly}for await(let n of Uy.call(this,r,e));}function Hw(t,e){if(typeof t!="function")throw new wp("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s)?n:Ly}return Uy.call(this,r,e)}var Vw=class extends rz{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function Ez(t,e,r){var n;if(typeof t!="function")throw new wp("reducer",["Function","AsyncFunction"],t);r!=null&&Sc(r,"options"),r?.signal!=null&&Dc(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new Gs(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await oz(this.destroy(c)),c}let i=new P3,o=i.signal;if(r!=null&&r.signal){let c={once:!0,[sz]:this};r.signal.addEventListener("abort",()=>i.abort(),c)}let a=!1;try{for await(let c of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new Gs;s?e=await t(e,c,{signal:o}):(e=c,s=!0)}if(!a&&!s)throw new Vw}finally{i.abort()}return e}async function _z(t){t!=null&&Sc(t,"options"),t?.signal!=null&&Dc(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Gs(void 0,{cause:t.signal.reason});dz(e,n)}return e}function Dz(t,e){let r=Uy.call(this,t,e);return async function*(){for await(let s of r)yield*s}.call(this)}function B3(t){if(t=pz(t),hz(t))return 0;if(t<0)throw new nz("number",">= 0",t);return t}function Sz(t,e=void 0){return e!=null&&Sc(e,"options"),e?.signal!=null&&Dc(e.signal,"options.signal"),t=B3(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Gs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Gs;t--<=0&&(yield i)}}.call(this)}function Az(t,e=void 0){return e!=null&&Sc(e,"options"),e?.signal!=null&&Dc(e.signal,"options.signal"),t=B3(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Gs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Gs;if(t-- >0)yield i;else return}}.call(this)}Ww.exports.streamReturningOperators={asIndexedPairs:gz,drop:Sz,filter:Hw,flatMap:Dz,map:Uy,take:Az,compose:yz};Ww.exports.promiseReturningOperators={every:vz,forEach:wz,reduce:Ez,toArray:_z,some:k3,find:bz}});var zw=D((Nye,T3)=>{"use strict";var{ArrayPrototypePop:xz,Promise:Cz}=Or(),{isIterable:Pz,isNodeStream:Oz,isWebStream:kz}=Hs(),{pipelineImpl:Bz}=My(),{finished:Iz}=Vo();Jw();function Tz(...t){return new Cz((e,r)=>{let n,s,i=t[t.length-1];if(i&&typeof i=="object"&&!Oz(i)&&!Pz(i)&&!kz(i)){let o=xz(t);n=o.signal,s=o.end}Bz(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:s})})}T3.exports={finished:Iz,pipeline:Tz}});var Jw=D((Mye,U3)=>{var{Buffer:Fz}=Ai(),{ObjectDefineProperty:zo,ObjectKeys:$3,ReflectApply:N3}=Or(),{promisify:{custom:M3}}=Ls(),{streamReturningOperators:F3,promiseReturningOperators:R3}=I3(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:j3}}=Bn(),Rz=Kw(),{pipeline:q3}=My(),{destroyer:$z}=yc(),L3=Vo(),Gw=zw(),Xw=Hs(),Dr=U3.exports=Dy().Stream;Dr.isDisturbed=Xw.isDisturbed;Dr.isErrored=Xw.isErrored;Dr.isReadable=Xw.isReadable;Dr.Readable=hp();for(let t of $3(F3)){let r=function(...n){if(new.target)throw j3();return Dr.Readable.from(N3(e,this,n))};Mz=r;let e=F3[t];zo(r,"name",{__proto__:null,value:e.name}),zo(r,"length",{__proto__:null,value:e.length}),zo(Dr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Mz;for(let t of $3(R3)){let r=function(...s){if(new.target)throw j3();return N3(e,this,s)};Mz=r;let e=R3[t];zo(r,"name",{__proto__:null,value:e.name}),zo(r,"length",{__proto__:null,value:e.length}),zo(Dr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var Mz;Dr.Writable=Sw();Dr.Duplex=Js();Dr.Transform=Bw();Dr.PassThrough=Tw();Dr.pipeline=q3;var{addAbortSignal:Nz}=fp();Dr.addAbortSignal=Nz;Dr.finished=L3;Dr.destroy=$z;Dr.compose=Rz;zo(Dr,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Gw}});zo(q3,M3,{__proto__:null,enumerable:!0,get(){return Gw.pipeline}});zo(L3,M3,{__proto__:null,enumerable:!0,get(){return Gw.finished}});Dr.Stream=Dr;Dr._isUint8Array=function(e){return e instanceof Uint8Array};Dr._uint8ArrayToBuffer=function(e){return Fz.from(e.buffer,e.byteOffset,e.byteLength)}});var Yw=D((jye,Sr)=>{"use strict";var jr=Jw(),jz=zw(),qz=jr.Readable.destroy;Sr.exports=jr.Readable;Sr.exports._uint8ArrayToBuffer=jr._uint8ArrayToBuffer;Sr.exports._isUint8Array=jr._isUint8Array;Sr.exports.isDisturbed=jr.isDisturbed;Sr.exports.isErrored=jr.isErrored;Sr.exports.isReadable=jr.isReadable;Sr.exports.Readable=jr.Readable;Sr.exports.Writable=jr.Writable;Sr.exports.Duplex=jr.Duplex;Sr.exports.Transform=jr.Transform;Sr.exports.PassThrough=jr.PassThrough;Sr.exports.addAbortSignal=jr.addAbortSignal;Sr.exports.finished=jr.finished;Sr.exports.destroy=jr.destroy;Sr.exports.destroy=qz;Sr.exports.pipeline=jr.pipeline;Sr.exports.compose=jr.compose;Object.defineProperty(jr,"promises",{configurable:!0,enumerable:!0,get(){return jz}});Sr.exports.Stream=jr.Stream;Sr.exports.default=Sr.exports});var GE=D((x0,lk)=>{(function(t,e){typeof x0=="object"&&typeof lk<"u"?e(x0):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(x0,function(t){"use strict";function e(){for(var K=arguments.length,L=Array(K),W=0;W<K;W++)L[W]=arguments[W];if(L.length>1){L[0]=L[0].slice(0,-1);for(var J=L.length-1,G=1;G<J;++G)L[G]=L[G].slice(1,-1);return L[J]=L[J].slice(1),L.join("")}else return L[0]}function r(K){return"(?:"+K+")"}function n(K){return K===void 0?"undefined":K===null?"null":Object.prototype.toString.call(K).split(" ").pop().split("]").shift().toLowerCase()}function s(K){return K.toUpperCase()}function i(K){return K!=null?K instanceof Array?K:typeof K.length!="number"||K.split||K.setInterval||K.call?[K]:Array.prototype.slice.call(K):[]}function o(K,L){var W=K;if(L)for(var J in L)W[J]=L[J];return W}function a(K){var L="[A-Za-z]",W="[\\x0D]",J="[0-9]",G="[\\x22]",fe=e(J,"[A-Fa-f]"),Ye="[\\x0A]",At="[\\x20]",Tt=r(r("%[EFef]"+fe+"%"+fe+fe+"%"+fe+fe)+"|"+r("%[89A-Fa-f]"+fe+"%"+fe+fe)+"|"+r("%"+fe+fe)),Cr="[\\:\\/\\?\\#\\[\\]\\@]",_t="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",sr=e(Cr,_t),Pr=K?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Yt=K?"[\\uE000-\\uF8FF]":"[]",Pt=e(L,J,"[\\-\\.\\_\\~]",Pr),or=r(L+e(L,J,"[\\+\\-\\.]")+"*"),Nt=r(r(Tt+"|"+e(Pt,_t,"[\\:]"))+"*"),Ku=r(r("25[0-5]")+"|"+r("2[0-4]"+J)+"|"+r("1"+J+J)+"|"+r("[1-9]"+J)+"|"+J),oi=r(r("25[0-5]")+"|"+r("2[0-4]"+J)+"|"+r("1"+J+J)+"|"+r("0?[1-9]"+J)+"|0?0?"+J),_i=r(oi+"\\."+oi+"\\."+oi+"\\."+oi),Lt=r(fe+"{1,4}"),ai=r(r(Lt+"\\:"+Lt)+"|"+_i),Di=r(r(Lt+"\\:")+"{6}"+ai),Fs=r("\\:\\:"+r(Lt+"\\:")+"{5}"+ai),Vu=r(r(Lt)+"?\\:\\:"+r(Lt+"\\:")+"{4}"+ai),ko=r(r(r(Lt+"\\:")+"{0,1}"+Lt)+"?\\:\\:"+r(Lt+"\\:")+"{3}"+ai),kf=r(r(r(Lt+"\\:")+"{0,2}"+Lt)+"?\\:\\:"+r(Lt+"\\:")+"{2}"+ai),Sm=r(r(r(Lt+"\\:")+"{0,3}"+Lt)+"?\\:\\:"+Lt+"\\:"+ai),Am=r(r(r(Lt+"\\:")+"{0,4}"+Lt)+"?\\:\\:"+ai),gl=r(r(r(Lt+"\\:")+"{0,5}"+Lt)+"?\\:\\:"+Lt),vl=r(r(r(Lt+"\\:")+"{0,6}"+Lt)+"?\\:\\:"),Bo=r([Di,Fs,Vu,ko,kf,Sm,Am,gl,vl].join("|")),bl=r(r(Pt+"|"+Tt)+"+"),Eb=r(Bo+"\\%25"+bl),Hu=r(Bo+r("\\%25|\\%(?!"+fe+"{2})")+bl),s7=r("[vV]"+fe+"+\\."+e(Pt,_t,"[\\:]")+"+"),o7=r("\\["+r(Hu+"|"+Bo+"|"+s7)+"\\]"),Xx=r(r(Tt+"|"+e(Pt,_t))+"*"),Bf=r(o7+"|"+_i+"(?!"+Xx+")|"+Xx),If=r(J+"*"),Yx=r(r(Nt+"@")+"?"+Bf+r("\\:"+If)+"?"),Tf=r(Tt+"|"+e(Pt,_t,"[\\:\\@]")),a7=r(Tf+"*"),Zx=r(Tf+"+"),u7=r(r(Tt+"|"+e(Pt,_t,"[\\@]"))+"+"),Io=r(r("\\/"+a7)+"*"),wl=r("\\/"+r(Zx+Io)+"?"),_b=r(u7+Io),xm=r(Zx+Io),El="(?!"+Tf+")",she=r(Io+"|"+wl+"|"+_b+"|"+xm+"|"+El),_l=r(r(Tf+"|"+e("[\\/\\?]",Yt))+"*"),Ff=r(r(Tf+"|[\\/\\?]")+"*"),Qx=r(r("\\/\\/"+Yx+Io)+"|"+wl+"|"+xm+"|"+El),c7=r(or+"\\:"+Qx+r("\\?"+_l)+"?"+r("\\#"+Ff)+"?"),l7=r(r("\\/\\/"+Yx+Io)+"|"+wl+"|"+_b+"|"+El),d7=r(l7+r("\\?"+_l)+"?"+r("\\#"+Ff)+"?"),ohe=r(c7+"|"+d7),ahe=r(or+"\\:"+Qx+r("\\?"+_l)+"?"),uhe="^("+or+")\\:"+r(r("\\/\\/("+r("("+Nt+")@")+"?("+Bf+")"+r("\\:("+If+")")+"?)")+"?("+Io+"|"+wl+"|"+xm+"|"+El+")")+r("\\?("+_l+")")+"?"+r("\\#("+Ff+")")+"?$",che="^(){0}"+r(r("\\/\\/("+r("("+Nt+")@")+"?("+Bf+")"+r("\\:("+If+")")+"?)")+"?("+Io+"|"+wl+"|"+_b+"|"+El+")")+r("\\?("+_l+")")+"?"+r("\\#("+Ff+")")+"?$",lhe="^("+or+")\\:"+r(r("\\/\\/("+r("("+Nt+")@")+"?("+Bf+")"+r("\\:("+If+")")+"?)")+"?("+Io+"|"+wl+"|"+xm+"|"+El+")")+r("\\?("+_l+")")+"?$",dhe="^"+r("\\#("+Ff+")")+"?$",fhe="^"+r("("+Nt+")@")+"?("+Bf+")"+r("\\:("+If+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",L,J,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Pt,_t),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Pt,_t),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Pt,_t),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Pt,_t),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Pt,_t,"[\\:\\@\\/\\?]",Yt),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Pt,_t,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Pt,_t),"g"),UNRESERVED:new RegExp(Pt,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Pt,sr),"g"),PCT_ENCODED:new RegExp(Tt,"g"),IPV4ADDRESS:new RegExp("^("+_i+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Bo+")"+r(r("\\%25|\\%(?!"+fe+"{2})")+"("+bl+")")+"?\\]?$")}}var u=a(!1),c=a(!0),l=function(){function K(L,W){var J=[],G=!0,fe=!1,Ye=void 0;try{for(var At=L[Symbol.iterator](),Tt;!(G=(Tt=At.next()).done)&&(J.push(Tt.value),!(W&&J.length===W));G=!0);}catch(Cr){fe=!0,Ye=Cr}finally{try{!G&&At.return&&At.return()}finally{if(fe)throw Ye}}return J}return function(L,W){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return K(L,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(K){if(Array.isArray(K)){for(var L=0,W=Array(K.length);L<K.length;L++)W[L]=K[L];return W}else return Array.from(K)},h=2147483647,f=36,p=1,g=26,w=38,P=700,C=72,v=128,k="-",B=/^xn--/,T=/[^\0-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=f-p,E=Math.floor,I=String.fromCharCode;function S(K){throw new RangeError(y[K])}function N(K,L){for(var W=[],J=K.length;J--;)W[J]=L(K[J]);return W}function R(K,L){var W=K.split("@"),J="";W.length>1&&(J=W[0]+"@",K=W[1]),K=K.replace(M,".");var G=K.split("."),fe=N(G,L).join(".");return J+fe}function O(K){for(var L=[],W=0,J=K.length;W<J;){var G=K.charCodeAt(W++);if(G>=55296&&G<=56319&&W<J){var fe=K.charCodeAt(W++);(fe&64512)==56320?L.push(((G&1023)<<10)+(fe&1023)+65536):(L.push(G),W--)}else L.push(G)}return L}var F=function(L){return String.fromCodePoint.apply(String,d(L))},U=function(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:f},q=function(L,W){return L+22+75*(L<26)-((W!=0)<<5)},$=function(L,W,J){var G=0;for(L=J?E(L/P):L>>1,L+=E(L/W);L>b*g>>1;G+=f)L=E(L/b);return E(G+(b+1)*L/(L+w))},V=function(L){var W=[],J=L.length,G=0,fe=v,Ye=C,At=L.lastIndexOf(k);At<0&&(At=0);for(var Tt=0;Tt<At;++Tt)L.charCodeAt(Tt)>=128&&S("not-basic"),W.push(L.charCodeAt(Tt));for(var Cr=At>0?At+1:0;Cr<J;){for(var _t=G,sr=1,Pr=f;;Pr+=f){Cr>=J&&S("invalid-input");var Yt=U(L.charCodeAt(Cr++));(Yt>=f||Yt>E((h-G)/sr))&&S("overflow"),G+=Yt*sr;var Pt=Pr<=Ye?p:Pr>=Ye+g?g:Pr-Ye;if(Yt<Pt)break;var or=f-Pt;sr>E(h/or)&&S("overflow"),sr*=or}var Nt=W.length+1;Ye=$(G-_t,Nt,_t==0),E(G/Nt)>h-fe&&S("overflow"),fe+=E(G/Nt),G%=Nt,W.splice(G++,0,fe)}return String.fromCodePoint.apply(String,W)},z=function(L){var W=[];L=O(L);var J=L.length,G=v,fe=0,Ye=C,At=!0,Tt=!1,Cr=void 0;try{for(var _t=L[Symbol.iterator](),sr;!(At=(sr=_t.next()).done);At=!0){var Pr=sr.value;Pr<128&&W.push(I(Pr))}}catch(Hu){Tt=!0,Cr=Hu}finally{try{!At&&_t.return&&_t.return()}finally{if(Tt)throw Cr}}var Yt=W.length,Pt=Yt;for(Yt&&W.push(k);Pt<J;){var or=h,Nt=!0,Ku=!1,oi=void 0;try{for(var _i=L[Symbol.iterator](),Lt;!(Nt=(Lt=_i.next()).done);Nt=!0){var ai=Lt.value;ai>=G&&ai<or&&(or=ai)}}catch(Hu){Ku=!0,oi=Hu}finally{try{!Nt&&_i.return&&_i.return()}finally{if(Ku)throw oi}}var Di=Pt+1;or-G>E((h-fe)/Di)&&S("overflow"),fe+=(or-G)*Di,G=or;var Fs=!0,Vu=!1,ko=void 0;try{for(var kf=L[Symbol.iterator](),Sm;!(Fs=(Sm=kf.next()).done);Fs=!0){var Am=Sm.value;if(Am<G&&++fe>h&&S("overflow"),Am==G){for(var gl=fe,vl=f;;vl+=f){var Bo=vl<=Ye?p:vl>=Ye+g?g:vl-Ye;if(gl<Bo)break;var bl=gl-Bo,Eb=f-Bo;W.push(I(q(Bo+bl%Eb,0))),gl=E(bl/Eb)}W.push(I(q(gl,0))),Ye=$(fe,Di,Pt==Yt),fe=0,++Pt}}}catch(Hu){Vu=!0,ko=Hu}finally{try{!Fs&&kf.return&&kf.return()}finally{if(Vu)throw ko}}++fe,++G}return W.join("")},ee=function(L){return R(L,function(W){return B.test(W)?V(W.slice(4).toLowerCase()):W})},ce=function(L){return R(L,function(W){return T.test(W)?"xn--"+z(W):W})},re={version:"2.1.0",ucs2:{decode:O,encode:F},decode:V,encode:z,toASCII:ce,toUnicode:ee},ie={};function ue(K){var L=K.charCodeAt(0),W=void 0;return L<16?W="%0"+L.toString(16).toUpperCase():L<128?W="%"+L.toString(16).toUpperCase():L<2048?W="%"+(L>>6|192).toString(16).toUpperCase()+"%"+(L&63|128).toString(16).toUpperCase():W="%"+(L>>12|224).toString(16).toUpperCase()+"%"+(L>>6&63|128).toString(16).toUpperCase()+"%"+(L&63|128).toString(16).toUpperCase(),W}function ye(K){for(var L="",W=0,J=K.length;W<J;){var G=parseInt(K.substr(W+1,2),16);if(G<128)L+=String.fromCharCode(G),W+=3;else if(G>=194&&G<224){if(J-W>=6){var fe=parseInt(K.substr(W+4,2),16);L+=String.fromCharCode((G&31)<<6|fe&63)}else L+=K.substr(W,6);W+=6}else if(G>=224){if(J-W>=9){var Ye=parseInt(K.substr(W+4,2),16),At=parseInt(K.substr(W+7,2),16);L+=String.fromCharCode((G&15)<<12|(Ye&63)<<6|At&63)}else L+=K.substr(W,9);W+=9}else L+=K.substr(W,3),W+=3}return L}function ke(K,L){function W(J){var G=ye(J);return G.match(L.UNRESERVED)?G:J}return K.scheme&&(K.scheme=String(K.scheme).replace(L.PCT_ENCODED,W).toLowerCase().replace(L.NOT_SCHEME,"")),K.userinfo!==void 0&&(K.userinfo=String(K.userinfo).replace(L.PCT_ENCODED,W).replace(L.NOT_USERINFO,ue).replace(L.PCT_ENCODED,s)),K.host!==void 0&&(K.host=String(K.host).replace(L.PCT_ENCODED,W).toLowerCase().replace(L.NOT_HOST,ue).replace(L.PCT_ENCODED,s)),K.path!==void 0&&(K.path=String(K.path).replace(L.PCT_ENCODED,W).replace(K.scheme?L.NOT_PATH:L.NOT_PATH_NOSCHEME,ue).replace(L.PCT_ENCODED,s)),K.query!==void 0&&(K.query=String(K.query).replace(L.PCT_ENCODED,W).replace(L.NOT_QUERY,ue).replace(L.PCT_ENCODED,s)),K.fragment!==void 0&&(K.fragment=String(K.fragment).replace(L.PCT_ENCODED,W).replace(L.NOT_FRAGMENT,ue).replace(L.PCT_ENCODED,s)),K}function He(K){return K.replace(/^0*(.*)/,"$1")||"0"}function Xe(K,L){var W=K.match(L.IPV4ADDRESS)||[],J=l(W,2),G=J[1];return G?G.split(".").map(He).join("."):K}function qe(K,L){var W=K.match(L.IPV6ADDRESS)||[],J=l(W,3),G=J[1],fe=J[2];if(G){for(var Ye=G.toLowerCase().split("::").reverse(),At=l(Ye,2),Tt=At[0],Cr=At[1],_t=Cr?Cr.split(":").map(He):[],sr=Tt.split(":").map(He),Pr=L.IPV4ADDRESS.test(sr[sr.length-1]),Yt=Pr?7:8,Pt=sr.length-Yt,or=Array(Yt),Nt=0;Nt<Yt;++Nt)or[Nt]=_t[Nt]||sr[Pt+Nt]||"";Pr&&(or[Yt-1]=Xe(or[Yt-1],L));var Ku=or.reduce(function(Di,Fs,Vu){if(!Fs||Fs==="0"){var ko=Di[Di.length-1];ko&&ko.index+ko.length===Vu?ko.length++:Di.push({index:Vu,length:1})}return Di},[]),oi=Ku.sort(function(Di,Fs){return Fs.length-Di.length})[0],_i=void 0;if(oi&&oi.length>1){var Lt=or.slice(0,oi.index),ai=or.slice(oi.index+oi.length);_i=Lt.join(":")+"::"+ai.join(":")}else _i=or.join(":");return fe&&(_i+="%"+fe),_i}else return K}var Le=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,pt="".match(/(){0}/)[1]===void 0;function Me(K){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W={},J=L.iri!==!1?c:u;L.reference==="suffix"&&(K=(L.scheme?L.scheme+":":"")+"//"+K);var G=K.match(Le);if(G){pt?(W.scheme=G[1],W.userinfo=G[3],W.host=G[4],W.port=parseInt(G[5],10),W.path=G[6]||"",W.query=G[7],W.fragment=G[8],isNaN(W.port)&&(W.port=G[5])):(W.scheme=G[1]||void 0,W.userinfo=K.indexOf("@")!==-1?G[3]:void 0,W.host=K.indexOf("//")!==-1?G[4]:void 0,W.port=parseInt(G[5],10),W.path=G[6]||"",W.query=K.indexOf("?")!==-1?G[7]:void 0,W.fragment=K.indexOf("#")!==-1?G[8]:void 0,isNaN(W.port)&&(W.port=K.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?G[4]:void 0)),W.host&&(W.host=qe(Xe(W.host,J),J)),W.scheme===void 0&&W.userinfo===void 0&&W.host===void 0&&W.port===void 0&&!W.path&&W.query===void 0?W.reference="same-document":W.scheme===void 0?W.reference="relative":W.fragment===void 0?W.reference="absolute":W.reference="uri",L.reference&&L.reference!=="suffix"&&L.reference!==W.reference&&(W.error=W.error||"URI is not a "+L.reference+" reference.");var fe=ie[(L.scheme||W.scheme||"").toLowerCase()];if(!L.unicodeSupport&&(!fe||!fe.unicodeSupport)){if(W.host&&(L.domainHost||fe&&fe.domainHost))try{W.host=re.toASCII(W.host.replace(J.PCT_ENCODED,ye).toLowerCase())}catch(Ye){W.error=W.error||"Host's domain name can not be converted to ASCII via punycode: "+Ye}ke(W,u)}else ke(W,J);fe&&fe.parse&&fe.parse(W,L)}else W.error=W.error||"URI can not be parsed.";return W}function at(K,L){var W=L.iri!==!1?c:u,J=[];return K.userinfo!==void 0&&(J.push(K.userinfo),J.push("@")),K.host!==void 0&&J.push(qe(Xe(String(K.host),W),W).replace(W.IPV6ADDRESS,function(G,fe,Ye){return"["+fe+(Ye?"%25"+Ye:"")+"]"})),(typeof K.port=="number"||typeof K.port=="string")&&(J.push(":"),J.push(String(K.port))),J.length?J.join(""):void 0}var br=/^\.\.?\//,Bs=/^\/\.(\/|$)/,ts=/^\/\.\.(\/|$)/,Oo=/^\/?(?:.|\n)*?(?=\/|$)/;function wr(K){for(var L=[];K.length;)if(K.match(br))K=K.replace(br,"");else if(K.match(Bs))K=K.replace(Bs,"/");else if(K.match(ts))K=K.replace(ts,"/"),L.pop();else if(K==="."||K==="..")K="";else{var W=K.match(Oo);if(W){var J=W[0];K=K.slice(J.length),L.push(J)}else throw new Error("Unexpected dot segment condition")}return L.join("")}function qn(K){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=L.iri?c:u,J=[],G=ie[(L.scheme||K.scheme||"").toLowerCase()];if(G&&G.serialize&&G.serialize(K,L),K.host&&!W.IPV6ADDRESS.test(K.host)){if(L.domainHost||G&&G.domainHost)try{K.host=L.iri?re.toUnicode(K.host):re.toASCII(K.host.replace(W.PCT_ENCODED,ye).toLowerCase())}catch(At){K.error=K.error||"Host's domain name can not be converted to "+(L.iri?"Unicode":"ASCII")+" via punycode: "+At}}ke(K,W),L.reference!=="suffix"&&K.scheme&&(J.push(K.scheme),J.push(":"));var fe=at(K,L);if(fe!==void 0&&(L.reference!=="suffix"&&J.push("//"),J.push(fe),K.path&&K.path.charAt(0)!=="/"&&J.push("/")),K.path!==void 0){var Ye=K.path;!L.absolutePath&&(!G||!G.absolutePath)&&(Ye=wr(Ye)),fe===void 0&&(Ye=Ye.replace(/^\/\//,"/%2F")),J.push(Ye)}return K.query!==void 0&&(J.push("?"),J.push(K.query)),K.fragment!==void 0&&(J.push("#"),J.push(K.fragment)),J.join("")}function Fa(K,L){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},J=arguments[3],G={};return J||(K=Me(qn(K,W),W),L=Me(qn(L,W),W)),W=W||{},!W.tolerant&&L.scheme?(G.scheme=L.scheme,G.userinfo=L.userinfo,G.host=L.host,G.port=L.port,G.path=wr(L.path||""),G.query=L.query):(L.userinfo!==void 0||L.host!==void 0||L.port!==void 0?(G.userinfo=L.userinfo,G.host=L.host,G.port=L.port,G.path=wr(L.path||""),G.query=L.query):(L.path?(L.path.charAt(0)==="/"?G.path=wr(L.path):((K.userinfo!==void 0||K.host!==void 0||K.port!==void 0)&&!K.path?G.path="/"+L.path:K.path?G.path=K.path.slice(0,K.path.lastIndexOf("/")+1)+L.path:G.path=L.path,G.path=wr(G.path)),G.query=L.query):(G.path=K.path,L.query!==void 0?G.query=L.query:G.query=K.query),G.userinfo=K.userinfo,G.host=K.host,G.port=K.port),G.scheme=K.scheme),G.fragment=L.fragment,G}function bt(K,L,W){var J=o({scheme:"null"},W);return qn(Fa(Me(K,J),Me(L,J),J,!0),J)}function ir(K,L){return typeof K=="string"?K=qn(Me(K,L),L):n(K)==="object"&&(K=Me(qn(K,L),L)),K}function Te(K,L,W){return typeof K=="string"?K=qn(Me(K,W),W):n(K)==="object"&&(K=qn(K,W)),typeof L=="string"?L=qn(Me(L,W),W):n(L)==="object"&&(L=qn(L,W)),K===L}function Er(K,L){return K&&K.toString().replace(!L||!L.iri?u.ESCAPE:c.ESCAPE,ue)}function St(K,L){return K&&K.toString().replace(!L||!L.iri?u.PCT_ENCODED:c.PCT_ENCODED,ye)}var Is={scheme:"http",domainHost:!0,parse:function(L,W){return L.host||(L.error=L.error||"HTTP URIs must have a host."),L},serialize:function(L,W){var J=String(L.scheme).toLowerCase()==="https";return(L.port===(J?443:80)||L.port==="")&&(L.port=void 0),L.path||(L.path="/"),L}},Lu={scheme:"https",domainHost:Is.domainHost,parse:Is.parse,serialize:Is.serialize};function Ln(K){return typeof K.secure=="boolean"?K.secure:String(K.scheme).toLowerCase()==="wss"}var Ts={scheme:"ws",domainHost:!0,parse:function(L,W){var J=L;return J.secure=Ln(J),J.resourceName=(J.path||"/")+(J.query?"?"+J.query:""),J.path=void 0,J.query=void 0,J},serialize:function(L,W){if((L.port===(Ln(L)?443:80)||L.port==="")&&(L.port=void 0),typeof L.secure=="boolean"&&(L.scheme=L.secure?"wss":"ws",L.secure=void 0),L.resourceName){var J=L.resourceName.split("?"),G=l(J,2),fe=G[0],Ye=G[1];L.path=fe&&fe!=="/"?fe:void 0,L.query=Ye,L.resourceName=void 0}return L.fragment=void 0,L}},rs={scheme:"wss",domainHost:Ts.domainHost,parse:Ts.parse,serialize:Ts.serialize},yr={},Em=!0,_m="[A-Za-z0-9\\-\\.\\_\\~"+(Em?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",kt="[0-9A-Fa-f]",On=r(r("%[EFef]"+kt+"%"+kt+kt+"%"+kt+kt)+"|"+r("%[89A-Fa-f]"+kt+"%"+kt+kt)+"|"+r("%"+kt+kt)),Uu="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",yl="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Dm=e(yl,'[\\"\\\\]'),bb="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",wb=new RegExp(_m,"g"),m=new RegExp(On,"g"),A=new RegExp(e("[^]",Uu,"[\\.]",'[\\"]',Dm),"g"),_=new RegExp(e("[^]",_m,bb),"g"),x=_;function j(K){var L=ye(K);return L.match(wb)?L:K}var X={scheme:"mailto",parse:function(L,W){var J=L,G=J.to=J.path?J.path.split(","):[];if(J.path=void 0,J.query){for(var fe=!1,Ye={},At=J.query.split("&"),Tt=0,Cr=At.length;Tt<Cr;++Tt){var _t=At[Tt].split("=");switch(_t[0]){case"to":for(var sr=_t[1].split(","),Pr=0,Yt=sr.length;Pr<Yt;++Pr)G.push(sr[Pr]);break;case"subject":J.subject=St(_t[1],W);break;case"body":J.body=St(_t[1],W);break;default:fe=!0,Ye[St(_t[0],W)]=St(_t[1],W);break}}fe&&(J.headers=Ye)}J.query=void 0;for(var Pt=0,or=G.length;Pt<or;++Pt){var Nt=G[Pt].split("@");if(Nt[0]=St(Nt[0]),W.unicodeSupport)Nt[1]=St(Nt[1],W).toLowerCase();else try{Nt[1]=re.toASCII(St(Nt[1],W).toLowerCase())}catch(Ku){J.error=J.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ku}G[Pt]=Nt.join("@")}return J},serialize:function(L,W){var J=L,G=i(L.to);if(G){for(var fe=0,Ye=G.length;fe<Ye;++fe){var At=String(G[fe]),Tt=At.lastIndexOf("@"),Cr=At.slice(0,Tt).replace(m,j).replace(m,s).replace(A,ue),_t=At.slice(Tt+1);try{_t=W.iri?re.toUnicode(_t):re.toASCII(St(_t,W).toLowerCase())}catch(Pt){J.error=J.error||"Email address's domain name can not be converted to "+(W.iri?"Unicode":"ASCII")+" via punycode: "+Pt}G[fe]=Cr+"@"+_t}J.path=G.join(",")}var sr=L.headers=L.headers||{};L.subject&&(sr.subject=L.subject),L.body&&(sr.body=L.body);var Pr=[];for(var Yt in sr)sr[Yt]!==yr[Yt]&&Pr.push(Yt.replace(m,j).replace(m,s).replace(_,ue)+"="+sr[Yt].replace(m,j).replace(m,s).replace(x,ue));return Pr.length&&(J.query=Pr.join("&")),J}},te=/^([^\:]+)\:(.*)/,se={scheme:"urn",parse:function(L,W){var J=L.path&&L.path.match(te),G=L;if(J){var fe=W.scheme||G.scheme||"urn",Ye=J[1].toLowerCase(),At=J[2],Tt=fe+":"+(W.nid||Ye),Cr=ie[Tt];G.nid=Ye,G.nss=At,G.path=void 0,Cr&&(G=Cr.parse(G,W))}else G.error=G.error||"URN can not be parsed.";return G},serialize:function(L,W){var J=W.scheme||L.scheme||"urn",G=L.nid,fe=J+":"+(W.nid||G),Ye=ie[fe];Ye&&(L=Ye.serialize(L,W));var At=L,Tt=L.nss;return At.path=(G||W.nid)+":"+Tt,At}},ge=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ht={scheme:"urn:uuid",parse:function(L,W){var J=L;return J.uuid=J.nss,J.nss=void 0,!W.tolerant&&(!J.uuid||!J.uuid.match(ge))&&(J.error=J.error||"UUID is not valid."),J},serialize:function(L,W){var J=L;return J.nss=(L.uuid||"").toLowerCase(),J}};ie[Is.scheme]=Is,ie[Lu.scheme]=Lu,ie[Ts.scheme]=Ts,ie[rs.scheme]=rs,ie[X.scheme]=X,ie[se.scheme]=se,ie[ht.scheme]=ht,t.SCHEMES=ie,t.pctEncChar=ue,t.pctDecChars=ye,t.parse=Me,t.removeDotSegments=wr,t.serialize=qn,t.resolveComponents=Fa,t.resolve=bt,t.normalize=ir,t.equal=Te,t.escapeComponent=Er,t.unescapeComponent=St,Object.defineProperty(t,"__esModule",{value:!0})})});var YE=D((U1e,dk)=>{"use strict";dk.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return n;let i=n.length===0?"":",";return`${n}${i}${t(s)}:${t(e[s])}`},"")}}`}});var hk=D((H1e,pk)=>{"use strict";function pX(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=t.length,a=t.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,g=0,w=0,P=f.length;w!==P&&f[w]===0;)w++,p++;for(var C=(P-w)*c+1>>>0,v=new Uint8Array(C);w!==P;){for(var k=f[w],B=0,T=C-1;(k!==0||B<g)&&T!==-1;T--,B++)k+=256*v[T]>>>0,v[T]=k%o>>>0,k=k/o>>>0;if(k!==0)throw new Error("Non-zero carry");g=B,w++}for(var M=C-g;M!==C&&v[M]===0;)M++;for(var y=a.repeat(p);M<C;++M)y+=t.charAt(v[M]);return y}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var g=0,w=0;f[p]===a;)g++,p++;for(var P=(f.length-p)*u+1>>>0,C=new Uint8Array(P);f[p];){var v=e[f.charCodeAt(p)];if(v===255)return;for(var k=0,B=P-1;(v!==0||k<w)&&B!==-1;B--,k++)v+=o*C[B]>>>0,C[B]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");w=k,p++}if(f[p]!==" "){for(var T=P-w;T!==P&&C[T]===0;)T++;for(var M=new Uint8Array(g+(P-T)),y=g;T!==P;)M[y++]=C[T++];return M}}}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:d,decode:h}}pk.exports=pX});var C0=D((W1e,mk)=>{"use strict";var hX=new TextDecoder,mX=t=>hX.decode(t),yX=new TextEncoder,gX=t=>yX.encode(t);function vX(t,e){let r=new Uint8Array(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return r}mk.exports={decodeText:mX,encodeText:gX,concat:vX}});var gk=D((z1e,yk)=>{"use strict";var{encodeText:bX}=C0(),ZE=class{constructor(e,r,n,s){this.name=e,this.code=r,this.codeBuf=bX(this.code),this.alphabet=s,this.codec=n(s)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};yk.exports=ZE});var bk=D((J1e,vk)=>{"use strict";var wX=(t,e,r)=>{let n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),o=0,a=0,u=0;for(let c=0;c<s;++c){let l=n[t[c]];if(l===void 0)throw new SyntaxError("Invalid character "+t[c]);a=a<<r|l,o+=r,o>=8&&(o-=8,i[u++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return i},EX=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},_X=t=>e=>({encode(r){return EX(r,e,t)},decode(r){return wX(r,e,t)}});vk.exports={rfc4648:_X}});var Dk=D((G1e,_k)=>{"use strict";var Hp=hk(),DX=gk(),{rfc4648:dn}=bk(),{decodeText:SX,encodeText:AX}=C0(),xX=()=>({encode:SX,decode:AX}),wk=[["identity","\0",xX,""],["base2","0",dn(1),"01"],["base8","7",dn(3),"01234567"],["base10","9",Hp,"0123456789"],["base16","f",dn(4),"0123456789abcdef"],["base16upper","F",dn(4),"0123456789ABCDEF"],["base32hex","v",dn(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",dn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",dn(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",dn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",dn(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",dn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",dn(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",dn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",dn(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",Hp,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",Hp,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",Hp,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",Hp,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",dn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",dn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",dn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",dn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Ek=wk.reduce((t,e)=>(t[e[0]]=new DX(e[0],e[1],e[2],e[3]),t),{}),CX=wk.reduce((t,e)=>(t[e[1]]=Ek[e[0]],t),{});_k.exports={names:Ek,codes:CX}});var xk=D((aa,Ak)=>{"use strict";var gd=Dk(),{encodeText:PX,decodeText:P0,concat:Sk}=C0();function OX(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=Bc(t);return TX(r,e),Sk([n,e],n.length+e.length)}function kX(t,e){let r=Bc(t),n=PX(r.encode(e));return Sk([r.codeBuf,n],r.codeBuf.length+n.length)}function BX(t){t instanceof Uint8Array&&(t=P0(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),Bc(t[0]).decode(t.substring(1))}function IX(t){if(t instanceof Uint8Array&&(t=P0(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return Bc(t[0]).name}catch{return!1}}function TX(t,e){Bc(t).decode(P0(e))}function Bc(t){if(Object.prototype.hasOwnProperty.call(gd.names,t))return gd.names[t];if(Object.prototype.hasOwnProperty.call(gd.codes,t))return gd.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function FX(t){return t instanceof Uint8Array&&(t=P0(t)),Bc(t[0])}aa=Ak.exports=OX;aa.encode=kX;aa.decode=BX;aa.isEncoded=IX;aa.encoding=Bc;aa.encodingFromData=FX;var RX=Object.freeze(gd.names),$X=Object.freeze(gd.codes);aa.names=RX;aa.codes=$X});var kk=D((X1e,Ok)=>{Ok.exports=Pk;var Ck=128,NX=127,MX=~NX,jX=Math.pow(2,31);function Pk(t,e,r){e=e||[],r=r||0;for(var n=r;t>=jX;)e[r++]=t&255|Ck,t/=128;for(;t&MX;)e[r++]=t&255|Ck,t>>>=7;return e[r]=t|0,Pk.bytes=r-n+1,e}});var Tk=D((Y1e,Ik)=>{Ik.exports=QE;var qX=128,Bk=127;function QE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw QE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&Bk)<<s:(o&Bk)*Math.pow(2,s),s+=7}while(o>=qX);return QE.bytes=i-n,r}});var Rk=D((Z1e,Fk)=>{var LX=Math.pow(2,7),UX=Math.pow(2,14),KX=Math.pow(2,21),VX=Math.pow(2,28),HX=Math.pow(2,35),WX=Math.pow(2,42),zX=Math.pow(2,49),JX=Math.pow(2,56),GX=Math.pow(2,63);Fk.exports=function(t){return t<LX?1:t<UX?2:t<KX?3:t<VX?4:t<HX?5:t<WX?6:t<zX?7:t<JX?8:t<GX?9:10}});var Nk=D((Q1e,$k)=>{$k.exports={encode:kk(),decode:Tk(),encodingLength:Rk()}});var jk=D((ewe,Mk)=>{"use strict";var XX=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});Mk.exports={names:XX}});function YX(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,P=0,C=p.length;P!==C&&p[P]===0;)P++,g++;for(var v=(C-P)*l+1>>>0,k=new Uint8Array(v);P!==C;){for(var B=p[P],T=0,M=v-1;(B!==0||T<w)&&M!==-1;M--,T++)B+=256*k[M]>>>0,k[M]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");w=T,P++}for(var y=v-w;y!==v&&k[y]===0;)y++;for(var b=u.repeat(g);y<v;++y)b+=t.charAt(k[y]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,P=0;p[g]===u;)w++,g++;for(var C=(p.length-g)*c+1>>>0,v=new Uint8Array(C);p[g];){var k=r[p.charCodeAt(g)];if(k===255)return;for(var B=0,T=C-1;(k!==0||B<P)&&T!==-1;T--,B++)k+=a*v[T]>>>0,v[T]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");P=B,g++}if(p[g]!==" "){for(var M=C-P;M!==C&&v[M]===0;)M++;for(var y=new Uint8Array(w+(C-M)),b=w;M!==C;)y[b++]=v[M++];return y}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var ZX,QX,qk,Lk=Ot(()=>{ZX=YX,QX=ZX,qk=QX});var rwe,Uk,ua,Kk,Vk,su=Ot(()=>{rwe=new Uint8Array(0),Uk=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},ua=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Kk=t=>new TextEncoder().encode(t),Vk=t=>new TextDecoder().decode(t)});var e_,t_,r_,Wk,n_,vd,ou,eY,tY,gr,ps=Ot(()=>{Lk();su();e_=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},t_=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Wk(this,e)}},r_=class{constructor(e){this.decoders=e}or(e){return Wk(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Wk=(t,e)=>new r_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),n_=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new e_(e,r,n),this.decoder=new t_(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},vd=({name:t,prefix:e,encode:r,decode:n})=>new n_(t,e,r,n),ou=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=qk(r,e);return vd({prefix:t,name:e,encode:n,decode:i=>ua(s(i))})},eY=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},tY=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},gr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>vd({prefix:e,name:t,encode(s){return tY(s,n,r)},decode(s){return eY(s,n,r,t)}})});var i_={};ar(i_,{identity:()=>rY});var rY,zk=Ot(()=>{ps();su();rY=vd({prefix:"\0",name:"identity",encode:t=>Vk(t),decode:t=>Kk(t)})});var s_={};ar(s_,{base2:()=>nY});var nY,Jk=Ot(()=>{ps();nY=gr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var o_={};ar(o_,{base8:()=>iY});var iY,Gk=Ot(()=>{ps();iY=gr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var a_={};ar(a_,{base10:()=>sY});var sY,Xk=Ot(()=>{ps();sY=ou({prefix:"9",name:"base10",alphabet:"0123456789"})});var u_={};ar(u_,{base16:()=>oY,base16upper:()=>aY});var oY,aY,Yk=Ot(()=>{ps();oY=gr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),aY=gr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var c_={};ar(c_,{base32:()=>bd,base32hex:()=>dY,base32hexpad:()=>pY,base32hexpadupper:()=>hY,base32hexupper:()=>fY,base32pad:()=>cY,base32padupper:()=>lY,base32upper:()=>uY,base32z:()=>mY});var bd,uY,cY,lY,dY,fY,pY,hY,mY,l_=Ot(()=>{ps();bd=gr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),uY=gr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cY=gr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lY=gr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dY=gr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),fY=gr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pY=gr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hY=gr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),mY=gr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var d_={};ar(d_,{base36:()=>yY,base36upper:()=>gY});var yY,gY,Zk=Ot(()=>{ps();yY=ou({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gY=ou({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var f_={};ar(f_,{base58btc:()=>no,base58flickr:()=>vY});var no,vY,p_=Ot(()=>{ps();no=ou({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vY=ou({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var h_={};ar(h_,{base64:()=>bY,base64pad:()=>wY,base64url:()=>EY,base64urlpad:()=>_Y});var bY,wY,EY,_Y,Qk=Ot(()=>{ps();bY=gr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wY=gr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),EY=gr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_Y=gr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var m_={};ar(m_,{base256emoji:()=>CY});function AY(t){return t.reduce((e,r)=>(e+=DY[r],e),"")}function xY(t){let e=[];for(let r of t){let n=SY[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var eB,DY,SY,CY,tB=Ot(()=>{ps();eB=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),DY=eB.reduce((t,e,r)=>(t[r]=e,t),[]),SY=eB.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);CY=vd({prefix:"\u{1F680}",name:"base256emoji",encode:AY,decode:xY})});function iB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=BY;)e[r++]=t&255|rB,t/=128;for(;t&kY;)e[r++]=t&255|rB,t>>>=7;return e[r]=t|0,iB.bytes=r-n+1,e}function y_(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw y_.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&nB)<<s:(o&nB)*Math.pow(2,s),s+=7}while(o>=TY);return y_.bytes=i-n,r}var PY,rB,OY,kY,BY,IY,TY,nB,FY,RY,$Y,NY,MY,jY,qY,LY,UY,KY,VY,HY,Wp,sB=Ot(()=>{PY=iB,rB=128,OY=127,kY=~OY,BY=Math.pow(2,31);IY=y_,TY=128,nB=127;FY=Math.pow(2,7),RY=Math.pow(2,14),$Y=Math.pow(2,21),NY=Math.pow(2,28),MY=Math.pow(2,35),jY=Math.pow(2,42),qY=Math.pow(2,49),LY=Math.pow(2,56),UY=Math.pow(2,63),KY=function(t){return t<FY?1:t<RY?2:t<$Y?3:t<NY?4:t<MY?5:t<jY?6:t<qY?7:t<LY?8:t<UY?9:10},VY={encode:PY,decode:IY,encodingLength:KY},HY=VY,Wp=HY});var zp,wd,Ed,k0=Ot(()=>{sB();zp=(t,e=0)=>[Wp.decode(t,e),Wp.decode.bytes],wd=(t,e,r=0)=>(Wp.encode(t,e,r),e),Ed=t=>Wp.encodingLength(t)});var Ic,oB,aB,_d,Gp=Ot(()=>{su();k0();Ic=(t,e)=>{let r=e.byteLength,n=Ed(t),s=n+Ed(r),i=new Uint8Array(s+r);return wd(t,i,0),wd(r,i,n),i.set(e,s),new _d(t,r,e,i)},oB=t=>{let e=ua(t),[r,n]=zp(e),[s,i]=zp(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new _d(r,s,o,e)},aB=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&Uk(t.bytes,e.bytes),_d=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}});var v_,g_,b_=Ot(()=>{Gp();v_=({name:t,code:e,encode:r})=>new g_(t,e,r),g_=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Ic(this.code,r):r.then(n=>Ic(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var w_={};ar(w_,{sha256:()=>WY,sha512:()=>zY});var cB,WY,zY,lB=Ot(()=>{b_();cB=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),WY=v_({name:"sha2-256",code:18,encode:cB("SHA-256")}),zY=v_({name:"sha2-512",code:19,encode:cB("SHA-512")})});var E_={};ar(E_,{identity:()=>XY});var dB,JY,fB,GY,XY,pB=Ot(()=>{su();Gp();dB=0,JY="identity",fB=ua,GY=t=>Ic(dB,fB(t)),XY={code:dB,name:JY,encode:fB,digest:GY}});var hB=Ot(()=>{su()});var Dwe,Swe,mB=Ot(()=>{Dwe=new TextEncoder,Swe=new TextDecoder});var Kr,QY,eZ,tZ,Xp,rZ,yB,gB,B0,I0,nZ,iZ,sZ,vB=Ot(()=>{k0();Gp();p_();l_();su();Kr=class{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this.byteOffset=s.byteOffset,this.byteLength=s.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:I0,byteLength:I0,code:B0,version:B0,multihash:B0,bytes:B0,_baseCache:I0,asCID:I0})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Xp)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==rZ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Kr.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Ic(e,r);return Kr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&aB(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:s}=this;switch(n){case 0:return eZ(r,s,e||no.encoder);default:return tZ(r,s,e||bd.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return iZ(/^0\.0/,sZ),!!(e&&(e[gB]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Kr)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:s,bytes:i}=e;return new Kr(r,n,s,i||yB(r,n,s.bytes))}else if(e!=null&&e[gB]===!0){let{version:r,multihash:n,code:s}=e,i=oB(n);return Kr.create(r,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Xp)throw new Error(`Version 0 CID must use dag-pb (code: ${Xp}) block encoding`);return new Kr(e,r,n,n.bytes)}case 1:{let s=yB(e,r,n.bytes);return new Kr(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return Kr.create(0,Xp,e)}static createV1(e,r){return Kr.create(1,e,r)}static decode(e){let[r,n]=Kr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Kr.inspectBytes(e),n=r.size-r.multihashSize,s=ua(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new _d(r.multihashCode,r.digestSize,i,s);return[r.version===0?Kr.createV0(o):Kr.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,h]=zp(e.subarray(r));return r+=h,d},s=n(),i=Xp;if(s===18?(s=0,r=0):s===1&&(i=n()),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=QY(e,r),i=Kr.decode(s);return i._baseCache.set(n,e),i}},QY=(t,e)=>{switch(t[0]){case"Q":{let r=e||no;return[no.prefix,r.decode(`${no.prefix}${t}`)]}case no.prefix:{let r=e||no;return[no.prefix,r.decode(t)]}case bd.prefix:{let r=e||bd;return[bd.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},eZ=(t,e,r)=>{let{prefix:n}=r;if(n!==no.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},tZ=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},Xp=112,rZ=18,yB=(t,e,r)=>{let n=Ed(t),s=n+Ed(e),i=new Uint8Array(s+r.byteLength);return wd(t,i,0),wd(e,i,n),i.set(r,s),i},gB=Symbol.for("@ipld/js-cid/CID"),B0={writable:!1,configurable:!1,enumerable:!0},I0={writable:!1,enumerable:!1,configurable:!1},nZ="0.0.0-dev",iZ=(t,e)=>{if(t.test(nZ))console.warn(e);else throw new Error(e)},sZ=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var bB=Ot(()=>{vB();k0();su();b_();Gp()});var __,Iwe,wB=Ot(()=>{zk();Jk();Gk();Xk();Yk();l_();Zk();p_();Qk();tB();lB();pB();hB();mB();bB();__={...i_,...s_,...o_,...a_,...u_,...c_,...d_,...f_,...h_,...m_},Iwe={...w_,...E_}});function Dd(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var T0=Ot(()=>{});function F0(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Dd(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var D_=Ot(()=>{T0()});function _B(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var EB,S_,oZ,R0,A_=Ot(()=>{wB();D_();EB=_B("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),S_=_B("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=F0(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),oZ={utf8:EB,"utf-8":EB,hex:__.base16,latin1:S_,ascii:S_,binary:S_,...__},R0=oZ});var DB={};ar(DB,{toString:()=>aZ});function aZ(t,e="utf8"){let r=R0[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var SB=Ot(()=>{A_()});var AB={};ar(AB,{fromString:()=>uZ});function uZ(t,e="utf8"){let r=R0[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Dd(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var xB=Ot(()=>{A_();T0()});var CB={};ar(CB,{concat:()=>cZ});function cZ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));let r=F0(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return Dd(r)}var PB=Ot(()=>{D_();T0()});var RB=D((Hwe,FB)=>{"use strict";var OB=xk(),Sd=Nk(),{names:Yp}=jk(),{toString:$0}=(SB(),Rf(DB)),{fromString:lZ}=(xB(),Rf(AB)),{concat:dZ}=(PB(),Rf(CB)),Ad={};for(let t in Yp){let e=t;Ad[Yp[e]]=e}Object.freeze(Ad);function fZ(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return $0(t,"base16")}function pZ(t){return lZ(t,"base16")}function hZ(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return $0(OB.encode("base58btc",t)).slice(1)}function mZ(t){let e=t instanceof Uint8Array?$0(t):t;return OB.decode("z"+e)}function kB(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=Sd.decode(t);if(!IB(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(Sd.decode.bytes);let r=Sd.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(Sd.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${$0(t,"base16")}`);return{code:e,name:Ad[e],length:r,digest:t}}function yZ(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=BB(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");let s=Sd.encode(n),i=Sd.encode(r);return dZ([s,i,t],s.length+i.length+t.length)}function BB(t){let e=t;if(typeof t=="string"){if(Yp[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=Yp[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(Ad[e]===void 0&&!x_(e))throw new Error(`Unrecognized function code: ${e}`);return e}function x_(t){return t>0&&t<16}function IB(t){return!!(x_(t)||Ad[t])}function TB(t){kB(t)}function gZ(t){return TB(t),t.subarray(0,2)}FB.exports={names:Yp,codes:Ad,toHexString:fZ,fromHexString:pZ,toB58String:hZ,fromB58String:mZ,decode:kB,encode:yZ,coerceCode:BB,isAppCode:x_,validate:TB,prefix:gZ,isValidCode:IB}});var WB=D((A_e,HB)=>{var xd=1e3,Cd=xd*60,Pd=Cd*60,Fc=Pd*24,LZ=Fc*7,UZ=Fc*365.25;HB.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return KZ(t);if(r==="number"&&isFinite(t))return e.long?HZ(t):VZ(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function KZ(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*UZ;case"weeks":case"week":case"w":return r*LZ;case"days":case"day":case"d":return r*Fc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Pd;case"minutes":case"minute":case"mins":case"min":case"m":return r*Cd;case"seconds":case"second":case"secs":case"sec":case"s":return r*xd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function VZ(t){var e=Math.abs(t);return e>=Fc?Math.round(t/Fc)+"d":e>=Pd?Math.round(t/Pd)+"h":e>=Cd?Math.round(t/Cd)+"m":e>=xd?Math.round(t/xd)+"s":t+"ms"}function HZ(t){var e=Math.abs(t);return e>=Fc?q0(t,e,Fc,"day"):e>=Pd?q0(t,e,Pd,"hour"):e>=Cd?q0(t,e,Cd,"minute"):e>=xd?q0(t,e,xd,"second"):t+" ms"}function q0(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var q_=D((t2e,XB)=>{"use strict";XB.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var kd=D(L_=>{"use strict";Object.defineProperty(L_,"__esModule",{value:!0});var YB=q_();YB.code='require("ajv/dist/runtime/equal").default';L_.default=YB});var Wr=D(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.hasErrors=fa.Checked=fa.Status=void 0;fa.Status={INFO:"info",WARN:"warn",ERROR:"error"};var mQ=class{constructor(t,e,r){this.tag=t,this.status=e,this.message=r}};fa.Checked=mQ;var yQ=t=>{function e(r){return r.status===fa.Status.ERROR}return t.filter(r=>e(r)).length>0};fa.hasErrors=yQ});var nI=D(rI=>{"use strict";Object.defineProperty(rI,"__esModule",{value:!0})});var iI=D(H0=>{"use strict";Object.defineProperty(H0,"__esModule",{value:!0});H0.HandlerCheckResult=void 0;var gQ=class{constructor(t,e,r,n,s,i){this.input_descriptor_path=t,this.verifiable_credential_path=e,this.evaluator=r,this.status=n,this.message=s,this.payload=i}};H0.HandlerCheckResult=gQ});var oI=D(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0})});var uI=D(aI=>{"use strict";Object.defineProperty(aI,"__esModule",{value:!0})});var cI=D(oo=>{"use strict";var vQ=oo&&oo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),W0=oo&&oo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vQ(e,t,r)};Object.defineProperty(oo,"__esModule",{value:!0});W0(nI(),oo);W0(iI(),oo);W0(oI(),oo);W0(uI(),oo)});var lI=D(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.parseDid=ao.IProofType=ao.IProofPurpose=void 0;var bQ;(function(t){t.verificationMethod="verificationMethod",t.assertionMethod="assertionMethod",t.authentication="authentication",t.keyAgreement="keyAgreement",t.contractAgreement="contactAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(bQ=ao.IProofPurpose||(ao.IProofPurpose={}));var wQ;(function(t){t.Ed25519Signature2018="Ed25519Signature2018",t.Ed25519Signature2020="Ed25519Signature2020",t.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",t.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",t.JsonWebSignature2020="JsonWebSignature2020",t.RsaSignature2018="RsaSignature2018",t.GpgSignature2020="GpgSignature2020",t.JcsEd25519Signature2020="JcsEd25519Signature2020",t.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",t.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",t.JwtProof2020="JwtProof2020"})(wQ=ao.IProofType||(ao.IProofType={}));var EQ=t=>{let e=_Q(t);if(e===null)throw new Error("invalid did");return e};ao.parseDid=EQ;var _Q=t=>{let r="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",n="([a-z0-9]+)",s=`((?:${r}*:)*(${r}+))`,i="[a-zA-Z0-9_.:%-]",a=`((${`;${i}+=${i}*`})*)`,u="(/[^#?]*)?",c="([?][^#]*)?",l="(#.*)?",d=new RegExp(`^did:${n}:${s}${a}${u}${c}${l}$`);if(t===""||!t)return null;let h=t.match(d);if(h){let f={did:`did:${h[1]}:${h[2]}`,method:h[1],id:h[2],didUrl:t};if(h[4]){let p=h[4].slice(1).split(";");f.params={};for(let g of p){let w=g.split("=");f.params[w[0]]=w[1]}}return h[6]&&(f.path=h[6]),h[7]&&(f.query=h[7].slice(1)),h[8]&&(f.fragment=h[8].slice(1)),f}return null}});var fI=D(dI=>{"use strict";Object.defineProperty(dI,"__esModule",{value:!0})});var pI=D(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.JWT_PROOF_TYPE_2020=uo.DocumentFormat=uo.OriginalType=void 0;var DQ;(function(t){t.JSONLD="json-ld",t.JWT_ENCODED="jwt-encoded",t.JWT_DECODED="jwt-decoded"})(DQ=uo.OriginalType||(uo.OriginalType={}));var SQ;(function(t){t[t.JWT=0]="JWT",t[t.JSONLD=1]="JSONLD",t[t.EIP712=2]="EIP712"})(SQ=uo.DocumentFormat||(uo.DocumentFormat={}));uo.JWT_PROOF_TYPE_2020="JwtProof2020"});var mI=D(hI=>{"use strict";Object.defineProperty(hI,"__esModule",{value:!0})});var X_=D(co=>{"use strict";var AQ=co&&co.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),z0=co&&co.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&AQ(e,t,r)};Object.defineProperty(co,"__esModule",{value:!0});z0(lI(),co);z0(fI(),co);z0(pI(),co);z0(mI(),co)});var yI=D(J0=>{"use strict";Object.defineProperty(J0,"__esModule",{value:!0});J0.ObjectUtils=void 0;var th=class{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;th.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}};J0.ObjectUtils=th});var Y_=D($c=>{"use strict";var xQ=$c&&$c.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),CQ=$c&&$c.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xQ(e,t,r)};Object.defineProperty($c,"__esModule",{value:!0});CQ(yI(),$c)});var wI=D((I2e,bI)=>{"use strict";function Q_(t){this.message=t}Q_.prototype=new Error,Q_.prototype.name="InvalidCharacterError";var gI=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new Q_("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function PQ(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(gI(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return gI(e)}}function rh(t){this.message=t}function vI(t,e){if(typeof t!="string")throw new rh("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(PQ(t.split(".")[r]))}catch(n){throw new rh("Invalid token specified: "+n.message)}}rh.prototype=new Error,rh.prototype.name="InvalidTokenError";var Z_=vI;Z_.default=vI,Z_.InvalidTokenError=rh,bI.exports=Z_});var DI=D(pu=>{"use strict";var EI=pu&&pu.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},OQ=pu&&pu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pu,"__esModule",{value:!0});pu.CredentialMapper=void 0;var lo=X_(),Fd=OQ(wI()),_I=Y_(),Ue=class{static decodeVerifiablePresentation(e){var r;if(Ue.isJwtEncoded(e)){let n=(0,Fd.default)(e),s=(0,Fd.default)(e,{header:!0});return n.vp.proof={type:lo.IProofType.JwtProof2020,created:n.nbf,proofPurpose:lo.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return Ue.isJwtDecodedPresentation(e)?e:Ue.isJsonLdAsString(e)?JSON.parse(e):e}static decodeVerifiableCredential(e){var r;if(Ue.isJwtEncoded(e)){let n=(0,Fd.default)(e),s=(0,Fd.default)(e,{header:!0});return n.vc.proof={type:lo.IProofType.JwtProof2020,created:n.nbf,proofPurpose:lo.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return Ue.isJwtDecodedCredential(e)?e:Ue.isJsonLdAsString(e)?JSON.parse(e):e}static toWrappedVerifiablePresentation(e,r){let n=Ue.getFirstProof(e),s=typeof e!="string"&&Ue.hasJWTProofType(e)?n?.jwt:e;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let i=Ue.decodeVerifiablePresentation(s),o=Ue.isJwtEncoded(s),a=Ue.isJwtDecodedPresentation(s),u=o?lo.OriginalType.JWT_ENCODED:a?lo.OriginalType.JWT_DECODED:lo.OriginalType.JSONLD,c=a||o?"jwt_vp":"ldp_vp",l;if(o||a?l=Ue.jwtDecodedPresentationToUniformPresentation(i,!1,r):l=i,!l||!("verifiableCredential"in l)||!l.verifiableCredential||l.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");let d=Ue.toWrappedVerifiableCredentials(l.verifiableCredential,r),h=Object.assign(Object.assign({},l),{verifiableCredential:d});return{type:u,format:c,original:s,decoded:i,presentation:h,vcs:d}}static toWrappedVerifiableCredentials(e,r){return e.map(n=>Ue.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(e,r){var n;let s=Ue.getFirstProof(e),i=Ue.hasJWTProofType(e)&&s&&(n=s.jwt)!==null&&n!==void 0?n:e;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");let o=Ue.decodeVerifiableCredential(i),a=Ue.isJwtEncoded(i),u=Ue.isJwtDecodedCredential(i),c=a?lo.OriginalType.JWT_ENCODED:u?lo.OriginalType.JWT_DECODED:lo.OriginalType.JSONLD,l=a||u?Ue.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||u?"jwt_vc":"ldp_vc",type:c,credential:l}}static isJwtEncoded(e){return _I.ObjectUtils.isString(e)&&e.startsWith("ey")}static isJsonLdAsString(e){return _I.ObjectUtils.isString(e)&&e.includes("@context")}static isJwtDecodedCredential(e){return e.vc!==void 0&&e.iss!==void 0}static isJwtDecodedPresentation(e){return e.vp!==void 0&&e.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(e,r=!0,n){return Ue.jwtDecodedPresentationToUniformPresentation((0,Fd.default)(e),r,n)}static jwtDecodedPresentationToUniformPresentation(e,r=!0,n){let{iss:s,aud:i,jti:o,vp:a}=e,u=EI(e,["iss","aud","jti","vp"]),c=Object.assign(Object.assign({},u),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");c.verifiableCredential=a.verifiableCredential.map(l=>Ue.toUniformCredential(l,n))}if(s){let l=c.holder;if(l&&l!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${l})`);c.holder=s}if(i){let l=c.verifier;if(l&&l!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${l})`);c.verifier=i}if(o){let l=c.id;if(l&&l!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${l})`);c.id=o}return c}static toUniformCredential(e,r){var n;let s=typeof e!="string"&&Ue.hasJWTProofType(e)?(n=Ue.getFirstProof(e))===null||n===void 0?void 0:n.jwt:e;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");let i=Ue.decodeVerifiableCredential(s),o=Ue.isJwtEncoded(s);return Ue.isJwtDecodedCredential(s)||o?Ue.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(e,r){var n;let s=Ue.getFirstProof(e),i=typeof e!="string"&&Ue.hasJWTProofType(e)?s?.jwt:e;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let o=Ue.decodeVerifiablePresentation(i),a=Ue.isJwtEncoded(i),u=Ue.isJwtDecodedPresentation(i),c=a||u?Ue.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r?.addContextIfMissing&&!c["@context"]&&(c["@context"]=["https://www.w3.org/2018/credentials/v1"]),c.verifiableCredential=(n=c.verifiableCredential)===null||n===void 0?void 0:n.map(l=>Ue.toUniformCredential(l,r)),c}static jwtEncodedCredentialToUniformCredential(e,r){return Ue.jwtDecodedCredentialToUniformCredential((0,Fd.default)(e),r)}static jwtDecodedCredentialToUniformCredential(e,r){let{exp:n,nbf:s,iss:i,vc:o,sub:a,jti:u}=e,c=EI(e,["exp","nbf","iss","vc","sub","jti"]),l=Object.assign(Object.assign({},c),o),d=r?.maxTimeSkewInMS!==void 0?r.maxTimeSkewInMS:999;if(n){let h=l.expirationDate,f=parseInt(n.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){let g=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||g>d)throw new Error(`Inconsistent expiration dates between JWT claim (${p}) and VC value (${h})`)}l.expirationDate=p}if(s){let h=l.issuanceDate,f=parseInt(s.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){let g=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||g>d)throw new Error(`Inconsistent issuance dates between JWT claim (${p}) and VC value (${h})`)}l.issuanceDate=p}if(i){let h=l.issuer;if(h){if(typeof h=="string"){if(h!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h})`)}else if(h.id!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h.id})`)}else l.issuer=i}if(a){let h=Array.isArray(l.credentialSubject)?l.credentialSubject:[l.credentialSubject];for(let f=0;f<h.length;f++){let p=h[f].id;if(p&&p!==a)throw new Error(`Inconsistent credential subject ids between JWT claim (${a}) and VC value (${p})`);Array.isArray(l.credentialSubject)?l.credentialSubject[f].id=a:l.credentialSubject.id=a}}if(u){let h=l.id;if(h&&h!==u)throw new Error(`Inconsistent credential ids between JWT claim (${u}) and VC value (${h})`);l.id=u}return l}static toExternalVerifiableCredential(e){let r;if(e.proof){if(!e.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!e.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!e.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!e.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},e.proof),{type:e.proof.type,created:e.proof.created,proofPurpose:e.proof.proofPurpose,verificationMethod:e.proof.verificationMethod})}return Object.assign(Object.assign({},e),{type:e.type?typeof e.type=="string"?[e.type]:e.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(e){let r=Ue.detectDocumentType(e);if(typeof e=="string"){if(r===0)return Ue.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static storedPresentationToOriginalFormat(e){let r=Ue.detectDocumentType(e);if(typeof e=="string"){if(r===0)return Ue.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static toCompactJWT(e){if(!e||Ue.detectDocumentType(e)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof e=="string")return e;let r;if("vp"in e?r=e.vp.proof:"vc"in e?r=e.vc.proof:r=Array.isArray(e.proof)?e.proof[0].jwt:e.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(e){if(typeof e=="string")return this.isJsonLdAsString(e)?1:0;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof,n=Array.isArray(r)?r[0]:r;return n?.jwt?0:n?.type==="EthereumEip712Signature2021"?2:1}static hasJWTProofType(e){var r;return typeof e=="string"?!1:!!(!((r=Ue.getFirstProof(e))===null||r===void 0)&&r.jwt)}static getFirstProof(e){if(!e||typeof e=="string")return;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof;return Array.isArray(r)?r[0]:r}};pu.CredentialMapper=Ue});var SI=D(Nc=>{"use strict";var kQ=Nc&&Nc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),BQ=Nc&&Nc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&kQ(e,t,r)};Object.defineProperty(Nc,"__esModule",{value:!0});BQ(DI(),Nc)});var G0=D(pa=>{"use strict";var IQ=pa&&pa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),e2=pa&&pa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&IQ(e,t,r)};Object.defineProperty(pa,"__esModule",{value:!0});e2(X_(),pa);e2(Y_(),pa);e2(SI(),pa)});var gs=D(r2=>{"use strict";Object.defineProperty(r2,"__esModule",{value:!0});var t2;(function(t){t.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",t.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",t.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",t.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",t.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",t.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",t.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",t.SUBJECT_IS_NOT_ISSUER="subject is not issuer",t.SUBJECT_IS_ISSUER="subject is issuer",t.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",t.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",t.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",t.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",t.UNKNOWN_EXCEPTION="unknown exception occurred: ",t.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(t2||(t2={}));r2.default=t2});var UI=D(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.version=Ae.parse=Ae.tokenize=Ae.Syntax=void 0;var he,bs,OI,hu,me,o2,a2,de,Ft,H,Je,ct,$t,Z,pe,Ce,Q;he={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};bs={};bs[he.BooleanLiteral]="Boolean";bs[he.EOF]="<end>";bs[he.Identifier]="Identifier";bs[he.Keyword]="Keyword";bs[he.NullLiteral]="Null";bs[he.NumericLiteral]="Numeric";bs[he.Punctuator]="Punctuator";bs[he.StringLiteral]="String";bs[he.RegularExpression]="RegularExpression";OI=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];Ae.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};hu={Data:1,Get:2,Set:4};me={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};o2={NonAsciiIdentifierStart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]"),NonAsciiIdentifierPart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]")};function sh(t,e){if(!t)throw new Error("ASSERT: "+e)}function ha(t){return t>=48&&t<=57}function kI(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function nh(t){return"01234567".indexOf(t)>=0}function TQ(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function jc(t){return t===10||t===13||t===8232||t===8233}function $d(t){return t==64||t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&o2.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function Y0(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&o2.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function FQ(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function oh(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function Vi(t){return t==="eval"||t==="arguments"}function RQ(t){if(Ft&&oh(t))return!0;switch(t.length){case 2:return t==="if"||t==="in"||t==="do";case 3:return t==="var"||t==="for"||t==="new"||t==="try"||t==="let";case 4:return t==="this"||t==="else"||t==="case"||t==="void"||t==="with"||t==="enum";case 5:return t==="while"||t==="break"||t==="catch"||t==="throw"||t==="const"||t==="yield"||t==="class"||t==="super";case 6:return t==="return"||t==="typeof"||t==="delete"||t==="switch"||t==="export"||t==="import";case 7:return t==="default"||t==="finally"||t==="extends";case 8:return t==="function"||t==="continue"||t==="debugger";case 10:return t==="instanceof";default:return!1}}function s2(t,e,r,n,s){var i,o;sh(typeof r=="number","Comment must have valid position"),!(Ce.lastCommentStart>=r)&&(Ce.lastCommentStart=r,i={type:t,value:e},Q.range&&(i.range=[r,n]),Q.loc&&(i.loc=s),Q.comments.push(i),Q.attachComment&&(Q.leadingComments.push(i),Q.trailingComments.push(i)))}function n2(t){var e,r,n,s;for(e=H-t,r={start:{line:Je,column:H-ct-t}};H<$t;)if(n=de.charCodeAt(H),++H,jc(n)){Q.comments&&(s=de.slice(e+t,H-1),r.end={line:Je,column:H-ct-1},s2("Line",s,e,H-1,r)),n===13&&de.charCodeAt(H)===10&&++H,++Je,ct=H;return}Q.comments&&(s=de.slice(e+t,H),r.end={line:Je,column:H-ct},s2("Line",s,e,H,r))}function $Q(){var t,e,r,n;for(Q.comments&&(t=H-2,e={start:{line:Je,column:H-ct-2}});H<$t;)if(r=de.charCodeAt(H),jc(r))r===13&&de.charCodeAt(H+1)===10&&++H,++Je,++H,ct=H,H>=$t&&st({},me.UnexpectedToken,"ILLEGAL");else if(r===42){if(de.charCodeAt(H+1)===47){++H,++H,Q.comments&&(n=de.slice(t+2,H-2),e.end={line:Je,column:H-ct},s2("Block",n,t,H,e));return}++H}else++H;st({},me.UnexpectedToken,"ILLEGAL")}function mu(){var t,e;for(e=H===0;H<$t;)if(t=de.charCodeAt(H),TQ(t))++H;else if(jc(t))++H,t===13&&de.charCodeAt(H)===10&&++H,++Je,ct=H,e=!0;else if(t===47)if(t=de.charCodeAt(H+1),t===47)++H,++H,n2(2),e=!0;else if(t===42)++H,++H,$Q();else break;else if(e&&t===45)if(de.charCodeAt(H+1)===45&&de.charCodeAt(H+2)===62)H+=3,n2(3);else break;else if(t===60)if(de.slice(H+1,H+4)==="!--")++H,++H,++H,++H,n2(4);else break;else break}function Z0(t){var e,r,n,s=0;for(r=t==="u"?4:2,e=0;e<r;++e)if(H<$t&&kI(de[H]))n=de[H++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function BI(){var t,e;for(t=de.charCodeAt(H++),e=String.fromCharCode(t),t===92&&(de.charCodeAt(H)!==117&&st({},me.UnexpectedToken,"ILLEGAL"),++H,t=Z0("u"),(!t||t==="\\"||!$d(t.charCodeAt(0)))&&st({},me.UnexpectedToken,"ILLEGAL"),e=t);H<$t&&(t=de.charCodeAt(H),!!Y0(t));)++H,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),de.charCodeAt(H)!==117&&st({},me.UnexpectedToken,"ILLEGAL"),++H,t=Z0("u"),(!t||t==="\\"||!Y0(t.charCodeAt(0)))&&st({},me.UnexpectedToken,"ILLEGAL"),e+=t);return e}function NQ(){var t,e;for(t=H++;H<$t;){if(e=de.charCodeAt(H),e===92)return H=t,BI();if(Y0(e))++H;else break}return de.slice(t,H)}function MQ(){var t,e,r;return t=H,e=de.charCodeAt(H)===92?BI():NQ(),e.length===1?r=he.Identifier:RQ(e)?r=he.Keyword:e==="null"?r=he.NullLiteral:e==="true"||e==="false"?r=he.BooleanLiteral:r=he.Identifier,{type:r,value:e,lineNumber:Je,lineStart:ct,start:t,end:H}}function ma(){var t=H,e=de.charCodeAt(H),r,n=de[H],s,i,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++H,Q.tokenize&&(e===40?Q.openParenToken=Q.tokens.length:e===123&&(Q.openCurlyToken=Q.tokens.length)),{type:he.Punctuator,value:String.fromCharCode(e),lineNumber:Je,lineStart:ct,start:t,end:H};default:if(r=de.charCodeAt(H+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return H+=2,{type:he.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(r),lineNumber:Je,lineStart:ct,start:t,end:H};case 33:case 61:return H+=2,de.charCodeAt(H)===61&&++H,{type:he.Punctuator,value:de.slice(t,H),lineNumber:Je,lineStart:ct,start:t,end:H}}}if(o=de.substr(H,4),o===">>>=")return H+=4,{type:he.Punctuator,value:o,lineNumber:Je,lineStart:ct,start:t,end:H};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return H+=3,{type:he.Punctuator,value:i,lineNumber:Je,lineStart:ct,start:t,end:H};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return H+=2,{type:he.Punctuator,value:s,lineNumber:Je,lineStart:ct,start:t,end:H};if("<>=!+-*%&|^/".indexOf(n)>=0)return++H,{type:he.Punctuator,value:n,lineNumber:Je,lineStart:ct,start:t,end:H};st({},me.UnexpectedToken,"ILLEGAL")}function jQ(t){for(var e="";H<$t&&kI(de[H]);)e+=de[H++];return e.length===0&&st({},me.UnexpectedToken,"ILLEGAL"),$d(de.charCodeAt(H))&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:Je,lineStart:ct,start:t,end:H}}function qQ(t){for(var e="0"+de[H++];H<$t&&nh(de[H]);)e+=de[H++];return($d(de.charCodeAt(H))||ha(de.charCodeAt(H)))&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:Je,lineStart:ct,start:t,end:H}}function AI(){var t,e,r;if(r=de[H],sh(ha(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=H,t="",r!=="."){if(t=de[H++],r=de[H],t==="0"){if(r==="x"||r==="X")return++H,jQ(e);if(nh(r))return qQ(e);r&&ha(r.charCodeAt(0))&&st({},me.UnexpectedToken,"ILLEGAL")}for(;ha(de.charCodeAt(H));)t+=de[H++];r=de[H]}if(r==="."){for(t+=de[H++];ha(de.charCodeAt(H));)t+=de[H++];r=de[H]}if(r==="e"||r==="E")if(t+=de[H++],r=de[H],(r==="+"||r==="-")&&(t+=de[H++]),ha(de.charCodeAt(H)))for(;ha(de.charCodeAt(H));)t+=de[H++];else st({},me.UnexpectedToken,"ILLEGAL");return $d(de.charCodeAt(H))&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.NumericLiteral,value:parseFloat(t),lineNumber:Je,lineStart:ct,start:e,end:H}}function LQ(){var t="",e,r,n,s,i,o,a=!1,u,c;for(u=Je,c=ct,e=de[H],sh(e==="'"||e==='"',"String literal must starts with a quote"),r=H,++H;H<$t;)if(n=de[H++],n===e){e="";break}else if(n==="\\")if(n=de[H++],!n||!jc(n.charCodeAt(0)))switch(n){case"u":case"x":o=H,i=Z0(n),i?t+=i:(H=o,t+=n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:nh(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),H<$t&&nh(de[H])&&(a=!0,s=s*8+"01234567".indexOf(de[H++]),"0123".indexOf(n)>=0&&H<$t&&nh(de[H])&&(s=s*8+"01234567".indexOf(de[H++]))),t+=String.fromCharCode(s)):t+=n;break}else++Je,n==="\r"&&de[H]===`
`&&++H,ct=H;else{if(jc(n.charCodeAt(0)))break;t+=n}return e!==""&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.StringLiteral,value:t,octal:a,startLineNumber:u,startLineStart:c,lineNumber:Je,lineStart:ct,start:r,end:H}}function UQ(t,e){var r;try{r=new RegExp(t,e)}catch{st({},me.InvalidRegExp)}return r}function KQ(){var t,e,r,n,s;for(t=de[H],sh(t==="/","Regular expression literal must start with a slash"),e=de[H++],r=!1,n=!1;H<$t;)if(t=de[H++],e+=t,t==="\\")t=de[H++],jc(t.charCodeAt(0))&&st({},me.UnterminatedRegExp),e+=t;else if(jc(t.charCodeAt(0)))st({},me.UnterminatedRegExp);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||st({},me.UnterminatedRegExp),s=e.substr(1,e.length-2),{value:s,literal:e}}function VQ(){var t,e,r,n;for(e="",r="";H<$t&&(t=de[H],!!Y0(t.charCodeAt(0)));)if(++H,t==="\\"&&H<$t)if(t=de[H],t==="u"){if(++H,n=H,t=Z0("u"),t)for(r+=t,e+="\\u";n<H;++n)e+=de[n];else H=n,r+="u",e+="\\u";Rt({},me.UnexpectedToken,"ILLEGAL")}else e+="\\",Rt({},me.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}function II(){var t,e,r,n,s;return pe=null,mu(),t=H,e=KQ(),r=VQ(),s=UQ(e.value,r.value),Q.tokenize?{type:he.RegularExpression,value:s,lineNumber:Je,lineStart:ct,start:t,end:H}:{literal:e.literal+r.literal,value:s,start:t,end:H}}function Mc(){var t,e,r,n;return mu(),t=H,e={start:{line:Je,column:H-ct}},r=II(),e.end={line:Je,column:H-ct},Q.tokenize||(Q.tokens.length>0&&(n=Q.tokens[Q.tokens.length-1],n.range[0]===t&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&Q.tokens.pop()),Q.tokens.push({type:"RegularExpression",value:r.literal,range:[t,H],loc:e})),r}function HQ(t){return t.type===he.Identifier||t.type===he.Keyword||t.type===he.BooleanLiteral||t.type===he.NullLiteral}function WQ(){var t,e;if(t=Q.tokens[Q.tokens.length-1],!t)return Mc();if(t.type==="Punctuator"){if(t.value==="]")return ma();if(t.value===")")return e=Q.tokens[Q.openParenToken-1],e&&e.type==="Keyword"&&(e.value==="if"||e.value==="while"||e.value==="for"||e.value==="with")?Mc():ma();if(t.value==="}"){if(Q.tokens[Q.openCurlyToken-3]&&Q.tokens[Q.openCurlyToken-3].type==="Keyword"){if(e=Q.tokens[Q.openCurlyToken-4],!e)return ma()}else if(Q.tokens[Q.openCurlyToken-4]&&Q.tokens[Q.openCurlyToken-4].type==="Keyword"){if(e=Q.tokens[Q.openCurlyToken-5],!e)return Mc()}else return ma();return OI.indexOf(e.value)>=0?ma():Mc()}return Mc()}return t.type==="Keyword"?Mc():ma()}function u2(){var t;return mu(),H>=$t?{type:he.EOF,lineNumber:Je,lineStart:ct,start:H,end:H}:(t=de.charCodeAt(H),$d(t)?MQ():t===40||t===41||t===59?ma():t===39||t===34?LQ():t===46?ha(de.charCodeAt(H+1))?AI():ma():ha(t)?AI():Q.tokenize&&t===47?WQ():ma())}function TI(){var t,e,r,n;return mu(),t={start:{line:Je,column:H-ct}},e=u2(),t.end={line:Je,column:H-ct},e.type!==he.EOF&&(n=de.slice(e.start,e.end),Q.tokens.push({type:bs[e.type],value:n,range:[e.start,e.end],loc:t})),e}function it(){var t;return t=pe,H=t.end,Je=t.lineNumber,ct=t.lineStart,pe=typeof Q.tokens<"u"?TI():u2(),H=t.end,Je=t.lineNumber,ct=t.lineStart,t}function c2(){var t,e,r;t=H,e=Je,r=ct,pe=typeof Q.tokens<"u"?TI():u2(),H=t,Je=e,ct=r}function xI(t,e){this.line=t,this.column=e}function zQ(t,e,r,n){this.start=new xI(t,e),this.end=new xI(r,n)}a2={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===Ae.Syntax.Program&&t.body.length>0)){for(Q.trailingComments.length>0?Q.trailingComments[0].range[0]>=t.range[1]?(r=Q.trailingComments,Q.trailingComments=[]):Q.trailingComments.length=0:Q.bottomRightStack.length>0&&Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments&&Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments,delete Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments);Q.bottomRightStack.length>0&&Q.bottomRightStack[Q.bottomRightStack.length-1].range[0]>=t.range[0];)e=Q.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):Q.leadingComments.length>0&&Q.leadingComments[Q.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=Q.leadingComments,Q.leadingComments=[]),r&&(t.trailingComments=r),Q.bottomRightStack.push(t)}},markEnd:function(t,e){return Q.range&&(t.range=[e.start,H]),Q.loc&&(t.loc=new zQ(e.startLineNumber===void 0?e.lineNumber:e.startLineNumber,e.start-(e.startLineStart===void 0?e.lineStart:e.startLineStart),Je,H-ct),this.postProcess(t)),Q.attachComment&&this.processComment(t),t},postProcess:function(t){return Q.source&&(t.loc.source=Q.source),t},createArrayExpression:function(t){return{type:Ae.Syntax.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:Ae.Syntax.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n=t==="||"||t==="&&"?Ae.Syntax.LogicalExpression:Ae.Syntax.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:Ae.Syntax.BlockStatement,body:t}},createBreakStatement:function(t){return{type:Ae.Syntax.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:Ae.Syntax.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:Ae.Syntax.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:Ae.Syntax.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:Ae.Syntax.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:Ae.Syntax.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:Ae.Syntax.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:Ae.Syntax.EmptyStatement}},createExpressionStatement:function(t){return{type:Ae.Syntax.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:Ae.Syntax.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:Ae.Syntax.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:Ae.Syntax.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:Ae.Syntax.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:Ae.Syntax.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:Ae.Syntax.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:Ae.Syntax.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:Ae.Syntax.Literal,value:t.value,raw:de.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:Ae.Syntax.MemberExpression,computed:t==="[",object:e,property:r}},createNewExpression:function(t,e){return{type:Ae.Syntax.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:Ae.Syntax.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:Ae.Syntax.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:Ae.Syntax.Program,body:t}},createProperty:function(t,e,r){return{type:Ae.Syntax.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:Ae.Syntax.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:Ae.Syntax.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:Ae.Syntax.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:Ae.Syntax.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:Ae.Syntax.ThisExpression}},createThrowStatement:function(t){return{type:Ae.Syntax.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:Ae.Syntax.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return t==="++"||t==="--"?{type:Ae.Syntax.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:Ae.Syntax.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:Ae.Syntax.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:Ae.Syntax.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:Ae.Syntax.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:Ae.Syntax.WithStatement,object:t,body:e}}};function ah(){var t,e,r,n;return t=H,e=Je,r=ct,mu(),n=Je!==e,H=t,Je=e,ct=r,n}function st(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=e.replace(/%(\d)/g,function(o,a){return sh(a<r.length,"Message reference must be in range"),r[a]});throw typeof t.lineNumber=="number"?(s=new Error("Line "+t.lineNumber+": "+i),s.index=t.start,s.lineNumber=t.lineNumber,s.column=t.start-ct+1):(s=new Error("Line "+Je+": "+i),s.index=H,s.lineNumber=Je,s.column=H-ct+1),s.description=i,s}function Rt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{st.apply(null,t)}catch(r){if(Q.errors)Q.errors.push(r);else throw r}}function fo(t){if(t.type===he.EOF&&st(t,me.UnexpectedEOS),t.type===he.NumericLiteral&&st(t,me.UnexpectedNumber),t.type===he.StringLiteral&&st(t,me.UnexpectedString),t.type===he.Identifier&&st(t,me.UnexpectedIdentifier),t.type===he.Keyword){if(FQ(t.value))st(t,me.UnexpectedReserved);else if(Ft&&oh(t.value)){Rt(t,me.StrictReservedWord);return}st(t,me.UnexpectedToken,t.value)}st(t,me.UnexpectedToken,t.value)}function $e(t){var e=it();(e.type!==he.Punctuator||e.value!==t)&&fo(e)}function Fr(t){var e=it();(e.type!==he.Keyword||e.value!==t)&&fo(e)}function Fe(t){return pe.type===he.Punctuator&&pe.value===t}function hn(t){return pe.type===he.Keyword&&pe.value===t}function JQ(){var t;return pe.type!==he.Punctuator?!1:(t=pe.value,t==="="||t==="*="||t==="/="||t==="%="||t==="+="||t==="-="||t==="<<="||t===">>="||t===">>>="||t==="&="||t==="^="||t==="|=")}function po(){var t;if(de.charCodeAt(H)===59||Fe(";")){it();return}t=Je,mu(),Je===t&&pe.type!==he.EOF&&!Fe("}")&&fo(pe)}function eg(t){return t.type===Ae.Syntax.Identifier||t.type===Ae.Syntax.MemberExpression}function GQ(){var t=[],e;for(e=pe,$e("[");!Fe("]");)Fe(",")?(it(),t.push(null)):(t.push(vs()),Fe("]")||$e(","));return it(),Z.markEnd(Z.createArrayExpression(t),e)}function i2(t,e){var r,n,s;return r=Ft,s=pe,n=d2(),e&&Ft&&Vi(t[0].name)&&Rt(e,me.StrictParamName),Ft=r,Z.markEnd(Z.createFunctionExpression(null,t,[],n),s)}function X0(){var t,e;return e=pe,t=it(),t.type===he.StringLiteral||t.type===he.NumericLiteral?(Ft&&t.octal&&Rt(t,me.StrictOctalLiteral),Z.markEnd(Z.createLiteral(t),e)):Z.markEnd(Z.createIdentifier(t.value),e)}function XQ(){var t,e,r,n,s,i;if(t=pe,i=pe,t.type===he.Identifier)return r=X0(),t.value==="get"&&!Fe(":")?(e=X0(),$e("("),$e(")"),n=i2([]),Z.markEnd(Z.createProperty("get",e,n),i)):t.value==="set"&&!Fe(":")?(e=X0(),$e("("),t=pe,t.type!==he.Identifier?($e(")"),Rt(t,me.UnexpectedToken,t.value),n=i2([])):(s=[yu()],$e(")"),n=i2(s,t)),Z.markEnd(Z.createProperty("set",e,n),i)):($e(":"),n=vs(),Z.markEnd(Z.createProperty("init",r,n),i));if(t.type===he.EOF||t.type===he.Punctuator)fo(t);else return e=X0(),$e(":"),n=vs(),Z.markEnd(Z.createProperty("init",e,n),i)}function YQ(){var t=[],e,r,n,s,i={},o=String,a;for(a=pe,$e("{");!Fe("}");)e=XQ(),e.key.type===Ae.Syntax.Identifier?r=e.key.name:r=o(e.key.value),s=e.kind==="init"?hu.Data:e.kind==="get"?hu.Get:hu.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===hu.Data?Ft&&s===hu.Data?Rt({},me.StrictDuplicateProperty):s!==hu.Data&&Rt({},me.AccessorDataProperty):s===hu.Data?Rt({},me.AccessorDataProperty):i[n]&s&&Rt({},me.AccessorGetSet),i[n]|=s):i[n]=s,t.push(e),Fe("}")||$e(",");return $e("}"),Z.markEnd(Z.createObjectExpression(t),a)}function ZQ(){var t;return $e("("),t=tn(),$e(")"),t}function FI(){var t,e,r,n;if(Fe("("))return ZQ();if(Fe("["))return GQ();if(Fe("{"))return YQ();if(t=pe.type,n=pe,t===he.Identifier)r=Z.createIdentifier(it().value);else if(t===he.StringLiteral||t===he.NumericLiteral)Ft&&pe.octal&&Rt(pe,me.StrictOctalLiteral),r=Z.createLiteral(it());else if(t===he.Keyword){if(hn("function"))return Aee();hn("this")?(it(),r=Z.createThisExpression()):fo(it())}else t===he.BooleanLiteral?(e=it(),e.value=e.value==="true",r=Z.createLiteral(e)):t===he.NullLiteral?(e=it(),e.value=null,r=Z.createLiteral(e)):Fe("/")||Fe("/=")?(typeof Q.tokens<"u"?r=Z.createLiteral(Mc()):r=Z.createLiteral(II()),c2()):fo(it());return Z.markEnd(r,n)}function RI(){var t=[];if($e("("),!Fe(")"))for(;H<$t&&(t.push(vs()),!Fe(")"));)$e(",");return $e(")"),t}function QQ(){var t,e;return e=pe,t=it(),HQ(t)||fo(t),Z.markEnd(Z.createIdentifier(t.value),e)}function $I(){return $e("."),QQ()}function NI(){var t;return $e("["),t=tn(),$e("]"),t}function MI(){var t,e,r;return r=pe,Fr("new"),t=tee(),e=Fe("(")?RI():[],Z.markEnd(Z.createNewExpression(t,e),r)}function eee(){var t,e,r,n,s;for(s=pe,t=Ce.allowIn,Ce.allowIn=!0,e=hn("new")?MI():FI(),Ce.allowIn=t;;){if(Fe("."))n=$I(),e=Z.createMemberExpression(".",e,n);else if(Fe("("))r=RI(),e=Z.createCallExpression(e,r);else if(Fe("["))n=NI(),e=Z.createMemberExpression("[",e,n);else break;Z.markEnd(e,s)}return e}function tee(){var t,e,r,n;for(n=pe,t=Ce.allowIn,e=hn("new")?MI():FI(),Ce.allowIn=t;Fe(".")||Fe("[");)Fe("[")?(r=NI(),e=Z.createMemberExpression("[",e,r)):(r=$I(),e=Z.createMemberExpression(".",e,r)),Z.markEnd(e,n);return e}function CI(){var t,e,r=pe;return t=eee(),pe.type===he.Punctuator&&(Fe("++")||Fe("--"))&&!ah()&&(Ft&&t.type===Ae.Syntax.Identifier&&Vi(t.name)&&Rt({},me.StrictLHSPostfix),eg(t)||Rt({},me.InvalidLHSInAssignment),e=it(),t=Z.markEnd(Z.createPostfixExpression(e.value,t),r)),t}function Rd(){var t,e,r;return pe.type!==he.Punctuator&&pe.type!==he.Keyword?e=CI():Fe("++")||Fe("--")?(r=pe,t=it(),e=Rd(),Ft&&e.type===Ae.Syntax.Identifier&&Vi(e.name)&&Rt({},me.StrictLHSPrefix),eg(e)||Rt({},me.InvalidLHSInAssignment),e=Z.createUnaryExpression(t.value,e),e=Z.markEnd(e,r)):Fe("+")||Fe("-")||Fe("~")||Fe("!")?(r=pe,t=it(),e=Rd(),e=Z.createUnaryExpression(t.value,e),e=Z.markEnd(e,r)):hn("delete")||hn("void")||hn("typeof")?(r=pe,t=it(),e=Rd(),e=Z.createUnaryExpression(t.value,e),e=Z.markEnd(e,r),Ft&&e.operator==="delete"&&e.argument.type===Ae.Syntax.Identifier&&Rt({},me.StrictDelete)):e=CI(),e}function PI(t,e){var r=0;if(t.type!==he.Punctuator&&t.type!==he.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=e?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function ree(){var t,e,r,n,s,i,o,a,u,c;if(t=pe,u=Rd(),n=pe,s=PI(n,Ce.allowIn),s===0)return u;for(n.prec=s,it(),e=[t,pe],o=Rd(),i=[u,n,o];(s=PI(pe,Ce.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,u=i.pop(),r=Z.createBinaryExpression(a,u,o),e.pop(),t=e[e.length-1],Z.markEnd(r,t),i.push(r);n=it(),n.prec=s,i.push(n),e.push(pe),r=Rd(),i.push(r)}for(c=i.length-1,r=i[c],e.pop();c>1;)r=Z.createBinaryExpression(i[c-1].value,i[c-2],r),c-=2,t=e.pop(),Z.markEnd(r,t);return r}function nee(){var t,e,r,n,s;return s=pe,t=ree(),Fe("?")&&(it(),e=Ce.allowIn,Ce.allowIn=!0,r=vs(),Ce.allowIn=e,$e(":"),n=vs(),t=Z.createConditionalExpression(t,r,n),Z.markEnd(t,s)),t}function vs(){var t,e,r,n,s;return t=pe,s=pe,n=e=nee(),JQ()&&(eg(e)||Rt({},me.InvalidLHSInAssignment),Ft&&e.type===Ae.Syntax.Identifier&&Vi(e.name)&&Rt(t,me.StrictLHSAssignment),t=it(),r=vs(),n=Z.markEnd(Z.createAssignmentExpression(t.value,e,r),s)),n}function tn(){var t,e=pe;if(t=vs(),Fe(",")){for(t=Z.createSequenceExpression([t]);H<$t&&Fe(",");)it(),t.expressions.push(vs());Z.markEnd(t,e)}return t}function iee(){for(var t=[],e;H<$t&&!(Fe("}")||(e=ih(),typeof e>"u"));)t.push(e);return t}function Q0(){var t,e;return e=pe,$e("{"),t=iee(),$e("}"),Z.markEnd(Z.createBlockStatement(t),e)}function yu(){var t,e;return e=pe,t=it(),t.type!==he.Identifier&&fo(t),Z.markEnd(Z.createIdentifier(t.value),e)}function see(t){var e=null,r,n;return n=pe,r=yu(),Ft&&Vi(r.name)&&Rt({},me.StrictVarName),t==="const"?($e("="),e=vs()):Fe("=")&&(it(),e=vs()),Z.markEnd(Z.createVariableDeclarator(r,e),n)}function l2(t){var e=[];do{if(e.push(see(t)),!Fe(","))break;it()}while(H<$t);return e}function oee(){var t;return Fr("var"),t=l2(),po(),Z.createVariableDeclaration(t,"var")}function aee(t){var e,r;return r=pe,Fr(t),e=l2(t),po(),Z.markEnd(Z.createVariableDeclaration(e,t),r)}function uee(){return $e(";"),Z.createEmptyStatement()}function cee(){var t=tn();return po(),Z.createExpressionStatement(t)}function lee(){var t,e,r;return Fr("if"),$e("("),t=tn(),$e(")"),e=ho(),hn("else")?(it(),r=ho()):r=null,Z.createIfStatement(t,e,r)}function dee(){var t,e,r;return Fr("do"),r=Ce.inIteration,Ce.inIteration=!0,t=ho(),Ce.inIteration=r,Fr("while"),$e("("),e=tn(),$e(")"),Fe(";")&&it(),Z.createDoWhileStatement(t,e)}function fee(){var t,e,r;return Fr("while"),$e("("),t=tn(),$e(")"),r=Ce.inIteration,Ce.inIteration=!0,e=ho(),Ce.inIteration=r,Z.createWhileStatement(t,e)}function pee(){var t,e,r;return r=pe,t=it(),e=l2(),Z.markEnd(Z.createVariableDeclaration(e,t.value),r)}function hee(){var t,e,r,n,s,i,o;return t=e=r=null,Fr("for"),$e("("),Fe(";")?it():(hn("var")||hn("let")?(Ce.allowIn=!1,t=pee(),Ce.allowIn=!0,t.declarations.length===1&&hn("in")&&(it(),n=t,s=tn(),t=null)):(Ce.allowIn=!1,t=tn(),Ce.allowIn=!0,hn("in")&&(eg(t)||Rt({},me.InvalidLHSInForIn),it(),n=t,s=tn(),t=null)),typeof n>"u"&&$e(";")),typeof n>"u"&&(Fe(";")||(e=tn()),$e(";"),Fe(")")||(r=tn())),$e(")"),o=Ce.inIteration,Ce.inIteration=!0,i=ho(),Ce.inIteration=o,typeof n>"u"?Z.createForStatement(t,e,r,i):Z.createForInStatement(n,s,i)}function mee(){var t=null,e;return Fr("continue"),de.charCodeAt(H)===59?(it(),Ce.inIteration||st({},me.IllegalContinue),Z.createContinueStatement(null)):ah()?(Ce.inIteration||st({},me.IllegalContinue),Z.createContinueStatement(null)):(pe.type===he.Identifier&&(t=yu(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Ce.labelSet,e)||st({},me.UnknownLabel,t.name)),po(),t===null&&!Ce.inIteration&&st({},me.IllegalContinue),Z.createContinueStatement(t))}function yee(){var t=null,e;return Fr("break"),de.charCodeAt(H)===59?(it(),Ce.inIteration||Ce.inSwitch||st({},me.IllegalBreak),Z.createBreakStatement(null)):ah()?(Ce.inIteration||Ce.inSwitch||st({},me.IllegalBreak),Z.createBreakStatement(null)):(pe.type===he.Identifier&&(t=yu(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Ce.labelSet,e)||st({},me.UnknownLabel,t.name)),po(),t===null&&!(Ce.inIteration||Ce.inSwitch)&&st({},me.IllegalBreak),Z.createBreakStatement(t))}function gee(){var t=null;return Fr("return"),Ce.inFunctionBody||Rt({},me.IllegalReturn),de.charCodeAt(H)===32&&$d(de.charCodeAt(H+1))?(t=tn(),po(),Z.createReturnStatement(t)):ah()?Z.createReturnStatement(null):(Fe(";")||!Fe("}")&&pe.type!==he.EOF&&(t=tn()),po(),Z.createReturnStatement(t))}function vee(){var t,e;return Ft&&(mu(),Rt({},me.StrictModeWith)),Fr("with"),$e("("),t=tn(),$e(")"),e=ho(),Z.createWithStatement(t,e)}function bee(){var t,e=[],r,n;for(n=pe,hn("default")?(it(),t=null):(Fr("case"),t=tn()),$e(":");H<$t&&!(Fe("}")||hn("default")||hn("case"));)r=ho(),e.push(r);return Z.markEnd(Z.createSwitchCase(t,e),n)}function wee(){var t,e,r,n,s;if(Fr("switch"),$e("("),t=tn(),$e(")"),$e("{"),e=[],Fe("}"))return it(),Z.createSwitchStatement(t,e);for(n=Ce.inSwitch,Ce.inSwitch=!0,s=!1;H<$t&&!Fe("}");)r=bee(),r.test===null&&(s&&st({},me.MultipleDefaultsInSwitch),s=!0),e.push(r);return Ce.inSwitch=n,$e("}"),Z.createSwitchStatement(t,e)}function Eee(){var t;return Fr("throw"),ah()&&st({},me.NewlineAfterThrow),t=tn(),po(),Z.createThrowStatement(t)}function _ee(){var t,e,r;return r=pe,Fr("catch"),$e("("),Fe(")")&&fo(pe),t=yu(),Ft&&Vi(t.name)&&Rt({},me.StrictCatchVariable),$e(")"),e=Q0(),Z.markEnd(Z.createCatchClause(t,e),r)}function Dee(){var t,e=[],r=null;return Fr("try"),t=Q0(),hn("catch")&&e.push(_ee()),hn("finally")&&(it(),r=Q0()),e.length===0&&!r&&st({},me.NoCatchOrFinally),Z.createTryStatement(t,[],e,r)}function See(){return Fr("debugger"),po(),Z.createDebuggerStatement()}function ho(){var t=pe.type,e,r,n,s;if(t===he.EOF&&fo(pe),t===he.Punctuator&&pe.value==="{")return Q0();if(s=pe,t===he.Punctuator)switch(pe.value){case";":return Z.markEnd(uee(),s);case"(":return Z.markEnd(cee(),s);default:break}if(t===he.Keyword)switch(pe.value){case"break":return Z.markEnd(yee(),s);case"continue":return Z.markEnd(mee(),s);case"debugger":return Z.markEnd(See(),s);case"do":return Z.markEnd(dee(),s);case"for":return Z.markEnd(hee(),s);case"function":return Z.markEnd(qI(),s);case"if":return Z.markEnd(lee(),s);case"return":return Z.markEnd(gee(),s);case"switch":return Z.markEnd(wee(),s);case"throw":return Z.markEnd(Eee(),s);case"try":return Z.markEnd(Dee(),s);case"var":return Z.markEnd(oee(),s);case"while":return Z.markEnd(fee(),s);case"with":return Z.markEnd(vee(),s);default:break}return e=tn(),e.type===Ae.Syntax.Identifier&&Fe(":")?(it(),n="$"+e.name,Object.prototype.hasOwnProperty.call(Ce.labelSet,n)&&st({},me.Redeclaration,"Label",e.name),Ce.labelSet[n]=!0,r=ho(),delete Ce.labelSet[n],Z.markEnd(Z.createLabeledStatement(e,r),s)):(po(),Z.markEnd(Z.createExpressionStatement(e),s))}function d2(){var t,e=[],r,n,s,i,o,a,u,c;for(c=pe,$e("{");H<$t&&!(pe.type!==he.StringLiteral||(r=pe,t=ih(),e.push(t),t.expression.type!==Ae.Syntax.Literal));)n=de.slice(r.start+1,r.end-1),n==="use strict"?(Ft=!0,s&&Rt(s,me.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=Ce.labelSet,o=Ce.inIteration,a=Ce.inSwitch,u=Ce.inFunctionBody,Ce.labelSet={},Ce.inIteration=!1,Ce.inSwitch=!1,Ce.inFunctionBody=!0;H<$t&&!(Fe("}")||(t=ih(),typeof t>"u"));)e.push(t);return $e("}"),Ce.labelSet=i,Ce.inIteration=o,Ce.inSwitch=a,Ce.inFunctionBody=u,Z.markEnd(Z.createBlockStatement(e),c)}function jI(t){var e,r=[],n,s,i,o,a;if($e("("),!Fe(")"))for(i={};H<$t&&(n=pe,e=yu(),o="$"+n.value,Ft?(Vi(n.value)&&(s=n,a=me.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=me.StrictParamDupe)):t||(Vi(n.value)?(t=n,a=me.StrictParamName):oh(n.value)?(t=n,a=me.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=n,a=me.StrictParamDupe)),r.push(e),i[o]=!0,!Fe(")"));)$e(",");return $e(")"),{params:r,stricted:s,firstRestricted:t,message:a}}function qI(){var t,e=[],r,n,s,i,o,a,u,c;return c=pe,Fr("function"),n=pe,t=yu(),Ft?Vi(n.value)&&Rt(n,me.StrictFunctionName):Vi(n.value)?(o=n,a=me.StrictFunctionName):oh(n.value)&&(o=n,a=me.StrictReservedWord),i=jI(o),e=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),u=Ft,r=d2(),Ft&&o&&st(o,a),Ft&&s&&Rt(s,a),Ft=u,Z.markEnd(Z.createFunctionDeclaration(t,e,[],r),c)}function Aee(){var t,e=null,r,n,s,i,o=[],a,u,c;return c=pe,Fr("function"),Fe("(")||(t=pe,e=yu(),Ft?Vi(t.value)&&Rt(t,me.StrictFunctionName):Vi(t.value)?(n=t,s=me.StrictFunctionName):oh(t.value)&&(n=t,s=me.StrictReservedWord)),i=jI(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),u=Ft,a=d2(),Ft&&n&&st(n,s),Ft&&r&&Rt(r,s),Ft=u,Z.markEnd(Z.createFunctionExpression(e,o,[],a),c)}function ih(){if(pe.type===he.Keyword)switch(pe.value){case"const":case"let":return aee(pe.value);case"function":return qI();default:return ho()}if(pe.type!==he.EOF)return ho()}function xee(){for(var t,e=[],r,n,s;H<$t&&(r=pe,!(r.type!==he.StringLiteral||(t=ih(),e.push(t),t.expression.type!==Ae.Syntax.Literal)));)n=de.slice(r.start+1,r.end-1),n==="use strict"?(Ft=!0,s&&Rt(s,me.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;H<$t&&(t=ih(),!(typeof t>"u"));)e.push(t);return e}function Cee(){var t,e;return mu(),c2(),e=pe,Ft=!1,t=xee(),Z.markEnd(Z.createProgram(t),e)}function LI(){var t,e,r,n=[];for(t=0;t<Q.tokens.length;++t)e=Q.tokens[t],r={type:e.type,value:e.value},Q.range&&(r.range=e.range),Q.loc&&(r.loc=e.loc),n.push(r);Q.tokens=n}function Pee(t,e){var r,n,s;r=String,typeof t!="string"&&!(t instanceof String)&&(t=r(t)),Z=a2,de=t,H=0,Je=de.length>0?1:0,ct=0,$t=de.length,pe=null,Ce={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Q={},e=e||{},e.tokens=!0,Q.tokens=[],Q.tokenize=!0,Q.openParenToken=-1,Q.openCurlyToken=-1,Q.range=typeof e.range=="boolean"&&e.range,Q.loc=typeof e.loc=="boolean"&&e.loc,typeof e.comment=="boolean"&&e.comment&&(Q.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(Q.errors=[]);try{if(c2(),pe.type===he.EOF)return Q.tokens;for(n=it();pe.type!==he.EOF;)try{n=it()}catch(i){if(n=pe,Q.errors){Q.errors.push(i);break}else throw i}LI(),s=Q.tokens,typeof Q.comments<"u"&&(s.comments=Q.comments),typeof Q.errors<"u"&&(s.errors=Q.errors)}catch(i){throw i}finally{Q={}}return s}Ae.tokenize=Pee;function Oee(t,e){var r,n;n=String,typeof t!="string"&&!(t instanceof String)&&(t=n(t)),Z=a2,de=t,H=0,Je=de.length>0?1:0,ct=0,$t=de.length,pe=null,Ce={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Q={},typeof e<"u"&&(Q.range=typeof e.range=="boolean"&&e.range,Q.loc=typeof e.loc=="boolean"&&e.loc,Q.attachComment=typeof e.attachComment=="boolean"&&e.attachComment,Q.loc&&e.source!==null&&e.source!==void 0&&(Q.source=n(e.source)),typeof e.tokens=="boolean"&&e.tokens&&(Q.tokens=[]),typeof e.comment=="boolean"&&e.comment&&(Q.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(Q.errors=[]),Q.attachComment&&(Q.range=!0,Q.comments=[],Q.bottomRightStack=[],Q.trailingComments=[],Q.leadingComments=[]));try{r=Cee(),typeof Q.comments<"u"&&(r.comments=Q.comments),typeof Q.tokens<"u"&&(LI(),r.tokens=Q.tokens),typeof Q.errors<"u"&&(r.errors=Q.errors)}catch(s){throw s}finally{Q={}}return r}Ae.parse=Oee;Ae.version="1.2.2"});var KI=D(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});tg.slice=void 0;function kee(t,e,r,n){function s(u){return String(u).match(/^[0-9]+$/)?parseInt(u):Number.isFinite(u)?parseInt(u,10):0}if(typeof e=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=t.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,e=e<0?i+e:e,r=r<0?i+r:r,e=s(e===0?0:e||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),e=n>0?Math.max(0,e):Math.min(i,e),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=e)return[];if(n<0&&e<=r)return[];for(var o=[],a=e;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(t[a]);return o}tg.slice=kee});var VI=D((j2e,Bee)=>{Bee.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.3.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"}}});var WI=D(HI=>{(function t(e){"use strict";var r,n,s,i,o,a;function u(v){var k={},B,T;for(B in v)v.hasOwnProperty(B)&&(T=v[B],typeof T=="object"&&T!==null?k[B]=u(T):k[B]=T);return k}function c(v,k){var B,T,M,y;for(T=v.length,M=0;T;)B=T>>>1,y=M+B,k(v[y])?T=B:(M=y+1,T-=B+1);return M}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={},o={},a={},n={Break:i,Skip:o,Remove:a};function l(v,k){this.parent=v,this.key=k}l.prototype.replace=function(k){this.parent[this.key]=k},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function d(v,k,B,T){this.node=v,this.path=k,this.wrap=B,this.ref=T}function h(){}h.prototype.path=function(){var k,B,T,M,y,b;function E(I,S){if(Array.isArray(S))for(T=0,M=S.length;T<M;++T)I.push(S[T]);else I.push(S)}if(!this.__current.path)return null;for(y=[],k=2,B=this.__leavelist.length;k<B;++k)b=this.__leavelist[k],E(y,b.path);return E(y,this.__current.path),y},h.prototype.type=function(){var v=this.current();return v.type||this.__current.wrap},h.prototype.parents=function(){var k,B,T;for(T=[],k=1,B=this.__leavelist.length;k<B;++k)T.push(this.__leavelist[k].node);return T},h.prototype.current=function(){return this.__current.node},h.prototype.__execute=function(k,B){var T,M;return M=void 0,T=this.__current,this.__current=B,this.__state=null,k&&(M=k.call(this,B.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=T,M},h.prototype.notify=function(k){this.__state=k},h.prototype.skip=function(){this.notify(o)},h.prototype.break=function(){this.notify(i)},h.prototype.remove=function(){this.notify(a)},h.prototype.__initialize=function(v,k){this.visitor=k,this.root=v,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,k.fallback==="iteration"?this.__fallback=Object.keys:typeof k.fallback=="function"&&(this.__fallback=k.fallback),this.__keys=s,k.keys&&(this.__keys=Object.assign(Object.create(this.__keys),k.keys))};function f(v){return v==null?!1:typeof v=="object"&&typeof v.type=="string"}function p(v,k){return(v===r.ObjectExpression||v===r.ObjectPattern)&&k==="properties"}h.prototype.traverse=function(k,B){var T,M,y,b,E,I,S,N,R,O,F,U;for(this.__initialize(k,B),U={},T=this.__worklist,M=this.__leavelist,T.push(new d(k,null,null,null)),M.push(new d(null,null,null,null));T.length;){if(y=T.pop(),y===U){if(y=M.pop(),I=this.__execute(B.leave,y),this.__state===i||I===i)return;continue}if(y.node){if(I=this.__execute(B.enter,y),this.__state===i||I===i)return;if(T.push(U),M.push(y),this.__state===o||I===o)continue;if(b=y.node,E=b.type||y.wrap,O=this.__keys[E],!O)if(this.__fallback)O=this.__fallback(b);else throw new Error("Unknown node type "+E+".");for(N=O.length;(N-=1)>=0;)if(S=O[N],F=b[S],!!F)if(Array.isArray(F)){for(R=F.length;(R-=1)>=0;)if(F[R]){if(p(E,O[N]))y=new d(F[R],[S,R],"Property",null);else if(f(F[R]))y=new d(F[R],[S,R],null,null);else continue;T.push(y)}}else f(F)&&T.push(new d(F,S,null,null))}}},h.prototype.replace=function(k,B){var T,M,y,b,E,I,S,N,R,O,F,U,q;function $(V){var z,ee,ce,re;if(V.ref.remove()){for(ee=V.ref.key,re=V.ref.parent,z=T.length;z--;)if(ce=T[z],ce.ref&&ce.ref.parent===re){if(ce.ref.key<ee)break;--ce.ref.key}}}for(this.__initialize(k,B),F={},T=this.__worklist,M=this.__leavelist,U={root:k},I=new d(k,null,null,new l(U,"root")),T.push(I),M.push(I);T.length;){if(I=T.pop(),I===F){if(I=M.pop(),E=this.__execute(B.leave,I),E!==void 0&&E!==i&&E!==o&&E!==a&&I.ref.replace(E),(this.__state===a||E===a)&&$(I),this.__state===i||E===i)return U.root;continue}if(E=this.__execute(B.enter,I),E!==void 0&&E!==i&&E!==o&&E!==a&&(I.ref.replace(E),I.node=E),(this.__state===a||E===a)&&($(I),I.node=null),this.__state===i||E===i)return U.root;if(y=I.node,!!y&&(T.push(F),M.push(I),!(this.__state===o||E===o))){if(b=y.type||I.wrap,R=this.__keys[b],!R)if(this.__fallback)R=this.__fallback(y);else throw new Error("Unknown node type "+b+".");for(S=R.length;(S-=1)>=0;)if(q=R[S],O=y[q],!!O)if(Array.isArray(O)){for(N=O.length;(N-=1)>=0;)if(O[N]){if(p(b,R[S]))I=new d(O[N],[q,N],"Property",new l(O,N));else if(f(O[N]))I=new d(O[N],[q,N],null,new l(O,N));else continue;T.push(I)}}else f(O)&&T.push(new d(O,q,null,new l(y,q)))}}return U.root};function g(v,k){var B=new h;return B.traverse(v,k)}function w(v,k){var B=new h;return B.replace(v,k)}function P(v,k){var B;return B=c(k,function(M){return M.range[0]>v.range[0]}),v.extendedRange=[v.range[0],v.range[1]],B!==k.length&&(v.extendedRange[1]=k[B].range[0]),B-=1,B>=0&&(v.extendedRange[0]=k[B].range[1]),v}function C(v,k,B){var T=[],M,y,b,E;if(!v.range)throw new Error("attachComments needs range information");if(!B.length){if(k.length){for(b=0,y=k.length;b<y;b+=1)M=u(k[b]),M.extendedRange=[0,v.range[0]],T.push(M);v.leadingComments=T}return v}for(b=0,y=k.length;b<y;b+=1)T.push(P(u(k[b]),B));return E=0,g(v,{enter:function(I){for(var S;E<T.length&&(S=T[E],!(S.extendedRange[1]>I.range[0]));)S.extendedRange[1]===I.range[0]?(I.leadingComments||(I.leadingComments=[]),I.leadingComments.push(S),T.splice(E,1)):E+=1;if(E===T.length)return n.Break;if(T[E].extendedRange[0]>I.range[1])return n.Skip}}),E=0,g(v,{leave:function(I){for(var S;E<T.length&&(S=T[E],!(I.range[1]<S.extendedRange[0]));)I.range[1]===S.extendedRange[0]?(I.trailingComments||(I.trailingComments=[]),I.trailingComments.push(S),T.splice(E,1)):E+=1;if(E===T.length)return n.Break;if(T[E].extendedRange[0]>I.range[1])return n.Skip}}),v}return e.version=VI().version,e.Syntax=r,e.traverse=g,e.replace=w,e.attachComments=C,e.VisitorKeys=s,e.VisitorOption=n,e.Controller=h,e.cloneEnvironment=function(){return t({})},e})(HI)});var JI=D((L2e,zI)=>{(function(){"use strict";function t(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}zI.exports={isExpression:t,isStatement:r,isIterationStatement:e,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})()});var f2=D((U2e,GI)=>{(function(){"use strict";var t,e,r,n,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(w){return 48<=w&&w<=57}function a(w){return 48<=w&&w<=57||97<=w&&w<=102||65<=w&&w<=70}function u(w){return w>=48&&w<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(w){return w===32||w===9||w===11||w===12||w===160||w>=5760&&r.indexOf(w)>=0}function l(w){return w===10||w===13||w===8232||w===8233}function d(w){if(w<=65535)return String.fromCharCode(w);var P=String.fromCharCode(Math.floor((w-65536)/1024)+55296),C=String.fromCharCode((w-65536)%1024+56320);return P+C}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function h(w){return w<128?n[w]:e.NonAsciiIdentifierStart.test(d(w))}function f(w){return w<128?s[w]:e.NonAsciiIdentifierPart.test(d(w))}function p(w){return w<128?n[w]:t.NonAsciiIdentifierStart.test(d(w))}function g(w){return w<128?s[w]:t.NonAsciiIdentifierPart.test(d(w))}GI.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:l,isIdentifierStartES5:h,isIdentifierPartES5:f,isIdentifierStartES6:p,isIdentifierPartES6:g}})()});var YI=D((K2e,XI)=>{(function(){"use strict";var t=f2();function e(h){switch(h){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(h,f){return!f&&h==="yield"?!1:n(h,f)}function n(h,f){if(f&&e(h))return!0;switch(h.length){case 2:return h==="if"||h==="in"||h==="do";case 3:return h==="var"||h==="for"||h==="new"||h==="try";case 4:return h==="this"||h==="else"||h==="case"||h==="void"||h==="with"||h==="enum";case 5:return h==="while"||h==="break"||h==="catch"||h==="throw"||h==="const"||h==="yield"||h==="class"||h==="super";case 6:return h==="return"||h==="typeof"||h==="delete"||h==="switch"||h==="export"||h==="import";case 7:return h==="default"||h==="finally"||h==="extends";case 8:return h==="function"||h==="continue"||h==="debugger";case 10:return h==="instanceof";default:return!1}}function s(h,f){return h==="null"||h==="true"||h==="false"||r(h,f)}function i(h,f){return h==="null"||h==="true"||h==="false"||n(h,f)}function o(h){return h==="eval"||h==="arguments"}function a(h){var f,p,g;if(h.length===0||(g=h.charCodeAt(0),!t.isIdentifierStartES5(g)))return!1;for(f=1,p=h.length;f<p;++f)if(g=h.charCodeAt(f),!t.isIdentifierPartES5(g))return!1;return!0}function u(h,f){return(h-55296)*1024+(f-56320)+65536}function c(h){var f,p,g,w,P;if(h.length===0)return!1;for(P=t.isIdentifierStartES6,f=0,p=h.length;f<p;++f){if(g=h.charCodeAt(f),55296<=g&&g<=56319){if(++f,f>=p||(w=h.charCodeAt(f),!(56320<=w&&w<=57343)))return!1;g=u(g,w)}if(!P(g))return!1;P=t.isIdentifierPartES6}return!0}function l(h,f){return a(h)&&!s(h,f)}function d(h,f){return c(h)&&!i(h,f)}XI.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:c,isIdentifierES5:l,isIdentifierES6:d}})()});var ZI=D(rg=>{(function(){"use strict";rg.ast=JI(),rg.code=f2(),rg.keyword=YI()})()});var eT=D(p2=>{var QI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");p2.encode=function(t){if(0<=t&&t<QI.length)return QI[t];throw new TypeError("Must be between 0 and 63: "+t)};p2.decode=function(t){var e=65,r=90,n=97,s=122,i=48,o=57,a=43,u=47,c=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=s?t-n+c:i<=t&&t<=o?t-i+l:t==a?62:t==u?63:-1}});var y2=D(m2=>{var tT=eT(),h2=5,rT=1<<h2,nT=rT-1,iT=rT;function Iee(t){return t<0?(-t<<1)+1:(t<<1)+0}function Tee(t){var e=(t&1)===1,r=t>>1;return e?-r:r}m2.encode=function(e){var r="",n,s=Iee(e);do n=s&nT,s>>>=h2,s>0&&(n|=iT),r+=tT.encode(n);while(s>0);return r};m2.decode=function(e,r,n){var s=e.length,i=0,o=0,a,u;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(u=tT.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&iT),u&=nT,i=i+(u<<o),o+=h2}while(a);n.value=Tee(i),n.rest=r}});var jd=D(Dn=>{function Fee(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}Dn.getArg=Fee;var sT=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Ree=/^data:.+\,.+$/;function uh(t){var e=t.match(sT);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Dn.urlParse=uh;function Nd(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}Dn.urlGenerate=Nd;function g2(t){var e=t,r=uh(t);if(r){if(!r.path)return t;e=r.path}for(var n=Dn.isAbsolute(e),s=e.split(/\/+/),i,o=0,a=s.length-1;a>=0;a--)i=s[a],i==="."?s.splice(a,1):i===".."?o++:o>0&&(i===""?(s.splice(a+1,o),o=0):(s.splice(a,2),o--));return e=s.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,Nd(r)):e}Dn.normalize=g2;function oT(t,e){t===""&&(t="."),e===""&&(e=".");var r=uh(e),n=uh(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Nd(r);if(r||e.match(Ree))return e;if(n&&!n.host&&!n.path)return n.host=e,Nd(n);var s=e.charAt(0)==="/"?e:g2(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=s,Nd(n)):s}Dn.join=oT;Dn.isAbsolute=function(t){return t.charAt(0)==="/"||sT.test(t)};function $ee(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}Dn.relative=$ee;var aT=function(){var t=Object.create(null);return!("__proto__"in t)}();function uT(t){return t}function Nee(t){return cT(t)?"$"+t:t}Dn.toSetString=aT?uT:Nee;function Mee(t){return cT(t)?t.slice(1):t}Dn.fromSetString=aT?uT:Mee;function cT(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function jee(t,e,r){var n=Md(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Md(t.name,e.name)}Dn.compareByOriginalPositions=jee;function qee(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Md(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Md(t.name,e.name)}Dn.compareByGeneratedPositionsDeflated=qee;function Md(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Lee(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Md(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Md(t.name,e.name)}Dn.compareByGeneratedPositionsInflated=Lee;function Uee(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}Dn.parseSourceMapInput=Uee;function Kee(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=uh(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var s=n.path.lastIndexOf("/");s>=0&&(n.path=n.path.substring(0,s+1))}e=oT(Nd(n),e)}return g2(e)}Dn.computeSourceURL=Kee});var w2=D(lT=>{var v2=jd(),b2=Object.prototype.hasOwnProperty,qc=typeof Map<"u";function ya(){this._array=[],this._set=qc?new Map:Object.create(null)}ya.fromArray=function(e,r){for(var n=new ya,s=0,i=e.length;s<i;s++)n.add(e[s],r);return n};ya.prototype.size=function(){return qc?this._set.size:Object.getOwnPropertyNames(this._set).length};ya.prototype.add=function(e,r){var n=qc?e:v2.toSetString(e),s=qc?this.has(e):b2.call(this._set,n),i=this._array.length;(!s||r)&&this._array.push(e),s||(qc?this._set.set(e,i):this._set[n]=i)};ya.prototype.has=function(e){if(qc)return this._set.has(e);var r=v2.toSetString(e);return b2.call(this._set,r)};ya.prototype.indexOf=function(e){if(qc){var r=this._set.get(e);if(r>=0)return r}else{var n=v2.toSetString(e);if(b2.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};ya.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};ya.prototype.toArray=function(){return this._array.slice()};lT.ArraySet=ya});var pT=D(fT=>{var dT=jd();function Vee(t,e){var r=t.generatedLine,n=e.generatedLine,s=t.generatedColumn,i=e.generatedColumn;return n>r||n==r&&i>=s||dT.compareByGeneratedPositionsInflated(t,e)<=0}function ng(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}ng.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};ng.prototype.add=function(e){Vee(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};ng.prototype.toArray=function(){return this._sorted||(this._array.sort(dT.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};fT.MappingList=ng});var E2=D(hT=>{var ch=y2(),Rr=jd(),ig=w2().ArraySet,Hee=pT().MappingList;function Hi(t){t||(t={}),this._file=Rr.getArg(t,"file",null),this._sourceRoot=Rr.getArg(t,"sourceRoot",null),this._skipValidation=Rr.getArg(t,"skipValidation",!1),this._sources=new ig,this._names=new ig,this._mappings=new Hee,this._sourcesContents=null}Hi.prototype._version=3;Hi.fromSourceMap=function(e){var r=e.sourceRoot,n=new Hi({file:e.file,sourceRoot:r});return e.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,r!=null&&(i.source=Rr.relative(r,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),e.sources.forEach(function(s){var i=s;r!==null&&(i=Rr.relative(r,s)),n._sources.has(i)||n._sources.add(i);var o=e.sourceContentFor(s);o!=null&&n.setSourceContent(s,o)}),n};Hi.prototype.addMapping=function(e){var r=Rr.getArg(e,"generated"),n=Rr.getArg(e,"original",null),s=Rr.getArg(e,"source",null),i=Rr.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,s,i),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:s,name:i})};Hi.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Rr.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Rr.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Rr.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Hi.prototype.applySourceMap=function(e,r,n){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var i=this._sourceRoot;i!=null&&(s=Rr.relative(i,s));var o=new ig,a=new ig;this._mappings.unsortedForEach(function(u){if(u.source===s&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,n!=null&&(u.source=Rr.join(n,u.source)),i!=null&&(u.source=Rr.relative(i,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!o.has(l)&&o.add(l);var d=u.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=o,this._names=a,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=Rr.join(n,u)),i!=null&&(u=Rr.relative(i,u)),this.setSourceContent(u,c))},this)};Hi.prototype._validateMapping=function(e,r,n,s){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:s}))}};Hi.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,s=0,i=0,o=0,a="",u,c,l,d,h=this._mappings.toArray(),f=0,p=h.length;f<p;f++){if(c=h[f],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(f>0){if(!Rr.compareByGeneratedPositionsInflated(c,h[f-1]))continue;u+=","}u+=ch.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(d=this._sources.indexOf(c.source),u+=ch.encode(d-o),o=d,u+=ch.encode(c.originalLine-1-s),s=c.originalLine-1,u+=ch.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=ch.encode(l-i),i=l)),a+=u}return a};Hi.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Rr.relative(r,n));var s=Rr.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};Hi.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Hi.prototype.toString=function(){return JSON.stringify(this.toJSON())};hT.SourceMapGenerator=Hi});var mT=D(Lc=>{Lc.GREATEST_LOWER_BOUND=1;Lc.LEAST_UPPER_BOUND=2;function _2(t,e,r,n,s,i){var o=Math.floor((e-t)/2)+t,a=s(r,n[o],!0);return a===0?o:a>0?e-o>1?_2(o,e,r,n,s,i):i==Lc.LEAST_UPPER_BOUND?e<n.length?e:-1:o:o-t>1?_2(t,o,r,n,s,i):i==Lc.LEAST_UPPER_BOUND?o:t<0?-1:t}Lc.search=function(e,r,n,s){if(r.length===0)return-1;var i=_2(-1,r.length,e,r,n,s||Lc.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var gT=D(yT=>{function D2(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Wee(t,e){return Math.round(t+Math.random()*(e-t))}function S2(t,e,r,n){if(r<n){var s=Wee(r,n),i=r-1;D2(t,s,n);for(var o=t[n],a=r;a<n;a++)e(t[a],o)<=0&&(i+=1,D2(t,i,a));D2(t,i+1,a);var u=i+1;S2(t,e,r,u-1),S2(t,e,u+1,n)}}yT.quickSort=function(t,e){S2(t,e,0,t.length-1)}});var bT=D(sg=>{var Se=jd(),A2=mT(),qd=w2().ArraySet,zee=y2(),lh=gT().quickSort;function Gt(t,e){var r=t;return typeof t=="string"&&(r=Se.parseSourceMapInput(t)),r.sections!=null?new ws(r,e):new mn(r,e)}Gt.fromSourceMap=function(t,e){return mn.fromSourceMap(t,e)};Gt.prototype._version=3;Gt.prototype.__generatedMappings=null;Object.defineProperty(Gt.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Gt.prototype.__originalMappings=null;Object.defineProperty(Gt.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Gt.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Gt.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Gt.GENERATED_ORDER=1;Gt.ORIGINAL_ORDER=2;Gt.GREATEST_LOWER_BOUND=1;Gt.LEAST_UPPER_BOUND=2;Gt.prototype.eachMapping=function(e,r,n){var s=r||null,i=n||Gt.GENERATED_ORDER,o;switch(i){case Gt.GENERATED_ORDER:o=this._generatedMappings;break;case Gt.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=Se.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,s)};Gt.prototype.allGeneratedPositionsFor=function(e){var r=Se.getArg(e,"line"),n={source:Se.getArg(e,"source"),originalLine:r,originalColumn:Se.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var s=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Se.compareByOriginalPositions,A2.LEAST_UPPER_BOUND);if(i>=0){var o=this._originalMappings[i];if(e.column===void 0)for(var a=o.originalLine;o&&o.originalLine===a;)s.push({line:Se.getArg(o,"generatedLine",null),column:Se.getArg(o,"generatedColumn",null),lastColumn:Se.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i];else for(var u=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==u;)s.push({line:Se.getArg(o,"generatedLine",null),column:Se.getArg(o,"generatedColumn",null),lastColumn:Se.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i]}return s};sg.SourceMapConsumer=Gt;function mn(t,e){var r=t;typeof t=="string"&&(r=Se.parseSourceMapInput(t));var n=Se.getArg(r,"version"),s=Se.getArg(r,"sources"),i=Se.getArg(r,"names",[]),o=Se.getArg(r,"sourceRoot",null),a=Se.getArg(r,"sourcesContent",null),u=Se.getArg(r,"mappings"),c=Se.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o&&(o=Se.normalize(o)),s=s.map(String).map(Se.normalize).map(function(l){return o&&Se.isAbsolute(o)&&Se.isAbsolute(l)?Se.relative(o,l):l}),this._names=qd.fromArray(i.map(String),!0),this._sources=qd.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(l){return Se.computeSourceURL(o,l,e)}),this.sourceRoot=o,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=c}mn.prototype=Object.create(Gt.prototype);mn.prototype.consumer=Gt;mn.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Se.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};mn.fromSourceMap=function(e,r){var n=Object.create(mn.prototype),s=n._names=qd.fromArray(e._names.toArray(),!0),i=n._sources=qd.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return Se.computeSourceURL(n.sourceRoot,f,r)});for(var o=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],c=0,l=o.length;c<l;c++){var d=o[c],h=new vT;h.generatedLine=d.generatedLine,h.generatedColumn=d.generatedColumn,d.source&&(h.source=i.indexOf(d.source),h.originalLine=d.originalLine,h.originalColumn=d.originalColumn,d.name&&(h.name=s.indexOf(d.name)),u.push(h)),a.push(h)}return lh(n.__originalMappings,Se.compareByOriginalPositions),n};mn.prototype._version=3;Object.defineProperty(mn.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function vT(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}mn.prototype._parseMappings=function(e,r){for(var n=1,s=0,i=0,o=0,a=0,u=0,c=e.length,l=0,d={},h={},f=[],p=[],g,w,P,C,v;l<c;)if(e.charAt(l)===";")n++,l++,s=0;else if(e.charAt(l)===",")l++;else{for(g=new vT,g.generatedLine=n,C=l;C<c&&!this._charIsMappingSeparator(e,C);C++);if(w=e.slice(l,C),P=d[w],P)l+=w.length;else{for(P=[];l<C;)zee.decode(e,l,h),v=h.value,l=h.rest,P.push(v);if(P.length===2)throw new Error("Found a source, but no line and column");if(P.length===3)throw new Error("Found a source and line, but no column");d[w]=P}g.generatedColumn=s+P[0],s=g.generatedColumn,P.length>1&&(g.source=a+P[1],a+=P[1],g.originalLine=i+P[2],i=g.originalLine,g.originalLine+=1,g.originalColumn=o+P[3],o=g.originalColumn,P.length>4&&(g.name=u+P[4],u+=P[4])),p.push(g),typeof g.originalLine=="number"&&f.push(g)}lh(p,Se.compareByGeneratedPositionsDeflated),this.__generatedMappings=p,lh(f,Se.compareByOriginalPositions),this.__originalMappings=f};mn.prototype._findMapping=function(e,r,n,s,i,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return A2.search(e,r,i,o)};mn.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};mn.prototype.originalPositionFor=function(e){var r={generatedLine:Se.getArg(e,"line"),generatedColumn:Se.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Se.compareByGeneratedPositionsDeflated,Se.getArg(e,"bias",Gt.GREATEST_LOWER_BOUND));if(n>=0){var s=this._generatedMappings[n];if(s.generatedLine===r.generatedLine){var i=Se.getArg(s,"source",null);i!==null&&(i=this._sources.at(i),i=Se.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var o=Se.getArg(s,"name",null);return o!==null&&(o=this._names.at(o)),{source:i,line:Se.getArg(s,"originalLine",null),column:Se.getArg(s,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};mn.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};mn.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var s=e;this.sourceRoot!=null&&(s=Se.relative(this.sourceRoot,s));var i;if(this.sourceRoot!=null&&(i=Se.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!i.path||i.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(r)return null;throw new Error('"'+s+'" is not in the SourceMap.')};mn.prototype.generatedPositionFor=function(e){var r=Se.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Se.getArg(e,"line"),originalColumn:Se.getArg(e,"column")},s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Se.compareByOriginalPositions,Se.getArg(e,"bias",Gt.GREATEST_LOWER_BOUND));if(s>=0){var i=this._originalMappings[s];if(i.source===n.source)return{line:Se.getArg(i,"generatedLine",null),column:Se.getArg(i,"generatedColumn",null),lastColumn:Se.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};sg.BasicSourceMapConsumer=mn;function ws(t,e){var r=t;typeof t=="string"&&(r=Se.parseSourceMapInput(t));var n=Se.getArg(r,"version"),s=Se.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new qd,this._names=new qd;var i={line:-1,column:0};this._sections=s.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var a=Se.getArg(o,"offset"),u=Se.getArg(a,"line"),c=Se.getArg(a,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Gt(Se.getArg(o,"map"),e)}})}ws.prototype=Object.create(Gt.prototype);ws.prototype.constructor=Gt;ws.prototype._version=3;Object.defineProperty(ws.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});ws.prototype.originalPositionFor=function(e){var r={generatedLine:Se.getArg(e,"line"),generatedColumn:Se.getArg(e,"column")},n=A2.search(r,this._sections,function(i,o){var a=i.generatedLine-o.generatedOffset.generatedLine;return a||i.generatedColumn-o.generatedOffset.generatedColumn}),s=this._sections[n];return s?s.consumer.originalPositionFor({line:r.generatedLine-(s.generatedOffset.generatedLine-1),column:r.generatedColumn-(s.generatedOffset.generatedLine===r.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};ws.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};ws.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var s=this._sections[n],i=s.consumer.sourceContentFor(e,!0);if(i)return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};ws.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Se.getArg(e,"source"))!==-1){var s=n.consumer.generatedPositionFor(e);if(s){var i={line:s.line+(n.generatedOffset.generatedLine-1),column:s.column+(n.generatedOffset.generatedLine===s.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};ws.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var s=this._sections[n],i=s.consumer._generatedMappings,o=0;o<i.length;o++){var a=i[o],u=s.consumer._sources.at(a.source);u=Se.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;a.name&&(c=s.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}lh(this.__generatedMappings,Se.compareByGeneratedPositionsDeflated),lh(this.__originalMappings,Se.compareByOriginalPositions)};sg.IndexedSourceMapConsumer=ws});var ET=D(wT=>{var Jee=E2().SourceMapGenerator,og=jd(),Gee=/(\r?\n)/,Xee=10,Ld="$$$isSourceNode$$$";function gi(t,e,r,n,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=s??null,this[Ld]=!0,n!=null&&this.add(n)}gi.fromStringWithSourceMap=function(e,r,n){var s=new gi,i=e.split(Gee),o=0,a=function(){var h=p(),f=p()||"";return h+f;function p(){return o<i.length?i[o++]:void 0}},u=1,c=0,l=null;return r.eachMapping(function(h){if(l!==null)if(u<h.generatedLine)d(l,a()),u++,c=0;else{var f=i[o]||"",p=f.substr(0,h.generatedColumn-c);i[o]=f.substr(h.generatedColumn-c),c=h.generatedColumn,d(l,p),l=h;return}for(;u<h.generatedLine;)s.add(a()),u++;if(c<h.generatedColumn){var f=i[o]||"";s.add(f.substr(0,h.generatedColumn)),i[o]=f.substr(h.generatedColumn),c=h.generatedColumn}l=h},this),o<i.length&&(l&&d(l,a()),s.add(i.splice(o).join(""))),r.sources.forEach(function(h){var f=r.sourceContentFor(h);f!=null&&(n!=null&&(h=og.join(n,h)),s.setSourceContent(h,f))}),s;function d(h,f){if(h===null||h.source===void 0)s.add(f);else{var p=n?og.join(n,h.source):h.source;s.add(new gi(h.originalLine,h.originalColumn,p,f,h.name))}}};gi.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Ld]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};gi.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Ld]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};gi.prototype.walk=function(e){for(var r,n=0,s=this.children.length;n<s;n++)r=this.children[n],r[Ld]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};gi.prototype.join=function(e){var r,n,s=this.children.length;if(s>0){for(r=[],n=0;n<s-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};gi.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Ld]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};gi.prototype.setSourceContent=function(e,r){this.sourceContents[og.toSetString(e)]=r};gi.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Ld]&&this.children[r].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),r=0,n=s.length;r<n;r++)e(og.fromSetString(s[r]),this.sourceContents[s[r]])};gi.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};gi.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new Jee(e),s=!1,i=null,o=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((i!==l.source||o!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),i=l.source,o=l.line,a=l.column,u=l.name,s=!0):s&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,s=!1);for(var d=0,h=c.length;d<h;d++)c.charCodeAt(d)===Xee?(r.line++,r.column=0,d+1===h?(i=null,s=!1):s&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}};wT.SourceNode=gi});var _T=D(ag=>{ag.SourceMapGenerator=E2().SourceMapGenerator;ag.SourceMapConsumer=bT().SourceMapConsumer;ag.SourceNode=ET().SourceNode});var DT=D((rDe,Yee)=>{Yee.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"1.14.3",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}});var ST=D(ga=>{(function(){"use strict";var t,e,r,n,s,i,o,a,u,c,l,d,h,f,p,g,w,P,C,v,k,B,T,M,y,b;s=WI(),i=ZI(),t=s.Syntax;function E(m){return kt.Expression.hasOwnProperty(m.type)}function I(m){return kt.Statement.hasOwnProperty(m.type)}e={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},r={"||":e.LogicalOR,"&&":e.LogicalAND,"|":e.BitwiseOR,"^":e.BitwiseXOR,"&":e.BitwiseAND,"==":e.Equality,"!=":e.Equality,"===":e.Equality,"!==":e.Equality,is:e.Equality,isnt:e.Equality,"<":e.Relational,">":e.Relational,"<=":e.Relational,">=":e.Relational,in:e.Relational,instanceof:e.Relational,"<<":e.BitwiseSHIFT,">>":e.BitwiseSHIFT,">>>":e.BitwiseSHIFT,"+":e.Additive,"-":e.Additive,"*":e.Multiplicative,"%":e.Multiplicative,"/":e.Multiplicative,"**":e.Exponentiation};var S=1,N=1<<1,R=1<<2,O=1<<3,F=1<<4,U=1<<5,q=N|R,$=S|N,V=S|N|R,z=S,ee=R,ce=S|R,re=S,ie=S|U,ue=0,ye=S|F,ke=S|O;function He(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Xe(m,A){var _="";for(A|=0;A>0;A>>>=1,m+=m)A&1&&(_+=m);return _}function qe(m){return/[\r\n]/g.test(m)}function Le(m){var A=m.length;return A&&i.code.isLineTerminator(m.charCodeAt(A-1))}function pt(m,A){var _;for(_ in A)A.hasOwnProperty(_)&&(m[_]=A[_]);return m}function Me(m,A){var _,x;function j(X){return typeof X=="object"&&X instanceof Object&&!(X instanceof RegExp)}for(_ in A)A.hasOwnProperty(_)&&(x=A[_],j(x)?j(m[_])?Me(m[_],x):m[_]=Me({},x):m[_]=x);return m}function at(m){var A,_,x,j,X;if(m!==m)throw new Error("Numeric literal whose value is NaN");if(m<0||m===0&&1/m<0)throw new Error("Numeric literal whose value is negative");if(m===1/0)return u?"null":c?"1e400":"1e+400";if(A=""+m,!c||A.length<3)return A;for(_=A.indexOf("."),!u&&A.charCodeAt(0)===48&&_===1&&(_=0,A=A.slice(1)),x=A,A=A.replace("e+","e"),j=0,(X=x.indexOf("e"))>0&&(j=+x.slice(X+1),x=x.slice(0,X)),_>=0&&(j-=x.length-_-1,x=+(x.slice(0,_)+x.slice(_+1))+""),X=0;x.charCodeAt(x.length+X-1)===48;)--X;return X!==0&&(j-=X,x=x.slice(0,X)),j!==0&&(x+="e"+j),(x.length<A.length||l&&m>1e12&&Math.floor(m)===m&&(x="0x"+m.toString(16)).length<A.length)&&+x===m&&(A=x),A}function br(m,A){return(m&-2)===8232?(A?"u":"\\u")+(m===8232?"2028":"2029"):m===10||m===13?(A?"":"\\")+(m===10?"n":"r"):String.fromCharCode(m)}function Bs(m){var A,_,x,j,X,te,se,ge;if(_=m.toString(),m.source){if(A=_.match(/\/([^/]*)$/),!A)return _;for(x=A[1],_="",se=!1,ge=!1,j=0,X=m.source.length;j<X;++j)te=m.source.charCodeAt(j),ge?(_+=br(te,ge),ge=!1):(se?te===93&&(se=!1):te===47?_+="\\":te===91&&(se=!0),_+=br(te,ge),ge=te===92);return"/"+_+"/"+x}return _}function ts(m,A){var _;return m===8?"\\b":m===12?"\\f":m===9?"\\t":(_=m.toString(16).toUpperCase(),u||m>255?"\\u"+"0000".slice(_.length)+_:m===0&&!i.code.isDecimalDigit(A)?"\\0":m===11?"\\x0B":"\\x"+"00".slice(_.length)+_)}function Oo(m){if(m===92)return"\\\\";if(m===10)return"\\n";if(m===13)return"\\r";if(m===8232)return"\\u2028";if(m===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function wr(m){var A,_,x,j;for(j=d==="double"?'"':"'",A=0,_=m.length;A<_;++A)if(x=m.charCodeAt(A),x===39){j='"';break}else if(x===34){j="'";break}else x===92&&++A;return j+m+j}function qn(m){var A="",_,x,j,X=0,te=0,se,ge;for(_=0,x=m.length;_<x;++_){if(j=m.charCodeAt(_),j===39)++X;else if(j===34)++te;else if(j===47&&u)A+="\\";else if(i.code.isLineTerminator(j)||j===92){A+=Oo(j);continue}else if(!i.code.isIdentifierPartES5(j)&&(u&&j<32||!u&&!h&&(j<32||j>126))){A+=ts(j,m.charCodeAt(_+1));continue}A+=String.fromCharCode(j)}if(se=!(d==="double"||d==="auto"&&te<X),ge=se?"'":'"',!(se?X:te))return ge+A+ge;for(m=A,A=ge,_=0,x=m.length;_<x;++_)j=m.charCodeAt(_),(j===39&&se||j===34&&!se)&&(A+="\\"),A+=String.fromCharCode(j);return A+ge}function Fa(m){var A,_,x,j="";for(A=0,_=m.length;A<_;++A)x=m[A],j+=Array.isArray(x)?Fa(x):x;return j}function bt(m,A){if(!B)return Array.isArray(m)?Fa(m):m;if(A==null){if(m instanceof n)return m;A={}}return A.loc==null?new n(null,null,B,m,A.name||null):new n(A.loc.start.line,A.loc.start.column,B===!0?A.loc.source||null:B,m,A.name||null)}function ir(){return p||" "}function Te(m,A){var _,x,j,X;return _=bt(m).toString(),_.length===0?[A]:(x=bt(A).toString(),x.length===0?[m]:(j=_.charCodeAt(_.length-1),X=x.charCodeAt(0),(j===43||j===45)&&j===X||i.code.isIdentifierPartES5(j)&&i.code.isIdentifierPartES5(X)||j===47&&X===105?[m,ir(),A]:i.code.isWhiteSpace(j)||i.code.isLineTerminator(j)||i.code.isWhiteSpace(X)||i.code.isLineTerminator(X)?[m,A]:[m,p,A]))}function Er(m){return[o,m]}function St(m){var A;A=o,o+=a,m(o),o=A}function Is(m){var A;for(A=m.length-1;A>=0&&!i.code.isLineTerminator(m.charCodeAt(A));--A);return m.length-1-A}function Lu(m,A){var _,x,j,X,te,se,ge,ht;for(_=m.split(/\r\n|[\r\n]/),se=Number.MAX_VALUE,x=1,j=_.length;x<j;++x){for(X=_[x],te=0;te<X.length&&i.code.isWhiteSpace(X.charCodeAt(te));)++te;se>te&&(se=te)}for(typeof A<"u"?(ge=o,_[1][se]==="*"&&(A+=" "),o=A):(se&1&&--se,ge=o),x=1,j=_.length;x<j;++x)ht=bt(Er(_[x].slice(se))),_[x]=B?ht.join(""):ht;return o=ge,_.join(`
`)}function Ln(m,A){if(m.type==="Line"){if(Le(m.value))return"//"+m.value;var _="//"+m.value;return M||(_+=`
`),_}return v.format.indent.adjustMultilineComment&&/[\n\r]/.test(m.value)?Lu("/*"+m.value+"*/",A):"/*"+m.value+"*/"}function Ts(m,A){var _,x,j,X,te,se,ge,ht,K,L,W,J,G,fe;if(m.leadingComments&&m.leadingComments.length>0){if(X=A,M){for(j=m.leadingComments[0],A=[],ht=j.extendedRange,K=j.range,W=T.substring(ht[0],K[0]),fe=(W.match(/\n/g)||[]).length,fe>0?(A.push(Xe(`
`,fe)),A.push(Er(Ln(j)))):(A.push(W),A.push(Ln(j))),L=K,_=1,x=m.leadingComments.length;_<x;_++)j=m.leadingComments[_],K=j.range,J=T.substring(L[1],K[0]),fe=(J.match(/\n/g)||[]).length,A.push(Xe(`
`,fe)),A.push(Er(Ln(j))),L=K;G=T.substring(K[1],ht[1]),fe=(G.match(/\n/g)||[]).length,A.push(Xe(`
`,fe))}else for(j=m.leadingComments[0],A=[],P&&m.type===t.Program&&m.body.length===0&&A.push(`
`),A.push(Ln(j)),Le(bt(A).toString())||A.push(`
`),_=1,x=m.leadingComments.length;_<x;++_)j=m.leadingComments[_],ge=[Ln(j)],Le(bt(ge).toString())||ge.push(`
`),A.push(Er(ge));A.push(Er(X))}if(m.trailingComments)if(M)j=m.trailingComments[0],ht=j.extendedRange,K=j.range,W=T.substring(ht[0],K[0]),fe=(W.match(/\n/g)||[]).length,fe>0?(A.push(Xe(`
`,fe)),A.push(Er(Ln(j)))):(A.push(W),A.push(Ln(j)));else for(te=!Le(bt(A).toString()),se=Xe(" ",Is(bt([o,A,a]).toString())),_=0,x=m.trailingComments.length;_<x;++_)j=m.trailingComments[_],te?(_===0?A=[A,a]:A=[A,se],A.push(Ln(j,se))):A=[A,Er(Ln(j))],_!==x-1&&!Le(bt(A).toString())&&(A=[A,`
`]);return A}function rs(m,A,_){var x,j=0;for(x=m;x<A;x++)T[x]===`
`&&j++;for(x=1;x<j;x++)_.push(f)}function yr(m,A,_){return A<_?["(",m,")"]:m}function Em(m){var A,_,x;for(x=m.split(/\r\n|\n/),A=1,_=x.length;A<_;A++)x[A]=f+o+x[A];return x}function _m(m,A){var _,x,j;return _=m[v.verbatim],typeof _=="string"?x=yr(Em(_),e.Sequence,A):(x=Em(_.content),j=_.precedence!=null?_.precedence:e.Sequence,x=yr(x,j,A)),bt(x,m)}function kt(){}kt.prototype.maybeBlock=function(m,A){var _,x,j=this;return x=!v.comment||!m.leadingComments,m.type===t.BlockStatement&&x?[p,this.generateStatement(m,A)]:m.type===t.EmptyStatement&&x?";":(St(function(){_=[f,Er(j.generateStatement(m,A))]}),_)},kt.prototype.maybeBlockSuffix=function(m,A){var _=Le(bt(A).toString());return m.type===t.BlockStatement&&(!v.comment||!m.leadingComments)&&!_?[A,p]:_?[A,o]:[A,f,o]};function On(m){return bt(m.name,m)}function Uu(m,A){return m.async?"async"+(A?ir():p):""}function yl(m){var A=m.generator&&!v.moz.starlessGenerator;return A?"*"+p:""}function Dm(m){var A=m.value,_="";return A.async&&(_+=Uu(A,!m.computed)),A.generator&&(_+=yl(A)?"*":""),_}kt.prototype.generatePattern=function(m,A,_){return m.type===t.Identifier?On(m):this.generateExpression(m,A,_)},kt.prototype.generateFunctionParams=function(m){var A,_,x,j;if(j=!1,m.type===t.ArrowFunctionExpression&&!m.rest&&(!m.defaults||m.defaults.length===0)&&m.params.length===1&&m.params[0].type===t.Identifier)x=[Uu(m,!0),On(m.params[0])];else{for(x=m.type===t.ArrowFunctionExpression?[Uu(m,!1)]:[],x.push("("),m.defaults&&(j=!0),A=0,_=m.params.length;A<_;++A)j&&m.defaults[A]?x.push(this.generateAssignment(m.params[A],m.defaults[A],"=",e.Assignment,V)):x.push(this.generatePattern(m.params[A],e.Assignment,V)),A+1<_&&x.push(","+p);m.rest&&(m.params.length&&x.push(","+p),x.push("..."),x.push(On(m.rest))),x.push(")")}return x},kt.prototype.generateFunctionBody=function(m){var A,_;return A=this.generateFunctionParams(m),m.type===t.ArrowFunctionExpression&&(A.push(p),A.push("=>")),m.expression?(A.push(p),_=this.generateExpression(m.body,e.Assignment,V),_.toString().charAt(0)==="{"&&(_=["(",_,")"]),A.push(_)):A.push(this.maybeBlock(m.body,ke)),A},kt.prototype.generateIterationForStatement=function(m,A,_){var x=["for"+(A.await?ir()+"await":"")+p+"("],j=this;return St(function(){A.left.type===t.VariableDeclaration?St(function(){x.push(A.left.kind+ir()),x.push(j.generateStatement(A.left.declarations[0],ue))}):x.push(j.generateExpression(A.left,e.Call,V)),x=Te(x,m),x=[Te(x,j.generateExpression(A.right,e.Assignment,V)),")"]}),x.push(this.maybeBlock(A.body,_)),x},kt.prototype.generatePropertyKey=function(m,A){var _=[];return A&&_.push("["),_.push(this.generateExpression(m,e.Assignment,V)),A&&_.push("]"),_},kt.prototype.generateAssignment=function(m,A,_,x,j){return e.Assignment<x&&(j|=S),yr([this.generateExpression(m,e.Call,j),p+_+p,this.generateExpression(A,e.Assignment,j)],e.Assignment,x)},kt.prototype.semicolon=function(m){return!w&&m&U?"":";"},kt.Statement={BlockStatement:function(m,A){var _,x,j=["{",f],X=this;return St(function(){m.body.length===0&&M&&(_=m.range,_[1]-_[0]>2&&(x=T.substring(_[0]+1,_[1]-1),x[0]===`
`&&(j=["{"]),j.push(x)));var te,se,ge,ht;for(ht=re,A&O&&(ht|=F),te=0,se=m.body.length;te<se;++te)M&&(te===0&&(m.body[0].leadingComments&&(_=m.body[0].leadingComments[0].extendedRange,x=T.substring(_[0],_[1]),x[0]===`
`&&(j=["{"])),m.body[0].leadingComments||rs(m.range[0],m.body[0].range[0],j)),te>0&&!m.body[te-1].trailingComments&&!m.body[te].leadingComments&&rs(m.body[te-1].range[1],m.body[te].range[0],j)),te===se-1&&(ht|=U),m.body[te].leadingComments&&M?ge=X.generateStatement(m.body[te],ht):ge=Er(X.generateStatement(m.body[te],ht)),j.push(ge),Le(bt(ge).toString())||M&&te<se-1&&m.body[te+1].leadingComments||j.push(f),M&&te===se-1&&(m.body[te].trailingComments||rs(m.body[te].range[1],m.range[1],j))}),j.push(Er("}")),j},BreakStatement:function(m,A){return m.label?"break "+m.label.name+this.semicolon(A):"break"+this.semicolon(A)},ContinueStatement:function(m,A){return m.label?"continue "+m.label.name+this.semicolon(A):"continue"+this.semicolon(A)},ClassBody:function(m,A){var _=["{",f],x=this;return St(function(j){var X,te;for(X=0,te=m.body.length;X<te;++X)_.push(j),_.push(x.generateExpression(m.body[X],e.Sequence,V)),X+1<te&&_.push(f)}),Le(bt(_).toString())||_.push(f),_.push(o),_.push("}"),_},ClassDeclaration:function(m,A){var _,x;return _=["class"],m.id&&(_=Te(_,this.generateExpression(m.id,e.Sequence,V))),m.superClass&&(x=Te("extends",this.generateExpression(m.superClass,e.Unary,V)),_=Te(_,x)),_.push(p),_.push(this.generateStatement(m.body,ie)),_},DirectiveStatement:function(m,A){return v.raw&&m.raw?m.raw+this.semicolon(A):wr(m.directive)+this.semicolon(A)},DoWhileStatement:function(m,A){var _=Te("do",this.maybeBlock(m.body,re));return _=this.maybeBlockSuffix(m.body,_),Te(_,["while"+p+"(",this.generateExpression(m.test,e.Sequence,V),")"+this.semicolon(A)])},CatchClause:function(m,A){var _,x=this;return St(function(){var j;m.param?(_=["catch"+p+"(",x.generateExpression(m.param,e.Sequence,V),")"],m.guard&&(j=x.generateExpression(m.guard,e.Sequence,V),_.splice(2,0," if ",j))):_=["catch"]}),_.push(this.maybeBlock(m.body,re)),_},DebuggerStatement:function(m,A){return"debugger"+this.semicolon(A)},EmptyStatement:function(m,A){return";"},ExportDefaultDeclaration:function(m,A){var _=["export"],x;return x=A&U?ie:re,_=Te(_,"default"),I(m.declaration)?_=Te(_,this.generateStatement(m.declaration,x)):_=Te(_,this.generateExpression(m.declaration,e.Assignment,V)+this.semicolon(A)),_},ExportNamedDeclaration:function(m,A){var _=["export"],x,j=this;return x=A&U?ie:re,m.declaration?Te(_,this.generateStatement(m.declaration,x)):(m.specifiers&&(m.specifiers.length===0?_=Te(_,"{"+p+"}"):m.specifiers[0].type===t.ExportBatchSpecifier?_=Te(_,this.generateExpression(m.specifiers[0],e.Sequence,V)):(_=Te(_,"{"),St(function(X){var te,se;for(_.push(f),te=0,se=m.specifiers.length;te<se;++te)_.push(X),_.push(j.generateExpression(m.specifiers[te],e.Sequence,V)),te+1<se&&_.push(","+f)}),Le(bt(_).toString())||_.push(f),_.push(o+"}")),m.source?_=Te(_,["from"+p,this.generateExpression(m.source,e.Sequence,V),this.semicolon(A)]):_.push(this.semicolon(A))),_)},ExportAllDeclaration:function(m,A){return["export"+p,"*"+p,"from"+p,this.generateExpression(m.source,e.Sequence,V),this.semicolon(A)]},ExpressionStatement:function(m,A){var _,x;function j(se){var ge;return se.slice(0,5)!=="class"?!1:(ge=se.charCodeAt(5),ge===123||i.code.isWhiteSpace(ge)||i.code.isLineTerminator(ge))}function X(se){var ge;return se.slice(0,8)!=="function"?!1:(ge=se.charCodeAt(8),ge===40||i.code.isWhiteSpace(ge)||ge===42||i.code.isLineTerminator(ge))}function te(se){var ge,ht,K;if(se.slice(0,5)!=="async"||!i.code.isWhiteSpace(se.charCodeAt(5)))return!1;for(ht=6,K=se.length;ht<K&&i.code.isWhiteSpace(se.charCodeAt(ht));++ht);return ht===K||se.slice(ht,ht+8)!=="function"?!1:(ge=se.charCodeAt(ht+8),ge===40||i.code.isWhiteSpace(ge)||ge===42||i.code.isLineTerminator(ge))}return _=[this.generateExpression(m.expression,e.Sequence,V)],x=bt(_).toString(),x.charCodeAt(0)===123||j(x)||X(x)||te(x)||C&&A&F&&m.expression.type===t.Literal&&typeof m.expression.value=="string"?_=["(",_,")"+this.semicolon(A)]:_.push(this.semicolon(A)),_},ImportDeclaration:function(m,A){var _,x,j=this;return m.specifiers.length===0?["import",p,this.generateExpression(m.source,e.Sequence,V),this.semicolon(A)]:(_=["import"],x=0,m.specifiers[x].type===t.ImportDefaultSpecifier&&(_=Te(_,[this.generateExpression(m.specifiers[x],e.Sequence,V)]),++x),m.specifiers[x]&&(x!==0&&_.push(","),m.specifiers[x].type===t.ImportNamespaceSpecifier?_=Te(_,[p,this.generateExpression(m.specifiers[x],e.Sequence,V)]):(_.push(p+"{"),m.specifiers.length-x===1?(_.push(p),_.push(this.generateExpression(m.specifiers[x],e.Sequence,V)),_.push(p+"}"+p)):(St(function(X){var te,se;for(_.push(f),te=x,se=m.specifiers.length;te<se;++te)_.push(X),_.push(j.generateExpression(m.specifiers[te],e.Sequence,V)),te+1<se&&_.push(","+f)}),Le(bt(_).toString())||_.push(f),_.push(o+"}"+p)))),_=Te(_,["from"+p,this.generateExpression(m.source,e.Sequence,V),this.semicolon(A)]),_)},VariableDeclarator:function(m,A){var _=A&S?V:q;return m.init?[this.generateExpression(m.id,e.Assignment,_),p,"=",p,this.generateExpression(m.init,e.Assignment,_)]:this.generatePattern(m.id,e.Assignment,_)},VariableDeclaration:function(m,A){var _,x,j,X,te,se=this;_=[m.kind],te=A&S?re:ue;function ge(){for(X=m.declarations[0],v.comment&&X.leadingComments?(_.push(`
`),_.push(Er(se.generateStatement(X,te)))):(_.push(ir()),_.push(se.generateStatement(X,te))),x=1,j=m.declarations.length;x<j;++x)X=m.declarations[x],v.comment&&X.leadingComments?(_.push(","+f),_.push(Er(se.generateStatement(X,te)))):(_.push(","+p),_.push(se.generateStatement(X,te)))}return m.declarations.length>1?St(ge):ge(),_.push(this.semicolon(A)),_},ThrowStatement:function(m,A){return[Te("throw",this.generateExpression(m.argument,e.Sequence,V)),this.semicolon(A)]},TryStatement:function(m,A){var _,x,j,X;if(_=["try",this.maybeBlock(m.block,re)],_=this.maybeBlockSuffix(m.block,_),m.handlers)for(x=0,j=m.handlers.length;x<j;++x)_=Te(_,this.generateStatement(m.handlers[x],re)),(m.finalizer||x+1!==j)&&(_=this.maybeBlockSuffix(m.handlers[x].body,_));else{for(X=m.guardedHandlers||[],x=0,j=X.length;x<j;++x)_=Te(_,this.generateStatement(X[x],re)),(m.finalizer||x+1!==j)&&(_=this.maybeBlockSuffix(X[x].body,_));if(m.handler)if(Array.isArray(m.handler))for(x=0,j=m.handler.length;x<j;++x)_=Te(_,this.generateStatement(m.handler[x],re)),(m.finalizer||x+1!==j)&&(_=this.maybeBlockSuffix(m.handler[x].body,_));else _=Te(_,this.generateStatement(m.handler,re)),m.finalizer&&(_=this.maybeBlockSuffix(m.handler.body,_))}return m.finalizer&&(_=Te(_,["finally",this.maybeBlock(m.finalizer,re)])),_},SwitchStatement:function(m,A){var _,x,j,X,te,se=this;if(St(function(){_=["switch"+p+"(",se.generateExpression(m.discriminant,e.Sequence,V),")"+p+"{"+f]}),m.cases)for(te=re,j=0,X=m.cases.length;j<X;++j)j===X-1&&(te|=U),x=Er(this.generateStatement(m.cases[j],te)),_.push(x),Le(bt(x).toString())||_.push(f);return _.push(Er("}")),_},SwitchCase:function(m,A){var _,x,j,X,te,se=this;return St(function(){for(m.test?_=[Te("case",se.generateExpression(m.test,e.Sequence,V)),":"]:_=["default:"],j=0,X=m.consequent.length,X&&m.consequent[0].type===t.BlockStatement&&(x=se.maybeBlock(m.consequent[0],re),_.push(x),j=1),j!==X&&!Le(bt(_).toString())&&_.push(f),te=re;j<X;++j)j===X-1&&A&U&&(te|=U),x=Er(se.generateStatement(m.consequent[j],te)),_.push(x),j+1!==X&&!Le(bt(x).toString())&&_.push(f)}),_},IfStatement:function(m,A){var _,x,j,X=this;return St(function(){_=["if"+p+"(",X.generateExpression(m.test,e.Sequence,V),")"]}),j=A&U,x=re,j&&(x|=U),m.alternate?(_.push(this.maybeBlock(m.consequent,re)),_=this.maybeBlockSuffix(m.consequent,_),m.alternate.type===t.IfStatement?_=Te(_,["else ",this.generateStatement(m.alternate,x)]):_=Te(_,Te("else",this.maybeBlock(m.alternate,x)))):_.push(this.maybeBlock(m.consequent,x)),_},ForStatement:function(m,A){var _,x=this;return St(function(){_=["for"+p+"("],m.init?m.init.type===t.VariableDeclaration?_.push(x.generateStatement(m.init,ue)):(_.push(x.generateExpression(m.init,e.Sequence,q)),_.push(";")):_.push(";"),m.test&&(_.push(p),_.push(x.generateExpression(m.test,e.Sequence,V))),_.push(";"),m.update&&(_.push(p),_.push(x.generateExpression(m.update,e.Sequence,V))),_.push(")")}),_.push(this.maybeBlock(m.body,A&U?ie:re)),_},ForInStatement:function(m,A){return this.generateIterationForStatement("in",m,A&U?ie:re)},ForOfStatement:function(m,A){return this.generateIterationForStatement("of",m,A&U?ie:re)},LabeledStatement:function(m,A){return[m.label.name+":",this.maybeBlock(m.body,A&U?ie:re)]},Program:function(m,A){var _,x,j,X,te;for(X=m.body.length,_=[P&&X>0?`
`:""],te=ye,j=0;j<X;++j)!P&&j===X-1&&(te|=U),M&&(j===0&&(m.body[0].leadingComments||rs(m.range[0],m.body[j].range[0],_)),j>0&&!m.body[j-1].trailingComments&&!m.body[j].leadingComments&&rs(m.body[j-1].range[1],m.body[j].range[0],_)),x=Er(this.generateStatement(m.body[j],te)),_.push(x),j+1<X&&!Le(bt(x).toString())&&(M&&m.body[j+1].leadingComments||_.push(f)),M&&j===X-1&&(m.body[j].trailingComments||rs(m.body[j].range[1],m.range[1],_));return _},FunctionDeclaration:function(m,A){return[Uu(m,!0),"function",yl(m)||ir(),m.id?On(m.id):"",this.generateFunctionBody(m)]},ReturnStatement:function(m,A){return m.argument?[Te("return",this.generateExpression(m.argument,e.Sequence,V)),this.semicolon(A)]:["return"+this.semicolon(A)]},WhileStatement:function(m,A){var _,x=this;return St(function(){_=["while"+p+"(",x.generateExpression(m.test,e.Sequence,V),")"]}),_.push(this.maybeBlock(m.body,A&U?ie:re)),_},WithStatement:function(m,A){var _,x=this;return St(function(){_=["with"+p+"(",x.generateExpression(m.object,e.Sequence,V),")"]}),_.push(this.maybeBlock(m.body,A&U?ie:re)),_}},pt(kt.prototype,kt.Statement),kt.Expression={SequenceExpression:function(m,A,_){var x,j,X;for(e.Sequence<A&&(_|=S),x=[],j=0,X=m.expressions.length;j<X;++j)x.push(this.generateExpression(m.expressions[j],e.Assignment,_)),j+1<X&&x.push(","+p);return yr(x,e.Sequence,A)},AssignmentExpression:function(m,A,_){return this.generateAssignment(m.left,m.right,m.operator,A,_)},ArrowFunctionExpression:function(m,A,_){return yr(this.generateFunctionBody(m),e.ArrowFunction,A)},ConditionalExpression:function(m,A,_){return e.Conditional<A&&(_|=S),yr([this.generateExpression(m.test,e.LogicalOR,_),p+"?"+p,this.generateExpression(m.consequent,e.Assignment,_),p+":"+p,this.generateExpression(m.alternate,e.Assignment,_)],e.Conditional,A)},LogicalExpression:function(m,A,_){return this.BinaryExpression(m,A,_)},BinaryExpression:function(m,A,_){var x,j,X,te,se,ge;return te=r[m.operator],j=m.operator==="**"?e.Postfix:te,X=m.operator==="**"?te:te+1,te<A&&(_|=S),se=this.generateExpression(m.left,j,_),ge=se.toString(),ge.charCodeAt(ge.length-1)===47&&i.code.isIdentifierPartES5(m.operator.charCodeAt(0))?x=[se,ir(),m.operator]:x=Te(se,m.operator),se=this.generateExpression(m.right,X,_),m.operator==="/"&&se.toString().charAt(0)==="/"||m.operator.slice(-1)==="<"&&se.toString().slice(0,3)==="!--"?(x.push(ir()),x.push(se)):x=Te(x,se),m.operator==="in"&&!(_&S)?["(",x,")"]:yr(x,te,A)},CallExpression:function(m,A,_){var x,j,X;for(x=[this.generateExpression(m.callee,e.Call,$)],x.push("("),j=0,X=m.arguments.length;j<X;++j)x.push(this.generateExpression(m.arguments[j],e.Assignment,V)),j+1<X&&x.push(","+p);return x.push(")"),_&N?yr(x,e.Call,A):["(",x,")"]},NewExpression:function(m,A,_){var x,j,X,te,se;if(j=m.arguments.length,se=_&R&&!g&&j===0?ce:z,x=Te("new",this.generateExpression(m.callee,e.New,se)),!(_&R)||g||j>0){for(x.push("("),X=0,te=j;X<te;++X)x.push(this.generateExpression(m.arguments[X],e.Assignment,V)),X+1<te&&x.push(","+p);x.push(")")}return yr(x,e.New,A)},MemberExpression:function(m,A,_){var x,j;return x=[this.generateExpression(m.object,e.Call,_&N?$:z)],m.computed?(x.push("["),x.push(this.generateExpression(m.property,e.Sequence,_&N?V:ce)),x.push("]")):(m.object.type===t.Literal&&typeof m.object.value=="number"&&(j=bt(x).toString(),j.indexOf(".")<0&&!/[eExX]/.test(j)&&i.code.isDecimalDigit(j.charCodeAt(j.length-1))&&!(j.length>=2&&j.charCodeAt(0)===48)&&x.push(" ")),x.push("."),x.push(On(m.property))),yr(x,e.Member,A)},MetaProperty:function(m,A,_){var x;return x=[],x.push(typeof m.meta=="string"?m.meta:On(m.meta)),x.push("."),x.push(typeof m.property=="string"?m.property:On(m.property)),yr(x,e.Member,A)},UnaryExpression:function(m,A,_){var x,j,X,te,se;return j=this.generateExpression(m.argument,e.Unary,V),p===""?x=Te(m.operator,j):(x=[m.operator],m.operator.length>2?x=Te(x,j):(te=bt(x).toString(),se=te.charCodeAt(te.length-1),X=j.toString().charCodeAt(0),((se===43||se===45)&&se===X||i.code.isIdentifierPartES5(se)&&i.code.isIdentifierPartES5(X))&&x.push(ir()),x.push(j))),yr(x,e.Unary,A)},YieldExpression:function(m,A,_){var x;return m.delegate?x="yield*":x="yield",m.argument&&(x=Te(x,this.generateExpression(m.argument,e.Yield,V))),yr(x,e.Yield,A)},AwaitExpression:function(m,A,_){var x=Te(m.all?"await*":"await",this.generateExpression(m.argument,e.Await,V));return yr(x,e.Await,A)},UpdateExpression:function(m,A,_){return m.prefix?yr([m.operator,this.generateExpression(m.argument,e.Unary,V)],e.Unary,A):yr([this.generateExpression(m.argument,e.Postfix,V),m.operator],e.Postfix,A)},FunctionExpression:function(m,A,_){var x=[Uu(m,!0),"function"];return m.id?(x.push(yl(m)||ir()),x.push(On(m.id))):x.push(yl(m)||p),x.push(this.generateFunctionBody(m)),x},ArrayPattern:function(m,A,_){return this.ArrayExpression(m,A,_,!0)},ArrayExpression:function(m,A,_,x){var j,X,te=this;return m.elements.length?(X=x?!1:m.elements.length>1,j=["[",X?f:""],St(function(se){var ge,ht;for(ge=0,ht=m.elements.length;ge<ht;++ge)m.elements[ge]?(j.push(X?se:""),j.push(te.generateExpression(m.elements[ge],e.Assignment,V))):(X&&j.push(se),ge+1===ht&&j.push(",")),ge+1<ht&&j.push(","+(X?f:p))}),X&&!Le(bt(j).toString())&&j.push(f),j.push(X?o:""),j.push("]"),j):"[]"},RestElement:function(m,A,_){return"..."+this.generatePattern(m.argument)},ClassExpression:function(m,A,_){var x,j;return x=["class"],m.id&&(x=Te(x,this.generateExpression(m.id,e.Sequence,V))),m.superClass&&(j=Te("extends",this.generateExpression(m.superClass,e.Unary,V)),x=Te(x,j)),x.push(p),x.push(this.generateStatement(m.body,ie)),x},MethodDefinition:function(m,A,_){var x,j;return m.static?x=["static"+p]:x=[],m.kind==="get"||m.kind==="set"?j=[Te(m.kind,this.generatePropertyKey(m.key,m.computed)),this.generateFunctionBody(m.value)]:j=[Dm(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)],Te(x,j)},Property:function(m,A,_){return m.kind==="get"||m.kind==="set"?[m.kind,ir(),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:m.shorthand?m.value.type==="AssignmentPattern"?this.AssignmentPattern(m.value,e.Sequence,V):this.generatePropertyKey(m.key,m.computed):m.method?[Dm(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:[this.generatePropertyKey(m.key,m.computed),":"+p,this.generateExpression(m.value,e.Assignment,V)]},ObjectExpression:function(m,A,_){var x,j,X,te=this;return m.properties.length?(x=m.properties.length>1,St(function(){X=te.generateExpression(m.properties[0],e.Sequence,V)}),!x&&!qe(bt(X).toString())?["{",p,X,p,"}"]:(St(function(se){var ge,ht;if(j=["{",f,se,X],x)for(j.push(","+f),ge=1,ht=m.properties.length;ge<ht;++ge)j.push(se),j.push(te.generateExpression(m.properties[ge],e.Sequence,V)),ge+1<ht&&j.push(","+f)}),Le(bt(j).toString())||j.push(f),j.push(o),j.push("}"),j)):"{}"},AssignmentPattern:function(m,A,_){return this.generateAssignment(m.left,m.right,"=",A,_)},ObjectPattern:function(m,A,_){var x,j,X,te,se,ge=this;if(!m.properties.length)return"{}";if(te=!1,m.properties.length===1)se=m.properties[0],se.type===t.Property&&se.value.type!==t.Identifier&&(te=!0);else for(j=0,X=m.properties.length;j<X;++j)if(se=m.properties[j],se.type===t.Property&&!se.shorthand){te=!0;break}return x=["{",te?f:""],St(function(ht){var K,L;for(K=0,L=m.properties.length;K<L;++K)x.push(te?ht:""),x.push(ge.generateExpression(m.properties[K],e.Sequence,V)),K+1<L&&x.push(","+(te?f:p))}),te&&!Le(bt(x).toString())&&x.push(f),x.push(te?o:""),x.push("}"),x},ThisExpression:function(m,A,_){return"this"},Super:function(m,A,_){return"super"},Identifier:function(m,A,_){return On(m)},ImportDefaultSpecifier:function(m,A,_){return On(m.id||m.local)},ImportNamespaceSpecifier:function(m,A,_){var x=["*"],j=m.id||m.local;return j&&x.push(p+"as"+ir()+On(j)),x},ImportSpecifier:function(m,A,_){var x=m.imported,j=[x.name],X=m.local;return X&&X.name!==x.name&&j.push(ir()+"as"+ir()+On(X)),j},ExportSpecifier:function(m,A,_){var x=m.local,j=[x.name],X=m.exported;return X&&X.name!==x.name&&j.push(ir()+"as"+ir()+On(X)),j},Literal:function(m,A,_){var x;if(m.hasOwnProperty("raw")&&k&&v.raw)try{if(x=k(m.raw).body[0].expression,x.type===t.Literal&&x.value===m.value)return m.raw}catch{}return m.regex?"/"+m.regex.pattern+"/"+m.regex.flags:m.value===null?"null":typeof m.value=="string"?qn(m.value):typeof m.value=="number"?at(m.value):typeof m.value=="boolean"?m.value?"true":"false":Bs(m.value)},GeneratorExpression:function(m,A,_){return this.ComprehensionExpression(m,A,_)},ComprehensionExpression:function(m,A,_){var x,j,X,te,se=this;return x=m.type===t.GeneratorExpression?["("]:["["],v.moz.comprehensionExpressionStartsWithAssignment&&(te=this.generateExpression(m.body,e.Assignment,V),x.push(te)),m.blocks&&St(function(){for(j=0,X=m.blocks.length;j<X;++j)te=se.generateExpression(m.blocks[j],e.Sequence,V),j>0||v.moz.comprehensionExpressionStartsWithAssignment?x=Te(x,te):x.push(te)}),m.filter&&(x=Te(x,"if"+p),te=this.generateExpression(m.filter,e.Sequence,V),x=Te(x,["(",te,")"])),v.moz.comprehensionExpressionStartsWithAssignment||(te=this.generateExpression(m.body,e.Assignment,V),x=Te(x,te)),x.push(m.type===t.GeneratorExpression?")":"]"),x},ComprehensionBlock:function(m,A,_){var x;return m.left.type===t.VariableDeclaration?x=[m.left.kind,ir(),this.generateStatement(m.left.declarations[0],ue)]:x=this.generateExpression(m.left,e.Call,V),x=Te(x,m.of?"of":"in"),x=Te(x,this.generateExpression(m.right,e.Sequence,V)),["for"+p+"(",x,")"]},SpreadElement:function(m,A,_){return["...",this.generateExpression(m.argument,e.Assignment,V)]},TaggedTemplateExpression:function(m,A,_){var x=$;_&N||(x=z);var j=[this.generateExpression(m.tag,e.Call,x),this.generateExpression(m.quasi,e.Primary,ee)];return yr(j,e.TaggedTemplate,A)},TemplateElement:function(m,A,_){return m.value.raw},TemplateLiteral:function(m,A,_){var x,j,X;for(x=["`"],j=0,X=m.quasis.length;j<X;++j)x.push(this.generateExpression(m.quasis[j],e.Primary,V)),j+1<X&&(x.push("${"+p),x.push(this.generateExpression(m.expressions[j],e.Sequence,V)),x.push(p+"}"));return x.push("`"),x},ModuleSpecifier:function(m,A,_){return this.Literal(m,A,_)},ImportExpression:function(m,A,_){return yr(["import(",this.generateExpression(m.source,e.Assignment,V),")"],e.Call,A)}},pt(kt.prototype,kt.Expression),kt.prototype.generateExpression=function(m,A,_){var x,j;return j=m.type||t.Property,v.verbatim&&m.hasOwnProperty(v.verbatim)?_m(m,A):(x=this[j](m,A,_),v.comment&&(x=Ts(m,x)),bt(x,m))},kt.prototype.generateStatement=function(m,A){var _,x;return _=this[m.type](m,A),v.comment&&(_=Ts(m,_)),x=bt(_).toString(),m.type===t.Program&&!P&&f===""&&x.charAt(x.length-1)===`
`&&(_=B?bt(_).replaceRight(/\s+$/,""):x.replace(/\s+$/,"")),bt(_,m)};function bb(m){var A;if(A=new kt,I(m))return A.generateStatement(m,re);if(E(m))return A.generateExpression(m,e.Sequence,V);throw new Error("Unknown node type: "+m.type)}function wb(m,A){var _=He(),x,j;return A!=null?(typeof A.indent=="string"&&(_.format.indent.style=A.indent),typeof A.base=="number"&&(_.format.indent.base=A.base),A=Me(_,A),a=A.format.indent.style,typeof A.base=="string"?o=A.base:o=Xe(a,A.format.indent.base)):(A=_,a=A.format.indent.style,o=Xe(a,A.format.indent.base)),u=A.format.json,c=A.format.renumber,l=u?!1:A.format.hexadecimal,d=u?"double":A.format.quotes,h=A.format.escapeless,f=A.format.newline,p=A.format.space,A.format.compact&&(f=p=a=o=""),g=A.format.parentheses,w=A.format.semicolons,P=A.format.safeConcatenation,C=A.directive,k=u?null:A.parse,B=A.sourceMap,T=A.sourceCode,M=A.format.preserveBlankLines&&T!==null,v=A,B&&(ga.browser?n=globalThis.sourceMap.SourceNode:n=_T().SourceNode),x=bb(m),B?(j=x.toStringWithSourceMap({file:A.file,sourceRoot:A.sourceMapRoot}),A.sourceContent&&j.map.setSourceContent(A.sourceMap,A.sourceContent),A.sourceMapWithCode?j:j.map.toString()):(j={code:x.toString(),map:null},A.sourceMapWithCode?j:j.code)}y={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},b=He().format,ga.version=DT().version,ga.generate=wb,ga.attachComments=s.attachComments,ga.Precedence=Me({},e),ga.browser=!1,ga.FORMAT_MINIFY=y,ga.FORMAT_DEFAULTS=b})()});var xT=D((iDe,AT)=>{var Zee=ST().generate;AT.exports=function(t,e){e||(e={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var u=[],c=0,l=i.elements.length;c<l;c++){var d=s(i.elements[c]);if(d===r)return r;u.push(d)}return u}else if(i.type==="ObjectExpression"){for(var h={},c=0;c<i.properties.length;c++){var f=i.properties[c],p=f.value===null?f.value:s(f.value);if(p===r)return r;h[f.key.value||f.key.name]=p}return h}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var l=s(i.left);if(l===r)return r;var g=s(i.right);if(g===r)return r;var w=i.operator;return w==="=="?l==g:w==="==="?l===g:w==="!="?l!=g:w==="!=="?l!==g:w==="+"?l+g:w==="-"?l-g:w==="*"?l*g:w==="/"?l/g:w==="%"?l%g:w==="<"?l<g:w==="<="?l<=g:w===">"?l>g:w===">="?l>=g:w==="|"?l|g:w==="&"?l&g:w==="^"?l^g:w==="&&"?l&&g:w==="||"?l||g:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(e,i.name)?e[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(e,"this")?e.this:r;if(i.type==="CallExpression"){var P=s(i.callee);if(P===r||typeof P!="function")return r;var C=i.callee.object?s(i.callee.object):r;C===r&&(C=null);for(var v=[],c=0,l=i.arguments.length;c<l;c++){var d=s(i.arguments[c]);if(d===r)return r;v.push(d)}return P.apply(C,v)}else if(i.type==="MemberExpression"){var h=s(i.object);if(h===r||typeof h=="function")return r;if(i.property.type==="Identifier")return h[i.property.name];var f=s(i.property);return f===r?r:h[f]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var k=i.body.body,B={};Object.keys(e).forEach(function(R){B[R]=e[R]});for(var c=0;c<i.params.length;c++){var T=i.params[c];if(T.type=="Identifier")e[T.name]=null;else return r}for(var c in k)if(s(k[c])===r)return r;e=B;var M=Object.keys(e),y=M.map(function(R){return e[R]});return Function(M.join(", "),"return "+Zee(i)).apply(null,y)}else if(i.type==="TemplateLiteral"){for(var b="",c=0;c<i.expressions.length;c++)b+=s(i.quasis[c]),b+=s(i.expressions[c]);return b+=s(i.quasis[c]),b}else if(i.type==="TaggedTemplateExpression"){var E=s(i.tag),I=i.quasi,S=I.quasis.map(s),N=I.expressions.map(s);return E.apply(null,[S].concat(N))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(t);return n===r?void 0:n}});var BT=D(Wi=>{"use strict";var Qee=Wi&&Wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ete=Wi&&Wi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),tte=Wi&&Wi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qee(e,t,r);return ete(e,t),e},rte=Wi&&Wi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.Handlers=void 0;var C2=tte(UI()),nte=KI(),OT=zi(),ite=rte(xT());function CT(t){return function(e,r,n,s){var i=e.value,o=e.path,a=[],u=function(c,l){kT(c)?(c.forEach(function(d,h){a.length>=s||n(h,d,r)&&a.push({path:l.concat(h),value:d})}),c.forEach(function(d,h){a.length>=s||t&&u(d,l.concat(h))})):ote(c)&&(Object.keys(c).forEach(function(d){a.length>=s||n(d,c[d],r)&&a.push({path:l.concat(d),value:c[d]})}),Object.keys(c).forEach(function(d){a.length>=s||t&&u(c[d],l.concat(d))}))}.bind(this);return u(i,o),a}}function P2(t,e){try{return(0,ite.default)(t,e)}catch{}}function ug(t){return function(e,r,n){return this.descend(r,e.expression.value,t,n)}}function cg(t){return function(e,r,n){return this.traverse(r,e.expression.value,t,n)}}function PT(t){return t=t.filter(function(e){return e}),ute(t,function(e){return e.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function ste(t){var e=String(t);return e.match(/^-?[0-9]+$/)?parseInt(e):null}function kT(t){return Array.isArray(t)}function ote(t){return t&&!(t instanceof Array)&&t instanceof Object}function x2(t,e,r){var n=C2.parse(e).body[0].expression,s=P2(n,{"@":t.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=OT.JSONPath.nodes(t.value,i);return o.forEach(function(a){a.path=t.path.concat(a.path.slice(1))}),o}var ate=function(){function t(){this._fns={"member-child-identifier":function(e,r){var n=e.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":cg(function(e,r,n){return e==n}),"subscript-child-numeric_literal":ug(function(e,r,n){return e===n}),"member-child-numeric_literal":ug(function(e,r,n){return String(e)===String(n)}),"subscript-descendant-numeric_literal":cg(function(e,r,n){return e===n}),"member-child-wildcard":ug(function(){return!0}),"member-descendant-wildcard":cg(function(){return!0}),"subscript-descendant-wildcard":cg(function(){return!0}),"subscript-child-wildcard":ug(function(){return!0}),"subscript-child-slice":function(e,r){if(kT(r.value)){var n=e.expression.value.split(":").map(ste),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return nte.slice.apply(null,[s].concat(n))}},"subscript-child-union":function(e,r){var n=[];return e.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),PT(n)},"subscript-descendant-union":function(e,r,n){var s=this,i=[],o=OT.JSONPath.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||e.expression.value.forEach(function(u){var c={operation:"subscript",scope:"child",expression:u.expression},l=s.resolve(c),d=l(c,a);i=i.concat(d)})}),PT(i)},"subscript-child-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=C2.parse(s).body[0].expression,o=function(a,u){return P2(i,{"@":u})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=C2.parse(s).body[0].expression,o=function(a,u){return P2(i,{"@":u})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return x2(r,n,"$[{{value}}]")},"member-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return x2(r,n,"$.{{value}}")},"member-descendant-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return x2(r,n,"$..value")}},this.initialize()}return t.prototype.initialize=function(){this.traverse=CT(!0),this.descend=CT(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},t.prototype.resolve=function(e){var r=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},t.prototype.register=function(e,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[e]=r},t}();Wi.Handlers=ate;function ute(t,e){for(var r=[],n=[],s=0,i=t?.length;s<i;s++){var o=t[s],a=e?e(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}});var IT=D(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.TOKENS=void 0;lg.TOKENS={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}});var TT=D(dh=>{var dg=function(){var t=function(T,M,y,b){for(y=y||{},b=T.length;b--;y[T[b]]=M);return y},e=[1,5],r=[1,6],n=[1,7],s=[1,8],i=[1,9],o=[1,18],a=[1,19],u=[1,20],c=[1,12,14,22],l=[1,29],d=[1,30],h=[1,33],f=[1,35],p=[1,31],g=[1,36],w=[1,37],P=[24,28],C={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(M,y,b,E,I,S,N){E.ast||(E.ast=v,v.initialize());var R=S.length-1;switch(I){case 1:return E.ast.set({expression:{type:"root",value:S[R]}}),E.ast.unshift(),E.ast.yield();break;case 2:return E.ast.set({expression:{type:"root",value:S[R-1]}}),E.ast.unshift(),E.ast.yield();break;case 3:return E.ast.unshift(),E.ast.yield();break;case 4:return E.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:S[R-1]}}),E.ast.unshift(),E.ast.yield();break;case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:E.ast.set({operation:"member"}),E.ast.push();break;case 8:E.ast.set({operation:"subscript"}),E.ast.push();break;case 9:case 19:E.ast.set({scope:"child"});break;case 10:case 20:E.ast.set({scope:"descendant"});break;case 12:E.ast.set({scope:"child",operation:"member"});break;case 14:E.ast.set({expression:{type:"wildcard",value:S[R]}});break;case 15:E.ast.set({expression:{type:"identifier",value:S[R]}});break;case 16:E.ast.set({expression:{type:"script_expression",value:S[R]}});break;case 17:E.ast.set({expression:{type:"numeric_literal",value:parseInt(S[R])}});break;case 24:S[R].length>1?E.ast.set({expression:{type:"union",value:S[R]}}):this.$=S[R];break;case 25:this.$=[S[R]];break;case 26:this.$=S[R-2].concat(S[R]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(S[R])}},E.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:S[R]}},E.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:S[R]}},E.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:S[R]}},E.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:S[R]}},E.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:S[R]}},E.ast.set(this.$);break;case 33:case 34:this.$=S[R];break}},table:[{3:1,4:[1,2],6:3,13:4,15:e,16:r,17:n,18:s,19:i},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,12]),t(c,[2,14]),t(c,[2,15]),t(c,[2,16]),t(c,[2,17]),t(c,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,5]),t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,19]),t(c,[2,20]),{13:23,15:e,16:r,17:n,18:s,19:i},{13:24,15:e,16:r,17:n,18:s,19:i,22:[1,25]},{15:l,17:d,18:h,23:26,25:27,26:28,27:32,29:34,30:f,31:p,32:g,33:w},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,6]),t(c,[2,11]),t(c,[2,13]),{15:l,17:d,18:h,23:38,25:27,26:28,27:32,29:34,30:f,31:p,32:g,33:w},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},t(P,[2,25]),t(P,[2,27]),t(P,[2,28]),t(P,[2,29]),t(P,[2,33]),t(P,[2,34]),{24:[1,41]},t(c,[2,21]),{18:h,27:42,29:34,30:f,32:g,33:w},t(c,[2,22]),t(P,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(M,y){if(y.recoverable)this.trace(M);else{var b=new Error(M);throw b.hash=y,b}},parse:function(M){var y=this,b=[0],E=[],I=[null],S=[],N=this.table,R="",O=0,F=0,U=0,q=2,$=1,V=S.slice.call(arguments,1),z=Object.create(this.lexer),ee={yy:{}};for(var ce in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ce)&&(ee.yy[ce]=this.yy[ce]);z.setInput(M,ee.yy),ee.yy.lexer=z,ee.yy.parser=this,typeof z.yylloc>"u"&&(z.yylloc={});var re=z.yylloc;S.push(re);var ie=z.options&&z.options.ranges;typeof ee.yy.parseError=="function"?this.parseError=ee.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ue(wr){b.length=b.length-2*wr,I.length=I.length-wr,S.length=S.length-wr}e:var ye=function(){var wr;return wr=z.lex()||$,typeof wr!="number"&&(wr=y.symbols_[wr]||wr),wr};for(var ke,He,Xe,qe,Le,pt,Me={},at,br,Bs,ts;;){if(Xe=b[b.length-1],this.defaultActions[Xe]?qe=this.defaultActions[Xe]:((ke===null||typeof ke>"u")&&(ke=ye()),qe=N[Xe]&&N[Xe][ke]),typeof qe>"u"||!qe.length||!qe[0]){var Oo="";ts=[];for(at in N[Xe])this.terminals_[at]&&at>q&&ts.push("'"+this.terminals_[at]+"'");z.showPosition?Oo="Parse error on line "+(O+1)+`:
`+z.showPosition()+`
Expecting `+ts.join(", ")+", got '"+(this.terminals_[ke]||ke)+"'":Oo="Parse error on line "+(O+1)+": Unexpected "+(ke==$?"end of input":"'"+(this.terminals_[ke]||ke)+"'"),this.parseError(Oo,{text:z.match,token:this.terminals_[ke]||ke,line:z.yylineno,loc:re,expected:ts})}if(qe[0]instanceof Array&&qe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xe+", token: "+ke);switch(qe[0]){case 1:b.push(ke),I.push(z.yytext),S.push(z.yylloc),b.push(qe[1]),ke=null,He?(ke=He,He=null):(F=z.yyleng,R=z.yytext,O=z.yylineno,re=z.yylloc,U>0&&U--);break;case 2:if(br=this.productions_[qe[1]][1],Me.$=I[I.length-br],Me._$={first_line:S[S.length-(br||1)].first_line,last_line:S[S.length-1].last_line,first_column:S[S.length-(br||1)].first_column,last_column:S[S.length-1].last_column},ie&&(Me._$.range=[S[S.length-(br||1)].range[0],S[S.length-1].range[1]]),pt=this.performAction.apply(Me,[R,F,O,ee.yy,qe[1],I,S].concat(V)),typeof pt<"u")return pt;br&&(b=b.slice(0,-1*br*2),I=I.slice(0,-1*br),S=S.slice(0,-1*br)),b.push(this.productions_[qe[1]][0]),I.push(Me.$),S.push(Me._$),Bs=N[b[b.length-2]][b[b.length-1]],b.push(Bs);break;case 3:return!0}}return!0}},v={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(T){for(var M in T)this._node[M]=T[M];return this._node},node:function(T){return arguments.length&&(this._node=T),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var T=this._nodes;return this.initialize(),T}},k=function(){var T={EOF:1,parseError:function(y,b){if(this.yy.parser)this.yy.parser.parseError(y,b);else throw new Error(y)},setInput:function(M,y){return this.yy=y||this.yy||{},this._input=M,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var M=this._input[0];this.yytext+=M,this.yyleng++,this.offset++,this.match+=M,this.matched+=M;var y=M.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),M},unput:function(M){var y=M.length,b=M.split(/(?:\r\n?|\n)/g);this._input=M+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),b.length-1&&(this.yylineno-=b.length-1);var I=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===E.length?this.yylloc.first_column:0)+E[E.length-b.length].length-b[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[I[0],I[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(M){this.unput(this.match.slice(M))},pastInput:function(){var M=this.matched.substr(0,this.matched.length-this.match.length);return(M.length>20?"...":"")+M.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var M=this.match;return M.length<20&&(M+=this._input.substr(0,20-M.length)),(M.substr(0,20)+(M.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var M=this.pastInput(),y=new Array(M.length+1).join("-");return M+this.upcomingInput()+`
`+y+"^"},test_match:function(M,y){var b,E,I;if(this.options.backtrack_lexer&&(I={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(I.yylloc.range=this.yylloc.range.slice(0))),E=M[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length},this.yytext+=M[0],this.match+=M[0],this.matches=M,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(M[0].length),this.matched+=M[0],b=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),b)return b;if(this._backtrack){for(var S in I)this[S]=I[S];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var M,y,b,E;this._more||(this.yytext="",this.match="");for(var I=this._currentRules(),S=0;S<I.length;S++)if(b=this._input.match(this.rules[I[S]]),b&&(!y||b[0].length>y[0].length)){if(y=b,E=S,this.options.backtrack_lexer){if(M=this.test_match(b,I[S]),M!==!1)return M;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(M=this.test_match(y,I[E]),M!==!1?M:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var y=this.next();return y||this.lex()},begin:function(y){this.conditionStack.push(y)},popState:function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},pushState:function(y){this.begin(y)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(y,b,E,I){var S=I;switch(E){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return b.yytext=b.yytext.substr(1,b.yyleng-2),32;break;case 11:return b.yytext=b.yytext.substr(1,b.yyleng-2),33;break;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return T}();C.lexer=k;function B(){this.yy={}}return B.prototype=C,C.Parser=B,new B}();typeof eC<"u"&&typeof dh<"u"&&(dh.parser=dg,dh.Parser=dg.Parser,dh.parse=function(){return dg.parse.apply(dg,arguments)})});var FT=D(mo=>{"use strict";var cte=mo&&mo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),lte=mo&&mo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),dte=mo&&mo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&cte(e,t,r);return lte(e,t),e};Object.defineProperty(mo,"__esModule",{value:!0});mo.Parser=void 0;var fte=dte(TT());function pte(){var t=new fte.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t}mo.Parser=pte});var RT=D(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});fg.assert=void 0;var hte=function(){function t(){}return t.ok=function(e,r){if(!e)throw new Error(r)},t.equal=function(e,r,n){if(e!==r)throw new Error(n)},t}();fg.assert=hte});var $T=D(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});hg.JSONPath=void 0;var mte=BT(),yte=IT(),pg=FT(),rn=RT(),gte=function(){function t(){}return t.parse=function(e){return rn.assert.ok(typeof e=="string","we need a path"),new pg.Parser().parse(e)},t.parent=function(e,r){rn.assert.ok(e instanceof Object,"obj needs to be an object"),rn.assert.ok(r,"we need a path");var n=this.nodes(e,r)[0],s=n.path.pop();return this.value(e,n.path)},t.apply=function(e,r,n){rn.assert.ok(e instanceof Object,"obj needs to be an object"),rn.assert.ok(r,"we need a path"),rn.assert.equal(typeof n,"function","fn needs to be function");var s=this.nodes(e,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(e,this.stringify(i.path)),u=i.value=n.call(e,a[o]);a[o]=u},this),s},t.value=function(e,r,n){if(rn.assert.ok(e instanceof Object,"obj needs to be an object"),rn.assert.ok(r,"we need a path"),n!==void 0){var s=this.nodes(e,r).shift();if(!s)return this._vivify(e,r,n);var i=s.path.slice(-1).shift(),o=this.parent(e,this.stringify(s.path));o[i]=n}return this.query(e,this.stringify(r),1).shift()},t._vivify=function(e,r,n){var s=this;rn.assert.ok(e instanceof Object,"obj needs to be an object"),rn.assert.ok(r,"we need a path");var i=new pg.Parser().parse(r).map(function(a){return a.expression.value}),o=function(a,u){var c=a.pop(),l=s.value(e,a);l||(o(a.concat(),typeof c=="string"?{}:[]),l=s.value(e,a)),l[c]=u};return o(i,n),this.query(e,r)[0]},t.query=function(e,r,n){rn.assert.ok(e instanceof Object,"obj needs to be an object"),rn.assert.ok(typeof r=="string","we need a path");var s=this.nodes(e,r,n).map(function(i){return i.value});return s},t.paths=function(e,r,n){rn.assert.ok(e instanceof Object,"obj needs to be an object"),rn.assert.ok(r,"we need a path");var s=this.nodes(e,r,n).map(function(i){return i.path});return s},t.nodes=function(e,r,n){if(rn.assert.ok(e instanceof Object,"obj needs to be an object"),rn.assert.ok(r,"we need a path"),n===0)return[];var s=new pg.Parser().parse(r),i=new mte.Handlers,o=[{path:["$"],value:e}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(u,c){if(!(a.length>=n)){var l=i.resolve(u),d=[];o.forEach(function(h){if(!(a.length>=n)){var f=l(u,h,n);c==s.length-1?a=a.concat(f||[]):d=d.concat(f||[])}}),o=d}}),n?a.slice(0,n):a):o},t.stringify=function(e){rn.assert.ok(e,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return e=this._normalize(e),e.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},t._normalize=function(e){if(rn.assert.ok(e,"we need a path"),typeof e=="string")return new pg.Parser().parse(e);if(Array.isArray(e)&&typeof e[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return e.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+yte.TOKENS.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(e)&&typeof e[0]=="object")return e;throw new Error("couldn't understand path "+e)},t}();hg.JSONPath=gte});var zi=D(Uc=>{"use strict";var vte=Uc&&Uc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bte=Uc&&Uc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vte(e,t,r)};Object.defineProperty(Uc,"__esModule",{value:!0});bte($T(),Uc)});var jT=D((pDe,MT)=>{"use strict";var wte="Function.prototype.bind called on incompatible ",Ete=Object.prototype.toString,_te=Math.max,Dte="[object Function]",NT=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},Ste=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},Ate=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};MT.exports=function(e){var r=this;if(typeof r!="function"||Ete.apply(r)!==Dte)throw new TypeError(wte+r);for(var n=Ste(arguments,1),s,i=function(){if(this instanceof s){var l=r.apply(this,NT(n,arguments));return Object(l)===l?l:this}return r.apply(e,NT(n,arguments))},o=_te(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(s=Function("binder","return function ("+Ate(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s}});var mg=D((hDe,qT)=>{"use strict";var xte=jT();qT.exports=Function.prototype.bind||xte});var UT=D((mDe,LT)=>{"use strict";LT.exports=Error});var VT=D((yDe,KT)=>{"use strict";KT.exports=EvalError});var WT=D((gDe,HT)=>{"use strict";HT.exports=RangeError});var JT=D((vDe,zT)=>{"use strict";zT.exports=ReferenceError});var yg=D((bDe,GT)=>{"use strict";GT.exports=SyntaxError});var gt=D((wDe,XT)=>{"use strict";XT.exports=TypeError});var ZT=D((EDe,YT)=>{"use strict";YT.exports=URIError});var O2=D((_De,QT)=>{"use strict";QT.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0}});var Kc=D((DDe,tF)=>{"use strict";var eF=typeof Symbol<"u"&&Symbol,Cte=O2();tF.exports=function(){return typeof eF!="function"||typeof Symbol!="function"||typeof eF("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Cte()}});var B2=D((SDe,rF)=>{"use strict";var k2={__proto__:null,foo:{}},Pte=Object;rF.exports=function(){return{__proto__:k2}.foo===k2.foo&&!(k2 instanceof Pte)}});var Vc=D((ADe,nF)=>{"use strict";var Ote=Function.prototype.call,kte=Object.prototype.hasOwnProperty,Bte=mg();nF.exports=Bte.call(Ote,kte)});var pr=D((xDe,uF)=>{"use strict";var vt,Ite=UT(),Tte=VT(),Fte=WT(),Rte=JT(),Hd=yg(),Vd=gt(),$te=ZT(),aF=Function,I2=function(t){try{return aF('"use strict"; return ('+t+").constructor;")()}catch{}},Hc=Object.getOwnPropertyDescriptor;if(Hc)try{Hc({},"")}catch{Hc=null}var T2=function(){throw new Vd},Nte=Hc?function(){try{return arguments.callee,T2}catch{try{return Hc(arguments,"callee").get}catch{return T2}}}():T2,Ud=Kc()(),Mte=B2()(),nn=Object.getPrototypeOf||(Mte?function(t){return t.__proto__}:null),Kd={},jte=typeof Uint8Array>"u"||!nn?vt:nn(Uint8Array),Wc={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?vt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?vt:ArrayBuffer,"%ArrayIteratorPrototype%":Ud&&nn?nn([][Symbol.iterator]()):vt,"%AsyncFromSyncIteratorPrototype%":vt,"%AsyncFunction%":Kd,"%AsyncGenerator%":Kd,"%AsyncGeneratorFunction%":Kd,"%AsyncIteratorPrototype%":Kd,"%Atomics%":typeof Atomics>"u"?vt:Atomics,"%BigInt%":typeof BigInt>"u"?vt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?vt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?vt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?vt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Ite,"%eval%":eval,"%EvalError%":Tte,"%Float32Array%":typeof Float32Array>"u"?vt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?vt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?vt:FinalizationRegistry,"%Function%":aF,"%GeneratorFunction%":Kd,"%Int8Array%":typeof Int8Array>"u"?vt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?vt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?vt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Ud&&nn?nn(nn([][Symbol.iterator]())):vt,"%JSON%":typeof JSON=="object"?JSON:vt,"%Map%":typeof Map>"u"?vt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Ud||!nn?vt:nn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?vt:Promise,"%Proxy%":typeof Proxy>"u"?vt:Proxy,"%RangeError%":Fte,"%ReferenceError%":Rte,"%Reflect%":typeof Reflect>"u"?vt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?vt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Ud||!nn?vt:nn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?vt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Ud&&nn?nn(""[Symbol.iterator]()):vt,"%Symbol%":Ud?Symbol:vt,"%SyntaxError%":Hd,"%ThrowTypeError%":Nte,"%TypedArray%":jte,"%TypeError%":Vd,"%Uint8Array%":typeof Uint8Array>"u"?vt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?vt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?vt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?vt:Uint32Array,"%URIError%":$te,"%WeakMap%":typeof WeakMap>"u"?vt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?vt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?vt:WeakSet};if(nn)try{null.error}catch(t){iF=nn(nn(t)),Wc["%Error.prototype%"]=iF}var iF,qte=function t(e){var r;if(e==="%AsyncFunction%")r=I2("async function () {}");else if(e==="%GeneratorFunction%")r=I2("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=I2("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&nn&&(r=nn(s.prototype))}return Wc[e]=r,r},sF={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},fh=mg(),gg=Vc(),Lte=fh.call(Function.call,Array.prototype.concat),Ute=fh.call(Function.apply,Array.prototype.splice),oF=fh.call(Function.call,String.prototype.replace),vg=fh.call(Function.call,String.prototype.slice),Kte=fh.call(Function.call,RegExp.prototype.exec),Vte=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Hte=/\\(\\)?/g,Wte=function(e){var r=vg(e,0,1),n=vg(e,-1);if(r==="%"&&n!=="%")throw new Hd("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Hd("invalid intrinsic syntax, expected opening `%`");var s=[];return oF(e,Vte,function(i,o,a,u){s[s.length]=a?oF(u,Hte,"$1"):o||i}),s},zte=function(e,r){var n=e,s;if(gg(sF,n)&&(s=sF[n],n="%"+s[0]+"%"),gg(Wc,n)){var i=Wc[n];if(i===Kd&&(i=qte(n)),typeof i>"u"&&!r)throw new Vd("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Hd("intrinsic "+e+" does not exist!")};uF.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Vd("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Vd('"allowMissing" argument must be a boolean');if(Kte(/^%?[^%]*%?$/,e)===null)throw new Hd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Wte(e),s=n.length>0?n[0]:"",i=zte("%"+s+"%",r),o=i.name,a=i.value,u=!1,c=i.alias;c&&(s=c[0],Ute(n,Lte([0,1],c)));for(var l=1,d=!0;l<n.length;l+=1){var h=n[l],f=vg(h,0,1),p=vg(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Hd("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(u=!0),s+="."+h,o="%"+s+"%",gg(Wc,o))a=Wc[o];else if(a!=null){if(!(h in a)){if(!r)throw new Vd("base intrinsic for "+e+" exists, but the property is not available.");return}if(Hc&&l+1>=n.length){var g=Hc(a,h);d=!!g,d&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[h]}else d=gg(a,h),a=a[h];d&&!u&&(Wc[o]=a)}}return a}});var ph=D((CDe,cF)=>{"use strict";var Jte=pr(),bg=Jte("%Object.defineProperty%",!0)||!1;if(bg)try{bg({},"a",{value:1})}catch{bg=!1}cF.exports=bg});var Eg=D((PDe,lF)=>{"use strict";var Gte=pr(),wg=Gte("%Object.getOwnPropertyDescriptor%",!0);if(wg)try{wg([],"length")}catch{wg=null}lF.exports=wg});var _g=D((ODe,pF)=>{"use strict";var dF=ph(),Xte=yg(),Wd=gt(),fF=Eg();pF.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Wd("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Wd("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Wd("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Wd("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Wd("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Wd("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!fF&&fF(e,r);if(dF)dF(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:s===null&&u?u.enumerable:!s,value:n,writable:i===null&&u?u.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new Xte("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var hh=D((kDe,mF)=>{"use strict";var F2=ph(),hF=function(){return!!F2};hF.hasArrayLengthDefineBug=function(){if(!F2)return null;try{return F2([],"length",{value:1}).length!==1}catch{return!0}};mF.exports=hF});var wF=D((BDe,bF)=>{"use strict";var Yte=pr(),yF=_g(),Zte=hh()(),gF=Eg(),vF=gt(),Qte=Yte("%Math.floor%");bF.exports=function(e,r){if(typeof e!="function")throw new vF("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Qte(r)!==r)throw new vF("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&gF){var o=gF(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(Zte?yF(e,"length",r,!0,!0):yF(e,"length",r)),e}});var mh=D((IDe,Dg)=>{"use strict";var R2=mg(),Sg=pr(),ere=wF(),tre=gt(),DF=Sg("%Function.prototype.apply%"),SF=Sg("%Function.prototype.call%"),AF=Sg("%Reflect.apply%",!0)||R2.call(SF,DF),EF=ph(),rre=Sg("%Math.max%");Dg.exports=function(e){if(typeof e!="function")throw new tre("a function is required");var r=AF(R2,SF,arguments);return ere(r,1+rre(0,e.length-(arguments.length-1)),!0)};var _F=function(){return AF(R2,DF,arguments)};EF?EF(Dg.exports,"apply",{value:_F}):Dg.exports.apply=_F});var $2=D((TDe,CF)=>{"use strict";var xF=Object.prototype.toString;CF.exports=function(e){var r=xF.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&xF.call(e.callee)==="[object Function]"),n}});var $F=D((FDe,RF)=>{"use strict";var FF;Object.keys||(yh=Object.prototype.hasOwnProperty,N2=Object.prototype.toString,PF=$2(),M2=Object.prototype.propertyIsEnumerable,OF=!M2.call({toString:null},"toString"),kF=M2.call(function(){},"prototype"),gh=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ag=function(t){var e=t.constructor;return e&&e.prototype===t},BF={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},IF=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!BF["$"+t]&&yh.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{Ag(window[t])}catch{return!0}}catch{return!0}return!1}(),TF=function(t){if(typeof window>"u"||!IF)return Ag(t);try{return Ag(t)}catch{return!1}},FF=function(e){var r=e!==null&&typeof e=="object",n=N2.call(e)==="[object Function]",s=PF(e),i=r&&N2.call(e)==="[object String]",o=[];if(!r&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var a=kF&&n;if(i&&e.length>0&&!yh.call(e,0))for(var u=0;u<e.length;++u)o.push(String(u));if(s&&e.length>0)for(var c=0;c<e.length;++c)o.push(String(c));else for(var l in e)!(a&&l==="prototype")&&yh.call(e,l)&&o.push(String(l));if(OF)for(var d=TF(e),h=0;h<gh.length;++h)!(d&&gh[h]==="constructor")&&yh.call(e,gh[h])&&o.push(gh[h]);return o});var yh,N2,PF,M2,OF,kF,gh,Ag,BF,IF,TF;RF.exports=FF});var qF=D((RDe,jF)=>{"use strict";var nre=Array.prototype.slice,ire=$2(),NF=Object.keys,xg=NF?function(e){return NF(e)}:$F(),MF=Object.keys;xg.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return ire(n)?MF(nre.call(n)):MF(n)})}else Object.keys=xg;return Object.keys||xg};jF.exports=xg});var gu=D(($De,VF)=>{"use strict";var sre=qF(),ore=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",are=Object.prototype.toString,ure=Array.prototype.concat,LF=_g(),cre=function(t){return typeof t=="function"&&are.call(t)==="[object Function]"},UF=hh()(),lre=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!cre(n)||!n())return}UF?LF(t,e,r,!0):LF(t,e,r)},KF=function(t,e){var r=arguments.length>2?arguments[2]:{},n=sre(e);ore&&(n=ure.call(n,Object.getOwnPropertySymbols(e)));for(var s=0;s<n.length;s+=1)lre(t,n[s],e[n[s]],r[n[s]])};KF.supportsDescriptors=!!UF;VF.exports=KF});var vi=D((NDe,zF)=>{"use strict";var HF=pr(),WF=mh(),dre=WF(HF("String.prototype.indexOf"));zF.exports=function(e,r){var n=HF(e,!!r);return typeof n=="function"&&dre(e,".prototype.")>-1?WF(n):n}});var j2=D((MDe,GF)=>{"use strict";var fre=pr(),JF=fre("%Array%"),pre=!JF.isArray&&vi()("Object.prototype.toString");GF.exports=JF.isArray||function(e){return pre(e)==="[object Array]"}});var q2=D((jDe,XF)=>{"use strict";XF.exports=j2()});var L2=D((qDe,YF)=>{"use strict";var hre=pr(),mre=vi(),yre=gt(),gre=q2(),vre=hre("%Reflect.apply%",!0)||mre("Function.prototype.apply");YF.exports=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!gre(n))throw new yre("Assertion failed: optional `argumentsList`, if provided, must be a List");return vre(e,r,n)}});var ZF=D(()=>{});var Eh=D((KDe,g6)=>{var Y2=typeof Map=="function"&&Map.prototype,U2=Object.getOwnPropertyDescriptor&&Y2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Pg=Y2&&U2&&typeof U2.get=="function"?U2.get:null,QF=Y2&&Map.prototype.forEach,Z2=typeof Set=="function"&&Set.prototype,K2=Object.getOwnPropertyDescriptor&&Z2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Og=Z2&&K2&&typeof K2.get=="function"?K2.get:null,e6=Z2&&Set.prototype.forEach,bre=typeof WeakMap=="function"&&WeakMap.prototype,bh=bre?WeakMap.prototype.has:null,wre=typeof WeakSet=="function"&&WeakSet.prototype,wh=wre?WeakSet.prototype.has:null,Ere=typeof WeakRef=="function"&&WeakRef.prototype,t6=Ere?WeakRef.prototype.deref:null,_re=Boolean.prototype.valueOf,Dre=Object.prototype.toString,Sre=Function.prototype.toString,Are=String.prototype.match,Q2=String.prototype.slice,bu=String.prototype.replace,xre=String.prototype.toUpperCase,r6=String.prototype.toLowerCase,d6=RegExp.prototype.test,n6=Array.prototype.concat,yo=Array.prototype.join,Cre=Array.prototype.slice,i6=Math.floor,W2=typeof BigInt=="function"?BigInt.prototype.valueOf:null,V2=Object.getOwnPropertySymbols,z2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,zd=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Sn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===zd||"symbol")?Symbol.toStringTag:null,f6=Object.prototype.propertyIsEnumerable,s6=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function o6(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||d6.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-i6(-t):i6(t);if(n!==t){var s=String(n),i=Q2.call(e,s.length+1);return bu.call(s,r,"$&_")+"."+bu.call(bu.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return bu.call(e,r,"$&_")}var J2=ZF(),a6=J2.custom,u6=h6(a6)?a6:null;g6.exports=function t(e,r,n,s){var i=r||{};if(vu(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(vu(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=vu(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(vu(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(vu(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return y6(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?o6(e,u):u}if(typeof e=="bigint"){var c=String(e)+"n";return a?o6(e,c):c}var l=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return G2(e)?"[Array]":"[Object]";var d=Hre(i,n);if(typeof s>"u")s=[];else if(m6(s,e)>=0)return"[Circular]";function h(N,R,O){if(R&&(s=Cre.call(s),s.push(R)),O){var F={depth:i.depth};return vu(i,"quoteStyle")&&(F.quoteStyle=i.quoteStyle),t(N,F,n+1,s)}return t(N,i,n+1,s)}if(typeof e=="function"&&!c6(e)){var f=$re(e),p=Cg(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+yo.call(p,", ")+" }":"")}if(h6(e)){var g=zd?bu.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):z2.call(e);return typeof e=="object"&&!zd?vh(g):g}if(Ure(e)){for(var w="<"+r6.call(String(e.nodeName)),P=e.attributes||[],C=0;C<P.length;C++)w+=" "+P[C].name+"="+p6(Pre(P[C].value),"double",i);return w+=">",e.childNodes&&e.childNodes.length&&(w+="..."),w+="</"+r6.call(String(e.nodeName))+">",w}if(G2(e)){if(e.length===0)return"[]";var v=Cg(e,h);return d&&!Vre(v)?"["+X2(v,d)+"]":"[ "+yo.call(v,", ")+" ]"}if(kre(e)){var k=Cg(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!f6.call(e,"cause")?"{ ["+String(e)+"] "+yo.call(n6.call("[cause]: "+h(e.cause),k),", ")+" }":k.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+yo.call(k,", ")+" }"}if(typeof e=="object"&&o){if(u6&&typeof e[u6]=="function"&&J2)return J2(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Nre(e)){var B=[];return QF&&QF.call(e,function(N,R){B.push(h(R,e,!0)+" => "+h(N,e))}),l6("Map",Pg.call(e),B,d)}if(qre(e)){var T=[];return e6&&e6.call(e,function(N){T.push(h(N,e))}),l6("Set",Og.call(e),T,d)}if(Mre(e))return H2("WeakMap");if(Lre(e))return H2("WeakSet");if(jre(e))return H2("WeakRef");if(Ire(e))return vh(h(Number(e)));if(Fre(e))return vh(h(W2.call(e)));if(Tre(e))return vh(_re.call(e));if(Bre(e))return vh(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===globalThis)return"{ [object globalThis] }";if(!Ore(e)&&!c6(e)){var M=Cg(e,h),y=s6?s6(e)===Object.prototype:e instanceof Object||e.constructor===Object,b=e instanceof Object?"":"null prototype",E=!y&&Sn&&Object(e)===e&&Sn in e?Q2.call(wu(e),8,-1):b?"Object":"",I=y||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",S=I+(E||b?"["+yo.call(n6.call([],E||[],b||[]),": ")+"] ":"");return M.length===0?S+"{}":d?S+"{"+X2(M,d)+"}":S+"{ "+yo.call(M,", ")+" }"}return String(e)};function p6(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function Pre(t){return bu.call(String(t),/"/g,"&quot;")}function G2(t){return wu(t)==="[object Array]"&&(!Sn||!(typeof t=="object"&&Sn in t))}function Ore(t){return wu(t)==="[object Date]"&&(!Sn||!(typeof t=="object"&&Sn in t))}function c6(t){return wu(t)==="[object RegExp]"&&(!Sn||!(typeof t=="object"&&Sn in t))}function kre(t){return wu(t)==="[object Error]"&&(!Sn||!(typeof t=="object"&&Sn in t))}function Bre(t){return wu(t)==="[object String]"&&(!Sn||!(typeof t=="object"&&Sn in t))}function Ire(t){return wu(t)==="[object Number]"&&(!Sn||!(typeof t=="object"&&Sn in t))}function Tre(t){return wu(t)==="[object Boolean]"&&(!Sn||!(typeof t=="object"&&Sn in t))}function h6(t){if(zd)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!z2)return!1;try{return z2.call(t),!0}catch{}return!1}function Fre(t){if(!t||typeof t!="object"||!W2)return!1;try{return W2.call(t),!0}catch{}return!1}var Rre=Object.prototype.hasOwnProperty||function(t){return t in this};function vu(t,e){return Rre.call(t,e)}function wu(t){return Dre.call(t)}function $re(t){if(t.name)return t.name;var e=Are.call(Sre.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function m6(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Nre(t){if(!Pg||!t||typeof t!="object")return!1;try{Pg.call(t);try{Og.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Mre(t){if(!bh||!t||typeof t!="object")return!1;try{bh.call(t,bh);try{wh.call(t,wh)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function jre(t){if(!t6||!t||typeof t!="object")return!1;try{return t6.call(t),!0}catch{}return!1}function qre(t){if(!Og||!t||typeof t!="object")return!1;try{Og.call(t);try{Pg.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Lre(t){if(!wh||!t||typeof t!="object")return!1;try{wh.call(t,wh);try{bh.call(t,bh)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Ure(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function y6(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return y6(Q2.call(t,0,e.maxStringLength),e)+n}var s=bu.call(bu.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Kre);return p6(s,"single",e)}function Kre(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+xre.call(e.toString(16))}function vh(t){return"Object("+t+")"}function H2(t){return t+" { ? }"}function l6(t,e,r,n){var s=n?X2(r,n):yo.call(r,", ");return t+" ("+e+") {"+s+"}"}function Vre(t){for(var e=0;e<t.length;e++)if(m6(t[e],`
`)>=0)return!1;return!0}function Hre(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=yo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:yo.call(Array(e+1),r)}}function X2(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+yo.call(t,","+r)+`
`+e.prev}function Cg(t,e){var r=G2(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=vu(t,s)?e(t[s],t):""}var i=typeof V2=="function"?V2(t):[],o;if(zd){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var u in t)vu(t,u)&&(r&&String(Number(u))===u&&u<t.length||zd&&o["$"+u]instanceof Symbol||(d6.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof V2=="function")for(var c=0;c<i.length;c++)f6.call(t,i[c])&&n.push("["+e(i[c])+"]: "+e(t[i[c]],t));return n}});var zc=D((VDe,v6)=>{"use strict";v6.exports=function(e){return typeof e=="string"||typeof e=="symbol"}});var w6=D((HDe,b6)=>{"use strict";b6.exports=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}});var Es=D((WDe,E6)=>{"use strict";var Wre=w6();E6.exports=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":Wre(e)}});var _h=D((zDe,D6)=>{"use strict";var _6=gt(),zre=Eh(),Jre=zc(),Gre=Es();D6.exports=function(e,r){if(Gre(e)!=="Object")throw new _6("Assertion failed: Type(O) is not Object");if(!Jre(r))throw new _6("Assertion failed: IsPropertyKey(P) is not true, got "+zre(r));return e[r]}});var A6=D((JDe,S6)=>{"use strict";var Xre=gt(),Yre=Eh(),Zre=zc();S6.exports=function(e,r){if(!Zre(r))throw new Xre("Assertion failed: IsPropertyKey(P) is not true, got "+Yre(r));return e[r]}});var iD=D((GDe,P6)=>{"use strict";var C6=Function.prototype.toString,Jd=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,tD,kg;if(typeof Jd=="function"&&typeof Object.defineProperty=="function")try{tD=Object.defineProperty({},"length",{get:function(){throw kg}}),kg={},Jd(function(){throw 42},null,tD)}catch(t){t!==kg&&(Jd=null)}else Jd=null;var Qre=/^\s*class\b/,rD=function(e){try{var r=C6.call(e);return Qre.test(r)}catch{return!1}},eD=function(e){try{return rD(e)?!1:(C6.call(e),!0)}catch{return!1}},Bg=Object.prototype.toString,ene="[object Object]",tne="[object Function]",rne="[object GeneratorFunction]",nne="[object HTMLAllCollection]",ine="[object HTML document.all class]",sne="[object HTMLCollection]",one=typeof Symbol=="function"&&!!Symbol.toStringTag,ane=!(0 in[,]),nD=function(){return!1};typeof document=="object"&&(x6=document.all,Bg.call(x6)===Bg.call(document.all)&&(nD=function(e){if((ane||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=Bg.call(e);return(r===nne||r===ine||r===sne||r===ene)&&e("")==null}catch{}return!1}));var x6;P6.exports=Jd?function(e){if(nD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Jd(e,null,tD)}catch(r){if(r!==kg)return!1}return!rD(e)&&eD(e)}:function(e){if(nD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(one)return eD(e);if(rD(e))return!1;var r=Bg.call(e);return r!==tne&&r!==rne&&!/^\[object HTML/.test(r)?!1:eD(e)}});var Ig=D((XDe,O6)=>{"use strict";O6.exports=iD()});var T6=D((YDe,I6)=>{"use strict";var k6=gt(),une=A6(),cne=Ig(),lne=zc(),B6=Eh();I6.exports=function(e,r){if(!lne(r))throw new k6("Assertion failed: IsPropertyKey(P) is not true");var n=une(e,r);if(n!=null){if(!cne(n))throw new k6(B6(r)+" is not a function: "+B6(n));return n}}});var Tg=D((ZDe,F6)=>{"use strict";var dne=O2();F6.exports=function(){return dne()&&!!Symbol.toStringTag}});var uD=D((QDe,M6)=>{"use strict";var sD=vi(),R6=Tg()(),$6,N6,oD,aD;R6&&($6=sD("Object.prototype.hasOwnProperty"),N6=sD("RegExp.prototype.exec"),oD={},Fg=function(){throw oD},aD={toString:Fg,valueOf:Fg},typeof Symbol.toPrimitive=="symbol"&&(aD[Symbol.toPrimitive]=Fg));var Fg,fne=sD("Object.prototype.toString"),pne=Object.getOwnPropertyDescriptor,hne="[object RegExp]";M6.exports=R6?function(e){if(!e||typeof e!="object")return!1;var r=pne(e,"lastIndex"),n=r&&$6(r,"value");if(!n)return!1;try{N6(e,aD)}catch(s){return s===oD}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:fne(e)===hne}});var cD=D((eSe,j6)=>{"use strict";j6.exports=function(e){return!!e}});var U6=D((tSe,L6)=>{"use strict";var mne=pr(),q6=mne("%Symbol.match%",!0),yne=uD(),gne=cD();L6.exports=function(e){if(!e||typeof e!="object")return!1;if(q6){var r=e[q6];if(typeof r<"u")return gne(r)}return yne(e)}});var Dh=D((rSe,K6)=>{"use strict";var vne=pr(),bne=vne("%String%"),wne=gt();K6.exports=function(e){if(typeof e=="symbol")throw new wne("Cannot convert a Symbol value to a string");return bne(e)}});var Rg=D((nSe,V6)=>{"use strict";var Ene=gt();V6.exports=function(e){if(e==null)throw new Ene(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e}});var W6=D((iSe,H6)=>{"use strict";var Ah=function(){return typeof function(){}.name=="string"},Sh=Object.getOwnPropertyDescriptor;if(Sh)try{Sh([],"length")}catch{Sh=null}Ah.functionsHaveConfigurableNames=function(){if(!Ah()||!Sh)return!1;var e=Sh(function(){},"name");return!!e&&!!e.configurable};var _ne=Function.prototype.bind;Ah.boundFunctionsHaveNames=function(){return Ah()&&typeof _ne=="function"&&function(){}.bind().name!==""};H6.exports=Ah});var lD=D((sSe,J6)=>{"use strict";var z6=_g(),Dne=hh()(),Sne=W6().functionsHaveConfigurableNames(),Ane=gt();J6.exports=function(e,r){if(typeof e!="function")throw new Ane("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||Sne)&&(Dne?z6(e,"name",r,!0,!0):z6(e,"name",r)),e}});var dD=D((oSe,G6)=>{"use strict";var xne=lD(),Cne=gt(),Pne=Object;G6.exports=xne(function(){if(this==null||this!==Pne(this))throw new Cne("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var fD=D((aSe,X6)=>{"use strict";var One=dD(),kne=gu().supportsDescriptors,Bne=Object.getOwnPropertyDescriptor;X6.exports=function(){if(kne&&/a/mig.flags==="gim"){var e=Bne(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return One}});var Q6=D((uSe,Z6)=>{"use strict";var Ine=gu().supportsDescriptors,Tne=fD(),Fne=Object.getOwnPropertyDescriptor,Rne=Object.defineProperty,$ne=TypeError,Y6=Object.getPrototypeOf,Nne=/a/;Z6.exports=function(){if(!Ine||!Y6)throw new $ne("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=Tne(),r=Y6(Nne),n=Fne(r,"flags");return(!n||n.get!==e)&&Rne(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var pD=D((cSe,r4)=>{"use strict";var Mne=gu(),jne=mh(),qne=dD(),e4=fD(),Lne=Q6(),t4=jne(e4());Mne(t4,{getPolyfill:e4,implementation:qne,shim:Lne});r4.exports=t4});var hD=D((lSe,n4)=>{"use strict";n4.exports=function(e){return typeof e=="number"&&e>=55296&&e<=56319}});var mD=D((dSe,i4)=>{"use strict";i4.exports=function(e){return typeof e=="number"&&e>=56320&&e<=57343}});var a4=D((fSe,o4)=>{"use strict";var Une=pr(),Kne=gt(),s4=Une("%String.fromCharCode%"),Vne=hD(),Hne=mD();o4.exports=function(e,r){if(!Vne(e)||!Hne(r))throw new Kne("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return s4(e)+s4(r)}});var p4=D((pSe,f4)=>{"use strict";var u4=gt(),d4=vi(),Wne=hD(),c4=mD(),zne=a4(),Jne=d4("String.prototype.charAt"),l4=d4("String.prototype.charCodeAt");f4.exports=function(e,r){if(typeof e!="string")throw new u4("Assertion failed: `string` must be a String");var n=e.length;if(r<0||r>=n)throw new u4("Assertion failed: `position` must be >= 0, and < the length of `string`");var s=l4(e,r),i=Jne(e,r),o=Wne(s),a=c4(s);if(!o&&!a)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(a||r+1===n)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var u=l4(e,r+1);return c4(u)?{"[[CodePoint]]":zne(s,u),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}});var xh=D((hSe,h4)=>{"use strict";h4.exports=Number.isNaN||function(e){return e!==e}});var yD=D((mSe,m4)=>{"use strict";var Gne=xh();m4.exports=function(t){return(typeof t=="number"||typeof t=="bigint")&&!Gne(t)&&t!==1/0&&t!==-1/0}});var v4=D((ySe,g4)=>{"use strict";var y4=pr(),Xne=y4("%Math.abs%"),Yne=y4("%Math.floor%"),Zne=xh(),Qne=yD();g4.exports=function(e){if(typeof e!="number"||Zne(e)||!Qne(e))return!1;var r=Xne(e);return Yne(r)===r}});var gD=D((gSe,b4)=>{"use strict";b4.exports=Number.MAX_SAFE_INTEGER||9007199254740991});var E4=D((vSe,w4)=>{"use strict";var eie=p4(),tie=v4(),rie=gD(),vD=gt();w4.exports=function(e,r,n){if(typeof e!="string")throw new vD("Assertion failed: `S` must be a String");if(!tie(r)||r<0||r>rie)throw new vD("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof n!="boolean")throw new vD("Assertion failed: `unicode` must be a Boolean");if(!n)return r+1;var s=e.length;if(r+1>=s)return r+1;var i=eie(e,r);return r+i["[[CodeUnitCount]]"]}});var D4=D((bSe,_4)=>{"use strict";var nie=gt();_4.exports=function(e,r){if(typeof r!="boolean")throw new nie("Assertion failed: Type(done) is not Boolean");return{value:e,done:r}}});var $g=D((wSe,S4)=>{"use strict";var iie=gt(),Ch=Vc(),sie={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};S4.exports=function(e){if(!e||typeof e!="object")return!1;for(var r in e)if(Ch(e,r)&&!sie[r])return!1;var n=Ch(e,"[[Value]]")||Ch(e,"[[Writable]]"),s=Ch(e,"[[Get]]")||Ch(e,"[[Set]]");if(n&&s)throw new iie("Property Descriptors may not be both accessor and data descriptors");return!0}});var P4=D((ESe,C4)=>{"use strict";var oie=hh(),A4=ph(),x4=oie.hasArrayLengthDefineBug(),aie=x4&&j2(),uie=vi(),cie=uie("Object.prototype.propertyIsEnumerable");C4.exports=function(e,r,n,s,i,o){if(!A4){if(!e(o)||!o["[[Configurable]]"]||!o["[[Writable]]"]||i in s&&cie(s,i)!==!!o["[[Enumerable]]"])return!1;var a=o["[[Value]]"];return s[i]=a,r(s[i],a)}return x4&&i==="length"&&"[[Value]]"in o&&aie(s)&&s.length!==o["[[Value]]"]?(s.length=o["[[Value]]"],s.length===o["[[Value]]"]):(A4(s,i,n(o)),!0)}});var k4=D((_Se,O4)=>{"use strict";O4.exports=function(e){if(typeof e>"u")return e;var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=!!e["[[Configurable]]"]),r}});var I4=D((DSe,B4)=>{"use strict";var lie=gt(),die=$g(),fie=k4();B4.exports=function(e){if(typeof e<"u"&&!die(e))throw new lie("Assertion failed: `Desc` must be a Property Descriptor");return fie(e)}});var R4=D((SSe,F4)=>{"use strict";var pie=gt(),T4=Vc(),hie=$g();F4.exports=function(e){if(typeof e>"u")return!1;if(!hie(e))throw new pie("Assertion failed: `Desc` must be a Property Descriptor");return!(!T4(e,"[[Value]]")&&!T4(e,"[[Writable]]"))}});var bD=D((ASe,N4)=>{"use strict";var $4=xh();N4.exports=function(e,r){return e===r?e===0?1/e===1/r:!0:$4(e)&&$4(r)}});var q4=D((xSe,j4)=>{"use strict";var go=Vc(),Ng=gt(),mie=Es(),wD=cD(),M4=Ig();j4.exports=function(e){if(mie(e)!=="Object")throw new Ng("ToPropertyDescriptor requires an object");var r={};if(go(e,"enumerable")&&(r["[[Enumerable]]"]=wD(e.enumerable)),go(e,"configurable")&&(r["[[Configurable]]"]=wD(e.configurable)),go(e,"value")&&(r["[[Value]]"]=e.value),go(e,"writable")&&(r["[[Writable]]"]=wD(e.writable)),go(e,"get")){var n=e.get;if(typeof n<"u"&&!M4(n))throw new Ng("getter must be a function");r["[[Get]]"]=n}if(go(e,"set")){var s=e.set;if(typeof s<"u"&&!M4(s))throw new Ng("setter must be a function");r["[[Set]]"]=s}if((go(r,"[[Get]]")||go(r,"[[Set]]"))&&(go(r,"[[Value]]")||go(r,"[[Writable]]")))throw new Ng("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var _D=D((CSe,U4)=>{"use strict";var ED=gt(),L4=$g(),yie=P4(),gie=I4(),vie=R4(),bie=zc(),wie=bD(),Eie=q4(),_ie=Es();U4.exports=function(e,r,n){if(_ie(e)!=="Object")throw new ED("Assertion failed: Type(O) is not Object");if(!bie(r))throw new ED("Assertion failed: IsPropertyKey(P) is not true");var s=L4(n)?n:Eie(n);if(!L4(s))throw new ED("Assertion failed: Desc is not a valid Property Descriptor");return yie(vie,wie,gie,e,r,s)}});var DD=D((PSe,K4)=>{"use strict";K4.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var z4=D((OSe,W4)=>{"use strict";var H4=pr(),Die=H4("%Object.preventExtensions%",!0),Sie=H4("%Object.isExtensible%",!0),V4=DD();W4.exports=Die?function(e){return!V4(e)&&Sie(e)}:function(e){return!V4(e)}});var G4=D((kSe,J4)=>{"use strict";var Ph=gt(),Aie=_D(),xie=z4(),Cie=zc(),Pie=Es();J4.exports=function(e,r,n,s){if(Pie(e)!=="Object")throw new Ph("Assertion failed: `homeObject` is not an Object");if(!Cie(r))throw new Ph("Assertion failed: `key` is not a Property Key or a Private Name");if(typeof n!="function")throw new Ph("Assertion failed: `closure` is not a function");if(typeof s!="boolean")throw new Ph("Assertion failed: `enumerable` is not a Boolean");if(!xie(e))throw new Ph("Assertion failed: `homeObject` is not an ordinary, extensible object, with no non-configurable properties");var i={"[[Value]]":n,"[[Writable]]":!0,"[[Enumerable]]":s,"[[Configurable]]":!0};Aie(e,r,i)}});var Y4=D((BSe,X4)=>{"use strict";X4.exports=function(e,r){for(var n=0;n<e.length;n+=1)r(e[n],n,e)}});var eR=D((ISe,Q4)=>{"use strict";var Z4=pr(),Gd=vi(),Oie=Eh(),kie=gt(),Mg=Z4("%WeakMap%",!0),jg=Z4("%Map%",!0),Bie=Gd("WeakMap.prototype.get",!0),Iie=Gd("WeakMap.prototype.set",!0),Tie=Gd("WeakMap.prototype.has",!0),Fie=Gd("Map.prototype.get",!0),Rie=Gd("Map.prototype.set",!0),$ie=Gd("Map.prototype.has",!0),SD=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},Nie=function(t,e){var r=SD(t,e);return r&&r.value},Mie=function(t,e,r){var n=SD(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},jie=function(t,e){return!!SD(t,e)};Q4.exports=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new kie("Side channel does not contain "+Oie(i))},get:function(i){if(Mg&&i&&(typeof i=="object"||typeof i=="function")){if(e)return Bie(e,i)}else if(jg){if(r)return Fie(r,i)}else if(n)return Nie(n,i)},has:function(i){if(Mg&&i&&(typeof i=="object"||typeof i=="function")){if(e)return Tie(e,i)}else if(jg){if(r)return $ie(r,i)}else if(n)return jie(n,i);return!1},set:function(i,o){Mg&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Mg),Iie(e,i,o)):jg?(r||(r=new jg),Rie(r,i,o)):(n||(n={key:{},next:null}),Mie(n,i,o))}};return s}});var xD=D((TSe,tR)=>{"use strict";var qie=Vc(),Oh=eR()(),va=gt(),AD={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");if(Oh.assert(t),!AD.has(t,e))throw new va("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");var r=Oh.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");var r=Oh.get(t);return!!r&&qie(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new va("`O` is not an object");if(typeof e!="string")throw new va("`slot` must be a string");var n=Oh.get(t);n||(n={},Oh.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(AD);tR.exports=AD});var sR=D((FSe,iR)=>{"use strict";var Lie=pr(),rR=Lie("%Object.create%",!0),nR=gt(),Uie=yg(),Kie=q2(),Vie=Es(),Hie=Y4(),Wie=xD(),zie=B2()();iR.exports=function(e){if(e!==null&&Vie(e)!=="Object")throw new nR("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!Kie(r))throw new nR("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(rR)n=rR(e);else if(zie)n={__proto__:e};else{if(e===null)throw new Uie("native Object.create support is required to create null objects");var s=function(){};s.prototype=e,n=new s}return r.length>0&&Hie(r,function(i){Wie.set(n,i,void 0)}),n}});var aR=D((RSe,oR)=>{"use strict";var CD=gt(),Jie=vi()("RegExp.prototype.exec"),Gie=L2(),Xie=_h(),Yie=Ig(),Zie=Es();oR.exports=function(e,r){if(Zie(e)!=="Object")throw new CD("Assertion failed: `R` must be an Object");if(typeof r!="string")throw new CD("Assertion failed: `S` must be a String");var n=Xie(e,"exec");if(Yie(n)){var s=Gie(n,e,[r]);if(typeof s=="object")return s;throw new CD('"exec" method must return `null` or an Object')}return Jie(e,r)}});var PD=D(($Se,lR)=>{"use strict";var qg=gt(),Qie=zc(),uR=bD(),ese=Es(),cR=function(){try{return delete[].length,!0}catch{return!1}}();lR.exports=function(e,r,n,s){if(ese(e)!=="Object")throw new qg("Assertion failed: `O` must be an Object");if(!Qie(r))throw new qg("Assertion failed: `P` must be a Property Key");if(typeof s!="boolean")throw new qg("Assertion failed: `Throw` must be a Boolean");if(s){if(e[r]=n,cR&&!uR(e[r],n))throw new qg("Attempted to assign to readonly property.");return!0}try{return e[r]=n,cR?uR(e[r],n):!0}catch{return!1}}});var fR=D((NSe,dR)=>{"use strict";dR.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var hR=D((MSe,pR)=>{"use strict";var tse=Date.prototype.getDay,rse=function(e){try{return tse.call(e),!0}catch{return!1}},nse=Object.prototype.toString,ise="[object Date]",sse=Tg()();pR.exports=function(e){return typeof e!="object"||e===null?!1:sse?rse(e):nse.call(e)===ise}});var vR=D((jSe,OD)=>{"use strict";var ose=Object.prototype.toString,ase=Kc()();ase?(mR=Symbol.prototype.toString,yR=/^Symbol\(.*\)$/,gR=function(e){return typeof e.valueOf()!="symbol"?!1:yR.test(mR.call(e))},OD.exports=function(e){if(typeof e=="symbol")return!0;if(ose.call(e)!=="[object Symbol]")return!1;try{return gR(e)}catch{return!1}}):OD.exports=function(e){return!1};var mR,yR,gR});var _R=D((qSe,ER)=>{"use strict";var use=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",kD=fR(),wR=iD(),cse=hR(),bR=vR(),lse=function(e,r){if(typeof e>"u"||e===null)throw new TypeError("Cannot call method on "+e);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],s,i,o;for(o=0;o<n.length;++o)if(s=e[n[o]],wR(s)&&(i=s.call(e),kD(i)))return i;throw new TypeError("No default value")},dse=function(e,r){var n=e[r];if(n!==null&&typeof n<"u"){if(!wR(n))throw new TypeError(n+" returned for property "+r+" of object "+e+" is not a function");return n}};ER.exports=function(e){if(kD(e))return e;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(use&&(Symbol.toPrimitive?n=dse(e,Symbol.toPrimitive):bR(e)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var s=n.call(e,r);if(kD(s))return s;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(cse(e)||bR(e))&&(r="string"),lse(e,r==="default"?"number":r)}});var AR=D((LSe,SR)=>{"use strict";var DR=_R();SR.exports=function(e){return arguments.length>1?DR(e,arguments[1]):DR(e)}});var CR=D((USe,xR)=>{"use strict";var fse=vi(),pse=uD(),hse=fse("RegExp.prototype.exec"),mse=gt();xR.exports=function(e){if(!pse(e))throw new mse("`regex` must be a RegExp");return function(n){return hse(e,n)!==null}}});var BD=D((KSe,kR)=>{"use strict";var yse=Rg(),gse=Dh(),vse=vi(),PR=vse("String.prototype.replace"),OR=/^\s$/.test("\u180E"),bse=OR?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,wse=OR?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;kR.exports=function(){var e=gse(yse(this));return PR(PR(e,bse,""),wse,"")}});var ID=D((VSe,IR)=>{"use strict";var Ese=BD(),BR="\u200B",Xd="\u180E";IR.exports=function(){return String.prototype.trim&&BR.trim()===BR&&Xd.trim()===Xd&&("_"+Xd).trim()==="_"+Xd&&(Xd+"_").trim()===Xd+"_"?String.prototype.trim:Ese}});var FR=D((HSe,TR)=>{"use strict";var _se=gu(),Dse=ID();TR.exports=function(){var e=Dse();return _se(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var MR=D((WSe,NR)=>{"use strict";var Sse=mh(),Ase=gu(),xse=Rg(),Cse=BD(),RR=ID(),Pse=FR(),Ose=Sse(RR()),$R=function(e){return xse(e),Ose(e)};Ase($R,{getPolyfill:RR,implementation:Cse,shim:Pse});NR.exports=$R});var UR=D((zSe,LR)=>{"use strict";var FD=pr(),TD=FD("%Number%"),kse=FD("%RegExp%"),Bse=gt(),jR=FD("%parseInt%"),Ise=vi(),Lg=CR(),qR=Ise("String.prototype.slice"),Tse=Lg(/^0b[01]+$/i),Fse=Lg(/^0o[0-7]+$/i),Rse=Lg(/^[-+]0x[0-9a-f]+$/i),$se=["\x85","\u200B","\uFFFE"].join(""),Nse=new kse("["+$se+"]","g"),Mse=Lg(Nse),jse=MR();LR.exports=function t(e){if(typeof e!="string")throw new Bse("Assertion failed: `argument` is not a String");if(Tse(e))return TD(jR(qR(e,2),2));if(Fse(e))return TD(jR(qR(e,2),8));if(Mse(e)||Rse(e))return NaN;var r=jse(e);return r!==e?t(r):TD(e)}});var WR=D((JSe,HR)=>{"use strict";var qse=pr(),KR=gt(),VR=qse("%Number%"),Lse=DD(),Use=AR(),Kse=UR();HR.exports=function(e){var r=Lse(e)?e:Use(e,VR);if(typeof r=="symbol")throw new KR("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new KR("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?Kse(r):VR(r)}});var JR=D((GSe,zR)=>{"use strict";var Vse=Math.floor;zR.exports=function(e){return typeof e=="bigint"?e:Vse(e)}});var YR=D((XSe,XR)=>{"use strict";var GR=JR(),Hse=gt();XR.exports=function(e){if(typeof e!="number"&&typeof e!="bigint")throw new Hse("argument must be a Number or a BigInt");var r=e<0?-GR(-e):GR(e);return r===0?0:r}});var QR=D((YSe,ZR)=>{"use strict";var Wse=WR(),zse=YR(),Jse=xh(),Gse=yD();ZR.exports=function(e){var r=Wse(e);return Jse(r)||r===0?0:Gse(r)?zse(r):r}});var RD=D((ZSe,t$)=>{"use strict";var e$=gD(),Xse=QR();t$.exports=function(e){var r=Xse(e);return r<=0?0:r>e$?e$:r}});var i$=D((QSe,n$)=>{"use strict";var Yse=pr(),r$=Yse("%Object.defineProperty%",!0),Zse=Tg()(),Qse=Vc(),Ug=Zse?Symbol.toStringTag:null;n$.exports=function(e,r){var n=arguments.length>2&&arguments[2]&&arguments[2].force;Ug&&(n||!Qse(e,Ug))&&(r$?r$(e,Ug,{configurable:!0,enumerable:!1,value:r,writable:!1}):e[Ug]=r)}});var l$=D((eAe,c$)=>{"use strict";var eoe=pr(),toe=Kc()(),kh=gt(),s$=eoe("%IteratorPrototype%",!0),roe=E4(),Kg=D4(),u$=G4(),o$=_h(),noe=sR(),ioe=aR(),soe=PD(),ooe=RD(),aoe=Dh(),uoe=Es(),yn=xD(),coe=i$(),Jc=function(e,r,n,s){if(typeof r!="string")throw new kh("`S` must be a string");if(typeof n!="boolean")throw new kh("`global` must be a boolean");if(typeof s!="boolean")throw new kh("`fullUnicode` must be a boolean");yn.set(this,"[[IteratingRegExp]]",e),yn.set(this,"[[IteratedString]]",r),yn.set(this,"[[Global]]",n),yn.set(this,"[[Unicode]]",s),yn.set(this,"[[Done]]",!1)};s$&&(Jc.prototype=noe(s$));var loe=function(){var e=this;if(uoe(e)!=="Object")throw new kh("receiver must be an object");if(!(e instanceof Jc)||!yn.has(e,"[[IteratingRegExp]]")||!yn.has(e,"[[IteratedString]]")||!yn.has(e,"[[Global]]")||!yn.has(e,"[[Unicode]]")||!yn.has(e,"[[Done]]"))throw new kh('"this" value must be a RegExpStringIterator instance');if(yn.get(e,"[[Done]]"))return Kg(void 0,!0);var r=yn.get(e,"[[IteratingRegExp]]"),n=yn.get(e,"[[IteratedString]]"),s=yn.get(e,"[[Global]]"),i=yn.get(e,"[[Unicode]]"),o=ioe(r,n);if(o===null)return yn.set(e,"[[Done]]",!0),Kg(void 0,!0);if(s){var a=aoe(o$(o,"0"));if(a===""){var u=ooe(o$(r,"lastIndex")),c=roe(n,u,i);soe(r,"lastIndex",c,!0)}return Kg(o,!1)}return yn.set(e,"[[Done]]",!0),Kg(o,!1)};u$(Jc.prototype,"next",loe,!1);toe&&(coe(Jc.prototype,"RegExp String Iterator"),Symbol.iterator&&typeof Jc.prototype[Symbol.iterator]!="function"&&(a$=function(){return this},u$(Jc.prototype,Symbol.iterator,a$,!1)));var a$;c$.exports=function(e,r,n,s){return new Jc(e,r,n,s)}});var f$=D((tAe,d$)=>{"use strict";d$.exports=pr()});var h$=D((rAe,MD)=>{"use strict";var doe=f$(),p$=doe("%Reflect.construct%",!0),Vg=_D();try{Vg({},"",{"[[Get]]":function(){}})}catch{Vg=null}Vg&&p$?($D={},ND={},Vg(ND,"length",{"[[Get]]":function(){throw $D},"[[Enumerable]]":!0}),MD.exports=function(e){try{p$(e,ND)}catch(r){return r===$D}}):MD.exports=function(e){return typeof e=="function"&&!!e.prototype};var $D,ND});var v$=D((nAe,g$)=>{"use strict";var foe=pr(),m$=foe("%Symbol.species%",!0),jD=gt(),poe=h$(),y$=Es();g$.exports=function(e,r){if(y$(e)!=="Object")throw new jD("Assertion failed: Type(O) is not Object");var n=e.constructor;if(typeof n>"u")return r;if(y$(n)!=="Object")throw new jD("O.constructor is not an Object");var s=m$?n[m$]:void 0;if(s==null)return r;if(poe(s))return s;throw new jD("no constructor found")}});var D$=D((iAe,_$)=>{"use strict";var hoe=l$(),w$=_h(),moe=PD(),yoe=v$(),goe=RD(),E$=Dh(),voe=Es(),boe=pD(),woe=lD(),Eoe=vi(),_oe=pr(),Doe=gt(),b$=Eoe("String.prototype.indexOf"),qD=_oe("%RegExp%"),Soe="flags"in qD.prototype,Aoe=function(e,r){var n,s="flags"in r?w$(r,"flags"):E$(boe(r));return Soe&&typeof s=="string"?n=new e(r,s):e===qD?n=new e(r.source,s):n=new e(r,s),{flags:s,matcher:n}},xoe=woe(function(e){var r=this;if(voe(r)!=="Object")throw new Doe('"this" value must be an Object');var n=E$(e),s=yoe(r,qD),i=Aoe(s,r),o=i.flags,a=i.matcher,u=goe(w$(r,"lastIndex"));moe(a,"lastIndex",u,!0);var c=b$(o,"g")>-1,l=b$(o,"u")>-1;return hoe(a,n,c,l)},"[Symbol.matchAll]",!0);_$.exports=xoe});var LD=D((sAe,S$)=>{"use strict";var Coe=Kc()(),Poe=D$();S$.exports=function(){return!Coe||typeof Symbol.matchAll!="symbol"||typeof RegExp.prototype[Symbol.matchAll]!="function"?Poe:RegExp.prototype[Symbol.matchAll]}});var UD=D((oAe,B$)=>{"use strict";var A$=L2(),Ooe=_h(),koe=T6(),O$=U6(),x$=Dh(),C$=Rg(),Boe=vi(),Ioe=Kc()(),Toe=pD(),Foe=pr(),Roe=gt(),k$=Foe("%RegExp%"),$oe=Boe("String.prototype.indexOf"),Noe=LD(),P$=function(e){var r=Noe();if(Ioe&&typeof Symbol.matchAll=="symbol"){var n=koe(e,Symbol.matchAll);return n===k$.prototype[Symbol.matchAll]&&n!==r?r:n}if(O$(e))return r};B$.exports=function(e){var r=C$(this);if(typeof e<"u"&&e!==null){var n=O$(e);if(n){var s="flags"in e?Ooe(e,"flags"):Toe(e);if(C$(s),$oe(x$(s),"g")<0)throw new Roe("matchAll requires a global regular expression")}var i=P$(e);if(typeof i<"u")return A$(i,e,[r])}var o=x$(r),a=new k$(e,"g");return A$(P$(a),a,[o])}});var KD=D((aAe,I$)=>{"use strict";var Moe=UD();I$.exports=function(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch{return String.prototype.matchAll}return Moe}});var $$=D((uAe,R$)=>{"use strict";var VD=gu(),joe=Kc()(),T$=Eg(),qoe=KD(),Loe=LD(),F$=Object.defineProperty;R$.exports=function(){var e=qoe();if(VD(String.prototype,{matchAll:e},{matchAll:function(){return String.prototype.matchAll!==e}}),joe){var r=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(VD(Symbol,{matchAll:r},{matchAll:function(){return Symbol.matchAll!==r}}),F$&&T$){var n=T$(Symbol,r);(!n||n.configurable)&&F$(Symbol,r,{configurable:!1,enumerable:!1,value:r,writable:!1})}var s=Loe(),i={};i[r]=s;var o={};o[r]=function(){return RegExp.prototype[r]!==s},VD(RegExp.prototype,i,o)}return e}});var HD=D((cAe,j$)=>{"use strict";var Uoe=mh(),Koe=gu(),N$=UD(),Voe=KD(),Hoe=$$(),M$=Uoe(N$);Koe(M$,{getPolyfill:Voe,implementation:N$,shim:Hoe});j$.exports=M$});var WD=D(Hg=>{"use strict";Object.defineProperty(Hg,"__esModule",{value:!0});Hg.JsonPathUtils=void 0;var Woe=zi(),Eu=class{static extractInputField(e,r){let n=[];if(r){for(let s of r)if(n=Woe.JSONPath.nodes(e,s),n.length)break}return n}static changePropertyNameRecursively(e,r,n){let s=Eu.extractInputField(e,["$.."+r]);for(let i of s)this.copyResultPathToDestinationDefinition(i.path,e,n)}static copyResultPathToDestinationDefinition(e,r,n){let s=r;for(let i=1;i<e.length;i++)if(i+1<e.length&&(s=s[e[i]]),e.length==i+1){s[n]=s[e[i]],delete s[e[i]];break}}static changeSpecialPathsRecursively(e){let r=Eu.extractInputField(e,["$..path"]);for(let n of r)this.modifyPathsWithSpecialCharacter(n.path,e)}static modifyPathsWithSpecialCharacter(e,r){let n=r;for(let s=1;s<e.length;s++)if(s+1<e.length&&(n=n[e[s]]),e.length==s+1){let i=n[e[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[e[s]]=o;break}}static modifyPathWithSpecialCharacter(e){let r=this.matchAll(e,this.REGEX_PATH);return e=this.modifyPathRecursive(r,e),e}static modifyPathRecursive(e,r){let n=e.next(),s=!1;for(;n&&!n.done&&!s;){let i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;let o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r));n=e.next()}return r}};Hg.JsonPathUtils=Eu;Eu.matchAll=HD();Eu.REGEX_PATH=/@\w+/g});var zD=D(Wg=>{"use strict";Object.defineProperty(Wg,"__esModule",{value:!0});Wg.ObjectUtils=void 0;var Bh=class{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;Bh.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}static getDistinctFieldInObject(e,r){let n=e.map(s=>s[r]);return Array.from(new Set(n))}};Wg.ObjectUtils=Bh});var q$=D(zg=>{"use strict";Object.defineProperty(zg,"__esModule",{value:!0});zg.ObjectValidationUtils=void 0;var JD=class{static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static isValidDIDURI(e){let r="[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]",n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+r+")*)?";return""+r+r,new RegExp(n).test(e)}};zg.ObjectValidationUtils=JD});var ZD=D(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.PEVersion=ba.InternalPresentationDefinitionV2=ba.InternalPresentationDefinitionV1=void 0;var GD=class{constructor(e,r,n,s,i,o){this.id=e,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return YD.v1}};ba.InternalPresentationDefinitionV1=GD;var XD=class{constructor(e,r,n,s,i,o,a){this.format=n,this.frame=s,this.id=e,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return YD.v2}};ba.InternalPresentationDefinitionV2=XD;var YD;(function(t){t.v1="v1",t.v2="v2"})(YD=ba.PEVersion||(ba.PEVersion={}))});var U$=D(Gg=>{"use strict";Object.defineProperty(Gg,"__esModule",{value:!0});Gg.SSITypesBuilder=void 0;var L$=G0(),Jg=Ji(),QD=ZD(),_u=class{static modelEntityToInternalPresentationDefinitionV1(e){let r=_u.createCopyAndModifyPresentationDefinition(e);return new QD.InternalPresentationDefinitionV1(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(e){let r=_u.createCopyAndModifyPresentationDefinition(e);return new QD.InternalPresentationDefinitionV2(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e));return Jg.JsonPathUtils.changePropertyNameRecursively(r,"_const","const"),Jg.JsonPathUtils.changePropertyNameRecursively(r,"_enum","enum"),Jg.JsonPathUtils.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(e){return L$.CredentialMapper.toWrappedVerifiablePresentation(e)}static mapExternalVerifiableCredentialsToWrappedVcs(e){return L$.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(e)?e:[e])}static toInternalPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e)),n=(0,Jg.definitionVersionDiscovery)(r);if(n.error)throw n.error;return n.version==QD.PEVersion.v1?_u.modelEntityToInternalPresentationDefinitionV1(r):_u.modelEntityInternalPresentationDefinitionV2(r)}};Gg.SSITypesBuilder=_u});var Gc=D(wa=>{"use strict";var zoe=wa&&wa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),eS=wa&&wa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zoe(e,t,r)};Object.defineProperty(wa,"__esModule",{value:!0});eS(gs(),wa);eS(ZD(),wa);eS(U$(),wa)});var iS=D((yAe,nS)=>{"use strict";nS.exports=rS;nS.exports.default=rS;var zr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},rr={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},K$=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$","u"),V$=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),H$=new RegExp("additionalProperties","u");function Yg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(K$.test(a)||V$.test(a)||H$.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:rr,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(K$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].required,parentSchema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items.type,parentSchema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.type,parentSchema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].type,parentSchema:rr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(V$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:rr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(H$.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:rr.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:rr.type,parentSchema:rr,data:t};i===null?i=[a]:i.push(a),o++}return Yg.errors=i,o===0}var Pe={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},tS={validate:Ih};function Ih(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.type,parentSchema:Pe,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Pe.oneOf[0].required,parentSchema:Pe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Pe.oneOf[0].required,parentSchema:Pe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.name.type,parentSchema:Pe.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.purpose.type,parentSchema:Pe.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.rule.type,parentSchema:Pe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Pe.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Pe.oneOf[0].properties.rule.enum,parentSchema:Pe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.count.type,parentSchema:Pe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Pe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.min.type,parentSchema:Pe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.max.type,parentSchema:Pe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let p={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.from.type,parentSchema:Pe.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Pe.oneOf[1].required,parentSchema:Pe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Pe.oneOf[1].required,parentSchema:Pe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.name.type,parentSchema:Pe.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.purpose.type,parentSchema:Pe.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.rule.type,parentSchema:Pe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Pe.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Pe.oneOf[1].properties.rule.enum,parentSchema:Pe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.count.type,parentSchema:Pe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Pe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.min.type,parentSchema:Pe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.max.type,parentSchema:Pe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let g={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Pe.oneOf[1].properties.from_nested,data:f};i===null?i=[g]:i.push(g),o++}let p=f.length;for(let g=0;g<p;g++)tS.validate(f[g],{instancePath:e+"/from_nested/"+g,parentData:f,parentDataProperty:g,rootData:s})||(i=i===null?tS.validate.errors:i.concat(tS.validate.errors),o=i.length)}else{let p={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.oneOf[1].properties.from_nested.type,parentSchema:Pe.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Pe.oneOf,parentSchema:Pe,data:t};i===null?i=[f]:i.push(f),o++}return Ih.errors=i,o===0}var oe={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},Ea={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function Zg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.uri===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:Ea.required,parentSchema:Ea,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="uri"||a==="required")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Ea,data:t};i===null?i=[u]:i.push(u),o++}if(t.uri!==void 0){let a=t.uri;if(typeof a!="string"){let u={instancePath:e+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ea.properties.uri.type,parentSchema:Ea.properties.uri,data:a};i===null?i=[u]:i.push(u),o++}}if(t.required!==void 0){let a=t.required;if(typeof a!="boolean"){let u={instancePath:e+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Ea.properties.required.type,parentSchema:Ea.properties.required,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ea.type,parentSchema:Ea,data:t};i===null?i=[a]:i.push(a),o++}return Zg.errors=i,o===0}var Xg={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function Qg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Xg.properties.manifest.type,parentSchema:Xg.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Xg.type,parentSchema:Xg,data:t};i===null?i=[a]:i.push(a),o++}return Qg.errors=i,o===0}var wt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},lt={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},Joe=Object.prototype.hasOwnProperty;function Xc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:lt.required,parentSchema:lt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Joe.call(lt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:lt,data:t};i===null?i=[u]:i.push(u),o++}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.properties.type.type,parentSchema:lt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.properties.format.type,parentSchema:lt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.properties.pattern.type,parentSchema:lt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0){let a=t.minimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:lt.properties.minimum.type},message:"must be number,string",schema:lt.properties.minimum.type,parentSchema:lt.properties.minimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minLength!==void 0){let a=t.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.properties.minLength.type,parentSchema:lt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.properties.maxLength.type,parentSchema:lt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMinimum!==void 0){let a=t.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:lt.properties.exclusiveMinimum.type},message:"must be number,string",schema:lt.properties.exclusiveMinimum.type,parentSchema:lt.properties.exclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0){let a=t.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:lt.properties.exclusiveMaximum.type},message:"must be number,string",schema:lt.properties.exclusiveMaximum.type,parentSchema:lt.properties.exclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0){let a=t.maximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:lt.properties.maximum.type},message:"must be number,string",schema:lt.properties.maximum.type,parentSchema:lt.properties.maximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.const!==void 0){let a=t.const;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:lt.properties.const.type},message:"must be number,string",schema:lt.properties.const.type,parentSchema:lt.properties.const,data:a};i===null?i=[u]:i.push(u),o++}}if(t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="number"&&typeof l!="string"){let d={instancePath:e+"/enum/"+c,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:lt.properties.enum.items.type},message:"must be number,string",schema:lt.properties.enum.items.type,parentSchema:lt.properties.enum.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:lt.properties.enum.type,parentSchema:lt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.not!==void 0){let a=t.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){let u={instancePath:e+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:lt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}else{let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:lt.properties.not.type,parentSchema:lt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:lt.type,parentSchema:lt,data:t};i===null?i=[a]:i.push(a),o++}return Xc.errors=i,o===0}function ev(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:wt.type,parentSchema:wt,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:wt.oneOf[0].required,parentSchema:wt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:wt.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[0].properties.id.type,parentSchema:wt.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let g=0;g<p;g++){let w=f[g];if(typeof w!="string"){let P={instancePath:e+"/path/"+g,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[0].properties.path.items.type,parentSchema:wt.oneOf[0].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:wt.oneOf[0].properties.path.type,parentSchema:wt.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[0].properties.purpose.type,parentSchema:wt.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}t.filter!==void 0&&(Xc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Xc.errors:i.concat(Xc.errors),o=i.length))}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:wt.oneOf[1].required,parentSchema:wt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:wt.oneOf[1].required,parentSchema:wt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:wt.oneOf[1].required,parentSchema:wt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter"||f==="predicate")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:wt.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.id.type,parentSchema:wt.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let g=0;g<p;g++){let w=f[g];if(typeof w!="string"){let P={instancePath:e+"/path/"+g,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.path.items.type,parentSchema:wt.oneOf[1].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:wt.oneOf[1].properties.path.type,parentSchema:wt.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.purpose.type,parentSchema:wt.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(Xc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Xc.errors:i.concat(Xc.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.predicate.type,parentSchema:wt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:wt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:wt.oneOf[1].properties.predicate.enum,parentSchema:wt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:wt.oneOf,parentSchema:wt,data:t};i===null?i=[f]:i.push(f),o++}return ev.errors=i,o===0}function tv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:oe.required,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}if(t.schema===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:oe.required,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:oe,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.id.type,parentSchema:oe.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.name.type,parentSchema:oe.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.purpose.type,parentSchema:oe.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.group.items.type,parentSchema:oe.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.group.type,parentSchema:oe.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.schema!==void 0){let a=t.schema;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Zg(a[c],{instancePath:e+"/schema/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Zg.errors:i.concat(Zg.errors),o=i.length)}else{let u={instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.schema.type,parentSchema:oe.properties.schema,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Qg(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Qg.errors:i.concat(Qg.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.issuance.type,parentSchema:oe.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.limit_disclosure.type,parentSchema:oe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.limit_disclosure.enum,parentSchema:oe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.active.type,parentSchema:oe.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.type,parentSchema:oe.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)ev(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?ev.errors:i.concat(ev.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.fields.type,parentSchema:oe.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.subject_is_issuer.type,parentSchema:oe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.subject_is_issuer.enum,parentSchema:oe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:oe.properties.constraints.properties.is_holder.items.required,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:oe.properties.constraints.properties.is_holder.items.required,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let g=h[p];if(typeof g!="string"){let w={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.field_id.items,data:g};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.is_holder.items.type,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.is_holder.type,parentSchema:oe.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:oe.properties.constraints.properties.same_subject.items.required,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:oe.properties.constraints.properties.same_subject.items.required,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let g=h[p];if(typeof g!="string"){let w={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.field_id.items,data:g};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.same_subject.items.type,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.same_subject.type,parentSchema:oe.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.type,parentSchema:oe.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.type,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}return tv.errors=i,o===0}function rS(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:zr.properties.presentation_definition.required,parentSchema:zr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:zr.properties.presentation_definition.required,parentSchema:zr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:zr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:zr.properties.presentation_definition.properties.id.type,parentSchema:zr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:zr.properties.presentation_definition.properties.name.type,parentSchema:zr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:zr.properties.presentation_definition.properties.purpose.type,parentSchema:zr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(Yg(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?Yg.errors:i.concat(Yg.errors),o=i.length)),a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Ih(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Ih.errors:i.concat(Ih.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:zr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:zr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)tv(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?tv.errors:i.concat(tv.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:zr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:zr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:zr.properties.presentation_definition.type,parentSchema:zr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:zr.type,parentSchema:zr,data:t};i===null?i=[a]:i.push(a),o++}return rS.errors=i,o===0}});var fS=D((gAe,dS)=>{"use strict";dS.exports=lS;dS.exports.default=lS;var Ar={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},nr={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},W$=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$","u"),z$=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),J$=new RegExp("additionalProperties","u");function Qc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(W$.test(a)||z$.test(a)||J$.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:nr,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(W$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].required,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items.type,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.type,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].type,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(z$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(J$.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:nr.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nr.type,parentSchema:nr,data:t};i===null?i=[a]:i.push(a),o++}return Qc.errors=i,o===0}var Oe={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},sS={validate:Fh};function Fh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Oe.type,parentSchema:Oe,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Oe.oneOf[0].required,parentSchema:Oe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Oe.oneOf[0].required,parentSchema:Oe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Oe.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.name.type,parentSchema:Oe.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.purpose.type,parentSchema:Oe.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.rule.type,parentSchema:Oe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Oe.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Oe.oneOf[0].properties.rule.enum,parentSchema:Oe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[0].properties.count.type,parentSchema:Oe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Oe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[0].properties.min.type,parentSchema:Oe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[0].properties.max.type,parentSchema:Oe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let p={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.from.type,parentSchema:Oe.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Oe.oneOf[1].required,parentSchema:Oe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Oe.oneOf[1].required,parentSchema:Oe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Oe.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[1].properties.name.type,parentSchema:Oe.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[1].properties.purpose.type,parentSchema:Oe.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[1].properties.rule.type,parentSchema:Oe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Oe.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Oe.oneOf[1].properties.rule.enum,parentSchema:Oe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[1].properties.count.type,parentSchema:Oe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Oe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[1].properties.min.type,parentSchema:Oe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[1].properties.max.type,parentSchema:Oe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let g={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Oe.oneOf[1].properties.from_nested,data:f};i===null?i=[g]:i.push(g),o++}let p=f.length;for(let g=0;g<p;g++)sS.validate(f[g],{instancePath:e+"/from_nested/"+g,parentData:f,parentDataProperty:g,rootData:s})||(i=i===null?sS.validate.errors:i.concat(sS.validate.errors),o=i.length)}else{let p={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Oe.oneOf[1].properties.from_nested.type,parentSchema:Oe.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Oe.oneOf,parentSchema:Oe,data:t};i===null?i=[f]:i.push(f),o++}return Fh.errors=i,o===0}var ae={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},rv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function nv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:rv.properties.manifest.type,parentSchema:rv.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:rv.type,parentSchema:rv,data:t};i===null?i=[a]:i.push(a),o++}return nv.errors=i,o===0}var ze={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},we={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},oS={type:"integer",minimum:0};function wi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t))){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:oS.type,parentSchema:oS,data:t};i===null?i=[a]:i.push(a),o++}if(typeof t=="number"&&(t<0||isNaN(t))){let a={instancePath:e,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:oS,data:t};i===null?i=[a]:i.push(a),o++}return wi.errors=i,o===0}function vo(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return wi(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?wi.errors:i.concat(wi.errors),o=i.length),vo.errors=i,o===0}var aS={type:"array",minItems:1,items:{$ref:"#"}},uS={validate:je};function bi(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){if(t.length<1){let u={instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:aS,data:t};i===null?i=[u]:i.push(u),o++}let a=t.length;for(let u=0;u<a;u++)uS.validate(t[u],{instancePath:e+"/"+u,parentData:t,parentDataProperty:u,rootData:s})||(i=i===null?uS.validate.errors:i.concat(uS.validate.errors),o=i.length)}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:aS.type,parentSchema:aS,data:t};i===null?i=[a]:i.push(a),o++}return bi.errors=i,o===0}var Th={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function Yc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){let a=t.length;for(let l=0;l<a;l++){let d=t[l];if(typeof d!="string"){let h={instancePath:e+"/"+l,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Th.items.type,parentSchema:Th.items,data:d};i===null?i=[h]:i.push(h),o++}}let u=t.length,c;if(u>1){let l={};for(;u--;){let d=t[u];if(typeof d=="string"){if(typeof l[d]=="number"){c=l[d];let h={instancePath:e,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:u,j:c},message:"must NOT have duplicate items (items ## "+c+" and "+u+" are identical)",schema:!0,parentSchema:Th,data:t};i===null?i=[h]:i.push(h),o++;break}l[d]=u}}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Th.type,parentSchema:Th,data:t};i===null?i=[a]:i.push(a),o++}return Yc.errors=i,o===0}var cS={enum:["array","boolean","integer","null","number","object","string"]};function Zc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t==="array"||t==="boolean"||t==="integer"||t==="null"||t==="number"||t==="object"||t==="string")){let a={instancePath:e,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:cS.enum},message:"must be equal to one of the allowed values",schema:cS.enum,parentSchema:cS,data:t};i===null?i=[a]:i.push(a),o++}return Zc.errors=i,o===0}var G$=kd().default;function je(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean"){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:we.type},message:"must be object,boolean",schema:we.type,parentSchema:we,data:t};i===null?i=[d]:i.push(d),o++}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let d=t.$id;if(typeof d!="string"){let h={instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$id.type,parentSchema:we.properties.$id,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$schema!==void 0){let d=t.$schema;if(typeof d!="string"){let h={instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$schema.type,parentSchema:we.properties.$schema,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$ref!==void 0){let d=t.$ref;if(typeof d!="string"){let h={instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$ref.type,parentSchema:we.properties.$ref,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$comment!==void 0){let d=t.$comment;if(typeof d!="string"){let h={instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$comment.type,parentSchema:we.properties.$comment,data:d};i===null?i=[h]:i.push(h),o++}}if(t.title!==void 0){let d=t.title;if(typeof d!="string"){let h={instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.title.type,parentSchema:we.properties.title,data:d};i===null?i=[h]:i.push(h),o++}}if(t.description!==void 0){let d=t.description;if(typeof d!="string"){let h={instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.description.type,parentSchema:we.properties.description,data:d};i===null?i=[h]:i.push(h),o++}}if(t.readOnly!==void 0){let d=t.readOnly;if(typeof d!="boolean"){let h={instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:we.properties.readOnly.type,parentSchema:we.properties.readOnly,data:d};i===null?i=[h]:i.push(h),o++}}if(t.examples!==void 0){let d=t.examples;if(!Array.isArray(d)){let h={instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.examples.type,parentSchema:we.properties.examples,data:d};i===null?i=[h]:i.push(h),o++}}if(t.multipleOf!==void 0){let d=t.multipleOf;if(typeof d=="number"){if(d<=0||isNaN(d)){let h={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:we.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}else{let h={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.multipleOf.type,parentSchema:we.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}if(t.maximum!==void 0){let d=t.maximum;if(typeof d!="number"){let h={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.maximum.type,parentSchema:we.properties.maximum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.exclusiveMaximum!==void 0){let d=t.exclusiveMaximum;if(typeof d!="number"){let h={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.exclusiveMaximum.type,parentSchema:we.properties.exclusiveMaximum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.minimum!==void 0){let d=t.minimum;if(typeof d!="number"){let h={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.minimum.type,parentSchema:we.properties.minimum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.exclusiveMinimum!==void 0){let d=t.exclusiveMinimum;if(typeof d!="number"){let h={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.exclusiveMinimum.type,parentSchema:we.properties.exclusiveMinimum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.maxLength!==void 0&&(wi(t.maxLength,{instancePath:e+"/maxLength",parentData:t,parentDataProperty:"maxLength",rootData:s})||(i=i===null?wi.errors:i.concat(wi.errors),o=i.length)),t.minLength!==void 0&&(vo(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?vo.errors:i.concat(vo.errors),o=i.length)),t.pattern!==void 0){let d=t.pattern;if(typeof d!="string"){let h={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.pattern.type,parentSchema:we.properties.pattern,data:d};i===null?i=[h]:i.push(h),o++}}if(t.additionalItems!==void 0&&(je(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.items!==void 0){let d=t.items,h=o,f=!1,p=o;je(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length);var a=p===o;if(f=f||a,!f){let g=o;bi(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?bi.errors:i.concat(bi.errors),o=i.length);var a=g===o;f=f||a}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{let g={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.items.anyOf,parentSchema:we.properties.items,data:d};i===null?i=[g]:i.push(g),o++}}if(t.maxItems!==void 0&&(wi(t.maxItems,{instancePath:e+"/maxItems",parentData:t,parentDataProperty:"maxItems",rootData:s})||(i=i===null?wi.errors:i.concat(wi.errors),o=i.length)),t.minItems!==void 0&&(vo(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?vo.errors:i.concat(vo.errors),o=i.length)),t.uniqueItems!==void 0){let d=t.uniqueItems;if(typeof d!="boolean"){let h={instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:we.properties.uniqueItems.type,parentSchema:we.properties.uniqueItems,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contains!==void 0&&(je(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.maxProperties!==void 0&&(wi(t.maxProperties,{instancePath:e+"/maxProperties",parentData:t,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?wi.errors:i.concat(wi.errors),o=i.length)),t.minProperties!==void 0&&(vo(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?vo.errors:i.concat(vo.errors),o=i.length)),t.required!==void 0&&(Yc(t.required,{instancePath:e+"/required",parentData:t,parentDataProperty:"required",rootData:s})||(i=i===null?Yc.errors:i.concat(Yc.errors),o=i.length)),t.additionalProperties!==void 0&&(je(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.definitions!==void 0){let d=t.definitions;if(d&&typeof d=="object"&&!Array.isArray(d))for(let h in d)je(d[h],{instancePath:e+"/definitions/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length);else{let h={instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.definitions.type,parentSchema:we.properties.definitions,data:d};i===null?i=[h]:i.push(h),o++}}if(t.properties!==void 0){let d=t.properties;if(d&&typeof d=="object"&&!Array.isArray(d))for(let h in d)je(d[h],{instancePath:e+"/properties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length);else{let h={instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.properties.type,parentSchema:we.properties.properties,data:d};i===null?i=[h]:i.push(h),o++}}if(t.patternProperties!==void 0){let d=t.patternProperties;if(d&&typeof d=="object"&&!Array.isArray(d)){for(let h in d){var u=o===o;if(!u){let p={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:h},message:"property name must be valid",schema:we.properties.patternProperties.propertyNames,parentSchema:we.properties.patternProperties,data:d};i===null?i=[p]:i.push(p),o++}}for(let h in d)je(d[h],{instancePath:e+"/patternProperties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)}else{let h={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.patternProperties.type,parentSchema:we.properties.patternProperties,data:d};i===null?i=[h]:i.push(h),o++}}if(t.dependencies!==void 0){let d=t.dependencies;if(d&&typeof d=="object"&&!Array.isArray(d))for(let h in d){let f=d[h],p=o,g=!1,w=o;je(f,{instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length);var c=w===o;if(g=g||c,!g){let P=o;Yc(f,{instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?Yc.errors:i.concat(Yc.errors),o=i.length);var c=P===o;g=g||c}if(g)o=p,i!==null&&(p?i.length=p:i=null);else{let P={instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.dependencies.additionalProperties.anyOf,parentSchema:we.properties.dependencies.additionalProperties,data:f};i===null?i=[P]:i.push(P),o++}}else{let h={instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.dependencies.type,parentSchema:we.properties.dependencies,data:d};i===null?i=[h]:i.push(h),o++}}if(t.propertyNames!==void 0&&(je(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.enum!==void 0){let d=t.enum;if(Array.isArray(d)){if(d.length<1){let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:we.properties.enum,data:d};i===null?i=[p]:i.push(p),o++}let h=d.length,f;if(h>1){e:for(;h--;)for(f=h;f--;)if(G$(d[h],d[f])){let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:h,j:f},message:"must NOT have duplicate items (items ## "+f+" and "+h+" are identical)",schema:!0,parentSchema:we.properties.enum,data:d};i===null?i=[p]:i.push(p),o++;break e}}}else{let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.enum.type,parentSchema:we.properties.enum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.type!==void 0){let d=t.type,h=o,f=!1,p=o;Zc(d,{instancePath:e+"/type",parentData:t,parentDataProperty:"type",rootData:s})||(i=i===null?Zc.errors:i.concat(Zc.errors),o=i.length);var l=p===o;if(f=f||l,!f){let g=o;if(Array.isArray(d)){if(d.length<1){let k={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[k]:i.push(k),o++}let P=d.length;for(let k=0;k<P;k++)Zc(d[k],{instancePath:e+"/type/"+k,parentData:d,parentDataProperty:k,rootData:s})||(i=i===null?Zc.errors:i.concat(Zc.errors),o=i.length);let C=d.length,v;if(C>1){e:for(;C--;)for(v=C;v--;)if(G$(d[C],d[v])){let k={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:C,j:v},message:"must NOT have duplicate items (items ## "+v+" and "+C+" are identical)",schema:!0,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[k]:i.push(k),o++;break e}}}else{let P={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.type.anyOf[1].type,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[P]:i.push(P),o++}var l=g===o;f=f||l}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{let g={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.type.anyOf,parentSchema:we.properties.type,data:d};i===null?i=[g]:i.push(g),o++}}if(t.format!==void 0){let d=t.format;if(typeof d!="string"){let h={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.format.type,parentSchema:we.properties.format,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contentMediaType!==void 0){let d=t.contentMediaType;if(typeof d!="string"){let h={instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.contentMediaType.type,parentSchema:we.properties.contentMediaType,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contentEncoding!==void 0){let d=t.contentEncoding;if(typeof d!="string"){let h={instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.contentEncoding.type,parentSchema:we.properties.contentEncoding,data:d};i===null?i=[h]:i.push(h),o++}}t.if!==void 0&&(je(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.then!==void 0&&(je(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.else!==void 0&&(je(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.allOf!==void 0&&(bi(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?bi.errors:i.concat(bi.errors),o=i.length)),t.anyOf!==void 0&&(bi(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?bi.errors:i.concat(bi.errors),o=i.length)),t.oneOf!==void 0&&(bi(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?bi.errors:i.concat(bi.errors),o=i.length)),t.not!==void 0&&(je(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length))}return je.errors=i,o===0}function iv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ze.type,parentSchema:ze,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:ze.oneOf[0].required,parentSchema:ze.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="name")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ze.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.id.type,parentSchema:ze.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let g=0;g<p;g++){let w=f[g];if(typeof w!="string"){let P={instancePath:e+"/path/"+g,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.path.items.type,parentSchema:ze.oneOf[0].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ze.oneOf[0].properties.path.type,parentSchema:ze.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.purpose.type,parentSchema:ze.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let p={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ze.oneOf[0].properties.intent_to_retain.type,parentSchema:ze.oneOf[0].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(je(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.name.type,parentSchema:ze.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="predicate"||f==="name")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ze.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.id.type,parentSchema:ze.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let g=0;g<p;g++){let w=f[g];if(typeof w!="string"){let P={instancePath:e+"/path/"+g,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.path.items.type,parentSchema:ze.oneOf[1].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ze.oneOf[1].properties.path.type,parentSchema:ze.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.purpose.type,parentSchema:ze.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let p={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ze.oneOf[1].properties.intent_to_retain.type,parentSchema:ze.oneOf[1].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(je(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?je.errors:i.concat(je.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.predicate.type,parentSchema:ze.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:ze.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:ze.oneOf[1].properties.predicate.enum,parentSchema:ze.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.name.type,parentSchema:ze.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:ze.oneOf,parentSchema:ze,data:t};i===null?i=[f]:i.push(f),o++}return iv.errors=i,o===0}function sv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:ae.required,parentSchema:ae,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ae,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.id.type,parentSchema:ae.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.name.type,parentSchema:ae.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.purpose.type,parentSchema:ae.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)nv(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?nv.errors:i.concat(nv.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.issuance.type,parentSchema:ae.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.group.items.type,parentSchema:ae.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.group.type,parentSchema:ae.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0&&(Qc(t.format,{instancePath:e+"/format",parentData:t,parentDataProperty:"format",rootData:s})||(i=i===null?Qc.errors:i.concat(Qc.errors),o=i.length)),t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.limit_disclosure.type,parentSchema:ae.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.limit_disclosure.enum,parentSchema:ae.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.active.type,parentSchema:ae.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.type,parentSchema:ae.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)iv(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?iv.errors:i.concat(iv.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.fields.type,parentSchema:ae.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.subject_is_issuer.type,parentSchema:ae.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.subject_is_issuer.enum,parentSchema:ae.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ae.properties.constraints.properties.is_holder.items.required,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ae.properties.constraints.properties.is_holder.items.required,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let g=h[p];if(typeof g!="string"){let w={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.field_id.items,data:g};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.is_holder.items.type,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.is_holder.type,parentSchema:ae.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ae.properties.constraints.properties.same_subject.items.required,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ae.properties.constraints.properties.same_subject.items.required,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let g=h[p];if(typeof g!="string"){let w={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.field_id.items,data:g};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.same_subject.items.type,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.same_subject.type,parentSchema:ae.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.type,parentSchema:ae.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.type,parentSchema:ae,data:t};i===null?i=[a]:i.push(a),o++}return sv.errors=i,o===0}function lS(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Ar.properties.presentation_definition.required,parentSchema:Ar.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Ar.properties.presentation_definition.required,parentSchema:Ar.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="frame"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Ar.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ar.properties.presentation_definition.properties.id.type,parentSchema:Ar.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ar.properties.presentation_definition.properties.name.type,parentSchema:Ar.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ar.properties.presentation_definition.properties.purpose.type,parentSchema:Ar.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(Qc(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?Qc.errors:i.concat(Qc.errors),o=i.length)),a.frame!==void 0){let u=a.frame;if(!(u&&typeof u=="object"&&!Array.isArray(u))){let c={instancePath:e+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ar.properties.presentation_definition.properties.frame.type,parentSchema:Ar.properties.presentation_definition.properties.frame,data:u};i===null?i=[c]:i.push(c),o++}}if(a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Fh(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Fh.errors:i.concat(Fh.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ar.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Ar.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)sv(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?sv.errors:i.concat(sv.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ar.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Ar.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ar.properties.presentation_definition.type,parentSchema:Ar.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ar.type,parentSchema:Ar,data:t};i===null?i=[a]:i.push(a),o++}return lS.errors=i,o===0}});var Q$=D(An=>{"use strict";var Z$=An&&An.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(An,"__esModule",{value:!0});An.filterToRestrictedDIDs=An.isRestrictedDID=An.uniformDIDMethods=An.definitionVersionDiscovery=An.getIssuerString=An.getSubjectIdsAsString=void 0;var X$=Gc(),Goe=Z$(iS()),Xoe=Z$(fS()),Yoe=zD(),Y$=WD();function Zoe(t){return(Array.isArray(t.credentialSubject)?t.credentialSubject:[t.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}An.getSubjectIdsAsString=Zoe;function Qoe(t){return Yoe.ObjectUtils.isString(t.issuer)?t.issuer:t.issuer.id}An.getIssuerString=Qoe;function eae(t){let e=JSON.parse(JSON.stringify(t));Y$.JsonPathUtils.changePropertyNameRecursively(e,"_const","const"),Y$.JsonPathUtils.changePropertyNameRecursively(e,"_enum","enum");let r={presentation_definition:e},n=(0,Xoe.default)(r);return n?{version:X$.PEVersion.v2}:(n=(0,Goe.default)(r),n?{version:X$.PEVersion.v1}:{error:"This is not a valid PresentationDefinition"})}An.definitionVersionDiscovery=eae;function pS(t,e){var r;let n=(r=t?.map(s=>s.toLowerCase()).map(s=>s.startsWith("did:")?s:`did:${s}`))!==null&&r!==void 0?r:[];if(e?.removePrefix){let s=e.removePrefix.endsWith(":")?e.removePrefix.length:e.removePrefix.length+1;n=n.map(i=>i.startsWith(e.removePrefix)?i.substring(s):i)}return n.includes("did")?[]:n}An.uniformDIDMethods=pS;function tae(t,e){let r=pS(e);return r.length===0||r.some(n=>t.toLowerCase().startsWith(n))}An.isRestrictedDID=tae;function rae(t,e){let r=pS(e);return r.length===0?t:r.flatMap(n=>t.filter(s=>s.toLowerCase().startsWith(n)))}An.filterToRestrictedDIDs=rae});var Ji=D(bo=>{"use strict";var nae=bo&&bo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ov=bo&&bo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nae(e,t,r)};Object.defineProperty(bo,"__esModule",{value:!0});ov(WD(),bo);ov(zD(),bo);ov(q$(),bo);ov(Q$(),bo)});var Gi=D(av=>{"use strict";Object.defineProperty(av,"__esModule",{value:!0});av.AbstractEvaluationHandler=void 0;var iae=zi(),sae=Wr(),hS=class{constructor(e){this._client=e}setNext(e){return this.nextHandler=e,e}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(e){this._client.wrappedVcs=e}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(e){this._client.presentationSubmission=e}getResults(){return this._client.results}updatePresentationSubmission(e){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===sae.Status.ERROR&&a.evaluator===this.getName()).find(a=>(i=iae.JSONPath.query(e,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&i?.id===r.id))&&delete s[n]})}removeDuplicate(e){return e.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}};av.AbstractEvaluationHandler=hS});var tN=D(eN=>{"use strict";Object.defineProperty(eN,"__esModule",{value:!0})});var Nh=D(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.regexpCode=xt.getEsmExportName=xt.getProperty=xt.safeStringify=xt.stringify=xt.strConcat=xt.addCodeArg=xt.str=xt._=xt.nil=xt._Code=xt.Name=xt.IDENTIFIER=xt._CodeOrName=void 0;var Rh=class{};xt._CodeOrName=Rh;xt.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var el=class extends Rh{constructor(e){if(super(),!xt.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};xt.Name=el;var Xi=class extends Rh{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof el&&(r[n.str]=(r[n.str]||0)+1),r),{})}};xt._Code=Xi;xt.nil=new Xi("");function rN(t,...e){let r=[t[0]],n=0;for(;n<e.length;)yS(r,e[n]),r.push(t[++n]);return new Xi(r)}xt._=rN;var mS=new Xi("+");function nN(t,...e){let r=[$h(t[0])],n=0;for(;n<e.length;)r.push(mS),yS(r,e[n]),r.push(mS,$h(t[++n]));return oae(r),new Xi(r)}xt.str=nN;function yS(t,e){e instanceof Xi?t.push(...e._items):e instanceof el?t.push(e):t.push(cae(e))}xt.addCodeArg=yS;function oae(t){let e=1;for(;e<t.length-1;){if(t[e]===mS){let r=aae(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function aae(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof el||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof el))return`"${t}${e.slice(1)}`}function uae(t,e){return e.emptyStr()?t:t.emptyStr()?e:nN`${t}${e}`}xt.strConcat=uae;function cae(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:$h(Array.isArray(t)?t.join(","):t)}function lae(t){return new Xi($h(t))}xt.stringify=lae;function $h(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}xt.safeStringify=$h;function dae(t){return typeof t=="string"&&xt.IDENTIFIER.test(t)?new Xi(`.${t}`):rN`[${t}]`}xt.getProperty=dae;function fae(t){if(typeof t=="string"&&xt.IDENTIFIER.test(t))return new Xi(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}xt.getEsmExportName=fae;function pae(t){return new Xi(t.toString())}xt.regexpCode=pae});var wS=D($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.ValueScope=$n.ValueScopeName=$n.Scope=$n.varKinds=$n.UsedValueState=void 0;var ri=Nh(),gS=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},vS;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(vS=$n.UsedValueState||($n.UsedValueState={}));$n.varKinds={const:new ri.Name("const"),let:new ri.Name("let"),var:new ri.Name("var")};var uv=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof ri.Name?e:this.name(e)}name(e){return new ri.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};$n.Scope=uv;var cv=class extends ri.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,ri._)`.${new ri.Name(r)}[${n}]`}};$n.ValueScopeName=cv;var hae=(0,ri._)`\n`,bS=class extends uv{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?hae:ri.nil}}get(){return this._scope}name(e){return new cv(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,ri._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=ri.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,vS.Started);let l=r(c);if(l){let d=this.opts.es5?$n.varKinds.var:$n.varKinds.const;i=(0,ri._)`${i}${d} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,ri._)`${i}${l}${this.opts._n}`;else throw new gS(c);u.set(c,vS.Completed)})}return i}};$n.ValueScope=bS});var ot=D(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.or=dt.and=dt.not=dt.CodeGen=dt.operators=dt.varKinds=dt.ValueScopeName=dt.ValueScope=dt.Scope=dt.Name=dt.regexpCode=dt.stringify=dt.getProperty=dt.nil=dt.strConcat=dt.str=dt._=void 0;var Et=Nh(),_s=wS(),Du=Nh();Object.defineProperty(dt,"_",{enumerable:!0,get:function(){return Du._}});Object.defineProperty(dt,"str",{enumerable:!0,get:function(){return Du.str}});Object.defineProperty(dt,"strConcat",{enumerable:!0,get:function(){return Du.strConcat}});Object.defineProperty(dt,"nil",{enumerable:!0,get:function(){return Du.nil}});Object.defineProperty(dt,"getProperty",{enumerable:!0,get:function(){return Du.getProperty}});Object.defineProperty(dt,"stringify",{enumerable:!0,get:function(){return Du.stringify}});Object.defineProperty(dt,"regexpCode",{enumerable:!0,get:function(){return Du.regexpCode}});Object.defineProperty(dt,"Name",{enumerable:!0,get:function(){return Du.Name}});var pv=wS();Object.defineProperty(dt,"Scope",{enumerable:!0,get:function(){return pv.Scope}});Object.defineProperty(dt,"ValueScope",{enumerable:!0,get:function(){return pv.ValueScope}});Object.defineProperty(dt,"ValueScopeName",{enumerable:!0,get:function(){return pv.ValueScopeName}});Object.defineProperty(dt,"varKinds",{enumerable:!0,get:function(){return pv.varKinds}});dt.operators={GT:new Et._Code(">"),GTE:new Et._Code(">="),LT:new Et._Code("<"),LTE:new Et._Code("<="),EQ:new Et._Code("==="),NEQ:new Et._Code("!=="),NOT:new Et._Code("!"),OR:new Et._Code("||"),AND:new Et._Code("&&"),ADD:new Et._Code("+")};var _a=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},ES=class extends _a{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?_s.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Zd(this.rhs,e,r)),this}get names(){return this.rhs instanceof Et._CodeOrName?this.rhs.names:{}}},lv=class extends _a{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Et.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Zd(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Et.Name?{}:{...this.lhs.names};return fv(e,this.rhs)}},_S=class extends lv{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},DS=class extends _a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},SS=class extends _a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},AS=class extends _a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},xS=class extends _a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Zd(this.code,e,r),this}get names(){return this.code instanceof Et._CodeOrName?this.code.names:{}}},Mh=class extends _a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(mae(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>rl(e,r.names),{})}},Da=class extends Mh{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},CS=class extends Mh{},Yd=class extends Da{};Yd.kind="else";var Ds=class extends Da{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Yd(n):n}if(r)return e===!1?r instanceof Ds?r:r.nodes:this.nodes.length?this:new Ds(iN(e),r instanceof Ds?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Zd(this.condition,e,r),this}get names(){let e=super.names;return fv(e,this.condition),this.else&&rl(e,this.else.names),e}};Ds.kind="if";var tl=class extends Da{};tl.kind="for";var PS=class extends tl{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Zd(this.iteration,e,r),this}get names(){return rl(super.names,this.iteration.names)}},OS=class extends tl{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?_s.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=fv(super.names,this.from);return fv(e,this.to)}},dv=class extends tl{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Zd(this.iterable,e,r),this}get names(){return rl(super.names,this.iterable.names)}},jh=class extends Da{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};jh.kind="func";var qh=class extends Mh{render(e){return"return "+super.render(e)}};qh.kind="return";var kS=class extends Da{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&rl(e,this.catch.names),this.finally&&rl(e,this.finally.names),e}},Lh=class extends Da{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Lh.kind="catch";var Uh=class extends Da{render(e){return"finally"+super.render(e)}};Uh.kind="finally";var BS=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new _s.Scope({parent:e}),this._nodes=[new CS]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new ES(e,i,n)),i}const(e,r,n){return this._def(_s.varKinds.const,e,r,n)}let(e,r,n){return this._def(_s.varKinds.let,e,r,n)}var(e,r,n){return this._def(_s.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new lv(e,r,n))}add(e,r){return this._leafNode(new _S(e,dt.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Et.nil&&this._leafNode(new xS(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Et.addCodeArg)(r,s));return r.push("}"),new Et._Code(r)}if(e,r,n){if(this._blockNode(new Ds(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Ds(e))}else(){return this._elseNode(new Yd)}endIf(){return this._endBlockNode(Ds,Yd)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new PS(e),r)}forRange(e,r,n,s,i=this.opts.es5?_s.varKinds.var:_s.varKinds.let){let o=this._scope.toName(e);return this._for(new OS(i,o,r,n),()=>s(o))}forOf(e,r,n,s=_s.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Et.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Et._)`${o}.length`,a=>{this.var(i,(0,Et._)`${o}[${a}]`),n(i)})}return this._for(new dv("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?_s.varKinds.var:_s.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Et._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new dv("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(tl)}label(e){return this._leafNode(new DS(e))}break(e){return this._leafNode(new SS(e))}return(e){let r=new qh;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(qh)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new kS;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Lh(i),r(i)}return n&&(this._currNode=s.finally=new Uh,this.code(n)),this._endBlockNode(Lh,Uh)}throw(e){return this._leafNode(new AS(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Et.nil,n,s){return this._blockNode(new jh(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(jh)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Ds))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};dt.CodeGen=BS;function rl(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function fv(t,e){return e instanceof Et._CodeOrName?rl(t,e.names):t}function Zd(t,e,r){if(t instanceof Et.Name)return n(t);if(!s(t))return t;return new Et._Code(t._items.reduce((i,o)=>(o instanceof Et.Name&&(o=n(o)),o instanceof Et._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Et._Code&&i._items.some(o=>o instanceof Et.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function mae(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function iN(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Et._)`!${IS(t)}`}dt.not=iN;var yae=sN(dt.operators.AND);function gae(...t){return t.reduce(yae)}dt.and=gae;var vae=sN(dt.operators.OR);function bae(...t){return t.reduce(vae)}dt.or=bae;function sN(t){return(e,r)=>e===Et.nil?r:r===Et.nil?e:(0,Et._)`${IS(e)} ${t} ${IS(r)}`}function IS(t){return t instanceof Et.Name?t:(0,Et._)`(${t})`}});var Ct=D(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.checkStrictMode=ft.getErrorPath=ft.Type=ft.useFunc=ft.setEvaluated=ft.evaluatedPropsToName=ft.mergeEvaluated=ft.eachItem=ft.unescapeJsonPointer=ft.escapeJsonPointer=ft.escapeFragment=ft.unescapeFragment=ft.schemaRefOrVal=ft.schemaHasRulesButRef=ft.schemaHasRules=ft.checkUnknownRules=ft.alwaysValidSchema=ft.toHash=void 0;var Vt=ot(),wae=Nh();function Eae(t){let e={};for(let r of t)e[r]=!0;return e}ft.toHash=Eae;function _ae(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(uN(t,e),!cN(e,t.self.RULES.all))}ft.alwaysValidSchema=_ae;function uN(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||pN(t,`unknown keyword: "${i}"`)}ft.checkUnknownRules=uN;function cN(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}ft.schemaHasRules=cN;function Dae(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}ft.schemaHasRulesButRef=Dae;function Sae({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Vt._)`${r}`}return(0,Vt._)`${t}${e}${(0,Vt.getProperty)(n)}`}ft.schemaRefOrVal=Sae;function Aae(t){return lN(decodeURIComponent(t))}ft.unescapeFragment=Aae;function xae(t){return encodeURIComponent(TS(t))}ft.escapeFragment=xae;function TS(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}ft.escapeJsonPointer=TS;function lN(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}ft.unescapeJsonPointer=lN;function Cae(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}ft.eachItem=Cae;function oN({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof Vt.Name?(i instanceof Vt.Name?t(s,i,o):e(s,i,o),o):i instanceof Vt.Name?(e(s,o,i),i):r(i,o);return a===Vt.Name&&!(u instanceof Vt.Name)?n(s,u):u}}ft.mergeEvaluated={props:oN({mergeNames:(t,e,r)=>t.if((0,Vt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Vt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Vt._)`${r} || {}`).code((0,Vt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Vt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Vt._)`${r} || {}`),FS(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:dN}),items:oN({mergeNames:(t,e,r)=>t.if((0,Vt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Vt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Vt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Vt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function dN(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Vt._)`{}`);return e!==void 0&&FS(t,r,e),r}ft.evaluatedPropsToName=dN;function FS(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Vt._)`${e}${(0,Vt.getProperty)(n)}`,!0))}ft.setEvaluated=FS;var aN={};function Pae(t,e){return t.scopeValue("func",{ref:e,code:aN[e.code]||(aN[e.code]=new wae._Code(e.code))})}ft.useFunc=Pae;var fN;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(fN=ft.Type||(ft.Type={}));function Oae(t,e,r){if(t instanceof Vt.Name){let n=e===fN.Num;return r?n?(0,Vt._)`"[" + ${t} + "]"`:(0,Vt._)`"['" + ${t} + "']"`:n?(0,Vt._)`"/" + ${t}`:(0,Vt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Vt.getProperty)(t).toString():"/"+TS(t)}ft.getErrorPath=Oae;function pN(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}ft.checkStrictMode=pN});var Sa=D(RS=>{"use strict";Object.defineProperty(RS,"__esModule",{value:!0});var xn=ot(),kae={data:new xn.Name("data"),valCxt:new xn.Name("valCxt"),instancePath:new xn.Name("instancePath"),parentData:new xn.Name("parentData"),parentDataProperty:new xn.Name("parentDataProperty"),rootData:new xn.Name("rootData"),dynamicAnchors:new xn.Name("dynamicAnchors"),vErrors:new xn.Name("vErrors"),errors:new xn.Name("errors"),this:new xn.Name("this"),self:new xn.Name("self"),scope:new xn.Name("scope"),json:new xn.Name("json"),jsonPos:new xn.Name("jsonPos"),jsonLen:new xn.Name("jsonLen"),jsonPart:new xn.Name("jsonPart")};RS.default=kae});var Kh=D(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.extendErrors=Cn.resetErrorsCount=Cn.reportExtraError=Cn.reportError=Cn.keyword$DataError=Cn.keywordError=void 0;var Dt=ot(),hv=Ct(),Nn=Sa();Cn.keywordError={message:({keyword:t})=>(0,Dt.str)`must pass "${t}" keyword validation`};Cn.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Dt.str)`"${t}" keyword must be ${e} ($data)`:(0,Dt.str)`"${t}" keyword is invalid ($data)`};function Bae(t,e=Cn.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=yN(t,e,r);n??(o||a)?hN(i,u):mN(s,(0,Dt._)`[${u}]`)}Cn.reportError=Bae;function Iae(t,e=Cn.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=yN(t,e,r);hN(s,a),i||o||mN(n,Nn.default.vErrors)}Cn.reportExtraError=Iae;function Tae(t,e){t.assign(Nn.default.errors,e),t.if((0,Dt._)`${Nn.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Dt._)`${Nn.default.vErrors}.length`,e),()=>t.assign(Nn.default.vErrors,null)))}Cn.resetErrorsCount=Tae;function Fae({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,Nn.default.errors,a=>{t.const(o,(0,Dt._)`${Nn.default.vErrors}[${a}]`),t.if((0,Dt._)`${o}.instancePath === undefined`,()=>t.assign((0,Dt._)`${o}.instancePath`,(0,Dt.strConcat)(Nn.default.instancePath,i.errorPath))),t.assign((0,Dt._)`${o}.schemaPath`,(0,Dt.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Dt._)`${o}.schema`,r),t.assign((0,Dt._)`${o}.data`,n))})}Cn.extendErrors=Fae;function hN(t,e){let r=t.const("err",e);t.if((0,Dt._)`${Nn.default.vErrors} === null`,()=>t.assign(Nn.default.vErrors,(0,Dt._)`[${r}]`),(0,Dt._)`${Nn.default.vErrors}.push(${r})`),t.code((0,Dt._)`${Nn.default.errors}++`)}function mN(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Dt._)`new ${t.ValidationError}(${e})`):(r.assign((0,Dt._)`${n}.errors`,e),r.return(!1))}var nl={keyword:new Dt.Name("keyword"),schemaPath:new Dt.Name("schemaPath"),params:new Dt.Name("params"),propertyName:new Dt.Name("propertyName"),message:new Dt.Name("message"),schema:new Dt.Name("schema"),parentSchema:new Dt.Name("parentSchema")};function yN(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Dt._)`{}`:Rae(t,e,r)}function Rae(t,e,r={}){let{gen:n,it:s}=t,i=[$ae(s,r),Nae(t,r)];return Mae(t,e,i),n.object(...i)}function $ae({errorPath:t},{instancePath:e}){let r=e?(0,Dt.str)`${t}${(0,hv.getErrorPath)(e,hv.Type.Str)}`:t;return[Nn.default.instancePath,(0,Dt.strConcat)(Nn.default.instancePath,r)]}function Nae({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Dt.str)`${e}/${t}`;return r&&(s=(0,Dt.str)`${s}${(0,hv.getErrorPath)(r,hv.Type.Str)}`),[nl.schemaPath,s]}function Mae(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:d}=a;n.push([nl.keyword,s],[nl.params,typeof e=="function"?e(t):e||(0,Dt._)`{}`]),u.messages&&n.push([nl.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([nl.schema,o],[nl.parentSchema,(0,Dt._)`${l}${d}`],[Nn.default.data,i]),c&&n.push([nl.propertyName,c])}});var vN=D(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});Qd.boolOrEmptySchema=Qd.topBoolOrEmptySchema=void 0;var jae=Kh(),qae=ot(),Lae=Sa(),Uae={message:"boolean schema is false"};function Kae(t){let{gen:e,schema:r,validateName:n}=t;r===!1?gN(t,!1):typeof r=="object"&&r.$async===!0?e.return(Lae.default.data):(e.assign((0,qae._)`${n}.errors`,null),e.return(!0))}Qd.topBoolOrEmptySchema=Kae;function Vae(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),gN(t)):r.var(e,!0)}Qd.boolOrEmptySchema=Vae;function gN(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,jae.reportError)(s,Uae,void 0,e)}});var $S=D(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.getRules=ef.isJSONType=void 0;var Hae=["string","number","integer","boolean","null","object","array"],Wae=new Set(Hae);function zae(t){return typeof t=="string"&&Wae.has(t)}ef.isJSONType=zae;function Jae(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ef.getRules=Jae});var NS=D(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.shouldUseRule=Su.shouldUseGroup=Su.schemaHasRulesForType=void 0;function Gae({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&bN(t,n)}Su.schemaHasRulesForType=Gae;function bN(t,e){return e.rules.some(r=>wN(t,r))}Su.shouldUseGroup=bN;function wN(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Su.shouldUseRule=wN});var Hh=D(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.reportTypeError=gn.checkDataTypes=gn.checkDataType=gn.coerceAndCheckDataType=gn.getJSONTypes=gn.getSchemaTypes=gn.DataType=void 0;var Xae=$S(),Yae=NS(),Zae=Kh(),tt=ot(),EN=Ct(),Vh;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Vh=gn.DataType||(gn.DataType={}));function Qae(t){let e=_N(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}gn.getSchemaTypes=Qae;function _N(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Xae.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}gn.getJSONTypes=_N;function eue(t,e){let{gen:r,data:n,opts:s}=t,i=tue(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Yae.schemaHasRulesForType)(t,e[0]));if(o){let a=jS(e,n,s.strictNumbers,Vh.Wrong);r.if(a,()=>{i.length?rue(t,e,i):qS(t)})}return o}gn.coerceAndCheckDataType=eue;var DN=new Set(["string","number","integer","boolean","null"]);function tue(t,e){return e?t.filter(r=>DN.has(r)||e==="array"&&r==="array"):[]}function rue(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,tt._)`typeof ${s}`),a=n.let("coerced",(0,tt._)`undefined`);i.coerceTypes==="array"&&n.if((0,tt._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,tt._)`${s}[0]`).assign(o,(0,tt._)`typeof ${s}`).if(jS(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,tt._)`${a} !== undefined`);for(let c of r)(DN.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),qS(t),n.endIf(),n.if((0,tt._)`${a} !== undefined`,()=>{n.assign(s,a),nue(t,a)});function u(c){switch(c){case"string":n.elseIf((0,tt._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,tt._)`"" + ${s}`).elseIf((0,tt._)`${s} === null`).assign(a,(0,tt._)`""`);return;case"number":n.elseIf((0,tt._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,tt._)`+${s}`);return;case"integer":n.elseIf((0,tt._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,tt._)`+${s}`);return;case"boolean":n.elseIf((0,tt._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,tt._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,tt._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,tt._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,tt._)`[${s}]`)}}}function nue({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,tt._)`${e} !== undefined`,()=>t.assign((0,tt._)`${e}[${r}]`,n))}function MS(t,e,r,n=Vh.Correct){let s=n===Vh.Correct?tt.operators.EQ:tt.operators.NEQ,i;switch(t){case"null":return(0,tt._)`${e} ${s} null`;case"array":i=(0,tt._)`Array.isArray(${e})`;break;case"object":i=(0,tt._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,tt._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,tt._)`typeof ${e} ${s} ${t}`}return n===Vh.Correct?i:(0,tt.not)(i);function o(a=tt.nil){return(0,tt.and)((0,tt._)`typeof ${e} == "number"`,a,r?(0,tt._)`isFinite(${e})`:tt.nil)}}gn.checkDataType=MS;function jS(t,e,r,n){if(t.length===1)return MS(t[0],e,r,n);let s,i=(0,EN.toHash)(t);if(i.array&&i.object){let o=(0,tt._)`typeof ${e} != "object"`;s=i.null?o:(0,tt._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=tt.nil;i.number&&delete i.integer;for(let o in i)s=(0,tt.and)(s,MS(o,e,r,n));return s}gn.checkDataTypes=jS;var iue={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,tt._)`{type: ${t}}`:(0,tt._)`{type: ${e}}`};function qS(t){let e=sue(t);(0,Zae.reportError)(e,iue)}gn.reportTypeError=qS;function sue(t){let{gen:e,data:r,schema:n}=t,s=(0,EN.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var AN=D(mv=>{"use strict";Object.defineProperty(mv,"__esModule",{value:!0});mv.assignDefaults=void 0;var tf=ot(),oue=Ct();function aue(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)SN(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>SN(t,i,s.default))}mv.assignDefaults=aue;function SN(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,tf._)`${i}${(0,tf.getProperty)(e)}`;if(s){(0,oue.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,tf._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,tf._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,tf._)`${a} = ${(0,tf.stringify)(r)}`)}});var Yi=D(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.validateUnion=jt.validateArray=jt.usePattern=jt.callValidateCode=jt.schemaProperties=jt.allSchemaProperties=jt.noPropertyInData=jt.propertyInData=jt.isOwnProperty=jt.hasPropFunc=jt.reportMissingProp=jt.checkMissingProp=jt.checkReportMissingProp=void 0;var Xt=ot(),LS=Ct(),Au=Sa(),uue=Ct();function cue(t,e){let{gen:r,data:n,it:s}=t;r.if(KS(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Xt._)`${e}`},!0),t.error()})}jt.checkReportMissingProp=cue;function lue({gen:t,data:e,it:{opts:r}},n,s){return(0,Xt.or)(...n.map(i=>(0,Xt.and)(KS(t,e,i,r.ownProperties),(0,Xt._)`${s} = ${i}`)))}jt.checkMissingProp=lue;function due(t,e){t.setParams({missingProperty:e},!0),t.error()}jt.reportMissingProp=due;function xN(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Xt._)`Object.prototype.hasOwnProperty`})}jt.hasPropFunc=xN;function US(t,e,r){return(0,Xt._)`${xN(t)}.call(${e}, ${r})`}jt.isOwnProperty=US;function fue(t,e,r,n){let s=(0,Xt._)`${e}${(0,Xt.getProperty)(r)} !== undefined`;return n?(0,Xt._)`${s} && ${US(t,e,r)}`:s}jt.propertyInData=fue;function KS(t,e,r,n){let s=(0,Xt._)`${e}${(0,Xt.getProperty)(r)} === undefined`;return n?(0,Xt.or)(s,(0,Xt.not)(US(t,e,r))):s}jt.noPropertyInData=KS;function CN(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}jt.allSchemaProperties=CN;function pue(t,e){return CN(e).filter(r=>!(0,LS.alwaysValidSchema)(t,e[r]))}jt.schemaProperties=pue;function hue({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,Xt._)`${t}, ${e}, ${n}${s}`:e,d=[[Au.default.instancePath,(0,Xt.strConcat)(Au.default.instancePath,i)],[Au.default.parentData,o.parentData],[Au.default.parentDataProperty,o.parentDataProperty],[Au.default.rootData,Au.default.rootData]];o.opts.dynamicRef&&d.push([Au.default.dynamicAnchors,Au.default.dynamicAnchors]);let h=(0,Xt._)`${l}, ${r.object(...d)}`;return u!==Xt.nil?(0,Xt._)`${a}.call(${u}, ${h})`:(0,Xt._)`${a}(${h})`}jt.callValidateCode=hue;var mue=(0,Xt._)`new RegExp`;function yue({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Xt._)`${s.code==="new RegExp"?mue:(0,uue.useFunc)(t,s)}(${r}, ${n})`})}jt.usePattern=yue;function gue(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,Xt._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:LS.Type.Num},i),e.if((0,Xt.not)(i),a)})}}jt.validateArray=gue;function vue(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,LS.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,Xt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,Xt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}jt.validateUnion=vue});var kN=D(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.validateKeywordUsage=wo.validSchemaType=wo.funcKeywordCode=wo.macroKeywordCode=void 0;var Mn=ot(),il=Sa(),bue=Yi(),wue=Kh();function Eue(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=ON(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:Mn.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}wo.macroKeywordCode=Eue;function _ue(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;Sue(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=ON(n,s,c),d=n.let("valid");t.block$data(d,h),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function h(){if(e.errors===!1)g(),e.modifying&&PN(t),w(()=>t.error());else{let P=e.async?f():p();e.modifying&&PN(t),w(()=>Due(t,P))}}function f(){let P=n.let("ruleErrs",null);return n.try(()=>g((0,Mn._)`await `),C=>n.assign(d,!1).if((0,Mn._)`${C} instanceof ${u.ValidationError}`,()=>n.assign(P,(0,Mn._)`${C}.errors`),()=>n.throw(C))),P}function p(){let P=(0,Mn._)`${l}.errors`;return n.assign(P,null),g(Mn.nil),P}function g(P=e.async?(0,Mn._)`await `:Mn.nil){let C=u.opts.passContext?il.default.this:il.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,Mn._)`${P}${(0,bue.callValidateCode)(t,l,C,v)}`,e.modifying)}function w(P){var C;n.if((0,Mn.not)((C=e.valid)!==null&&C!==void 0?C:d),P)}}wo.funcKeywordCode=_ue;function PN(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,Mn._)`${n.parentData}[${n.parentDataProperty}]`))}function Due(t,e){let{gen:r}=t;r.if((0,Mn._)`Array.isArray(${e})`,()=>{r.assign(il.default.vErrors,(0,Mn._)`${il.default.vErrors} === null ? ${e} : ${il.default.vErrors}.concat(${e})`).assign(il.default.errors,(0,Mn._)`${il.default.vErrors}.length`),(0,wue.extendErrors)(t)},()=>t.error())}function Sue({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function ON(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Mn.stringify)(r)})}function Aue(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}wo.validSchemaType=Aue;function xue({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}wo.validateKeywordUsage=xue});var IN=D(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.extendSubschemaMode=xu.extendSubschemaData=xu.getSubschema=void 0;var Eo=ot(),BN=Ct();function Cue(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Eo._)`${t.schemaPath}${(0,Eo.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Eo._)`${t.schemaPath}${(0,Eo.getProperty)(e)}${(0,Eo.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,BN.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}xu.getSubschema=Cue;function Pue(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:d}=e,h=a.let("data",(0,Eo._)`${e.data}${(0,Eo.getProperty)(r)}`,!0);u(h),t.errorPath=(0,Eo.str)`${c}${(0,BN.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Eo._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof Eo.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}xu.extendSubschemaData=Pue;function Oue(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}xu.extendSubschemaMode=Oue});var FN=D(($Ae,TN)=>{"use strict";var Cu=TN.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};yv(e,n,s,t,"",t)};Cu.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Cu.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Cu.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Cu.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function yv(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var d=n[l];if(Array.isArray(d)){if(l in Cu.arrayKeywords)for(var h=0;h<d.length;h++)yv(t,e,r,d[h],s+"/"+l+"/"+h,i,s,l,n,h)}else if(l in Cu.propsKeywords){if(d&&typeof d=="object")for(var f in d)yv(t,e,r,d[f],s+"/"+l+"/"+kue(f),i,s,l,n,f)}else(l in Cu.keywords||t.allKeys&&!(l in Cu.skipKeywords))&&yv(t,e,r,d,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function kue(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Wh=D(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.getSchemaRefs=ni.resolveUrl=ni.normalizeId=ni._getFullPath=ni.getFullPath=ni.inlineRef=void 0;var Bue=Ct(),Iue=q_(),Tue=FN(),Fue=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Rue(t,e=!0){return typeof t=="boolean"?!0:e===!0?!VS(t):e?RN(t)<=e:!1}ni.inlineRef=Rue;var $ue=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function VS(t){for(let e in t){if($ue.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(VS)||typeof r=="object"&&VS(r))return!0}return!1}function RN(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!Fue.has(r)&&(typeof t[r]=="object"&&(0,Bue.eachItem)(t[r],n=>e+=RN(n)),e===1/0))return 1/0}return e}function $N(t,e="",r){r!==!1&&(e=rf(e));let n=t.parse(e);return NN(t,n)}ni.getFullPath=$N;function NN(t,e){return t.serialize(e).split("#")[0]+"#"}ni._getFullPath=NN;var Nue=/#\/?$/;function rf(t){return t?t.replace(Nue,""):""}ni.normalizeId=rf;function Mue(t,e,r){return r=rf(r),t.resolve(e,r)}ni.resolveUrl=Mue;var jue=/^[a-z_][-a-z0-9._]*$/i;function que(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=rf(t[r]||e),i={"":s},o=$N(n,s,!1),a={},u=new Set;return Tue(t,{allKeys:!0},(d,h,f,p)=>{if(p===void 0)return;let g=o+h,w=i[p];typeof d[r]=="string"&&(w=P.call(this,d[r])),C.call(this,d.$anchor),C.call(this,d.$dynamicAnchor),i[h]=w;function P(v){let k=this.opts.uriResolver.resolve;if(v=rf(w?k(w,v):v),u.has(v))throw l(v);u.add(v);let B=this.refs[v];return typeof B=="string"&&(B=this.refs[B]),typeof B=="object"?c(d,B.schema,v):v!==rf(g)&&(v[0]==="#"?(c(d,a[v],v),a[v]=d):this.refs[v]=g),v}function C(v){if(typeof v=="string"){if(!jue.test(v))throw new Error(`invalid anchor "${v}"`);P.call(this,`#${v}`)}}}),a;function c(d,h,f){if(h!==void 0&&!Iue(d,h))throw l(f)}function l(d){return new Error(`reference "${d}" resolves to more than one schema`)}}ni.getSchemaRefs=que});var Gh=D(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.getData=Pu.KeywordCxt=Pu.validateFunctionCode=void 0;var UN=vN(),MN=Hh(),WS=NS(),gv=Hh(),Lue=AN(),Jh=kN(),HS=IN(),xe=ot(),Ke=Sa(),Uue=Wh(),Aa=Ct(),zh=Kh();function Kue(t){if(HN(t)&&(WN(t),VN(t))){Wue(t);return}KN(t,()=>(0,UN.topBoolOrEmptySchema)(t))}Pu.validateFunctionCode=Kue;function KN({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,xe._)`${Ke.default.data}, ${Ke.default.valCxt}`,n.$async,()=>{t.code((0,xe._)`"use strict"; ${jN(r,s)}`),Hue(t,s),t.code(i)}):t.func(e,(0,xe._)`${Ke.default.data}, ${Vue(s)}`,n.$async,()=>t.code(jN(r,s)).code(i))}function Vue(t){return(0,xe._)`{${Ke.default.instancePath}="", ${Ke.default.parentData}, ${Ke.default.parentDataProperty}, ${Ke.default.rootData}=${Ke.default.data}${t.dynamicRef?(0,xe._)`, ${Ke.default.dynamicAnchors}={}`:xe.nil}}={}`}function Hue(t,e){t.if(Ke.default.valCxt,()=>{t.var(Ke.default.instancePath,(0,xe._)`${Ke.default.valCxt}.${Ke.default.instancePath}`),t.var(Ke.default.parentData,(0,xe._)`${Ke.default.valCxt}.${Ke.default.parentData}`),t.var(Ke.default.parentDataProperty,(0,xe._)`${Ke.default.valCxt}.${Ke.default.parentDataProperty}`),t.var(Ke.default.rootData,(0,xe._)`${Ke.default.valCxt}.${Ke.default.rootData}`),e.dynamicRef&&t.var(Ke.default.dynamicAnchors,(0,xe._)`${Ke.default.valCxt}.${Ke.default.dynamicAnchors}`)},()=>{t.var(Ke.default.instancePath,(0,xe._)`""`),t.var(Ke.default.parentData,(0,xe._)`undefined`),t.var(Ke.default.parentDataProperty,(0,xe._)`undefined`),t.var(Ke.default.rootData,Ke.default.data),e.dynamicRef&&t.var(Ke.default.dynamicAnchors,(0,xe._)`{}`)})}function Wue(t){let{schema:e,opts:r,gen:n}=t;KN(t,()=>{r.$comment&&e.$comment&&JN(t),Yue(t),n.let(Ke.default.vErrors,null),n.let(Ke.default.errors,0),r.unevaluated&&zue(t),zN(t),ece(t)})}function zue(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,xe._)`${r}.evaluated`),e.if((0,xe._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,xe._)`${t.evaluated}.props`,(0,xe._)`undefined`)),e.if((0,xe._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,xe._)`${t.evaluated}.items`,(0,xe._)`undefined`))}function jN(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,xe._)`/*# sourceURL=${r} */`:xe.nil}function Jue(t,e){if(HN(t)&&(WN(t),VN(t))){Gue(t,e);return}(0,UN.boolOrEmptySchema)(t,e)}function VN({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function HN(t){return typeof t.schema!="boolean"}function Gue(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&JN(t),Zue(t),Que(t);let i=n.const("_errs",Ke.default.errors);zN(t,i),n.var(e,(0,xe._)`${i} === ${Ke.default.errors}`)}function WN(t){(0,Aa.checkUnknownRules)(t),Xue(t)}function zN(t,e){if(t.opts.jtd)return qN(t,[],!1,e);let r=(0,MN.getSchemaTypes)(t.schema),n=(0,MN.coerceAndCheckDataType)(t,r);qN(t,r,!n,e)}function Xue(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Aa.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Yue(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Aa.checkStrictMode)(t,"default is ignored in the schema root")}function Zue(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Uue.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Que(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function JN({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,xe._)`${Ke.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,xe.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,xe._)`${Ke.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function ece(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,xe._)`${Ke.default.errors} === 0`,()=>e.return(Ke.default.data),()=>e.throw((0,xe._)`new ${s}(${Ke.default.vErrors})`)):(e.assign((0,xe._)`${n}.errors`,Ke.default.vErrors),i.unevaluated&&tce(t),e.return((0,xe._)`${Ke.default.errors} === 0`))}function tce({gen:t,evaluated:e,props:r,items:n}){r instanceof xe.Name&&t.assign((0,xe._)`${e}.props`,r),n instanceof xe.Name&&t.assign((0,xe._)`${e}.items`,n)}function qN(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,Aa.schemaHasRulesButRef)(i,l))){s.block(()=>XN(t,"$ref",l.all.$ref.definition));return}u.jtd||rce(t,e),s.block(()=>{for(let h of l.rules)d(h);d(l.post)});function d(h){(0,WS.shouldUseGroup)(i,h)&&(h.type?(s.if((0,gv.checkDataType)(h.type,o,u.strictNumbers)),LN(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,gv.reportTypeError)(t)),s.endIf()):LN(t,h),a||s.if((0,xe._)`${Ke.default.errors} === ${n||0}`))}}function LN(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Lue.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,WS.shouldUseRule)(n,i)&&XN(t,i.keyword,i.definition,e.type)})}function rce(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(nce(t,e),t.opts.allowUnionTypes||ice(t,e),sce(t,t.dataTypes))}function nce(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{GN(t.dataTypes,r)||zS(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),ace(t,e)}}function ice(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&zS(t,"use allowUnionTypes to allow union type keyword")}function sce(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,WS.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>oce(e,o))&&zS(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function oce(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function GN(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function ace(t,e){let r=[];for(let n of t.dataTypes)GN(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function zS(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Aa.checkStrictMode)(t,e,t.opts.strictTypes)}var vv=class{constructor(e,r,n){if((0,Jh.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Aa.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",YN(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Jh.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ke.default.errors))}result(e,r,n){this.failResult((0,xe.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,xe.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,xe._)`${r} !== undefined && (${(0,xe.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?zh.reportExtraError:zh.reportError)(this,this.def.error,r)}$dataError(){(0,zh.reportError)(this,this.def.$dataError||zh.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,zh.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=xe.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=xe.nil,r=xe.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,xe.or)((0,xe._)`${s} === undefined`,r)),e!==xe.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==xe.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,xe.or)(o(),a());function o(){if(n.length){if(!(r instanceof xe.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,xe._)`${(0,gv.checkDataTypes)(u,r,i.opts.strictNumbers,gv.DataType.Wrong)}`}return xe.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,xe._)`!${u}(${r})`}return xe.nil}}subschema(e,r){let n=(0,HS.getSubschema)(this.it,e);(0,HS.extendSubschemaData)(n,this.it,e),(0,HS.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return Jue(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Aa.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Aa.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,xe.Name)),!0}};Pu.KeywordCxt=vv;function XN(t,e,r,n){let s=new vv(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Jh.funcKeywordCode)(s,r):"macro"in r?(0,Jh.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Jh.funcKeywordCode)(s,r)}var uce=/^\/(?:[^~]|~0|~1)*$/,cce=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function YN(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return Ke.default.rootData;if(t[0]==="/"){if(!uce.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Ke.default.rootData}else{let c=cce.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,xe._)`${i}${(0,xe.getProperty)((0,Aa.unescapeJsonPointer)(c))}`,o=(0,xe._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}Pu.getData=YN});var bv=D(GS=>{"use strict";Object.defineProperty(GS,"__esModule",{value:!0});var JS=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};GS.default=JS});var wv=D(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});var XS=Wh(),YS=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,XS.resolveUrl)(e,r,n),this.missingSchema=(0,XS.normalizeId)((0,XS.getFullPath)(e,this.missingRef))}};ZS.default=YS});var _v=D(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Zi.resolveSchema=Zi.getCompilingSchema=Zi.resolveRef=Zi.compileSchema=Zi.SchemaEnv=void 0;var Ss=ot(),lce=bv(),sl=Sa(),As=Wh(),ZN=Ct(),dce=Gh(),nf=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,As.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};Zi.SchemaEnv=nf;function eA(t){let e=QN.call(this,t);if(e)return e;let r=(0,As.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Ss.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:lce.default,code:(0,Ss._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:sl.default.data,parentData:sl.default.parentData,parentDataProperty:sl.default.parentDataProperty,dataNames:[sl.default.data],dataPathArr:[Ss.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Ss.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Ss.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ss._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,dce.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();l=`${o.scopeRefs(sl.default.scope)}return ${d}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let f=new Function(`${sl.default.self}`,`${sl.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:u,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:g}=c;f.evaluated={props:p instanceof Ss.Name?void 0:p,items:g instanceof Ss.Name?void 0:g,dynamicProps:p instanceof Ss.Name,dynamicItems:g instanceof Ss.Name},f.source&&(f.source.evaluated=(0,Ss.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),d}finally{this._compilations.delete(t)}}Zi.compileSchema=eA;function fce(t,e,r){var n;r=(0,As.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=mce.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new nf({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=pce.call(this,i)}Zi.resolveRef=fce;function pce(t){return(0,As.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:eA.call(this,t)}function QN(t){for(let e of this._compilations)if(hce(e,t))return e}Zi.getCompilingSchema=QN;function hce(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function mce(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Ev.call(this,t,e)}function Ev(t,e){let r=this.opts.uriResolver.parse(e),n=(0,As._getFullPath)(this.opts.uriResolver,r),s=(0,As.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return QS.call(this,r,t);let i=(0,As.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Ev.call(this,t,o);return typeof a?.schema!="object"?void 0:QS.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||eA.call(this,o),i===(0,As.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,As.resolveUrl)(this.opts.uriResolver,s,c)),new nf({schema:a,schemaId:u,root:t,baseId:s})}return QS.call(this,r,o)}}Zi.resolveSchema=Ev;var yce=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function QS(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,ZN.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!yce.has(a)&&c&&(e=(0,As.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,ZN.schemaHasRulesButRef)(r,this.RULES)){let a=(0,As.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Ev.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new nf({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var eM=D((UAe,gce)=>{gce.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var rM=D(tA=>{"use strict";Object.defineProperty(tA,"__esModule",{value:!0});var tM=GE();tM.code='require("ajv/dist/runtime/uri").default';tA.default=tM});var lM=D(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.CodeGen=vn.Name=vn.nil=vn.stringify=vn.str=vn._=vn.KeywordCxt=void 0;var vce=Gh();Object.defineProperty(vn,"KeywordCxt",{enumerable:!0,get:function(){return vce.KeywordCxt}});var sf=ot();Object.defineProperty(vn,"_",{enumerable:!0,get:function(){return sf._}});Object.defineProperty(vn,"str",{enumerable:!0,get:function(){return sf.str}});Object.defineProperty(vn,"stringify",{enumerable:!0,get:function(){return sf.stringify}});Object.defineProperty(vn,"nil",{enumerable:!0,get:function(){return sf.nil}});Object.defineProperty(vn,"Name",{enumerable:!0,get:function(){return sf.Name}});Object.defineProperty(vn,"CodeGen",{enumerable:!0,get:function(){return sf.CodeGen}});var bce=bv(),aM=wv(),wce=$S(),Xh=_v(),Ece=ot(),Yh=Wh(),Dv=Hh(),nA=Ct(),nM=eM(),_ce=rM(),uM=(t,e)=>new RegExp(t,e);uM.code="new RegExp";var Dce=["removeAdditional","useDefaults","coerceTypes"],Sce=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Ace={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},xce={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},iM=200;function Cce(t){var e,r,n,s,i,o,a,u,c,l,d,h,f,p,g,w,P,C,v,k,B,T,M,y,b;let E=t.strict,I=(e=t.code)===null||e===void 0?void 0:e.optimize,S=I===!0||I===void 0?1:I||0,N=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:uM,R=(s=t.uriResolver)!==null&&s!==void 0?s:_ce.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:E)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:E)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:E)!==null&&l!==void 0?l:"log",strictTuples:(h=(d=t.strictTuples)!==null&&d!==void 0?d:E)!==null&&h!==void 0?h:"log",strictRequired:(p=(f=t.strictRequired)!==null&&f!==void 0?f:E)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:S,regExp:N}:{optimize:S,regExp:N},loopRequired:(g=t.loopRequired)!==null&&g!==void 0?g:iM,loopEnum:(w=t.loopEnum)!==null&&w!==void 0?w:iM,meta:(P=t.meta)!==null&&P!==void 0?P:!0,messages:(C=t.messages)!==null&&C!==void 0?C:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(k=t.schemaId)!==null&&k!==void 0?k:"$id",addUsedSchema:(B=t.addUsedSchema)!==null&&B!==void 0?B:!0,validateSchema:(T=t.validateSchema)!==null&&T!==void 0?T:!0,validateFormats:(M=t.validateFormats)!==null&&M!==void 0?M:!0,unicodeRegExp:(y=t.unicodeRegExp)!==null&&y!==void 0?y:!0,int32range:(b=t.int32range)!==null&&b!==void 0?b:!0,uriResolver:R}}var Zh=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Cce(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new Ece.ValueScope({scope:{},prefixes:Sce,es5:r,lines:n}),this.logger=Tce(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,wce.getRules)(),sM.call(this,Ace,e,"NOT SUPPORTED"),sM.call(this,xce,e,"DEPRECATED","warn"),this._metaOpts=Bce.call(this),e.formats&&Oce.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&kce.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Pce.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=nM;n==="id"&&(s={...nM},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,d){await i.call(this,l.$schema);let h=this._addSchema(l,d);return h.validate||o.call(this,h)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(d){if(!(d instanceof aM.default))throw d;return a.call(this,d),await u.call(this,d.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:d}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${d} cannot be resolved`)}async function u(l){let d=await c.call(this,l);this.refs[l]||await i.call(this,d.$schema),this.refs[l]||this.addSchema(d,l,r)}async function c(l){let d=this._loading[l];if(d)return d;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Yh.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=oM.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Xh.SchemaEnv({schema:{},schemaId:n});if(r=Xh.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=oM.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,Yh.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Rce.call(this,n,r),!r)return(0,nA.eachItem)(n,i=>rA.call(this,i)),this;Nce.call(this,r);let s={...r,type:(0,Dv.getJSONTypes)(r.type),schemaType:(0,Dv.getJSONTypes)(r.schemaType)};return(0,nA.eachItem)(n,s.type.length===0?i=>rA.call(this,i,s):i=>s.type.forEach(o=>rA.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=cM(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,Yh.normalizeId)(o||n);let c=Yh.getSchemaRefs.call(this,e,n);return u=new Xh.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Xh.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Xh.compileSchema.call(this,e)}finally{this.opts=r}}};vn.default=Zh;Zh.ValidationError=bce.default;Zh.MissingRefError=aM.default;function sM(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function oM(t){return t=(0,Yh.normalizeId)(t),this.schemas[t]||this.refs[t]}function Pce(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Oce(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function kce(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Bce(){let t={...this.opts};for(let e of Dce)delete t[e];return t}var Ice={log(){},warn(){},error(){}};function Tce(t){if(t===!1)return Ice;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Fce=/^[a-z_$][a-z0-9_$:-]*$/i;function Rce(t,e){let{RULES:r}=this;if((0,nA.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!Fce.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function rA(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Dv.getJSONTypes)(e.type),schemaType:(0,Dv.getJSONTypes)(e.schemaType)}};e.before?$ce.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function $ce(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Nce(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=cM(e)),t.validateSchema=this.compile(e,!0))}var Mce={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function cM(t){return{anyOf:[t,Mce]}}});var dM=D(iA=>{"use strict";Object.defineProperty(iA,"__esModule",{value:!0});var jce={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};iA.default=jce});var mM=D(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.callRef=ol.getValidate=void 0;var qce=wv(),fM=Yi(),ii=ot(),of=Sa(),pM=_v(),Sv=Ct(),Lce={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let l=pM.resolveRef.call(u,c,s,r);if(l===void 0)throw new qce.default(n.opts.uriResolver,s,r);if(l instanceof pM.SchemaEnv)return h(l);return f(l);function d(){if(i===c)return Av(t,o,i,i.$async);let p=e.scopeValue("root",{ref:c});return Av(t,(0,ii._)`${p}.validate`,c,c.$async)}function h(p){let g=hM(t,p);Av(t,g,p,p.$async)}function f(p){let g=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,ii.stringify)(p)}:{ref:p}),w=e.name("valid"),P=t.subschema({schema:p,dataTypes:[],schemaPath:ii.nil,topSchemaRef:g,errSchemaPath:r},w);t.mergeEvaluated(P),t.ok(w)}}};function hM(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,ii._)`${r.scopeValue("wrapper",{ref:e})}.validate`}ol.getValidate=hM;function Av(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?of.default.this:ii.nil;n?l():d();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,ii._)`await ${(0,fM.callValidateCode)(t,e,c)}`),f(e),o||s.assign(p,!0)},g=>{s.if((0,ii._)`!(${g} instanceof ${i.ValidationError})`,()=>s.throw(g)),h(g),o||s.assign(p,!1)}),t.ok(p)}function d(){t.result((0,fM.callValidateCode)(t,e,c),()=>f(e),()=>h(e))}function h(p){let g=(0,ii._)`${p}.errors`;s.assign(of.default.vErrors,(0,ii._)`${of.default.vErrors} === null ? ${g} : ${of.default.vErrors}.concat(${g})`),s.assign(of.default.errors,(0,ii._)`${of.default.vErrors}.length`)}function f(p){var g;if(!i.opts.unevaluated)return;let w=(g=r?.validate)===null||g===void 0?void 0:g.evaluated;if(i.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(i.props=Sv.mergeEvaluated.props(s,w.props,i.props));else{let P=s.var("props",(0,ii._)`${p}.evaluated.props`);i.props=Sv.mergeEvaluated.props(s,P,i.props,ii.Name)}if(i.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(i.items=Sv.mergeEvaluated.items(s,w.items,i.items));else{let P=s.var("items",(0,ii._)`${p}.evaluated.items`);i.items=Sv.mergeEvaluated.items(s,P,i.items,ii.Name)}}}ol.callRef=Av;ol.default=Lce});var yM=D(sA=>{"use strict";Object.defineProperty(sA,"__esModule",{value:!0});var Uce=dM(),Kce=mM(),Vce=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Uce.default,Kce.default];sA.default=Vce});var gM=D(oA=>{"use strict";Object.defineProperty(oA,"__esModule",{value:!0});var xv=ot(),Ou=xv.operators,Cv={maximum:{okStr:"<=",ok:Ou.LTE,fail:Ou.GT},minimum:{okStr:">=",ok:Ou.GTE,fail:Ou.LT},exclusiveMaximum:{okStr:"<",ok:Ou.LT,fail:Ou.GTE},exclusiveMinimum:{okStr:">",ok:Ou.GT,fail:Ou.LTE}},Hce={message:({keyword:t,schemaCode:e})=>(0,xv.str)`must be ${Cv[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,xv._)`{comparison: ${Cv[t].okStr}, limit: ${e}}`},Wce={keyword:Object.keys(Cv),type:"number",schemaType:"number",$data:!0,error:Hce,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,xv._)`${r} ${Cv[e].fail} ${n} || isNaN(${r})`)}};oA.default=Wce});var vM=D(aA=>{"use strict";Object.defineProperty(aA,"__esModule",{value:!0});var Qh=ot(),zce={message:({schemaCode:t})=>(0,Qh.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Qh._)`{multipleOf: ${t}}`},Jce={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:zce,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,Qh._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Qh._)`${o} !== parseInt(${o})`;t.fail$data((0,Qh._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};aA.default=Jce});var wM=D(uA=>{"use strict";Object.defineProperty(uA,"__esModule",{value:!0});function bM(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}uA.default=bM;bM.code='require("ajv/dist/runtime/ucs2length").default'});var EM=D(cA=>{"use strict";Object.defineProperty(cA,"__esModule",{value:!0});var al=ot(),Gce=Ct(),Xce=wM(),Yce={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,al.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,al._)`{limit: ${t}}`},Zce={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Yce,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?al.operators.GT:al.operators.LT,o=s.opts.unicode===!1?(0,al._)`${r}.length`:(0,al._)`${(0,Gce.useFunc)(t.gen,Xce.default)}(${r})`;t.fail$data((0,al._)`${o} ${i} ${n}`)}};cA.default=Zce});var _M=D(lA=>{"use strict";Object.defineProperty(lA,"__esModule",{value:!0});var Qce=Yi(),Pv=ot(),ele={message:({schemaCode:t})=>(0,Pv.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Pv._)`{pattern: ${t}}`},tle={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:ele,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Pv._)`(new RegExp(${s}, ${o}))`:(0,Qce.usePattern)(t,n);t.fail$data((0,Pv._)`!${a}.test(${e})`)}};lA.default=tle});var DM=D(dA=>{"use strict";Object.defineProperty(dA,"__esModule",{value:!0});var em=ot(),rle={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,em.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,em._)`{limit: ${t}}`},nle={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:rle,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?em.operators.GT:em.operators.LT;t.fail$data((0,em._)`Object.keys(${r}).length ${s} ${n}`)}};dA.default=nle});var SM=D(fA=>{"use strict";Object.defineProperty(fA,"__esModule",{value:!0});var tm=Yi(),rm=ot(),ile=Ct(),sle={message:({params:{missingProperty:t}})=>(0,rm.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,rm._)`{missingProperty: ${t}}`},ole={keyword:"required",type:"object",schemaType:"array",$data:!0,error:sle,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:p}=t.it;for(let g of r)if(f?.[g]===void 0&&!p.has(g)){let w=o.schemaEnv.baseId+o.errSchemaPath,P=`required property "${g}" is not defined at "${w}" (strictRequired)`;(0,ile.checkStrictMode)(o,P,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(rm.nil,d);else for(let f of r)(0,tm.checkReportMissingProp)(t,f)}function l(){let f=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(f,p)),t.ok(p)}else e.if((0,tm.checkMissingProp)(t,r,f)),(0,tm.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,tm.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function h(f,p){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(p,(0,tm.propertyInData)(e,s,f,a.ownProperties)),e.if((0,rm.not)(p),()=>{t.error(),e.break()})},rm.nil)}}};fA.default=ole});var AM=D(pA=>{"use strict";Object.defineProperty(pA,"__esModule",{value:!0});var nm=ot(),ale={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,nm.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,nm._)`{limit: ${t}}`},ule={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:ale,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?nm.operators.GT:nm.operators.LT;t.fail$data((0,nm._)`${r}.length ${s} ${n}`)}};pA.default=ule});var xM=D(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0});var hA=Hh(),bn=ot(),cle=Ct(),lle=kd(),dle={message:({params:{i:t,j:e}})=>(0,bn.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,bn._)`{i: ${t}, j: ${e}}`},fle={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:dle,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,hA.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,bn._)`${o} === false`),t.ok(u);function l(){let p=e.let("i",(0,bn._)`${r}.length`),g=e.let("j");t.setParams({i:p,j:g}),e.assign(u,!0),e.if((0,bn._)`${p} > 1`,()=>(d()?h:f)(p,g))}function d(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function h(p,g){let w=e.name("item"),P=(0,hA.checkDataTypes)(c,w,a.opts.strictNumbers,hA.DataType.Wrong),C=e.const("indices",(0,bn._)`{}`);e.for((0,bn._)`;${p}--;`,()=>{e.let(w,(0,bn._)`${r}[${p}]`),e.if(P,(0,bn._)`continue`),c.length>1&&e.if((0,bn._)`typeof ${w} == "string"`,(0,bn._)`${w} += "_"`),e.if((0,bn._)`typeof ${C}[${w}] == "number"`,()=>{e.assign(g,(0,bn._)`${C}[${w}]`),t.error(),e.assign(u,!1).break()}).code((0,bn._)`${C}[${w}] = ${p}`)})}function f(p,g){let w=(0,cle.useFunc)(e,lle.default),P=e.name("outer");e.label(P).for((0,bn._)`;${p}--;`,()=>e.for((0,bn._)`${g} = ${p}; ${g}--;`,()=>e.if((0,bn._)`${w}(${r}[${p}], ${r}[${g}])`,()=>{t.error(),e.assign(u,!1).break(P)})))}}};mA.default=fle});var CM=D(gA=>{"use strict";Object.defineProperty(gA,"__esModule",{value:!0});var yA=ot(),ple=Ct(),hle=kd(),mle={message:"must be equal to constant",params:({schemaCode:t})=>(0,yA._)`{allowedValue: ${t}}`},yle={keyword:"const",$data:!0,error:mle,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,yA._)`!${(0,ple.useFunc)(e,hle.default)}(${r}, ${s})`):t.fail((0,yA._)`${i} !== ${r}`)}};gA.default=yle});var PM=D(vA=>{"use strict";Object.defineProperty(vA,"__esModule",{value:!0});var im=ot(),gle=Ct(),vle=kd(),ble={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,im._)`{allowedValues: ${t}}`},wle={keyword:"enum",schemaType:"array",$data:!0,error:ble,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,gle.useFunc)(e,vle.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);l=(0,im.or)(...s.map((p,g)=>h(f,g)))}t.pass(l);function d(){e.assign(l,!1),e.forOf("v",i,f=>e.if((0,im._)`${c()}(${r}, ${f})`,()=>e.assign(l,!0).break()))}function h(f,p){let g=s[p];return typeof g=="object"&&g!==null?(0,im._)`${c()}(${r}, ${f}[${p}])`:(0,im._)`${r} === ${g}`}}};vA.default=wle});var OM=D(bA=>{"use strict";Object.defineProperty(bA,"__esModule",{value:!0});var Ele=gM(),_le=vM(),Dle=EM(),Sle=_M(),Ale=DM(),xle=SM(),Cle=AM(),Ple=xM(),Ole=CM(),kle=PM(),Ble=[Ele.default,_le.default,Dle.default,Sle.default,Ale.default,xle.default,Cle.default,Ple.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Ole.default,kle.default];bA.default=Ble});var EA=D(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.validateAdditionalItems=void 0;var ul=ot(),wA=Ct(),Ile={message:({params:{len:t}})=>(0,ul.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ul._)`{limit: ${t}}`},Tle={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Ile,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,wA.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}kM(t,n)}};function kM(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,ul._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ul._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,wA.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,ul._)`${a} <= ${e.length}`);r.if((0,ul.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:wA.Type.Num},c),o.allErrors||r.if((0,ul.not)(c),()=>r.break())})}}sm.validateAdditionalItems=kM;sm.default=Tle});var _A=D(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.validateTuple=void 0;var BM=ot(),Ov=Ct(),Fle=Yi(),Rle={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return IM(t,"additionalItems",e);r.items=!0,!(0,Ov.alwaysValidSchema)(r,e)&&t.ok((0,Fle.validateArray)(t))}};function IM(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Ov.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,BM._)`${i}.length`);r.forEach((d,h)=>{(0,Ov.alwaysValidSchema)(a,d)||(n.if((0,BM._)`${c} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function l(d){let{opts:h,errSchemaPath:f}=a,p=r.length,g=p===d.minItems&&(p===d.maxItems||d[e]===!1);if(h.strictTuples&&!g){let w=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Ov.checkStrictMode)(a,w,h.strictTuples)}}}om.validateTuple=IM;om.default=Rle});var TM=D(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});var $le=_A(),Nle={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,$le.validateTuple)(t,"items")};DA.default=Nle});var RM=D(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0});var FM=ot(),Mle=Ct(),jle=Yi(),qle=EA(),Lle={message:({params:{len:t}})=>(0,FM.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,FM._)`{limit: ${t}}`},Ule={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Lle,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,Mle.alwaysValidSchema)(n,e)&&(s?(0,qle.validateAdditionalItems)(t,s):t.ok((0,jle.validateArray)(t)))}};SA.default=Ule});var $M=D(AA=>{"use strict";Object.defineProperty(AA,"__esModule",{value:!0});var Qi=ot(),kv=Ct(),Kle={message:({params:{min:t,max:e}})=>e===void 0?(0,Qi.str)`must contain at least ${t} valid item(s)`:(0,Qi.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Qi._)`{minContains: ${t}}`:(0,Qi._)`{minContains: ${t}, maxContains: ${e}}`},Vle={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Kle,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,Qi._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,kv.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,kv.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,kv.alwaysValidSchema)(i,r)){let g=(0,Qi._)`${l} >= ${o}`;a!==void 0&&(g=(0,Qi._)`${g} && ${l} <= ${a}`),t.pass(g);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,Qi._)`${s}.length > 0`,h)):(e.let(d,!1),h()),t.result(d,()=>t.reset());function h(){let g=e.name("_valid"),w=e.let("count",0);f(g,()=>e.if(g,()=>p(w)))}function f(g,w){e.forRange("i",0,l,P=>{t.subschema({keyword:"contains",dataProp:P,dataPropType:kv.Type.Num,compositeRule:!0},g),w()})}function p(g){e.code((0,Qi._)`${g}++`),a===void 0?e.if((0,Qi._)`${g} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,Qi._)`${g} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,Qi._)`${g} >= ${o}`,()=>e.assign(d,!0)))}}};AA.default=Vle});var jM=D(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.validateSchemaDeps=_o.validatePropertyDeps=_o.error=void 0;var xA=ot(),Hle=Ct(),am=Yi();_o.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,xA.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,xA._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Wle={keyword:"dependencies",type:"object",schemaType:"object",error:_o.error,code(t){let[e,r]=zle(t);NM(t,e),MM(t,r)}};function zle({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function NM(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,am.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,am.checkReportMissingProp)(t,c)}):(r.if((0,xA._)`${u} && (${(0,am.checkMissingProp)(t,a,i)})`),(0,am.reportMissingProp)(t,i),r.else())}}_o.validatePropertyDeps=NM;function MM(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Hle.alwaysValidSchema)(i,e[a])||(r.if((0,am.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}_o.validateSchemaDeps=MM;_o.default=Wle});var LM=D(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0});var qM=ot(),Jle=Ct(),Gle={message:"property name must be valid",params:({params:t})=>(0,qM._)`{propertyName: ${t.propertyName}}`},Xle={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Gle,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,Jle.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,qM.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};CA.default=Xle});var OA=D(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0});var Bv=Yi(),xs=ot(),Yle=Sa(),Iv=Ct(),Zle={message:"must NOT have additional properties",params:({params:t})=>(0,xs._)`{additionalProperty: ${t.additionalProperty}}`},Qle={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Zle,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Iv.alwaysValidSchema)(o,r))return;let c=(0,Bv.allSchemaProperties)(n.properties),l=(0,Bv.allSchemaProperties)(n.patternProperties);d(),t.ok((0,xs._)`${i} === ${Yle.default.errors}`);function d(){e.forIn("key",s,w=>{!c.length&&!l.length?p(w):e.if(h(w),()=>p(w))})}function h(w){let P;if(c.length>8){let C=(0,Iv.schemaRefOrVal)(o,n.properties,"properties");P=(0,Bv.isOwnProperty)(e,C,w)}else c.length?P=(0,xs.or)(...c.map(C=>(0,xs._)`${w} === ${C}`)):P=xs.nil;return l.length&&(P=(0,xs.or)(P,...l.map(C=>(0,xs._)`${(0,Bv.usePattern)(t,C)}.test(${w})`))),(0,xs.not)(P)}function f(w){e.code((0,xs._)`delete ${s}[${w}]`)}function p(w){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){f(w);return}if(r===!1){t.setParams({additionalProperty:w}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Iv.alwaysValidSchema)(o,r)){let P=e.name("valid");u.removeAdditional==="failing"?(g(w,P,!1),e.if((0,xs.not)(P),()=>{t.reset(),f(w)})):(g(w,P),a||e.if((0,xs.not)(P),()=>e.break()))}}function g(w,P,C){let v={keyword:"additionalProperties",dataProp:w,dataPropType:Iv.Type.Str};C===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,P)}}};PA.default=Qle});var VM=D(BA=>{"use strict";Object.defineProperty(BA,"__esModule",{value:!0});var ede=Gh(),UM=Yi(),kA=Ct(),KM=OA(),tde={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&KM.default.code(new ede.KeywordCxt(i,KM.default,"additionalProperties"));let o=(0,UM.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=kA.mergeEvaluated.props(e,(0,kA.toHash)(o),i.props));let a=o.filter(d=>!(0,kA.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let u=e.name("valid");for(let d of a)c(d)?l(d):(e.if((0,UM.propertyInData)(e,s,d,i.opts.ownProperties)),l(d),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(u);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function l(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},u)}}};BA.default=tde});var JM=D(IA=>{"use strict";Object.defineProperty(IA,"__esModule",{value:!0});var HM=Yi(),Tv=ot(),WM=Ct(),zM=Ct(),rde={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,HM.allSchemaProperties)(r),u=a.filter(g=>(0,WM.alwaysValidSchema)(i,r[g]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof Tv.Name)&&(i.props=(0,zM.evaluatedPropsToName)(e,i.props));let{props:d}=i;h();function h(){for(let g of a)c&&f(g),i.allErrors?p(g):(e.var(l,!0),p(g),e.if(l))}function f(g){for(let w in c)new RegExp(g).test(w)&&(0,WM.checkStrictMode)(i,`property ${w} matches pattern ${g} (use allowMatchingProperties)`)}function p(g){e.forIn("key",n,w=>{e.if((0,Tv._)`${(0,HM.usePattern)(t,g)}.test(${w})`,()=>{let P=u.includes(g);P||t.subschema({keyword:"patternProperties",schemaProp:g,dataProp:w,dataPropType:zM.Type.Str},l),i.opts.unevaluated&&d!==!0?e.assign((0,Tv._)`${d}[${w}]`,!0):!P&&!i.allErrors&&e.if((0,Tv.not)(l),()=>e.break())})})}}};IA.default=rde});var GM=D(TA=>{"use strict";Object.defineProperty(TA,"__esModule",{value:!0});var nde=Ct(),ide={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,nde.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};TA.default=ide});var XM=D(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});var sde=Yi(),ode={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:sde.validateUnion,error:{message:"must match a schema in anyOf"}};FA.default=ode});var YM=D(RA=>{"use strict";Object.defineProperty(RA,"__esModule",{value:!0});var Fv=ot(),ade=Ct(),ude={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Fv._)`{passingSchemas: ${t.passing}}`},cde={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ude,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,d)=>{let h;(0,ade.alwaysValidSchema)(s,l)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},u),d>0&&e.if((0,Fv._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Fv._)`[${a}, ${d}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,d),h&&t.mergeEvaluated(h,Fv.Name)})})}}};RA.default=cde});var ZM=D($A=>{"use strict";Object.defineProperty($A,"__esModule",{value:!0});var lde=Ct(),dde={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,lde.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};$A.default=dde});var t9=D(NA=>{"use strict";Object.defineProperty(NA,"__esModule",{value:!0});var Rv=ot(),e9=Ct(),fde={message:({params:t})=>(0,Rv.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Rv._)`{failingKeyword: ${t.ifClause}}`},pde={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:fde,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,e9.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=QM(n,"then"),i=QM(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,Rv.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,d){return()=>{let h=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(h,o),d?e.assign(d,(0,Rv._)`${l}`):t.setParams({ifClause:l})}}}};function QM(t,e){let r=t.schema[e];return r!==void 0&&!(0,e9.alwaysValidSchema)(t,r)}NA.default=pde});var r9=D(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0});var hde=Ct(),mde={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,hde.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};MA.default=mde});var n9=D(jA=>{"use strict";Object.defineProperty(jA,"__esModule",{value:!0});var yde=EA(),gde=TM(),vde=_A(),bde=RM(),wde=$M(),Ede=jM(),_de=LM(),Dde=OA(),Sde=VM(),Ade=JM(),xde=GM(),Cde=XM(),Pde=YM(),Ode=ZM(),kde=t9(),Bde=r9();function Ide(t=!1){let e=[xde.default,Cde.default,Pde.default,Ode.default,kde.default,Bde.default,_de.default,Dde.default,Ede.default,Sde.default,Ade.default];return t?e.push(gde.default,bde.default):e.push(yde.default,vde.default),e.push(wde.default),e}jA.default=Ide});var i9=D(qA=>{"use strict";Object.defineProperty(qA,"__esModule",{value:!0});var xr=ot(),Tde={message:({schemaCode:t})=>(0,xr.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,xr._)`{format: ${t}}`},Fde={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Tde,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:d}=a;if(!u.validateFormats)return;s?h():f();function h(){let p=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),g=r.const("fDef",(0,xr._)`${p}[${o}]`),w=r.let("fType"),P=r.let("format");r.if((0,xr._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(w,(0,xr._)`${g}.type || "string"`).assign(P,(0,xr._)`${g}.validate`),()=>r.assign(w,(0,xr._)`"string"`).assign(P,g)),t.fail$data((0,xr.or)(C(),v()));function C(){return u.strictSchema===!1?xr.nil:(0,xr._)`${o} && !${P}`}function v(){let k=l.$async?(0,xr._)`(${g}.async ? await ${P}(${n}) : ${P}(${n}))`:(0,xr._)`${P}(${n})`,B=(0,xr._)`(typeof ${P} == "function" ? ${k} : ${P}.test(${n}))`;return(0,xr._)`${P} && ${P} !== true && ${w} === ${e} && !${B}`}}function f(){let p=d.formats[i];if(!p){C();return}if(p===!0)return;let[g,w,P]=v(p);g===e&&t.pass(k());function C(){if(u.strictSchema===!1){d.logger.warn(B());return}throw new Error(B());function B(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function v(B){let T=B instanceof RegExp?(0,xr.regexpCode)(B):u.code.formats?(0,xr._)`${u.code.formats}${(0,xr.getProperty)(i)}`:void 0,M=r.scopeValue("formats",{key:i,ref:B,code:T});return typeof B=="object"&&!(B instanceof RegExp)?[B.type||"string",B.validate,(0,xr._)`${M}.validate`]:["string",B,M]}function k(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,xr._)`await ${P}(${n})`}return typeof w=="function"?(0,xr._)`${P}(${n})`:(0,xr._)`${P}.test(${n})`}}}};qA.default=Fde});var s9=D(LA=>{"use strict";Object.defineProperty(LA,"__esModule",{value:!0});var Rde=i9(),$de=[Rde.default];LA.default=$de});var o9=D(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.contentVocabulary=af.metadataVocabulary=void 0;af.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];af.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var u9=D(UA=>{"use strict";Object.defineProperty(UA,"__esModule",{value:!0});var Nde=yM(),Mde=OM(),jde=n9(),qde=s9(),a9=o9(),Lde=[Nde.default,Mde.default,(0,jde.default)(),qde.default,a9.metadataVocabulary,a9.contentVocabulary];UA.default=Lde});var c9=D(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.DiscrError=void 0;var Ude;(function(t){t.Tag="tag",t.Mapping="mapping"})(Ude=um.DiscrError||(um.DiscrError={}))});var d9=D(VA=>{"use strict";Object.defineProperty(VA,"__esModule",{value:!0});var uf=ot(),KA=c9(),l9=_v(),Kde=Ct(),Vde={message:({params:{discrError:t,tagName:e}})=>t===KA.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,uf._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Hde={keyword:"discriminator",type:"object",schemaType:"object",error:Vde,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,uf._)`${r}${(0,uf.getProperty)(a)}`);e.if((0,uf._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:KA.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let f=h();e.if(!1);for(let p in f)e.elseIf((0,uf._)`${c} === ${p}`),e.assign(u,d(f[p]));e.else(),t.error(!1,{discrError:KA.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function d(f){let p=e.name("valid"),g=t.subschema({keyword:"oneOf",schemaProp:f},p);return t.mergeEvaluated(g,uf.Name),p}function h(){var f;let p={},g=P(s),w=!0;for(let k=0;k<o.length;k++){let B=o[k];B?.$ref&&!(0,Kde.schemaHasRulesButRef)(B,i.self.RULES)&&(B=l9.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,B?.$ref),B instanceof l9.SchemaEnv&&(B=B.schema));let T=(f=B?.properties)===null||f===void 0?void 0:f[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);w=w&&(g||P(B)),C(T,k)}if(!w)throw new Error(`discriminator: "${a}" must be required`);return p;function P({required:k}){return Array.isArray(k)&&k.includes(a)}function C(k,B){if(k.const)v(k.const,B);else if(k.enum)for(let T of k.enum)v(T,B);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(k,B){if(typeof k!="string"||k in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[k]=B}}}};VA.default=Hde});var f9=D((Oxe,Wde)=>{Wde.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Mv=D((hr,h9)=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.MissingRefError=hr.ValidationError=hr.CodeGen=hr.Name=hr.nil=hr.stringify=hr.str=hr._=hr.KeywordCxt=void 0;var zde=lM(),Jde=u9(),Gde=d9(),p9=f9(),Xde=["/properties"],$v="http://json-schema.org/draft-07/schema",Nv=class extends zde.default{_addVocabularies(){super._addVocabularies(),Jde.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Gde.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(p9,Xde):p9;this.addMetaSchema(e,$v,!1),this.refs["http://json-schema.org/schema"]=$v}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema($v)?$v:void 0)}};h9.exports=hr=Nv;Object.defineProperty(hr,"__esModule",{value:!0});hr.default=Nv;var Yde=Gh();Object.defineProperty(hr,"KeywordCxt",{enumerable:!0,get:function(){return Yde.KeywordCxt}});var cf=ot();Object.defineProperty(hr,"_",{enumerable:!0,get:function(){return cf._}});Object.defineProperty(hr,"str",{enumerable:!0,get:function(){return cf.str}});Object.defineProperty(hr,"stringify",{enumerable:!0,get:function(){return cf.stringify}});Object.defineProperty(hr,"nil",{enumerable:!0,get:function(){return cf.nil}});Object.defineProperty(hr,"Name",{enumerable:!0,get:function(){return cf.Name}});Object.defineProperty(hr,"CodeGen",{enumerable:!0,get:function(){return cf.CodeGen}});var Zde=bv();Object.defineProperty(hr,"ValidationError",{enumerable:!0,get:function(){return Zde.default}});var Qde=wv();Object.defineProperty(hr,"MissingRefError",{enumerable:!0,get:function(){return Qde.default}})});var w9=D(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.formatNames=Do.fastFormats=Do.fullFormats=void 0;function lf(t,e){return{validate:t,compare:e}}Do.fullFormats={date:lf(g9,zA),time:lf(v9,JA),"date-time":lf(nfe,b9),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:ofe,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:pfe,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:afe,int32:{type:"number",validate:lfe},int64:{type:"number",validate:dfe},float:{type:"number",validate:y9},double:{type:"number",validate:y9},password:!0,binary:!0};Do.fastFormats={...Do.fullFormats,date:lf(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,zA),time:lf(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,JA),"date-time":lf(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,b9),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Do.formatNames=Object.keys(Do.fullFormats);function efe(t){return t%4===0&&(t%100!==0||t%400===0)}var tfe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,rfe=[0,31,28,31,30,31,30,31,31,30,31,30,31];function g9(t){let e=tfe.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&efe(r)?29:rfe[n])}function zA(t,e){if(t&&e)return t>e?1:t<e?-1:0}var HA=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function v9(t,e){let r=HA.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function JA(t,e){if(!(t&&e))return;let r=HA.exec(t),n=HA.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var WA=/t|\s/i;function nfe(t){let e=t.split(WA);return e.length===2&&g9(e[0])&&v9(e[1],!0)}function b9(t,e){if(!(t&&e))return;let[r,n]=t.split(WA),[s,i]=e.split(WA),o=zA(r,s);if(o!==void 0)return o||JA(n,i)}var ife=/\/|:/,sfe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function ofe(t){return ife.test(t)&&sfe.test(t)}var m9=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function afe(t){return m9.lastIndex=0,m9.test(t)}var ufe=-(2**31),cfe=2**31-1;function lfe(t){return Number.isInteger(t)&&t<=cfe&&t>=ufe}function dfe(t){return Number.isInteger(t)}function y9(){return!0}var ffe=/[^\\]\\Z/;function pfe(t){if(ffe.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var E9=D(df=>{"use strict";Object.defineProperty(df,"__esModule",{value:!0});df.formatLimitDefinition=void 0;var hfe=Mv(),Cs=ot(),ku=Cs.operators,jv={formatMaximum:{okStr:"<=",ok:ku.LTE,fail:ku.GT},formatMinimum:{okStr:">=",ok:ku.GTE,fail:ku.LT},formatExclusiveMaximum:{okStr:"<",ok:ku.LT,fail:ku.GTE},formatExclusiveMinimum:{okStr:">",ok:ku.GT,fail:ku.LTE}},mfe={message:({keyword:t,schemaCode:e})=>Cs.str`should be ${jv[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>Cs._`{comparison: ${jv[t].okStr}, limit: ${e}}`};df.formatLimitDefinition={keyword:Object.keys(jv),type:"string",schemaType:"string",$data:!0,error:mfe,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new hfe.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let h=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",Cs._`${h}[${u.schemaCode}]`);t.fail$data(Cs.or(Cs._`typeof ${f} != "object"`,Cs._`${f} instanceof RegExp`,Cs._`typeof ${f}.compare != "function"`,d(f)))}function l(){let h=u.schema,f=a.formats[h];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${h}" does not define "compare" function`);let p=e.scopeValue("formats",{key:h,ref:f,code:o.code.formats?Cs._`${o.code.formats}${Cs.getProperty(h)}`:void 0});t.fail$data(d(p))}function d(h){return Cs._`${h}.compare(${r}, ${n}) ${jv[s].fail} 0`}},dependencies:["format"]};var yfe=t=>(t.addKeyword(df.formatLimitDefinition),t);df.default=yfe});var A9=D((cm,S9)=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});var ff=w9(),gfe=E9(),GA=ot(),_9=new GA.Name("fullFormats"),vfe=new GA.Name("fastFormats"),XA=(t,e={keywords:!0})=>{if(Array.isArray(e))return D9(t,e,ff.fullFormats,_9),t;let[r,n]=e.mode==="fast"?[ff.fastFormats,vfe]:[ff.fullFormats,_9],s=e.formats||ff.formatNames;return D9(t,s,r,n),e.keywords&&gfe.default(t),t};XA.get=(t,e="full")=>{let n=(e==="fast"?ff.fastFormats:ff.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function D9(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=GA._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}S9.exports=cm=XA;Object.defineProperty(cm,"__esModule",{value:!0});cm.default=XA});var C9=D(pf=>{"use strict";var ex=pf&&pf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pf,"__esModule",{value:!0});pf.InputDescriptorFilterEvaluationHandler=void 0;var YA=zi(),bfe=ex(Mv()),wfe=ex(A9()),x9=Wr(),ZA=ex(gs()),Efe=Ji(),_fe=Gi(),QA=class extends _fe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FilterEvaluation"}handle(e,r){let n=YA.JSONPath.nodes(e,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(e,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=Efe.JsonPathUtils.extractInputField(s.credential,o.value.path));let u=!1;for(let c of a)if(this.evaluateFilter(c,o.value)){u=!0;let l={result:Object.assign({},a[0]),valid:!0,format:s.format};this.getResults().push(Object.assign({},this.createResultObject(YA.JSONPath.stringify(o.path.slice(0,3)),i,l)))}if(!u)if(a.length){let c={result:Object.assign({},a[0]),valid:!1,format:s.format};this.createResponse(o,i,c,ZA.default.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{let c={valid:!1,format:s.format};this.createResponse(o,i,c,ZA.default.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(e)}createNoFieldResults(e,r,n){e.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,u;return((o=i.inDesc.constraints)===null||o===void 0?void 0:o.fields)===void 0||((u=(a=i.inDesc.constraints)===null||a===void 0?void 0:a.fields)===null||u===void 0?void 0:u.length)===0}).forEach(i=>{let o={result:[],valid:!0,format:n.format};this.getResults().push(Object.assign({},this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)))})}createResponse(e,r,n,s){this.getResults().push(Object.assign(Object.assign({},this.createResultObject(YA.JSONPath.stringify(e.path.slice(0,3)),r,n)),{status:x9.Status.ERROR,message:s}))}createResultObject(e,r,n){return{input_descriptor_path:e,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:x9.Status.INFO,message:ZA.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(e,r){var n;!((n=r.filter)===null||n===void 0)&&n.format&&r.filter.format==="date"&&this.transformDateFormat(e);let s=new bfe.default({verbose:!0,code:{source:!0,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});return(0,wfe.default)(s),r.filter?s.validate(r.filter,e.value):!0}transformDateFormat(e){let r=new Date(e.value),n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),e.value=r.getUTCFullYear()+"-"+n+"-"+s,e.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}};pf.InputDescriptorFilterEvaluationHandler=QA});var O9=D(P9=>{"use strict";Object.defineProperty(P9,"__esModule",{value:!0})});var B9=D(k9=>{"use strict";Object.defineProperty(k9,"__esModule",{value:!0})});var T9=D(I9=>{"use strict";Object.defineProperty(I9,"__esModule",{value:!0})});var R9=D(F9=>{"use strict";Object.defineProperty(F9,"__esModule",{value:!0})});var N9=D($9=>{"use strict";Object.defineProperty($9,"__esModule",{value:!0})});var j9=D(M9=>{"use strict";Object.defineProperty(M9,"__esModule",{value:!0})});var q9=D(qv=>{"use strict";Object.defineProperty(qv,"__esModule",{value:!0});qv.Directives=void 0;qv.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"}});var L9=D(Lv=>{"use strict";Object.defineProperty(Lv,"__esModule",{value:!0});Lv.ExchangeStatus=void 0;Lv.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"}});var K9=D(U9=>{"use strict";Object.defineProperty(U9,"__esModule",{value:!0})});var H9=D(V9=>{"use strict";Object.defineProperty(V9,"__esModule",{value:!0})});var z9=D(W9=>{"use strict";Object.defineProperty(W9,"__esModule",{value:!0})});var G9=D(J9=>{"use strict";Object.defineProperty(J9,"__esModule",{value:!0})});var Y9=D(X9=>{"use strict";Object.defineProperty(X9,"__esModule",{value:!0})});var Q9=D(Z9=>{"use strict";Object.defineProperty(Z9,"__esModule",{value:!0})});var tj=D(ej=>{"use strict";Object.defineProperty(ej,"__esModule",{value:!0})});var nj=D(rj=>{"use strict";Object.defineProperty(rj,"__esModule",{value:!0})});var sj=D(ij=>{"use strict";Object.defineProperty(ij,"__esModule",{value:!0})});var aj=D(oj=>{"use strict";Object.defineProperty(oj,"__esModule",{value:!0})});var cj=D(uj=>{"use strict";Object.defineProperty(uj,"__esModule",{value:!0})});var dj=D(lj=>{"use strict";Object.defineProperty(lj,"__esModule",{value:!0})});var pj=D(fj=>{"use strict";Object.defineProperty(fj,"__esModule",{value:!0})});var mj=D(hj=>{"use strict";Object.defineProperty(hj,"__esModule",{value:!0})});var gj=D(yj=>{"use strict";Object.defineProperty(yj,"__esModule",{value:!0})});var bj=D(vj=>{"use strict";Object.defineProperty(vj,"__esModule",{value:!0})});var wj=D(Uv=>{"use strict";Object.defineProperty(Uv,"__esModule",{value:!0});Uv.Optionality=void 0;Uv.Optionality={Required:"required",Preferred:"preferred"}});var _j=D(Ej=>{"use strict";Object.defineProperty(Ej,"__esModule",{value:!0})});var Sj=D(Dj=>{"use strict";Object.defineProperty(Dj,"__esModule",{value:!0})});var xj=D(Aj=>{"use strict";Object.defineProperty(Aj,"__esModule",{value:!0})});var Pj=D(Cj=>{"use strict";Object.defineProperty(Cj,"__esModule",{value:!0})});var kj=D(Oj=>{"use strict";Object.defineProperty(Oj,"__esModule",{value:!0})});var Ij=D(Bj=>{"use strict";Object.defineProperty(Bj,"__esModule",{value:!0})});var Fj=D(Tj=>{"use strict";Object.defineProperty(Tj,"__esModule",{value:!0})});var $j=D(Rj=>{"use strict";Object.defineProperty(Rj,"__esModule",{value:!0})});var Mj=D(Nj=>{"use strict";Object.defineProperty(Nj,"__esModule",{value:!0})});var jj=D(Kv=>{"use strict";Object.defineProperty(Kv,"__esModule",{value:!0});Kv.Rules=void 0;Kv.Rules={All:"all",Pick:"pick"}});var Lj=D(qj=>{"use strict";Object.defineProperty(qj,"__esModule",{value:!0})});var Kj=D(Uj=>{"use strict";Object.defineProperty(Uj,"__esModule",{value:!0})});var Vj=D(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0});Vv.Status=void 0;Vv.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"}});var Wj=D(Hj=>{"use strict";Object.defineProperty(Hj,"__esModule",{value:!0})});var Jj=D(zj=>{"use strict";Object.defineProperty(zj,"__esModule",{value:!0})});var Xj=D(Gj=>{"use strict";Object.defineProperty(Gj,"__esModule",{value:!0})});var Zj=D(Yj=>{"use strict";Object.defineProperty(Yj,"__esModule",{value:!0})});var Qj=D(Ne=>{"use strict";var Dfe=Ne&&Ne.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ge=Ne&&Ne.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dfe(e,t,r)};Object.defineProperty(Ne,"__esModule",{value:!0});Ge(O9(),Ne);Ge(B9(),Ne);Ge(T9(),Ne);Ge(R9(),Ne);Ge(N9(),Ne);Ge(j9(),Ne);Ge(q9(),Ne);Ge(L9(),Ne);Ge(K9(),Ne);Ge(H9(),Ne);Ge(z9(),Ne);Ge(G9(),Ne);Ge(Y9(),Ne);Ge(Q9(),Ne);Ge(tj(),Ne);Ge(nj(),Ne);Ge(sj(),Ne);Ge(aj(),Ne);Ge(cj(),Ne);Ge(dj(),Ne);Ge(pj(),Ne);Ge(mj(),Ne);Ge(gj(),Ne);Ge(bj(),Ne);Ge(wj(),Ne);Ge(_j(),Ne);Ge(Sj(),Ne);Ge(xj(),Ne);Ge(Pj(),Ne);Ge(kj(),Ne);Ge(Ij(),Ne);Ge(Fj(),Ne);Ge($j(),Ne);Ge(Mj(),Ne);Ge(jj(),Ne);Ge(Lj(),Ne);Ge(Kj(),Ne);Ge(Vj(),Ne);Ge(Wj(),Ne);Ge(Jj(),Ne);Ge(Xj(),Ne);Ge(Zj(),Ne)});var xa=D(cl=>{"use strict";var Sfe=cl&&cl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Afe=cl&&cl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Sfe(e,t,r)};Object.defineProperty(cl,"__esModule",{value:!0});Afe(Qj(),cl)});var eq=D(Wv=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});Wv.SubjectIsHolderEvaluationHandler=void 0;var Bu=zi(),Hv=xa(),ll=Wr(),xfe=Gi(),tx=class extends xfe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(ll.Status.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(ll.Status.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(ll.Status.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(e,r){this.findIsHolderFieldIdsToInputDescriptorsSets(e),this.findAllCredentialSubjects(r),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,ll.Status.INFO,Hv.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,ll.Status.WARN,Hv.Optionality.Preferred),this.updatePresentationSubmission(e)}findIsHolderFieldIdsToInputDescriptorsSets(e){var r;this.fieldIds.push(...Bu.JSONPath.nodes(e,"$..fields[*].id")),this.isHolder.push(...Bu.JSONPath.nodes(e,"$..is_holder[*]"));let n=(r=this.fieldIds)===null||r===void 0?void 0:r.map(i=>i.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,Hv.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,Hv.Optionality.Required)),s.forEach(i=>this.getResults().push(this.createResult(i[1],i[0],["",{}],ll.Status.ERROR,void 0)))}evaluateFields(e,r,n,s){let i=[];return r.filter(o=>o.value.directive===s).filter(o=>o.value.field_id.every(a=>n.includes(a))).forEach(o=>e.set(Bu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id)),r.filter(o=>o.value.directive===s).filter(o=>!o.value.field_id.every(a=>n.includes(a))).forEach(o=>i.push([Bu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id])),i}findAllCredentialSubjects(e){let r=Bu.JSONPath.nodes(e.map(n=>n.credential),"$..credentialSubject");for(let n=0;n<r.length;n++){let s=r[n],i=Bu.JSONPath.stringify(s.path.slice(0,2));this.credentialsSubjectsByPath.set(i,s.value),this.credentialsByPath.set(i,e[n])}}confirmAllFieldSetHasSameSubject(e,r,n){let s=Array.from(e).flatMap(u=>Array.from(this.credentialsSubjectsByPath).filter(c=>u[1].find(l=>Object.keys(c[1]).includes(l)))),i=this.mapCredentialPathsToInputDescriptors(n),o=Array.from(s).flatMap(u=>Object.keys(u[1]).filter(c=>c!=="id")),a=Array.from(e.values()).flatMap(u=>u.every(c=>o.includes(c)))[0];s.forEach(u=>{let c=i.get(u[0]);a&&u[1].id&&this.client.dids.includes(u[1].id)?this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,r,this.credentialsByPath.get(u[0]))):this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,ll.Status.ERROR,this.credentialsByPath.get(u[0])))})}mapCredentialPathsToInputDescriptors(e){var r;let n=new Map;return(r=this.fieldIds)===null||r===void 0||r.forEach(s=>{let i=Bu.JSONPath.stringify(s.path.slice(0,3));this.credentialsSubjectsByPath.forEach((o,a)=>{let u=this.isHolder.find(c=>Bu.JSONPath.stringify(c.path.slice(0,3))===i);Object.keys(o).includes(s.value)&&u?.value.directive===e&&n.set(a,i)})}),n}createResult(e,r,n,s,i,o){return{input_descriptor_path:r,verifiable_credential_path:n[0],evaluator:this.getName(),status:s,payload:Object.assign({fieldIdSet:e,credentialSubject:n[1]},i?{format:i.format}:{}),message:o??this.messages.get(s)}}};Wv.SubjectIsHolderEvaluationHandler=tx});var tq=D(hf=>{"use strict";var Cfe=hf&&hf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hf,"__esModule",{value:!0});hf.LimitDisclosureEvaluationHandler=void 0;var zv=xa(),Jv=Wr(),rx=Cfe(gs()),Pfe=Ji(),Ofe=Gi(),nx=class extends Ofe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"LimitDisclosureEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{var i,o,a;!((i=n.constraints)===null||i===void 0)&&i.fields&&(((o=n.constraints)===null||o===void 0?void 0:o.limit_disclosure)===zv.Optionality.Required||((a=n.constraints)===null||a===void 0?void 0:a.limit_disclosure)===zv.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(e,r,n,s){let i=this.client.limitDisclosureSignatureSuites,o=e.decoded.proof;return!o||Array.isArray(o)||!o.type?!1:i?.includes(o.type)?!0:(s==zv.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(e,r,n){let s=r?.fields,i=r.limit_disclosure;e.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o.credential,s,n,a,e,i)})}enforceLimitDisclosure(e,r,n,s,i,o){let a=this.createVcWithRequiredFields(e,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}createVcWithRequiredFields(e,r,n,s){let i={};i=Object.assign(i,e),i.credentialSubject={};for(let o of r)if(o.path){let a=Pfe.JsonPathUtils.extractInputField(e,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],e,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(e,r,n){let s=Object.assign({},r.credentialSubject);return e.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject=Object.assign(Object.assign({},n.credentialSubject),s),n}createSuccessResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===zv.Optionality.Required?Jv.Status.INFO:Jv.Status.WARN,message:rx.default.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Jv.Status.ERROR,message:rx.default.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(e,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Jv.Status.ERROR,message:rx.default.LIMIT_DISCLOSURE_NOT_SUPPORTED})}};hf.LimitDisclosureEvaluationHandler=nx});var nq=D(mf=>{"use strict";var kfe=mf&&mf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mf,"__esModule",{value:!0});mf.MarkForSubmissionEvaluationHandler=void 0;var Bfe=zi(),ix=Wr(),rq=kfe(gs()),Ife=Gi(),sx=class extends Ife.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"MarkForSubmissionEvaluation"}handle(e,r){let n=[...this.getResults()],s=n.filter(o=>o.status===ix.Status.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,e)}retrieveNoErrorStatus(e,r){return e.filter(s=>s.status!==ix.Status.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(e,r){this.removeDuplicate(e).forEach(n=>{let i=Bfe.JSONPath.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:ix.Status.INFO,payload:{group:i},message:rq.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(e){this.removeDuplicate(e).forEach(r=>{let n=Object.assign({},r.payload);n.evaluator=r.evaluator,this.getResults().push(Object.assign(Object.assign({},r),{evaluator:this.getName(),message:rq.default.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}))})}};mf.MarkForSubmissionEvaluationHandler=sx});var iq=D(yf=>{"use strict";var Tfe=yf&&yf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yf,"__esModule",{value:!0});yf.PredicateRelatedFieldEvaluationHandler=void 0;var Ffe=xa(),Rfe=Wr(),$fe=Tfe(gs()),Nfe=Gi(),ox=class extends Nfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"PredicateRelatedFieldEvaluation"}handle(e){e.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(e,r){if(r?.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,e,r,n)}examinePredicateForFilterEvaluationResult(e,r,n,s,i){var o;let a=this.retrieveResultInputDescriptorIdx(e[r].input_descriptor_path);if(e[r].payload&&e[r].payload.result&&e[r].payload.result.path&&e[r].evaluator==="FilterEvaluation"&&n===a&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&(!((o=s.fields[i].path)===null||o===void 0)&&o.includes(this.concatenatePath(e[r].payload.result.path)))){let u=Object.assign({},e[r].payload.result),c=this.createResultObject(n,r,u,e);s.fields[i].predicate===Ffe.Optionality.Required||(c.payload.value=!0),e.push(c)}}retrieveResultInputDescriptorIdx(e){let r="$.input_descriptors[",n=e.indexOf(r),s=e.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(e){let r="";for(let n=0;n<e.length;n++)typeof e[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=e[n]+".";return r.substring(0,r.length-1)}createResultObject(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:Rfe.Status.INFO,message:$fe.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}};yf.PredicateRelatedFieldEvaluationHandler=ox});var oq=D(Gv=>{"use strict";Object.defineProperty(Gv,"__esModule",{value:!0});Gv.SameSubjectEvaluationHandler=void 0;var Iu=zi(),sq=xa(),Ca=Wr(),Mfe=Gi(),ax=class extends Mfe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(Ca.Status.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(Ca.Status.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(Ca.Status.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(e,r){let n=this.mapSameSubjectFieldIdsToInputDescriptors(e),s=this.mapCredentialsToResultObjecs(r,n),i=this.countSameSubjectOccurrences(n,s);this.generateErrorResults(i,s),this.updatePresentationSubmission(e)}mapSameSubjectFieldIdsToInputDescriptors(e){this.fieldIds.push(...Iu.JSONPath.nodes(e,"$..fields[*].id")),this.sameSubject.push(...Iu.JSONPath.nodes(e,"$..same_subject[*]"));let r=[];return this.fieldIds.forEach(n=>{let s=this.sameSubject.find(i=>i.value.field_id.includes(n.value));s&&r.push([n,s])}),r}generateErrorResults(e,r){e.forEach((n,s)=>{let i=r.filter(o=>s===o.payload.fieldIdSet).map(o=>o.payload.credentialSubject.id);(i.length!==n||new Set(i).size!==1)&&r.forEach((o,a,u)=>{o.payload.fieldIdSet===s&&(o.status=Ca.Status.ERROR,o.message=this.messages.get(Ca.Status.ERROR),u[a]=o)})}),this.client.results.push(...r)}countSameSubjectOccurrences(e,r){let n=new Map;return e.forEach(s=>{r.filter(o=>s[1].value.field_id===o.payload.fieldIdSet)&&(n.has(s[1].value.field_id)&&n.get(s[1].value.field_id)?n.set(s[1].value.field_id,n.get(s[1].value.field_id)+1):n.set(s[1].value.field_id,1))}),n}mapCredentialsToResultObjecs(e,r){let n=[...Iu.JSONPath.nodes(e.map(i=>i.credential),"$..credentialSubject")],s=[];return n.forEach(i=>{let o=r.find(a=>Iu.JSONPath.query(i.value,`$..${a[0].value}`).length!==0);o&&o[1].value.directive===sq.Optionality.Required?s.push({input_descriptor_path:Iu.JSONPath.stringify(o[0].path.slice(0,3)),status:Ca.Status.INFO,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Ca.Status.INFO),verifiable_credential_path:Iu.JSONPath.stringify(i.path.slice(0,2))}):o&&o[1].value.directive===sq.Optionality.Preferred&&s.push({input_descriptor_path:Iu.JSONPath.stringify(o[0].path.slice(0,3)),status:Ca.Status.WARN,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Ca.Status.WARN),verifiable_credential_path:Iu.JSONPath.stringify(i.path.slice(0,2))})}),s}};Gv.SameSubjectEvaluationHandler=ax});var lq=D(gf=>{"use strict";var jfe=gf&&gf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gf,"__esModule",{value:!0});gf.SubjectIsIssuerEvaluationHandler=void 0;var qfe=xa(),aq=G0(),uq=Wr(),cq=jfe(gs()),ux=Ji(),Lfe=Gi(),cx=class extends Lfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"SubjectIsIssuerEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{let i=n.constraints;i?.subject_is_issuer===qfe.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(e)}checkSubjectIsIssuer(e,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===e){let i=ux.JsonPathUtils.extractInputField(r.map(o=>o.credential),[s.path]);for(let o of i){let a=(0,ux.getIssuerString)(o.value);o&&o.value&&(0,ux.getSubjectIdsAsString)(o.value).every(u=>u===a)?this.getResults().push(this.generateSuccessResult(n,s.path,aq.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,aq.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:uq.Status.ERROR,message:cq.default.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:uq.Status.INFO,message:s??cq.default.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}};gf.SubjectIsIssuerEvaluationHandler=cx});var dq,fq=Ot(()=>{dq="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var mq={};ar(mq,{customAlphabet:()=>Ufe,customRandom:()=>hq,nanoid:()=>Kfe,random:()=>pq,urlAlphabet:()=>dq});var pq,hq,Ufe,Kfe,yq=Ot(()=>{fq();pq=t=>crypto.getRandomValues(new Uint8Array(t)),hq=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let a=r(s),u=s;for(;u--;)if(o+=t[a[u]&n]||"",o.length===i)return o}}},Ufe=(t,e=21)=>hq(t,e,pq),Kfe=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")});var gq=D(vf=>{"use strict";var Vfe=vf&&vf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vf,"__esModule",{value:!0});vf.UriEvaluationHandler=void 0;var Hfe=zi(),Wfe=(yq(),Rf(mq)),lm=Wr(),lx=Gc(),Xv=Vfe(gs()),zfe=Gi(),Ps=class extends zfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"UriEvaluation"}handle(e,r){e.input_descriptors.forEach((s,i)=>{let o=e.getVersion()!==lx.PEVersion.v2?s.schema.map(a=>a.uri):[];r.forEach((a,u)=>{let c=Ps.buildVcContextAndSchemaUris(a.credential,e.getVersion());this.evaluateUris(a,c,o,i,u,e.getVersion())})});let n=this.getResults().filter(s=>s.status===lm.Status.INFO).map(s=>{var i;return{id:Hfe.JSONPath.nodes(e,s.input_descriptor_path)[0].value.id,format:(i=s.payload)===null||i===void 0?void 0:i.format,path:s.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:(0,Wfe.nanoid)(),definition_id:e.id,descriptor_map:n})}evaluateUris(e,r,n,s,i,o){let a=!1;if(o===lx.PEVersion.v1){for(let u=0;u<n.length;u++)Ps.containsHashlink(n[u])&&this.getResults().push(this.createWarnResultObject(s,i));for(let u=0;u<r.length;u++)n.find(c=>c===r[u])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(e,n,s,i)):this.getResults().push(this.createErrorResultObject(e,n,s,i))}static buildVcContextAndSchemaUris(e,r){let n=[];return Array.isArray(e["@context"])?e["@context"].forEach(s=>n.push(s)):n.push(e["@context"]),Array.isArray(e.credentialSchema)&&e.credentialSchema.length>0?e.credentialSchema.forEach(s=>n.push(s.id)):e.credentialSchema&&n.push(e.credentialSchema.id),r===lx.PEVersion.v1&&(Array.isArray(e.type)?e.type.forEach(s=>n.push(s)):e.type&&n.push(e.type)),n}createSuccessResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=lm.Status.INFO,i.message=Xv.default.URI_EVALUATION_PASSED,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createErrorResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=lm.Status.ERROR,i.message=Xv.default.URI_EVALUATION_DIDNT_PASS,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createWarnResultObject(e,r){let n=this.createResult(e,r);return n.status=lm.Status.WARN,n.message=Xv.default.URI_EVALUATION_DIDNT_PASS,n.payload=Xv.default.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(e,r){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:lm.Status.INFO,message:void 0}}static containsHashlink(e){return!(this.matchAll(e,Ps.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(e,Ps.HASHLINK_URL_ENCODED_REGEX).next().done)}};vf.UriEvaluationHandler=Ps;Ps.matchAll=HD();Ps.HASHLINK_URL_ENCODED_REGEX=/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g;Ps.HASHLINK_QUERY_URL_REGEX=/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g});var wq=D(bf=>{"use strict";var Jfe=bf&&bf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bf,"__esModule",{value:!0});bf.FormatRestrictionEvaluationHandler=void 0;var vq=Wr(),bq=Jfe(gs()),Gfe=Gi(),dx=class extends Gfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FormatRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{!this.client.restrictToFormats||Object.keys(this.client.restrictToFormats).includes(i.format)?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${i.format} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:vq.Status.ERROR,message:bq.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:vq.Status.INFO,message:s??bq.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};bf.FormatRestrictionEvaluationHandler=dx});var Dq=D(wf=>{"use strict";var Xfe=wf&&wf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wf,"__esModule",{value:!0});wf.DIDRestrictionEvaluationHandler=void 0;var Eq=Wr(),_q=Xfe(gs()),Yfe=Ji(),Zfe=Gi(),fx=class extends Zfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"DIDRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{let a=typeof i.credential.issuer=="object"?i.credential.issuer.id:i.credential.issuer;!this.client.hasRestrictToDIDMethods()||!a||(0,Yfe.isRestrictedDID)(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Eq.Status.ERROR,message:_q.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Eq.Status.INFO,message:s??_q.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};wf.DIDRestrictionEvaluationHandler=fx});var Sq=D(sn=>{"use strict";var Qfe=sn&&sn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),es=sn&&sn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Qfe(e,t,r)};Object.defineProperty(sn,"__esModule",{value:!0});es(Gi(),sn);es(tN(),sn);es(C9(),sn);es(eq(),sn);es(tq(),sn);es(nq(),sn);es(iq(),sn);es(oq(),sn);es(lq(),sn);es(gq(),sn);es(wq(),sn);es(Dq(),sn)});var mx=D(Ef=>{"use strict";var epe=Ef&&Ef.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.EvaluationClient=void 0;var tpe=G0(),rpe=Wr(),npe=epe(gs()),px=Ji(),So=Sq(),Aq=[tpe.IProofType.BbsBlsSignatureProof2020],hx=class{constructor(){this.failed_catched={tag:"root",status:rpe.Status.ERROR,message:npe.default.UNKNOWN_EXCEPTION,stacktrace:""},this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=Aq,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(e,r,n){this._restrictToDIDMethods=n?.restrictToDIDMethods?(0,px.uniformDIDMethods)(n?.restrictToDIDMethods):[],this._dids=n?.holderDIDs?(0,px.filterToRestrictedDIDs)(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n?.limitDisclosureSignatureSuites,this._restrictToFormats=n?.restrictToFormats,this._generatePresentationSubmission=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:!0,n?.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s?.handle(e,r);s?.hasNext();){s=s.getNext();try{s?.handle(e,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(e){this._dids=e}assertPresentationSubmission(){if(!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(e){this._generatePresentationSubmission=e}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(e){this._presentationSubmission=e}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(e){this._wrappedVcs=e}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||Aq}set limitDisclosureSignatureSuites(e){this._limitDisclosureSignatureSuites=e}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(e){this._restrictToDIDMethods=(0,px.uniformDIDMethods)(e)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(e){this._restrictToFormats=e}initEvaluationHandlers(){let e=new So.UriEvaluationHandler(this);return e.setNext(new So.DIDRestrictionEvaluationHandler(this)).setNext(new So.FormatRestrictionEvaluationHandler(this)).setNext(new So.InputDescriptorFilterEvaluationHandler(this)).setNext(new So.PredicateRelatedFieldEvaluationHandler(this)).setNext(new So.LimitDisclosureEvaluationHandler(this)).setNext(new So.SubjectIsIssuerEvaluationHandler(this)).setNext(new So.SubjectIsHolderEvaluationHandler(this)).setNext(new So.SameSubjectEvaluationHandler(this)).setNext(new So.MarkForSubmissionEvaluationHandler(this)),e}};Ef.EvaluationClient=hx});var xq=D(Qv=>{"use strict";Object.defineProperty(Qv,"__esModule",{value:!0});Qv.EvaluationClientWrapper=void 0;var Yv=zi(),_f=xa(),Ve=Wr(),Zv=Ji(),ipe=mx(),yx=class{constructor(){this._client=new ipe.EvaluationClient}getEvaluationClient(){return this._client}selectFrom(e,r,n){var s;let i;this._client.evaluate(e,r,n);let o=[...this.formatNotInfo(Ve.Status.WARN)],a=[...this.formatNotInfo(Ve.Status.ERROR)];if(e.submission_requirements){let u=this._client.results.filter(p=>p.evaluator==="MarkForSubmissionEvaluation"&&p.payload.group&&p.status!==Ve.Status.ERROR),c=Array.from(new Set(u)),l;try{l=this.matchSubmissionRequirements(e,e.submission_requirements,c)}catch(p){let g={status:Ve.Status.ERROR,message:JSON.stringify(p),tag:"matchSubmissionRequirements"};return{errors:a?[...a,g]:[g],warnings:o,areRequiredCredentialsPresent:Ve.Status.ERROR}}let h=this.extractMatches(l).map(p=>Yv.JSONPath.nodes(this._client.wrappedVcs.map(g=>g.original),p)[0].value),f=this.determineAreRequiredCredentialsPresent(e,l);i={errors:f===Ve.Status.INFO?[]:a,matches:[...l],areRequiredCredentialsPresent:f,verifiableCredential:h,warnings:o}}else{let u=this._client.results.filter(l=>l.evaluator==="MarkForSubmissionEvaluation"&&l.status!==Ve.Status.ERROR);if(this.checkWithoutSubmissionRequirements(u,e).length)return{errors:a,matches:[],areRequiredCredentialsPresent:Ve.Status.ERROR,verifiableCredential:r.map(l=>l.original),warnings:o};{let l=this.matchWithoutSubmissionRequirements(u,e),h=this.extractMatches(l).map(f=>Yv.JSONPath.nodes(this._client.wrappedVcs.map(p=>p.original),f)[0].value);i={errors:[],matches:[...l],areRequiredCredentialsPresent:Ve.Status.INFO,verifiableCredential:h,warnings:o}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(i,r),i.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(e,i?.matches),this.remapMatches(r.map(u=>u.original),i.matches,i?.verifiableCredential),(s=i.matches)===null||s===void 0||s.forEach(u=>{this.updateSubmissionRequirementMatchPathToAlias(u,"verifiableCredential")}),i.areRequiredCredentialsPresent===Ve.Status.INFO?i.errors=[]:(i.errors=a,i.warnings=o,i.verifiableCredential=r.map(u=>u.original)),i}remapMatches(e,r,n){r?.forEach(s=>{s.from_nested?this.remapMatches(e,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{let u=Yv.JSONPath.query(e,i)[0],c=n?.findIndex(l=>JSON.stringify(l)===JSON.stringify(u));if(c===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${u}`);a[o]=`$[${c}]`}),s.name)})}extractMatches(e){let r=[];return e.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(e,r){let n=[];if(!r.input_descriptors)return[];if(!e.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ve.Status.ERROR,payload:"Not all the InputDescriptors are addressed"}];let s=r.input_descriptors,i=Zv.ObjectUtils.getDistinctFieldInObject(e,"input_descriptor_path");if(i.length!==s.length){let o=i.map(a=>Zv.JsonPathUtils.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ve.Status.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(e,r,n){let s=[];for(let i of r){let o={name:e.name||e.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){let a=this.mapMatchingDescriptors(e,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(e,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(e,r){let n=[],s=this.createIdToVcMap(e);for(let[i,o]of s.entries())if(!(!o||!o.length))for(let a of o){let u=Zv.JsonPathUtils.extractInputField(r,[i]);u.length&&n.push({name:u[0].value.name||u[0].value.id,rule:_f.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(e,r,n){var s;let i={rule:r.rule,vc_path:[]};if(r?.from){i.from=r.from;for(let o of n){let a=Yv.JSONPath.query(e,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(i.name=a.name||a.id,o.payload.group.includes(r.from)&&((s=i.vc_path)===null||s===void 0?void 0:s.indexOf(o.verifiable_credential_path))===-1&&i.vc_path.push(o.verifiable_credential_path))}}return i}evaluate(e,r,n){var s,i,o,a;this._client.evaluate(e,r,n);let u={areRequiredCredentialsPresent:Ve.Status.INFO,verifiableCredential:r.map(c=>c.original)};if(u.warnings=this.formatNotInfo(Ve.Status.WARN),u.errors=this.formatNotInfo(Ve.Status.ERROR),this._client.assertPresentationSubmission(),!((s=this._client.presentationSubmission)===null||s===void 0)&&s.descriptor_map.length){let c=(i=this._client.presentationSubmission)===null||i===void 0?void 0:i.descriptor_map.length;for(let l=0;l<c;l++)this._client.presentationSubmission.descriptor_map[l]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[l]);this._client.presentationSubmission.descriptor_map.splice(0,c),u.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToAlias("verifiableCredential",u.value),u.verifiableCredential=this._client.wrappedVcs.map(c=>c.original),u.areRequiredCredentialsPresent=!((a=(o=u.value)===null||o===void 0?void 0:o.descriptor_map)===null||a===void 0)&&a.length?Ve.Status.INFO:Ve.Status.ERROR,u}formatNotInfo(e){return this._client.results.filter(r=>r.status===e).map(r=>{let n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(e,r){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(e.submission_requirements){let i=this._client.results.filter(d=>d.evaluator==="MarkForSubmissionEvaluation"&&d.payload.group&&d.status!==Ve.Status.ERROR),[o,a]=this.matchUserSelectedVcs(i,r),u=new Map;"input_descriptors"in e&&e.input_descriptors.forEach(d=>{d.group&&d.group.forEach(h=>{u.has(h)?u.set(h,u.get(h)+1):u.set(h,1)})});let c=this.evaluateRequirements(e.submission_requirements,o,u,0),l=a.filter(d=>c[1].find(h=>h.verifiable_credential_path===d[1]));return this.updatePresentationSubmission(l),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}let n=this._client.results.filter(i=>i.evaluator==="MarkForSubmissionEvaluation"&&i.status!==Ve.Status.ERROR),s=this.matchUserSelectedVcs(n,r);return this.updatePresentationSubmission(s[1]),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}updatePresentationSubmission(e){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>e.find(n=>n[0]===r.path)).map(r=>{let n=e.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}matchUserSelectedVcs(e,r){let n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((u,c)=>{u[1]===o[1]&&i.push([`$[${c}]`,`$[${a}]`])})}),e=e.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{let a=i.find(u=>u[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[e,i]}evaluateRequirements(e,r,n,s){let i=0,o=[];for(let a of e)if(a.from){if(a.rule===_f.Rules.All){let[u,c]=this.countMatchingInputDescriptors(a,r);if(u!==n.get(a.from))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...c)}else if(a.rule===_f.Rules.Pick){let[u,c]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,u,s),i++}catch(l){if(s===0)throw l}o.push(...c)}}else if(a.from_nested){let[u,c]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=u,o.push(...c),this.handleCount(a,u,s)}return[i,o]}countMatchingInputDescriptors(e,r){let n=0,s=[];for(let i of r)i.payload.group.includes(e.from)&&(s.push(i),n++);return[n,s]}handleCount(e,r,n){if(e.count&&r!==e.count)throw Error(`Count: expected: ${e.count} actual: ${r} at level: ${n}`);if(e.min&&r<e.min)throw Error(`Min: expected: ${e.min} actual: ${r} at level: ${n}`);if(e.max&&r>e.max)throw Error(`Max: expected: ${e.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(e){return e.filter((r,n)=>{let s=JSON.stringify(r);return n===e.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(e,r){var n;e&&((n=e.verifiableCredential)===null||n===void 0||n.forEach(s=>{var i;let o=Zv.ObjectUtils.isString(s)?r.findIndex(a=>s===a.original):r.findIndex(a=>JSON.stringify(s.proof)===JSON.stringify(a.credential.proof));if(o===-1)throw new Error("index is not right");(i=e.vcIndexes)===null||i===void 0||i.push(o)}))}determineAreRequiredCredentialsPresent(e,r,n){if(!r||!r.length)return Ve.Status.ERROR;let s=r.map(i=>this.determineSubmissionRequirementStatus(e,i));if(n){if(n.rule===_f.Rules.All&&s.includes(Ve.Status.ERROR))return Ve.Status.ERROR;let i=s.filter(o=>o!==Ve.Status.ERROR).length;if(n.count)return n.count>i?Ve.Status.ERROR:n.count<i?Ve.Status.WARN:Ve.Status.INFO;if(n.min&&n.min>i)return Ve.Status.ERROR;if(n.max&&n.max<i)return Ve.Status.WARN}else return s.includes(Ve.Status.ERROR)?Ve.Status.ERROR:s.includes(Ve.Status.WARN)?Ve.Status.WARN:Ve.Status.INFO;return Ve.Status.INFO}determineSubmissionRequirementStatus(e,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return Ve.Status.ERROR;if(r.from){let n=this.countGroupIDs(e.input_descriptors,r.from);switch(r.rule){case _f.Rules.All:return r.vc_path.length===n?Ve.Status.INFO:Ve.Status.WARN;case _f.Rules.Pick:return this.getPickRuleStatus(r);default:return Ve.Status.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(e,r.from_nested,r);return Ve.Status.INFO}getPickRuleStatus(e){return e.vc_path.length===0?Ve.Status.ERROR:e.count&&e.vc_path.length!==e.count?e.vc_path.length>e.count?Ve.Status.WARN:Ve.Status.ERROR:e.min&&e.vc_path.length<e.min?Ve.Status.ERROR:e.max&&e.vc_path.length>e.max?Ve.Status.WARN:Ve.Status.INFO}updateSubmissionRequirementMatchPathToAlias(e,r){let n=[];e.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),e.vc_path=n,e.from_nested&&e.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToAlias(e,r){r?r.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)}):this._client.generatePresentationSubmission&&this._client.presentationSubmission.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)})}replacePathWithAlias(e,r){e.path=e.path.replace("$","$."+r),e.path_nested&&this.replacePathWithAlias(e.path_nested,r)}createIdToVcMap(e){let r=new Map,n=new Map;for(let s=0;s<e.length;s++){let i=e[s].input_descriptor_path;if(n.has(i)){let o=n.get(i);o&&o.push(e[s])}else n.set(i,[e[s]])}for(let[s,i]of n.entries()){let o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(e,r){let n=0;for(let s of e)s.group&&s.group.includes(r)&&n++;return n}};Qv.EvaluationClientWrapper=yx});var dm=D(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.HandlerCheckResult=Tu.EvaluationClientWrapper=Tu.EvaluationClient=void 0;var spe=cI();Object.defineProperty(Tu,"HandlerCheckResult",{enumerable:!0,get:function(){return spe.HandlerCheckResult}});var ope=mx();Object.defineProperty(Tu,"EvaluationClient",{enumerable:!0,get:function(){return ope.EvaluationClient}});var ape=xq();Object.defineProperty(Tu,"EvaluationClientWrapper",{enumerable:!0,get:function(){return ape.EvaluationClientWrapper}})});var Cq=D(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.KeyEncoding=Fu.PresentationSubmissionLocation=void 0;var upe;(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.PRESENTATION=1]="PRESENTATION"})(upe=Fu.PresentationSubmissionLocation||(Fu.PresentationSubmissionLocation={}));var cpe;(function(t){t.Jwk="Jwk",t.Base58="Base58",t.Hex="Hex",t.Multibase="Multibase"})(cpe=Fu.KeyEncoding||(Fu.KeyEncoding={}))});var fm=D(dl=>{"use strict";var lpe=dl&&dl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),dpe=dl&&dl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lpe(e,t,r)};Object.defineProperty(dl,"__esModule",{value:!0});dpe(Cq(),dl)});var Pq=D((qCe,bx)=>{"use strict";bx.exports=vx;bx.exports.default=vx;var $r={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},fpe=Object.prototype.hasOwnProperty,gx={type:["number","string"]};function Jr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:gx.type},message:"must be number,string",schema:gx.type,parentSchema:gx,data:t};i===null?i=[a]:i.push(a),o++}return Jr.errors=i,o===0}function eb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:$r.required,parentSchema:$r,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!fpe.call($r.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:$r,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Jr(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Jr.errors:i.concat(Jr.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Jr(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Jr.errors:i.concat(Jr.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:$r.properties.enum.type,parentSchema:$r.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Jr(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Jr.errors:i.concat(Jr.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Jr(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Jr.errors:i.concat(Jr.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:$r.properties.format.type,parentSchema:$r.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:$r.properties.maxLength.type,parentSchema:$r.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Jr(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Jr.errors:i.concat(Jr.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:$r.properties.minLength.type,parentSchema:$r.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Jr(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Jr.errors:i.concat(Jr.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:$r.properties.not.type,parentSchema:$r.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:$r.properties.pattern.type,parentSchema:$r.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:$r.properties.type.type,parentSchema:$r.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:$r.type,parentSchema:$r,data:t};i===null?i=[a]:i.push(a),o++}return eb.errors=i,o===0}function vx(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return eb(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?eb.errors:i.concat(eb.errors),o=i.length),vx.errors=i,o===0}});var Oq=D((LCe,_x)=>{"use strict";_x.exports=Ex;_x.exports.default=Ex;var qt={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},ppe=Object.prototype.hasOwnProperty,wx={type:["number","string"]};function Gr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:wx.type},message:"must be number,string",schema:wx.type,parentSchema:wx,data:t};i===null?i=[a]:i.push(a),o++}return Gr.errors=i,o===0}function tb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:qt.required,parentSchema:qt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!ppe.call(qt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:qt,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Gr(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Gr(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:qt.properties.enum.type,parentSchema:qt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Gr(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Gr(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qt.properties.format.type,parentSchema:qt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMaximum!==void 0){let a=t.formatExclusiveMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qt.properties.formatExclusiveMaximum.type,parentSchema:qt.properties.formatExclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMinimum!==void 0){let a=t.formatExclusiveMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qt.properties.formatExclusiveMinimum.type,parentSchema:qt.properties.formatExclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMaximum!==void 0){let a=t.formatMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qt.properties.formatMaximum.type,parentSchema:qt.properties.formatMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMinimum!==void 0){let a=t.formatMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qt.properties.formatMinimum.type,parentSchema:qt.properties.formatMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:qt.properties.maxLength.type,parentSchema:qt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Gr(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:qt.properties.minLength.type,parentSchema:qt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Gr(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:qt.properties.not.type,parentSchema:qt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qt.properties.pattern.type,parentSchema:qt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qt.properties.type.type,parentSchema:qt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:qt.type,parentSchema:qt,data:t};i===null?i=[a]:i.push(a),o++}return tb.errors=i,o===0}function Ex(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return tb(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?tb.errors:i.concat(tb.errors),o=i.length),Ex.errors=i,o===0}});var Os=D(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0});rb.ValidationBundler=void 0;var kq=Wr(),Dx=class{constructor(e,r){this.parentTag=e,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(e){return new kq.Checked(this.getTag(),kq.Status.ERROR,e)}};rb.ValidationBundler=Dx});var Sx=D(Sf=>{"use strict";var Iq=Sf&&Sf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.FieldsVB=void 0;var hpe=zi(),Bq=xa(),mpe=Iq(Pq()),ype=Iq(Oq()),gpe=Os(),Df=class extends gpe.ValidationBundler{constructor(e){super(e,"fields"),this.mustHaveValidJsonPathsMsg='field object "path" property must contain array of valid json paths',this.pathObjMustHaveValidJsonPathMsg='field object "path" property must contain valid json paths.',this.filterMustBeValidJsonSchemaMsg='field object "filter" property must be valid json schema',this.filterIsMustInPresenceOfPredicateMsg='field object must have a "filter" property if "predicate" is present',this.filterIsNotValidJsonSchemaDescriptorMsg='could not parse "filter" object as a valid json schema descriptor.',this.purposeShouldBeANonEmptyStringMsg="purpose should be a non empty string",this.shouldBeKnownOptionMsg="Unknown predicate property"}getValidations(e){let r=[];if(e)for(let n=0;n<e.length;n++)r=[...r,...this.getValidationsFor(e[n],n)];return r}getValidationsFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Df.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Df.shouldBeKnownOption(n?.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}mustHaveValidJsonPaths(){return e=>e.path!=null&&e.path.length>0&&this._validateJsonPaths(e.path)}_validateJsonPaths(e){let r=[];if(e.forEach(n=>{try{hpe.JSONPath.parse(n)}catch{r.push(n)}}),r.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(r));return!0}filterMustBeValidJsonSchema(){return e=>this._validateFilter(e.filter)}_validateFilter(e){if(e==null)return!0;let r=!1;try{r=(0,ype.default)(e),r||(r=(0,mpe.default)(e))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(e))}return r}filterIsMustInPresenceOfPredicate(){return e=>!(e.predicate!=null&&e.filter==null)}static optionalNonEmptyString(e){return e==null||e.length>0}static shouldBeKnownOption(e){return e==null||e==Bq.Optionality.Required||e==Bq.Optionality.Preferred}};Sf.FieldsVB=Df});var ib=D(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0});nb.ConstraintsVB=void 0;var Pa=xa(),vpe=Sx(),bpe=Os(),Oa=class extends bpe.ValidationBundler{constructor(e){super(e,"constraints"),this.disclosureLimitShouldHaveKnownValueMsg="limit_disclosure should have known value",this.statusShouldHaveKnownValueMsg="Unknown status property",this.statusDirectiveShouldHaveKnownValueMsg="status directive should have known value",this.subjectIsIssuerShouldBeKnownValueMsg="subject_is_issuer should be known value",this.fieldIdIsMandatoryMsg="field_id property is mandatory",this.fieldIdMustBeArrayOfStringsMsg="field_id property must be an array of strings",this.fieldIdMustCorrespondToFieldIdMsg="field_id must correspond to a present field object id property",this.directivePropertyIsMandatoryMsg="directive property is mandatory",this.oneOfTheKnownDirectivePropertiesMandatoryMsg="directive property must be one of [required, preferred]"}getValidations(e){let r=[];return e&&(r=[{tag:this.getTag(),target:e,predicate:n=>Oa.disclosureLimitShouldHaveKnownValue(n.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>Oa.statusShouldHaveKnownValue(n.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:Oa.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>Oa.shouldBeKnownOption(n.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(e?.is_holder),...this.getSubjectsValidations(e?.same_subject),...this.getFieldsValidations(e)]),r}getFieldsValidations(e){var r;return!((r=e?.fields)===null||r===void 0)&&r.length?new vpe.FieldsVB(this.getTag()).getValidations(e.fields):[]}static disclosureLimitShouldHaveKnownValue(e){return!e||e===Pa.Optionality.Preferred||e===Pa.Optionality.Required}static statusShouldHaveKnownValue(e){return e==null||e.active!=null||e.revoked!=null||e.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return e=>{var r,n,s;return this.pdStatusShouldBeKnown((r=e?.statuses)===null||r===void 0?void 0:r.active)&&this.pdStatusShouldBeKnown((n=e?.statuses)===null||n===void 0?void 0:n.revoked)&&this.pdStatusShouldBeKnown((s=e?.statuses)===null||s===void 0?void 0:s.suspended)}}static pdStatusShouldBeKnown(e){return!e||e.directive===Pa.Directives.Allowed||e.directive===Pa.Directives.Disallowed||e.directive===Pa.Directives.Required}static shouldBeKnownOption(e){return e?e.filter(r=>r.directive!==Pa.Optionality.Preferred&&r.directive!==Pa.Optionality.Required).length===0:!0}getSubjectsValidations(e){if(e){let r=[];for(let n=0;n<e.length;n++)r=[{tag:this.getMyTag(n),target:e[n],predicate:s=>Array.isArray(s.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>!!s.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.field_id.length===s.field_id.filter(i=>typeof i=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive===Pa.Optionality.Preferred||s.directive===Pa.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return r}return[]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}fieldIdInSubjectMustCorrespondToFieldId(e,r){if(r){for(let n of r)for(let s of n.field_id)if(!Oa.isValidFieldId(e,s))return!1}return!0}static isValidFieldId(e,r){return e?.fields?e.fields.map(n=>n.id).includes(r):!1}};nb.ConstraintsVB=Oa});var xx=D(sb=>{"use strict";Object.defineProperty(sb,"__esModule",{value:!0});sb.InputDescriptorsV1VB=void 0;var pm=Ji(),wpe=ib(),Epe=Os(),Ax=class extends Epe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string",this.shouldHaveValidSchemaURIMsg="schema should have valid URI"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>pm.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(r),target:e,predicate:n=>pm.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>pm.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}isValidSchema(){return e=>e.schema.filter(r=>this.isAValidURI(r.uri)&&(r.required==null||typeof r.required=="boolean")).length>0}isAValidURI(e){if(e){if(!pm.ObjectValidationUtils.nonEmptyString(e))return!1}else return!1;if(e.startsWith("http://")||e.startsWith("https://"))try{new URL(e)}catch{return pm.ObjectValidationUtils.isValidDIDURI(e)}return!0}constraintsValidations(e,r){return e.constraints?new wpe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}};sb.InputDescriptorsV1VB=Ax});var Ox=D(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});ob.InputDescriptorsV2VB=void 0;var Cx=Ji(),_pe=ib(),Dpe=Os(),Px=class extends Dpe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldNotHaveSchema(n),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>Cx.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Cx.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Cx.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}constraintsValidations(e,r){return e.constraints?new _pe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}shouldNotHaveSchema(e){let r=!1;return e.forEach(n=>{n.schema&&(r=!0)}),!r}};ob.InputDescriptorsV2VB=Px});var Bx=D(ab=>{"use strict";Object.defineProperty(ab,"__esModule",{value:!0});ab.JwtAlgos=void 0;var kx=class{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}};ab.JwtAlgos=kx});var Tx=D(ub=>{"use strict";Object.defineProperty(ub,"__esModule",{value:!0});ub.LdpTypes=void 0;var Ix=class{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020"]}};ub.LdpTypes=Ix});var lb=D(cb=>{"use strict";Object.defineProperty(cb,"__esModule",{value:!0});cb.SubmissionRequirementVB=void 0;var Spe=Os(),ka=class extends Spe.ValidationBundler{constructor(e){super(e,"submission_requirements"),this.ruleIsMandatoryMsg="rule is a mandatory field",this.needsOneFromOrFromNestedMsg="needs exactly one of from or from_nested",this.fromNestedShouldBeArrayMsg="The value of the from_nested property MUST be an array",this.isCountPositiveIntMsg="count must be a practical positive number",this.isMinPositiveIntMsg="min must be a practical positive number",this.isMaxPositiveIntMsg="max must be a practical positive number",this.ruleShouldBePickOrAllMsg="rule should be either pick or all"}getValidations(e){let r=[];if(e!=null&&e.length>0)for(let n=0;n<e.length;n++)r=[...r,...this.getMyValidations(n,e),...this.getSubValidations(n,e)];return r}getMyValidations(e,r){return[{tag:this.getMyTag(e),target:r[e],predicate:ka.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(e),target:r[e],predicate:ka.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(e),target:r[e],predicate:ka.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:ka.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}getSubValidations(e,r){let n=r[e].from_nested;return n!=null?new ka(this.getFromNestedTag(e)).getValidations(n):[]}getFromNestedTag(e){return this.getMyTag(e)+".from_nested"}isCountPositiveInt(e){return e.rule!=="pick"||e.count==null||0<e.count}isMinPositiveInt(e){return e.rule!=="pick"||e.min==null||0<=e.min}isMaxPositiveInt(e){return e.rule!=="pick"||e.max==null||0<e.max}static ruleIsMandatory(e){return e.rule!=null}static needsOneFromOrFromNested(e){return e.from==null!=(e.from_nested==null)}static fromNestedShouldBeArray(e){return e.from_nested==null||Array.isArray(e.from_nested)}static ruleShouldBePickOrAll(e){return e.rule==="pick"||e.rule==="all"}};cb.SubmissionRequirementVB=ka});var Fq=D(Af=>{"use strict";var Ape=Af&&Af.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});Af.PresentationDefinitionV1VB=void 0;var xpe=Bx(),Cpe=Tx(),Ppe=Ape(iS()),Tq=xx(),Ope=lb(),kpe=Os(),si=class extends kpe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){return e.submission_requirements?[...this.myValidations(e),...new Tq.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors),...new Ope.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:[...this.myValidations(e),...new Tq.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors)]}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>si.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>si.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>si.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>si.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>si.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>si.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:e,predicate:r=>si.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=xpe.JwtAlgos.getJwtAlgos(),s=Cpe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...si.isJWTAlgoKnown(o,n)):r.push(...si.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];si.flatten(e.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,Ppe.default)({presentation_definition:e})}static shouldNotHaveFrameProperty(e){return!e.frame}};Af.PresentationDefinitionV1VB=si});var Rq=D(db=>{"use strict";Object.defineProperty(db,"__esModule",{value:!0});db.FrameVB=void 0;var Ru=Ji(),Bpe=Os(),hm=class extends Bpe.ValidationBundler{constructor(e){super(e,"frame"),this.frameIsValidMsg="frame value is not valid"}getValidations(e){let r=[];return r=[...r,...this.getMyValidations(e)],r}getMyValidations(e){return[{tag:this.getMyTag(),target:e,predicate:hm.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(e){if(!e||Array.isArray(e)||typeof e!="object")return!1;let r=e;if(r&&r["@id"]){for(let n of Ru.ObjectUtils.asArray(e["@id"]))if(!(Ru.ObjectUtils.isObject(n)||Ru.ObjectUtils.isUrlAbsolute(n))||Ru.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}if(r["@types"]){for(let n of Ru.ObjectUtils.asArray(e["@types"]))if(!(Ru.ObjectUtils.isObject(n)||Ru.ObjectUtils.isUrlAbsolute(n))||Ru.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}return!0}};db.FrameVB=hm});var Nq=D(xf=>{"use strict";var Ipe=xf&&xf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xf,"__esModule",{value:!0});xf.PresentationDefinitionV2VB=void 0;var Tpe=Bx(),Fpe=Tx(),Rpe=Ipe(fS()),$pe=Rq(),$q=Ox(),Npe=lb(),Mpe=Os(),Ei=class extends Mpe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){let r=[];return e.submission_requirements?r=[...this.myValidations(e),...new $q.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors),...new Npe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:r=[...this.myValidations(e),...new $q.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors)],e.frame&&r.push(...new $pe.FrameVB(this.myTag).getValidations(e.frame)),r}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>Ei.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>Ei.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>Ei.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>Ei.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>Ei.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>Ei.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=Tpe.JwtAlgos.getJwtAlgos(),s=Fpe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...Ei.isJWTAlgoKnown(o,n)):r.push(...Ei.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];Ei.flatten(e.submission_requirements).forEach(a=>{a.from&&s.push(...a.from)});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,Rpe.default)({presentation_definition:e})}};xf.PresentationDefinitionV2VB=Ei});var jq=D(fb=>{"use strict";Object.defineProperty(fb,"__esModule",{value:!0});fb.PresentationSubmissionVB=void 0;var jpe=zi(),Mq=Wr(),qpe=Os(),Pn=class extends qpe.ValidationBundler{constructor(e){super(e,"presentation_submission")}getValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:e,predicate:r=>Pn.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>Pn.nonEmptyString(r?.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>Pn.descriptorMapMustBePresent(r?.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:e,predicate:r=>Pn.idMustBeSameForEachLevelOfNesting(r?.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:e,predicate:r=>Pn.formatsShouldBeKnown(r?.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:e,predicate:r=>Pn.pathsShouldBeValidJsonPaths(r?.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(e){return e!=null&&e.length>0}static descriptorMapMustBePresent(e){return e!=null&&e.length>0}static idMustBeSameForEachLevelOfNesting(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=r&&Pn.isIdSameForEachLevelOfNesting(e[n],e[n].id);return r}static isIdSameForEachLevelOfNesting(e,r){let n=!0;return e!=null&&e.path_nested!=null&&(e.path_nested.id==r?n=n&&Pn.isIdSameForEachLevelOfNesting(e.path_nested,r):n=!1),n}static formatsShouldBeKnown(e){let r=!0;if(e!=null){let n=["jwt","jwt_vc","jwt_vp","ldp","ldp_vc","ldp_vp"];for(let s=0;s<e.length;s++)r=Pn.formatShouldBeKnown(e[s],n)}return r}static formatShouldBeKnown(e,r){let n=!0;return e!=null&&(n=r.includes(e.format)),e.path_nested!=null&&(n=n&&Pn.formatShouldBeKnown(e.path_nested,r)),n}static pathsShouldBeValidJsonPaths(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=Pn.pathShouldBeValid(e[n],[]);return r}static pathShouldBeValid(e,r){if(e!=null){try{jpe.JSONPath.parse(e.path)}catch{r.push(e.path)}e.path_nested!=null&&Pn.pathShouldBeValid(e.path_nested,r)}if(r.length>0)throw new Mq.Checked("",Mq.Status.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}};fb.PresentationSubmissionVB=Pn});var qq=D(jn=>{"use strict";var Lpe=jn&&jn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ba=jn&&jn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Lpe(e,t,r)};Object.defineProperty(jn,"__esModule",{value:!0});Ba(Sx(),jn);Ba(xx(),jn);Ba(Ox(),jn);Ba(Fq(),jn);Ba(Nq(),jn);Ba(jq(),jn);Ba(lb(),jn);Ba(Os(),jn);Ba(ib(),jn)});var Lq=D(pb=>{"use strict";Object.defineProperty(pb,"__esModule",{value:!0});pb.validate=void 0;var Cf=Wr(),Upe=t=>{let e=t.map(a=>s(a));function r(a){return new Cf.Checked(a.tag,Cf.Status.ERROR,a.message)}function n(a){return new Cf.Checked(a,Cf.Status.INFO,"ok")}function s(a){let u;try{a.predicate(a.target)?u=n(a.tag):u=r(a)}catch{u=r(a)}return u}let i=(a,u)=>(u.status!==Cf.Status.INFO&&a.push(u),a),o=e.reduce(i,[]);return(0,Cf.hasErrors)(o)?o:[n("root")]};pb.validate=Upe});var Kq=D(Uq=>{"use strict";Object.defineProperty(Uq,"__esModule",{value:!0})});var Vq=D(hb=>{"use strict";Object.defineProperty(hb,"__esModule",{value:!0});hb.ValidationEngine=void 0;var Kpe=Rx(),Fx=class{validate(e){let r=[];for(let n of e)r=r.concat(n.bundler.getValidations(n.target));return(0,Kpe.validate)(r)}};hb.ValidationEngine=Fx});var Rx=D(Ia=>{"use strict";var Vpe=Ia&&Ia.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$x=Ia&&Ia.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Vpe(e,t,r)};Object.defineProperty(Ia,"__esModule",{value:!0});$x(Lq(),Ia);$x(Kq(),Ia);$x(Vq(),Ia)});var mm=D($u=>{"use strict";var Hpe=$u&&$u.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Hq=$u&&$u.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hpe(e,t,r)};Object.defineProperty($u,"__esModule",{value:!0});Hq(qq(),$u);Hq(Rx(),$u)});var mb=D(Pf=>{"use strict";var Wpe=Pf&&Pf.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.PEX=void 0;var Wq=Wr(),ym=dm(),Nx=fm(),ks=Gc(),zq=Ji(),gm=mm(),vm=class{constructor(){this._evaluationClientWrapper=new ym.EvaluationClientWrapper}evaluatePresentation(e,r,n){let s=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:n?.presentationSubmission!==void 0,i=ks.SSITypesBuilder.toInternalPresentationDefinition(e),o=JSON.parse(JSON.stringify(r)),a=ks.SSITypesBuilder.mapExternalVerifiablePresentationToWrappedVP(o),u=n?.presentationSubmission||a.presentation.presentation_submission;if(!u&&!s)throw Error("Either a presentation submission as part of the VP or provided separately was expected");let c=a.presentation.holder?[a.presentation.holder]:[],l=Object.assign(Object.assign({},n),{holderDIDs:c,presentationSubmission:u,generatePresentationSubmission:s}),d=this._evaluationClientWrapper.evaluate(i,a.vcs,l);return d.value&&d.value.descriptor_map.length&&new ym.EvaluationClientWrapper().selectFrom(i,a.vcs,l).areRequiredCredentialsPresent!==Wq.Status.ERROR&&(d.errors=[]),d}evaluateCredentials(e,r,n){let s=ks.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r);this._evaluationClientWrapper=new ym.EvaluationClientWrapper;let i=ks.SSITypesBuilder.toInternalPresentationDefinition(e),o=this._evaluationClientWrapper.evaluate(i,s,n);if(o.value&&o.value.descriptor_map.length){let u=new ym.EvaluationClientWrapper().selectFrom(i,s,n);o.areRequiredCredentialsPresent=u.areRequiredCredentialsPresent,o.errors=u.errors}else o.areRequiredCredentialsPresent=Wq.Status.ERROR;return o}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r)),i=ks.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper=new ym.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(i,ks.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationSubmissionFrom(e,r){let n=ks.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper.submissionFrom(n,ks.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r))}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:Nx.PresentationSubmissionLocation.PRESENTATION,o=this.presentationSubmissionFrom(e,r);return{presentation:vm.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===Nx.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static constructPresentation(e,r){var n,s,i,o;let a=r?.holderDID,u=Array.isArray((n=r?.basePresentationPayload)===null||n===void 0?void 0:n.type)?((s=r?.basePresentationPayload)===null||s===void 0?void 0:s.type)||[]:!((i=r?.basePresentationPayload)===null||i===void 0)&&i.type?[r.basePresentationPayload.type]:[],c=!((o=r?.basePresentationPayload)===null||o===void 0)&&o["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return c.includes("https://www.w3.org/2018/credentials/v1")||c.push("https://www.w3.org/2018/credentials/v1"),u.includes("VerifiablePresentation")||u.push("VerifiablePresentation"),r?.presentationSubmission&&(u.includes("PresentationSubmission")||u.push("PresentationSubmission"),c.includes("https://identity.foundation/presentation-exchange/submission/v1")||c.push("https://identity.foundation/presentation-exchange/submission/v1")),Object.assign(Object.assign(Object.assign(Object.assign({},r?.basePresentationPayload),{"@context":c,type:u,holder:a}),!!r?.presentationSubmission&&{presentation_submission:r.presentationSubmission}),{verifiableCredential:Array.isArray(e)?e:[e]})}static validateDefinition(e){let r=(0,zq.definitionVersionDiscovery)(e);if(r.error)throw r.error;let n=[];return r.version===ks.PEVersion.v1?n.push({bundler:new gm.PresentationDefinitionV1VB("root"),target:ks.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e)}):n.push({bundler:new gm.PresentationDefinitionV2VB("root"),target:ks.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e)}),new gm.ValidationEngine().validate(n)}static validateSubmission(e){return new gm.ValidationEngine().validate([{bundler:new gm.PresentationSubmissionVB("root"),target:e}])}verifiablePresentationFrom(e,r,n,s){var i;return Wpe(this,void 0,void 0,function*(){let{holderDID:o,signatureOptions:a,proofOptions:u}=s,c=(i=s.presentationSubmissionLocation)!==null&&i!==void 0?i:Nx.PresentationSubmissionLocation.PRESENTATION;function l(){let v=[];if(u?.typeSupportsSelectiveDisclosure){if(!u?.type)throw Error("Please provide a proof type if you enable selective disclosure");v=[u.type]}return v}let d=o?[o]:[],h=l(),f=this.evaluateCredentials(e,r,{holderDIDs:d,limitDisclosureSignatureSuites:h}),p=this.presentationFrom(e,f.verifiableCredential,Object.assign(Object.assign({},s),{presentationSubmissionLocation:c})),g=this.evaluatePresentation(e,p.presentation,{limitDisclosureSignatureSuites:h});if(!g.value)throw new Error("Could not get evaluation results from presentationResult");let w={type:u?.type,verificationMethod:a?.verificationMethod,created:u?.created?u.created:new Date().toISOString(),proofPurpose:u?.proofPurpose,proofValue:a?.proofValue,jws:a?.jws,challenge:u?.challenge,nonce:u?.nonce,domain:u?.domain},P={options:s,presentation:p.presentation,presentationDefinition:e,selectedCredentials:r,proof:w,presentationSubmission:g.value,evaluationResults:g};return{verifiablePresentation:yield n(P),presentationSubmissionLocation:c,presentationSubmission:g.value}})}static definitionVersionDiscovery(e){return(0,zq.definitionVersionDiscovery)(e)}};Pf.PEX=vm});var Xq=D(yb=>{"use strict";Object.defineProperty(yb,"__esModule",{value:!0});yb.PEXv1=void 0;var Mx=mb(),zpe=dm(),Jq=fm(),fl=Gc(),Gq=mm(),jx=class extends Mx.PEX{constructor(){super()}evaluatePresentation(e,r,n){return fl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return fl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r));return this._evaluationClientWrapper=new zpe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(fl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),fl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:Jq.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(fl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),fl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:Mx.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===Jq.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=fl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e);return new Gq.ValidationEngine().validate([{bundler:new Gq.PresentationDefinitionV1VB("root"),target:r}])}static validateSubmission(e){return Mx.PEX.validateSubmission(e)}};yb.PEXv1=jx});var Qq=D(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0});gb.PEXv2=void 0;var qx=mb(),Jpe=dm(),Yq=fm(),pl=Gc(),Zq=mm(),Lx=class extends qx.PEX{constructor(){super()}evaluatePresentation(e,r,n){return pl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return pl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){return this._evaluationClientWrapper=new Jpe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(pl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),pl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:Yq.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(pl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),pl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:qx.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===Yq.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=pl.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e);return new Zq.ValidationEngine().validate([{bundler:new Zq.PresentationDefinitionV2VB("root"),target:r}])}static validateSubmission(e){return qx.PEX.validateSubmission(e)}};gb.PEXv2=Lx});var t7=D(mr=>{"use strict";var Gpe=mr&&mr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xpe=mr&&mr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Gpe(e,t,r)};Object.defineProperty(mr,"__esModule",{value:!0});mr.PEXv2=mr.PEXv1=mr.PEX=mr.Status=mr.Checked=mr.PEVersion=mr.ValidationEngine=mr.HandlerCheckResult=void 0;var e7=Wr();Object.defineProperty(mr,"Checked",{enumerable:!0,get:function(){return e7.Checked}});Object.defineProperty(mr,"Status",{enumerable:!0,get:function(){return e7.Status}});var Ype=mb();Object.defineProperty(mr,"PEX",{enumerable:!0,get:function(){return Ype.PEX}});var Zpe=Xq();Object.defineProperty(mr,"PEXv1",{enumerable:!0,get:function(){return Zpe.PEXv1}});var Qpe=Qq();Object.defineProperty(mr,"PEXv2",{enumerable:!0,get:function(){return Qpe.PEXv2}});var ehe=dm();Object.defineProperty(mr,"HandlerCheckResult",{enumerable:!0,get:function(){return ehe.HandlerCheckResult}});var the=Gc();Object.defineProperty(mr,"PEVersion",{enumerable:!0,get:function(){return the.PEVersion}});var rhe=mm();Object.defineProperty(mr,"ValidationEngine",{enumerable:!0,get:function(){return rhe.ValidationEngine}});Xpe(fm(),mr)});var r7=D(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.PresentationSubmissionLocation=vr.HandlerCheckResult=vr.ValidationEngine=vr.PEVersion=vr.Checked=vr.Status=vr.KeyEncoding=vr.PEXv2=vr.PEXv1=vr.PEX=void 0;var Ao=t7();Object.defineProperty(vr,"Checked",{enumerable:!0,get:function(){return Ao.Checked}});Object.defineProperty(vr,"HandlerCheckResult",{enumerable:!0,get:function(){return Ao.HandlerCheckResult}});Object.defineProperty(vr,"KeyEncoding",{enumerable:!0,get:function(){return Ao.KeyEncoding}});Object.defineProperty(vr,"PEVersion",{enumerable:!0,get:function(){return Ao.PEVersion}});Object.defineProperty(vr,"PEX",{enumerable:!0,get:function(){return Ao.PEX}});Object.defineProperty(vr,"PEXv1",{enumerable:!0,get:function(){return Ao.PEXv1}});Object.defineProperty(vr,"PEXv2",{enumerable:!0,get:function(){return Ao.PEXv2}});Object.defineProperty(vr,"PresentationSubmissionLocation",{enumerable:!0,get:function(){return Ao.PresentationSubmissionLocation}});Object.defineProperty(vr,"Status",{enumerable:!0,get:function(){return Ao.Status}});Object.defineProperty(vr,"ValidationEngine",{enumerable:!0,get:function(){return Ao.ValidationEngine}})});var ihe={};ar(ihe,{Balance:()=>Po,Close:()=>qu,Crypto:()=>yi,DevTools:()=>ml,DidResolver:()=>L0,Exchange:()=>Gx,Message:()=>Hr,Offering:()=>Co,Order:()=>Mu,OrderStatus:()=>ju,Parser:()=>Nr,Quote:()=>Nu,Resource:()=>qi,Rfq:()=>wn,isVerificationMethod:()=>j_,resolveDid:()=>JZ});var Ht="0123456789abcdefghjkmnpqrstvwxyz",be=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,255,18,19,255,20,21,255,22,23,24,25,26,255,27,28,29,30,31,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]);function Pm(t){let e=new Array(26).fill("");if(t.length!==16)throw new Error("Invalid length");return e[0]=Ht[(t[0]&224)>>5],e[1]=Ht[t[0]&31],e[2]=Ht[(t[1]&248)>>3],e[3]=Ht[(t[1]&7)<<2|(t[2]&192)>>6],e[4]=Ht[(t[2]&62)>>1],e[5]=Ht[(t[2]&1)<<4|(t[3]&240)>>4],e[6]=Ht[(t[3]&15)<<1|(t[4]&128)>>7],e[7]=Ht[(t[4]&124)>>2],e[8]=Ht[(t[4]&3)<<3|(t[5]&224)>>5],e[9]=Ht[t[5]&31],e[10]=Ht[(t[6]&248)>>3],e[11]=Ht[(t[6]&7)<<2|(t[7]&192)>>6],e[12]=Ht[(t[7]&62)>>1],e[13]=Ht[(t[7]&1)<<4|(t[8]&240)>>4],e[14]=Ht[(t[8]&15)<<1|(t[9]&128)>>7],e[15]=Ht[(t[9]&124)>>2],e[16]=Ht[(t[9]&3)<<3|(t[10]&224)>>5],e[17]=Ht[t[10]&31],e[18]=Ht[(t[11]&248)>>3],e[19]=Ht[(t[11]&7)<<2|(t[12]&192)>>6],e[20]=Ht[(t[12]&62)>>1],e[21]=Ht[(t[12]&1)<<4|(t[13]&240)>>4],e[22]=Ht[(t[13]&15)<<1|(t[14]&128)>>7],e[23]=Ht[(t[14]&124)>>2],e[24]=Ht[(t[14]&3)<<3|(t[15]&224)>>5],e[25]=Ht[t[15]&31],e.join("")}function Db(t){if(t.length!==26)throw new Error("Invalid length");let r=new TextEncoder().encode(t);if(be[r[0]]===255||be[r[1]]===255||be[r[2]]===255||be[r[3]]===255||be[r[4]]===255||be[r[5]]===255||be[r[6]]===255||be[r[7]]===255||be[r[8]]===255||be[r[9]]===255||be[r[10]]===255||be[r[11]]===255||be[r[12]]===255||be[r[13]]===255||be[r[14]]===255||be[r[15]]===255||be[r[16]]===255||be[r[17]]===255||be[r[18]]===255||be[r[19]]===255||be[r[20]]===255||be[r[21]]===255||be[r[22]]===255||be[r[23]]===255||be[r[24]]===255||be[r[25]]===255)throw new Error("Invalid base32 character");let n=new Uint8Array(16);return n[0]=be[r[0]]<<5|be[r[1]],n[1]=be[r[2]]<<3|be[r[3]]>>2,n[2]=(be[r[3]]&3)<<6|be[r[4]]<<1|be[r[5]]>>4,n[3]=(be[r[5]]&15)<<4|be[r[6]]>>1,n[4]=(be[r[6]]&1)<<7|be[r[7]]<<2|be[r[8]]>>3,n[5]=(be[r[8]]&7)<<5|be[r[9]],n[6]=be[r[10]]<<3|be[r[11]]>>2,n[7]=(be[r[11]]&3)<<6|be[r[12]]<<1|be[r[13]]>>4,n[8]=(be[r[13]]&15)<<4|be[r[14]]>>1,n[9]=(be[r[14]]&1)<<7|be[r[15]]<<2|be[r[16]]>>3,n[10]=(be[r[16]]&7)<<5|be[r[17]],n[11]=be[r[18]]<<3|be[r[19]]>>2,n[12]=(be[r[19]]&3)<<6|be[r[20]]<<1|be[r[21]]>>4,n[13]=(be[r[21]]&15)<<4|be[r[22]]>>1,n[14]=(be[r[22]]&1)<<7|be[r[23]]<<2|be[r[24]]>>3,n[15]=(be[r[24]]&7)<<5|be[r[25]],n}function rC(t){let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Ra=Math.pow;var nC="0123456789abcdef",Om=class{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,e,r,n){if(!Number.isInteger(t)||!Number.isInteger(e)||!Number.isInteger(r)||!Number.isInteger(n)||t<0||e<0||r<0||n<0||t>0xffffffffffff||e>4095||r>1073741823||n>4294967295)throw new RangeError("invalid field value");let s=new Uint8Array(16);return s[0]=t/Ra(2,40),s[1]=t/Ra(2,32),s[2]=t/Ra(2,24),s[3]=t/Ra(2,16),s[4]=t/Ra(2,8),s[5]=t,s[6]=112|e>>>8,s[7]=e,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=n>>>24,s[13]=n>>>16,s[14]=n>>>8,s[15]=n,new Om(s)}toString(){let t="";for(let e=0;e<this.bytes.length;e++)t+=nC.charAt(this.bytes[e]>>>4),t+=nC.charAt(this.bytes[e]&15),(e===3||e===5||e===7||e===9)&&(t+="-");return t}clone(){return new Om(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let e=0;e<16;e++){let r=this.bytes[e]-t.bytes[e];if(r!==0)return Math.sign(r)}return 0}},g7=class{constructor(){this.timestamp=0,this.counter=0,this.random=new v7}generate(){let t=this.generateOrAbort();return t!==void 0?t:(this.timestamp=0,this.generateOrAbort())}generateOrAbort(){let r=Date.now();if(r>this.timestamp)this.timestamp=r,this.resetCounter();else if(r+1e4>this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return Om.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Ra(2,30)),this.counter&Ra(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}},sC=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(let e=0;e<t.length;e++)t[e]=Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536);return t};typeof crypto<"u"&&crypto.getRandomValues&&(sC=t=>crypto.getRandomValues(t));var v7=class{constructor(){this.buffer=new Uint32Array(8),this.cursor=99}nextUint32(){return this.cursor>=this.buffer.length&&(sC(this.buffer),this.cursor=0),this.buffer[this.cursor++]}},iC,b7=()=>(iC||(iC=new g7)).generate();function w7(t){if(t.length>63)return!1;let e,r,n;for(r=0,n=t.length;r<n;r+=1)if(e=t.charCodeAt(r),!(e>96&&e<123))return!1;return!0}var Dl=class{constructor(t,e=""){if(this.prefix=t,this.suffix=e,!w7(t))throw new Error("Invalid prefix. Must be at most 63 ascii letters [a-z]");if(this.prefix=t,e)this.suffix=e;else{let n=b7();this.suffix=Pm(n.bytes)}if(this.suffix.length!==26)throw new Error(`Invalid length. Suffix should have 26 characters, got ${e.length}`);if(this.suffix[0]>"7")throw new Error("Invalid suffix. First character must be in the range [0-7]");let r=Db(this.suffix)}getType(){return this.prefix}getSuffix(){return this.suffix}asType(t){let e=this;if(e.prefix!==t)throw new Error(`Cannot convert TypeID of type ${e.prefix} to type ${t}`);return e}toUUIDBytes(){return Db(this.suffix)}toUUID(){return new Om(this.toUUIDBytes()).toString()}toString(){return this.prefix===""?this.suffix:`${this.prefix}_${this.suffix}`}static fromString(t){let e=t.split("_");if(e.length===1)return new Dl("",e[0]);if(e.length===2){if(e[0]==="")throw new Error(`Invalid TypeID. Prefix cannot be empty when there's a separator: ${t}`);return new Dl(e[0],e[1])}throw new Error(`Invalid TypeID string: ${t}`)}static fromUUIDBytes(t,e){let r=Pm(e);return new Dl(t,r)}static fromUUID(t,e){let r=Pm(rC(e));return new Dl(t,r)}};function $f(t="",e=""){return new Dl(t,e)}function oC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function E7(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Sb(t,...e){if(!E7(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function aC(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");oC(t.outputLen),oC(t.blockLen)}function Sl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function uC(t,e){Sb(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Al=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function cC(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var km=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ns=(t,e)=>t<<32-e|t>>>e,_7=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_7)throw new Error("Non little-endian hardware is not supported");function Ab(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Nf(t){if(typeof t=="string"&&(t=Ab(t)),!cC(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Bm(...t){let e=0;for(let n=0;n<t.length;n++){let s=t[n];if(!cC(s))throw new Error("Uint8Array expected");e+=s.length}let r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){let i=t[n];r.set(i,s),s+=i.length}return r}var xl=class{clone(){return this._cloneInto()}},khe={}.toString;function Im(t){let e=n=>t().update(Nf(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Wu(t=32){if(Al&&typeof Al.getRandomValues=="function")return Al.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function D7(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var Cl=class extends xl{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=km(this.buffer)}update(e){Sl(this);let{view:r,buffer:n,blockLen:s}=this;e=Nf(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let u=km(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Sl(this),uC(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;D7(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=km(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var S7=(t,e,r)=>t&e^~t&r,A7=(t,e,r)=>t&e^t&r^e&r,x7=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Na=new Uint32Array(64),xb=class extends Cl{constructor(){super(64,32,8,!1),this.A=$a[0]|0,this.B=$a[1]|0,this.C=$a[2]|0,this.D=$a[3]|0,this.E=$a[4]|0,this.F=$a[5]|0,this.G=$a[6]|0,this.H=$a[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Na[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let h=Na[d-15],f=Na[d-2],p=ns(h,7)^ns(h,18)^h>>>3,g=ns(f,17)^ns(f,19)^f>>>10;Na[d]=g+Na[d-7]+p+Na[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let d=0;d<64;d++){let h=ns(a,6)^ns(a,11)^ns(a,25),f=l+h+S7(a,u,c)+x7[d]+Na[d]|0,g=(ns(n,2)^ns(n,13)^ns(n,22))+A7(n,s,i)|0;l=c,c=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,u,c,l)}roundClean(){Na.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Un=Im(()=>new xb);var O7=ui(dC(),1);function k7(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,P=0,C=p.length;P!==C&&p[P]===0;)P++,g++;for(var v=(C-P)*l+1>>>0,k=new Uint8Array(v);P!==C;){for(var B=p[P],T=0,M=v-1;(B!==0||T<w)&&M!==-1;M--,T++)B+=256*k[M]>>>0,k[M]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");w=T,P++}for(var y=v-w;y!==v&&k[y]===0;)y++;for(var b=u.repeat(g);y<v;++y)b+=t.charAt(k[y]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,P=0;p[g]===u;)w++,g++;for(var C=(p.length-g)*c+1>>>0,v=new Uint8Array(C);p[g];){var k=r[p.charCodeAt(g)];if(k===255)return;for(var B=0,T=C-1;(k!==0||B<P)&&T!==-1;T--,B++)k+=a*v[T]>>>0,v[T]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");P=B,g++}if(p[g]!==" "){for(var M=C-P;M!==C&&v[M]===0;)M++;for(var y=new Uint8Array(w+(C-M)),b=w;M!==C;)y[b++]=v[M++];return y}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var B7=k7,I7=B7,fC=I7;var Lhe=new Uint8Array(0);var pC=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Pl=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Pb=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ob=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hC(this,e)}},kb=class{constructor(e){this.decoders=e}or(e){return hC(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},hC=(t,e)=>new kb({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Bb=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Pb(e,r,n),this.decoder=new Ob(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},mC=({name:t,prefix:e,encode:r,decode:n})=>new Bb(t,e,r,n),Ib=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=fC(r,e);return mC({prefix:t,name:e,encode:n,decode:i=>Pl(s(i))})},F7=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},R7=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},kn=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>mC({prefix:e,name:t,encode(s){return R7(s,n,r)},decode(s){return F7(s,n,r,t)}});var jf=kn({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Whe=kn({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),zhe=kn({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Jhe=kn({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ghe=kn({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xhe=kn({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yhe=kn({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zhe=kn({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tb=kn({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Kn=Ib({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tme=Ib({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ime=kn({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sme=kn({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Rs=kn({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ome=kn({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function yC(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function gC(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function Ol(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var qf=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},vC=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}},Fm=new TextEncoder,zu=new TextDecoder,ne=class{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new ne(e,"ArrayBuffer")}static asyncIterable(e){if(!gC(e))throw new TypeError("Input must be of type AsyncIterable.");return new ne(e,"AsyncIterable")}static base32Z(e){return new ne(e,"Base32Z")}static base58Btc(e){return new ne(e,"Base58Btc")}static base64Url(e){return new ne(e,"Base64Url")}static bufferSource(e){return new ne(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new ne(e,"Hex")}static multibase(e){return new ne(e,"Multibase")}static object(e){return new ne(e,"Object")}static string(e){return new ne(e,"String")}static uint8Array(e){return new ne(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Kn.baseDecode(this.data).buffer;case"Base64Url":return Rs.baseDecode(this.data).buffer;case"BufferSource":{if(Ol(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return yC(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return qf(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return Tb.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Kn.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Kn.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Rs.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return Rs.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=Fm.encode(e);return Rs.baseEncode(r)}case"String":{let e=Fm.encode(this.data);return Rs.baseEncode(e)}case"Uint8Array":return Rs.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return qf(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u=[];try{for(var i=!0,o=vC(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;u.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return ne.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return ne.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=Rs.baseDecode(this.data),r=zu.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=zu.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return qf(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return zu.decode(this.data);case"Base64Url":{let e=Rs.baseDecode(this.data);return zu.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return zu.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return qf(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=vC(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let c=s;typeof c=="string"?u+=c:u+=zu.decode(c,{stream:!0})}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=zu.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return Tb.baseDecode(this.data);case"Base58Btc":return Kn.baseDecode(this.data);case"Base64Url":return Rs.baseDecode(this.data);case"BufferSource":{let e=Ol(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return Fm.encode(e)}case"String":return Fm.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return qf(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var To={};ar(To,{decode:()=>kl,encodeTo:()=>Ju,encodingLength:()=>Gu});var $7=EC,bC=128,N7=127,M7=~N7,j7=Math.pow(2,31);function EC(t,e,r){e=e||[],r=r||0;for(var n=r;t>=j7;)e[r++]=t&255|bC,t/=128;for(;t&M7;)e[r++]=t&255|bC,t>>>=7;return e[r]=t|0,EC.bytes=r-n+1,e}var q7=Fb,L7=128,wC=127;function Fb(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Fb.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&wC)<<s:(o&wC)*Math.pow(2,s),s+=7}while(o>=L7);return Fb.bytes=i-n,r}var U7=Math.pow(2,7),K7=Math.pow(2,14),V7=Math.pow(2,21),H7=Math.pow(2,28),W7=Math.pow(2,35),z7=Math.pow(2,42),J7=Math.pow(2,49),G7=Math.pow(2,56),X7=Math.pow(2,63),Y7=function(t){return t<U7?1:t<K7?2:t<V7?3:t<H7?4:t<W7?5:t<z7?6:t<J7?7:t<G7?8:t<X7?9:10},Z7={encode:$7,decode:q7,encodingLength:Y7},Q7=Z7,Lf=Q7;var kl=(t,e=0)=>[Lf.decode(t,e),Lf.decode.bytes],Ju=(t,e,r=0)=>(Lf.encode(t,e,r),e),Gu=t=>Lf.encodingLength(t);var Rb=(t,e)=>{let r=e.byteLength,n=Gu(t),s=n+Gu(r),i=new Uint8Array(s+r);return Ju(t,i,0),Ju(r,i,n),i.set(e,s),new Bl(t,r,e,i)},_C=t=>{let e=Pl(t),[r,n]=kl(e),[s,i]=kl(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Bl(r,s,o,e)},DC=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&pC(t.bytes,r.bytes)}},Bl=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var SC=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return tL(r,Nb(t),e||Kn.encoder);default:return rL(r,Nb(t),e||jf.encoder)}};var AC=new WeakMap,Nb=t=>{let e=AC.get(t);if(e==null){let r=new Map;return AC.set(t,r),r}return e},Mr=class{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Uf)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==nL)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Mr.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Rb(e,r);return Mr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return Mr.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&DC(e.multihash,n.multihash)}toString(e){return SC(this,e)}toJSON(){return{"/":SC(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof Mr)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new Mr(n,s,i,o||xC(n,s,i.bytes))}else if(r[iL]===!0){let{version:n,multihash:s,code:i}=r,o=_C(s);return Mr.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Uf)throw new Error(`Version 0 CID must use dag-pb (code: ${Uf}) block encoding`);return new Mr(e,r,n,n.bytes)}case 1:{let s=xC(e,r,n.bytes);return new Mr(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return Mr.create(0,Uf,e)}static createV1(e,r){return Mr.create(1,e,r)}static decode(e){let[r,n]=Mr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Mr.inspectBytes(e),n=r.size-r.multihashSize,s=Pl(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Bl(r.multihashCode,r.digestSize,i,s);return[r.version===0?Mr.createV0(o):Mr.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,h]=kl(e.subarray(r));return r+=h,d},s=n(),i=Uf;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=eL(e,r),i=Mr.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Nb(i).set(n,e),i}},eL=(t,e)=>{switch(t[0]){case"Q":{let r=e||Kn;return[Kn.prefix,r.decode(`${Kn.prefix}${t}`)]}case Kn.prefix:{let r=e||Kn;return[Kn.prefix,r.decode(t)]}case jf.prefix:{let r=e||jf;return[jf.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},tL=(t,e,r)=>{let{prefix:n}=r;if(n!==Kn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},rL=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},Uf=112,nL=18,xC=(t,e,r)=>{let n=Gu(t),s=n+Gu(e),i=new Uint8Array(s+r.byteLength);return Ju(t,i,0),Ju(e,i,n),i.set(r,s),i},iL=Symbol.for("@ipld/js-cid/CID");var Zt=class{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Zt.codeToName.has(n)?n:Zt.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=To.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),To.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=To.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=Zt.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=Zt.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){Zt.codeToName.set(e.code,e.name),Zt.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=To.decode(r),i=Zt.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Zt.codeToName=new Map;Zt.nameToCode=new Map;Zt.registerCodec({code:237,name:"ed25519-pub"});Zt.registerCodec({code:4864,name:"ed25519-priv"});Zt.registerCodec({code:236,name:"x25519-pub"});Zt.registerCodec({code:4866,name:"x25519-priv"});Zt.registerCodec({code:231,name:"secp256k1-pub"});Zt.registerCodec({code:4865,name:"secp256k1-priv"});function Mb(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&Mb(t[e])})}var KU=ui(q1(),1),fc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};var dy=class{constructor(){this.store=new Map}clear(){return fc(this,void 0,void 0,function*(){this.store.clear()})}close(){return fc(this,void 0,void 0,function*(){})}delete(e){return fc(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return fc(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return fc(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return fc(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return fc(this,void 0,void 0,function*(){this.store.set(e,r)})}};var Lz=ui(Yw(),1);var Uz=ui(Yw(),1);var Kz=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},rd=class{static digest({data:e}){return Kz(this,void 0,void 0,function*(){return Un(e)})}};var Xs=class{};var Vz=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Ky=class extends Xs{digest({algorithm:e,data:r}){return Vz(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield rd.digest({data:r})}})}};var Hy={};ar(Hy,{bitGet:()=>Yz,bitLen:()=>Xz,bitMask:()=>Ep,bitSet:()=>Zz,bytesToHex:()=>Go,bytesToNumberBE:()=>Xo,bytesToNumberLE:()=>ls,concatBytes:()=>Zo,createHmacDrbg:()=>eE,ensureBytes:()=>zt,equalBytes:()=>Jz,hexToBytes:()=>Ac,hexToNumber:()=>Qw,isBytes:()=>cs,numberToBytesBE:()=>Wn,numberToBytesLE:()=>Yo,numberToHexUnpadded:()=>W3,numberToVarBytesBE:()=>zz,utf8ToBytes:()=>Gz,validateObject:()=>ki});var H3=BigInt(0),Vy=BigInt(1),Hz=BigInt(2);function cs(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Wz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Go(t){if(!cs(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Wz[t[r]];return e}function W3(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Qw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var Jo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function K3(t){if(t>=Jo._0&&t<=Jo._9)return t-Jo._0;if(t>=Jo._A&&t<=Jo._F)return t-(Jo._A-10);if(t>=Jo._a&&t<=Jo._f)return t-(Jo._a-10)}function Ac(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=K3(t.charCodeAt(i)),a=K3(t.charCodeAt(i+1));if(o===void 0||a===void 0){let u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function Xo(t){return Qw(Go(t))}function ls(t){if(!cs(t))throw new Error("Uint8Array expected");return Qw(Go(Uint8Array.from(t).reverse()))}function Wn(t,e){return Ac(t.toString(16).padStart(e*2,"0"))}function Yo(t,e){return Wn(t,e).reverse()}function zz(t){return Ac(W3(t))}function zt(t,e,r){let n;if(typeof e=="string")try{n=Ac(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(cs(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function Zo(...t){let e=0;for(let s=0;s<t.length;s++){let i=t[s];if(!cs(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return r}function Jz(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Gz(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Xz(t){let e;for(e=0;t>H3;t>>=Vy,e+=1);return e}function Yz(t,e){return t>>BigInt(e)&Vy}var Zz=(t,e,r)=>t|(r?Vy:H3)<<BigInt(e),Ep=t=>(Hz<<BigInt(t-1))-Vy,Zw=t=>new Uint8Array(t),V3=t=>Uint8Array.from(t);function eE(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Zw(t),s=Zw(t),i=0,o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),u=(d=Zw())=>{s=a(V3([0]),d),n=a(),d.length!==0&&(s=a(V3([1]),d),n=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<e;){n=a();let f=n.slice();h.push(f),d+=n.length}return Zo(...h)};return(d,h)=>{o(),u(d);let f;for(;!(f=h(c()));)u();return o(),f}}var Qz={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||cs(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ki(t,e,r={}){let n=(s,i,o)=>{let a=Qz[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let u=t[s];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${i}`)};for(let[s,i]of Object.entries(e))n(s,i,!1);for(let[s,i]of Object.entries(r))n(s,i,!0);return t}var qr=BigInt(0),Qt=BigInt(1),xc=BigInt(2),eJ=BigInt(3),tE=BigInt(4),z3=BigInt(5),J3=BigInt(8),tJ=BigInt(9),rJ=BigInt(16);function Bt(t,e){let r=t%e;return r>=qr?r:e+r}function rE(t,e,r){if(r<=qr||e<qr)throw new Error("Expected power/modulo > 0");if(r===Qt)return qr;let n=Qt;for(;e>qr;)e&Qt&&(n=n*t%r),t=t*t%r,e>>=Qt;return n}function Jt(t,e,r){let n=t;for(;e-- >qr;)n*=n,n%=r;return n}function Wy(t,e){if(t===qr||e<=qr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Bt(t,e),n=e,s=qr,i=Qt,o=Qt,a=qr;for(;r!==qr;){let c=n/r,l=n%r,d=s-o*c,h=i-a*c;n=r,r=l,s=o,i=a,o=d,a=h}if(n!==Qt)throw new Error("invert: does not exist");return Bt(s,e)}function nJ(t){let e=(t-Qt)/xc,r,n,s;for(r=t-Qt,n=0;r%xc===qr;r/=xc,n++);for(s=xc;s<t&&rE(s,e,t)!==t-Qt;s++);if(n===1){let o=(t+Qt)/tE;return function(u,c){let l=u.pow(c,o);if(!u.eql(u.sqr(l),c))throw new Error("Cannot find square root");return l}}let i=(r+Qt)/xc;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,s),r),d=a.pow(u,i),h=a.pow(u,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<c&&!a.eql(g,a.ONE);f++)g=a.sqr(g);let p=a.pow(l,Qt<<BigInt(c-f-1));l=a.sqr(p),d=a.mul(d,p),h=a.mul(h,l),c=f}return d}}function iJ(t){if(t%tE===eJ){let e=(t+Qt)/tE;return function(n,s){let i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%J3===z3){let e=(t-z3)/J3;return function(n,s){let i=n.mul(s,xc),o=n.pow(i,e),a=n.mul(s,o),u=n.mul(n.mul(a,xc),o),c=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(c),s))throw new Error("Cannot find square root");return c}}return t%rJ,nJ(t)}var G3=(t,e)=>(Bt(t,e)&Qt)===Qt,sJ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function nE(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=sJ.reduce((n,s)=>(n[s]="function",n),e);return ki(t,r)}function oJ(t,e,r){if(r<qr)throw new Error("Expected power > 0");if(r===qr)return t.ONE;if(r===Qt)return e;let n=t.ONE,s=e;for(;r>qr;)r&Qt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Qt;return n}function aJ(t,e){let r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function iE(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function nd(t,e,r=!1,n={}){if(t<=qr)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:s,nByteLength:i}=iE(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=iJ(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Ep(s),ZERO:qr,ONE:Qt,create:u=>Bt(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return qr<=u&&u<t},is0:u=>u===qr,isOdd:u=>(u&Qt)===Qt,neg:u=>Bt(-u,t),eql:(u,c)=>u===c,sqr:u=>Bt(u*u,t),add:(u,c)=>Bt(u+c,t),sub:(u,c)=>Bt(u-c,t),mul:(u,c)=>Bt(u*c,t),pow:(u,c)=>oJ(a,u,c),div:(u,c)=>Bt(u*Wy(c,t),t),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>Wy(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>aJ(a,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>r?Yo(u,i):Wn(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return r?ls(u):Xo(u)}});return Object.freeze(a)}function X3(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function Y3(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function sE(t){let e=Y3(t);return e+Math.ceil(e/2)}function Z3(t,e,r=!1){let n=t.length,s=Y3(e),i=sE(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let o=r?Xo(t):ls(t),a=Bt(o,e-Qt)+Qt;return r?Yo(a,s):Wn(a,s)}var cJ=BigInt(0),oE=BigInt(1);function zy(t,e){let r=(s,i)=>{let o=i.negate();return s?o:i},n=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>cJ;)i&oE&&(o=o.add(a)),a=a.double(),i>>=oE;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=n(i),u=[],c=s,l=c;for(let d=0;d<o;d++){l=c,u.push(l);for(let h=1;h<a;h++)l=l.add(c),u.push(l);c=l.double()}return u},wNAF(s,i,o){let{windows:a,windowSize:u}=n(s),c=t.ZERO,l=t.BASE,d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){let g=p*u,w=Number(o&d);o>>=f,w>u&&(w-=h,o+=oE);let P=g,C=g+Math.abs(w)-1,v=p%2!==0,k=w<0;w===0?l=l.add(r(v,i[P])):c=c.add(r(k,i[C]))}return{p:c,f:l}},wNAFCached(s,i,o,a){let u=s._WINDOW_SIZE||1,c=i.get(s);return c||(c=this.precomputeWindow(s,u),u!==1&&i.set(s,a(c))),this.wNAF(u,c,o)}}}function _p(t){return nE(t.Fp),ki(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...iE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function lJ(t){let e=_p(t);ki(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:dJ,hexToBytes:fJ}=Hy,Cc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Cc;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:dJ(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Cc,r=typeof t=="string"?fJ(t):t;if(!cs(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=Cc._parseInt(r.subarray(2)),{d:o,l:a}=Cc._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){let e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{let l=c.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),u=r(o);return`30${r(o+i+4)}02${u}${s}02${a}${n}`}},Qo=BigInt(0),Bi=BigInt(1),f0e=BigInt(2),Q3=BigInt(3),p0e=BigInt(4);function pJ(t){let e=lJ(t),{Fp:r}=e,n=e.toBytes||((p,g,w)=>{let P=g.toAffine();return Zo(Uint8Array.from([4]),r.toBytes(P.x),r.toBytes(P.y))}),s=e.fromBytes||(p=>{let g=p.subarray(1),w=r.fromBytes(g.subarray(0,r.BYTES)),P=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:w,y:P}});function i(p){let{a:g,b:w}=e,P=r.sqr(p),C=r.mul(P,p);return r.add(r.add(C,r.mul(p,g)),w)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Qo<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(p){let{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:P,n:C}=e;if(g&&typeof p!="bigint"){if(cs(p)&&(p=Go(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:Xo(zt("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return P&&(v=Bt(v,C)),a(v),v}let c=new Map;function l(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,P){if(this.px=g,this.py=w,this.pz=P,g==null||!r.isValid(g))throw new Error("x required");if(w==null||!r.isValid(w))throw new Error("y required");if(P==null||!r.isValid(P))throw new Error("z required")}static fromAffine(g){let{x:w,y:P}=g||{};if(!g||!r.isValid(w)||!r.isValid(P))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");let C=v=>r.eql(v,r.ZERO);return C(w)&&C(P)?d.ZERO:new d(w,P,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){let w=r.invertBatch(g.map(P=>P.pz));return g.map((P,C)=>P.toAffine(w[C])).map(d.fromAffine)}static fromHex(g){let w=d.fromAffine(s(zt("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(u(g))}_setWindowSize(g){this._WINDOW_SIZE=g,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:g,y:w}=this.toAffine();if(!r.isValid(g)||!r.isValid(w))throw new Error("bad point: x or y not FE");let P=r.sqr(w),C=i(g);if(!r.eql(P,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){l(g);let{px:w,py:P,pz:C}=this,{px:v,py:k,pz:B}=g,T=r.eql(r.mul(w,B),r.mul(v,C)),M=r.eql(r.mul(P,B),r.mul(k,C));return T&&M}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:g,b:w}=e,P=r.mul(w,Q3),{px:C,py:v,pz:k}=this,B=r.ZERO,T=r.ZERO,M=r.ZERO,y=r.mul(C,C),b=r.mul(v,v),E=r.mul(k,k),I=r.mul(C,v);return I=r.add(I,I),M=r.mul(C,k),M=r.add(M,M),B=r.mul(g,M),T=r.mul(P,E),T=r.add(B,T),B=r.sub(b,T),T=r.add(b,T),T=r.mul(B,T),B=r.mul(I,B),M=r.mul(P,M),E=r.mul(g,E),I=r.sub(y,E),I=r.mul(g,I),I=r.add(I,M),M=r.add(y,y),y=r.add(M,y),y=r.add(y,E),y=r.mul(y,I),T=r.add(T,y),E=r.mul(v,k),E=r.add(E,E),y=r.mul(E,I),B=r.sub(B,y),M=r.mul(E,b),M=r.add(M,M),M=r.add(M,M),new d(B,T,M)}add(g){l(g);let{px:w,py:P,pz:C}=this,{px:v,py:k,pz:B}=g,T=r.ZERO,M=r.ZERO,y=r.ZERO,b=e.a,E=r.mul(e.b,Q3),I=r.mul(w,v),S=r.mul(P,k),N=r.mul(C,B),R=r.add(w,P),O=r.add(v,k);R=r.mul(R,O),O=r.add(I,S),R=r.sub(R,O),O=r.add(w,C);let F=r.add(v,B);return O=r.mul(O,F),F=r.add(I,N),O=r.sub(O,F),F=r.add(P,C),T=r.add(k,B),F=r.mul(F,T),T=r.add(S,N),F=r.sub(F,T),y=r.mul(b,O),T=r.mul(E,N),y=r.add(T,y),T=r.sub(S,y),y=r.add(S,y),M=r.mul(T,y),S=r.add(I,I),S=r.add(S,I),N=r.mul(b,N),O=r.mul(E,O),S=r.add(S,N),N=r.sub(I,N),N=r.mul(b,N),O=r.add(O,N),I=r.mul(S,O),M=r.add(M,I),I=r.mul(F,O),T=r.mul(R,T),T=r.sub(T,I),I=r.mul(R,S),y=r.mul(F,y),y=r.add(y,I),new d(T,M,y)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,c,g,w=>{let P=r.invertBatch(w.map(C=>C.pz));return w.map((C,v)=>C.toAffine(P[v])).map(d.fromAffine)})}multiplyUnsafe(g){let w=d.ZERO;if(g===Qo)return w;if(a(g),g===Bi)return this;let{endo:P}=e;if(!P)return f.unsafeLadder(this,g);let{k1neg:C,k1:v,k2neg:k,k2:B}=P.splitScalar(g),T=w,M=w,y=this;for(;v>Qo||B>Qo;)v&Bi&&(T=T.add(y)),B&Bi&&(M=M.add(y)),y=y.double(),v>>=Bi,B>>=Bi;return C&&(T=T.negate()),k&&(M=M.negate()),M=new d(r.mul(M.px,P.beta),M.py,M.pz),T.add(M)}multiply(g){a(g);let w=g,P,C,{endo:v}=e;if(v){let{k1neg:k,k1:B,k2neg:T,k2:M}=v.splitScalar(w),{p:y,f:b}=this.wNAF(B),{p:E,f:I}=this.wNAF(M);y=f.constTimeNegate(k,y),E=f.constTimeNegate(T,E),E=new d(r.mul(E.px,v.beta),E.py,E.pz),P=y.add(E),C=b.add(I)}else{let{p:k,f:B}=this.wNAF(w);P=k,C=B}return d.normalizeZ([P,C])[0]}multiplyAndAddUnsafe(g,w,P){let C=d.BASE,v=(B,T)=>T===Qo||T===Bi||!B.equals(C)?B.multiplyUnsafe(T):B.multiply(T),k=v(this,w).add(v(g,P));return k.is0()?void 0:k}toAffine(g){let{px:w,py:P,pz:C}=this,v=this.is0();g==null&&(g=v?r.ONE:r.inv(C));let k=r.mul(w,g),B=r.mul(P,g),T=r.mul(C,g);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(T,r.ONE))throw new Error("invZ was invalid");return{x:k,y:B}}isTorsionFree(){let{h:g,isTorsionFree:w}=e;if(g===Bi)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:g,clearCofactor:w}=e;return g===Bi?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),n(d,this,g)}toHex(g=!0){return Go(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let h=e.nBitLength,f=zy(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:o}}function hJ(t){let e=_p(t);return ki(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function e8(t){let e=hJ(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(O){return Qo<O&&O<r.ORDER}function a(O){return Bt(O,n)}function u(O){return Wy(O,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:h}=pJ({...e,toBytes(O,F,U){let q=F.toAffine(),$=r.toBytes(q.x),V=Zo;return U?V(Uint8Array.from([F.hasEvenY()?2:3]),$):V(Uint8Array.from([4]),$,r.toBytes(q.y))},fromBytes(O){let F=O.length,U=O[0],q=O.subarray(1);if(F===s&&(U===2||U===3)){let $=Xo(q);if(!o($))throw new Error("Point is not on curve");let V=d($),z=r.sqrt(V),ee=(z&Bi)===Bi;return(U&1)===1!==ee&&(z=r.neg(z)),{x:$,y:z}}else if(F===i&&U===4){let $=r.fromBytes(q.subarray(0,r.BYTES)),V=r.fromBytes(q.subarray(r.BYTES,2*r.BYTES));return{x:$,y:V}}else throw new Error(`Point of length ${F} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=O=>Go(Wn(O,e.nByteLength));function p(O){let F=n>>Bi;return O>F}function g(O){return p(O)?a(-O):O}let w=(O,F,U)=>Xo(O.slice(F,U));class P{constructor(F,U,q){this.r=F,this.s=U,this.recovery=q,this.assertValidity()}static fromCompact(F){let U=e.nByteLength;return F=zt("compactSignature",F,U*2),new P(w(F,0,U),w(F,U,2*U))}static fromDER(F){let{r:U,s:q}=Cc.toSig(zt("DER",F));return new P(U,q)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new P(this.r,this.s,F)}recoverPublicKey(F){let{r:U,s:q,recovery:$}=this,V=M(zt("msgHash",F));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");let z=$===2||$===3?U+e.n:U;if(z>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let ee=$&1?"03":"02",ce=c.fromHex(ee+f(z)),re=u(z),ie=a(-V*re),ue=a(q*re),ye=c.BASE.multiplyAndAddUnsafe(ce,ie,ue);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new P(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ac(this.toDERHex())}toDERHex(){return Cc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ac(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}let C={isValidPrivateKey(O){try{return l(O),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let O=sE(e.n);return Z3(e.randomBytes(O),e.n)},precompute(O=8,F=c.BASE){return F._setWindowSize(O),F.multiply(BigInt(3)),F}};function v(O,F=!0){return c.fromPrivateKey(O).toRawBytes(F)}function k(O){let F=cs(O),U=typeof O=="string",q=(F||U)&&O.length;return F?q===s||q===i:U?q===2*s||q===2*i:O instanceof c}function B(O,F,U=!0){if(k(O))throw new Error("first arg must be private key");if(!k(F))throw new Error("second arg must be public key");return c.fromHex(F).multiply(l(O)).toRawBytes(U)}let T=e.bits2int||function(O){let F=Xo(O),U=O.length*8-e.nBitLength;return U>0?F>>BigInt(U):F},M=e.bits2int_modN||function(O){return a(T(O))},y=Ep(e.nBitLength);function b(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(Qo<=O&&O<y))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Wn(O,e.nByteLength)}function E(O,F,U=I){if(["recovered","canonical"].some(He=>He in U))throw new Error("sign() legacy options not supported");let{hash:q,randomBytes:$}=e,{lowS:V,prehash:z,extraEntropy:ee}=U;V==null&&(V=!0),O=zt("msgHash",O),z&&(O=zt("prehashed msgHash",q(O)));let ce=M(O),re=l(F),ie=[b(re),b(ce)];if(ee!=null){let He=ee===!0?$(r.BYTES):ee;ie.push(zt("extraEntropy",He))}let ue=Zo(...ie),ye=ce;function ke(He){let Xe=T(He);if(!h(Xe))return;let qe=u(Xe),Le=c.BASE.multiply(Xe).toAffine(),pt=a(Le.x);if(pt===Qo)return;let Me=a(qe*a(ye+pt*re));if(Me===Qo)return;let at=(Le.x===pt?0:2)|Number(Le.y&Bi),br=Me;return V&&p(Me)&&(br=g(Me),at^=1),new P(pt,br,at)}return{seed:ue,k2sig:ke}}let I={lowS:e.lowS,prehash:!1},S={lowS:e.lowS,prehash:!1};function N(O,F,U=I){let{seed:q,k2sig:$}=E(O,F,U),V=e;return eE(V.hash.outputLen,V.nByteLength,V.hmac)(q,$)}c.BASE._setWindowSize(8);function R(O,F,U,q=S){let $=O;if(F=zt("msgHash",F),U=zt("publicKey",U),"strict"in q)throw new Error("options.strict was renamed to lowS");let{lowS:V,prehash:z}=q,ee,ce;try{if(typeof $=="string"||cs($))try{ee=P.fromDER($)}catch(Le){if(!(Le instanceof Cc.Err))throw Le;ee=P.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){let{r:Le,s:pt}=$;ee=new P(Le,pt)}else throw new Error("PARSE");ce=c.fromHex(U)}catch(Le){if(Le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(V&&ee.hasHighS())return!1;z&&(F=e.hash(F));let{r:re,s:ie}=ee,ue=M(F),ye=u(ie),ke=a(ue*ye),He=a(re*ye),Xe=c.BASE.multiplyAndAddUnsafe(ce,ke,He)?.toAffine();return Xe?a(Xe.x)===re:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:B,sign:N,verify:R,ProjectivePoint:c,Signature:P,utils:C}}var Jy=class extends xl{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,aC(e);let n=Nf(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Sl(this),this.iHash.update(e),this}digestInto(e){Sl(this),Sb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},aE=(t,e,r)=>new Jy(t,e).update(r).digest();aE.create=(t,e)=>new Jy(t,e);function mJ(t){return{hash:t,hmac:(e,...r)=>aE(t,e,Bm(...r)),randomBytes:Wu}}function Gy(t,e){let r=n=>e8({...t,...mJ(n)});return Object.freeze({...r(e),create:r})}var n8=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),t8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),yJ=BigInt(1),uE=BigInt(2),r8=(t,e)=>(t+e/uE)/e;function gJ(t){let e=n8,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,l=c*c*t%e,d=Jt(l,r,e)*l%e,h=Jt(d,r,e)*l%e,f=Jt(h,uE,e)*c%e,p=Jt(f,s,e)*f%e,g=Jt(p,i,e)*p%e,w=Jt(g,a,e)*g%e,P=Jt(w,u,e)*w%e,C=Jt(P,a,e)*g%e,v=Jt(C,r,e)*l%e,k=Jt(v,o,e)*p%e,B=Jt(k,n,e)*c%e,T=Jt(B,uE,e);if(!cE.eql(cE.sqr(T),t))throw new Error("Cannot find square root");return T}var cE=nd(n8,void 0,void 0,{sqrt:gJ}),zn=Gy({a:BigInt(0),b:BigInt(7),Fp:cE,n:t8,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=t8,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-yJ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=r8(i*t,e),u=r8(-n*t,e),c=Bt(t-a*r-u*s,e),l=Bt(-a*n-u*i,e),d=c>o,h=l>o;if(d&&(c=e-c),h&&(l=e-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:h,k2:l}}}},Un),A0e=BigInt(0);var x0e=zn.ProjectivePoint;function i8(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var vJ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},lE="urn:jwk:";function nt({jwk:t}){return vJ(this,void 0,void 0,function*(){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);Mb(r);let n=i8(r),s=ne.string(n).toUint8Array(),i=yield rd.digest({data:s});return ne.uint8Array(i).toBase64Url()})}function Ys(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function id(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function Zs(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function sd(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function s8(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var an=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},bJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},er=class{static adjustSignatureToLowS({signature:e}){return an(this,void 0,void 0,function*(){let r=zn.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return an(this,void 0,void 0,function*(){let r=yield er.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:ne.uint8Array(e).toBase64Url(),x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return an(this,void 0,void 0,function*(){let r=yield er.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return an(this,void 0,void 0,function*(){return zn.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return an(this,void 0,void 0,function*(){let r=yield er.privateKeyToBytes({privateKey:e}),n=yield er.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:ne.uint8Array(n.x).toBase64Url(),y:ne.uint8Array(n.y).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return an(this,void 0,void 0,function*(){return zn.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return an(this,void 0,void 0,function*(){return zn.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return an(this,void 0,void 0,function*(){let e=zn.utils.randomPrivateKey(),r=yield er.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return an(this,void 0,void 0,function*(){if(!(Ys(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:n}=e,s=bJ(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return an(this,void 0,void 0,function*(){if(!Ys(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return an(this,void 0,void 0,function*(){if(!(id(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ne.base64Url(e.x).toUint8Array(),s=ne.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return an(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield er.privateKeyToBytes({privateKey:e}),s=yield er.publicKeyToBytes({publicKey:r});return zn.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return an(this,void 0,void 0,function*(){let n=yield er.privateKeyToBytes({privateKey:r}),s=Un(e);return zn.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return an(this,void 0,void 0,function*(){return zn.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return an(this,void 0,void 0,function*(){try{zn.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return an(this,void 0,void 0,function*(){let s=yield er.publicKeyToBytes({publicKey:e}),i=Un(n);return zn.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return an(this,void 0,void 0,function*(){e.byteLength===32&&(e=zn.getPublicKey(e));let r=zn.ProjectivePoint.fromHex(e),n=Wn(r.x,32),s=Wn(r.y,32);return{x:n,y:s}})}};var o8=nd(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),wJ=o8.create(BigInt("-3")),EJ=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),_J=Gy({a:wJ,b:EJ,Fp:o8,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Un),fi=_J;var un=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},DJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},cr=class{static adjustSignatureToLowS({signature:e}){return un(this,void 0,void 0,function*(){let r=fi.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return un(this,void 0,void 0,function*(){let r=yield cr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:ne.uint8Array(e).toBase64Url(),x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){let r=yield cr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){return fi.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return un(this,void 0,void 0,function*(){let r=yield cr.privateKeyToBytes({privateKey:e}),n=yield cr.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:ne.uint8Array(n.x).toBase64Url(),y:ne.uint8Array(n.y).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return un(this,void 0,void 0,function*(){return fi.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){return fi.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return un(this,void 0,void 0,function*(){let e=fi.utils.randomPrivateKey(),r=yield cr.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return un(this,void 0,void 0,function*(){if(!(Ys(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:n}=e,s=DJ(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return un(this,void 0,void 0,function*(){if(!Ys(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return un(this,void 0,void 0,function*(){if(!(id(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ne.base64Url(e.x).toUint8Array(),s=ne.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return un(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield cr.privateKeyToBytes({privateKey:e}),s=yield cr.publicKeyToBytes({publicKey:r});return fi.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return un(this,void 0,void 0,function*(){let n=yield cr.privateKeyToBytes({privateKey:r}),s=Un(e);return fi.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return un(this,void 0,void 0,function*(){return fi.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){try{fi.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return un(this,void 0,void 0,function*(){let s=yield cr.publicKeyToBytes({publicKey:e}),i=Un(n);return fi.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return un(this,void 0,void 0,function*(){e.byteLength===32&&(e=fi.getPublicKey(e));let r=fi.ProjectivePoint.fromHex(e),n=Wn(r.x,32),s=Wn(r.y,32);return{x:n,y:s}})}};var Dp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Sp=class extends Xs{computePublicKey({key:e}){return Dp(this,void 0,void 0,function*(){if(!Ys(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield er.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield cr.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Dp(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{let r=yield er.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=yield cr.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return Dp(this,void 0,void 0,function*(){if(!Ys(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield er.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield cr.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Dp(this,void 0,void 0,function*(){if(!Ys(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield er.sign({key:e,data:r});case"P-256":return yield cr.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Dp(this,void 0,void 0,function*(){if(!id(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield er.verify({key:e,signature:r,data:n});case"P-256":return yield cr.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var Xy=BigInt(4294967295),dE=BigInt(32);function a8(t,e=!1){return e?{h:Number(t&Xy),l:Number(t>>dE&Xy)}:{h:Number(t>>dE&Xy)|0,l:Number(t&Xy)|0}}function SJ(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:i,l:o}=a8(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}var AJ=(t,e)=>BigInt(t>>>0)<<dE|BigInt(e>>>0),xJ=(t,e,r)=>t>>>r,CJ=(t,e,r)=>t<<32-r|e>>>r,PJ=(t,e,r)=>t>>>r|e<<32-r,OJ=(t,e,r)=>t<<32-r|e>>>r,kJ=(t,e,r)=>t<<64-r|e>>>r-32,BJ=(t,e,r)=>t>>>r-32|e<<64-r,IJ=(t,e)=>e,TJ=(t,e)=>t,FJ=(t,e,r)=>t<<r|e>>>32-r,RJ=(t,e,r)=>e<<r|t>>>32-r,$J=(t,e,r)=>e<<r-32|t>>>64-r,NJ=(t,e,r)=>t<<r-32|e>>>64-r;function MJ(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var jJ=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),qJ=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,LJ=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),UJ=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,KJ=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),VJ=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0;var HJ={fromBig:a8,split:SJ,toBig:AJ,shrSH:xJ,shrSL:CJ,rotrSH:PJ,rotrSL:OJ,rotrBH:kJ,rotrBL:BJ,rotr32H:IJ,rotr32L:TJ,rotlSH:FJ,rotlSL:RJ,rotlBH:$J,rotlBL:NJ,add:MJ,add3L:jJ,add3H:qJ,add4L:LJ,add4H:UJ,add5H:VJ,add5L:KJ},Ze=HJ;var[WJ,zJ]=(()=>Ze.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Ya=new Uint32Array(80),Za=new Uint32Array(80),fE=class extends Cl{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:c,El:l,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,r,n,s,i,o,a,u,c,l,d,h,f,p,g,w]}set(e,r,n,s,i,o,a,u,c,l,d,h,f,p,g,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,r){for(let v=0;v<16;v++,r+=4)Ya[v]=e.getUint32(r),Za[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){let k=Ya[v-15]|0,B=Za[v-15]|0,T=Ze.rotrSH(k,B,1)^Ze.rotrSH(k,B,8)^Ze.shrSH(k,B,7),M=Ze.rotrSL(k,B,1)^Ze.rotrSL(k,B,8)^Ze.shrSL(k,B,7),y=Ya[v-2]|0,b=Za[v-2]|0,E=Ze.rotrSH(y,b,19)^Ze.rotrBH(y,b,61)^Ze.shrSH(y,b,6),I=Ze.rotrSL(y,b,19)^Ze.rotrBL(y,b,61)^Ze.shrSL(y,b,6),S=Ze.add4L(M,I,Za[v-7],Za[v-16]),N=Ze.add4H(S,T,E,Ya[v-7],Ya[v-16]);Ya[v]=N|0,Za[v]=S|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:c,Dl:l,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:P,Hl:C}=this;for(let v=0;v<80;v++){let k=Ze.rotrSH(d,h,14)^Ze.rotrSH(d,h,18)^Ze.rotrBH(d,h,41),B=Ze.rotrSL(d,h,14)^Ze.rotrSL(d,h,18)^Ze.rotrBL(d,h,41),T=d&f^~d&g,M=h&p^~h&w,y=Ze.add5L(C,B,M,zJ[v],Za[v]),b=Ze.add5H(y,P,k,T,WJ[v],Ya[v]),E=y|0,I=Ze.rotrSH(n,s,28)^Ze.rotrBH(n,s,34)^Ze.rotrBH(n,s,39),S=Ze.rotrSL(n,s,28)^Ze.rotrBL(n,s,34)^Ze.rotrBL(n,s,39),N=n&i^n&a^i&a,R=s&o^s&u^o&u;P=g|0,C=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ze.add(c|0,l|0,b|0,E|0),c=a|0,l=u|0,a=i|0,u=o|0,i=n|0,o=s|0;let O=Ze.add3L(E,S,R);n=Ze.add3H(O,b,I,N),s=O|0}({h:n,l:s}=Ze.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Ze.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=Ze.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l}=Ze.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:d,l:h}=Ze.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ze.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ze.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:P,l:C}=Ze.add(this.Hh|0,this.Hl|0,P|0,C|0),this.set(n,s,i,o,a,u,c,l,d,h,f,p,g,w,P,C)}roundClean(){Ya.fill(0),Za.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var pE=Im(()=>new fE);var ds=BigInt(0),pi=BigInt(1),Yy=BigInt(2),JJ=BigInt(8),GJ={zip215:!0};function XJ(t){let e=_p(t);return ki(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Zy(t){let e=XJ(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=e,c=Yy<<BigInt(a*8)-pi,l=r.create,d=e.uvRatio||((q,$)=>{try{return{isValid:!0,value:r.sqrt(q*r.inv($))}}catch{return{isValid:!1,value:ds}}}),h=e.adjustScalarBytes||(q=>q),f=e.domain||((q,$,V)=>{if($.length||V)throw new Error("Contexts/pre-hash are not supported");return q}),p=q=>typeof q=="bigint"&&ds<q,g=(q,$)=>p(q)&&p($)&&q<$,w=q=>q===ds||g(q,c);function P(q,$){if(g(q,$))return q;throw new Error(`Expected valid scalar < ${$}, got ${typeof q} ${q}`)}function C(q){return q===ds?q:P(q,n)}let v=new Map;function k(q){if(!(q instanceof B))throw new Error("ExtendedPoint expected")}class B{constructor($,V,z,ee){if(this.ex=$,this.ey=V,this.ez=z,this.et=ee,!w($))throw new Error("x required");if(!w(V))throw new Error("y required");if(!w(z))throw new Error("z required");if(!w(ee))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine($){if($ instanceof B)throw new Error("extended point not allowed");let{x:V,y:z}=$||{};if(!w(V)||!w(z))throw new Error("invalid affine point");return new B(V,z,pi,l(V*z))}static normalizeZ($){let V=r.invertBatch($.map(z=>z.ez));return $.map((z,ee)=>z.toAffine(V[ee])).map(B.fromAffine)}_setWindowSize($){this._WINDOW_SIZE=$,v.delete(this)}assertValidity(){let{a:$,d:V}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:z,ey:ee,ez:ce,et:re}=this,ie=l(z*z),ue=l(ee*ee),ye=l(ce*ce),ke=l(ye*ye),He=l(ie*$),Xe=l(ye*l(He+ue)),qe=l(ke+l(V*l(ie*ue)));if(Xe!==qe)throw new Error("bad point: equation left != right (1)");let Le=l(z*ee),pt=l(ce*re);if(Le!==pt)throw new Error("bad point: equation left != right (2)")}equals($){k($);let{ex:V,ey:z,ez:ee}=this,{ex:ce,ey:re,ez:ie}=$,ue=l(V*ie),ye=l(ce*ee),ke=l(z*ie),He=l(re*ee);return ue===ye&&ke===He}is0(){return this.equals(B.ZERO)}negate(){return new B(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:$}=e,{ex:V,ey:z,ez:ee}=this,ce=l(V*V),re=l(z*z),ie=l(Yy*l(ee*ee)),ue=l($*ce),ye=V+z,ke=l(l(ye*ye)-ce-re),He=ue+re,Xe=He-ie,qe=ue-re,Le=l(ke*Xe),pt=l(He*qe),Me=l(ke*qe),at=l(Xe*He);return new B(Le,pt,at,Me)}add($){k($);let{a:V,d:z}=e,{ex:ee,ey:ce,ez:re,et:ie}=this,{ex:ue,ey:ye,ez:ke,et:He}=$;if(V===BigInt(-1)){let Fa=l((ce-ee)*(ye+ue)),bt=l((ce+ee)*(ye-ue)),ir=l(bt-Fa);if(ir===ds)return this.double();let Te=l(re*Yy*He),Er=l(ie*Yy*ke),St=Er+Te,Is=bt+Fa,Lu=Er-Te,Ln=l(St*ir),Ts=l(Is*Lu),rs=l(St*Lu),yr=l(ir*Is);return new B(Ln,Ts,yr,rs)}let Xe=l(ee*ue),qe=l(ce*ye),Le=l(ie*z*He),pt=l(re*ke),Me=l((ee+ce)*(ue+ye)-Xe-qe),at=pt-Le,br=pt+Le,Bs=l(qe-V*Xe),ts=l(Me*at),Oo=l(br*Bs),wr=l(Me*Bs),qn=l(at*br);return new B(ts,Oo,qn,wr)}subtract($){return this.add($.negate())}wNAF($){return y.wNAFCached(this,v,$,B.normalizeZ)}multiply($){let{p:V,f:z}=this.wNAF(P($,n));return B.normalizeZ([V,z])[0]}multiplyUnsafe($){let V=C($);return V===ds?M:this.equals(M)||V===pi?this:this.equals(T)?this.wNAF(V).p:y.unsafeLadder(this,V)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return y.unsafeLadder(this,n).is0()}toAffine($){let{ex:V,ey:z,ez:ee}=this,ce=this.is0();$==null&&($=ce?JJ:r.inv(ee));let re=l(V*$),ie=l(z*$),ue=l(ee*$);if(ce)return{x:ds,y:pi};if(ue!==pi)throw new Error("invZ was invalid");return{x:re,y:ie}}clearCofactor(){let{h:$}=e;return $===pi?this:this.multiplyUnsafe($)}static fromHex($,V=!1){let{d:z,a:ee}=e,ce=r.BYTES;$=zt("pointHex",$,ce);let re=$.slice(),ie=$[ce-1];re[ce-1]=ie&-129;let ue=ls(re);ue===ds||(V?P(ue,c):P(ue,r.ORDER));let ye=l(ue*ue),ke=l(ye-pi),He=l(z*ye-ee),{isValid:Xe,value:qe}=d(ke,He);if(!Xe)throw new Error("Point.fromHex: invalid y coordinate");let Le=(qe&pi)===pi,pt=(ie&128)!==0;if(!V&&qe===ds&&pt)throw new Error("Point.fromHex: x=0 and x_0=1");return pt!==Le&&(qe=l(-qe)),B.fromAffine({x:qe,y:ue})}static fromPrivateKey($){return I($).point}toRawBytes(){let{x:$,y:V}=this.toAffine(),z=Yo(V,r.BYTES);return z[z.length-1]|=$&pi?128:0,z}toHex(){return Go(this.toRawBytes())}}B.BASE=new B(e.Gx,e.Gy,pi,l(e.Gx*e.Gy)),B.ZERO=new B(ds,pi,pi,ds);let{BASE:T,ZERO:M}=B,y=zy(B,a*8);function b(q){return Bt(q,n)}function E(q){return b(ls(q))}function I(q){let $=a;q=zt("private key",q,$);let V=zt("hashed private key",i(q),2*$),z=h(V.slice(0,$)),ee=V.slice($,2*$),ce=E(z),re=T.multiply(ce),ie=re.toRawBytes();return{head:z,prefix:ee,scalar:ce,point:re,pointBytes:ie}}function S(q){return I(q).pointBytes}function N(q=new Uint8Array,...$){let V=Zo(...$);return E(i(f(V,zt("context",q),!!s)))}function R(q,$,V={}){q=zt("message",q),s&&(q=s(q));let{prefix:z,scalar:ee,pointBytes:ce}=I($),re=N(V.context,z,q),ie=T.multiply(re).toRawBytes(),ue=N(V.context,ie,ce,q),ye=b(re+ue*ee);C(ye);let ke=Zo(ie,Yo(ye,r.BYTES));return zt("result",ke,a*2)}let O=GJ;function F(q,$,V,z=O){let{context:ee,zip215:ce}=z,re=r.BYTES;q=zt("signature",q,2*re),$=zt("message",$),s&&($=s($));let ie=ls(q.slice(re,2*re)),ue,ye,ke;try{ue=B.fromHex(V,ce),ye=B.fromHex(q.slice(0,re),ce),ke=T.multiplyUnsafe(ie)}catch{return!1}if(!ce&&ue.isSmallOrder())return!1;let He=N(ee,ye.toRawBytes(),ue.toRawBytes(),$);return ye.add(ue.multiplyUnsafe(He)).subtract(ke).clearCofactor().equals(B.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:S,sign:R,verify:F,ExtendedPoint:B,utils:{getExtendedPublicKey:I,randomPrivateKey:()=>o(r.BYTES),precompute(q=8,$=B.BASE){return $._setWindowSize(q),$.multiply(BigInt(3)),$}}}}var Ap=BigInt(0),hE=BigInt(1);function YJ(t){return ki(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function u8(t){let e=YJ(t),{P:r}=e,n=v=>Bt(v,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(v=>v),u=e.powPminus2||(v=>rE(v,r-BigInt(2),r));function c(v,k,B){let T=n(v*(k-B));return k=n(k-T),B=n(B+T),[k,B]}function l(v){if(typeof v=="bigint"&&Ap<=v&&v<r)return v;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let d=(e.a-BigInt(2))/BigInt(4);function h(v,k){let B=l(v),T=l(k),M=B,y=hE,b=Ap,E=B,I=hE,S=Ap,N;for(let O=BigInt(s-1);O>=Ap;O--){let F=T>>O&hE;S^=F,N=c(S,y,E),y=N[0],E=N[1],N=c(S,b,I),b=N[0],I=N[1],S=F;let U=y+b,q=n(U*U),$=y-b,V=n($*$),z=q-V,ee=E+I,ce=E-I,re=n(ce*U),ie=n(ee*$),ue=re+ie,ye=re-ie;E=n(ue*ue),I=n(M*n(ye*ye)),y=n(q*V),b=n(z*(q+n(d*z)))}N=c(S,y,E),y=N[0],E=N[1],N=c(S,b,I),b=N[0],I=N[1];let R=u(b);return n(y*R)}function f(v){return Yo(n(v),i)}function p(v){let k=zt("u coordinate",v,i);return o===32&&(k[31]&=127),ls(k)}function g(v){let k=zt("scalar",v),B=k.length;if(B!==i&&B!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${B}`);return ls(a(k))}function w(v,k){let B=p(k),T=g(v),M=h(B,T);if(M===Ap)throw new Error("Invalid private or public key received");return f(M)}let P=f(e.Gu);function C(v){return w(v,P)}return{scalarMult:w,scalarMultBase:C,getSharedSecret:(v,k)=>w(v,k),getPublicKey:v=>C(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:P}}var xp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),c8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),gge=BigInt(0),ZJ=BigInt(1),mE=BigInt(2),QJ=BigInt(5),l8=BigInt(10),eG=BigInt(20),tG=BigInt(40),d8=BigInt(80);function f8(t){let e=xp,n=t*t%e*t%e,s=Jt(n,mE,e)*n%e,i=Jt(s,ZJ,e)*t%e,o=Jt(i,QJ,e)*i%e,a=Jt(o,l8,e)*o%e,u=Jt(a,eG,e)*a%e,c=Jt(u,tG,e)*u%e,l=Jt(c,d8,e)*c%e,d=Jt(l,d8,e)*c%e,h=Jt(d,l8,e)*o%e;return{pow_p_5_8:Jt(h,mE,e)*t%e,b2:n}}function p8(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function rG(t,e){let r=xp,n=Bt(e*e*e,r),s=Bt(n*n*e,r),i=f8(t*s).pow_p_5_8,o=Bt(t*n*i,r),a=Bt(e*o*o,r),u=o,c=Bt(o*c8,r),l=a===t,d=a===Bt(-t,r),h=a===Bt(-t*c8,r);return l&&(o=u),(d||h)&&(o=c),G3(o,r)&&(o=Bt(-o,r)),{isValid:l||d,value:o}}var Ii=nd(xp,void 0,!0),Cp={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Ii,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:pE,randomBytes:Wu,adjustScalarBytes:p8,uvRatio:rG},Qa=Zy(Cp);function h8(t,e,r){if(e.length>255)throw new Error("Context is too big");return Bm(Ab("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var vge=Zy({...Cp,domain:h8}),bge=Zy({...Cp,domain:h8,prehash:pE}),Pc=(()=>u8({P:xp,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=xp,{pow_p_5_8:r,b2:n}=f8(t);return Bt(Jt(r,BigInt(3),e)*n,e)},adjustScalarBytes:p8,randomBytes:Wu}))();function m8(t){let{y:e}=Qa.ExtendedPoint.fromHex(t),r=BigInt(1);return Ii.toBytes(Ii.create((r+e)*Ii.inv(r-e)))}function y8(t){let e=Cp.hash(t.subarray(0,32));return Cp.adjustScalarBytes(e).subarray(0,32)}var nG=(Ii.ORDER+BigInt(3))/BigInt(8),wge=Ii.pow(mE,nG),Ege=Ii.sqrt(Ii.neg(Ii.ONE)),_ge=(Ii.ORDER-BigInt(5))/BigInt(8),Dge=BigInt(486662);var Sge=X3(Ii,Ii.neg(BigInt(486664)));var Age=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),xge=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Cge=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Pge=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var Oge=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ti=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},iG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Wt=class{static bytesToPrivateKey({privateKeyBytes:e}){return Ti(this,void 0,void 0,function*(){let r=Qa.getPublicKey(e),n={crv:"Ed25519",d:ne.uint8Array(e).toBase64Url(),kty:"OKP",x:ne.uint8Array(r).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Ti(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"Ed25519",x:ne.uint8Array(e).toBase64Url()};return r.kid=yield nt({jwk:r}),r})}static computePublicKey({key:e}){return Ti(this,void 0,void 0,function*(){let r=yield Wt.privateKeyToBytes({privateKey:e}),n=Qa.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:ne.uint8Array(n).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:e}){return Ti(this,void 0,void 0,function*(){let r=yield Wt.privateKeyToBytes({privateKey:e}),n=y8(r),s=Pc.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:ne.uint8Array(n).toBase64Url(),x:ne.uint8Array(s).toBase64Url()};return i.kid=yield nt({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:e}){return Ti(this,void 0,void 0,function*(){let r=yield Wt.publicKeyToBytes({publicKey:e});if(!(yield Wt.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");let s=m8(r),i={kty:"OKP",crv:"X25519",x:ne.uint8Array(s).toBase64Url()};return i.kid=yield nt({jwk:i}),i})}static generateKey(){return Ti(this,void 0,void 0,function*(){let e=Qa.utils.randomPrivateKey(),r=yield Wt.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return Ti(this,void 0,void 0,function*(){if(!(Zs(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:n}=e,s=iG(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Ti(this,void 0,void 0,function*(){if(!Zs(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Ti(this,void 0,void 0,function*(){if(!sd(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return ne.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return Ti(this,void 0,void 0,function*(){let n=yield Wt.privateKeyToBytes({privateKey:e});return Qa.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return Ti(this,void 0,void 0,function*(){try{Qa.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Ti(this,void 0,void 0,function*(){let s=yield Wt.publicKeyToBytes({publicKey:e});return Qa.verify(r,n,s)})}};var Pp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Qy=class extends Xs{computePublicKey({key:e}){return Pp(this,void 0,void 0,function*(){if(!Zs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Wt.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Pp(this,void 0,void 0,function*(){switch(e){case"Ed25519":{let r=yield Wt.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return Pp(this,void 0,void 0,function*(){if(!Zs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Wt.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Pp(this,void 0,void 0,function*(){if(!Zs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Wt.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Pp(this,void 0,void 0,function*(){if(!sd(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Wt.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var ea=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},yE={Ed25519:{implementation:Qy,names:["Ed25519"]},secp256k1:{implementation:Sp,names:["ES256K","secp256k1"]},secp256r1:{implementation:Sp,names:["ES256","secp256r1"]},"SHA-256":{implementation:Ky,names:["SHA-256"]}},kr=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new dy}digest({algorithm:e,data:r}){return ea(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return ea(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return ea(this,void 0,void 0,function*(){let n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let s=`${lE}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:e}){return ea(this,void 0,void 0,function*(){let r=yield nt({jwk:e});return`${lE}${r}`})}getPublicKey({keyUri:e}){return ea(this,void 0,void 0,function*(){let r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return ea(this,void 0,void 0,function*(){if(!s8(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield nt({jwk:n}));let s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:e,data:r}){return ea(this,void 0,void 0,function*(){let n=yield this.getPrivateKey({keyUri:e}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return ea(this,void 0,void 0,function*(){let s=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:s}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;let n=(r=yE[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in yE){let i=yE[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return ea(this,void 0,void 0,function*(){let r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};var eu={};ar(eu,{checkRequiredProperty:()=>sG,checkValidProperty:()=>oG,getJoseSignatureAlgorithmFromPublicKey:()=>aG,isWebCryptoSupported:()=>uG,randomBytes:()=>gE,randomUuid:()=>cG});function sG(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function oG(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function aG(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function uG(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function gE(t){return Wu(t)}function cG(){return Al.randomUUID()}var lG=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var ta=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function g8(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var v8=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),dG=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!dG)throw new Error("Non little-endian hardware is not supported");function e0(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function t0(t){if(typeof t=="string")t=e0(t);else if(g8(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var fG=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function b8(t,e){if(e!==void 0&&(typeof e!="object"||!fG(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function Oc(t,e){if(!g8(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function w8(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var vE=(t,e)=>(Object.assign(e,t),e);function bE(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}function Op(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function wE(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function pG(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function od(t,...e){if(!pG(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function EE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function E8(t,e){od(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var tu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},hG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},ra=class{static bytesToPrivateKey({privateKeyBytes:e}){return tu(this,void 0,void 0,function*(){let r=Pc.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:ne.uint8Array(e).toBase64Url(),x:ne.uint8Array(r).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return tu(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"X25519",x:ne.uint8Array(e).toBase64Url()};return r.kid=yield nt({jwk:r}),r})}static computePublicKey({key:e}){return tu(this,void 0,void 0,function*(){let r=yield ra.privateKeyToBytes({privateKey:e}),n=Pc.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:ne.uint8Array(n).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static generateKey(){return tu(this,void 0,void 0,function*(){let e=Pc.utils.randomPrivateKey(),r=yield ra.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return tu(this,void 0,void 0,function*(){if(!(Zs(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:n}=e,s=hG(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return tu(this,void 0,void 0,function*(){if(!Zs(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return tu(this,void 0,void 0,function*(){if(!sd(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return ne.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return tu(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield ra.privateKeyToBytes({privateKey:e}),s=yield ra.publicKeyToBytes({publicKey:r});return Pc.getSharedSecret(n,s)})}};var cn=(t,e)=>t[e++]&255|(t[e++]&255)<<8,SE=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=t0(e),Oc(e,32);let r=cn(e,0),n=cn(e,2),s=cn(e,4),i=cn(e,6),o=cn(e,8),a=cn(e,10),u=cn(e,12),c=cn(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=cn(e,16+2*l)}process(e,r,n=!1){let s=n?0:2048,{h:i,r:o}=this,a=o[0],u=o[1],c=o[2],l=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],P=cn(e,r+0),C=cn(e,r+2),v=cn(e,r+4),k=cn(e,r+6),B=cn(e,r+8),T=cn(e,r+10),M=cn(e,r+12),y=cn(e,r+14),b=i[0]+(P&8191),E=i[1]+((P>>>13|C<<3)&8191),I=i[2]+((C>>>10|v<<6)&8191),S=i[3]+((v>>>7|k<<9)&8191),N=i[4]+((k>>>4|B<<12)&8191),R=i[5]+(B>>>1&8191),O=i[6]+((B>>>14|T<<2)&8191),F=i[7]+((T>>>11|M<<5)&8191),U=i[8]+((M>>>8|y<<8)&8191),q=i[9]+(y>>>5|s),$=0,V=$+b*a+E*(5*w)+I*(5*g)+S*(5*p)+N*(5*f);$=V>>>13,V&=8191,V+=R*(5*h)+O*(5*d)+F*(5*l)+U*(5*c)+q*(5*u),$+=V>>>13,V&=8191;let z=$+b*u+E*a+I*(5*w)+S*(5*g)+N*(5*p);$=z>>>13,z&=8191,z+=R*(5*f)+O*(5*h)+F*(5*d)+U*(5*l)+q*(5*c),$+=z>>>13,z&=8191;let ee=$+b*c+E*u+I*a+S*(5*w)+N*(5*g);$=ee>>>13,ee&=8191,ee+=R*(5*p)+O*(5*f)+F*(5*h)+U*(5*d)+q*(5*l),$+=ee>>>13,ee&=8191;let ce=$+b*l+E*c+I*u+S*a+N*(5*w);$=ce>>>13,ce&=8191,ce+=R*(5*g)+O*(5*p)+F*(5*f)+U*(5*h)+q*(5*d),$+=ce>>>13,ce&=8191;let re=$+b*d+E*l+I*c+S*u+N*a;$=re>>>13,re&=8191,re+=R*(5*w)+O*(5*g)+F*(5*p)+U*(5*f)+q*(5*h),$+=re>>>13,re&=8191;let ie=$+b*h+E*d+I*l+S*c+N*u;$=ie>>>13,ie&=8191,ie+=R*a+O*(5*w)+F*(5*g)+U*(5*p)+q*(5*f),$+=ie>>>13,ie&=8191;let ue=$+b*f+E*h+I*d+S*l+N*c;$=ue>>>13,ue&=8191,ue+=R*u+O*a+F*(5*w)+U*(5*g)+q*(5*p),$+=ue>>>13,ue&=8191;let ye=$+b*p+E*f+I*h+S*d+N*l;$=ye>>>13,ye&=8191,ye+=R*c+O*u+F*a+U*(5*w)+q*(5*g),$+=ye>>>13,ye&=8191;let ke=$+b*g+E*p+I*f+S*h+N*d;$=ke>>>13,ke&=8191,ke+=R*l+O*c+F*u+U*a+q*(5*w),$+=ke>>>13,ke&=8191;let He=$+b*w+E*g+I*p+S*f+N*h;$=He>>>13,He&=8191,He+=R*d+O*l+F*c+U*u+q*a,$+=He>>>13,He&=8191,$=($<<2)+$|0,$=$+V|0,V=$&8191,$=$>>>13,z+=$,i[0]=V,i[1]=z,i[2]=ee,i[3]=ce,i[4]=re,i[5]=ie,i[6]=ue,i[7]=ye,i[8]=ke,i[9]=He}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=1<<13;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){EE(this);let{buffer:r,blockLen:n}=this;e=t0(e);let s=e.length;for(let i=0;i<s;){let o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){EE(this),E8(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function mG(t){let e=(n,s)=>t(s).update(t0(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var _8=mG(t=>new SE(t));var yG=e0("expand 16-byte k"),gG=e0("expand 32-byte k"),vG=ta(yG),bG=ta(gG);function ve(t,e){return t<<e|t>>>32-e}function AE(t){return t.byteOffset%4===0}var r0=64,wG=16,S8=2**32-1,D8=new Uint32Array;function EG(t,e,r,n,s,i,o,a){let u=s.length,c=new Uint8Array(r0),l=ta(c),d=AE(s)&&AE(i),h=d?ta(s):D8,f=d?ta(i):D8;for(let p=0;p<u;o++){if(t(e,r,n,l,o,a),o>=S8)throw new Error("arx: counter overflow");let g=Math.min(r0,u-p);if(d&&g===r0){let w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let P=0,C;P<wG;P++)C=w+P,f[C]=h[C]^l[P];p+=r0;continue}for(let w=0,P;w<g;w++)P=p+w,i[P]=s[P]^c[w];p+=g}}function xE(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=b8({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Op(s),Op(o),wE(i),wE(r),(a,u,c,l,d=0)=>{od(a),od(u),od(c);let h=c.length;if(l||(l=new Uint8Array(h)),od(l),Op(d),d<0||d>=S8)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);let f=[],p=a.length,g,w;if(p===32)g=a.slice(),f.push(g),w=bG;else if(p===16&&r)g=new Uint8Array(32),g.set(a),g.set(a,16),w=vG,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);AE(u)||(u=u.slice(),f.push(u));let P=ta(g);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(w,P,ta(u.subarray(0,16)),P),u=u.subarray(16)}let C=16-s;if(C!==u.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(C!==12){let k=new Uint8Array(12);k.set(u,i?0:12-u.length),u=k,f.push(u)}let v=ta(u);for(EG(t,w,P,v,c,l,d,o);f.length>0;)f.pop().fill(0);return l}}function C8(t,e,r,n,s,i=20){let o=t[0],a=t[1],u=t[2],c=t[3],l=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],P=e[7],C=s,v=r[0],k=r[1],B=r[2],T=o,M=a,y=u,b=c,E=l,I=d,S=h,N=f,R=p,O=g,F=w,U=P,q=C,$=v,V=k,z=B;for(let ce=0;ce<i;ce+=2)T=T+E|0,q=ve(q^T,16),R=R+q|0,E=ve(E^R,12),T=T+E|0,q=ve(q^T,8),R=R+q|0,E=ve(E^R,7),M=M+I|0,$=ve($^M,16),O=O+$|0,I=ve(I^O,12),M=M+I|0,$=ve($^M,8),O=O+$|0,I=ve(I^O,7),y=y+S|0,V=ve(V^y,16),F=F+V|0,S=ve(S^F,12),y=y+S|0,V=ve(V^y,8),F=F+V|0,S=ve(S^F,7),b=b+N|0,z=ve(z^b,16),U=U+z|0,N=ve(N^U,12),b=b+N|0,z=ve(z^b,8),U=U+z|0,N=ve(N^U,7),T=T+I|0,z=ve(z^T,16),F=F+z|0,I=ve(I^F,12),T=T+I|0,z=ve(z^T,8),F=F+z|0,I=ve(I^F,7),M=M+S|0,q=ve(q^M,16),U=U+q|0,S=ve(S^U,12),M=M+S|0,q=ve(q^M,8),U=U+q|0,S=ve(S^U,7),y=y+N|0,$=ve($^y,16),R=R+$|0,N=ve(N^R,12),y=y+N|0,$=ve($^y,8),R=R+$|0,N=ve(N^R,7),b=b+E|0,V=ve(V^b,16),O=O+V|0,E=ve(E^O,12),b=b+E|0,V=ve(V^b,8),O=O+V|0,E=ve(E^O,7);let ee=0;n[ee++]=o+T|0,n[ee++]=a+M|0,n[ee++]=u+y|0,n[ee++]=c+b|0,n[ee++]=l+E|0,n[ee++]=d+I|0,n[ee++]=h+S|0,n[ee++]=f+N|0,n[ee++]=p+R|0,n[ee++]=g+O|0,n[ee++]=w+F|0,n[ee++]=P+U|0,n[ee++]=C+q|0,n[ee++]=v+$|0,n[ee++]=k+V|0,n[ee++]=B+z|0}function _G(t,e,r,n){let s=t[0],i=t[1],o=t[2],a=t[3],u=e[0],c=e[1],l=e[2],d=e[3],h=e[4],f=e[5],p=e[6],g=e[7],w=r[0],P=r[1],C=r[2],v=r[3];for(let B=0;B<20;B+=2)s=s+u|0,w=ve(w^s,16),h=h+w|0,u=ve(u^h,12),s=s+u|0,w=ve(w^s,8),h=h+w|0,u=ve(u^h,7),i=i+c|0,P=ve(P^i,16),f=f+P|0,c=ve(c^f,12),i=i+c|0,P=ve(P^i,8),f=f+P|0,c=ve(c^f,7),o=o+l|0,C=ve(C^o,16),p=p+C|0,l=ve(l^p,12),o=o+l|0,C=ve(C^o,8),p=p+C|0,l=ve(l^p,7),a=a+d|0,v=ve(v^a,16),g=g+v|0,d=ve(d^g,12),a=a+d|0,v=ve(v^a,8),g=g+v|0,d=ve(d^g,7),s=s+c|0,v=ve(v^s,16),p=p+v|0,c=ve(c^p,12),s=s+c|0,v=ve(v^s,8),p=p+v|0,c=ve(c^p,7),i=i+l|0,w=ve(w^i,16),g=g+w|0,l=ve(l^g,12),i=i+l|0,w=ve(w^i,8),g=g+w|0,l=ve(l^g,7),o=o+d|0,P=ve(P^o,16),h=h+P|0,d=ve(d^h,12),o=o+d|0,P=ve(P^o,8),h=h+P|0,d=ve(d^h,7),a=a+u|0,C=ve(C^a,16),f=f+C|0,u=ve(u^f,12),a=a+u|0,C=ve(C^a,8),f=f+C|0,u=ve(u^f,7);let k=0;n[k++]=s,n[k++]=i,n[k++]=o,n[k++]=a,n[k++]=w,n[k++]=P,n[k++]=C,n[k++]=v}var DG=xE(C8,{counterRight:!1,counterLength:4,allowShortKeys:!1}),P8=xE(C8,{counterRight:!1,counterLength:8,extendNonceFn:_G,allowShortKeys:!1});var SG=new Uint8Array(16),A8=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(SG.subarray(r))},AG=new Uint8Array(32);function x8(t,e,r,n,s){let i=t(e,r,AG),o=_8.create(i);s&&A8(o,s),A8(o,n);let a=new Uint8Array(16),u=v8(a);bE(u,0,BigInt(s?s.length:0),!0),bE(u,8,BigInt(n.length),!0),o.update(a);let c=o.digest();return i.fill(0),c}var O8=t=>(e,r,n)=>(Oc(e,32),Oc(r),{encrypt:(i,o)=>{let a=i.length,u=a+16;o?Oc(o,u):o=new Uint8Array(u),t(e,r,i,o,1);let c=x8(t,e,r,o.subarray(0,-16),n);return o.set(c,a),o},decrypt:(i,o)=>{let a=i.length,u=a-16;if(a<16)throw new Error(`encrypted data must be at least ${16} bytes`);o?Oc(o,u):o=new Uint8Array(u);let c=i.subarray(0,-16),l=i.subarray(-16),d=x8(t,e,r,c,n);if(!w8(l,d))throw new Error("invalid tag");return t(e,r,c,o,1),o}}),Tve=vE({blockSize:64,nonceLength:12,tagLength:16},O8(DG)),xG=vE({blockSize:64,nonceLength:24,tagLength:16},O8(P8));var kc;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityDelegation="capabilityDelegation",t.capabilityInvocation="capabilityInvocation"})(kc||(kc={}));var lr={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};var Qe=class{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;let r=Qe.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){let c={},l=o.slice(1).split("&");for(let d of l){let[h,f]=d.split("=");c[h]=f}u.params=c}return u}};Qe.METHOD_PATTERN="([a-z0-9]+)";Qe.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";Qe.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Qe.PCT_ENCODED_PATTERN})`;Qe.METHOD_ID_PATTERN=`((?:${Qe.ID_CHAR_PATTERN}*:)*(${Qe.ID_CHAR_PATTERN}+))`;Qe.PATH_PATTERN="(/[^#?]*)?";Qe.QUERY_PATTERN="([?][^#]*)?";Qe.FRAGMENT_PATTERN="(#.*)?";Qe.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Qe.METHOD_PATTERN}):(?<id>${Qe.METHOD_ID_PATTERN})(?<path>${Qe.PATH_PATTERN})(?<query>${Qe.QUERY_PATTERN})(?<fragment>${Qe.FRAGMENT_PATTERN})$`);var Ee=class extends Error{constructor(e,r){super(r),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ee)}},_e;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(_e||(_e={}));var Bp={};ar(Bp,{extractDidFragment:()=>Jn,getServices:()=>PG,getVerificationMethodByKey:()=>OG,getVerificationMethodTypes:()=>CE,getVerificationMethods:()=>kp,getVerificationRelationshipsById:()=>PE,isDidService:()=>k8,isDidVerificationMethod:()=>n0,isDwnDidService:()=>kG,keyBytesToMultibaseId:()=>i0,multibaseIdToKeyBytes:()=>s0});var CG=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};function Jn(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function PG({didDocument:t,id:e,type:r}){var n,s;return(s=(n=t?.service)===null||n===void 0?void 0:n.filter(i=>!(e&&i.id!==e||r&&i.type!==r)))!==null&&s!==void 0?s:[]}function OG({didDocument:t,publicKeyJwk:e,publicKeyMultibase:r}){return CG(this,void 0,void 0,function*(){let n=kp({didDocument:t});for(let s of n)if(e&&s.publicKeyJwk){if((yield nt({jwk:e}))===(yield nt({jwk:s.publicKeyJwk})))return s}else if(r&&s.publicKeyMultibase&&r===s.publicKeyMultibase)return s;return null})}function kp({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(n0))!==null&&r!==void 0?r:[]),Object.keys(kc).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(n0))!==null&&o!==void 0?o:[])}),n}function CE({didDocument:t}){let r=kp({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function PE({didDocument:t,methodId:e}){let r=[];return Object.keys(kc).forEach(n=>{if(Array.isArray(t[n])){let s=t[n],i=Jn(e);s.some(a=>{let u=Jn(a)===i,c=n0(a)&&Jn(a.id)===i;return u||c})&&r.push(n)}}),r}function k8(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function kG(t){if(!k8(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function n0(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function i0({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=Zt.addPrefix({code:e,data:t,name:r}),s=ne.uint8Array(n).toBase58Btc();return ne.base58Btc(s).toMultibase()}function s0({multibaseKeyId:t}){try{let e=ne.multibase(t).toBase58Btc(),r=ne.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=Zt.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new Ee(_e.InvalidDid,`Invalid multibase identifier: ${t}`)}}var Ip=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},_n=class{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return Ip(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){var r;return Ip(this,void 0,void 0,function*(){let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var c,l;return Jn(u.id)===((c=Jn(e?.methodId))!==null&&c!==void 0?c:Jn((l=this.document.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(n&&n.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:eu.getJoseSignatureAlgorithmFromPublicKey(i),keyId:n.id,sign({data:u}){return Ip(this,void 0,void 0,function*(){return yield o.sign({data:u,keyUri:s})})},verify({data:u,signature:c}){return Ip(this,void 0,void 0,function*(){return yield o.verify({data:u,key:i,signature:c})})}}})}static import({portableDid:e,keyManager:r=new kr}){var n;return Ip(this,void 0,void 0,function*(){let s=kp({didDocument:e.document});if(s.length===0)throw new Ee(_e.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let o of(n=e.privateKeys)!==null&&n!==void 0?n:[])yield r.importKey({key:o});for(let o of s){if(!o.publicKeyJwk)throw new Error(`Verification method '${o.id}' does not contain a public key in JWK format`);let a=yield r.getKeyUri({key:o.publicKeyJwk});yield r.getPublicKey({keyUri:a})}return new _n({uri:e.uri,document:e.document,metadata:e.metadata,keyManager:r})})}};var OE="0123456789abcdef",I8=[],B8=[];for(let t=0;t<256;t++)I8[t]=OE[t>>4&15]+OE[t&15],t<16&&(t<10?B8[48+t]=t:B8[97-10+t]=t);var kE=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=I8[t[n++]];return r};var T8=(t,e=0)=>{let r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}let n=new Uint8Array(e),s=e,i=r;for(;i--;)s-=t[i].length,n.set(t[i],s);return n};var F8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Tp=0;Tp<F8.length;Tp++)BG[F8.charCodeAt(Tp)]=Tp;var Tp;var IG=new TextDecoder,BE=(t,e)=>e?new TextDecoder(e).decode(t):IG.decode(t),TG=new TextEncoder,Fi=t=>TG.encode(t);var R8=typeof window<"u"?window:self,$8=R8.crypto||R8.msCrypto||{},Fbe=$8.subtle||$8.webkitSubtle;function ad(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function o0(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function It(t,e,r){let n=[],s=null;return It._encode(n,t),s=T8(n),It.bytes=s.length,ArrayBuffer.isView(e)?(e.set(s,r),e):s}It.bytes=-1;It._floatConversionDetected=!1;It._encode=function(t,e){if(e!=null)switch(o0(e)){case"object":It.dict(t,e);break;case"map":It.dictMap(t,e);break;case"array":It.list(t,e);break;case"set":It.listSet(t,e);break;case"string":It.string(t,e);break;case"number":It.number(t,e);break;case"boolean":It.number(t,e);break;case"arraybufferview":It.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":It.buffer(t,new Uint8Array(e));break}};var a0=new Uint8Array([101]),N8=new Uint8Array([100]),M8=new Uint8Array([108]);It.buffer=function(t,e){t.push(Fi(e.length+":"),e)};It.string=function(t,e){t.push(Fi(Fi(e).byteLength+":"+e))};It.number=function(t,e){if(Number.isInteger(e))return t.push(Fi("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,s=e%r<<0,i=n*r+s;t.push(Fi("i"+i+"e")),i!==e&&!It._floatConversionDetected&&(It._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};It.dict=function(t,e){t.push(N8);let r=0,n,s=Object.keys(e).sort(),i=s.length;for(;r<i;r++)n=s[r],e[n]!=null&&(It.string(t,n),It._encode(t,e[n]));t.push(a0)};It.dictMap=function(t,e){t.push(N8);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?It._encode(t,n):It.string(t,String(n)),It._encode(t,e.get(n)));t.push(a0)};It.list=function(t,e){let r=0,n=e.length;for(t.push(M8);r<n;r++)e[r]!=null&&It._encode(t,e[r]);t.push(a0)};It.listSet=function(t,e){t.push(M8);for(let r of e)r!=null&&It._encode(t,r);t.push(a0)};var j8=It;var FG=105,RG=58,$G=100,NG=108,IE=101;function q8(t,e,r){let n=0,s=1;for(let i=e;i<r;i++){let o=t[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===e&&o===43)){if(i===e&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function Re(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),Re.position=0,Re.encoding=n||null,Re.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):Fi(t),Re.bytes=Re.data.length,Re.next())}Re.bytes=0;Re.position=0;Re.data=null;Re.encoding=null;Re.next=function(){switch(Re.data[Re.position]){case $G:return Re.dictionary();case NG:return Re.list();case FG:return Re.integer();default:return Re.buffer()}};Re.find=function(t){let e=Re.position,r=Re.data.length,n=Re.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};Re.dictionary=function(){Re.position++;let t={};for(;Re.data[Re.position]!==IE;){let e=Re.buffer(),r=BE(e);r.includes("\uFFFD")&&(r=kE(e)),t[r]=Re.next()}return Re.position++,t};Re.list=function(){Re.position++;let t=[];for(;Re.data[Re.position]!==IE;)t.push(Re.next());return Re.position++,t};Re.integer=function(){let t=Re.find(IE),e=q8(Re.data,Re.position+1,t);return Re.position+=t+1-Re.position,e};Re.buffer=function(){let t=Re.find(RG),e=q8(Re.data,Re.position,t),r=++t+e;return Re.position=r,Re.encoding?BE(Re.data.slice(t,r)):Re.data.slice(t,r)};var L8=Re;function MG(t){let e=2;for(let r of t)e+=u0(r);return e}function jG(t){let e=2;for(let[r,n]of t){let s=Fi(r).byteLength;e+=ad(s)+1+s,e+=u0(n)}return e}function qG(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let s=Fi(r[n]).byteLength;e+=ad(s)+1+s,e+=u0(t[r[n]])}return e}function LG(t){let e=Fi(t).byteLength;return ad(e)+1+e}function UG(t){let e=t.byteLength-t.byteOffset;return ad(e)+1+e}function u0(t){if(t==null)return 0;let r=o0(t);switch(r){case"arraybufferview":return UG(t);case"string":return LG(t);case"array":case"set":return MG(t);case"number":return 1+ad(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return qG(t);case"map":return jG(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var TE=u0;var KG=TE,FE={encode:j8,decode:L8,byteLength:TE,encodingLength:KG};var VG=/^(\d{1,3}\.){3,3}\d{1,3}$/;var HG=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var fs={name:"v4",size:4,isFormat:t=>VG.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,s=0;for(let i=0;i<n;){let o=t.charCodeAt(i++);o===46?(e[r++]=s,s=0):s=s*10+(o-48)}return e[r]=s,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},na={name:"v6",size:16,isFormat:t=>t.length>0&&HG.test(t),encode(t,e,r){r=~~r;let n=r+16,s=-1,i=0,o=0,a=!0,u=!1;e=e||new Uint8Array(r+16);for(let c=0;c<t.length;c++){let l=t.charCodeAt(c);l===58?(a?s!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(s=r):(u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2),i=0,o=0),a=!0,u=!1):l===46?(r<n&&(e[r]=o),r++,o=0,i=0,a=!1,u=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:(l-=48,o=o*10+l),i=(i<<4)+l)}if(a===!1)u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2);else if(s===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let c=Math.min(r-1,n-1);c>=s+2;c--)e[c]=e[c-2];e[s]=0,e[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)e[--n]=r<n&&r>s?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function U8(t){if(fs.isFormat(t))return fs.size;if(na.isFormat(t))return na.size;throw Error(`Invalid ip address: ${t}`)}function K8(t){return U8(t)===fs.size?1:2}function V8(t,e,r){r=~~r;let n=U8(t);return typeof e=="function"&&(e=e(r+n)),n===fs.size?fs.encode(t,e,r):na.encode(t,e,r)}function H8(t,e,r){if(e=~~e,r=r||t.length-e,r===fs.size)return fs.decode(t,e,r);if(r===na.size)return na.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${fs.size} for v4 or ${na.size} for v6.`)}function Fp(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function ud(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function W8(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function z8(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function RE(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function $E(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function J8(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function NE(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}function ME(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s<=127)e+=1;else if(s<=2047)e+=2;else if((s&63488)!==55296)e+=3;else{let i=n+1;i===r||s>=56320||(t.charCodeAt(i)&64512)!==56320?e+=3:(n=i,e+=4)}}return e}function cd(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(ME(t)+r));let s=r;for(let i=0;i<n;i+=1){let o=t.charCodeAt(i);if(o<=127)e[s++]=o;else if(o<=2047)e[s++]=192|(o&1984)>>6,e[s++]=128|o&63;else if((o&63488)!==55296)e[s++]=224|(o&61440)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63;else{let a=i+1;if(a===n||o>=56320)e[s++]=239,e[s++]=191,e[s++]=189;else{let u=t.charCodeAt(a);(u&64512)!==56320?(e[s++]=239,e[s++]=191,e[s++]=189):(i=a,o=65536|(o&1023)<<10|u&1023,e[s++]=240|(o&1835008)>>18,e[s++]=128|(o&258048)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63)}}}return cd.bytes=s-r,e}cd.bytes=0;function ld(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let s=e;s<r;){let i=t[s++],o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|t[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(t[s++]&63)<<12|(t[s++]&63)<<6|t[s++]&63)-65536;let a=55296|o>>10&1023;n+=String.fromCharCode(a),o=56320|o&1023}else o=(i&15)<<12|(t[s++]&63)<<6|t[s++]&63;n+=String.fromCharCode(o)}return ld.bytes=r-e,n}ld.bytes=0;var ru=t=>t instanceof Uint8Array;function ia(t){return typeof t=="string"?ME(t):t.byteLength}function c0(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):cd(t)}function l0(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return cd(e,t,r),cd.bytes}var Rp={},G8=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let s=n.toString(16),i=s.toUpperCase(),o=t<<4|n,a=`${e}${s}`;G8[o]=a,Rp[a]=o,Rp[`${r}${s}`]=o,Rp[`${e}${i}`]=o,Rp[`${r}${i}`]=o}}function X8(t,e,r){let n="";for(let s=e;s<r;){let i=t[s++];n+=G8[i]}return n}function jE(t){return t.length>>>1}function Y8(t,e,r,n){let s=0;for(;r<n;){let i=e.substr(s,2),o=Rp[i];if(o===void 0)return;t[r++]=o,s+=2}return t}var QG=Math.pow(2,24),eX=Math.pow(2,16),tX=Math.pow(2,8),Qs=(t,e)=>t[e]*QG+t[e+1]*eX+t[e+2]*tX+t[e+3],et=(t,e)=>t[e]<<8|t[e+1],eo=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),Ie=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Gn(t,e,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=e.length||n>=s?0:rX(t,e,r,n,s)}function rX(t,e,r,n,s){s-n>e.length-r&&(s=n+e.length-r);let i=s-n,o=t.length-n;return i>o&&(i=o),(n!==0||s<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,i)),e.set(t,r),i}var iX=0,Z8=1<<15,LE=1<<15,sX=~LE,ek=1<<15,oX=~ek;function Ut({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var De=Ut({encode(t,e,r){e||(e=new Uint8Array(De.encodingLength(t))),r||(r=0);let n=r,s=t.replace(/^\.|\.$/gm,"");if(s.length){let i=s.split(".");for(let o=0;o<i.length;o++){let a=l0(e,i[o],r+1);e[r]=a,r+=a+1}}return e[r++]=0,De.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,s=0,i=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let u=et(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(ld(t,e,e+a)),e+=a,i+=o?0:a}}return De.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:ia(t.replace(/^\.|\.$/gm,""))+2}}),Lr=Ut({encode(t,e,r){e||(e=new Uint8Array(Lr.encodingLength(t))),r||(r=0);let n=l0(e,t,r+1);return e[r]=n,Lr.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=ld(t,e+1,e+1+r);return Lr.decode.bytes=r+1,n},encodingLength(t){return ia(t)+1}}),dd=Ut({bytes:12,encode(t,e,r){e||(e=new Uint8Array(dd.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,s=t.type==="response"?Z8:iX;return Ie(e,t.id||0,r),Ie(e,n|s,r+2),Ie(e,t.questions.length,r+4),Ie(e,t.answers.length,r+6),Ie(e,t.authorities.length,r+8),Ie(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=et(t,e+2);return{id:et(t,e),type:r&Z8?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:z8(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:W8(r&15),questions:new Array(et(t,e+4)),answers:new Array(et(t,e+6)),authorities:new Array(et(t,e+8)),additionals:new Array(et(t,e+10))}},encodingLength(){return 12}}),f0=Ut({encode(t,e,r){e||(e=new Uint8Array(f0.encodingLength(t))),r||(r=0);let n=t.length;return Ie(e,n,r),Gn(t,e,r+2,0,n),f0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=et(t,e),n=t.slice(e+2,e+2+r);return f0.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),p0=Ut({encode(t,e,r){return e||(e=new Uint8Array(p0.encodingLength(t))),r||(r=0),De.encode(t,e,r+2),Ie(e,De.encode.bytes,r),p0.encode.bytes=De.encode.bytes+2,e},decode(t,e){e||(e=0);let r=et(t,e),n=De.decode(t,e+2);return p0.decode.bytes=r+2,n},encodingLength(t){return De.encodingLength(t)+2}}),h0=Ut({encode(t,e,r){e||(e=new Uint8Array(h0.encodingLength(t))),r||(r=0);let n=r;return r+=2,De.encode(t.mname,e,r),r+=De.encode.bytes,De.encode(t.rname,e,r),r+=De.encode.bytes,eo(e,t.serial||0,r),r+=4,eo(e,t.refresh||0,r),r+=4,eo(e,t.retry||0,r),r+=4,eo(e,t.expire||0,r),r+=4,eo(e,t.minimum||0,r),r+=4,Ie(e,r-n-2,n),h0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=De.decode(t,e),e+=De.decode.bytes,n.rname=De.decode(t,e),e+=De.decode.bytes,n.serial=Qs(t,e),e+=4,n.refresh=Qs(t,e),e+=4,n.retry=Qs(t,e),e+=4,n.expire=Qs(t,e),e+=4,n.minimum=Qs(t,e),e+=4,h0.decode.bytes=e-r,n},encodingLength(t){return 22+De.encodingLength(t.mname)+De.encodingLength(t.rname)}}),m0=Ut({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(typeof t[s]=="string"&&(t[s]=c0(t[s])),!ru(t[s]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(m0.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(s){e[r++]=s.length,Gn(s,e,r,0,s.length),r+=s.length}),Ie(e,r-n-2,n),m0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=et(t,e);e+=2;let s=[];for(;n>0;){let i=t[e++];if(--n,n<i)throw new Error("Buffer overflow");s.push(t.slice(e,e+i)),e+=i,n-=i}return m0.decode.bytes=e-r,s},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=ia(r)+1:e+=r.length+1}),e}}),y0=Ut({encode(t,e,r){e||(e=new Uint8Array(y0.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=c0(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let s=t.length;return Gn(t,e,r,0,s),r+=s,Ie(e,r-n-2,n),y0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=et(t,e);e+=2;let s=t.slice(e,e+n);return e+=n,y0.decode.bytes=e-r,s},encodingLength(t){return t?(ru(t)?t.length:ia(t))+2:2}}),g0=Ut({encode(t,e,r){e||(e=new Uint8Array(g0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Lr.encode(t.cpu,e,r),r+=Lr.encode.bytes,Lr.encode(t.os,e,r),r+=Lr.encode.bytes,Ie(e,r-n-2,n),g0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=Lr.decode(t,e),e+=Lr.decode.bytes,n.os=Lr.decode(t,e),e+=Lr.decode.bytes,g0.decode.bytes=e-r,n},encodingLength(t){return Lr.encodingLength(t.cpu)+Lr.encodingLength(t.os)+2}}),hd=Ut({encode(t,e,r){return e||(e=new Uint8Array(hd.encodingLength(t))),r||(r=0),De.encode(t,e,r+2),Ie(e,De.encode.bytes,r),hd.encode.bytes=De.encode.bytes+2,e},decode(t,e){e||(e=0);let r=De.decode(t,e+2);return hd.decode.bytes=De.decode.bytes+2,r},encodingLength(t){return De.encodingLength(t)+2}}),v0=Ut({encode(t,e,r){e||(e=new Uint8Array(v0.encodingLength(t))),r||(r=0),Ie(e,t.priority||0,r+2),Ie(e,t.weight||0,r+4),Ie(e,t.port||0,r+6),De.encode(t.target,e,r+8);let n=De.encode.bytes+6;return Ie(e,n,r),v0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=et(t,e),n={};return n.priority=et(t,e+2),n.weight=et(t,e+4),n.port=et(t,e+6),n.target=De.decode(t,e+8),v0.decode.bytes=r+2,n},encodingLength(t){return 8+De.encodingLength(t.target)}}),nu=Ut({encode(t,e,r){let n=nu.encodingLength(t);return e||(e=new Uint8Array(nu.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=nu.ISSUER_CRITICAL),Ie(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,Lr.encode(t.tag,e,r),r+=Lr.encode.bytes,l0(e,t.value,r),r+=ia(t.value),nu.encode.bytes=n,e},decode(t,e){e||(e=0);let r=et(t,e);e+=2;let n=e,s={};return s.flags=t[e],e+=1,s.tag=Lr.decode(t,e),e+=Lr.decode.bytes,s.value=ld(t,e,n+r),s.issuerCritical=!!(s.flags&nu.ISSUER_CRITICAL),nu.decode.bytes=r+2,s},encodingLength(t){return Lr.encodingLength(t.tag)+Lr.encodingLength(t.value)+2}});nu.ISSUER_CRITICAL=1<<7;var b0=Ut({encode(t,e,r){e||(e=new Uint8Array(b0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Ie(e,t.preference||0,r),r+=2,De.encode(t.exchange,e,r),r+=De.encode.bytes,Ie(e,r-n-2,n),b0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=et(t,e),e+=2,n.exchange=De.decode(t,e),e+=De.decode.bytes,b0.decode.bytes=e-r,n},encodingLength(t){return 4+De.encodingLength(t.exchange)}}),tk=Ut({encode(t,e,r){return e||(e=new Uint8Array(tk.encodingLength(t))),r||(r=0),Ie(e,4,r),r+=2,fs.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,fs.decode(t,e)},bytes:6}),w0=Ut({encode(t,e,r){return e||(e=new Uint8Array(w0.encodingLength(t))),r||(r=0),Ie(e,16,r),r+=2,na.encode(t,e,r),w0.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=na.decode(t,e);return w0.decode.bytes=18,r},bytes:18}),Q8=t=>new Uint8Array(t),sa=Ut({encode(t,e,r){e||(e=new Uint8Array(sa.encodingLength(t))),r||(r=0);let n=r,s=NE(t.code);if(Ie(e,s,r),r+=2,t.data)Ie(e,t.data.length,r),r+=2,Gn(t.data,e,r),r+=t.data.length;else switch(s){case 8:{let i=t.sourcePrefixLength||0,o=t.family||K8(t.ip,Q8),a=V8(t.ip,Q8),u=Math.ceil(i/8);Ie(e,u+4,r),r+=2,Ie(e,o,r),r+=2,e[r++]=i,e[r++]=t.scopePrefixLength||0,Gn(a,e,r,0,u),r+=u}break;case 11:t.timeout?(Ie(e,2,r),r+=2,Ie(e,t.timeout,r),r+=2):(Ie(e,0,r),r+=2);break;case 12:{let i=t.length||0;Ie(e,i,r),r+=2,e.fill(0,r,r+i),r+=i}break;case 14:{let i=t.tags.length*2;Ie(e,i,r),r+=2;for(let o of t.tags)Ie(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return sa.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=et(t,e),r.type=J8(r.code),e+=2;let n=et(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=et(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let s=new Uint8Array(r.family===1?4:16);Gn(t,s,0,e,e+n-4),r.ip=H8(s)}break;case 11:n>0&&(r.timeout=et(t,e),e+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(et(t,e)),e+=2}return sa.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(NE(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),iu=Ut({encode(t,e,r){e||(e=new Uint8Array(iu.encodingLength(t))),r||(r=0);let n=r,s=pd(t,sa);return Ie(e,s,r),r=Lp(t,sa,e,r+2),iu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],s=et(t,e);e+=2;let i=0;for(;s>0;)n[i++]=sa.decode(t,e),e+=sa.decode.bytes,s-=sa.decode.bytes;return iu.decode.bytes=e-r,n},encodingLength(t){return 2+pd(t||[],sa)}}),to=Ut({encode(t,e,r){e||(e=new Uint8Array(to.encodingLength(t))),r||(r=0);let n=r,s=t.key;if(!ru(s))throw new Error("Key must be a Buffer");return r+=2,Ie(e,t.flags,r),r+=2,e[r]=to.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Gn(s,e,r,0,s.length),r+=s.length,to.encode.bytes=r-n,Ie(e,to.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);if(e+=2,n.flags=et(t,e),e+=2,t[e]!==to.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+s+2),e+=n.key.length,to.decode.bytes=e-r,n},encodingLength(t){return 6+ia(t.key)}});to.PROTOCOL_DNSSEC=3;to.ZONE_KEY=128;to.SECURE_ENTRYPOINT=32768;var $p=Ut({encode(t,e,r){e||(e=new Uint8Array($p.encodingLength(t))),r||(r=0);let n=r,s=t.signature;if(!ru(s))throw new Error("Signature must be a Buffer");return r+=2,Ie(e,ud(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,eo(e,t.originalTTL,r),r+=4,eo(e,t.expiration,r),r+=4,eo(e,t.inception,r),r+=4,Ie(e,t.keyTag,r),r+=2,De.encode(t.signersName,e,r),r+=De.encode.bytes,Gn(s,e,r,0,s.length),r+=s.length,$p.encode.bytes=r-n,Ie(e,$p.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);return e+=2,n.typeCovered=Fp(et(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=Qs(t,e),e+=4,n.expiration=Qs(t,e),e+=4,n.inception=Qs(t,e),e+=4,n.keyTag=et(t,e),e+=2,n.signersName=De.decode(t,e),e+=De.decode.bytes,n.signature=t.slice(e,r+s+2),e+=n.signature.length,$p.decode.bytes=e-r,n},encodingLength(t){return 20+De.encodingLength(t.signersName)+ia(t.signature)}}),Np=Ut({encode(t,e,r){e||(e=new Uint8Array(Np.encodingLength(t))),r||(r=0);let n=r;return r+=2,De.encode(t.mbox||".",e,r),r+=De.encode.bytes,De.encode(t.txt||".",e,r),r+=De.encode.bytes,Np.encode.bytes=r-n,Ie(e,Np.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=De.decode(t,e)||".",e+=De.decode.bytes,n.txt=De.decode(t,e)||".",e+=De.decode.bytes,Np.decode.bytes=e-r,n},encodingLength(t){return 2+De.encodingLength(t.mbox||".")+De.encodingLength(t.txt||".")}}),hi=Ut({encode(t,e,r){e||(e=new Uint8Array(hi.encodingLength(t))),r||(r=0);let n=r,s=[];for(let i=0;i<t.length;i++){let o=ud(t[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){let o=c0(s[i]);e[r]=i,r+=1,e[r]=o.length,r+=1,Gn(o,e,r,0,o.length),r+=o.length}return hi.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,s=[];for(;e-n<r;){let i=t[e];e+=1;let o=t[e];e+=1;for(let a=0;a<o;a++){let u=t[e+a];for(let c=0;c<8;c++)if(u&1<<7-c){let l=Fp(i<<8|a<<3|c);s.push(l)}}e+=o}return hi.decode.bytes=e-n,s},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let s=ud(t[n]);e[s>>8]=Math.max(e[s>>8]||0,s&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),Mp=Ut({encode(t,e,r){e||(e=new Uint8Array(Mp.encodingLength(t))),r||(r=0);let n=r;return r+=2,De.encode(t.nextDomain,e,r),r+=De.encode.bytes,hi.encode(t.rrtypes,e,r),r+=hi.encode.bytes,Mp.encode.bytes=r-n,Ie(e,Mp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);return e+=2,n.nextDomain=De.decode(t,e),e+=De.decode.bytes,n.rrtypes=hi.decode(t,e,s-(e-r)),e+=hi.decode.bytes,Mp.decode.bytes=e-r,n},encodingLength(t){return 2+De.encodingLength(t.nextDomain)+hi.encodingLength(t.rrtypes)}}),jp=Ut({encode(t,e,r){e||(e=new Uint8Array(jp.encodingLength(t))),r||(r=0);let n=r,s=t.salt;if(!ru(s))throw new Error("salt must be a Buffer");let i=t.nextDomain;if(!ru(i))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,Ie(e,t.iterations,r),r+=2,e[r]=s.length,r+=1,Gn(s,e,r,0,s.length),r+=s.length,e[r]=i.length,r+=1,Gn(i,e,r,0,i.length),r+=i.length,hi.encode(t.rrtypes,e,r),r+=hi.encode.bytes,jp.encode.bytes=r-n,Ie(e,jp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=et(t,e),e+=2;let i=t[e];e+=1,n.salt=t.slice(e,e+i),e+=i;let o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=hi.decode(t,e,s-(e-r)),e+=hi.decode.bytes,jp.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+hi.encodingLength(t.rrtypes)}}),qp=Ut({encode(t,e,r){e||(e=new Uint8Array(qp.encodingLength(t))),r||(r=0);let n=r,s=t.digest;if(!ru(s))throw new Error("Digest must be a Buffer");return r+=2,Ie(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Gn(s,e,r,0,s.length),r+=s.length,qp.encode.bytes=r-n,Ie(e,qp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);return e+=2,n.keyTag=et(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+s+2),e+=n.digest.length,qp.decode.bytes=e-r,n},encodingLength(t){return 6+ia(t.digest)}}),fd=Ut({encode(t,e,r){e||(e=new Uint8Array(fd.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let s=jE(t.fingerprint),i=UE(t.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${s} != ${i}`);return Y8(e,t.fingerprint,r,r+=s),fd.encode.bytes=r-n,Ie(e,fd.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let s=UE(n.hash);return n.fingerprint=X8(t,e,e+s),e+=s,fd.decode.bytes=e-r,n},encodingLength(t){return 4+jE(t.fingerprint)}});function UE(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}fd.getFingerprintLengthForHashType=UE;function qE(t){switch(t.toUpperCase()){case"A":return tk;case"PTR":return hd;case"CNAME":return hd;case"DNAME":return hd;case"TXT":return m0;case"NULL":return y0;case"AAAA":return w0;case"SRV":return v0;case"HINFO":return g0;case"CAA":return nu;case"NS":return p0;case"SOA":return h0;case"MX":return b0;case"OPT":return iu;case"DNSKEY":return to;case"RRSIG":return $p;case"RP":return Np;case"NSEC":return Mp;case"NSEC3":return jp;case"SSHFP":return fd;case"DS":return qp}return f0}var Ri=Ut({encode(t,e,r){e||(e=new Uint8Array(Ri.encodingLength(t))),r||(r=0);let n=r;if(De.encode(t.name,e,r),r+=De.encode.bytes,Ie(e,ud(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");Ie(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,Ie(e,t.flags||0,r+6),r+=8,iu.encode(t.options||[],e,r),r+=iu.encode.bytes}else{let s=$E(t.class===void 0?"IN":t.class);t.flush&&(s|=LE),Ie(e,s,r+2),eo(e,t.ttl||0,r+4),r+=8;let i=qE(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return Ri.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=De.decode(t,e),e+=De.decode.bytes,r.type=Fp(et(t,e)),r.type==="OPT")r.udpPayloadSize=et(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=et(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=iu.decode(t,e+8),e+=8+iu.decode.bytes;else{let s=et(t,e+2);r.ttl=Qs(t,e+4),r.class=RE(s&sX),r.flush=!!(s&LE);let i=qE(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return Ri.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return De.encodingLength(t.name)+8+qE(t.type).encodingLength(e)}}),md=Ut({encode(t,e,r){e||(e=new Uint8Array(md.encodingLength(t))),r||(r=0);let n=r;return De.encode(t.name,e,r),r+=De.encode.bytes,Ie(e,ud(t.type),r),r+=2,Ie(e,$E(t.class===void 0?"IN":t.class),r),r+=2,md.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=De.decode(t,e),e+=De.decode.bytes,n.type=Fp(et(t,e)),e+=2,n.class=RE(et(t,e)),e+=2,!!(n.class&ek)&&(n.class&=oX),md.decode.bytes=e-r,n},encodingLength(t){return De.encodingLength(t.name)+4}});var rk=1<<10,Ybe=1<<9,Zbe=1<<8,Qbe=1<<7,e1e=1<<5,t1e=1<<4,r1e=1<<15,ln={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(aX(t))),r||(r=0);let s=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),dd.encode(t,e,r),r+=dd.encode.bytes,r=Lp(t.questions,md,e,r),r=Lp(t.answers,Ri,e,r),r=Lp(t.authorities,Ri,e,r),r=Lp(t.additionals,Ri,e,r),ln.encode.bytes=r-s,n&&Up.bytes!==e.length?e.slice(0,Up.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=dd.decode(t,e);return e+=dd.decode.bytes,e=d0(n.questions,md,t,e),e=d0(n.answers,Ri,t,e),e=d0(n.authorities,Ri,t,e),e=d0(n.additionals,Ri,t,e),ln.decode.bytes=e-r,n},encodingLength:function(t){return dd.encodingLength(t)+pd(t.questions||[],md)+pd(t.answers||[],Ri)+pd(t.authorities||[],Ri)+pd(t.additionals||[],Ri)}};ln.encode.bytes=0;ln.decode.bytes=0;function E0(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var _0={encode:function(t,e,r){return e=ln.encode(E0(t,"query"),e,r),_0.encode.bytes=ln.encode.bytes,e},decode:function(t,e){let r=ln.decode(t,e);return _0.decode.bytes=ln.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return ln.encodingLength(E0(t,"query"))}};_0.encode.bytes=0;_0.decode.bytes=0;var D0={encode:function(t,e,r){return e=ln.encode(E0(t,"response"),e,r),D0.encode.bytes=ln.encode.bytes,e},decode:function(t,e){let r=ln.decode(t,e);return D0.decode.bytes=ln.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return ln.encodingLength(E0(t,"response"))}};D0.encode.bytes=0;D0.decode.bytes=0;var Up=ln.encode,S0=ln.decode,aX=ln.encodingLength;function nk(t){let e=Up(t),r=new Uint8Array(2+e.byteLength);return Ie(r,e.byteLength),Gn(e,r,2,0,e.length),nk.bytes=r.byteLength,r}nk.bytes=0;function ik(t){let e=et(t,0);if(t.byteLength<e+2)return null;let r=S0(t.slice(2));return ik.bytes=S0.bytes,r}ik.bytes=0;function pd(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function Lp(t,e,r,n){for(let s=0;s<t.length;s++)e.encode(t[s],r,n),n+=e.encode.bytes;return n}function d0(t,e,r,n){for(let s=0;s<t.length;s++)t[s]=e.decode(r,n),n+=e.decode.bytes;return n}var sk=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},$i=class{static getSigningMethod(e){return sk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return sk(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var Fn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ok=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},ak="https://diddht.tbddev.org",uX=0,yd=7200,A0=";",Tn=",",KE;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(KE||(KE={}));var ro;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1"})(ro||(ro={}));var VE;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(VE||(VE={}));var uk={Ed25519:ro.Ed25519,ES256K:ro.secp256k1,ES256:ro.secp256r1,"P-256":ro.secp256r1,secp256k1:ro.secp256k1,secp256r1:ro.secp256r1},Ni=class extends $i{static create({keyManager:e=new kr,options:r={}}={}){var n,s,i,o,a,u,c,l,d,h,f;return Fn(this,void 0,void 0,function*(){if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(B=>!(B.algorithm in uk)))throw new Error("One or more verification method algorithms are not supported");let p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(B=>"id"in B).map(B=>B.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(B=>!B.id||!B.type||!B.serviceEndpoint))throw new Error("One or more services are missing required properties");let g=yield e.generateKey({algorithm:"Ed25519"}),w=yield e.getPublicKey({keyUri:g}),P=yield Yr.identityKeyToIdentifier({identityKey:w}),C=Object.assign(Object.assign({id:P},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),v=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];v?.some(B=>{var T;return((T=B.id)===null||T===void 0?void 0:T.split("#").pop())==="0"})||v.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let B of v){let T=B.id&&B.id.split("#").pop()==="0"?g:yield e.generateKey({algorithm:B.algorithm}),M=yield e.getPublicKey({keyUri:T}),y=(u=(a=B.id)!==null&&a!==void 0?a:M.kid)!==null&&u!==void 0?u:yield nt({jwk:M});y=`${P}#${Jn(y)}`,(c=C.verificationMethod)!==null&&c!==void 0||(C.verificationMethod=[]),C.verificationMethod.push({id:y,type:"JsonWebKey",controller:(l=B.controller)!==null&&l!==void 0?l:P,publicKeyJwk:M});for(let b of(d=B.purposes)!==null&&d!==void 0?d:[])C[b]||(C[b]=[]),C[b].push(y)}(h=r.services)===null||h===void 0||h.forEach(B=>{var T;(T=C.service)!==null&&T!==void 0||(C.service=[]),B.id=`${P}#${B.id.split("#").pop()}`,C.service.push(B)});let k=new _n({uri:P,document:C,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){let B=yield Ni.publish({did:k,gatewayUri:r.gatewayUri});k.metadata=B.didDocumentMetadata}return k})}static import({portableDid:e,keyManager:r=new kr}){var n;return Fn(this,void 0,void 0,function*(){let s=Qe.parse(e.uri);if(s?.method!==Ni.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");let i=yield _n.import({portableDid:e,keyManager:r});if(!(!((n=i.document.verificationMethod)===null||n===void 0)&&n.some(o=>{var a;return((a=o.id)===null||a===void 0?void 0:a.split("#").pop())==="0"})))throw new Ee(_e.InvalidDidDocument,"DID document must contain an Identity Key");return i})}static getSigningMethod({didDocument:e,methodId:r="#0"}){var n;return Fn(this,void 0,void 0,function*(){let s=Qe.parse(e.id);if(s&&s.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${s.method}`);let i=(n=e.verificationMethod)===null||n===void 0?void 0:n.find(o=>{var a,u;return Jn(o.id)===((a=Jn(r))!==null&&a!==void 0?a:Jn((u=e.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(i&&i.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static publish({did:e,gatewayUri:r=ak}){return Fn(this,void 0,void 0,function*(){return yield oa.put({did:e,gatewayUri:r})})}static resolve(e,r={}){var n;return Fn(this,void 0,void 0,function*(){let s=(n=r?.gatewayUri)!==null&&n!==void 0?n:ak;try{yield Yr.identifierToIdentityKey({didUri:e});let{didDocument:i,didDocumentMetadata:o}=yield oa.get({didUri:e,gatewayUri:s});return Object.assign(Object.assign({},lr),{didDocument:i,didDocumentMetadata:o})}catch(i){if(!(i instanceof Ee))throw new Error(i);return Object.assign(Object.assign({},lr),{didResolutionMetadata:Object.assign({error:i.code},i.message&&{errorMessage:i.message})})}})}};Ni.methodName="dht";var oa=class{static get({didUri:e,gatewayUri:r}){return Fn(this,void 0,void 0,function*(){let n=Yr.identifierToIdentityKeyBytes({didUri:e}),s=yield oa.pkarrGet({gatewayUri:r,publicKeyBytes:n}),i=yield Yr.parseBep44GetMessage({bep44Message:s}),o=yield oa.fromDnsPacket({didUri:e,dnsPacket:i});return o.didDocumentMetadata.versionId=s.seq.toString(),o})}static put({did:e,gatewayUri:r}){return Fn(this,void 0,void 0,function*(){let n=yield oa.toDnsPacket({didDocument:e.document,didMetadata:e.metadata}),s=yield Yr.createBep44PutMessage({dnsPacket:n,publicKeyBytes:Yr.identifierToIdentityKeyBytes({didUri:e.uri}),signer:yield e.getSigner({methodId:"0"})}),i=yield oa.pkarrPut({gatewayUri:r,bep44Message:s});return{didDocument:e.document,didDocumentMetadata:Object.assign(Object.assign({},e.metadata),{published:i,versionId:s.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet({gatewayUri:e,publicKeyBytes:r}){return Fn(this,void 0,void 0,function*(){let n=ne.uint8Array(r).toBase32Z(),s=new URL(n,e).href,i;try{if(i=yield fetch(s,{method:"GET"}),!i.ok)throw new Ee(_e.NotFound,`Pkarr record not found for: ${n}`)}catch(u){throw u instanceof Ee?u:new Ee(_e.InternalError,`Failed to fetch Pkarr record: ${u.message}`)}let o=yield i.arrayBuffer();if(!o)throw new Ee(_e.NotFound,`Pkarr record not found for: ${n}`);if(o.byteLength<72)throw new Ee(_e.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${o.byteLength}`);if(o.byteLength>1072)throw new Ee(_e.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${o.byteLength}`);return{k:r,seq:Number(new DataView(o).getBigUint64(64)),sig:new Uint8Array(o,0,64),v:new Uint8Array(o,72)}})}static pkarrPut({gatewayUri:e,bep44Message:r}){return Fn(this,void 0,void 0,function*(){let n=ne.uint8Array(r.k).toBase32Z(),s=new URL(n,e).href,i=new Uint8Array(r.v.length+72);i.set(r.sig,0),new DataView(i.buffer).setBigUint64(r.sig.length,BigInt(r.seq)),i.set(r.v,r.sig.length+8);let o;try{o=yield fetch(s,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:i})}catch(a){throw new Ee(_e.InternalError,`Failed to put Pkarr record: ${a.message}`)}return o.ok})}static fromDnsPacket({didUri:e,dnsPacket:r}){var n,s,i;return Fn(this,void 0,void 0,function*(){let o={id:e},a={published:!0},u=new Map;for(let c of(n=r?.answers)!==null&&n!==void 0?n:[]){if(c.type!=="TXT")continue;let l=c.name.split(".")[0].substring(1);switch(!0){case l.startsWith("aka"):{let d=Yr.parseTxtDataToString(c.data);o.alsoKnownAs=d.split(Tn);break}case l.startsWith("cnt"):{let d=Yr.parseTxtDataToString(c.data);o.controller=d.includes(Tn)?d.split(Tn):d;break}case l.startsWith("k"):{let{id:d,t:h,k:f,c:p}=Yr.parseTxtDataToObject(c.data),g=ne.base64Url(f).toUint8Array(),w=ro[Number(h)],P=yield Yr.keyConverter(w).bytesToPublicKey({publicKeyBytes:g});(s=o.verificationMethod)!==null&&s!==void 0||(o.verificationMethod=[]);let C=`${e}#${d}`;o.verificationMethod.push({id:C,type:"JsonWebKey",controller:p??e,publicKeyJwk:P}),u.set(l,C);break}case l.startsWith("s"):{let d=Yr.parseTxtDataToObject(c.data),{id:h,t:f,se:p}=d,g=ok(d,["id","t","se"]),w=p.includes(Tn)?p.split(Tn):p,P=Object.fromEntries(Object.entries(g).map(([C,v])=>[C,v.includes(Tn)?v.split(Tn):v]));(i=o.service)!==null&&i!==void 0||(o.service=[]),o.service.push(Object.assign(Object.assign({},P),{id:`${e}#${h}`,type:f,serviceEndpoint:w}));break}case l.startsWith("typ"):{let{id:d}=Yr.parseTxtDataToObject(c.data);a.types=d.split(Tn).map(h=>Number(h));break}case l.startsWith("did"):{let d=P=>P.split(Tn).map(C=>u.get(C)).filter(C=>typeof C=="string"),{auth:h,asm:f,del:p,inv:g,agm:w}=Yr.parseTxtDataToObject(c.data);h&&(o.authentication=d(h)),f&&(o.assertionMethod=d(f)),p&&(o.capabilityDelegation=d(p)),g&&(o.capabilityInvocation=d(g)),w&&(o.keyAgreement=d(w));break}}}return{didDocument:o,didDocumentMetadata:a,didResolutionMetadata:{}}})}static toDnsPacket({didDocument:e,didMetadata:r}){var n,s,i,o,a;return Fn(this,void 0,void 0,function*(){let u=[],c=new Map,l=[],d=[];if(e.alsoKnownAs&&u.push({type:"TXT",name:"_aka.did.",ttl:yd,data:e.alsoKnownAs.join(Tn)}),e.controller){let g=Array.isArray(e.controller)?e.controller.join(Tn):e.controller;u.push({type:"TXT",name:"_cnt.did.",ttl:yd,data:g})}for(let[g,w]of(s=(n=e.verificationMethod)===null||n===void 0?void 0:n.entries())!==null&&s!==void 0?s:[]){let P=`k${g}`;d.push(P);let C=w.id.split("#").pop();c.set(C,P);let v=w.publicKeyJwk;if(!(v?.crv&&v.crv in uk))throw new Ee(_e.InvalidPublicKeyType,`Verification method '${w.id}' contains an unsupported key type: ${(i=v?.crv)!==null&&i!==void 0?i:"undefined"}`);let k=ro[v.crv],B=yield Yr.keyConverter(v.crv).publicKeyToBytes({publicKey:v}),T=ne.uint8Array(B).toBase64Url(),M=[`id=${C}`,`t=${k}`,`k=${T}`];w.controller!==e.id&&M.push(`c=${w.controller}`),u.push({type:"TXT",name:`_${P}._did.`,ttl:yd,data:M.join(A0)})}(o=e.service)===null||o===void 0||o.forEach((g,w)=>{let P=`s${w}`;l.push(P);let{id:C,type:v,serviceEndpoint:k}=g,B=ok(g,["id","type","serviceEndpoint"]);C=Jn(C),k=Array.isArray(k)?k.join(","):k;let T=Object.entries(Object.assign({id:C,t:v,se:k},B)).map(([M,y])=>`${M}=${y}`);u.push({type:"TXT",name:`_${P}._did.`,ttl:yd,data:T.join(A0)})});let h=[`v=${uX}`];if(d.length&&h.push(`vm=${d.join(Tn)}`),Object.keys(kc).forEach(g=>{var w;let P=(w=e[g])===null||w===void 0?void 0:w.map(C=>c.get(C.split("#").pop()));if(P){let C=VE[g];h.push(`${C}=${P.join(Tn)}`)}}),l.length&&h.push(`svc=${l.join(Tn)}`),!((a=r.types)===null||a===void 0)&&a.length){let w=r.types.map(P=>typeof P=="string"?KE[P]:P);u.push({type:"TXT",name:"_typ._did.",ttl:yd,data:`id=${w.join(Tn)}`})}u.push({type:"TXT",name:"_did.",ttl:yd,data:h.join(A0)});let[,,f]=e.id.split(":");return u.forEach(g=>g.name+=f),{id:0,type:"response",flags:rk,answers:u}})}},Yr=class{static createBep44PutMessage({dnsPacket:e,publicKeyBytes:r,signer:n}){return Fn(this,void 0,void 0,function*(){let s=Math.ceil(Date.now()/1e3),i=Up(e),o=FE.encode({seq:s,v:i}).subarray(1,-1);if(o.length>1e3)throw new Ee(_e.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${o.length} bytes`);let a=yield n.sign({data:o});return{k:r,seq:s,sig:a,v:i}})}static identifierToIdentityKey({didUri:e}){return Fn(this,void 0,void 0,function*(){let r=Yr.identifierToIdentityKeyBytes({didUri:e});return yield Wt.bytesToPublicKey({publicKeyBytes:r})})}static identifierToIdentityKeyBytes({didUri:e}){let r=Qe.parse(e);if(!r)throw new Ee(_e.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Ni.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=ne.base32Z(r.id).toUint8Array()}catch{throw new Ee(_e.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new Ee(_e.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier({identityKey:e}){return Fn(this,void 0,void 0,function*(){let r=yield Wt.publicKeyToBytes({publicKey:e}),n=ne.uint8Array(r).toBase32Z();return`did:${Ni.methodName}:${n}`})}static keyConverter(e){let n={Ed25519:Wt,"P-256":cr,secp256k1:er}[e];if(!n)throw new Ee(_e.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage({bep44Message:e}){return Fn(this,void 0,void 0,function*(){let r=yield Wt.bytesToPublicKey({publicKeyBytes:e.k}),n=FE.encode({seq:e.seq,v:e.v}).subarray(1,-1);if(!(yield Wt.verify({key:r,signature:e.sig,data:n})))throw new Ee(_e.InvalidSignature,"Invalid signature for DHT BEP44 message");return S0(e.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(A0).reduce((r,n)=>{let[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return ne.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new Ee(_e.InternalError,"Pkarr returned DNS TXT record with invalid data type")}};var tr={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};var Kt=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var w1e=new Uint8Array(0);var HE=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},WE=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ck(this,e)}},zE=class{constructor(e){this.decoders=e}or(e){return ck(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},ck=(t,e)=>new zE({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),JE=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new HE(e,r,n),this.decoder=new WE(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},lX=({name:t,prefix:e,encode:r,decode:n})=>new JE(t,e,r,n);var dX=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},fX=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Kp=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>lX({prefix:e,name:t,encode(s){return fX(s,n,r)},decode(s){return dX(s,n,r,t)}});var C1e=Kp({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),P1e=Kp({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Vp=Kp({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),O1e=Kp({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Zr=class{static encode(e){return Vp.baseEncode(e)}static decodeAsBytes(e,r){if(!Zr.isBase64UrlString(e))throw new Kt(tr.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return Vp.baseDecode(e)}static decodeAsString(e,r){let n=Zr.decodeAsBytes(e,r);return Zr.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var qB=ui(GE(),1);var XE;(function(t){t.Public="public",t.Private="private"})(XE||(XE={}));var mi=XE;var Ur=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===mi.Private&&n.add("d");for(let s in e)if(!n.has(s))throw new Kt(tr.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(e.crv!=="secp256k1")throw new Kt(tr.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Kt(tr.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Kt(tr.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Kt(tr.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===mi.Private&&(e.d===void 0||e.d.length!==43))throw new Kt(tr.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Kt(tr.IdTooLong,`Key ID length ${e.length} exceed max allowed length of ${50}.`);if(!Zr.isBase64UrlString(e))throw new Kt(tr.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new Kt(tr.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};var Br=class{};Br.hashAlgorithmInMultihashCode=18;Br.maxCanonicalizedDeltaSizeInBytes=1e3;var fk=ui(YE(),1);var Xn=class{static canonicalizeAsBytes(e){let r=Xn.removeAllUndefinedProperties(e),n=fk.default(r);return Zr.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?Xn.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};var N0=ui(RB(),1);var vZ=MB,$B=128,bZ=127,wZ=~bZ,EZ=Math.pow(2,31);function MB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=EZ;)e[r++]=t&255|$B,t/=128;for(;t&wZ;)e[r++]=t&255|$B,t>>>=7;return e[r]=t|0,MB.bytes=r-n+1,e}var _Z=C_,DZ=128,NB=127;function C_(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw C_.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&NB)<<s:(o&NB)*Math.pow(2,s),s+=7}while(o>=DZ);return C_.bytes=i-n,r}var SZ=Math.pow(2,7),AZ=Math.pow(2,14),xZ=Math.pow(2,21),CZ=Math.pow(2,28),PZ=Math.pow(2,35),OZ=Math.pow(2,42),kZ=Math.pow(2,49),BZ=Math.pow(2,56),IZ=Math.pow(2,63),TZ=function(t){return t<SZ?1:t<AZ?2:t<xZ?3:t<CZ?4:t<PZ?5:t<OZ?6:t<kZ?7:t<BZ?8:t<IZ?9:10},FZ={encode:vZ,decode:_Z,encodingLength:TZ},RZ=FZ,P_=RZ;var O_=(t,e,r=0)=>(P_.encode(t,e,r),e),k_=t=>P_.encodingLength(t);var I_=(t,e)=>{let r=e.byteLength,n=k_(t),s=n+k_(r),i=new Uint8Array(s+r);return O_(t,i,0),O_(r,i,n),i.set(e,s),new B_(t,r,e,i)};var B_=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var F_=({name:t,code:e,encode:r})=>new T_(t,e,r),T_=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?I_(this.code,r):r.then(n=>I_(this.code,n))}else throw Error("Unknown type, must be binary type")}};var jB=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),R_=F_({name:"sha2-256",code:18,encode:jB("SHA-256")}),Qwe=F_({name:"sha2-512",code:19,encode:jB("SHA-512")});var Zp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},dr=class{static hash(e,r){return Zp(this,void 0,void 0,function*(){let n=yield this.hashAsNonMultihashBytes(e,r);return N0.encode(n,r)})}static hashAsNonMultihashBytes(e,r){return Zp(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield R_.encode(e);break;default:throw new Kt(tr.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return Zp(this,void 0,void 0,function*(){let n=Xn.canonicalizeAsBytes(e);return yield dr.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return Zp(this,void 0,void 0,function*(){let n=Xn.canonicalizeAsBytes(e),s=yield dr.hashAsNonMultihashBytes(n,r);return yield dr.hashThenEncode(s,r)})}static hashThenEncode(e,r){return Zp(this,void 0,void 0,function*(){let n=yield dr.hash(e,r);return Zr.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,s=Zr.decodeAsBytes(e,r);try{n=N0.decode(s)}catch{throw new Kt(tr.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let i=Br.hashAlgorithmInMultihashCode;if(i!==n.code)throw new Kt(tr.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}};var $_;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})($_||($_={}));var Qp=$_;var N_;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(N_||(N_={}));var Tc=N_;var M0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Ir=class{static createCreateRequest(e){return M0(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,s=e.document.publicKeys,i=e.document.services;Ur.validateEs256kOperationKey(r,mi.Public),Ur.validateEs256kOperationKey(n,mi.Public),Ir.validateDidDocumentKeys(s),Ir.validateServices(i);let o=Br.hashAlgorithmInMultihashCode,a=[{action:Tc.Replace,document:e.document}],u={updateCommitment:yield dr.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};Ir.validateDeltaSize(u);let l={deltaHash:yield dr.canonicalizeThenHashThenEncode(u,o),recoveryCommitment:yield dr.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:Qp.Create,suffixData:l,delta:u}})}static createDeactivateRequest(e){return M0(this,void 0,void 0,function*(){Ir.validateDidSuffix(e.didSuffix),Ur.validateEs256kOperationKey(e.recoveryPublicKey,mi.Public);let r=Br.hashAlgorithmInMultihashCode,n=yield dr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},i=yield e.signer.sign({alg:"ES256K"},s);return{type:Qp.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(e){return M0(this,void 0,void 0,function*(){Ir.validateDidSuffix(e.didSuffix),Ur.validateEs256kOperationKey(e.recoveryPublicKey,mi.Public),Ur.validateEs256kOperationKey(e.nextRecoveryPublicKey,mi.Public),Ur.validateEs256kOperationKey(e.nextUpdatePublicKey,mi.Public),Ir.validateDidDocumentKeys(e.document.publicKeys),Ir.validateServices(e.document.services);let r=Br.hashAlgorithmInMultihashCode,n=yield dr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s=[{action:Tc.Replace,document:e.document}],i=yield dr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield dr.canonicalizeThenHashThenEncode(o,r),c={recoveryCommitment:yield dr.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},l=yield e.signer.sign({alg:"ES256K"},c);return{type:Qp.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:l}})}static createUpdateRequest(e){return M0(this,void 0,void 0,function*(){if(Ir.validateDidSuffix(e.didSuffix),Ur.validateEs256kOperationKey(e.updatePublicKey,mi.Public),Ur.validateEs256kOperationKey(e.nextUpdatePublicKey,mi.Public),Ir.validateServices(e.servicesToAdd),Ir.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let p of e.idsOfServicesToRemove)Ur.validateId(p);if(e.idsOfPublicKeysToRemove!==void 0)for(let p of e.idsOfPublicKeysToRemove)Ur.validateId(p);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let p={action:Tc.AddServices,services:n};r.push(p)}let s=e.idsOfServicesToRemove;if(s!==void 0&&s.length>0){let p={action:Tc.RemoveServices,ids:s};r.push(p)}let i=e.publicKeysToAdd;if(i!==void 0&&i.length>0){let p={action:Tc.AddPublicKeys,publicKeys:i};r.push(p)}let o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){let p={action:Tc.RemovePublicKeys,ids:o};r.push(p)}let a=Br.hashAlgorithmInMultihashCode,u=yield dr.canonicalizeThenHashThenEncode(e.updatePublicKey,a),c=yield dr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),l={patches:r,updateCommitment:c},d=yield dr.canonicalizeThenHashThenEncode(l,a),h={updateKey:e.updatePublicKey,deltaHash:d},f=yield e.signer.sign({alg:"ES256K"},h);return{type:Qp.Update,didSuffix:e.didSuffix,revealValue:u,delta:l,signedData:f}})}static validateDidSuffix(e){dr.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new Kt(tr.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(Ur.validateId(n.id),r.has(n.id))throw new Kt(tr.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),Ur.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(Ir.validateService(n),r.has(n.id))throw new Kt(tr.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){Ur.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Kt(tr.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new Kt(tr.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&qB.parse(e.serviceEndpoint).error!==void 0)throw new Kt(tr.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=Xn.canonicalizeAsBytes(e);if(r.length>Br.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${Br.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Kt(tr.DeltaExceedsMaximumSize,n)}}};var LB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},au=class{static createLongFormDid(e){return LB(this,void 0,void 0,function*(){let r=yield Ir.createCreateRequest(e),n=yield au.computeDidUniqueSuffix(r.suffixData),s;Br.network===void 0||Br.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${Br.network}:${n}`;let i={suffixData:r.suffixData,delta:r.delta},o=Xn.canonicalizeAsBytes(i),a=Zr.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(e){return LB(this,void 0,void 0,function*(){let r=Xn.canonicalizeAsBytes(e),n=yield dr.hash(r,Br.hashAlgorithmInMultihashCode);return Zr.encode(n)})}};var UB;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(UB||(UB={}));var KB;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(KB||(KB={}));var uu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},io;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(io||(io={}));var MZ={Ed25519:io.Ed25519,ES256K:io.secp256k1,ES256:io.secp256r1,"P-256":io.secp256r1,secp256k1:io.secp256k1,secp256r1:io.secp256r1},VB="https://ion.tbd.engineering",so=class extends $i{static create({keyManager:e=new kr,options:r={}}={}){var n,s,i,o,a,u,c;return uu(this,void 0,void 0,function*(){if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(B=>!(B.algorithm in MZ)))throw new Error("One or more verification method algorithms are not supported");let l=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(B=>"id"in B).map(B=>B.id);if(l&&l.length!==new Set(l).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(B=>!B.id||!B.type||!B.serviceEndpoint))throw new Error("One or more services are missing required properties");let d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(let B of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){let T=yield e.generateKey({algorithm:B.algorithm}),M=yield e.getPublicKey({keyUri:T});h.push({id:B.id,publicKeyJwk:M,purposes:(a=B.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let f=yield e.generateKey({algorithm:io.secp256k1}),p=yield e.getPublicKey({keyUri:f}),g=yield e.generateKey({algorithm:io.secp256k1}),w=yield e.getPublicKey({keyUri:g}),P=yield Yn.computeLongFormDidUri({recoveryKey:p,updateKey:w,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:h}),{didDocument:C,didResolutionMetadata:v}=yield so.resolve(P,{gatewayUri:r.gatewayUri});if(C===null)throw new Error(`Unable to resolve DID during creation: ${v?.error}`);let k=new _n({uri:P,document:C,metadata:{published:!1,canonicalId:P.split(":",3).join(":"),recoveryKey:p,updateKey:w},keyManager:e});if(!((c=r.publish)!==null&&c!==void 0)||c){let B=yield so.publish({did:k,gatewayUri:r.gatewayUri});k.metadata=B.didDocumentMetadata}return k})}static getSigningMethod({didDocument:e,methodId:r}){var n;return uu(this,void 0,void 0,function*(){let s=Qe.parse(e.id);if(s&&s.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${s.method}`);let i=(n=e.verificationMethod)===null||n===void 0?void 0:n.find(o=>{var a;return o.id===(r??((a=e.assertionMethod)===null||a===void 0?void 0:a[0]))});if(!(i&&i.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import({portableDid:e,keyManager:r=new kr}){return uu(this,void 0,void 0,function*(){let n=Qe.parse(e.uri);if(n?.method!==so.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");return yield _n.import({portableDid:e,keyManager:r})})}static publish({did:e,gatewayUri:r=VB}){var n,s,i;return uu(this,void 0,void 0,function*(){let o=(s=(n=e.document.verificationMethod)===null||n===void 0?void 0:n.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:PE({didDocument:e.document,methodId:c.id})})))!==null&&s!==void 0?s:[],a=yield Yn.createIonDocument({services:(i=e.document.service)!==null&&i!==void 0?i:[],verificationMethods:o}),u=yield Yn.constructCreateRequest({ionDocument:a,recoveryKey:e.metadata.recoveryKey,updateKey:e.metadata.updateKey});try{let c=Yn.appendPathToUrl({baseUrl:r,path:"/operations"}),l=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});return{didDocument:e.document,didDocumentMetadata:Object.assign(Object.assign({},e.metadata),{published:l.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:_e.InternalError,errorMessage:`Failed to publish DID document for: ${e.uri}`}}}})}static resolve(e,r={}){var n,s;return uu(this,void 0,void 0,function*(){let i=Qe.parse(e);if(!i)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"invalidDid"}});if(i.method!==so.methodName)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"methodNotSupported"}});let o=(n=r?.gatewayUri)!==null&&n!==void 0?n:VB;try{let a=Yn.appendPathToUrl({baseUrl:o,path:`/identifiers/${e}`}),u=yield fetch(a);if(!u.ok)throw new Ee(_e.NotFound,`Unable to find DID document for: ${e}`);let{didDocument:c,didDocumentMetadata:l}=yield u.json();return Object.assign(Object.assign(Object.assign({},lr),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(s=l?.method)===null||s===void 0?void 0:s.published},l)})}catch(a){if(!(a instanceof Ee))throw new Error(a);return Object.assign(Object.assign({},lr),{didResolutionMetadata:Object.assign({error:a.code},a.message&&{errorMessage:a.message})})}})}};so.methodName="ion";var Yn=class{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri({recoveryKey:e,updateKey:r,services:n,verificationMethods:s}){return uu(this,void 0,void 0,function*(){let i=yield Yn.createIonDocument({services:n,verificationMethods:s}),o=Yn.normalizeJwk(e),a=Yn.normalizeJwk(r);return yield au.createLongFormDid({document:i,recoveryKey:o,updateKey:a})})}static constructCreateRequest({ionDocument:e,recoveryKey:r,updateKey:n}){return uu(this,void 0,void 0,function*(){return yield Ir.createCreateRequest({document:e,recoveryKey:Yn.normalizeJwk(r),updateKey:Yn.normalizeJwk(n)})})}static createIonDocument({services:e,verificationMethods:r}){var n,s;return uu(this,void 0,void 0,function*(){let i=[];for(let u of r){let c=(s=(n=u.id)!==null&&n!==void 0?n:u.publicKeyJwk.kid)!==null&&s!==void 0?s:yield nt({jwk:u.publicKeyJwk});c=`${c.split("#").pop()}`;let l={id:c,publicKeyJwk:Yn.normalizeJwk(u.publicKeyJwk),purposes:u.purposes,type:"JsonWebKey2020"};i.push(l)}let o=e.map(u=>Object.assign(Object.assign({},u),{id:`${u.id.split("#").pop()}`}));return{publicKeys:i,services:o}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var j0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Mi=class extends $i{static create({keyManager:e=new kr,options:r={}}={}){var n,s,i,o;return j0(this,void 0,void 0,function*(){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=ne.object(c).toBase64Url(),d=`did:${Mi.methodName}:${l}`,f=(yield Mi.resolve(d)).didDocument;return new _n({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod({didDocument:e}){var r;return j0(this,void 0,void 0,function*(){let n=Qe.parse(e.id);if(n&&n.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${n.method}`);let[s]=(r=e.verificationMethod)!==null&&r!==void 0?r:[];if(!(s&&s.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import({portableDid:e,keyManager:r=new kr}){return j0(this,void 0,void 0,function*(){let n=Qe.parse(e.uri);if(n?.method!==Mi.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");let s=yield _n.import({portableDid:e,keyManager:r});if(s.document.verificationMethod.length!==1)throw new Ee(_e.InvalidDidDocument,"DID document must contain exactly one verification method");return s})}static resolve(e,r){return j0(this,void 0,void 0,function*(){let n=Qe.parse(e),s;try{s=ne.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==Mi.methodName)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"methodNotSupported"}});let i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},lr),{didDocument:i})})}};Mi.methodName="jwk";var hs=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ca;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(ca||(ca={}));var M_={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},jZ={Ed25519:ca.Ed25519,ES256K:ca.secp256k1,ES256:ca.secp256r1,"P-256":ca.secp256r1,secp256k1:ca.secp256k1,secp256r1:ca.secp256r1,X25519:ca.X25519},Zn=class extends $i{static create({keyManager:e=new kr,options:r={}}={}){var n,s,i,o;return hs(this,void 0,void 0,function*(){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=yield Tr.publicKeyToMultibaseId({publicKey:c}),d=`did:${Zn.methodName}:${l}`,f=(yield Zn.resolve(d,r)).didDocument;return new _n({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod({didDocument:e}){var r;return hs(this,void 0,void 0,function*(){let n=Qe.parse(e.id);if(n&&n.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${n.method}`);let[s]=e.assertionMethod||[],i=(r=e.verificationMethod)===null||r===void 0?void 0:r.find(o=>o.id===s);if(!(i&&i.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import({portableDid:e,keyManager:r=new kr}){return hs(this,void 0,void 0,function*(){let n=Qe.parse(e.uri);if(n?.method!==Zn.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");let s=yield _n.import({portableDid:e,keyManager:r});if(s.document.verificationMethod.length!==1)throw new Ee(_e.InvalidDidDocument,"DID document must contain exactly one verification method");return s})}static resolve(e,r){return hs(this,void 0,void 0,function*(){try{let n=yield Zn.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},lr),{didDocument:n})}catch(n){if(!(n instanceof Ee))throw new Error(n);return Object.assign(Object.assign({},lr),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument({didUri:e,options:r={}}){return hs(this,void 0,void 0,function*(){let{defaultContext:n="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:s=!1,enableExperimentalPublicKeyTypes:i=!1,publicKeyFormat:o="JsonWebKey2020"}=r,a={id:""},u=Qe.parse(e);if(!u)throw new Ee(_e.InvalidDid,`Invalid DID URI: ${e}`);let c=u.id;if(u.method!==Zn.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${u.method}`);if(!Zn.validateIdentifier(u))throw new Ee(_e.InvalidDid,`Invalid DID URI: ${e}`);let l=yield Zn.createSignatureMethod({didUri:e,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}});if(a.id=u.uri,a.verificationMethod=[l],a.authentication=[l.id],a.assertionMethod=[l.id],a.capabilityInvocation=[l.id],a.capabilityDelegation=[l.id],s===!0){let f=o==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",p=yield this.createEncryptionMethod({didUri:e,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:i,publicKeyFormat:f}});a.verificationMethod.push(p),a.keyAgreement=[p.id]}let d=[n];return CE({didDocument:a}).forEach(f=>{let p=M_[f];d.push(p)}),a["@context"]=d,a})}static createEncryptionMethod({didUri:e,multibaseValue:r,options:n}){return hs(this,void 0,void 0,function*(){let{enableExperimentalPublicKeyTypes:s,publicKeyFormat:i}=n,o={id:"",type:"",controller:""},{keyBytes:a,multicodecCode:u}=yield Zn.deriveEncryptionKey({multibaseValue:r}),c=a.byteLength,l=Tr.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(c!==l)throw new Ee(_e.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${l}`);let d=i0({keyBytes:a,multicodecCode:u});o.id=`${e}#${d}`;try{new URL(o.id)}catch{throw new Ee(_e.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(i in M_))throw new Ee(_e.UnsupportedPublicKeyType,`Unsupported format: ${i}`);if(s===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(i))throw new Ee(_e.InvalidPublicKeyType,`Specified '${i}' without setting enableExperimentalPublicKeyTypes to true.`);if(o.type=i,o.controller=e,i==="X25519KeyAgreementKey2020"&&(o.publicKeyMultibase=d),i==="JsonWebKey2020"){let{crv:f}=yield Tr.multicodecToJwk({code:u});o.publicKeyJwk=yield Tr.keyConverter(f).bytesToPublicKey({publicKeyBytes:a})}return o})}static createSignatureMethod({didUri:e,multibaseValue:r,options:n}){return hs(this,void 0,void 0,function*(){let{enableExperimentalPublicKeyTypes:s,publicKeyFormat:i}=n,o={id:"",type:"",controller:""},{keyBytes:a,multicodecCode:u,multicodecName:c}=s0({multibaseKeyId:r}),l=a.byteLength,d=Tr.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(l!==d)throw new Ee(_e.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${d}`);let h=!1;switch(c){case"secp256k1-pub":h=yield er.validatePublicKey({publicKeyBytes:a});break;case"ed25519-pub":h=yield Wt.validatePublicKey({publicKeyBytes:a});break;case"x25519-pub":h=!0;break}if(!h)throw new Ee(_e.InvalidPublicKey,"Invalid public key detected.");o.id=`${e}#${r}`;try{new URL(o.id)}catch{throw new Ee(_e.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(i in M_))throw new Ee(_e.UnsupportedPublicKeyType,`Unsupported format: ${i}`);if(s===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(i))throw new Ee(_e.InvalidPublicKeyType,`Specified '${i}' without setting enableExperimentalPublicKeyTypes to true.`);if(o.type=i,o.controller=e,i==="Ed25519VerificationKey2020"&&(o.publicKeyMultibase=r),i==="JsonWebKey2020"){let{crv:p}=yield Tr.multicodecToJwk({code:u});o.publicKeyJwk=yield Tr.keyConverter(p).bytesToPublicKey({publicKeyBytes:a})}return o})}static deriveEncryptionKey({multibaseValue:e}){return hs(this,void 0,void 0,function*(){let r={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:n,multicodecCode:s}=s0({multibaseKeyId:e});if(s===237){let i=yield Tr.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:n}),o=yield Wt.convertPublicKeyToX25519({publicKey:i});r={keyBytes:yield Tr.keyConverter("Ed25519").publicKeyToBytes({publicKey:o}),multicodecCode:236}}return r})}static validateIdentifier(e){let{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&Ol(n)==="String"&&n.startsWith("z")}};Zn.methodName="key";var Tr=class{static jwkToMulticodec({jwk:e}){return hs(this,void 0,void 0,function*(){let r=[];e.crv&&(r.push(e.crv),e.d?r.push("private"):r.push("public"));let n=r.join(":"),s=Tr.JWK_TO_MULTICODEC[n];if(s===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${n}'`);return{code:Zt.getCodeFromName({name:s}),name:s}})}static keyCompressor(e){let n={"P-256":cr.compressPublicKey,secp256k1:er.compressPublicKey}[e];if(!n)throw new Ee(_e.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:Wt,"P-256":cr,secp256k1:er,X25519:ra}[e];if(!n)throw new Ee(_e.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk({code:e,name:r}){return hs(this,void 0,void 0,function*(){if(!(r?!e:e))throw new Error("Either 'name' or 'code' must be defined, but not both.");r=r===void 0?Zt.getNameFromCode({code:e}):r;let n=r,s=Tr.MULTICODEC_TO_JWK[n];if(s===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},s)})}static publicKeyToMultibaseId({publicKey:e}){var r;return hs(this,void 0,void 0,function*(){if(!(e?.crv&&e.crv in jZ))throw new Ee(_e.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(r=e?.crv)!==null&&r!==void 0?r:"undefined"}`);let n=yield Tr.keyConverter(e.crv).publicKeyToBytes({publicKey:e});/^(secp256k1|P-256|P-384|P-521)$/.test(e.crv)&&(n=yield Tr.keyCompressor(e.crv)({publicKeyBytes:n}));let{name:s}=yield Tr.jwkToMulticodec({jwk:e});return i0({keyBytes:n,multicodecName:s})})}};Tr.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Tr.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Tr.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var qZ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},la=class extends $i{static resolve(e,r){return qZ(this,void 0,void 0,function*(){let n=Qe.parse(e);if(!n)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==la.methodName)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);let i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{let o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");let a=yield o.json();return Object.assign(Object.assign({},lr),{didDocument:a})}catch{return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"notFound"}})}})}};la.methodName="web";var WZ=ui(WB(),1),zZ=ui(q1(),1);var zB={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var JB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Od=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||zB;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return JB(this,void 0,void 0,function*(){let n=Qe.parse(e);if(!n)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:_e.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:_e.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let i=yield this.cache.get(n.uri);if(i)return i;{let o=yield s.resolve(n.uri,r);return yield this.cache.set(n.uri,o),o}})}dereference(e,r){return JB(this,void 0,void 0,function*(){let n=Qe.parse(e);if(!n)return{dereferencingMetadata:{error:_e.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};let{service:a=[],verificationMethod:u=[]}=s,c=new Set([e,n.fragment,`#${n.fragment}`]),l;for(let d of u)if(c.has(d.id)){l=d;break}for(let d of a)if(c.has(d.id)){l=d;break}return l?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:l,contentMetadata:i}:{dereferencingMetadata:{error:_e.NotFound},contentStream:null,contentMetadata:{}}})}};var L0=new Od({didResolvers:[Ni,Mi,la]});async function JZ(t){let{didResolutionMetadata:e,didDocument:r}=await L0.resolve(t);if(e.error)throw new Error(`Failed to resolve DID: ${t}. Error: ${e.error}`);return r}function j_(t){return!!t&&"id"in t&&"type"in t&&"controller"in t}var GB=ui(YE(),1),GZ=new kr,yi=class{static digest(e){let r=(0,GB.default)(e),n=ne.string(r).toUint8Array();return Un(n)}static async sign(e){let{did:r,payload:n,detached:s}=e,i=await r.getSigner(),o=i.keyId;o.startsWith("#")&&(o=`${r.uri}${o}`);let a={alg:i.algorithm,kid:o},u=ne.object(a).toBase64Url(),c=ne.uint8Array(n).toBase64Url(),l=`${u}.${c}`,d=ne.string(l).toUint8Array(),h=await i.sign({data:d}),f=ne.uint8Array(h).toBase64Url();return s?`${u}..${f}`:`${u}.${c}.${f}`}static async verify(e){let{signature:r,detachedPayload:n}=e;if(!r)throw new Error("Signature verification failed: Expected signature property to exist");let s=r.split(".");if(s.length!==3)throw new Error("Signature verification failed: Expected valid JWS with detached content");let[i,o,a]=s;if(n){if(o.length!==0)throw new Error("Signature verification failed: Expected valid JWS with detached content");o=ne.uint8Array(n).toBase64Url()}let u=ne.base64Url(i).toObject();if(!u.alg||!u.kid)throw new Error("Signature verification failed: Expected JWS header to contain alg and kid");let l=(await L0.dereference(u.kid)).contentStream;if(!j_(l))throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method");let d=l.publicKeyJwk;if(!d)throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method with publicKeyJwk");let h=`${i}.${o}`,f=ne.string(h).toUint8Array(),p=ne.base64Url(a).toUint8Array();if(!await GZ.verify({key:d,data:f,signature:p}))throw new Error("Signature verification failed: Integrity mismatch");let[w]=u.kid.split("#");return w}};var W_={};ar(W_,{balance:()=>rQ,close:()=>XZ,definitions:()=>YZ,message:()=>nQ,offering:()=>ZZ,order:()=>sQ,orderstatus:()=>oQ,quote:()=>aQ,resource:()=>uQ,rfq:()=>dQ,rfqPrivate:()=>lQ});var V_=ui(kd(),1),XZ=Bd;function Bd(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u=o;for(let c in t)if(!(c==="reason"||c==="success")){return Bd.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;break}if(u===o){if(t.reason!==void 0){let c=o;if(typeof t.reason!="string")return Bd.errors=[{instancePath:e+"/reason",schemaPath:"#/properties/reason/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a)if(t.success!==void 0){let c=o;if(typeof t.success!="boolean")return Bd.errors=[{instancePath:e+"/success",schemaPath:"#/properties/success/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=c===o}else var a=!0}}else return Bd.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Bd.errors=i,o===0}var YZ=K_;function K_(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return t&&typeof t=="object"&&!Array.isArray(t)?(K_.errors=i,o===0):(K_.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}var ZZ=Be,QZ={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/offering.schema.json",type:"object",properties:{additionalProperties:!1,description:{type:"string",description:"Brief description of what is being offered."},payin:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. Absence of this field implies that there is no _additional_ fee associated to the respective payment method."}},required:["kind"]}}},required:["currencyCode","methods"]},payout:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. absence of this field implies that there is no _additional_ fee associated to the respective payment method"},estimatedSettlementTime:{type:"number",description:"Estimated time in seconds for the payout to be settled. e.g. 3600 for 1 hour. 0 for instant settlement.",minimum:0}},required:["kind","estimatedSettlementTime"]}}},required:["currencyCode","methods"]},payoutUnitsPerPayinUnit:{type:"string",description:"Number of payout currency units for one payin currency unit (i.e 290000 USD for 1 BTC)"},requiredClaims:{type:"object",description:"PresentationDefinition that describes the credential(s) the PFI requires in order to provide a quote."}},required:["description","payin","payout","payoutUnitsPerPayinUnit"]};var ei=new RegExp("^([0-9]+(?:[.][0-9]+)?)$","u"),eQ={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var ZB={enum:["array","boolean","integer","null","number","object","string"]};function ji(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(ji.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(ji.errors=i,o===0):(ji.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var U_={validate:le};function Rn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return Rn.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=t.length;for(let c=0;c<u;c++){let l=o;U_.validate(t[c],{instancePath:e+"/"+c,parentData:t,parentDataProperty:c,rootData:s})||(i=i===null?U_.validate.errors:i.concat(U_.validate.errors),o=i.length);var a=l===o;if(!a)break}}}else return Rn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Rn.errors=i,o===0}function le(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return le.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:eQ.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let v=o;if(o===v&&o===v&&typeof t.$id!="string")return le.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$schema!==void 0){let v=o;if(o===v&&o===v&&typeof t.$schema!="string")return le.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$ref!==void 0){let v=o;if(o===v&&o===v&&typeof t.$ref!="string")return le.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$comment!==void 0){let v=o;if(typeof t.$comment!="string")return le.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.title!==void 0){let v=o;if(typeof t.title!="string")return le.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.description!==void 0){let v=o;if(typeof t.description!="string")return le.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.readOnly!==void 0){let v=o;if(typeof t.readOnly!="boolean")return le.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.examples!==void 0){let v=o;if(o===v&&!Array.isArray(t.examples))return le.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let v=t.multipleOf,k=o;if(o===k)if(typeof v=="number"&&isFinite(v)){if(v<=0||isNaN(v))return le.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return le.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.maximum!==void 0){let v=t.maximum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let v=t.exclusiveMaximum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.minimum!==void 0){let v=t.minimum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let v=t.exclusiveMinimum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.maxLength!==void 0){let v=t.maxLength,k=o,B=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return le.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===B&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return le.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=k===o}else var a=!0;if(a){if(t.minLength!==void 0){let v=o;ji(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?ji.errors:i.concat(ji.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.pattern!==void 0){let v=o;if(o===v&&o===v&&typeof t.pattern!="string")return le.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let v=o;le(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.items!==void 0){let v=t.items,k=o,B=o,T=!1,M=o;le(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var u=M===o;if(T=T||u,!T){let b=o;Rn(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var u=b===o;T=T||u}if(T)o=B,i!==null&&(B?i.length=B:i=null);else{let b={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[b]:i.push(b),o++,le.errors=i,!1}var a=k===o}else var a=!0;if(a){if(t.maxItems!==void 0){let v=t.maxItems,k=o,B=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return le.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===B&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return le.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=k===o}else var a=!0;if(a){if(t.minItems!==void 0){let v=o;ji(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?ji.errors:i.concat(ji.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let v=o;if(typeof t.uniqueItems!="boolean")return le.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.contains!==void 0){let v=o;le(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let v=t.maxProperties,k=o,B=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return le.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===B&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return le.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=k===o}else var a=!0;if(a){if(t.minProperties!==void 0){let v=o;ji(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?ji.errors:i.concat(ji.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.required!==void 0){let v=t.required,k=o;if(o===o)if(Array.isArray(v)){var c=!0;let M=v.length;for(let y=0;y<M;y++){let b=o;if(typeof v[y]!="string")return le.errors=[{instancePath:e+"/required/"+y,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=b===o;if(!c)break}if(c){let y=v.length,b;if(y>1){let E={};for(;y--;){let I=v[y];if(typeof I=="string"){if(typeof E[I]=="number"){return b=E[I],le.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:y,j:b},message:"must NOT have duplicate items (items ## "+b+" and "+y+" are identical)"}],!1;break}E[I]=y}}}}}else return le.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=k===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let v=o;le(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.definitions!==void 0){let v=t.definitions,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v))for(let T in v){let M=o;le(v[T],{instancePath:e+"/definitions/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var l=M===o;if(!l)break}else return le.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.properties!==void 0){let v=t.properties,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v))for(let T in v){let M=o;le(v[T],{instancePath:e+"/properties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var d=M===o;if(!d)break}else return le.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let v=t.patternProperties,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v)){for(let T in v){var h=o===o;if(!h){let y={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:T},message:"property name must be valid"};return i===null?i=[y]:i.push(y),o++,le.errors=i,!1;break}}if(h)for(let T in v){let M=o;le(v[T],{instancePath:e+"/patternProperties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var f=M===o;if(!f)break}}else return le.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.dependencies!==void 0){let v=t.dependencies,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v))for(let T in v){let M=v[T],y=o,b=o,E=!1,I=o;le(M,{instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var p=I===o;if(E=E||p,!E){let S=o;if(o===o)if(Array.isArray(M)){var g=!0;let O=M.length;for(let F=0;F<O;F++){let U=o;if(typeof M[F]!="string"){let $={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+F,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[$]:i.push($),o++}var g=U===o;if(!g)break}if(g){let F=M.length,U;if(F>1){let q={};for(;F--;){let $=M[F];if(typeof $=="string"){if(typeof q[$]=="number"){U=q[$];let V={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:F,j:U},message:"must NOT have duplicate items (items ## "+U+" and "+F+" are identical)"};i===null?i=[V]:i.push(V),o++;break}q[$]=F}}}}}else{let O={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[O]:i.push(O),o++}var p=S===o;E=E||p}if(E)o=b,i!==null&&(b?i.length=b:i=null);else{let S={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[S]:i.push(S),o++,le.errors=i,!1}var w=y===o;if(!w)break}else return le.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let v=o;le(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.enum!==void 0){let v=t.enum,k=o;if(o===k)if(Array.isArray(v)){if(v.length<1)return le.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let T=v.length,M;if(T>1){e:for(;T--;)for(M=T;M--;)if((0,V_.default)(v[T],v[M])){return le.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:T,j:M},message:"must NOT have duplicate items (items ## "+M+" and "+T+" are identical)"}],!1;break e}}}}else return le.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=k===o}else var a=!0;if(a){if(t.type!==void 0){let v=t.type,k=o,B=o,T=!1,M=o;if(!(v==="array"||v==="boolean"||v==="integer"||v==="null"||v==="number"||v==="object"||v==="string")){let b={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:ZB.enum},message:"must be equal to one of the allowed values"};i===null?i=[b]:i.push(b),o++}var P=M===o;if(T=T||P,!T){let b=o;if(o===b)if(Array.isArray(v))if(v.length<1){let I={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[I]:i.push(I),o++}else{var C=!0;let I=v.length;for(let S=0;S<I;S++){let N=v[S],R=o;if(!(N==="array"||N==="boolean"||N==="integer"||N==="null"||N==="number"||N==="object"||N==="string")){let F={instancePath:e+"/type/"+S,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:ZB.enum},message:"must be equal to one of the allowed values"};i===null?i=[F]:i.push(F),o++}var C=R===o;if(!C)break}if(C){let S=v.length,N;if(S>1){e:for(;S--;)for(N=S;N--;)if((0,V_.default)(v[S],v[N])){let R={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:S,j:N},message:"must NOT have duplicate items (items ## "+N+" and "+S+" are identical)"};i===null?i=[R]:i.push(R),o++;break e}}}}else{let I={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[I]:i.push(I),o++}var P=b===o;T=T||P}if(T)o=B,i!==null&&(B?i.length=B:i=null);else{let b={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[b]:i.push(b),o++,le.errors=i,!1}var a=k===o}else var a=!0;if(a){if(t.format!==void 0){let v=o;if(typeof t.format!="string")return le.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let v=o;if(typeof t.contentMediaType!="string")return le.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let v=o;if(typeof t.contentEncoding!="string")return le.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.if!==void 0){let v=o;le(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.then!==void 0){let v=o;le(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.else!==void 0){let v=o;le(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.allOf!==void 0){let v=o;Rn(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.anyOf!==void 0){let v=o;Rn(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.oneOf!==void 0){let v=o;Rn(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var a=v===o}else var a=!0;if(a)if(t.not!==void 0){let v=o;le(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return le.errors=i,o===0}var tQ=Object.prototype.hasOwnProperty;function Be(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.description===void 0&&(p="description")||t.payin===void 0&&(p="payin")||t.payout===void 0&&(p="payout")||t.payoutUnitsPerPayinUnit===void 0&&(p="payoutUnitsPerPayinUnit"))return Be.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return Be.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.description!==void 0){let g=o;if(typeof t.description!="string")return Be.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(t.payin!==void 0){let g=t.payin,w=o;if(o===w)if(g&&typeof g=="object"&&!Array.isArray(g)){let C;if(g.currencyCode===void 0&&(C="currencyCode")||g.methods===void 0&&(C="methods"))return Be.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"}],!1;{let v=o;for(let k in g)if(!(k==="currencyCode"||k==="min"||k==="max"||k==="methods")){return Be.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(v===o){if(g.currencyCode!==void 0){let k=o;if(typeof g.currencyCode!="string")return Be.errors=[{instancePath:e+"/payin/currencyCode",schemaPath:"#/properties/payin/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=k===o}else var u=!0;if(u){if(g.min!==void 0){let k=g.min,B=o;if(o===o)if(typeof k=="string"){if(!ei.test(k))return Be.errors=[{instancePath:e+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=B===o}else var u=!0;if(u){if(g.max!==void 0){let k=g.max,B=o;if(o===o)if(typeof k=="string"){if(!ei.test(k))return Be.errors=[{instancePath:e+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=B===o}else var u=!0;if(u)if(g.methods!==void 0){let k=g.methods,B=o;if(o===B)if(Array.isArray(k)){var c=!0;let M=k.length;for(let y=0;y<M;y++){let b=k[y],E=o;if(o===E)if(b&&typeof b=="object"&&!Array.isArray(b)){let S;if(b.kind===void 0&&(S="kind"))return Be.errors=[{instancePath:e+"/payin/methods/"+y,schemaPath:"#/properties/payin/properties/methods/items/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let N=o;for(let R in b)if(!(R==="kind"||R==="name"||R==="description"||R==="group"||R==="requiredPaymentDetails"||R==="min"||R==="max"||R==="fee")){return Be.errors=[{instancePath:e+"/payin/methods/"+y,schemaPath:"#/properties/payin/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:R},message:"must NOT have additional properties"}],!1;break}if(N===o){if(b.kind!==void 0){let R=o;if(typeof b.kind!="string")return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/kind",schemaPath:"#/properties/payin/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=R===o}else var l=!0;if(l){if(b.name!==void 0){let R=o;if(typeof b.name!="string")return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/name",schemaPath:"#/properties/payin/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=R===o}else var l=!0;if(l){if(b.description!==void 0){let R=o;if(typeof b.description!="string")return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/description",schemaPath:"#/properties/payin/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=R===o}else var l=!0;if(l){if(b.group!==void 0){let R=o;if(typeof b.group!="string")return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/group",schemaPath:"#/properties/payin/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=R===o}else var l=!0;if(l){if(b.requiredPaymentDetails!==void 0){let R=o;le(b.requiredPaymentDetails,{instancePath:e+"/payin/methods/"+y+"/requiredPaymentDetails",parentData:b,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var l=R===o}else var l=!0;if(l){if(b.min!==void 0){let R=b.min,O=o;if(o===o)if(typeof R=="string"){if(!ei.test(R))return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=O===o}else var l=!0;if(l){if(b.max!==void 0){let R=b.max,O=o;if(o===o)if(typeof R=="string"){if(!ei.test(R))return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=O===o}else var l=!0;if(l)if(b.fee!==void 0){let R=b.fee,O=o;if(o===o)if(typeof R=="string"){if(!ei.test(R))return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payin/methods/"+y+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=O===o}else var l=!0}}}}}}}}}else return Be.errors=[{instancePath:e+"/payin/methods/"+y,schemaPath:"#/properties/payin/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=E===o;if(!c)break}}else return Be.errors=[{instancePath:e+"/payin/methods",schemaPath:"#/properties/payin/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=B===o}else var u=!0}}}}}else return Be.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=w===o}else var a=!0;if(a){if(t.payout!==void 0){let g=t.payout,w=o;if(o===w)if(g&&typeof g=="object"&&!Array.isArray(g)){let C;if(g.currencyCode===void 0&&(C="currencyCode")||g.methods===void 0&&(C="methods"))return Be.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"}],!1;{let v=o;for(let k in g)if(!(k==="currencyCode"||k==="min"||k==="max"||k==="methods")){return Be.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(v===o){if(g.currencyCode!==void 0){let k=o;if(typeof g.currencyCode!="string")return Be.errors=[{instancePath:e+"/payout/currencyCode",schemaPath:"#/properties/payout/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=k===o}else var d=!0;if(d){if(g.min!==void 0){let k=g.min,B=o;if(o===o)if(typeof k=="string"){if(!ei.test(k))return Be.errors=[{instancePath:e+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=B===o}else var d=!0;if(d){if(g.max!==void 0){let k=g.max,B=o;if(o===o)if(typeof k=="string"){if(!ei.test(k))return Be.errors=[{instancePath:e+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=B===o}else var d=!0;if(d)if(g.methods!==void 0){let k=g.methods,B=o;if(o===B)if(Array.isArray(k)){var h=!0;let M=k.length;for(let y=0;y<M;y++){let b=k[y],E=o;if(o===E)if(b&&typeof b=="object"&&!Array.isArray(b)){let S;if(b.kind===void 0&&(S="kind")||b.estimatedSettlementTime===void 0&&(S="estimatedSettlementTime"))return Be.errors=[{instancePath:e+"/payout/methods/"+y,schemaPath:"#/properties/payout/properties/methods/items/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let N=o;for(let R in b)if(!tQ.call(QZ.properties.payout.properties.methods.items.properties,R)){return Be.errors=[{instancePath:e+"/payout/methods/"+y,schemaPath:"#/properties/payout/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:R},message:"must NOT have additional properties"}],!1;break}if(N===o){if(b.kind!==void 0){let R=o;if(typeof b.kind!="string")return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/kind",schemaPath:"#/properties/payout/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=R===o}else var f=!0;if(f){if(b.name!==void 0){let R=o;if(typeof b.name!="string")return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/name",schemaPath:"#/properties/payout/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=R===o}else var f=!0;if(f){if(b.description!==void 0){let R=o;if(typeof b.description!="string")return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/description",schemaPath:"#/properties/payout/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=R===o}else var f=!0;if(f){if(b.group!==void 0){let R=o;if(typeof b.group!="string")return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/group",schemaPath:"#/properties/payout/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=R===o}else var f=!0;if(f){if(b.requiredPaymentDetails!==void 0){let R=o;le(b.requiredPaymentDetails,{instancePath:e+"/payout/methods/"+y+"/requiredPaymentDetails",parentData:b,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var f=R===o}else var f=!0;if(f){if(b.min!==void 0){let R=b.min,O=o;if(o===o)if(typeof R=="string"){if(!ei.test(R))return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=O===o}else var f=!0;if(f){if(b.max!==void 0){let R=b.max,O=o;if(o===o)if(typeof R=="string"){if(!ei.test(R))return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=O===o}else var f=!0;if(f){if(b.fee!==void 0){let R=b.fee,O=o;if(o===o)if(typeof R=="string"){if(!ei.test(R))return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=O===o}else var f=!0;if(f)if(b.estimatedSettlementTime!==void 0){let R=b.estimatedSettlementTime,O=o;if(o===O)if(typeof R=="number"&&isFinite(R)){if(R<0||isNaN(R))return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Be.errors=[{instancePath:e+"/payout/methods/"+y+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var f=O===o}else var f=!0}}}}}}}}}}else return Be.errors=[{instancePath:e+"/payout/methods/"+y,schemaPath:"#/properties/payout/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=E===o;if(!h)break}}else return Be.errors=[{instancePath:e+"/payout/methods",schemaPath:"#/properties/payout/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=B===o}else var d=!0}}}}}else return Be.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=w===o}else var a=!0;if(a){if(t.payoutUnitsPerPayinUnit!==void 0){let g=o;if(typeof t.payoutUnitsPerPayinUnit!="string")return Be.errors=[{instancePath:e+"/payoutUnitsPerPayinUnit",schemaPath:"#/properties/payoutUnitsPerPayinUnit/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a)if(t.requiredClaims!==void 0){let g=t.requiredClaims,w=o;if(!(g&&typeof g=="object"&&!Array.isArray(g)))return Be.errors=[{instancePath:e+"/requiredClaims",schemaPath:"#/properties/requiredClaims/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=w===o}else var a=!0}}}}}else return Be.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Be.errors=i,o===0}var rQ=cu;function cu(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.currencyCode===void 0&&(u="currencyCode")||t.available===void 0&&(u="available"))return cu.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return cu.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.currencyCode!==void 0){let c=o;if(typeof t.currencyCode!="string")return cu.errors=[{instancePath:e+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a)if(t.available!==void 0){let c=t.available,l=o;if(o===o)if(typeof c=="string"){if(!ei.test(c))return cu.errors=[{instancePath:e+"/available",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return cu.errors=[{instancePath:e+"/available",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0}}else return cu.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return cu.errors=i,o===0}var nQ=lu;var iQ={type:"object",additionalProperties:!1,properties:{from:{$ref:"definitions.json#/definitions/did",description:"The sender's DID"},to:{$ref:"definitions.json#/definitions/did",description:"The recipient's DID"},kind:{type:"string",enum:["rfq","quote","order","orderstatus","close"],description:"The message kind (e.g. rfq, quote)"},id:{type:"string",description:"The message ID"},exchangeId:{type:"string",description:"ID for a 'thread' of messages between Alice <-> PFI. Set by the first message in a thread"},externalId:{type:"string",description:"Arbitrary ID for the caller to associate with the message."},createdAt:{type:"string",description:"ISO8601 formatted string representing the timestamp"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","to","kind","id","exchangeId","createdAt","protocol"]};var H_=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u");function Qr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.from===void 0&&(u="from")||t.to===void 0&&(u="to")||t.kind===void 0&&(u="kind")||t.id===void 0&&(u="id")||t.exchangeId===void 0&&(u="exchangeId")||t.createdAt===void 0&&(u="createdAt")||t.protocol===void 0&&(u="protocol"))return Qr.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{let c=o;for(let l in t)if(!(l==="from"||l==="to"||l==="kind"||l==="id"||l==="exchangeId"||l==="externalId"||l==="createdAt"||l==="protocol")){return Qr.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===o){if(t.from!==void 0){let l=t.from,d=o;if(o===o)if(typeof l=="string"){if(!H_.test(l))return Qr.errors=[{instancePath:e+"/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Qr.errors=[{instancePath:e+"/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.to!==void 0){let l=t.to,d=o;if(o===o)if(typeof l=="string"){if(!H_.test(l))return Qr.errors=[{instancePath:e+"/to",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return Qr.errors=[{instancePath:e+"/to",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.kind!==void 0){let l=t.kind,d=o;if(typeof l!="string")return Qr.errors=[{instancePath:e+"/kind",schemaPath:"#/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(l==="rfq"||l==="quote"||l==="order"||l==="orderstatus"||l==="close"))return Qr.errors=[{instancePath:e+"/kind",schemaPath:"#/properties/kind/enum",keyword:"enum",params:{allowedValues:iQ.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=d===o}else var a=!0;if(a){if(t.id!==void 0){let l=o;if(typeof t.id!="string")return Qr.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.exchangeId!==void 0){let l=o;if(typeof t.exchangeId!="string")return Qr.errors=[{instancePath:e+"/exchangeId",schemaPath:"#/properties/exchangeId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.externalId!==void 0){let l=o;if(typeof t.externalId!="string")return Qr.errors=[{instancePath:e+"/externalId",schemaPath:"#/properties/externalId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.createdAt!==void 0){let l=o;if(typeof t.createdAt!="string")return Qr.errors=[{instancePath:e+"/createdAt",schemaPath:"#/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(t.protocol!==void 0){let l=o;if(typeof t.protocol!="string")return Qr.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0}}}}}}}}}else return Qr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Qr.errors=i,o===0}function lu(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.metadata===void 0&&(u="metadata")||t.data===void 0&&(u="data")||t.signature===void 0&&(u="signature"))return lu.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{let c=o;for(let l in t)if(!(l==="metadata"||l==="data"||l==="signature"||l==="privateData")){return lu.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===o){if(t.metadata!==void 0){let l=o;Qr(t.metadata,{instancePath:e+"/metadata",parentData:t,parentDataProperty:"metadata",rootData:s})||(i=i===null?Qr.errors:i.concat(Qr.errors),o=i.length);var a=l===o}else var a=!0;if(a){if(t.data!==void 0){let l=t.data,d=o;if(!(l&&typeof l=="object"&&!Array.isArray(l)))return lu.errors=[{instancePath:e+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a){if(t.signature!==void 0){let l=o;if(typeof t.signature!="string")return lu.errors=[{instancePath:e+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(t.privateData!==void 0){let l=t.privateData,d=o;if(!(l&&typeof l=="object"&&!Array.isArray(l)))return lu.errors=[{instancePath:e+"/privateData",schemaPath:"#/properties/privateData/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}}else return lu.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return lu.errors=i,o===0}var sQ=U0;function U0(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t))for(let a in t){return U0.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;break}else return U0.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return U0.errors=i,o===0}var oQ=Id;function Id(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let a;if(t.orderStatus===void 0&&(a="orderStatus"))return Id.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:a},message:"must have required property '"+a+"'"}],!1;{let u=o;for(let c in t)if(c!=="orderStatus"){return Id.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;break}if(u===o&&t.orderStatus!==void 0&&typeof t.orderStatus!="string")return Id.errors=[{instancePath:e+"/orderStatus",schemaPath:"#/properties/orderStatus/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}}else return Id.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Id.errors=i,o===0}var aQ=Td;function Vr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.currencyCode===void 0&&(c="currencyCode")||t.amount===void 0&&(c="amount"))return Vr.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=o;for(let d in t)if(!(d==="currencyCode"||d==="amount"||d==="fee"||d==="paymentInstruction")){return Vr.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties"}],!1;break}if(l===o){if(t.currencyCode!==void 0){let d=o;if(typeof t.currencyCode!="string")return Vr.errors=[{instancePath:e+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.amount!==void 0){let d=t.amount,h=o;if(o===o)if(typeof d=="string"){if(!ei.test(d))return Vr.errors=[{instancePath:e+"/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Vr.errors=[{instancePath:e+"/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=h===o}else var a=!0;if(a){if(t.fee!==void 0){let d=t.fee,h=o;if(o===o)if(typeof d=="string"){if(!ei.test(d))return Vr.errors=[{instancePath:e+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Vr.errors=[{instancePath:e+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=h===o}else var a=!0;if(a)if(t.paymentInstruction!==void 0){let d=t.paymentInstruction,h=o;if(o===o)if(d&&typeof d=="object"&&!Array.isArray(d)){let g=o;for(let w in d)if(!(w==="link"||w==="instruction")){return Vr.errors=[{instancePath:e+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:w},message:"must NOT have additional properties"}],!1;break}if(g===o){if(d.link!==void 0){let w=o;if(typeof d.link!="string")return Vr.errors=[{instancePath:e+"/paymentInstruction/link",schemaPath:"#/definitions/PaymentInstruction/properties/link/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=w===o}else var u=!0;if(u)if(d.instruction!==void 0){let w=o;if(typeof d.instruction!="string")return Vr.errors=[{instancePath:e+"/paymentInstruction/instruction",schemaPath:"#/definitions/PaymentInstruction/properties/instruction/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=w===o}else var u=!0}}else return Vr.errors=[{instancePath:e+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0}}}}}else return Vr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Vr.errors=i,o===0}function Td(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.expiresAt===void 0&&(u="expiresAt")||t.payin===void 0&&(u="payin")||t.payout===void 0&&(u="payout"))return Td.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{let c=o;for(let l in t)if(!(l==="expiresAt"||l==="payin"||l==="payout")){return Td.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===o){if(t.expiresAt!==void 0){let l=o;if(typeof t.expiresAt!="string")return Td.errors=[{instancePath:e+"/expiresAt",schemaPath:"#/properties/expiresAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.payin!==void 0){let l=o;Vr(t.payin,{instancePath:e+"/payin",parentData:t,parentDataProperty:"payin",rootData:s})||(i=i===null?Vr.errors:i.concat(Vr.errors),o=i.length);var a=l===o}else var a=!0;if(a)if(t.payout!==void 0){let l=o;Vr(t.payout,{instancePath:e+"/payout",parentData:t,parentDataProperty:"payout",rootData:s})||(i=i===null?Vr.errors:i.concat(Vr.errors),o=i.length);var a=l===o}else var a=!0}}}}else return Td.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Td.errors=i,o===0}var uQ=fn,cQ={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/resource.schema.json",type:"object",additionalProperties:!1,properties:{metadata:{type:"object",properties:{from:{$ref:"definitions.json#/definitions/did",description:"The PFI's DID"},kind:{type:"string",enum:["offering","balance"],description:"The resource kind (e.g. Offering)"},id:{type:"string",description:"The resource id"},createdAt:{type:"string",description:"When the resource was created at. Expressed as ISO8601"},updatedAt:{type:"string",description:"When the resource was last updated. Expressed as ISO8601"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","kind","id","createdAt","protocol"],description:"The metadata object contains fields about the resource and is present for every tbdex resources of all types."},data:{description:"The actual resource content",type:"object"},signature:{type:"string",description:"Signature that verifies that authenticity and integrity of a message"}},required:["metadata","data","signature"],description:"ResourceModel"};function fn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.metadata===void 0&&(c="metadata")||t.data===void 0&&(c="data")||t.signature===void 0&&(c="signature"))return fn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=o;for(let d in t)if(!(d==="metadata"||d==="data"||d==="signature")){return fn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties"}],!1;break}if(l===o){if(t.metadata!==void 0){let d=t.metadata,h=o;if(o===h)if(d&&typeof d=="object"&&!Array.isArray(d)){let f;if(d.from===void 0&&(f="from")||d.kind===void 0&&(f="kind")||d.id===void 0&&(f="id")||d.createdAt===void 0&&(f="createdAt")||d.protocol===void 0&&(f="protocol"))return fn.errors=[{instancePath:e+"/metadata",schemaPath:"#/properties/metadata/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"}],!1;if(d.from!==void 0){let p=d.from,g=o;if(o===o)if(typeof p=="string"){if(!H_.test(p))return fn.errors=[{instancePath:e+"/metadata/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return fn.errors=[{instancePath:e+"/metadata/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(d.kind!==void 0){let p=d.kind,g=o;if(typeof p!="string")return fn.errors=[{instancePath:e+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(p==="offering"||p==="balance"))return fn.errors=[{instancePath:e+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/enum",keyword:"enum",params:{allowedValues:cQ.properties.metadata.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=g===o}else var a=!0;if(a){if(d.id!==void 0){let p=o;if(typeof d.id!="string")return fn.errors=[{instancePath:e+"/metadata/id",schemaPath:"#/properties/metadata/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(d.createdAt!==void 0){let p=o;if(typeof d.createdAt!="string")return fn.errors=[{instancePath:e+"/metadata/createdAt",schemaPath:"#/properties/metadata/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(d.updatedAt!==void 0){let p=o;if(typeof d.updatedAt!="string")return fn.errors=[{instancePath:e+"/metadata/updatedAt",schemaPath:"#/properties/metadata/properties/updatedAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a)if(d.protocol!==void 0){let p=o;if(typeof d.protocol!="string")return fn.errors=[{instancePath:e+"/metadata/protocol",schemaPath:"#/properties/metadata/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0}}}}}else return fn.errors=[{instancePath:e+"/metadata",schemaPath:"#/properties/metadata/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=h===o}else var u=!0;if(u){if(t.data!==void 0){let d=t.data,h=o;if(!(d&&typeof d=="object"&&!Array.isArray(d)))return fn.errors=[{instancePath:e+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=h===o}else var u=!0;if(u)if(t.signature!==void 0){let d=o;if(typeof t.signature!="string")return fn.errors=[{instancePath:e+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=d===o}else var u=!0}}}}else return fn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return fn.errors=i,o===0}var lQ=Qn;function Qn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.salt===void 0&&(c="salt"))return Qn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return Qn.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.salt!==void 0){let l=o;if(typeof t.salt!="string")return Qn.errors=[{instancePath:e+"/salt",schemaPath:"#/properties/salt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.claims!==void 0){let l=t.claims,d=o;if(o===d)if(Array.isArray(l)){var u=!0;let f=l.length;for(let p=0;p<f;p++){let g=o;if(typeof l[p]!="string")return Qn.errors=[{instancePath:e+"/claims/"+p,schemaPath:"#/properties/claims/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=g===o;if(!u)break}}else return Qn.errors=[{instancePath:e+"/claims",schemaPath:"#/properties/claims/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=d===o}else var a=!0;if(a){if(t.payin!==void 0){let l=t.payin,d=o;if(o===d)if(l&&typeof l=="object"&&!Array.isArray(l)){let f=o;for(let p in l)if(p!=="paymentDetails"){return Qn.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(f===o&&l.paymentDetails!==void 0){let p=l.paymentDetails;if(!(p&&typeof p=="object"&&!Array.isArray(p)))return Qn.errors=[{instancePath:e+"/payin/paymentDetails",schemaPath:"#/properties/payin/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return Qn.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a)if(t.payout!==void 0){let l=t.payout,d=o;if(o===d)if(l&&typeof l=="object"&&!Array.isArray(l)){let f=o;for(let p in l)if(p!=="paymentDetails"){return Qn.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(f===o&&l.paymentDetails!==void 0){let p=l.paymentDetails;if(!(p&&typeof p=="object"&&!Array.isArray(p)))return Qn.errors=[{instancePath:e+"/payout/paymentDetails",schemaPath:"#/properties/payout/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return Qn.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}else return Qn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Qn.errors=i,o===0}var dQ=pn;function pn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.offeringId===void 0&&(l="offeringId")||t.payin===void 0&&(l="payin")||t.payout===void 0&&(l="payout"))return pn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return pn.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.offeringId!==void 0){let d=o;if(typeof t.offeringId!="string")return pn.errors=[{instancePath:e+"/offeringId",schemaPath:"#/properties/offeringId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.claimsHash!==void 0){let d=o;if(typeof t.claimsHash!="string")return pn.errors=[{instancePath:e+"/claimsHash",schemaPath:"#/properties/claimsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.payin!==void 0){let d=t.payin,h=o;if(o===h)if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.amount===void 0&&(p="amount")||d.kind===void 0&&(p="kind"))return pn.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.amount!==void 0){let g=d.amount,w=o;if(o===o)if(typeof g=="string"){if(!ei.test(g))return pn.errors=[{instancePath:e+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return pn.errors=[{instancePath:e+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=w===o}else var u=!0;if(u){if(d.kind!==void 0){let g=o;if(typeof d.kind!="string")return pn.errors=[{instancePath:e+"/payin/kind",schemaPath:"#/properties/payin/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=g===o}else var u=!0;if(u)if(d.paymentDetailsHash!==void 0){let g=o;if(typeof d.paymentDetailsHash!="string")return pn.errors=[{instancePath:e+"/payin/paymentDetailsHash",schemaPath:"#/properties/payin/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=g===o}else var u=!0}}else return pn.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0;if(a)if(t.payout!==void 0){let d=t.payout,h=o;if(o===h)if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.kind===void 0&&(p="kind"))return pn.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.kind!==void 0){let g=o;if(typeof d.kind!="string")return pn.errors=[{instancePath:e+"/payout/kind",schemaPath:"#/properties/payout/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=g===o}else var c=!0;if(c)if(d.paymentDetailsHash!==void 0){let g=o;if(typeof d.paymentDetailsHash!="string")return pn.errors=[{instancePath:e+"/payout/paymentDetailsHash",schemaPath:"#/properties/payout/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=g===o}else var c=!0}else return pn.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0}}}}else return pn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return pn.errors=i,o===0}function du(t,e){let r=W_[e];if(!r)throw new Error(`no validator found for ${e}`);r(t),r.errors&&fQ(r.errors)}function fQ(t){let[e]=t,{instancePath:r,message:n,params:s}=e;throw r||="message",n=s.allowedValues?`${n} - ${s.allowedValues.join(", ")}`:n,new Error(`${r}: ${n}`)}var qi=class{metadata;data;_signature;constructor(e,r,n){this.metadata=e,this.data=r,this._signature=n}static generateId(e){return $f(e).toString()}async sign(e){this._signature=await yi.sign({did:e,payload:this.digest(),detached:!0})}async verify(){return this.validate(),this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");let e=await yi.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==e)throw new Error("Signature verification failed: Expected DID in kid of JWS header must match metadata.from");return e}digest(){return yi.digest({metadata:this.metadata,data:this.data})}validate(){du(this.toJSON(),"resource"),this.validateData()}validateData(){du(this.data,this.kind)}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}get signature(){return this._signature}get id(){return this.metadata.id}get from(){return this.metadata.from}get createdAt(){return this.metadata.createdAt}get updatedAt(){return this.metadata.updatedAt}get protocol(){return this.metadata.protocol}isOffering(){return this.metadata.kind==="offering"}isBalance(){return this.metadata.kind==="balance"}};var Hr=class{metadata;data;_signature;constructor(e,r,n){this.metadata=e,this.data=r,this._signature=n}static generateId(e){return $f(e).toString()}async sign(e){this._signature=await yi.sign({did:e,payload:this.digest(),detached:!0})}async verify(){return this.validate(),await this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");let e=await yi.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==e)throw new Error("Signature verification failed: Expected DID in kid of JWS header must match metadata.from");return e}digest(){return yi.digest({metadata:this.metadata,data:this.data})}validate(){du(this.toJSON(),"message"),this.validateData()}validateData(){du(this.data,this.kind)}get signature(){return this._signature}get id(){return this.metadata.id}get exchangeId(){return this.metadata.exchangeId}get from(){return this.metadata.from}get to(){return this.metadata.to}get createdAt(){return this.metadata.createdAt}get externalId(){return this.metadata.externalId}get protocol(){return this.metadata.protocol}isRfq(){return this.metadata.kind==="rfq"}isQuote(){return this.metadata.kind==="quote"}isOrder(){return this.metadata.kind==="order"}isOrderStatus(){return this.metadata.kind==="orderstatus"}isClose(){return this.metadata.kind==="close"}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}};var pQ=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,z_=Math.ceil,Ui=Math.floor,ti="[BigNumber Error] ",QB=ti+"Number primitive has more than 15 significant digits: ",ms=1e14,We=14,J_=9007199254740991,G_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],fu=1e7,en=1e9;function eI(t){var e,r,n,s=C.prototype={constructor:C,toString:null,valueOf:null},i=new C(1),o=20,a=4,u=-7,c=21,l=-1e7,d=1e7,h=!1,f=1,p=0,g={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},w="0123456789abcdefghijklmnopqrstuvwxyz",P=!0;function C(y,b){var E,I,S,N,R,O,F,U,q=this;if(!(q instanceof C))return new C(y,b);if(b==null){if(y&&y._isBigNumber===!0){q.s=y.s,!y.c||y.e>d?q.c=q.e=null:y.e<l?q.c=[q.e=0]:(q.e=y.e,q.c=y.c.slice());return}if((O=typeof y=="number")&&y*0==0){if(q.s=1/y<0?(y=-y,-1):1,y===~~y){for(N=0,R=y;R>=10;R/=10,N++);N>d?q.c=q.e=null:(q.e=N,q.c=[y]);return}U=String(y)}else{if(!pQ.test(U=String(y)))return n(q,U,O);q.s=U.charCodeAt(0)==45?(U=U.slice(1),-1):1}(N=U.indexOf("."))>-1&&(U=U.replace(".","")),(R=U.search(/e/i))>0?(N<0&&(N=R),N+=+U.slice(R+1),U=U.substring(0,R)):N<0&&(N=U.length)}else{if(fr(b,2,w.length,"Base"),b==10&&P)return q=new C(y),T(q,o+q.e+1,a);if(U=String(y),O=typeof y=="number"){if(y*0!=0)return n(q,U,O,b);if(q.s=1/y<0?(U=U.slice(1),-1):1,C.DEBUG&&U.replace(/^0\.0*|\./,"").length>15)throw Error(QB+y)}else q.s=U.charCodeAt(0)===45?(U=U.slice(1),-1):1;for(E=w.slice(0,b),N=R=0,F=U.length;R<F;R++)if(E.indexOf(I=U.charAt(R))<0){if(I=="."){if(R>N){N=F;continue}}else if(!S&&(U==U.toUpperCase()&&(U=U.toLowerCase())||U==U.toLowerCase()&&(U=U.toUpperCase()))){S=!0,R=-1,N=0;continue}return n(q,String(y),O,b)}O=!1,U=r(U,b,10,q.s),(N=U.indexOf("."))>-1?U=U.replace(".",""):N=U.length}for(R=0;U.charCodeAt(R)===48;R++);for(F=U.length;U.charCodeAt(--F)===48;);if(U=U.slice(R,++F)){if(F-=R,O&&C.DEBUG&&F>15&&(y>J_||y!==Ui(y)))throw Error(QB+q.s*y);if((N=N-R-1)>d)q.c=q.e=null;else if(N<l)q.c=[q.e=0];else{if(q.e=N,q.c=[],R=(N+1)%We,N<0&&(R+=We),R<F){for(R&&q.c.push(+U.slice(0,R)),F-=We;R<F;)q.c.push(+U.slice(R,R+=We));R=We-(U=U.slice(R)).length}else R-=F;for(;R--;U+="0");q.c.push(+U)}}else q.c=[q.e=0]}C.clone=eI,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.EUCLID=9,C.config=C.set=function(y){var b,E;if(y!=null)if(typeof y=="object"){if(y.hasOwnProperty(b="DECIMAL_PLACES")&&(E=y[b],fr(E,0,en,b),o=E),y.hasOwnProperty(b="ROUNDING_MODE")&&(E=y[b],fr(E,0,8,b),a=E),y.hasOwnProperty(b="EXPONENTIAL_AT")&&(E=y[b],E&&E.pop?(fr(E[0],-en,0,b),fr(E[1],0,en,b),u=E[0],c=E[1]):(fr(E,-en,en,b),u=-(c=E<0?-E:E))),y.hasOwnProperty(b="RANGE"))if(E=y[b],E&&E.pop)fr(E[0],-en,-1,b),fr(E[1],1,en,b),l=E[0],d=E[1];else if(fr(E,-en,en,b),E)l=-(d=E<0?-E:E);else throw Error(ti+b+" cannot be zero: "+E);if(y.hasOwnProperty(b="CRYPTO"))if(E=y[b],E===!!E)if(E)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))h=E;else throw h=!E,Error(ti+"crypto unavailable");else h=E;else throw Error(ti+b+" not true or false: "+E);if(y.hasOwnProperty(b="MODULO_MODE")&&(E=y[b],fr(E,0,9,b),f=E),y.hasOwnProperty(b="POW_PRECISION")&&(E=y[b],fr(E,0,en,b),p=E),y.hasOwnProperty(b="FORMAT"))if(E=y[b],typeof E=="object")g=E;else throw Error(ti+b+" not an object: "+E);if(y.hasOwnProperty(b="ALPHABET"))if(E=y[b],typeof E=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(E))P=E.slice(0,10)=="0123456789",w=E;else throw Error(ti+b+" invalid: "+E)}else throw Error(ti+"Object expected: "+y);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[u,c],RANGE:[l,d],CRYPTO:h,MODULO_MODE:f,POW_PRECISION:p,FORMAT:g,ALPHABET:w}},C.isBigNumber=function(y){if(!y||y._isBigNumber!==!0)return!1;if(!C.DEBUG)return!0;var b,E,I=y.c,S=y.e,N=y.s;e:if({}.toString.call(I)=="[object Array]"){if((N===1||N===-1)&&S>=-en&&S<=en&&S===Ui(S)){if(I[0]===0){if(S===0&&I.length===1)return!0;break e}if(b=(S+1)%We,b<1&&(b+=We),String(I[0]).length==b){for(b=0;b<I.length;b++)if(E=I[b],E<0||E>=ms||E!==Ui(E))break e;if(E!==0)return!0}}}else if(I===null&&S===null&&(N===null||N===1||N===-1))return!0;throw Error(ti+"Invalid BigNumber: "+y)},C.maximum=C.max=function(){return k(arguments,-1)},C.minimum=C.min=function(){return k(arguments,1)},C.random=function(){var y=9007199254740992,b=Math.random()*y&2097151?function(){return Ui(Math.random()*y)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(E){var I,S,N,R,O,F=0,U=[],q=new C(i);if(E==null?E=o:fr(E,0,en),R=z_(E/We),h)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array(R*=2));F<R;)O=I[F]*131072+(I[F+1]>>>11),O>=9e15?(S=crypto.getRandomValues(new Uint32Array(2)),I[F]=S[0],I[F+1]=S[1]):(U.push(O%1e14),F+=2);F=R/2}else if(crypto.randomBytes){for(I=crypto.randomBytes(R*=7);F<R;)O=(I[F]&31)*281474976710656+I[F+1]*1099511627776+I[F+2]*4294967296+I[F+3]*16777216+(I[F+4]<<16)+(I[F+5]<<8)+I[F+6],O>=9e15?crypto.randomBytes(7).copy(I,F):(U.push(O%1e14),F+=7);F=R/7}else throw h=!1,Error(ti+"crypto unavailable");if(!h)for(;F<R;)O=b(),O<9e15&&(U[F++]=O%1e14);for(R=U[--F],E%=We,R&&E&&(O=G_[We-E],U[F]=Ui(R/O)*O);U[F]===0;U.pop(),F--);if(F<0)U=[N=0];else{for(N=-1;U[0]===0;U.splice(0,1),N-=We);for(F=1,O=U[0];O>=10;O/=10,F++);F<We&&(N-=We-F)}return q.e=N,q.c=U,q}}(),C.sum=function(){for(var y=1,b=arguments,E=new C(b[0]);y<b.length;)E=E.plus(b[y++]);return E},r=function(){var y="0123456789";function b(E,I,S,N){for(var R,O=[0],F,U=0,q=E.length;U<q;){for(F=O.length;F--;O[F]*=I);for(O[0]+=N.indexOf(E.charAt(U++)),R=0;R<O.length;R++)O[R]>S-1&&(O[R+1]==null&&(O[R+1]=0),O[R+1]+=O[R]/S|0,O[R]%=S)}return O.reverse()}return function(E,I,S,N,R){var O,F,U,q,$,V,z,ee,ce=E.indexOf("."),re=o,ie=a;for(ce>=0&&(q=p,p=0,E=E.replace(".",""),ee=new C(I),V=ee.pow(E.length-ce),p=q,ee.c=b(da(Li(V.c),V.e,"0"),10,S,y),ee.e=ee.c.length),z=b(E,I,S,R?(O=w,y):(O=y,w)),U=q=z.length;z[--q]==0;z.pop());if(!z[0])return O.charAt(0);if(ce<0?--U:(V.c=z,V.e=U,V.s=N,V=e(V,ee,re,ie,S),z=V.c,$=V.r,U=V.e),F=U+re+1,ce=z[F],q=S/2,$=$||F<0||z[F+1]!=null,$=ie<4?(ce!=null||$)&&(ie==0||ie==(V.s<0?3:2)):ce>q||ce==q&&(ie==4||$||ie==6&&z[F-1]&1||ie==(V.s<0?8:7)),F<1||!z[0])E=$?da(O.charAt(1),-re,O.charAt(0)):O.charAt(0);else{if(z.length=F,$)for(--S;++z[--F]>S;)z[F]=0,F||(++U,z=[1].concat(z));for(q=z.length;!z[--q];);for(ce=0,E="";ce<=q;E+=O.charAt(z[ce++]));E=da(E,U,O.charAt(0))}return E}}(),e=function(){function y(I,S,N){var R,O,F,U,q=0,$=I.length,V=S%fu,z=S/fu|0;for(I=I.slice();$--;)F=I[$]%fu,U=I[$]/fu|0,R=z*F+U*V,O=V*F+R%fu*fu+q,q=(O/N|0)+(R/fu|0)+z*U,I[$]=O%N;return q&&(I=[q].concat(I)),I}function b(I,S,N,R){var O,F;if(N!=R)F=N>R?1:-1;else for(O=F=0;O<N;O++)if(I[O]!=S[O]){F=I[O]>S[O]?1:-1;break}return F}function E(I,S,N,R){for(var O=0;N--;)I[N]-=O,O=I[N]<S[N]?1:0,I[N]=O*R+I[N]-S[N];for(;!I[0]&&I.length>1;I.splice(0,1));}return function(I,S,N,R,O){var F,U,q,$,V,z,ee,ce,re,ie,ue,ye,ke,He,Xe,qe,Le,pt=I.s==S.s?1:-1,Me=I.c,at=S.c;if(!Me||!Me[0]||!at||!at[0])return new C(!I.s||!S.s||(Me?at&&Me[0]==at[0]:!at)?NaN:Me&&Me[0]==0||!at?pt*0:pt/0);for(ce=new C(pt),re=ce.c=[],U=I.e-S.e,pt=N+U+1,O||(O=ms,U=Ki(I.e/We)-Ki(S.e/We),pt=pt/We|0),q=0;at[q]==(Me[q]||0);q++);if(at[q]>(Me[q]||0)&&U--,pt<0)re.push(1),$=!0;else{for(He=Me.length,qe=at.length,q=0,pt+=2,V=Ui(O/(at[0]+1)),V>1&&(at=y(at,V,O),Me=y(Me,V,O),qe=at.length,He=Me.length),ke=qe,ie=Me.slice(0,qe),ue=ie.length;ue<qe;ie[ue++]=0);Le=at.slice(),Le=[0].concat(Le),Xe=at[0],at[1]>=O/2&&Xe++;do{if(V=0,F=b(at,ie,qe,ue),F<0){if(ye=ie[0],qe!=ue&&(ye=ye*O+(ie[1]||0)),V=Ui(ye/Xe),V>1)for(V>=O&&(V=O-1),z=y(at,V,O),ee=z.length,ue=ie.length;b(z,ie,ee,ue)==1;)V--,E(z,qe<ee?Le:at,ee,O),ee=z.length,F=1;else V==0&&(F=V=1),z=at.slice(),ee=z.length;if(ee<ue&&(z=[0].concat(z)),E(ie,z,ue,O),ue=ie.length,F==-1)for(;b(at,ie,qe,ue)<1;)V++,E(ie,qe<ue?Le:at,ue,O),ue=ie.length}else F===0&&(V++,ie=[0]);re[q++]=V,ie[0]?ie[ue++]=Me[ke]||0:(ie=[Me[ke]],ue=1)}while((ke++<He||ie[0]!=null)&&pt--);$=ie[0]!=null,re[0]||re.splice(0,1)}if(O==ms){for(q=1,pt=re[0];pt>=10;pt/=10,q++);T(ce,N+(ce.e=q+U*We-1)+1,R,$)}else ce.e=U,ce.r=+$;return ce}}();function v(y,b,E,I){var S,N,R,O,F;if(E==null?E=a:fr(E,0,8),!y.c)return y.toString();if(S=y.c[0],R=y.e,b==null)F=Li(y.c),F=I==1||I==2&&(R<=u||R>=c)?V0(F,R):da(F,R,"0");else if(y=T(new C(y),b,E),N=y.e,F=Li(y.c),O=F.length,I==1||I==2&&(b<=N||N<=u)){for(;O<b;F+="0",O++);F=V0(F,N)}else if(b-=R,F=da(F,N,"0"),N+1>O){if(--b>0)for(F+=".";b--;F+="0");}else if(b+=N-O,b>0)for(N+1==O&&(F+=".");b--;F+="0");return y.s<0&&S?"-"+F:F}function k(y,b){for(var E,I,S=1,N=new C(y[0]);S<y.length;S++)I=new C(y[S]),(!I.s||(E=Rc(N,I))===b||E===0&&N.s===b)&&(N=I);return N}function B(y,b,E){for(var I=1,S=b.length;!b[--S];b.pop());for(S=b[0];S>=10;S/=10,I++);return(E=I+E*We-1)>d?y.c=y.e=null:E<l?y.c=[y.e=0]:(y.e=E,y.c=b),y}n=function(){var y=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,E=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,S=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,R,O,F){var U,q=O?R:R.replace(S,"");if(I.test(q))N.s=isNaN(q)?null:q<0?-1:1;else{if(!O&&(q=q.replace(y,function($,V,z){return U=(z=z.toLowerCase())=="x"?16:z=="b"?2:8,!F||F==U?V:$}),F&&(U=F,q=q.replace(b,"$1").replace(E,"0.$1")),R!=q))return new C(q,U);if(C.DEBUG)throw Error(ti+"Not a"+(F?" base "+F:"")+" number: "+R);N.s=null}N.c=N.e=null}}();function T(y,b,E,I){var S,N,R,O,F,U,q,$=y.c,V=G_;if($){e:{for(S=1,O=$[0];O>=10;O/=10,S++);if(N=b-S,N<0)N+=We,R=b,F=$[U=0],q=Ui(F/V[S-R-1]%10);else if(U=z_((N+1)/We),U>=$.length)if(I){for(;$.length<=U;$.push(0));F=q=0,S=1,N%=We,R=N-We+1}else break e;else{for(F=O=$[U],S=1;O>=10;O/=10,S++);N%=We,R=N-We+S,q=R<0?0:Ui(F/V[S-R-1]%10)}if(I=I||b<0||$[U+1]!=null||(R<0?F:F%V[S-R-1]),I=E<4?(q||I)&&(E==0||E==(y.s<0?3:2)):q>5||q==5&&(E==4||I||E==6&&(N>0?R>0?F/V[S-R]:0:$[U-1])%10&1||E==(y.s<0?8:7)),b<1||!$[0])return $.length=0,I?(b-=y.e+1,$[0]=V[(We-b%We)%We],y.e=-b||0):$[0]=y.e=0,y;if(N==0?($.length=U,O=1,U--):($.length=U+1,O=V[We-N],$[U]=R>0?Ui(F/V[S-R]%V[R])*O:0),I)for(;;)if(U==0){for(N=1,R=$[0];R>=10;R/=10,N++);for(R=$[0]+=O,O=1;R>=10;R/=10,O++);N!=O&&(y.e++,$[0]==ms&&($[0]=1));break}else{if($[U]+=O,$[U]!=ms)break;$[U--]=0,O=1}for(N=$.length;$[--N]===0;$.pop());}y.e>d?y.c=y.e=null:y.e<l&&(y.c=[y.e=0])}return y}function M(y){var b,E=y.e;return E===null?y.toString():(b=Li(y.c),b=E<=u||E>=c?V0(b,E):da(b,E,"0"),y.s<0?"-"+b:b)}return s.absoluteValue=s.abs=function(){var y=new C(this);return y.s<0&&(y.s=1),y},s.comparedTo=function(y,b){return Rc(this,new C(y,b))},s.decimalPlaces=s.dp=function(y,b){var E,I,S,N=this;if(y!=null)return fr(y,0,en),b==null?b=a:fr(b,0,8),T(new C(N),y+N.e+1,b);if(!(E=N.c))return null;if(I=((S=E.length-1)-Ki(this.e/We))*We,S=E[S])for(;S%10==0;S/=10,I--);return I<0&&(I=0),I},s.dividedBy=s.div=function(y,b){return e(this,new C(y,b),o,a)},s.dividedToIntegerBy=s.idiv=function(y,b){return e(this,new C(y,b),0,1)},s.exponentiatedBy=s.pow=function(y,b){var E,I,S,N,R,O,F,U,q,$=this;if(y=new C(y),y.c&&!y.isInteger())throw Error(ti+"Exponent not an integer: "+M(y));if(b!=null&&(b=new C(b)),O=y.e>14,!$.c||!$.c[0]||$.c[0]==1&&!$.e&&$.c.length==1||!y.c||!y.c[0])return q=new C(Math.pow(+M($),O?y.s*(2-K0(y)):+M(y))),b?q.mod(b):q;if(F=y.s<0,b){if(b.c?!b.c[0]:!b.s)return new C(NaN);I=!F&&$.isInteger()&&b.isInteger(),I&&($=$.mod(b))}else{if(y.e>9&&($.e>0||$.e<-1||($.e==0?$.c[0]>1||O&&$.c[1]>=24e7:$.c[0]<8e13||O&&$.c[0]<=9999975e7)))return N=$.s<0&&K0(y)?-0:0,$.e>-1&&(N=1/N),new C(F?1/N:N);p&&(N=z_(p/We+2))}for(O?(E=new C(.5),F&&(y.s=1),U=K0(y)):(S=Math.abs(+M(y)),U=S%2),q=new C(i);;){if(U){if(q=q.times($),!q.c)break;N?q.c.length>N&&(q.c.length=N):I&&(q=q.mod(b))}if(S){if(S=Ui(S/2),S===0)break;U=S%2}else if(y=y.times(E),T(y,y.e+1,1),y.e>14)U=K0(y);else{if(S=+M(y),S===0)break;U=S%2}$=$.times($),N?$.c&&$.c.length>N&&($.c.length=N):I&&($=$.mod(b))}return I?q:(F&&(q=i.div(q)),b?q.mod(b):N?T(q,p,a,R):q)},s.integerValue=function(y){var b=new C(this);return y==null?y=a:fr(y,0,8),T(b,b.e+1,y)},s.isEqualTo=s.eq=function(y,b){return Rc(this,new C(y,b))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(y,b){return Rc(this,new C(y,b))>0},s.isGreaterThanOrEqualTo=s.gte=function(y,b){return(b=Rc(this,new C(y,b)))===1||b===0},s.isInteger=function(){return!!this.c&&Ki(this.e/We)>this.c.length-2},s.isLessThan=s.lt=function(y,b){return Rc(this,new C(y,b))<0},s.isLessThanOrEqualTo=s.lte=function(y,b){return(b=Rc(this,new C(y,b)))===-1||b===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(y,b){var E,I,S,N,R=this,O=R.s;if(y=new C(y,b),b=y.s,!O||!b)return new C(NaN);if(O!=b)return y.s=-b,R.plus(y);var F=R.e/We,U=y.e/We,q=R.c,$=y.c;if(!F||!U){if(!q||!$)return q?(y.s=-b,y):new C($?R:NaN);if(!q[0]||!$[0])return $[0]?(y.s=-b,y):new C(q[0]?R:a==3?-0:0)}if(F=Ki(F),U=Ki(U),q=q.slice(),O=F-U){for((N=O<0)?(O=-O,S=q):(U=F,S=$),S.reverse(),b=O;b--;S.push(0));S.reverse()}else for(I=(N=(O=q.length)<(b=$.length))?O:b,O=b=0;b<I;b++)if(q[b]!=$[b]){N=q[b]<$[b];break}if(N&&(S=q,q=$,$=S,y.s=-y.s),b=(I=$.length)-(E=q.length),b>0)for(;b--;q[E++]=0);for(b=ms-1;I>O;){if(q[--I]<$[I]){for(E=I;E&&!q[--E];q[E]=b);--q[E],q[I]+=ms}q[I]-=$[I]}for(;q[0]==0;q.splice(0,1),--U);return q[0]?B(y,q,U):(y.s=a==3?-1:1,y.c=[y.e=0],y)},s.modulo=s.mod=function(y,b){var E,I,S=this;return y=new C(y,b),!S.c||!y.s||y.c&&!y.c[0]?new C(NaN):!y.c||S.c&&!S.c[0]?new C(S):(f==9?(I=y.s,y.s=1,E=e(S,y,0,3),y.s=I,E.s*=I):E=e(S,y,0,f),y=S.minus(E.times(y)),!y.c[0]&&f==1&&(y.s=S.s),y)},s.multipliedBy=s.times=function(y,b){var E,I,S,N,R,O,F,U,q,$,V,z,ee,ce,re,ie=this,ue=ie.c,ye=(y=new C(y,b)).c;if(!ue||!ye||!ue[0]||!ye[0])return!ie.s||!y.s||ue&&!ue[0]&&!ye||ye&&!ye[0]&&!ue?y.c=y.e=y.s=null:(y.s*=ie.s,!ue||!ye?y.c=y.e=null:(y.c=[0],y.e=0)),y;for(I=Ki(ie.e/We)+Ki(y.e/We),y.s*=ie.s,F=ue.length,$=ye.length,F<$&&(ee=ue,ue=ye,ye=ee,S=F,F=$,$=S),S=F+$,ee=[];S--;ee.push(0));for(ce=ms,re=fu,S=$;--S>=0;){for(E=0,V=ye[S]%re,z=ye[S]/re|0,R=F,N=S+R;N>S;)U=ue[--R]%re,q=ue[R]/re|0,O=z*U+q*V,U=V*U+O%re*re+ee[N]+E,E=(U/ce|0)+(O/re|0)+z*q,ee[N--]=U%ce;ee[N]=E}return E?++I:ee.splice(0,1),B(y,ee,I)},s.negated=function(){var y=new C(this);return y.s=-y.s||null,y},s.plus=function(y,b){var E,I=this,S=I.s;if(y=new C(y,b),b=y.s,!S||!b)return new C(NaN);if(S!=b)return y.s=-b,I.minus(y);var N=I.e/We,R=y.e/We,O=I.c,F=y.c;if(!N||!R){if(!O||!F)return new C(S/0);if(!O[0]||!F[0])return F[0]?y:new C(O[0]?I:S*0)}if(N=Ki(N),R=Ki(R),O=O.slice(),S=N-R){for(S>0?(R=N,E=F):(S=-S,E=O),E.reverse();S--;E.push(0));E.reverse()}for(S=O.length,b=F.length,S-b<0&&(E=F,F=O,O=E,b=S),S=0;b;)S=(O[--b]=O[b]+F[b]+S)/ms|0,O[b]=ms===O[b]?0:O[b]%ms;return S&&(O=[S].concat(O),++R),B(y,O,R)},s.precision=s.sd=function(y,b){var E,I,S,N=this;if(y!=null&&y!==!!y)return fr(y,1,en),b==null?b=a:fr(b,0,8),T(new C(N),y,b);if(!(E=N.c))return null;if(S=E.length-1,I=S*We+1,S=E[S]){for(;S%10==0;S/=10,I--);for(S=E[0];S>=10;S/=10,I++);}return y&&N.e+1>I&&(I=N.e+1),I},s.shiftedBy=function(y){return fr(y,-J_,J_),this.times("1e"+y)},s.squareRoot=s.sqrt=function(){var y,b,E,I,S,N=this,R=N.c,O=N.s,F=N.e,U=o+4,q=new C("0.5");if(O!==1||!R||!R[0])return new C(!O||O<0&&(!R||R[0])?NaN:R?N:1/0);if(O=Math.sqrt(+M(N)),O==0||O==1/0?(b=Li(R),(b.length+F)%2==0&&(b+="0"),O=Math.sqrt(+b),F=Ki((F+1)/2)-(F<0||F%2),O==1/0?b="5e"+F:(b=O.toExponential(),b=b.slice(0,b.indexOf("e")+1)+F),E=new C(b)):E=new C(O+""),E.c[0]){for(F=E.e,O=F+U,O<3&&(O=0);;)if(S=E,E=q.times(S.plus(e(N,S,U,1))),Li(S.c).slice(0,O)===(b=Li(E.c)).slice(0,O))if(E.e<F&&--O,b=b.slice(O-3,O+1),b=="9999"||!I&&b=="4999"){if(!I&&(T(S,S.e+o+2,0),S.times(S).eq(N))){E=S;break}U+=4,O+=4,I=1}else{(!+b||!+b.slice(1)&&b.charAt(0)=="5")&&(T(E,E.e+o+2,1),y=!E.times(E).eq(N));break}}return T(E,E.e+o+1,a,y)},s.toExponential=function(y,b){return y!=null&&(fr(y,0,en),y++),v(this,y,b,1)},s.toFixed=function(y,b){return y!=null&&(fr(y,0,en),y=y+this.e+1),v(this,y,b)},s.toFormat=function(y,b,E){var I,S=this;if(E==null)y!=null&&b&&typeof b=="object"?(E=b,b=null):y&&typeof y=="object"?(E=y,y=b=null):E=g;else if(typeof E!="object")throw Error(ti+"Argument not an object: "+E);if(I=S.toFixed(y,b),S.c){var N,R=I.split("."),O=+E.groupSize,F=+E.secondaryGroupSize,U=E.groupSeparator||"",q=R[0],$=R[1],V=S.s<0,z=V?q.slice(1):q,ee=z.length;if(F&&(N=O,O=F,F=N,ee-=N),O>0&&ee>0){for(N=ee%O||O,q=z.substr(0,N);N<ee;N+=O)q+=U+z.substr(N,O);F>0&&(q+=U+z.slice(N)),V&&(q="-"+q)}I=$?q+(E.decimalSeparator||"")+((F=+E.fractionGroupSize)?$.replace(new RegExp("\\d{"+F+"}\\B","g"),"$&"+(E.fractionGroupSeparator||"")):$):q}return(E.prefix||"")+I+(E.suffix||"")},s.toFraction=function(y){var b,E,I,S,N,R,O,F,U,q,$,V,z=this,ee=z.c;if(y!=null&&(O=new C(y),!O.isInteger()&&(O.c||O.s!==1)||O.lt(i)))throw Error(ti+"Argument "+(O.isInteger()?"out of range: ":"not an integer: ")+M(O));if(!ee)return new C(z);for(b=new C(i),U=E=new C(i),I=F=new C(i),V=Li(ee),N=b.e=V.length-z.e-1,b.c[0]=G_[(R=N%We)<0?We+R:R],y=!y||O.comparedTo(b)>0?N>0?b:U:O,R=d,d=1/0,O=new C(V),F.c[0]=0;q=e(O,b,0,1),S=E.plus(q.times(I)),S.comparedTo(y)!=1;)E=I,I=S,U=F.plus(q.times(S=U)),F=S,b=O.minus(q.times(S=b)),O=S;return S=e(y.minus(E),I,0,1),F=F.plus(S.times(U)),E=E.plus(S.times(I)),F.s=U.s=z.s,N=N*2,$=e(U,I,N,a).minus(z).abs().comparedTo(e(F,E,N,a).minus(z).abs())<1?[U,I]:[F,E],d=R,$},s.toNumber=function(){return+M(this)},s.toPrecision=function(y,b){return y!=null&&fr(y,1,en),v(this,y,b,2)},s.toString=function(y){var b,E=this,I=E.s,S=E.e;return S===null?I?(b="Infinity",I<0&&(b="-"+b)):b="NaN":(y==null?b=S<=u||S>=c?V0(Li(E.c),S):da(Li(E.c),S,"0"):y===10&&P?(E=T(new C(E),o+S+1,a),b=da(Li(E.c),E.e,"0")):(fr(y,2,w.length,"Base"),b=r(da(Li(E.c),S,"0"),10,y,I,!0)),I<0&&E.c[0]&&(b="-"+b)),b},s.valueOf=s.toJSON=function(){return M(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,t!=null&&C.set(t),C}function Ki(t){var e=t|0;return t>0||t===e?e:e-1}function Li(t){for(var e,r,n=1,s=t.length,i=t[0]+"";n<s;){for(e=t[n++]+"",r=We-e.length;r--;e="0"+e);i+=e}for(s=i.length;i.charCodeAt(--s)===48;);return i.slice(0,s+1||1)}function Rc(t,e){var r,n,s=t.c,i=e.c,o=t.s,a=e.s,u=t.e,c=e.e;if(!o||!a)return null;if(r=s&&!s[0],n=i&&!i[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=u==c,!s||!i)return n?0:!s^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=s.length)<(c=i.length)?u:c,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^r?1:-1;return u==c?0:u>c^r?1:-1}function fr(t,e,r,n){if(t<e||t>r||t!==Ui(t))throw Error(ti+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function K0(t){var e=t.c.length-1;return Ki(t.e/We)==e&&t.c[e]%2!=0}function V0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function da(t,e,r){var n,s;if(e<0){for(s=r+".";++e;s+=r);t=s+t}else if(n=t.length,++e>n){for(s=r,e-=n;--e;s+=r);t+=s}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var eh=eI();var tI=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},hQ=new kr,ys=class{static sign(e){return tI(this,void 0,void 0,function*(){let{signerDid:r,payload:n}=e,s=yield r.getSigner(),i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);let o={typ:"JWT",alg:s.algorithm,kid:i},a=ne.object(o).toBase64Url(),u=ne.object(n).toBase64Url(),c=`${a}.${u}`,l=ne.string(c).toUint8Array(),d=yield s.sign({data:l}),h=ne.uint8Array(d).toBase64Url();return`${c}.${h}`})}static verify(e){return tI(this,void 0,void 0,function*(){let{decoded:r,encoded:n}=ys.parse({jwt:e.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");let s=yield ys.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);let i=s.contentStream;if(!i||!Bp.isDidVerificationMethod(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");let o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");let a=`${n.header}.${n.payload}`,u=ne.string(a).toUint8Array(),c=ne.base64Url(n.signature).toUint8Array();if(!(yield hQ.verify({key:o,signature:c,data:u})))throw new Error("Signature verification failed: Integrity mismatch");return r})}static parse(e){let r=e.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);let[n,s,i]=r,o,a;try{o=ne.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.typ||o.typ!=="JWT")throw new Error("Verification failed: Expected JWT header to contain typ property set to JWT");if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=ne.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}};ys.didResolver=new Od({didResolvers:[Ni,so,Zn,Mi,la]});var hl=ui(r7(),1),bm=class{static selectCredentials({vcJwts:e,presentationDefinition:r}){var n,s;this.resetPex();let i=this.pex.selectFrom(r,e);return((n=i.errors)===null||n===void 0?void 0:n.length)!==0?[]:Array.from(new Set((s=i.verifiableCredential)!==null&&s!==void 0?s:[]))}static satisfiesPresentationDefinition({vcJwts:e,presentationDefinition:r}){var n,s,i;this.resetPex();let o=this.pex.evaluateCredentials(r,e);if(!((n=o.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(o.warnings)),o.areRequiredCredentialsPresent.toString()!=="info"||!((s=o.errors)===null||s===void 0)&&s.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw o.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(o.areRequiredCredentialsPresent)),!((i=o.errors)===null||i===void 0)&&i.length&&(a+="Errors: "+JSON.stringify(o.errors)),new Error(a)}}static createPresentationFromCredentials({vcJwts:e,presentationDefinition:r}){var n,s,i;this.resetPex();let o=hl.PEX.validateDefinition(r);n7(o);let a=this.pex.evaluateCredentials(r,e);if(!((n=a.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(a.warnings)),a.areRequiredCredentialsPresent.toString()!=="info"||!((s=a.errors)===null||s===void 0)&&s.length){let l="Failed to create Verifiable Presentation JWT due to: ";throw a.areRequiredCredentialsPresent&&(l+="Required Credentials Not Present: "+JSON.stringify(a.areRequiredCredentialsPresent)),!((i=a.errors)===null||i===void 0)&&i.length&&(l+="Errors: "+JSON.stringify(a.errors)),new Error(l)}let u=this.pex.presentationFrom(r,e),c=hl.PEX.validateSubmission(u.presentationSubmission);return n7(c),u}static validateDefinition({presentationDefinition:e}){return hl.PEX.validateDefinition(e)}static validateSubmission({presentationSubmission:e}){return hl.PEX.validateSubmission(e)}static evaluatePresentation({presentationDefinition:e,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(e,r)}static resetPex(){this.pex=new hl.PEX}};bm.pex=new hl.PEX;function n7(t){let e="Failed to pass validation check due to: ";if(Array.isArray(t)){if(!t.every(r=>r.status==="info"))throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}else if(t.status!=="info")throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}var Hx={};ar(Hx,{getCurrentXmlSchema112Timestamp:()=>Ux,getFutureXmlSchema112Timestamp:()=>nhe,getXmlSchema112Timestamp:()=>vb,isValidRFC3339Timestamp:()=>Vx,isValidXmlSchema112Timestamp:()=>Kx});function Ux(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function vb(t){return new Date(t*1e3).toISOString().replace(/\.\d{3}/,"")}function nhe(t){return new Date(Date.now()+t*1e3).toISOString().replace(/\.\d+Z$/,"Z")}function Kx(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}function Vx(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}var Wx="VerifiablePresentation";var Ta=class{static validateCredentialPayload(e){this.validateContext(e.vcDataModel["@context"]),this.validateVcType(e.type),this.validateCredentialSubject(e.vcDataModel.credentialSubject),e.vcDataModel.issuanceDate&&this.validateTimestamp(e.vcDataModel.issuanceDate),e.vcDataModel.expirationDate&&this.validateTimestamp(e.vcDataModel.expirationDate)}static validateContext(e){let r=this.asArray(e);if(r.length<1||r.indexOf(wm)===-1)throw new Error(`@context is missing default context "${wm}"`)}static validateVcType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Of)===-1)throw new Error(`type is missing default "${Of}"`)}static validateVpType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Wx)===-1)throw new Error(`type is missing default "${Wx}"`)}static validateCredentialSubject(e){if(Object.keys(e).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(e){if(!Kx(e)&&!Vx(e))throw new Error("timestamp is not valid xml schema 112 timestamp")}static asArray(e){return Array.isArray(e)?e:[e]}};var zx=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},wm="https://www.w3.org/2018/credentials/v1",Of="VerifiableCredential",xo=class{constructor(e){this.vcDataModel=e}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}sign(e){return zx(this,void 0,void 0,function*(){return yield ys.sign({signerDid:e.did,payload:Object.assign({vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:e.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3)},this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)})})})}toString(){return JSON.stringify(this.vcDataModel)}static create(e){return zx(this,void 0,void 0,function*(){let{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,evidence:u}=e,c=JSON.parse(JSON.stringify(i));if(typeof c!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");let l=Object.assign({id:s},c),d=Object.assign(Object.assign({"@context":[wm],type:Array.isArray(r)?[Of,...r]:r?[Of,r]:[Of],id:`urn:uuid:${eu.randomUuid()}`,issuer:n,issuanceDate:o||Ux(),credentialSubject:l},a&&{expirationDate:a}),u&&{evidence:u});return Jx(d),new xo(d)})}static verify({vcJwt:e}){return zx(this,void 0,void 0,function*(){let{payload:r}=yield ys.verify({jwt:e}),{exp:n,iss:s,nbf:i,jti:o,sub:a,vc:u}=r;if(!u)throw new Error("vc property missing.");let c=r.vc;if(n&&c.expirationDate&&n!==Math.floor(new Date(c.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(n&&(c.expirationDate=vb(n)),!s)throw new Error("Verification failed: iss claim is required");if(s!==c.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(i&&i>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(i&&c.issuanceDate&&i!==Math.floor(new Date(c.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(i&&(c.issuanceDate=vb(i)),a&&!Array.isArray(c.credentialSubject)&&a!==c.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(a&&!Array.isArray(c.credentialSubject)&&(c.credentialSubject.id=a),o&&o!==c.id)throw new Error("Verification failed: jti claim does not match id");return o&&(c.id=o),Jx(c),{issuer:r.iss,subject:r.sub,vc:c}})}static parseJwt({vcJwt:e}){let n=ys.parse({jwt:e}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return Jx(n),new xo(n)}};function Jx(t){Ta.validateContext(t["@context"]),Ta.validateVcType(t.type),Ta.validateCredentialSubject(t.credentialSubject),t.issuanceDate&&Ta.validateTimestamp(t.issuanceDate),t.expirationDate&&Ta.validateTimestamp(t.expirationDate)}var i7=ui(Mv(),1);var wn=class extends Hr{validNext=new Set(["quote","close"]);kind="rfq";metadata;data;privateData;constructor(e,r,n,s){super(e,r,n),this.metadata=e,this.data=r,this.privateData=s}static async parse(e,r){let n=Nr.rawToMessageModel(e),s=new wn(n.metadata,n.data,n.signature,n.privateData);return await s.verify(),r?.requireAllPrivateData?s.verifyAllPrivateData():s.verifyPresentPrivateData(),s}validate(){super.validate(),this.privateData!==void 0&&du(this.privateData,"rfqPrivate")}static create(e){let r=Hr.generateId("rfq"),n={...e.metadata,kind:"rfq",id:r,exchangeId:r,createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},{data:s,privateData:i}=wn.hashPrivateData(e.data),o=new wn(n,s,void 0,i);return o.validateData(),o}static hashPrivateData(e){let r=ne.uint8Array(gE(16)).toBase64Url(),{claims:n,payin:s,payout:i,...o}=e,{paymentDetails:a,...u}=s,{paymentDetails:c,...l}=i,d={...o,payin:u,payout:l};return a!==void 0&&(d.payin.paymentDetailsHash=wn.digestPrivateData(r,a)),c!==void 0&&(d.payout.paymentDetailsHash=wn.digestPrivateData(r,c)),n!==void 0&&n?.length>0&&(d.claimsHash=wn.digestPrivateData(r,n)),{data:d,privateData:{salt:r,payin:{paymentDetails:a},payout:{paymentDetails:c},claims:n}}}verifyAllPrivateData(){if(this.privateData===void 0)throw new Error("Could not verify all privateData because privateData property is missing");this.data.payin.paymentDetailsHash!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&this.verifyClaimsHash()}verifyPresentPrivateData(){this.data.payin.paymentDetailsHash!==void 0&&this.privateData?.payin?.paymentDetails!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&this.privateData?.payout?.paymentDetails!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&this.privateData?.claims!==void 0&&this.verifyClaimsHash()}verifyPayinDetailsHash(){if(wn.digestPrivateData(this.privateData.salt,this.privateData?.payin?.paymentDetails)!==this.data.payin.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payin.paymentDetailsHash does not match digest of privateData.payin.paymentDetails")}verifyPayoutDetailsHash(){if(wn.digestPrivateData(this.privateData.salt,this.privateData?.payout?.paymentDetails)!==this.data.payout.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payout.paymentDetailsHash does not match digest of privateData.payout.paymentDetails")}verifyClaimsHash(){let e=this.data.claimsHash,r=this.privateData?.claims;if(wn.digestPrivateData(this.privateData.salt,r)!==e)throw new Error("Private data integrity check failed: data.claimsHash does not match digest of privateData.claims")}static digestPrivateData(e,r){let n=[e,r],s=yi.digest(n);return ne.uint8Array(s).toBase64Url()}async verifyOfferingRequirements(e){if(e.metadata.protocol!==this.metadata.protocol)throw new Error(`protocol version mismatch. (rfq) ${this.metadata.protocol} !== ${e.metadata.protocol} (offering)`);if(e.metadata.id!==this.data.offeringId)throw new Error(`offering id mismatch. (rfq) ${this.data.offeringId} !== ${e.metadata.id} (offering)`);let r;if(e.data.payin.max){r=eh(this.data.payin.amount);let n=eh(e.data.payin.max);if(r.isGreaterThan(n))throw new Error(`rfq payinAmount exceeds offering's maxAmount. (rfq) ${this.data.payin.amount} > ${e.data.payin.max} (offering)`)}if(e.data.payin.min){r??=eh(this.data.payin.amount);let n=eh(e.data.payin.min);if(r.isLessThan(n))throw new Error(`rfq payinAmount is below offering's minAmount. (rfq) ${this.data.payin.amount} > ${e.data.payin.min} (offering)`)}this.verifyPaymentMethod(this.data.payin.kind,this.data.payin.paymentDetailsHash,this.privateData?.payin?.paymentDetails,e.data.payin.methods,"payin"),this.verifyPaymentMethod(this.data.payout.kind,this.data.payout.paymentDetailsHash,this.privateData?.payout?.paymentDetails,e.data.payout.methods,"payout"),await this.verifyClaims(e)}verifyPaymentMethod(e,r,n,s,i){let o=s.filter(c=>c.kind===e);if(!o.length){let c=s.map(l=>l.kind).join(", ");throw new Error(`offering does not support rfq's ${i}Method kind. (rfq) ${e} was not found in: [${c}] (offering)`)}let a=new i7.default.default,u=new Set;for(let c of o)if(c.requiredPaymentDetails){let l=a.compile(c.requiredPaymentDetails);if(l(n))return;u.add(l.errors)}else{if(r===void 0)return;u.add(new Error("paymentDetails must be omitted when requiredPaymentDetails is omitted"))}throw new Error(`rfq ${i}Method paymentDetails could not be validated against offering requiredPaymentDetails. Schema validation errors: ${Array.from(u).join()}`)}async verifyClaims(e){if(!e.data.requiredClaims)return;let r=bm.selectCredentials({vcJwts:this.privateData?.claims??[],presentationDefinition:e.data.requiredClaims});if(r.length===0)throw new Error("claims do not fulfill the offering's requirements");for(let n of r)await xo.verify({vcJwt:n})}toJSON(){let e=super.toJSON();return this.privateData!==void 0&&(e.privateData=this.privateData),e}};var Nu=class extends Hr{validNext=new Set(["order","close"]);kind="quote";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=Nr.rawToMessageModel(e),n=new Nu(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"quote",id:Hr.generateId("quote"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Nu(r,e.data);return n.validateData(),n}};var Mu=class extends Hr{validNext=new Set(["orderstatus"]);kind="order";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=Nr.rawToMessageModel(e),n=new Mu(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"order",id:Hr.generateId("order"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Mu(r,{});return n.validateData(),n}};var ju=class extends Hr{validNext=new Set(["orderstatus","close"]);kind="orderstatus";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=Nr.rawToMessageModel(e),n=new ju(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"orderstatus",id:Hr.generateId("orderstatus"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new ju(r,e.data);return n.validateData(),n}get orderStatus(){return this.data.orderStatus}};var qu=class extends Hr{validNext=new Set([]);kind="close";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=Nr.rawToMessageModel(e),n=new qu(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"close",id:Hr.generateId("close"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new qu(r,e.data);return n.validateData(),n}get reason(){return this.data.reason}};var Nr=class{constructor(){}static async parseMessage(e){let r=Nr.rawToMessageModel(e),n;switch(r.metadata.kind){case"rfq":n=new wn(r.metadata,r.data,r.signature,r.privateData);break;case"quote":n=new Nu(r.metadata,r.data,r.signature);break;case"order":n=new Mu(r.metadata,r.data,r.signature);break;case"orderstatus":n=new ju(r.metadata,r.data,r.signature);break;case"close":n=new qu(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized message kind (${r.metadata.kind})`)}return await n.verify(),n}static async parseResource(e){let r=Nr.rawToResourceModel(e),n;switch(r.metadata.kind){case"offering":n=new Co(r.metadata,r.data,r.signature);break;case"balance":n=new Po(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized resource kind (${r.metadata.kind})`)}return await n.verify(),n}static rawToMessageModel(e){try{return typeof e=="string"?JSON.parse(e):e}catch(r){let n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse message. Error: ${n}`)}}static rawToResourceModel(e){try{return typeof e=="string"?JSON.parse(e):e}catch(r){let n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse resource. Error: ${n}`)}}};var Co=class extends qi{kind="offering";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=Nr.rawToResourceModel(e),n=new Co(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"offering",id:qi.generateId("offering"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Co(r,e.data);return n.validateData(),n}};var Po=class extends qi{kind="balance";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=Nr.rawToResourceModel(e),n=new Po(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"balance",id:qi.generateId("balance"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Po(r,e.data);return n.validateData(),n}};var Gx=class{rfq;quote;order;orderstatus;close;constructor(){this.orderstatus=[]}addMessages(e){let r=e.sort((n,s)=>{let i=new Date(n.metadata.createdAt).getTime(),o=new Date(s.metadata.createdAt).getTime();return i-o});for(let n of r)this.addNextMessage(n)}addNextMessage(e){if(this.protocol!==void 0&&e.metadata.protocol!==this.protocol)throw new Error(`Could not add message (${e.metadata.id}) with protocol version ${e.metadata.protocol} to exchange because it does not have matching protocol version ${this.protocol} as other messages in the exchange`);if(!this.isValidNext(e.metadata.kind))throw new Error(`Could not add message (${e.metadata.id}) to exchange because ${e.metadata.kind} is not a valid next message`);if(this.exchangeId!==void 0&&e.metadata.exchangeId!==this.exchangeId)throw new Error(`Could not add message (${e.metadata.id}) with exchange id ${e.metadata.exchangeId} to exchange because it does not have matching exchange id ${this.exchangeId} as the exchange`);if(e.isRfq())this.rfq=e;else if(e.isQuote())this.quote=e;else if(e.isClose())this.close=e;else if(e.isOrder())this.order=e;else if(e.isOrderStatus())this.orderstatus.push(e);else throw new Error("Unrecognized message kind")}isValidNext(e){return(this.latestMessage?.validNext??new Set(["rfq"])).has(e)}get latestMessage(){return this.close??this.orderstatus[this.orderstatus.length-1]??this.order??this.quote??this.rfq}get exchangeId(){return this.rfq?.metadata?.exchangeId}get protocol(){return this.rfq?.metadata?.protocol}get messages(){return[this.rfq,this.quote,this.order,...this.orderstatus,this.close].filter(r=>r!==void 0)}};var ml=class{static createOffering(e){return Co.create({metadata:{from:e?.from??"did:ex:pfi"},data:e?.offeringData??ml.createOfferingData()})}static createOfferingData(){return{description:"Selling BTC for USD",payin:{currencyCode:"USD",min:"0.0",max:"999999.99",methods:[{kind:"DEBIT_CARD",requiredPaymentDetails:{$schema:"http://json-schema.org/draft-07/schema",type:"object",properties:{cardNumber:{type:"string",description:"The 16-digit debit card number",minLength:16,maxLength:16},expiryDate:{type:"string",description:"The expiry date of the card in MM/YY format",pattern:"^(0[1-9]|1[0-2])\\/([0-9]{2})$"},cardHolderName:{type:"string",description:"Name of the cardholder as it appears on the card"},cvv:{type:"string",description:"The 3-digit CVV code",minLength:3,maxLength:3}},required:["cardNumber","expiryDate","cardHolderName","cvv"],additionalProperties:!1}}]},payout:{currencyCode:"BTC",max:"999526.11",methods:[{kind:"BTC_ADDRESS",requiredPaymentDetails:{$schema:"http://json-schema.org/draft-07/schema",type:"object",properties:{btcAddress:{type:"string",description:"your Bitcoin wallet address"}},required:["btcAddress"],additionalProperties:!1},estimatedSettlementTime:10}]},payoutUnitsPerPayinUnit:"0.00003826",requiredClaims:{id:"7ce4004c-3c38-4853-968b-e411bafcd945",input_descriptors:[{id:"bbdb9b7c-5754-4f46-b63b-590bada959e0",constraints:{fields:[{path:["$.type[*]"],filter:{type:"string",pattern:"^YoloCredential$"}}]}}]}}}static createBalance(e){return Po.create({metadata:{from:e?.from??"did:ex:pfi"},data:e?.balanceData??ml.createBalanceData()})}static createBalanceData(){return{currencyCode:"USD",available:"400.00"}}static createQuoteData(){return{expiresAt:new Date().toISOString(),payin:{currencyCode:"BTC",amount:"0.01",fee:"0.0001",paymentInstruction:{link:"tbdex.io/example",instruction:"Fake instruction"}},payout:{currencyCode:"USD",amount:"1000.00",paymentInstruction:{link:"tbdex.io/example",instruction:"Fake instruction"}}}}static async createRfq(e){let{sender:r,receiver:n}=e,s=await ml.createRfqData(e);return wn.create({metadata:{from:r.uri,to:n?.uri??"did:ex:pfi"},data:s})}static async createRfqData(e){let r="";return e?.sender&&(r=await(await xo.create({type:"YoloCredential",issuer:e.sender.uri,subject:e.sender.uri,data:{beep:"boop"}})).sign({did:e.sender})),{offeringId:qi.generateId("offering"),payin:{kind:"DEBIT_CARD",amount:"200.00",paymentDetails:{cardNumber:"1234567890123456",expiryDate:"12/22",cardHolderName:"Ephraim Bartholomew Winthrop",cvv:"123"}},payout:{kind:"BTC_ADDRESS",paymentDetails:{btcAddress:"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa"}},claims:[r]}}};return Rf(ihe);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

typeid-js/dist/chunk-FOHWUNKU.mjs:
  (*! Bundled license information:
  
  uuidv7/dist/index.js:
    (**
     * uuidv7: An experimental implementation of the proposed UUID Version 7
     *
     * @license Apache-2.0
     * @copyright 2021-2023 LiosK
     * @packageDocumentation
     *)
  *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)
*/
//# sourceMappingURL=browser.js.map
