"use strict";var tbDEX=(()=>{var G7=Object.create;var Lm=Object.defineProperty;var X7=Object.getOwnPropertyDescriptor;var Y7=Object.getOwnPropertyNames;var Z7=Object.getPrototypeOf,Q7=Object.prototype.hasOwnProperty;var SC=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var Ot=(t,e)=>()=>(t&&(e=t(t=0)),e);var D=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Zt=(t,e)=>{for(var r in e)Lm(t,r,{get:e[r],enumerable:!0})},AC=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Y7(e))!Q7.call(t,s)&&s!==r&&Lm(t,s,{get:()=>e[s],enumerable:!(n=X7(e,s))||n.enumerable});return t};var Kn=(t,e,r)=>(r=t!=null?G7(Z7(t)):{},AC(e||!t||!t.__esModule?Lm(r,"default",{value:t,enumerable:!0}):r,t)),Yf=t=>AC(Lm({},"__esModule",{value:!0}),t);var $C=D((Pme,FC)=>{var lL=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,zm=()=>lL.now(),dL=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Ub=t=>t===1/0||dL(t),Qf=class{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:s=!1,noUpdateTTL:i=!1,dispose:o,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!Ub(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!Ub(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!s,this.noUpdateTTL=!!i,this.noDisposeOnSet=!!a,o!==void 0){if(typeof o!="function")throw new TypeError("dispose must be function if set");this.dispose=o}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let s in this.expirations){this.setTimer(s,s-zm());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==Qf.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let s=this.expirations[n];!s||s.length<=1?delete this.expirations[n]:this.expirations[n]=s.filter(i=>i!==e)}if(r!==1/0){let s=Math.floor(zm()+r);this.expirationMap.set(e,s),this.expirations[s]||(this.expirations[s]=[],this.setTimer(s,r)),this.expirations[s].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:s=this.noUpdateTTL,noDisposeOnSet:i=this.noDisposeOnSet}={}){if(!Ub(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){s||this.setTTL(e,n);let o=this.data.get(e);o!==r&&(this.data.set(e,r),i||this.dispose(o,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-zm())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:s=this.checkAgeOnGet}={}){let i=this.data.get(e);if(s&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),i}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let s=this.expirations[r];return s&&(s.length<=1?delete this.expirations[r]:this.expirations[r]=s.filter(i=>i!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let s of r)n.push([s,this.data.get(s)]),this.data.delete(s),this.expirationMap.delete(s);for(let[s,i]of n)this.dispose(i,s,"evict")}else{let n=this.size-this.max,s=[];for(let i of r.splice(0,n))s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(zm());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],s=[];delete this.expirations[r];for(let i of n)s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};FC.exports=Qf});var ZC=D(YC=>{"use strict";YC.supports=function(...e){let r=e.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var us=D((wye,QC)=>{"use strict";QC.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var rP=D(Gm=>{"use strict";Gm.byteLength=KL;Gm.toByteArray=WL;Gm.fromByteArray=GL;var qs=[],Ci=[],VL=typeof Uint8Array<"u"?Uint8Array:Array,e1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(nc=0,eP=e1.length;nc<eP;++nc)qs[nc]=e1[nc],Ci[e1.charCodeAt(nc)]=nc;var nc,eP;Ci["-".charCodeAt(0)]=62;Ci["_".charCodeAt(0)]=63;function tP(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function KL(t){var e=tP(t),r=e[0],n=e[1];return(r+n)*3/4-n}function HL(t,e,r){return(e+r)*3/4-r}function WL(t){var e,r=tP(t),n=r[0],s=r[1],i=new VL(HL(t,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)e=Ci[t.charCodeAt(u)]<<18|Ci[t.charCodeAt(u+1)]<<12|Ci[t.charCodeAt(u+2)]<<6|Ci[t.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=Ci[t.charCodeAt(u)]<<2|Ci[t.charCodeAt(u+1)]>>4,i[o++]=e&255),s===1&&(e=Ci[t.charCodeAt(u)]<<10|Ci[t.charCodeAt(u+1)]<<4|Ci[t.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function zL(t){return qs[t>>18&63]+qs[t>>12&63]+qs[t>>6&63]+qs[t&63]}function JL(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(zL(n));return s.join("")}function GL(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(JL(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(qs[e>>2]+qs[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(qs[e>>10]+qs[e>>4&63]+qs[e<<2&63]+"=")),s.join("")}});var nP=D(t1=>{t1.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?s-1:0,h=r?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=h,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+d],d+=h,l-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-c}return(f?-1:1)*o*Math.pow(2,i-n)};t1.write=function(t,e,r,n,s,i){var o,a,u,c=i*8-s-1,l=(1<<c)-1,d=l>>1,h=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=h/u:e+=h*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*u-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=p,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[r+f]=o&255,f+=p,o/=256,c-=8);t[r+f-p]|=y*128}});var Pi=D(Vl=>{"use strict";var r1=rP(),Ll=nP(),iP=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Vl.Buffer=Y;Vl.SlowBuffer=tU;Vl.INSPECT_MAX_BYTES=50;var Xm=2147483647;Vl.kMaxLength=Xm;Y.TYPED_ARRAY_SUPPORT=XL();!Y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function XL(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(Y.prototype,"parent",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.buffer}});Object.defineProperty(Y.prototype,"offset",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.byteOffset}});function jo(t){if(t>Xm)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,Y.prototype),e}function Y(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o1(t)}return uP(t,e,r)}Y.poolSize=8192;function uP(t,e,r){if(typeof t=="string")return ZL(t,e);if(ArrayBuffer.isView(t))return QL(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Ms(t,ArrayBuffer)||t&&Ms(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ms(t,SharedArrayBuffer)||t&&Ms(t.buffer,SharedArrayBuffer)))return i1(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return Y.from(n,e,r);let s=eU(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return Y.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}Y.from=function(t,e,r){return uP(t,e,r)};Object.setPrototypeOf(Y.prototype,Uint8Array.prototype);Object.setPrototypeOf(Y,Uint8Array);function cP(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function YL(t,e,r){return cP(t),t<=0?jo(t):e!==void 0?typeof r=="string"?jo(t).fill(e,r):jo(t).fill(e):jo(t)}Y.alloc=function(t,e,r){return YL(t,e,r)};function o1(t){return cP(t),jo(t<0?0:a1(t)|0)}Y.allocUnsafe=function(t){return o1(t)};Y.allocUnsafeSlow=function(t){return o1(t)};function ZL(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Y.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=lP(t,e)|0,n=jo(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function n1(t){let e=t.length<0?0:a1(t.length)|0,r=jo(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function QL(t){if(Ms(t,Uint8Array)){let e=new Uint8Array(t);return i1(e.buffer,e.byteOffset,e.byteLength)}return n1(t)}function i1(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,Y.prototype),n}function eU(t){if(Y.isBuffer(t)){let e=a1(t.length)|0,r=jo(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||c1(t.length)?jo(0):n1(t);if(t.type==="Buffer"&&Array.isArray(t.data))return n1(t.data)}function a1(t){if(t>=Xm)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Xm.toString(16)+" bytes");return t|0}function tU(t){return+t!=t&&(t=0),Y.alloc(+t)}Y.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==Y.prototype};Y.compare=function(e,r){if(Ms(e,Uint8Array)&&(e=Y.from(e,e.offset,e.byteLength)),Ms(r,Uint8Array)&&(r=Y.from(r,r.offset,r.byteLength)),!Y.isBuffer(e)||!Y.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==r[i]){n=e[i],s=r[i];break}return n<s?-1:s<n?1:0};Y.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Y.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Y.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let s=Y.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let o=e[n];if(Ms(o,Uint8Array))i+o.length>s.length?(Y.isBuffer(o)||(o=Y.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(Y.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function lP(t,e){if(Y.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ms(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return s1(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return bP(t).length;default:if(s)return n?-1:s1(t).length;e=(""+e).toLowerCase(),s=!0}}Y.byteLength=lP;function rU(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return fU(this,e,r);case"utf8":case"utf-8":return fP(this,e,r);case"ascii":return lU(this,e,r);case"latin1":case"binary":return dU(this,e,r);case"base64":return uU(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pU(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}Y.prototype._isBuffer=!0;function ic(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}Y.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)ic(this,r,r+1);return this};Y.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)ic(this,r,r+3),ic(this,r+1,r+2);return this};Y.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)ic(this,r,r+7),ic(this,r+1,r+6),ic(this,r+2,r+5),ic(this,r+3,r+4);return this};Y.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?fP(this,0,e):rU.apply(this,arguments)};Y.prototype.toLocaleString=Y.prototype.toString;Y.prototype.equals=function(e){if(!Y.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Y.compare(this,e)===0};Y.prototype.inspect=function(){let e="",r=Vl.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};iP&&(Y.prototype[iP]=Y.prototype.inspect);Y.prototype.compare=function(e,r,n,s,i){if(Ms(e,Uint8Array)&&(e=Y.from(e,e.offset,e.byteLength)),!Y.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),r<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;let o=i-s,a=n-r,u=Math.min(o,a),c=this.slice(s,i),l=e.slice(r,n);for(let d=0;d<u;++d)if(c[d]!==l[d]){o=c[d],a=l[d];break}return o<a?-1:a<o?1:0};function dP(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,c1(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=Y.from(e,n)),Y.isBuffer(e))return e.length===0?-1:sP(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):sP(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function sP(t,e,r,n,s){let i=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,o/=2,a/=2,r/=2}function u(l,d){return i===1?l[d]:l.readUInt16BE(d*i)}let c;if(s){let l=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===a)return l*i}else l!==-1&&(c-=c-l),l=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let l=!0;for(let d=0;d<a;d++)if(u(t,c+d)!==u(e,d)){l=!1;break}if(l)return c}return-1}Y.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};Y.prototype.indexOf=function(e,r,n){return dP(this,e,r,n,!0)};Y.prototype.lastIndexOf=function(e,r,n){return dP(this,e,r,n,!1)};function nU(t,e,r,n){r=Number(r)||0;let s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;let i=e.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(c1(a))return o;t[r+o]=a}return o}function iU(t,e,r,n){return Ym(s1(e,t.length-r),t,r,n)}function sU(t,e,r,n){return Ym(gU(e),t,r,n)}function oU(t,e,r,n){return Ym(bP(e),t,r,n)}function aU(t,e,r,n){return Ym(vU(e,t.length-r),t,r,n)}Y.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return nU(this,e,r,n);case"utf8":case"utf-8":return iU(this,e,r,n);case"ascii":case"latin1":case"binary":return sU(this,e,r,n);case"base64":return oU(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return aU(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};Y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function uU(t,e,r){return e===0&&r===t.length?r1.fromByteArray(t):r1.fromByteArray(t.slice(e,r))}function fP(t,e,r){r=Math.min(t.length,r);let n=[],s=e;for(;s<r;){let i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=r){let u,c,l,d;switch(a){case 1:i<128&&(o=i);break;case 2:u=t[s+1],(u&192)===128&&(d=(i&31)<<6|u&63,d>127&&(o=d));break;case 3:u=t[s+1],c=t[s+2],(u&192)===128&&(c&192)===128&&(d=(i&15)<<12|(u&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=t[s+1],c=t[s+2],l=t[s+3],(u&192)===128&&(c&192)===128&&(l&192)===128&&(d=(i&15)<<18|(u&63)<<12|(c&63)<<6|l&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return cU(n)}var oP=4096;function cU(t){let e=t.length;if(e<=oP)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=oP));return r}function lU(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function dU(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function fU(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let i=e;i<r;++i)s+=bU[t[i]];return s}function pU(t,e,r){let n=t.slice(e,r),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}Y.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let s=this.subarray(e,r);return Object.setPrototypeOf(s,Y.prototype),s};function Yr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}Y.prototype.readUintLE=Y.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Yr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return s};Y.prototype.readUintBE=Y.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Yr(e,r,this.length);let s=this[e+--r],i=1;for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s};Y.prototype.readUint8=Y.prototype.readUInt8=function(e,r){return e=e>>>0,r||Yr(e,1,this.length),this[e]};Y.prototype.readUint16LE=Y.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Yr(e,2,this.length),this[e]|this[e+1]<<8};Y.prototype.readUint16BE=Y.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Yr(e,2,this.length),this[e]<<8|this[e+1]};Y.prototype.readUint32LE=Y.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Yr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Y.prototype.readUint32BE=Y.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Yr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Y.prototype.readBigUInt64LE=Ka(function(e){e=e>>>0,Ul(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ip(e,this.length-8);let s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});Y.prototype.readBigUInt64BE=Ka(function(e){e=e>>>0,Ul(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ip(e,this.length-8);let s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});Y.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Yr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};Y.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Yr(e,r,this.length);let s=r,i=1,o=this[e+--s];for(;s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};Y.prototype.readInt8=function(e,r){return e=e>>>0,r||Yr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Y.prototype.readInt16LE=function(e,r){e=e>>>0,r||Yr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};Y.prototype.readInt16BE=function(e,r){e=e>>>0,r||Yr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};Y.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Yr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Y.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Yr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Y.prototype.readBigInt64LE=Ka(function(e){e=e>>>0,Ul(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ip(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});Y.prototype.readBigInt64BE=Ka(function(e){e=e>>>0,Ul(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&ip(e,this.length-8);let s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});Y.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Yr(e,4,this.length),Ll.read(this,e,!0,23,4)};Y.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Yr(e,4,this.length),Ll.read(this,e,!1,23,4)};Y.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Yr(e,8,this.length),Ll.read(this,e,!0,52,8)};Y.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Yr(e,8,this.length),Ll.read(this,e,!1,52,8)};function zn(t,e,r,n,s,i){if(!Y.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}Y.prototype.writeUintLE=Y.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;zn(this,e,r,n,a,0)}let i=1,o=0;for(this[r]=e&255;++o<n&&(i*=256);)this[r+o]=e/i&255;return r+n};Y.prototype.writeUintBE=Y.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;zn(this,e,r,n,a,0)}let i=n-1,o=1;for(this[r+i]=e&255;--i>=0&&(o*=256);)this[r+i]=e/o&255;return r+n};Y.prototype.writeUint8=Y.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,1,255,0),this[r]=e&255,r+1};Y.prototype.writeUint16LE=Y.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};Y.prototype.writeUint16BE=Y.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};Y.prototype.writeUint32LE=Y.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};Y.prototype.writeUint32BE=Y.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function pP(t,e,r,n,s){vP(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function hP(t,e,r,n,s){vP(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}Y.prototype.writeBigUInt64LE=Ka(function(e,r=0){return pP(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeBigUInt64BE=Ka(function(e,r=0){return hP(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);zn(this,e,r,n,u-1,-u)}let i=0,o=1,a=0;for(this[r]=e&255;++i<n&&(o*=256);)e<0&&a===0&&this[r+i-1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};Y.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);zn(this,e,r,n,u-1,-u)}let i=n-1,o=1,a=0;for(this[r+i]=e&255;--i>=0&&(o*=256);)e<0&&a===0&&this[r+i+1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};Y.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};Y.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};Y.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};Y.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};Y.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||zn(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};Y.prototype.writeBigInt64LE=Ka(function(e,r=0){return pP(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Y.prototype.writeBigInt64BE=Ka(function(e,r=0){return hP(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mP(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function yP(t,e,r,n,s){return e=+e,r=r>>>0,s||mP(t,e,r,4,34028234663852886e22,-34028234663852886e22),Ll.write(t,e,r,n,23,4),r+4}Y.prototype.writeFloatLE=function(e,r,n){return yP(this,e,r,!0,n)};Y.prototype.writeFloatBE=function(e,r,n){return yP(this,e,r,!1,n)};function gP(t,e,r,n,s){return e=+e,r=r>>>0,s||mP(t,e,r,8,17976931348623157e292,-17976931348623157e292),Ll.write(t,e,r,n,52,8),r+8}Y.prototype.writeDoubleLE=function(e,r,n){return gP(this,e,r,!0,n)};Y.prototype.writeDoubleBE=function(e,r,n){return gP(this,e,r,!1,n)};Y.prototype.copy=function(e,r,n,s){if(!Y.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);let i=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),i};Y.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!Y.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let o=e.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let o=Y.isBuffer(e)?e:Y.from(e,s),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=o[i%a]}return this};var Ml={};function u1(t,e,r){Ml[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}u1("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);u1("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);u1("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=aP(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=aP(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function aP(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function hU(t,e,r){Ul(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&ip(e,t.length-(r+1))}function vP(t,e,r,n,s,i){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw i>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:a=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Ml.ERR_OUT_OF_RANGE("value",a,t)}hU(n,s,i)}function Ul(t,e){if(typeof t!="number")throw new Ml.ERR_INVALID_ARG_TYPE(e,"number",t)}function ip(t,e,r){throw Math.floor(t)!==t?(Ul(t,r),new Ml.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Ml.ERR_BUFFER_OUT_OF_BOUNDS:new Ml.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var mU=/[^+/0-9A-Za-z-_]/g;function yU(t){if(t=t.split("=")[0],t=t.trim().replace(mU,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function s1(t,e){e=e||1/0;let r,n=t.length,s=null,i=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function gU(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function vU(t,e){let r,n,s,i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function bP(t){return r1.toByteArray(yU(t))}function Ym(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function Ms(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function c1(t){return t!==t}var bU=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function Ka(t){return typeof BigInt>"u"?wU:t}function wU(){throw new Error("BigInt not supported")}});var d1=D((Aye,wP)=>{"use strict";var l1=null;wP.exports=function(){return l1===null&&(l1={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),l1}});var h1=D(EP=>{"use strict";var f1=us(),EU=new Set(["buffer","view","utf8"]),p1=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!EU.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new f1(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new f1(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new f1(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};EP.Encoding=p1});var v1=D(Zm=>{"use strict";var{Buffer:y1}=Pi()||{},{Encoding:g1}=h1(),_U=d1(),sp=class extends g1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new op({encode:this.encode,decode:e=>this.decode(y1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},op=class extends g1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new sp({encode:e=>{let r=this.encode(e);return y1.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},m1=class extends g1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new sp({encode:e=>y1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=_U();return new op({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Zm.BufferFormat=sp;Zm.ViewFormat=op;Zm.UTF8Format=m1});var AP=D(sc=>{"use strict";var{Buffer:_n}=Pi()||{Buffer:{isBuffer:()=>!1}},{textEncoder:DP,textDecoder:_P}=d1()(),{BufferFormat:ap,ViewFormat:b1,UTF8Format:SP}=v1(),Qm=t=>t;sc.utf8=new SP({encode:function(t){return _n.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?_P.decode(t):String(t)},decode:Qm,name:"utf8",createViewTranscoder(){return new b1({encode:function(t){return ArrayBuffer.isView(t)?t:DP.encode(t)},decode:function(t){return _P.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new ap({encode:function(t){return _n.isBuffer(t)?t:ArrayBuffer.isView(t)?_n.from(t.buffer,t.byteOffset,t.byteLength):_n.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});sc.json=new SP({encode:JSON.stringify,decode:JSON.parse,name:"json"});sc.buffer=new ap({encode:function(t){return _n.isBuffer(t)?t:ArrayBuffer.isView(t)?_n.from(t.buffer,t.byteOffset,t.byteLength):_n.from(String(t),"utf8")},decode:Qm,name:"buffer",createViewTranscoder(){return new b1({encode:function(t){return ArrayBuffer.isView(t)?t:_n.from(String(t),"utf8")},decode:function(t){return _n.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});sc.view=new b1({encode:function(t){return ArrayBuffer.isView(t)?t:DP.encode(t)},decode:Qm,name:"view",createBufferTranscoder(){return new ap({encode:function(t){return _n.isBuffer(t)?t:ArrayBuffer.isView(t)?_n.from(t.buffer,t.byteOffset,t.byteLength):_n.from(String(t),"utf8")},decode:Qm,name:`${this.name}+buffer`})}});sc.hex=new ap({encode:function(t){return _n.isBuffer(t)?t:_n.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});sc.base64=new ap({encode:function(t){return _n.isBuffer(t)?t:_n.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var PP=D(CP=>{"use strict";var xP=us(),ty=AP(),{Encoding:DU}=h1(),{BufferFormat:SU,ViewFormat:AU,UTF8Format:xU}=v1(),up=Symbol("formats"),ey=Symbol("encodings"),CU=new Set(["buffer","view","utf8"]),w1=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>CU.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[ey]=new Map,this[up]=new Set(e);for(let r in ty)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[ey].values()))}encoding(e){let r=this[ey].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=IU[e],!r)throw new xP(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=PU(e)}let{name:n,format:s}=r;if(!this[up].has(s))if(this[up].has("view"))r=r.createViewTranscoder();else if(this[up].has("buffer"))r=r.createBufferTranscoder();else if(this[up].has("utf8"))r=r.createUTF8Transcoder();else throw new xP(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let i of[e,n,r.name,r.commonName])this[ey].set(i,r)}return r}};CP.Transcoder=w1;function PU(t){if(t instanceof DU)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${BU++}`;switch(OU(t)){case"view":return new AU({...t,name:r});case"utf8":return new xU({...t,name:r});case"buffer":return new SU({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function OU(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var kU={binary:ty.buffer,"utf-8":ty.utf8},IU={...ty,...kU},BU=0});var cp=D((kye,E1)=>{"use strict";var Kl=typeof Reflect=="object"?Reflect:null,OP=Kl&&typeof Kl.apply=="function"?Kl.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},ry;Kl&&typeof Kl.ownKeys=="function"?ry=Kl.ownKeys:Object.getOwnPropertySymbols?ry=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ry=function(e){return Object.getOwnPropertyNames(e)};function TU(t){console&&console.warn&&console.warn(t)}var IP=Number.isNaN||function(e){return e!==e};function jt(){jt.init.call(this)}E1.exports=jt;E1.exports.once=NU;jt.EventEmitter=jt;jt.prototype._events=void 0;jt.prototype._eventsCount=0;jt.prototype._maxListeners=void 0;var kP=10;function ny(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(jt,"defaultMaxListeners",{enumerable:!0,get:function(){return kP},set:function(t){if(typeof t!="number"||t<0||IP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");kP=t}});jt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};jt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||IP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function BP(t){return t._maxListeners===void 0?jt.defaultMaxListeners:t._maxListeners}jt.prototype.getMaxListeners=function(){return BP(this)};jt.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")OP(u,this,r);else for(var c=u.length,l=NP(u,c),n=0;n<c;++n)OP(l[n],this,r);return!0};function TP(t,e,r,n){var s,i,o;if(ny(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=BP(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,TU(a)}return t}jt.prototype.addListener=function(e,r){return TP(this,e,r,!1)};jt.prototype.on=jt.prototype.addListener;jt.prototype.prependListener=function(e,r){return TP(this,e,r,!0)};function FU(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function FP(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=FU.bind(n);return s.listener=r,n.wrapFn=s,s}jt.prototype.once=function(e,r){return ny(r),this.on(e,FP(this,e,r)),this};jt.prototype.prependOnceListener=function(e,r){return ny(r),this.prependListener(e,FP(this,e,r)),this};jt.prototype.removeListener=function(e,r){var n,s,i,o,a;if(ny(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():$U(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};jt.prototype.off=jt.prototype.removeListener;jt.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function $P(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?RU(s):NP(s,s.length)}jt.prototype.listeners=function(e){return $P(this,e,!0)};jt.prototype.rawListeners=function(e){return $P(this,e,!1)};jt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):RP.call(t,e)};jt.prototype.listenerCount=RP;function RP(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}jt.prototype.eventNames=function(){return this._eventsCount>0?ry(this._events):[]};function NP(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function $U(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function RU(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function NU(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}jP(t,e,i,{once:!0}),e!=="error"&&jU(t,s,{once:!0})})}function jU(t,e,r){typeof t.on=="function"&&jP(t,"error",e,r)}function jP(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var MP=D((Iye,qP)=>{qP.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var lp=D(_1=>{"use strict";var LP=MP();_1.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,s){t=function(i,o){i?s(i):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};_1.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){LP(()=>e(null,r))}).catch(function(r){LP(()=>e(r))})}});var iy=D(D1=>{"use strict";D1.getCallback=function(t,e){return typeof t=="function"?t:e};D1.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var Xa=D(uy=>{"use strict";var{fromCallback:S1}=lp(),fi=us(),{getOptions:A1,getCallback:UP}=iy(),oc=Symbol("promise"),Hl=Symbol("callback"),Ls=Symbol("working"),ac=Symbol("handleOne"),qo=Symbol("handleMany"),x1=Symbol("autoClose"),Ja=Symbol("finishWork"),Us=Symbol("returnMany"),Ha=Symbol("closing"),dp=Symbol("handleClose"),sy=Symbol("closed"),fp=Symbol("closeCallbacks"),za=Symbol("keyEncoding"),uc=Symbol("valueEncoding"),C1=Symbol("abortOnClose"),oy=Symbol("legacy"),P1=Symbol("keys"),O1=Symbol("values"),Wa=Symbol("limit"),Oi=Symbol("count"),ay=Object.freeze({}),qU=()=>{},VP=!1,pp=class{constructor(e,r,n){if(typeof e!="object"||e===null){let s=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[sy]=!1,this[fp]=[],this[Ls]=!1,this[Ha]=!1,this[x1]=!1,this[Hl]=null,this[ac]=this[ac].bind(this),this[qo]=this[qo].bind(this),this[dp]=this[dp].bind(this),this[za]=r[za],this[uc]=r[uc],this[oy]=n,this[Wa]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[Oi]=0,this[C1]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[Oi]}get limit(){return this[Wa]}next(e){let r;if(e===void 0)r=new Promise((n,s)=>{e=(i,o,a)=>{i?s(i):this[oy]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Ha]?this.nextTick(e,new fi("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ls]?this.nextTick(e,new fi("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ls]=!0,this[Hl]=e,this[Oi]>=this[Wa]?this.nextTick(this[ac],null):this._next(this[ac])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=UP(r,n),n=S1(n,oc),r=A1(r,ay),Number.isInteger(e)?(this[Ha]?this.nextTick(n,new fi("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ls]?this.nextTick(n,new fi("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Wa]<1/0&&(e=Math.min(e,this[Wa]-this[Oi])),this[Ls]=!0,this[Hl]=n,e<=0?this.nextTick(this[qo],null,[]):this._nextv(e,r,this[qo])),n[oc]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[oc])}_nextv(e,r,n){let s=[],i=(o,a,u)=>{if(o)return n(o);if(this[oy]?a===void 0&&u===void 0:a===void 0)return n(null,s);s.push(this[oy]?[a,u]:a),s.length===e?n(null,s):this._next(i)};this._next(i)}all(e,r){return r=UP(e,r),r=S1(r,oc),e=A1(e,ay),this[Ha]?this.nextTick(r,new fi("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Ls]?this.nextTick(r,new fi("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Ls]=!0,this[Hl]=r,this[x1]=!0,this[Oi]>=this[Wa]?this.nextTick(this[qo],null,[]):this._all(e,this[qo])),r[oc]}_all(e,r){let n=this[Oi],s=[],i=()=>{let a=this[Wa]<1/0?Math.min(1e3,this[Wa]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,ay,o)},o=(a,u)=>{a?r(a):u.length===0?r(null,s):(s.push.apply(s,u),n+=u.length,i())};i()}[Ja](){let e=this[Hl];return this[C1]&&e===null?qU:(this[Ls]=!1,this[Hl]=null,this[Ha]&&this._close(this[dp]),e)}[Us](e,r,n){this[x1]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=A1(r,ay),!this[Ha]){if(this[Ls])throw new fi("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[za]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});let i=this.db.prefixKey(n.encode(e),s);this._seek(i,r)}}}_seek(e,r){throw new fi("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=S1(e,oc),this[sy]?this.nextTick(e):this[Ha]?this[fp].push(e):(this[Ha]=!0,this[fp].push(e),this[Ls]?this[C1]&&this[Ja]()(new fi("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[dp])),e[oc]}_close(e){this.nextTick(e)}[dp](){this[sy]=!0,this.db.detachResource(this);let e=this[fp];this[fp]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[sy]||await this.close()}}},Wl=class extends pp{constructor(e,r){super(e,r,!0),this[P1]=r.keys!==!1,this[O1]=r.values!==!1}[ac](e,r,n){let s=this[Ja]();if(e)return s(e);try{r=this[P1]&&r!==void 0?this[za].decode(r):void 0,n=this[O1]&&n!==void 0?this[uc].decode(n):void 0}catch(i){return s(new Ga("entry",i))}r===void 0&&n===void 0||this[Oi]++,s(null,r,n)}[qo](e,r){let n=this[Ja]();if(e)return this[Us](n,e);try{for(let s of r){let i=s[0],o=s[1];s[0]=this[P1]&&i!==void 0?this[za].decode(i):void 0,s[1]=this[O1]&&o!==void 0?this[uc].decode(o):void 0}}catch(s){return this[Us](n,new Ga("entries",s))}this[Oi]+=r.length,this[Us](n,null,r)}end(e){return!VP&&typeof console<"u"&&(VP=!0,console.warn(new fi("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},k1=class extends pp{constructor(e,r){super(e,r,!1)}[ac](e,r){let n=this[Ja]();if(e)return n(e);try{r=r!==void 0?this[za].decode(r):void 0}catch(s){return n(new Ga("key",s))}r!==void 0&&this[Oi]++,n(null,r)}[qo](e,r){let n=this[Ja]();if(e)return this[Us](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[za].decode(i):void 0}}catch(s){return this[Us](n,new Ga("keys",s))}this[Oi]+=r.length,this[Us](n,null,r)}},I1=class extends pp{constructor(e,r){super(e,r,!1)}[ac](e,r){let n=this[Ja]();if(e)return n(e);try{r=r!==void 0?this[uc].decode(r):void 0}catch(s){return n(new Ga("value",s))}r!==void 0&&this[Oi]++,n(null,r)}[qo](e,r){let n=this[Ja]();if(e)return this[Us](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[uc].decode(i):void 0}}catch(s){return this[Us](n,new Ga("values",s))}this[Oi]+=r.length,this[Us](n,null,r)}},Ga=class extends fi{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(Wl.prototype,t.split(" ")[0],{get(){throw new fi(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new fi(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});Wl.keyEncoding=za;Wl.valueEncoding=uc;uy.AbstractIterator=Wl;uy.AbstractKeyIterator=k1;uy.AbstractValueIterator=I1});var KP=D(B1=>{"use strict";var{AbstractKeyIterator:MU,AbstractValueIterator:LU}=Xa(),cc=Symbol("iterator"),hp=Symbol("callback"),zl=Symbol("handleOne"),lc=Symbol("handleMany"),mp=class extends MU{constructor(e,r){super(e,r),this[cc]=e.iterator({...r,keys:!0,values:!1}),this[zl]=this[zl].bind(this),this[lc]=this[lc].bind(this)}},cy=class extends LU{constructor(e,r){super(e,r),this[cc]=e.iterator({...r,keys:!1,values:!0}),this[zl]=this[zl].bind(this),this[lc]=this[lc].bind(this)}};for(let t of[mp,cy]){let e=t===mp,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[hp]=n,this[cc].next(this[zl])},t.prototype[zl]=function(n,s,i){let o=this[hp];n?o(n):o(null,e?s:i)},t.prototype._nextv=function(n,s,i){this[hp]=i,this[cc].nextv(n,s,this[lc])},t.prototype._all=function(n,s){this[hp]=s,this[cc].all(n,this[lc])},t.prototype[lc]=function(n,s){let i=this[hp];n?i(n):i(null,s.map(r))},t.prototype._seek=function(n,s){this[cc].seek(n,s)},t.prototype._close=function(n){this[cc].close(n)}}B1.DefaultKeyIterator=mp;B1.DefaultValueIterator=cy});var HP=D(my=>{"use strict";var{AbstractIterator:UU,AbstractKeyIterator:VU,AbstractValueIterator:KU}=Xa(),T1=us(),Jn=Symbol("nut"),py=Symbol("undefer"),hy=Symbol("factory"),ly=class extends UU{constructor(e,r){super(e,r),this[Jn]=null,this[hy]=()=>e.iterator(r),this.db.defer(()=>this[py]())}},dy=class extends VU{constructor(e,r){super(e,r),this[Jn]=null,this[hy]=()=>e.keys(r),this.db.defer(()=>this[py]())}},fy=class extends KU{constructor(e,r){super(e,r),this[Jn]=null,this[hy]=()=>e.values(r),this.db.defer(()=>this[py]())}};for(let t of[ly,dy,fy])t.prototype[py]=function(){this.db.status==="open"&&(this[Jn]=this[hy]())},t.prototype._next=function(e){this[Jn]!==null?this[Jn].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new T1("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Jn]!==null?this[Jn].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new T1("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Jn]!==null?this[Jn].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new T1("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Jn]!==null?this[Jn]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Jn]!==null?this[Jn].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};my.DeferredIterator=ly;my.DeferredKeyIterator=dy;my.DeferredValueIterator=fy});var $1=D(zP=>{"use strict";var{fromCallback:WP}=lp(),yy=us(),{getCallback:HU,getOptions:WU}=iy(),gy=Symbol("promise"),ki=Symbol("status"),Jl=Symbol("operations"),yp=Symbol("finishClose"),Gl=Symbol("closeCallbacks"),F1=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[Jl]=[],this[Gl]=[],this[ki]="open",this[yp]=this[yp].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Jl].length}put(e,r,n){if(this[ki]!=="open")throw new yy("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let s=this.db._checkKey(e)||this.db._checkValue(r);if(s)throw s;let i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),u=i.valueEncoding(n&&n.valueEncoding),c=a.format;n={...n,keyEncoding:c,valueEncoding:u.format},i!==this.db&&(n.sublevel=null);let l=i.prefixKey(a.encode(e),c),d=u.encode(r);return this._put(l,d,n),this[Jl].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[ki]!=="open")throw new yy("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(e),a),r),this[Jl].push({...i,type:"del",key:e}),this}_del(e,r){}clear(){if(this[ki]!=="open")throw new yy("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Jl]=[],this}_clear(){}write(e,r){return r=HU(e,r),r=WP(r,gy),e=WU(e),this[ki]!=="open"?this.nextTick(r,new yy("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[ki]="writing",this._write(e,n=>{this[ki]="closing",this[Gl].push(()=>r(n)),n||this.db.emit("batch",this[Jl]),this._close(this[yp])})),r[gy]}_write(e,r){}close(e){return e=WP(e,gy),this[ki]==="closing"?this[Gl].push(e):this[ki]==="closed"?this.nextTick(e):(this[Gl].push(e),this[ki]!=="writing"&&(this[ki]="closing",this._close(this[yp]))),e[gy]}_close(e){this.nextTick(e)}[yp](){this[ki]="closed",this.db.detachResource(this);let e=this[Gl];this[Gl]=[];for(let r of e)r()}};zP.AbstractChainedBatch=F1});var GP=D(JP=>{"use strict";var{AbstractChainedBatch:zU}=$1(),JU=us(),Xl=Symbol("encoded"),R1=class extends zU{constructor(e){super(e),this[Xl]=[]}_put(e,r,n){this[Xl].push({...n,type:"put",key:e,value:r})}_del(e,r){this[Xl].push({...r,type:"del",key:e})}_clear(){this[Xl]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[Xl].length===0?this.nextTick(r):this.db._batch(this[Xl],e,r):this.nextTick(r,new JU("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};JP.DefaultChainedBatch=R1});var ZP=D((qye,YP)=>{"use strict";var XP=us(),GU=Object.prototype.hasOwnProperty,XU=new Set(["lt","lte","gt","gte"]);YP.exports=function(t,e){let r={};for(let n in t)if(GU.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new XP(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new XP("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});XU.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var N1=D((Mye,eO)=>{var QP;eO.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(QP||(QP=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var nO=D((Lye,rO)=>{"use strict";var tO=N1();rO.exports=function(t,...e){e.length===0?tO(t):tO(()=>t(...e))}});var iO=D(vy=>{"use strict";var{AbstractIterator:YU,AbstractKeyIterator:ZU,AbstractValueIterator:QU}=Xa(),Yl=Symbol("unfix"),cs=Symbol("iterator"),dc=Symbol("handleOne"),Ya=Symbol("handleMany"),Mo=Symbol("callback"),gp=class extends YU{constructor(e,r,n,s){super(e,r),this[cs]=n,this[Yl]=s,this[dc]=this[dc].bind(this),this[Ya]=this[Ya].bind(this),this[Mo]=null}[dc](e,r,n){let s=this[Mo];if(e)return s(e);r!==void 0&&(r=this[Yl](r)),s(e,r,n)}[Ya](e,r){let n=this[Mo];if(e)return n(e);for(let s of r){let i=s[0];i!==void 0&&(s[0]=this[Yl](i))}n(e,r)}},vp=class extends ZU{constructor(e,r,n,s){super(e,r),this[cs]=n,this[Yl]=s,this[dc]=this[dc].bind(this),this[Ya]=this[Ya].bind(this),this[Mo]=null}[dc](e,r){let n=this[Mo];if(e)return n(e);r!==void 0&&(r=this[Yl](r)),n(e,r)}[Ya](e,r){let n=this[Mo];if(e)return n(e);for(let s=0;s<r.length;s++){let i=r[s];i!==void 0&&(r[s]=this[Yl](i))}n(e,r)}},bp=class extends QU{constructor(e,r,n){super(e,r),this[cs]=n}};for(let t of[gp,vp])t.prototype._next=function(e){this[Mo]=e,this[cs].next(this[dc])},t.prototype._nextv=function(e,r,n){this[Mo]=n,this[cs].nextv(e,r,this[Ya])},t.prototype._all=function(e,r){this[Mo]=r,this[cs].all(e,this[Ya])};for(let t of[bp])t.prototype._next=function(e){this[cs].next(e)},t.prototype._nextv=function(e,r,n){this[cs].nextv(e,r,n)},t.prototype._all=function(e,r){this[cs].all(e,r)};for(let t of[gp,vp,bp])t.prototype._seek=function(e,r){this[cs].seek(e,r)},t.prototype._close=function(e){this[cs].close(e)};vy.AbstractSublevelIterator=gp;vy.AbstractSublevelKeyIterator=vp;vy.AbstractSublevelValueIterator=bp});var uO=D((Vye,aO)=>{"use strict";var j1=us(),{Buffer:L1}=Pi()||{},{AbstractSublevelIterator:eV,AbstractSublevelKeyIterator:tV,AbstractSublevelValueIterator:rV}=iO(),Lo=Symbol("prefix"),sO=Symbol("upperBound"),wp=Symbol("prefixRange"),pi=Symbol("parent"),q1=Symbol("unfix"),oO=new TextEncoder,nV={separator:"!"};aO.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new j1("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new j1("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?nV:n.separator?n:{...n,separator:"!"}}constructor(n,s,i){let{separator:o,manifest:a,...u}=e.defaults(i);s=sV(s,o);let c=o.charCodeAt(0)+1,l=n[pi]||n;if(!oO.encode(s).every(f=>f>c&&f<127))throw new j1(`Prefix must use bytes > ${c} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(iV(l,a),u);let d=(n.prefix||"")+o+s+o,h=d.slice(0,-1)+String.fromCharCode(c);this[pi]=l,this[Lo]=new by(d),this[sO]=new by(h),this[q1]=new U1,this.nextTick=l.nextTick}prefixKey(n,s){if(s==="utf8")return this[Lo].utf8+n;if(n.byteLength===0)return this[Lo][s];if(s==="view"){let i=this[Lo].view,o=new Uint8Array(i.byteLength+n.byteLength);return o.set(i,0),o.set(n,i.byteLength),o}else{let i=this[Lo].buffer;return L1.concat([i,n],i.byteLength+n.byteLength)}}[wp](n,s){n.gte!==void 0?n.gte=this.prefixKey(n.gte,s):n.gt!==void 0?n.gt=this.prefixKey(n.gt,s):n.gte=this[Lo][s],n.lte!==void 0?n.lte=this.prefixKey(n.lte,s):n.lt!==void 0?n.lt=this.prefixKey(n.lt,s):n.lte=this[sO][s]}get prefix(){return this[Lo].utf8}get db(){return this[pi]}_open(n,s){this[pi].open({passive:!0},s)}_put(n,s,i,o){this[pi].put(n,s,i,o)}_get(n,s,i){this[pi].get(n,s,i)}_getMany(n,s,i){this[pi].getMany(n,s,i)}_del(n,s,i){this[pi].del(n,s,i)}_batch(n,s,i){this[pi].batch(n,s,i)}_clear(n,s){this[wp](n,n.keyEncoding),this[pi].clear(n,s)}_iterator(n){this[wp](n,n.keyEncoding);let s=this[pi].iterator(n),i=this[q1].get(this[Lo].utf8.length,n.keyEncoding);return new eV(this,n,s,i)}_keys(n){this[wp](n,n.keyEncoding);let s=this[pi].keys(n),i=this[q1].get(this[Lo].utf8.length,n.keyEncoding);return new tV(this,n,s,i)}_values(n){this[wp](n,n.keyEncoding);let s=this[pi].values(n);return new rV(this,n,s)}}return{AbstractSublevel:e}};var iV=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:M1(t,"utf8"),buffer:M1(t,"buffer"),view:M1(t,"view")}}},M1=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},by=class{constructor(e){this.utf8=e,this.view=oO.encode(e),this.buffer=L1?L1.from(this.view.buffer,0,this.view.byteLength):{}}},U1=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=function(s,i){return i.subarray(s)}.bind(null,e):n=function(s,i){return i.slice(s)}.bind(null,e),this.cache.set(r,n)),n}},sV=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var z1=D(W1=>{"use strict";var{supports:oV}=ZC(),{Transcoder:aV}=PP(),{EventEmitter:uV}=cp(),{fromCallback:Za}=lp(),ls=us(),{AbstractIterator:fc}=Xa(),{DefaultKeyIterator:cV,DefaultValueIterator:lV}=KP(),{DeferredIterator:dV,DeferredKeyIterator:fV,DeferredValueIterator:pV}=HP(),{DefaultChainedBatch:cO}=GP(),{getCallback:pc,getOptions:Qa}=iy(),wy=ZP(),rt=Symbol("promise"),Uo=Symbol("landed"),hc=Symbol("resources"),V1=Symbol("closeResources"),Ep=Symbol("operations"),_p=Symbol("undefer"),Ey=Symbol("deferOpen"),lO=Symbol("options"),mt=Symbol("status"),mc=Symbol("defaultOptions"),Zl=Symbol("transcoder"),_y=Symbol("keyEncoding"),K1=Symbol("valueEncoding"),hV=()=>{},Dp=class extends uV{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=Qa(r);let{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[hc]=new Set,this[Ep]=[],this[Ey]=!0,this[lO]=o,this[mt]="opening",this.supports=oV(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Zl]=new aV(mV(this)),this[_y]=this[Zl].encoding(n||"utf8"),this[K1]=this[Zl].encoding(s||"utf8");for(let a of this[Zl].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[mc]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[_y].commonName,valueEncoding:this[K1].commonName}),key:Object.freeze({keyEncoding:this[_y].commonName})},this.nextTick(()=>{this[Ey]&&this.open({passive:!1},hV)})}get status(){return this[mt]}keyEncoding(e){return this[Zl].encoding(e??this[_y])}valueEncoding(e){return this[Zl].encoding(e??this[K1])}open(e,r){r=pc(e,r),r=Za(r,rt),e={...this[lO],...Qa(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=s=>{this[mt]==="closing"||this[mt]==="opening"?this.once(Uo,s?()=>n(s):n):this[mt]!=="open"?r(new ls("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return e.passive?this[mt]==="opening"?this.once(Uo,n):this.nextTick(n):this[mt]==="closed"||this[Ey]?(this[Ey]=!1,this[mt]="opening",this.emit("opening"),this._open(e,s=>{if(s){this[mt]="closed",this[V1](()=>{this.emit(Uo),n(s)}),this[_p]();return}this[mt]="open",this[_p](),this.emit(Uo),this[mt]==="open"&&this.emit("open"),this[mt]==="open"&&this.emit("ready"),n()})):this[mt]==="open"?this.nextTick(n):this.once(Uo,()=>this.open(e,r)),r[rt]}_open(e,r){this.nextTick(r)}close(e){e=Za(e,rt);let r=n=>{this[mt]==="opening"||this[mt]==="closing"?this.once(Uo,n?r(n):r):this[mt]!=="closed"?e(new ls("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[mt]==="open"){this[mt]="closing",this.emit("closing");let n=s=>{this[mt]="open",this[_p](),this.emit(Uo),r(s)};this[V1](()=>{this._close(s=>{if(s)return n(s);this[mt]="closed",this[_p](),this.emit(Uo),this[mt]==="closed"&&this.emit("closed"),r()})})}else this[mt]==="closed"?this.nextTick(r):this.once(Uo,()=>this.close(e));return e[rt]}[V1](e){if(this[hc].size===0)return this.nextTick(e);let r=this[hc].size,n=!0,s=()=>{--r===0&&(n?this.nextTick(e):e())};for(let i of this[hc])i.close(s);n=!1,this[hc].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=pc(r,n),n=Za(n,rt),r=Qa(r,this[mc].entry),this[mt]==="opening")return this.defer(()=>this.get(e,r,n)),n[rt];if(Ql(this,n))return n[rt];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[rt];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,u=o.format;return(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),a),r,(c,l)=>{if(c)return(c.code==="LEVEL_NOT_FOUND"||c.notFound||/NotFound/i.test(c))&&(c.code||(c.code="LEVEL_NOT_FOUND"),c.notFound||(c.notFound=!0),c.status||(c.status=404)),n(c);try{l=o.decode(l)}catch(d){return n(new ls("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[rt]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=pc(r,n),n=Za(n,rt),r=Qa(r,this[mc].entry),this[mt]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[rt];if(Ql(this,n))return n[rt];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[rt];if(e.length===0)return this.nextTick(n,null,[]),n[rt];let s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));let u=new Array(e.length);for(let c=0;c<e.length;c++){let l=e[c],d=this._checkKey(l);if(d)return this.nextTick(n,d),n[rt];u[c]=this.prefixKey(s.encode(l),o)}return this._getMany(u,r,(c,l)=>{if(c)return n(c);try{for(let d=0;d<l.length;d++)l[d]!==void 0&&(l[d]=i.decode(l[d]))}catch(d){return n(new ls(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[rt]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,s){if(s=pc(n,s),s=Za(s,rt),n=Qa(n,this[mc].entry),this[mt]==="opening")return this.defer(()=>this.put(e,r,n,s)),s[rt];if(Ql(this,s))return s[rt];let i=this._checkKey(e)||this._checkValue(r);if(i)return this.nextTick(s,i),s[rt];let o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),u=o.format,c=a.format;(n.keyEncoding!==u||n.valueEncoding!==c)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:c}));let l=this.prefixKey(o.encode(e),u),d=a.encode(r);return this._put(l,d,n,h=>{if(h)return s(h);this.emit("put",e,r),s()}),s[rt]}_put(e,r,n,s){this.nextTick(s)}del(e,r,n){if(n=pc(r,n),n=Za(n,rt),r=Qa(r,this[mc].key),this[mt]==="opening")return this.defer(()=>this.del(e,r,n)),n[rt];if(Ql(this,n))return n[rt];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[rt];let i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[rt]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[mt]==="opening")return new cO(this);if(this[mt]!=="open")throw new ls("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=pc(r,n),n=Za(n,rt),r=Qa(r,this[mc].empty),this[mt]==="opening")return this.defer(()=>this.batch(e,r,n)),n[rt];if(Ql(this,n))return n[rt];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[rt];if(e.length===0)return this.nextTick(n),n[rt];let s=new Array(e.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[rt];let c=Object.assign({},e[u]);if(c.type!=="put"&&c.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[rt];let l=this._checkKey(c.key);if(l)return this.nextTick(n,l),n[rt];let d=c.sublevel!=null?c.sublevel:this,h=d.keyEncoding(c.keyEncoding||i),f=h.format;if(c.key=d.prefixKey(h.encode(c.key),f),c.keyEncoding=f,c.type==="put"){let p=this._checkValue(c.value);if(p)return this.nextTick(n,p),n[rt];let y=d.valueEncoding(c.valueEncoding||o);c.value=y.encode(c.value),c.valueEncoding=y.format}d!==this&&(c.sublevel=null),s[u]=c}return this._batch(s,a,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[rt]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,H1.defaults(r))}_sublevel(e,r){return new H1(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=pc(e,r),r=Za(r,rt),e=Qa(e,this[mc].empty),this[mt]==="opening")return this.defer(()=>this.clear(e,r)),r[rt];if(Ql(this,r))return r[rt];let n=e,s=this.keyEncoding(e.keyEncoding);return e=wy(e,s),e.keyEncoding=s.format,e.limit===0?this.nextTick(r):this._clear(e,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[rt]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=wy(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[fc.keyEncoding]=r,e[fc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[mt]==="opening")return new dV(this,e);if(this[mt]!=="open")throw new ls("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new fc(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=wy(e,r),e[fc.keyEncoding]=r,e[fc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[mt]==="opening")return new fV(this,e);if(this[mt]!=="open")throw new ls("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new cV(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=wy(e,r),e[fc.keyEncoding]=r,e[fc.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[mt]==="opening")return new pV(this,e);if(this[mt]!=="open")throw new ls("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new lV(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Ep].push(e)}[_p](){if(this[Ep].length===0)return;let e=this[Ep];this[Ep]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[hc].add(e)}detachResource(e){this[hc].delete(e)}_chainedBatch(){return new cO(this)}_checkKey(e){if(e==null)return new ls("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ls("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Dp.prototype.nextTick=nO();var{AbstractSublevel:H1}=uO()({AbstractLevel:Dp});W1.AbstractLevel=Dp;W1.AbstractSublevel=H1;var Ql=function(t,e){return t[mt]!=="open"?(t.nextTick(e,new ls("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},mV=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var J1=D(yc=>{"use strict";yc.AbstractLevel=z1().AbstractLevel;yc.AbstractSublevel=z1().AbstractSublevel;yc.AbstractIterator=Xa().AbstractIterator;yc.AbstractKeyIterator=Xa().AbstractKeyIterator;yc.AbstractValueIterator=Xa().AbstractValueIterator;yc.AbstractChainedBatch=$1().AbstractChainedBatch});var fO=D((Wye,dO)=>{dO.exports=gV;var yV=N1();function gV(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,u=!0,c;Array.isArray(t)?(n=[],i=s=t.length):(o=Object.keys(t),n={},i=s=o.length);function l(h){function f(){r&&r(h,n),r=null}u?yV(f):f()}function d(h,f,p){if(n[h]=p,f&&(a=!0),--i===0||f)l(f);else if(!a&&c<s){let y;o?(y=o[c],c+=1,t[y](function(w,P){d(y,w,P)})):(y=c,c+=1,t[y](function(w,P){d(y,w,P)}))}}c=e,i?o?o.some(function(h,f){return t[h](function(p,y){d(h,p,y)}),f===e-1}):t.some(function(h,f){return h(function(p,y){d(f,p,y)}),f===e-1}):l(null),u=!1}});var G1=D((zye,pO)=>{"use strict";pO.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null}});var X1=D((Jye,hO)=>{"use strict";var vV=new TextEncoder;hO.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):vV.encode(t)}});var bO=D(vO=>{"use strict";var{AbstractIterator:bV}=J1(),mO=G1(),Dy=X1(),Vs=Symbol("cache"),Vo=Symbol("finished"),hi=Symbol("options"),Ko=Symbol("currentOptions"),gc=Symbol("position"),Y1=Symbol("location"),ed=Symbol("first"),yO={},Z1=class extends bV{constructor(e,r,n){super(e,n),this[Vs]=[],this[Vo]=this.limit===0,this[hi]=n,this[Ko]={...n},this[gc]=void 0,this[Y1]=r,this[ed]=!0}_nextv(e,r,n){if(this[ed]=!1,this[Vo])return this.nextTick(n,null,[]);if(this[Vs].length>0)return e=Math.min(e,this[Vs].length),this.nextTick(n,null,this[Vs].splice(0,e));this[gc]!==void 0&&(this[hi].reverse?(this[Ko].lt=this[gc],this[Ko].lte=void 0):(this[Ko].gt=this[gc],this[Ko].gte=void 0));let s;try{s=mO(this[Ko])}catch{return this[Vo]=!0,this.nextTick(n,null,[])}let i=this.db.db.transaction([this[Y1]],"readonly"),o=i.objectStore(this[Y1]),a=[];if(this[hi].reverse){let u=!this[hi].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](s,"prev").onsuccess=c=>{let l=c.target.result;if(l){let{key:d,value:h}=l;this[gc]=d,a.push([this[hi].keys&&d!==void 0?Dy(d):void 0,this[hi].values&&h!==void 0?Dy(h):void 0]),a.length<e?l.continue():gO(i)}else this[Vo]=!0}}else{let u,c,l=()=>{if(u===void 0||c===void 0)return;let d=Math.max(u.length,c.length);d===0||e===1/0?this[Vo]=!0:this[gc]=u[d-1],a.length=d;for(let h=0;h<d;h++){let f=u[h],p=c[h];a[h]=[this[hi].keys&&f!==void 0?Dy(f):void 0,this[hi].values&&p!==void 0?Dy(p):void 0]}gO(i)};this[hi].keys||e<1/0?o.getAllKeys(s,e<1/0?e:void 0).onsuccess=d=>{u=d.target.result,l()}:(u=[],this.nextTick(l)),this[hi].values?o.getAll(s,e<1/0?e:void 0).onsuccess=d=>{c=d.target.result,l()}:(c=[],this.nextTick(l))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[Vs].length>0){let[r,n]=this[Vs].shift();this.nextTick(e,null,r,n)}else if(this[Vo])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[ed]&&(this[ed]=!1,r=1),this._nextv(r,yO,(n,s)=>{if(n)return e(n);this[Vs]=s,this._next(e)})}}_all(e,r){this[ed]=!1;let n=this[Vs].splice(0,this[Vs].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,yO,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[ed]=!0,this[Vs]=[],this[Vo]=!1,this[gc]=void 0,this[Ko]={...this[hi]};let n;try{n=mO(this[hi])}catch{this[Vo]=!0;return}n!==null&&!n.includes(e)?this[Vo]=!0:this[hi].reverse?this[Ko].lte=e:this[Ko].gte=e}};vO.Iterator=Z1;function gO(t){typeof t.commit=="function"&&t.commit()}});var EO=D((Xye,wO)=>{"use strict";wO.exports=function(e,r,n,s,i){if(s.limit===0)return e.nextTick(i);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),u=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};let c=a.openKeyCursor?"openKeyCursor":"openCursor",l=s.reverse?"prev":"next";a[c](n,l).onsuccess=function(d){let h=d.target.result;h&&(a.delete(h.key).onsuccess=function(){(s.limit<=0||++u<s.limit)&&h.continue()})}}});var CO=D(xO=>{"use strict";var{AbstractLevel:wV}=J1(),_O=us(),EV=fO(),{fromCallback:_V}=lp(),{Iterator:DV}=bO(),DO=X1(),SV=EO(),AV=G1(),AO="level-js-",Sp=Symbol("idb"),Q1=Symbol("namePrefix"),Ho=Symbol("location"),ew=Symbol("version"),vc=Symbol("store"),Ap=Symbol("onComplete"),SO=Symbol("promise"),Sy=class extends wV{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new _O("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[Ho]=e,this[Q1]=s??AO,this[ew]=parseInt(i||1,10),this[Sp]=null}get location(){return this[Ho]}get namePrefix(){return this[Q1]}get version(){return this[ew]}get db(){return this[Sp]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[Q1]+this[Ho],this[ew]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[Sp]=n.result,r()},n.onupgradeneeded=s=>{let i=s.target.result;i.objectStoreNames.contains(this[Ho])||i.createObjectStore(this[Ho])}}[vc](e){return this[Sp].transaction([this[Ho]],e).objectStore(this[Ho])}[Ap](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let s=this[vc]("readonly"),i;try{i=s.get(e)}catch(o){return this.nextTick(n,o)}this[Ap](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new _O("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,DO(a))})}_getMany(e,r,n){let s=this[vc]("readonly"),i=e.map(o=>a=>{let u;try{u=s.get(o)}catch(c){return a(c)}u.onsuccess=()=>{let c=u.result;a(null,c===void 0?c:DO(c))},u.onerror=c=>{c.stopPropagation(),a(u.error)}});EV(i,16,n)}_del(e,r,n){let s=this[vc]("readwrite"),i;try{i=s.delete(e)}catch(o){return this.nextTick(n,o)}this[Ap](i,n)}_put(e,r,n,s){let i=this[vc]("readwrite"),o;try{o=i.put(r,e)}catch(a){return this.nextTick(s,a)}this[Ap](o,s)}_iterator(e){return new DV(this,this[Ho],e)}_batch(e,r,n){let s=this[vc]("readwrite"),i=s.transaction,o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function u(){let c=e[o++],l=c.key,d;try{d=c.type==="del"?s.delete(l):s.put(c.value,l)}catch(h){a=h,i.abort();return}o<e.length?d.onsuccess=u:typeof i.commit=="function"&&i.commit()}u()}_clear(e,r){let n,s;try{n=AV(e)}catch{return this.nextTick(r)}if(e.limit>=0)return SV(this,this[Ho],n,e,r);try{let i=this[vc]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[Ap](s,r)}_close(e){this[Sp].close(),this.nextTick(e)}};Sy.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=AO),r=_V(r,SO);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[SO]};xO.BrowserLevel=Sy});var tw=D(PO=>{PO.Level=CO().BrowserLevel});var kr=D((r0e,OO)=>{"use strict";OO.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var Ks=D((n0e,nw)=>{"use strict";var CV=Pi(),PV=Object.getPrototypeOf(async function(){}).constructor,kO=globalThis.Blob||CV.Blob,OV=typeof kO<"u"?function(e){return e instanceof kO}:function(e){return!1},rw=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};nw.exports={AggregateError:rw,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...s)=>n?r(n):e(...s))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let s=e.shift();return n==="f"?s.toFixed(6):n==="j"?JSON.stringify(s):n==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof PV},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:OV};nw.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Cy=D((i0e,xy)=>{"use strict";var{AbortController:IO,AbortSignal:kV}=typeof self<"u"?self:typeof window<"u"?window:void 0;xy.exports=IO;xy.exports.AbortSignal=kV;xy.exports.default=IO});var Bn=D((s0e,FO)=>{"use strict";var{format:IV,inspect:Py,AggregateError:BV}=Ks(),TV=globalThis.AggregateError||BV,FV=Symbol("kIsNodeError"),$V=["string","function","number","object","Function","Object","boolean","bigint","symbol"],RV=/^([A-Z][a-z0-9]*)+$/,NV="__node_internal_",Oy={};function wc(t,e){if(!t)throw new Oy.ERR_INTERNAL_ASSERTION(e)}function BO(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function jV(t,e,r){if(typeof e=="function")return wc(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return wc(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:IV(e,...r)}function an(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(jV(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[FV]=!0,Oy[t]=n}function TO(t){let e=NV+t.name;return Object.defineProperty(t,"name",{value:e}),t}function qV(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new TV([e,t],e.message);return r.code=e.code,r}return t||e}var iw=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Oy.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};an("ERR_ASSERTION","%s",Error);an("ERR_INVALID_ARG_TYPE",(t,e,r)=>{wc(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let s=[],i=[],o=[];for(let u of e)wc(typeof u=="string","All expected entries have to be of type string"),$V.includes(u)?s.push(u.toLowerCase()):RV.test(u)?i.push(u):(wc(u!=="object",'The value "object" should be written as "Object"'),o.push(u));if(i.length>0){let u=s.indexOf("object");u!==-1&&(s.splice(s,u,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of type ${s.join(", ")}, or ${u}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`an instance of ${i.join(", ")}, or ${u}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`one of ${o.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=Py(r,{depth:-1});n+=`. Received ${u}`}}else{let u=Py(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);an("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=Py(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);an("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError);an("ERR_MISSING_ARGS",(...t)=>{wc(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);an("ERR_OUT_OF_RANGE",(t,e,r)=>{wc(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=BO(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=BO(n)),n+="n"):n=Py(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);an("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);an("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);an("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);an("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);an("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);an("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);an("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);an("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);an("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);an("ERR_STREAM_WRITE_AFTER_END","write after end",Error);an("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);FO.exports={AbortError:iw,aggregateTwoErrors:TO(qV),hideStackFrames:TO,codes:Oy}});var xp=D((o0e,VO)=>{"use strict";var{ArrayIsArray:ow,ArrayPrototypeIncludes:jO,ArrayPrototypeJoin:qO,ArrayPrototypeMap:MV,NumberIsInteger:aw,NumberIsNaN:LV,NumberMAX_SAFE_INTEGER:UV,NumberMIN_SAFE_INTEGER:VV,NumberParseInt:KV,ObjectPrototypeHasOwnProperty:HV,RegExpPrototypeExec:MO,String:WV,StringPrototypeToUpperCase:zV,StringPrototypeTrim:JV}=kr(),{hideStackFrames:Ii,codes:{ERR_SOCKET_BAD_PORT:GV,ERR_INVALID_ARG_TYPE:Tn,ERR_INVALID_ARG_VALUE:td,ERR_OUT_OF_RANGE:Ec,ERR_UNKNOWN_SIGNAL:$O}}=Bn(),{normalizeEncoding:XV}=Ks(),{isAsyncFunction:YV,isArrayBufferView:ZV}=Ks().types,RO={};function QV(t){return t===(t|0)}function eK(t){return t===t>>>0}var tK=/^[0-7]+$/,rK="must be a 32-bit unsigned integer or an octal string";function nK(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(MO(tK,t)===null)throw new td(e,t,rK);t=KV(t,8)}return LO(t,e),t}var iK=Ii((t,e,r=VV,n=UV)=>{if(typeof t!="number")throw new Tn(e,"number",t);if(!aw(t))throw new Ec(e,"an integer",t);if(t<r||t>n)throw new Ec(e,`>= ${r} && <= ${n}`,t)}),sK=Ii((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new Tn(e,"number",t);if(!aw(t))throw new Ec(e,"an integer",t);if(t<r||t>n)throw new Ec(e,`>= ${r} && <= ${n}`,t)}),LO=Ii((t,e,r=!1)=>{if(typeof t!="number")throw new Tn(e,"number",t);if(!aw(t))throw new Ec(e,"an integer",t);let n=r?1:0,s=4294967295;if(t<n||t>s)throw new Ec(e,`>= ${n} && <= ${s}`,t)});function uw(t,e){if(typeof t!="string")throw new Tn(e,"string",t)}function oK(t,e,r=void 0,n){if(typeof t!="number")throw new Tn(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&LV(t))throw new Ec(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var aK=Ii((t,e,r)=>{if(!jO(r,t)){let s="must be one of: "+qO(MV(r,i=>typeof i=="string"?`'${i}'`:WV(i)),", ");throw new td(e,t,s)}});function UO(t,e){if(typeof t!="boolean")throw new Tn(e,"boolean",t)}function sw(t,e,r){return t==null||!HV(t,e)?r:t[e]}var uK=Ii((t,e,r=null)=>{let n=sw(r,"allowArray",!1),s=sw(r,"allowFunction",!1);if(!sw(r,"nullable",!1)&&t===null||!n&&ow(t)||typeof t!="object"&&(!s||typeof t!="function"))throw new Tn(e,"Object",t)}),cK=Ii((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new Tn(e,"a dictionary",t)}),cw=Ii((t,e,r=0)=>{if(!ow(t))throw new Tn(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new td(e,t,n)}});function lK(t,e){cw(t,e);for(let r=0;r<t.length;r++)uw(t[r],`${e}[${r}]`)}function dK(t,e){cw(t,e);for(let r=0;r<t.length;r++)UO(t[r],`${e}[${r}]`)}function fK(t,e="signal"){if(uw(t,e),RO[t]===void 0)throw RO[zV(t)]!==void 0?new $O(t+" (signals must use all capital letters)"):new $O(t)}var pK=Ii((t,e="buffer")=>{if(!ZV(t))throw new Tn(e,["Buffer","TypedArray","DataView"],t)});function hK(t,e){let r=XV(e),n=t.length;if(r==="hex"&&n%2!==0)throw new td("encoding",e,`is invalid for data of length ${n}`)}function mK(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&JV(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new GV(e,t,r);return t|0}var yK=Ii((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new Tn(e,"AbortSignal",t)}),gK=Ii((t,e)=>{if(typeof t!="function")throw new Tn(e,"Function",t)}),vK=Ii((t,e)=>{if(typeof t!="function"||YV(t))throw new Tn(e,"Function",t)}),bK=Ii((t,e)=>{if(t!==void 0)throw new Tn(e,"undefined",t)});function wK(t,e,r){if(!jO(r,t))throw new Tn(e,`('${qO(r,"|")}')`,t)}var EK=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function NO(t,e){if(typeof t>"u"||!MO(EK,t))throw new td(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function _K(t){if(typeof t=="string")return NO(t,"hints"),t;if(ow(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let s=t[n];NO(s,"hints"),r+=s,n!==e-1&&(r+=", ")}return r}throw new td("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}VO.exports={isInt32:QV,isUint32:eK,parseFileMode:nK,validateArray:cw,validateStringArray:lK,validateBooleanArray:dK,validateBoolean:UO,validateBuffer:pK,validateDictionary:cK,validateEncoding:hK,validateFunction:gK,validateInt32:sK,validateInteger:iK,validateNumber:oK,validateObject:uK,validateOneOf:aK,validatePlainFunction:vK,validatePort:mK,validateSignalName:fK,validateString:uw,validateUint32:LO,validateUndefined:bK,validateUnion:wK,validateAbortSignal:yK,validateLinkHeaderValue:_K}});var eu=D((a0e,zO)=>{var Dr=zO.exports={},Hs,Ws;function lw(){throw new Error("setTimeout has not been defined")}function dw(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Hs=setTimeout:Hs=lw}catch{Hs=lw}try{typeof clearTimeout=="function"?Ws=clearTimeout:Ws=dw}catch{Ws=dw}})();function KO(t){if(Hs===setTimeout)return setTimeout(t,0);if((Hs===lw||!Hs)&&setTimeout)return Hs=setTimeout,setTimeout(t,0);try{return Hs(t,0)}catch{try{return Hs.call(null,t,0)}catch{return Hs.call(this,t,0)}}}function DK(t){if(Ws===clearTimeout)return clearTimeout(t);if((Ws===dw||!Ws)&&clearTimeout)return Ws=clearTimeout,clearTimeout(t);try{return Ws(t)}catch{try{return Ws.call(null,t)}catch{return Ws.call(this,t)}}}var Wo=[],rd=!1,_c,ky=-1;function SK(){!rd||!_c||(rd=!1,_c.length?Wo=_c.concat(Wo):ky=-1,Wo.length&&HO())}function HO(){if(!rd){var t=KO(SK);rd=!0;for(var e=Wo.length;e;){for(_c=Wo,Wo=[];++ky<e;)_c&&_c[ky].run();ky=-1,e=Wo.length}_c=null,rd=!1,DK(t)}}Dr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Wo.push(new WO(t,e)),Wo.length===1&&!rd&&KO(HO)};function WO(t,e){this.fun=t,this.array=e}WO.prototype.run=function(){this.fun.apply(null,this.array)};Dr.title="browser";Dr.browser=!0;Dr.env={};Dr.argv=[];Dr.version="";Dr.versions={};function zo(){}Dr.on=zo;Dr.addListener=zo;Dr.once=zo;Dr.off=zo;Dr.removeListener=zo;Dr.removeAllListeners=zo;Dr.emit=zo;Dr.prependListener=zo;Dr.prependOnceListener=zo;Dr.listeners=function(t){return[]};Dr.binding=function(t){throw new Error("process.binding is not supported")};Dr.cwd=function(){return"/"};Dr.chdir=function(t){throw new Error("process.chdir is not supported")};Dr.umask=function(){return 0}});var Js=D((u0e,c5)=>{"use strict";var{Symbol:Iy,SymbolAsyncIterator:JO,SymbolIterator:GO,SymbolFor:XO}=kr(),YO=Iy("kDestroyed"),ZO=Iy("kIsErrored"),fw=Iy("kIsReadable"),QO=Iy("kIsDisturbed"),AK=XO("nodejs.webstream.isClosedPromise"),xK=XO("nodejs.webstream.controllerErrorFunction");function By(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Ty(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function CK(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function zs(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function e5(t){return!!(t&&!zs(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function t5(t){return!!(t&&!zs(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function r5(t){return!!(t&&!zs(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function PK(t){return e5(t)||t5(t)||r5(t)}function OK(t,e){return t==null?!1:e===!0?typeof t[JO]=="function":e===!1?typeof t[GO]=="function":typeof t[JO]=="function"||typeof t[GO]=="function"}function Fy(t){if(!zs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[YO]||n!=null&&n.destroyed)}function n5(t){if(!Ty(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function kK(t,e){if(!Ty(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function IK(t){if(!By(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function i5(t,e){if(!By(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function s5(t){return t&&t[fw]!=null?t[fw]:typeof t?.readable!="boolean"?null:Fy(t)?!1:By(t)&&t.readable&&!i5(t)}function o5(t){return typeof t?.writable!="boolean"?null:Fy(t)?!1:Ty(t)&&t.writable&&!n5(t)}function BK(t,e){return zs(t)?Fy(t)?!0:!(e?.readable!==!1&&s5(t)||e?.writable!==!1&&o5(t)):null}function TK(t){var e,r;return zs(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function FK(t){var e,r;return zs(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function $K(t){if(!zs(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&a5(t)?t._closed:null}function a5(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function u5(t){return typeof t._sent100=="boolean"&&a5(t)}function RK(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function NK(t){if(!zs(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&u5(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function jK(t){var e;return!!(t&&((e=t[QO])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function qK(t){var e,r,n,s,i,o,a,u,c,l;return!!(t&&((e=(r=(n=(s=(i=(o=t[ZO])!==null&&o!==void 0?o:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&s!==void 0?s:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}c5.exports={kDestroyed:YO,isDisturbed:jK,kIsDisturbed:QO,isErrored:qK,kIsErrored:ZO,isReadable:s5,kIsReadable:fw,kIsClosedPromise:AK,kControllerErrorFunction:xK,isClosed:$K,isDestroyed:Fy,isDuplexNodeStream:CK,isFinished:BK,isIterable:OK,isReadableNodeStream:By,isReadableStream:e5,isReadableEnded:IK,isReadableFinished:i5,isReadableErrored:FK,isNodeStream:zs,isWebStream:PK,isWritable:o5,isWritableNodeStream:Ty,isWritableStream:t5,isWritableEnded:n5,isWritableFinished:kK,isWritableErrored:TK,isServerRequest:RK,isServerResponse:u5,willEmitClose:NK,isTransformStream:r5}});var Jo=D((c0e,gw)=>{var tu=eu(),{AbortError:v5,codes:MK}=Bn(),{ERR_INVALID_ARG_TYPE:LK,ERR_STREAM_PREMATURE_CLOSE:l5}=MK,{kEmptyObject:hw,once:mw}=Ks(),{validateAbortSignal:UK,validateFunction:VK,validateObject:KK,validateBoolean:HK}=xp(),{Promise:WK,PromisePrototypeThen:zK}=kr(),{isClosed:JK,isReadable:d5,isReadableNodeStream:pw,isReadableStream:GK,isReadableFinished:f5,isReadableErrored:p5,isWritable:h5,isWritableNodeStream:m5,isWritableStream:XK,isWritableFinished:y5,isWritableErrored:g5,isNodeStream:YK,willEmitClose:ZK,kIsClosedPromise:QK}=Js();function eH(t){return t.setHeader&&typeof t.abort=="function"}var yw=()=>{};function b5(t,e,r){var n,s;if(arguments.length===2?(r=e,e=hw):e==null?e=hw:KK(e,"options"),VK(r,"callback"),UK(e.signal,"options.signal"),r=mw(r),GK(t)||XK(t))return tH(t,e,r);if(!YK(t))throw new LK("stream",["ReadableStream","WritableStream","Stream"],t);let i=(n=e.readable)!==null&&n!==void 0?n:pw(t),o=(s=e.writable)!==null&&s!==void 0?s:m5(t),a=t._writableState,u=t._readableState,c=()=>{t.writable||h()},l=ZK(t)&&pw(t)===i&&m5(t)===o,d=y5(t,!1),h=()=>{d=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||i))&&(!i||f)&&r.call(t)},f=f5(t,!1),p=()=>{f=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||o))&&(!o||d)&&r.call(t)},y=I=>{r.call(t,I)},w=JK(t),P=()=>{w=!0;let I=g5(t)||p5(t);if(I&&typeof I!="boolean")return r.call(t,I);if(i&&!f&&pw(t,!0)&&!f5(t,!1))return r.call(t,new l5);if(o&&!d&&!y5(t,!1))return r.call(t,new l5);r.call(t)},C=()=>{w=!0;let I=g5(t)||p5(t);if(I&&typeof I!="boolean")return r.call(t,I);r.call(t)},v=()=>{t.req.on("finish",h)};eH(t)?(t.on("complete",h),l||t.on("abort",P),t.req?v():t.on("request",v)):o&&!a&&(t.on("end",c),t.on("close",c)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",P),t.on("end",p),t.on("finish",h),e.error!==!1&&t.on("error",y),t.on("close",P),w?tu.nextTick(P):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?l||tu.nextTick(C):(!i&&(!l||d5(t))&&(d||h5(t)===!1)||!o&&(!l||h5(t))&&(f||d5(t)===!1)||u&&t.req&&t.aborted)&&tu.nextTick(C);let k=()=>{r=yw,t.removeListener("aborted",P),t.removeListener("complete",h),t.removeListener("abort",P),t.removeListener("request",v),t.req&&t.req.removeListener("finish",h),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",y),t.removeListener("close",P)};if(e.signal&&!w){let I=()=>{let T=r;k(),T.call(t,new v5(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)tu.nextTick(I);else{let T=r;r=mw((...j)=>{e.signal.removeEventListener("abort",I),T.apply(t,j)}),e.signal.addEventListener("abort",I)}}return k}function tH(t,e,r){let n=!1,s=yw;if(e.signal)if(s=()=>{n=!0,r.call(t,new v5(void 0,{cause:e.signal.reason}))},e.signal.aborted)tu.nextTick(s);else{let o=r;r=mw((...a)=>{e.signal.removeEventListener("abort",s),o.apply(t,a)}),e.signal.addEventListener("abort",s)}let i=(...o)=>{n||tu.nextTick(()=>r.apply(t,o))};return zK(t[QK].promise,i,i),yw}function rH(t,e){var r;let n=!1;return e===null&&(e=hw),(r=e)!==null&&r!==void 0&&r.cleanup&&(HK(e.cleanup,"cleanup"),n=e.cleanup),new WK((s,i)=>{let o=b5(t,e,a=>{n&&o(),a?i(a):s()})})}gw.exports=b5;gw.exports.finished=rH});var Dc=D((l0e,C5)=>{"use strict";var Gs=eu(),{aggregateTwoErrors:nH,codes:{ERR_MULTIPLE_CALLBACK:iH},AbortError:sH}=Bn(),{Symbol:_5}=kr(),{kDestroyed:oH,isDestroyed:aH,isFinished:uH,isServerRequest:cH}=Js(),D5=_5("kDestroy"),vw=_5("kConstruct");function S5(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function lH(t,e){let r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(S5(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?w5(this,t,e):this.once(D5,function(i){w5(this,nH(i,t),e)}),this)}function w5(t,e,r){let n=!1;function s(i){if(n)return;n=!0;let o=t._readableState,a=t._writableState;S5(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?Gs.nextTick(dH,t,i):Gs.nextTick(A5,t)}try{t._destroy(e||null,s)}catch(i){s(i)}}function dH(t,e){bw(t,e),A5(t)}function A5(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function bw(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function fH(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function ww(t,e,r){let n=t._readableState,s=t._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?t.destroy(e):e&&(e.stack,s&&!s.errored&&(s.errored=e),n&&!n.errored&&(n.errored=e),r?Gs.nextTick(bw,t,e):bw(t,e))}function pH(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(vw,e),!(t.listenerCount(vw)>1)&&Gs.nextTick(hH,t)}function hH(t){let e=!1;function r(n){if(e){ww(t,n??new iH);return}e=!0;let s=t._readableState,i=t._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?t.emit(D5,n):n?ww(t,n,!0):Gs.nextTick(mH,t)}try{t._construct(n=>{Gs.nextTick(r,n)})}catch(n){Gs.nextTick(r,n)}}function mH(t){t.emit(vw)}function E5(t){return t?.setHeader&&typeof t.abort=="function"}function x5(t){t.emit("close")}function yH(t,e){t.emit("error",e),Gs.nextTick(x5,t)}function gH(t,e){!t||aH(t)||(!e&&!uH(t)&&(e=new sH),cH(t)?(t.socket=null,t.destroy(e)):E5(t)?t.abort():E5(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Gs.nextTick(yH,t,e):Gs.nextTick(x5,t),t.destroyed||(t[oH]=!0))}C5.exports={construct:pH,destroyer:gH,destroy:lH,undestroy:fH,errorOrDestroy:ww}});var Ny=D((d0e,O5)=>{"use strict";var{ArrayIsArray:vH,ObjectSetPrototypeOf:P5}=kr(),{EventEmitter:$y}=cp();function Ry(t){$y.call(this,t)}P5(Ry.prototype,$y.prototype);P5(Ry,$y);Ry.prototype.pipe=function(t,e){let r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function u(l){c(),$y.listenerCount(this,"error")===0&&this.emit("error",l)}Ew(r,"error",u),Ew(t,"error",u);function c(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function Ew(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):vH(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}O5.exports={Stream:Ry,prependListener:Ew}});var Cp=D((f0e,jy)=>{"use strict";var{AbortError:k5,codes:bH}=Bn(),{isNodeStream:I5,isWebStream:wH,kControllerErrorFunction:EH}=Js(),_H=Jo(),{ERR_INVALID_ARG_TYPE:B5}=bH,DH=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new B5(e,"AbortSignal",t)};jy.exports.addAbortSignal=function(e,r){if(DH(e,"signal"),!I5(r)&&!wH(r))throw new B5("stream",["ReadableStream","WritableStream","Stream"],r);return jy.exports.addAbortSignalNoValidate(e,r)};jy.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=I5(e)?()=>{e.destroy(new k5(void 0,{cause:t.reason}))}:()=>{e[EH](new k5(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),_H(e,()=>t.removeEventListener("abort",r))),e}});var $5=D((h0e,F5)=>{"use strict";var{StringPrototypeSlice:T5,SymbolIterator:SH,TypedArrayPrototypeSet:qy,Uint8Array:AH}=kr(),{Buffer:_w}=Pi(),{inspect:xH}=Ks();F5.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return _w.alloc(0);let r=_w.allocUnsafe(e>>>0),n=this.head,s=0;for(;n;)qy(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let s=n.slice(0,e);return this.head.data=n.slice(e),s}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[SH](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,s=0;do{let i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=T5(i,0,e),this.head=n,n.data=T5(i,e));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(e){let r=_w.allocUnsafe(e),n=e,s=this.head,i=0;do{let o=s.data;if(e>o.length)qy(r,o,n-e),e-=o.length;else{e===o.length?(qy(r,o,n-e),++i,s.next?this.head=s.next:this.head=this.tail=null):(qy(r,new AH(o.buffer,o.byteOffset,e),n-e),this.head=s,s.data=o.slice(e));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return xH(this,{...r,depth:0,customInspect:!1})}}});var My=D((m0e,N5)=>{"use strict";var{MathFloor:CH,NumberIsInteger:PH}=kr(),{ERR_INVALID_ARG_VALUE:OH}=Bn().codes;function kH(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function R5(t){return t?16:16*1024}function IH(t,e,r,n){let s=kH(e,n,r);if(s!=null){if(!PH(s)||s<0){let i=n?`options.${r}`:"options.highWaterMark";throw new OH(i,s)}return CH(s)}return R5(t.objectMode)}N5.exports={getHighWaterMark:IH,getDefaultHighWaterMark:R5}});var M5=D((Dw,q5)=>{var Ly=Pi(),Xs=Ly.Buffer;function j5(t,e){for(var r in t)e[r]=t[r]}Xs.from&&Xs.alloc&&Xs.allocUnsafe&&Xs.allocUnsafeSlow?q5.exports=Ly:(j5(Ly,Dw),Dw.Buffer=Sc);function Sc(t,e,r){return Xs(t,e,r)}Sc.prototype=Object.create(Xs.prototype);j5(Xs,Sc);Sc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Xs(t,e,r)};Sc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Xs(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Sc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Xs(t)};Sc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ly.SlowBuffer(t)}});var V5=D(U5=>{"use strict";var Aw=M5().Buffer,L5=Aw.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function BH(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function TH(t){var e=BH(t);if(typeof e!="string"&&(Aw.isEncoding===L5||!L5(t)))throw new Error("Unknown encoding: "+t);return e||t}U5.StringDecoder=Pp;function Pp(t){this.encoding=TH(t);var e;switch(this.encoding){case"utf16le":this.text=qH,this.end=MH,e=4;break;case"utf8":this.fillLast=RH,e=4;break;case"base64":this.text=LH,this.end=UH,e=3;break;default:this.write=VH,this.end=KH;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Aw.allocUnsafe(e)}Pp.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Pp.prototype.end=jH;Pp.prototype.text=NH;Pp.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Sw(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function FH(t,e,r){var n=e.length-1;if(n<r)return 0;var s=Sw(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=Sw(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=Sw(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function $H(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function RH(t){var e=this.lastTotal-this.lastNeed,r=$H(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function NH(t,e){var r=FH(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function jH(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function qH(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function MH(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function LH(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function UH(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function VH(t){return t.toString(this.encoding)}function KH(t){return t&&t.length?this.write(t):""}});var xw=D((g0e,z5)=>{"use strict";var K5=eu(),{PromisePrototypeThen:HH,SymbolAsyncIterator:H5,SymbolIterator:W5}=kr(),{Buffer:WH}=Pi(),{ERR_INVALID_ARG_TYPE:zH,ERR_STREAM_NULL_VALUES:JH}=Bn().codes;function GH(t,e,r){let n;if(typeof e=="string"||e instanceof WH)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let s;if(e&&e[H5])s=!0,n=e[H5]();else if(e&&e[W5])s=!1,n=e[W5]();else throw new zH("iterable",["Iterable"],e);let i=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;i._read=function(){o||(o=!0,u())},i._destroy=function(c,l){HH(a(c),()=>K5.nextTick(l,c),d=>K5.nextTick(l,d||c))};async function a(c){let l=c!=null,d=typeof n.throw=="function";if(l&&d){let{value:h,done:f}=await n.throw(c);if(await h,f)return}if(typeof n.return=="function"){let{value:h}=await n.return();await h}}async function u(){for(;;){try{let{value:c,done:l}=s?await n.next():n.next();if(l)i.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new JH;if(i.push(d))continue;o=!1}}catch(c){i.destroy(c)}break}}return i}z5.exports=GH});var Op=D((v0e,o3)=>{var ds=eu(),{ArrayPrototypeIndexOf:XH,NumberIsInteger:YH,NumberIsNaN:ZH,NumberParseInt:QH,ObjectDefineProperties:X5,ObjectKeys:eW,ObjectSetPrototypeOf:Y5,Promise:tW,SafeSet:rW,SymbolAsyncIterator:nW,Symbol:iW}=kr();o3.exports=ut;ut.ReadableState=Bw;var{EventEmitter:sW}=cp(),{Stream:ru,prependListener:oW}=Ny(),{Buffer:Cw}=Pi(),{addAbortSignal:aW}=Cp(),uW=Jo(),yt=Ks().debuglog("stream",t=>{yt=t}),cW=$5(),id=Dc(),{getHighWaterMark:lW,getDefaultHighWaterMark:dW}=My(),{aggregateTwoErrors:J5,codes:{ERR_INVALID_ARG_TYPE:fW,ERR_METHOD_NOT_IMPLEMENTED:pW,ERR_OUT_OF_RANGE:hW,ERR_STREAM_PUSH_AFTER_EOF:mW,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:yW}}=Bn(),{validateObject:gW}=xp(),Ac=iW("kPaused"),{StringDecoder:Z5}=V5(),vW=xw();Y5(ut.prototype,ru.prototype);Y5(ut,ru);var Pw=()=>{},{errorOrDestroy:nd}=id;function Bw(t,e,r){typeof r!="boolean"&&(r=e instanceof Ys()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?lW(this,t,"readableHighWaterMark",r):dW(!1),this.buffer=new cW,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[Ac]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Z5(t.encoding),this.encoding=t.encoding)}function ut(t){if(!(this instanceof ut))return new ut(t);let e=this instanceof Ys();this._readableState=new Bw(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&aW(t.signal,this)),ru.call(this,t),id.construct(this,()=>{this._readableState.needReadable&&Uy(this,this._readableState)})}ut.prototype.destroy=id.destroy;ut.prototype._undestroy=id.undestroy;ut.prototype._destroy=function(t,e){e(t)};ut.prototype[sW.captureRejectionSymbol]=function(t){this.destroy(t)};ut.prototype.push=function(t,e){return Q5(this,t,e,!1)};ut.prototype.unshift=function(t,e){return Q5(this,t,e,!0)};function Q5(t,e,r,n){yt("readableAddChunk",e);let s=t._readableState,i;if(s.objectMode||(typeof e=="string"?(r=r||s.defaultEncoding,s.encoding!==r&&(n&&s.encoding?e=Cw.from(e,r).toString(s.encoding):(e=Cw.from(e,r),r=""))):e instanceof Cw?r="":ru._isUint8Array(e)?(e=ru._uint8ArrayToBuffer(e),r=""):e!=null&&(i=new fW("chunk",["string","Buffer","Uint8Array"],e))),i)nd(t,i);else if(e===null)s.reading=!1,EW(t,s);else if(s.objectMode||e&&e.length>0)if(n)if(s.endEmitted)nd(t,new yW);else{if(s.destroyed||s.errored)return!1;Ow(t,s,e,!0)}else if(s.ended)nd(t,new mW);else{if(s.destroyed||s.errored)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Ow(t,s,e,!1):Uy(t,s)):Ow(t,s,e,!1)}else n||(s.reading=!1,Uy(t,s));return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Ow(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Vy(t)),Uy(t,e)}ut.prototype.isPaused=function(){let t=this._readableState;return t[Ac]===!0||t.flowing===!1};ut.prototype.setEncoding=function(t){let e=new Z5(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let s of r)n+=e.write(s);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var bW=1073741824;function wW(t){if(t>bW)throw new hW("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function G5(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:ZH(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}ut.prototype.read=function(t){yt("read",t),t===void 0?t=NaN:YH(t)||(t=QH(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=wW(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return yt("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?kw(this):Vy(this),null;if(t=G5(t,e),t===0&&e.ended)return e.length===0&&kw(this),null;let n=e.needReadable;if(yt("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,yt("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,yt("reading, ended or constructing",n);else if(n){yt("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(i){nd(this,i)}e.sync=!1,e.reading||(t=G5(r,e))}let s;return t>0?s=i3(t,e):s=null,s===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&kw(this)),s!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",s)),s};function EW(t,e){if(yt("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Vy(t):(e.needReadable=!1,e.emittedReadable=!0,e3(t))}}function Vy(t){let e=t._readableState;yt("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(yt("emitReadable",e.flowing),e.emittedReadable=!0,ds.nextTick(e3,t))}function e3(t){let e=t._readableState;yt("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,r3(t)}function Uy(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,ds.nextTick(_W,t,e))}function _W(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(yt("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}ut.prototype._read=function(t){throw new pW("_read()")};ut.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new rW(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),yt("pipe count=%d opts=%j",n.pipes.length,e);let i=(!e||e.end!==!1)&&t!==ds.stdout&&t!==ds.stderr?a:w;n.endEmitted?ds.nextTick(i):r.once("end",i),t.on("unpipe",o);function o(P,C){yt("onunpipe"),P===r&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,l())}function a(){yt("onend"),t.end()}let u,c=!1;function l(){yt("cleanup"),t.removeListener("close",p),t.removeListener("finish",y),u&&t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",w),r.removeListener("data",h),c=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(yt("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(yt("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=DW(r,t),t.on("drain",u))}r.on("data",h);function h(P){yt("ondata");let C=t.write(P);yt("dest.write",C),C===!1&&d()}function f(P){if(yt("onerror",P),w(),t.removeListener("error",f),t.listenerCount("error")===0){let C=t._writableState||t._readableState;C&&!C.errorEmitted?nd(t,P):t.emit("error",P)}}oW(t,"error",f);function p(){t.removeListener("finish",y),w()}t.once("close",p);function y(){yt("onfinish"),t.removeListener("close",p),w()}t.once("finish",y);function w(){yt("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&d():n.flowing||(yt("pipe resume"),r.resume()),t};function DW(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(yt("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(yt("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}ut.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let s=e.pipes;e.pipes=[],this.pause();for(let i=0;i<s.length;i++)s[i].emit("unpipe",this,{hasUnpiped:!1});return this}let n=XH(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};ut.prototype.on=function(t,e){let r=ru.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,yt("on readable",n.length,n.reading),n.length?Vy(this):n.reading||ds.nextTick(SW,this)),r};ut.prototype.addListener=ut.prototype.on;ut.prototype.removeListener=function(t,e){let r=ru.prototype.removeListener.call(this,t,e);return t==="readable"&&ds.nextTick(t3,this),r};ut.prototype.off=ut.prototype.removeListener;ut.prototype.removeAllListeners=function(t){let e=ru.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&ds.nextTick(t3,this),e};function t3(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Ac]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function SW(t){yt("readable nexttick read 0"),t.read(0)}ut.prototype.resume=function(){let t=this._readableState;return t.flowing||(yt("resume"),t.flowing=!t.readableListening,AW(this,t)),t[Ac]=!1,this};function AW(t,e){e.resumeScheduled||(e.resumeScheduled=!0,ds.nextTick(xW,t,e))}function xW(t,e){yt("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),r3(t),e.flowing&&!e.reading&&t.read(0)}ut.prototype.pause=function(){return yt("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(yt("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ac]=!0,this};function r3(t){let e=t._readableState;for(yt("flow",e.flowing);e.flowing&&t.read()!==null;);}ut.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{nd(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=eW(t);for(let n=1;n<r.length;n++){let s=r[n];this[s]===void 0&&typeof t[s]=="function"&&(this[s]=t[s].bind(t))}return this};ut.prototype[nW]=function(){return n3(this)};ut.prototype.iterator=function(t){return t!==void 0&&gW(t,"options"),n3(this,t)};function n3(t,e){typeof t.read!="function"&&(t=ut.wrap(t,{objectMode:!0}));let r=CW(t,e);return r.stream=t,r}async function*CW(t,e){let r=Pw;function n(o){this===t?(r(),r=Pw):r=o}t.on("readable",n);let s,i=uW(t,{writable:!1},o=>{s=o?J5(s,o):null,r(),r=Pw});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(s)throw s;if(s===null)return;await new tW(n)}}}catch(o){throw s=J5(s,o),s}finally{(s||e?.destroyOnReturn!==!1)&&(s===void 0||t._readableState.autoDestroy)?id.destroyer(t,null):(t.off("readable",n),i())}}X5(ut.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});X5(Bw.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Ac]!==!1},set(t){this[Ac]=!!t}}});ut._fromList=i3;function i3(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function kw(t){let e=t._readableState;yt("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,ds.nextTick(PW,e,t))}function PW(t,e){if(yt("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)ds.nextTick(OW,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function OW(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}ut.from=function(t,e){return vW(ut,t,e)};var Iw;function s3(){return Iw===void 0&&(Iw={}),Iw}ut.fromWeb=function(t,e){return s3().newStreamReadableFromReadableStream(t,e)};ut.toWeb=function(t,e){return s3().newReadableStreamFromStreamReadable(t,e)};ut.wrap=function(t,e){var r,n;return new ut({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(s,i){id.destroyer(t,s),i(s)}}).wrap(t)}});var qw=D((b0e,v3)=>{var xc=eu(),{ArrayPrototypeSlice:c3,Error:kW,FunctionPrototypeSymbolHasInstance:l3,ObjectDefineProperty:d3,ObjectDefineProperties:IW,ObjectSetPrototypeOf:f3,StringPrototypeToLowerCase:BW,Symbol:TW,SymbolHasInstance:FW}=kr();v3.exports=ur;ur.WritableState=Bp;var{EventEmitter:$W}=cp(),kp=Ny().Stream,{Buffer:Ky}=Pi(),zy=Dc(),{addAbortSignal:RW}=Cp(),{getHighWaterMark:NW,getDefaultHighWaterMark:jW}=My(),{ERR_INVALID_ARG_TYPE:qW,ERR_METHOD_NOT_IMPLEMENTED:MW,ERR_MULTIPLE_CALLBACK:p3,ERR_STREAM_CANNOT_PIPE:LW,ERR_STREAM_DESTROYED:Ip,ERR_STREAM_ALREADY_FINISHED:UW,ERR_STREAM_NULL_VALUES:VW,ERR_STREAM_WRITE_AFTER_END:KW,ERR_UNKNOWN_ENCODING:h3}=Bn().codes,{errorOrDestroy:sd}=zy;f3(ur.prototype,kp.prototype);f3(ur,kp);function $w(){}var od=TW("kOnFinished");function Bp(t,e,r){typeof r!="boolean"&&(r=e instanceof Ys()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?NW(this,t,"writableHighWaterMark",r):jW(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=WW.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Wy(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[od]=[]}function Wy(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}Bp.prototype.getBuffer=function(){return c3(this.buffered,this.bufferedIndex)};d3(Bp.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ur(t){let e=this instanceof Ys();if(!e&&!l3(ur,this))return new ur(t);this._writableState=new Bp(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&RW(t.signal,this)),kp.call(this,t),zy.construct(this,()=>{let r=this._writableState;r.writing||Nw(this,r),jw(this,r)})}d3(ur,FW,{__proto__:null,value:function(t){return l3(this,t)?!0:this!==ur?!1:t&&t._writableState instanceof Bp}});ur.prototype.pipe=function(){sd(this,new LW)};function m3(t,e,r,n){let s=t._writableState;if(typeof r=="function")n=r,r=s.defaultEncoding;else{if(!r)r=s.defaultEncoding;else if(r!=="buffer"&&!Ky.isEncoding(r))throw new h3(r);typeof n!="function"&&(n=$w)}if(e===null)throw new VW;if(!s.objectMode)if(typeof e=="string")s.decodeStrings!==!1&&(e=Ky.from(e,r),r="buffer");else if(e instanceof Ky)r="buffer";else if(kp._isUint8Array(e))e=kp._uint8ArrayToBuffer(e),r="buffer";else throw new qW("chunk",["string","Buffer","Uint8Array"],e);let i;return s.ending?i=new KW:s.destroyed&&(i=new Ip("write")),i?(xc.nextTick(n,i),sd(t,i,!0),i):(s.pendingcb++,HW(t,s,e,r,n))}ur.prototype.write=function(t,e,r){return m3(this,t,e,r)===!0};ur.prototype.cork=function(){this._writableState.corked++};ur.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||Nw(this,t))};ur.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=BW(e)),!Ky.isEncoding(e))throw new h3(e);return this._writableState.defaultEncoding=e,this};function HW(t,e,r,n,s){let i=e.objectMode?1:r.length;e.length+=i;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:s}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&s!==$w&&(e.allNoop=!1)):(e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function a3(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new Ip("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1}function u3(t,e,r,n){--e.pendingcb,n(r),Rw(e),sd(t,r)}function WW(t,e){let r=t._writableState,n=r.sync,s=r.writecb;if(typeof s!="function"){sd(t,new p3);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?xc.nextTick(u3,t,r,e,s):u3(t,r,e,s)):(r.buffered.length>r.bufferedIndex&&Nw(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===s?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:s,stream:t,state:r},xc.nextTick(zW,r.afterWriteTickInfo)):y3(t,r,1,s))}function zW({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,y3(t,e,r,n)}function y3(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&Rw(e),jw(t,e)}function Rw(t){if(t.writing)return;for(let s=t.bufferedIndex;s<t.buffered.length;++s){var e;let{chunk:i,callback:o}=t.buffered[s],a=t.objectMode?1:i.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new Ip("write"))}let r=t[od].splice(0);for(let s=0;s<r.length;s++){var n;r[s]((n=t.errored)!==null&&n!==void 0?n:new Ip("end"))}Wy(t)}function Nw(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:s}=e,i=r.length-n;if(!i)return;let o=n;if(e.bufferProcessing=!0,i>1&&t._writev){e.pendingcb-=i-1;let a=e.allNoop?$w:c=>{for(let l=o;l<r.length;++l)r[l].callback(c)},u=e.allNoop&&o===0?r:c3(r,o);u.allBuffers=e.allBuffers,a3(t,e,!0,e.length,u,"",a),Wy(e)}else{do{let{chunk:a,encoding:u,callback:c}=r[o];r[o++]=null;let l=s?1:a.length;a3(t,e,!1,l,a,u,c)}while(o<r.length&&!e.writing);o===r.length?Wy(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ur.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new MW("_write()")};ur.prototype._writev=null;ur.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let s;if(t!=null){let i=m3(this,t,e);i instanceof kW&&(s=i)}return n.corked&&(n.corked=1,this.uncork()),s||(!n.errored&&!n.ending?(n.ending=!0,jw(this,n,!0),n.ended=!0):n.finished?s=new UW("end"):n.destroyed&&(s=new Ip("end"))),typeof r=="function"&&(s||n.finished?xc.nextTick(r,s):n[od].push(r)),this};function Hy(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function JW(t,e){let r=!1;function n(s){if(r){sd(t,s??p3());return}if(r=!0,e.pendingcb--,s){let i=e[od].splice(0);for(let o=0;o<i.length;o++)i[o](s);sd(t,s,e.sync)}else Hy(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,xc.nextTick(Fw,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(s){n(s)}e.sync=!1}function GW(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,JW(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function jw(t,e,r){Hy(e)&&(GW(t,e),e.pendingcb===0&&(r?(e.pendingcb++,xc.nextTick((n,s)=>{Hy(s)?Fw(n,s):s.pendingcb--},t,e)):Hy(e)&&(e.pendingcb++,Fw(t,e))))}function Fw(t,e){e.pendingcb--,e.finished=!0;let r=e[od].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}IW(ur.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var XW=zy.destroy;ur.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[od].length)&&xc.nextTick(Rw,r),XW.call(this,t,e),this};ur.prototype._undestroy=zy.undestroy;ur.prototype._destroy=function(t,e){e(t)};ur.prototype[$W.captureRejectionSymbol]=function(t){this.destroy(t)};var Tw;function g3(){return Tw===void 0&&(Tw={}),Tw}ur.fromWeb=function(t,e){return g3().newStreamWritableFromWritableStream(t,e)};ur.toWeb=function(t){return g3().newWritableStreamFromStreamWritable(t)}});var k3=D((w0e,O3)=>{var Mw=eu(),YW=Pi(),{isReadable:ZW,isWritable:QW,isIterable:b3,isNodeStream:ez,isReadableNodeStream:w3,isWritableNodeStream:E3,isDuplexNodeStream:tz}=Js(),_3=Jo(),{AbortError:P3,codes:{ERR_INVALID_ARG_TYPE:rz,ERR_INVALID_RETURN_VALUE:D3}}=Bn(),{destroyer:ad}=Dc(),nz=Ys(),iz=Op(),{createDeferredPromise:S3}=Ks(),A3=xw(),x3=globalThis.Blob||YW.Blob,sz=typeof x3<"u"?function(e){return e instanceof x3}:function(e){return!1},oz=globalThis.AbortController||Cy().AbortController,{FunctionPrototypeCall:C3}=kr(),Cc=class extends nz{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};O3.exports=function t(e,r){if(tz(e))return e;if(w3(e))return Jy({readable:e});if(E3(e))return Jy({writable:e});if(ez(e))return Jy({writable:!1,readable:!1});if(typeof e=="function"){let{value:s,write:i,final:o,destroy:a}=az(e);if(b3(s))return A3(Cc,s,{objectMode:!0,write:i,final:o,destroy:a});let u=s?.then;if(typeof u=="function"){let c,l=C3(u,s,d=>{if(d!=null)throw new D3("nully","body",d)},d=>{ad(c,d)});return c=new Cc({objectMode:!0,readable:!1,write:i,final(d){o(async()=>{try{await l,Mw.nextTick(d,null)}catch(h){Mw.nextTick(d,h)}})},destroy:a})}throw new D3("Iterable, AsyncIterable or AsyncFunction",r,s)}if(sz(e))return t(e.arrayBuffer());if(b3(e))return A3(Cc,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let s=e!=null&&e.readable?w3(e?.readable)?e?.readable:t(e.readable):void 0,i=e!=null&&e.writable?E3(e?.writable)?e?.writable:t(e.writable):void 0;return Jy({readable:s,writable:i})}let n=e?.then;if(typeof n=="function"){let s;return C3(n,e,i=>{i!=null&&s.push(i),s.push(null)},i=>{ad(s,i)}),s=new Cc({objectMode:!0,writable:!1,read(){}})}throw new rz(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function az(t){let{promise:e,resolve:r}=S3(),n=new oz,s=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:u,cb:c}=await o;if(Mw.nextTick(c),u)return;if(s.aborted)throw new P3(void 0,{cause:s.reason});({promise:e,resolve:r}=S3()),yield a}}(),{signal:s}),write(o,a,u){let c=r;r=null,c({chunk:o,done:!1,cb:u})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function Jy(t){let e=t.readable&&typeof t.readable.read!="function"?iz.wrap(t.readable):t.readable,r=t.writable,n=!!ZW(e),s=!!QW(r),i,o,a,u,c;function l(d){let h=u;u=null,h?h(d):d&&c.destroy(d)}return c=new Cc({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:s}),s&&(_3(r,d=>{s=!1,d&&ad(e,d),l(d)}),c._write=function(d,h,f){r.write(d,h)?f():i=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(i){let d=i;i=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(_3(e,d=>{n=!1,d&&ad(e,d),l(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,h){!d&&u!==null&&(d=new P3),a=null,i=null,o=null,u===null?h(d):(u=h,ad(r,d),ad(e,d))},c}});var Ys=D((E0e,T3)=>{"use strict";var{ObjectDefineProperties:uz,ObjectGetOwnPropertyDescriptor:Go,ObjectKeys:cz,ObjectSetPrototypeOf:I3}=kr();T3.exports=fs;var Vw=Op(),Bi=qw();I3(fs.prototype,Vw.prototype);I3(fs,Vw);{let t=cz(Bi.prototype);for(let e=0;e<t.length;e++){let r=t[e];fs.prototype[r]||(fs.prototype[r]=Bi.prototype[r])}}function fs(t){if(!(this instanceof fs))return new fs(t);Vw.call(this,t),Bi.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}uz(fs.prototype,{writable:{__proto__:null,...Go(Bi.prototype,"writable")},writableHighWaterMark:{__proto__:null,...Go(Bi.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...Go(Bi.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...Go(Bi.prototype,"writableBuffer")},writableLength:{__proto__:null,...Go(Bi.prototype,"writableLength")},writableFinished:{__proto__:null,...Go(Bi.prototype,"writableFinished")},writableCorked:{__proto__:null,...Go(Bi.prototype,"writableCorked")},writableEnded:{__proto__:null,...Go(Bi.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...Go(Bi.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Lw;function B3(){return Lw===void 0&&(Lw={}),Lw}fs.fromWeb=function(t,e){return B3().newStreamDuplexFromReadableWritablePair(t,e)};fs.toWeb=function(t){return B3().newReadableWritablePairFromDuplex(t)};var Uw;fs.from=function(t){return Uw||(Uw=k3()),Uw(t,"body")}});var Ww=D((_0e,$3)=>{"use strict";var{ObjectSetPrototypeOf:F3,Symbol:lz}=kr();$3.exports=Xo;var{ERR_METHOD_NOT_IMPLEMENTED:dz}=Bn().codes,Hw=Ys(),{getHighWaterMark:fz}=My();F3(Xo.prototype,Hw.prototype);F3(Xo,Hw);var Tp=lz("kCallback");function Xo(t){if(!(this instanceof Xo))return new Xo(t);let e=t?fz(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Hw.call(this,t),this._readableState.sync=!1,this[Tp]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",pz)}function Kw(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function pz(){this._final!==Kw&&Kw.call(this)}Xo.prototype._final=Kw;Xo.prototype._transform=function(t,e,r){throw new dz("_transform()")};Xo.prototype._write=function(t,e,r){let n=this._readableState,s=this._writableState,i=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[Tp]=r})};Xo.prototype._read=function(){if(this[Tp]){let t=this[Tp];this[Tp]=null,t()}}});var Jw=D((D0e,N3)=>{"use strict";var{ObjectSetPrototypeOf:R3}=kr();N3.exports=ud;var zw=Ww();R3(ud.prototype,zw.prototype);R3(ud,zw);function ud(t){if(!(this instanceof ud))return new ud(t);zw.call(this,t)}ud.prototype._transform=function(t,e,r){r(null,t)}});var Zy=D((S0e,U3)=>{var Fp=eu(),{ArrayIsArray:hz,Promise:mz,SymbolAsyncIterator:yz}=kr(),Yy=Jo(),{once:gz}=Ks(),vz=Dc(),j3=Ys(),{aggregateTwoErrors:bz,codes:{ERR_INVALID_ARG_TYPE:rE,ERR_INVALID_RETURN_VALUE:Gw,ERR_MISSING_ARGS:wz,ERR_STREAM_DESTROYED:Ez,ERR_STREAM_PREMATURE_CLOSE:_z},AbortError:Dz}=Bn(),{validateFunction:Sz,validateAbortSignal:Az}=xp(),{isIterable:Pc,isReadable:Xw,isReadableNodeStream:Xy,isNodeStream:q3,isTransformStream:cd,isWebStream:xz,isReadableStream:Yw,isReadableEnded:Cz}=Js(),Pz=globalThis.AbortController||Cy().AbortController,Zw,Qw;function M3(t,e,r){let n=!1;t.on("close",()=>{n=!0});let s=Yy(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,vz.destroyer(t,i||new Ez("pipe")))},cleanup:s}}function Oz(t){return Sz(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function eE(t){if(Pc(t))return t;if(Xy(t))return kz(t);throw new rE("val",["Readable","Iterable","AsyncIterable"],t)}async function*kz(t){Qw||(Qw=Op()),yield*Qw.prototype[yz].call(t)}async function Gy(t,e,r,{end:n}){let s,i=null,o=c=>{if(c&&(s=c),i){let l=i;i=null,l()}},a=()=>new mz((c,l)=>{s?l(s):i=()=>{s?l(s):c()}});e.on("drain",o);let u=Yy(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&e.end(),await a(),r()}catch(c){r(s!==c?bz(s,c):c)}finally{u(),e.off("drain",o)}}async function tE(t,e,r,{end:n}){cd(e)&&(e=e.writable);let s=e.getWriter();try{for await(let i of t)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function Iz(...t){return L3(t,gz(Oz(t)))}function L3(t,e,r){if(t.length===1&&hz(t[0])&&(t=t[0]),t.length<2)throw new wz("streams");let n=new Pz,s=n.signal,i=r?.signal,o=[];Az(i,"options.signal");function a(){f(new Dz)}i?.addEventListener("abort",a);let u,c,l=[],d=0;function h(C){f(C,--d===0)}function f(C,v){if(C&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=C),!(!u&&!v)){for(;l.length;)l.shift()(u);i?.removeEventListener("abort",a),n.abort(),v&&(u||o.forEach(k=>k()),Fp.nextTick(e,u,c))}}let p;for(let C=0;C<t.length;C++){let v=t[C],k=C<t.length-1,I=C>0,T=k||r?.end!==!1,j=C===t.length-1;if(q3(v)){let g=function(b){b&&b.name!=="AbortError"&&b.code!=="ERR_STREAM_PREMATURE_CLOSE"&&h(b)};var P=g;if(T){let{destroy:b,cleanup:E}=M3(v,k,I);l.push(b),Xw(v)&&j&&o.push(E)}v.on("error",g),Xw(v)&&j&&o.push(()=>{v.removeListener("error",g)})}if(C===0)if(typeof v=="function"){if(p=v({signal:s}),!Pc(p))throw new Gw("Iterable, AsyncIterable or Stream","source",p)}else Pc(v)||Xy(v)||cd(v)?p=v:p=j3.from(v);else if(typeof v=="function"){if(cd(p)){var y;p=eE((y=p)===null||y===void 0?void 0:y.readable)}else p=eE(p);if(p=v(p,{signal:s}),k){if(!Pc(p,!0))throw new Gw("AsyncIterable",`transform[${C-1}]`,p)}else{var w;Zw||(Zw=Jw());let g=new Zw({objectMode:!0}),b=(w=p)===null||w===void 0?void 0:w.then;if(typeof b=="function")d++,b.call(p,S=>{c=S,S!=null&&g.write(S),T&&g.end(),Fp.nextTick(h)},S=>{g.destroy(S),Fp.nextTick(h,S)});else if(Pc(p,!0))d++,Gy(p,g,h,{end:T});else if(Yw(p)||cd(p)){let S=p.readable||p;d++,Gy(S,g,h,{end:T})}else throw new Gw("AsyncIterable or Promise","destination",p);p=g;let{destroy:E,cleanup:B}=M3(p,!1,!0);l.push(E),j&&o.push(B)}}else if(q3(v)){if(Xy(p)){d+=2;let g=Bz(p,v,h,{end:T});Xw(v)&&j&&o.push(g)}else if(cd(p)||Yw(p)){let g=p.readable||p;d++,Gy(g,v,h,{end:T})}else if(Pc(p))d++,Gy(p,v,h,{end:T});else throw new rE("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=v}else if(xz(v)){if(Xy(p))d++,tE(eE(p),v,h,{end:T});else if(Yw(p)||Pc(p))d++,tE(p,v,h,{end:T});else if(cd(p))d++,tE(p.readable,v,h,{end:T});else throw new rE("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],p);p=v}else p=j3.from(v)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&Fp.nextTick(a),p}function Bz(t,e,r,{end:n}){let s=!1;if(e.on("close",()=>{s||r(new _z)}),t.pipe(e,{end:!1}),n){let o=function(){s=!0,e.end()};var i=o;Cz(t)?Fp.nextTick(o):t.once("end",o)}else r();return Yy(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Yy(e,{readable:!1,writable:!0},r)}U3.exports={pipelineImpl:L3,pipeline:Iz}});var iE=D((A0e,J3)=>{"use strict";var{pipeline:Tz}=Zy(),Qy=Ys(),{destroyer:Fz}=Dc(),{isNodeStream:e0,isReadable:V3,isWritable:K3,isWebStream:nE,isTransformStream:Oc,isWritableStream:H3,isReadableStream:W3}=Js(),{AbortError:$z,codes:{ERR_INVALID_ARG_VALUE:z3,ERR_MISSING_ARGS:Rz}}=Bn(),Nz=Jo();J3.exports=function(...e){if(e.length===0)throw new Rz("streams");if(e.length===1)return Qy.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Qy.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Qy.from(e[f])}for(let f=0;f<e.length;++f)if(!(!e0(e[f])&&!nE(e[f]))){if(f<e.length-1&&!(V3(e[f])||W3(e[f])||Oc(e[f])))throw new z3(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(K3(e[f])||H3(e[f])||Oc(e[f])))throw new z3(`streams[${f}]`,r[f],"must be writable")}let n,s,i,o,a;function u(f){let p=o;o=null,p?p(f):f?a.destroy(f):!h&&!d&&a.destroy()}let c=e[0],l=Tz(e,u),d=!!(K3(c)||H3(c)||Oc(c)),h=!!(V3(l)||W3(l)||Oc(l));if(a=new Qy({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(l!=null&&l.writableObjectMode),writable:d,readable:h}),d){if(e0(c))a._write=function(p,y,w){c.write(p,y)?w():n=w},a._final=function(p){c.end(),s=p},c.on("drain",function(){if(n){let p=n;n=null,p()}});else if(nE(c)){let y=(Oc(c)?c.writable:c).getWriter();a._write=async function(w,P,C){try{await y.ready,y.write(w).catch(()=>{}),C()}catch(v){C(v)}},a._final=async function(w){try{await y.ready,y.close().catch(()=>{}),s=w}catch(P){w(P)}}}let f=Oc(l)?l.readable:l;Nz(f,()=>{if(s){let p=s;s=null,p()}})}if(h){if(e0(l))l.on("readable",function(){if(i){let f=i;i=null,f()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=l.read();if(f===null){i=a._read;return}if(!a.push(f))return}};else if(nE(l)){let p=(Oc(l)?l.readable:l).getReader();a._read=async function(){for(;;)try{let{value:y,done:w}=await p.read();if(!a.push(y))return;if(w){a.push(null);return}}catch{return}}}}return a._destroy=function(f,p){!f&&o!==null&&(f=new $z),i=null,n=null,s=null,o===null?p(f):(o=p,e0(l)&&Fz(l,f))},a}});var r8=D((x0e,aE)=>{"use strict";var Z3=globalThis.AbortController||Cy().AbortController,{codes:{ERR_INVALID_ARG_VALUE:jz,ERR_INVALID_ARG_TYPE:$p,ERR_MISSING_ARGS:qz,ERR_OUT_OF_RANGE:Mz},AbortError:Zs}=Bn(),{validateAbortSignal:kc,validateInteger:Lz,validateObject:Ic}=xp(),Uz=kr().Symbol("kWeak"),{finished:Vz}=Jo(),Kz=iE(),{addAbortSignalNoValidate:Hz}=Cp(),{isWritable:Wz,isNodeStream:zz}=Js(),{ArrayPrototypePush:Jz,MathFloor:Gz,Number:Xz,NumberIsNaN:Yz,Promise:G3,PromiseReject:X3,PromisePrototypeThen:Zz,Symbol:Q3}=kr(),t0=Q3("kEmpty"),Y3=Q3("kEof");function Qz(t,e){if(e!=null&&Ic(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal"),zz(t)&&!Wz(t))throw new jz("stream",t,"must be writable");let r=Kz(this,t);return e!=null&&e.signal&&Hz(e.signal,r),r}function r0(t,e){if(typeof t!="function")throw new $p("fn",["Function","AsyncFunction"],t);e!=null&&Ic(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=Gz(e.concurrency)),Lz(r,"concurrency",1),async function*(){var s,i;let o=new Z3,a=this,u=[],c=o.signal,l={signal:c},d=()=>o.abort();e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted&&d(),e==null||(i=e.signal)===null||i===void 0||i.addEventListener("abort",d);let h,f,p=!1;function y(){p=!0}async function w(){try{for await(let v of a){var P;if(p)return;if(c.aborted)throw new Zs;try{v=t(v,l)}catch(k){v=X3(k)}v!==t0&&(typeof((P=v)===null||P===void 0?void 0:P.catch)=="function"&&v.catch(y),u.push(v),h&&(h(),h=null),!p&&u.length&&u.length>=r&&await new G3(k=>{f=k}))}u.push(Y3)}catch(v){let k=X3(v);Zz(k,void 0,y),u.push(k)}finally{var C;p=!0,h&&(h(),h=null),e==null||(C=e.signal)===null||C===void 0||C.removeEventListener("abort",d)}}w();try{for(;;){for(;u.length>0;){let P=await u[0];if(P===Y3)return;if(c.aborted)throw new Zs;P!==t0&&(yield P),u.shift(),f&&(f(),f=null)}await new G3(P=>{h=P})}}finally{o.abort(),p=!0,f&&(f(),f=null)}}.call(this)}function eJ(t=void 0){return t!=null&&Ic(t,"options"),t?.signal!=null&&kc(t.signal,"options.signal"),async function*(){let r=0;for await(let s of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Zs({cause:t.signal.reason});yield[r++,s]}}.call(this)}async function e8(t,e=void 0){for await(let r of oE.call(this,t,e))return!0;return!1}async function tJ(t,e=void 0){if(typeof t!="function")throw new $p("fn",["Function","AsyncFunction"],t);return!await e8.call(this,async(...r)=>!await t(...r),e)}async function rJ(t,e){for await(let r of oE.call(this,t,e))return r}async function nJ(t,e){if(typeof t!="function")throw new $p("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s),t0}for await(let n of r0.call(this,r,e));}function oE(t,e){if(typeof t!="function")throw new $p("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s)?n:t0}return r0.call(this,r,e)}var sE=class extends qz{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function iJ(t,e,r){var n;if(typeof t!="function")throw new $p("reducer",["Function","AsyncFunction"],t);r!=null&&Ic(r,"options"),r?.signal!=null&&kc(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new Zs(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Vz(this.destroy(c)),c}let i=new Z3,o=i.signal;if(r!=null&&r.signal){let c={once:!0,[Uz]:this};r.signal.addEventListener("abort",()=>i.abort(),c)}let a=!1;try{for await(let c of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new Zs;s?e=await t(e,c,{signal:o}):(e=c,s=!0)}if(!a&&!s)throw new sE}finally{i.abort()}return e}async function sJ(t){t!=null&&Ic(t,"options"),t?.signal!=null&&kc(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Zs(void 0,{cause:t.signal.reason});Jz(e,n)}return e}function oJ(t,e){let r=r0.call(this,t,e);return async function*(){for await(let s of r)yield*s}.call(this)}function t8(t){if(t=Xz(t),Yz(t))return 0;if(t<0)throw new Mz("number",">= 0",t);return t}function aJ(t,e=void 0){return e!=null&&Ic(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal"),t=t8(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Zs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Zs;t--<=0&&(yield i)}}.call(this)}function uJ(t,e=void 0){return e!=null&&Ic(e,"options"),e?.signal!=null&&kc(e.signal,"options.signal"),t=t8(t),async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Zs;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new Zs;if(t-- >0)yield i;else return}}.call(this)}aE.exports.streamReturningOperators={asIndexedPairs:eJ,drop:aJ,filter:oE,flatMap:oJ,map:r0,take:uJ,compose:Qz};aE.exports.promiseReturningOperators={every:tJ,forEach:nJ,reduce:iJ,toArray:sJ,some:e8,find:rJ}});var uE=D((C0e,n8)=>{"use strict";var{ArrayPrototypePop:cJ,Promise:lJ}=kr(),{isIterable:dJ,isNodeStream:fJ,isWebStream:pJ}=Js(),{pipelineImpl:hJ}=Zy(),{finished:mJ}=Jo();cE();function yJ(...t){return new lJ((e,r)=>{let n,s,i=t[t.length-1];if(i&&typeof i=="object"&&!fJ(i)&&!dJ(i)&&!pJ(i)){let o=cJ(t);n=o.signal,s=o.end}hJ(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:s})})}n8.exports={finished:mJ,pipeline:yJ}});var cE=D((P0e,f8)=>{var{Buffer:gJ}=Pi(),{ObjectDefineProperty:Yo,ObjectKeys:o8,ReflectApply:a8}=kr(),{promisify:{custom:u8}}=Ks(),{streamReturningOperators:i8,promiseReturningOperators:s8}=r8(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:c8}}=Bn(),vJ=iE(),{pipeline:l8}=Zy(),{destroyer:bJ}=Dc(),d8=Jo(),lE=uE(),dE=Js(),Sr=f8.exports=Ny().Stream;Sr.isDisturbed=dE.isDisturbed;Sr.isErrored=dE.isErrored;Sr.isReadable=dE.isReadable;Sr.Readable=Op();for(let t of o8(i8)){let r=function(...n){if(new.target)throw c8();return Sr.Readable.from(a8(e,this,n))};EJ=r;let e=i8[t];Yo(r,"name",{__proto__:null,value:e.name}),Yo(r,"length",{__proto__:null,value:e.length}),Yo(Sr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var EJ;for(let t of o8(s8)){let r=function(...s){if(new.target)throw c8();return a8(e,this,s)};EJ=r;let e=s8[t];Yo(r,"name",{__proto__:null,value:e.name}),Yo(r,"length",{__proto__:null,value:e.length}),Yo(Sr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var EJ;Sr.Writable=qw();Sr.Duplex=Ys();Sr.Transform=Ww();Sr.PassThrough=Jw();Sr.pipeline=l8;var{addAbortSignal:wJ}=Cp();Sr.addAbortSignal=wJ;Sr.finished=d8;Sr.destroy=bJ;Sr.compose=vJ;Yo(Sr,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return lE}});Yo(l8,u8,{__proto__:null,enumerable:!0,get(){return lE.pipeline}});Yo(d8,u8,{__proto__:null,enumerable:!0,get(){return lE.finished}});Sr.Stream=Sr;Sr._isUint8Array=function(e){return e instanceof Uint8Array};Sr._uint8ArrayToBuffer=function(e){return gJ.from(e.buffer,e.byteOffset,e.byteLength)}});var fE=D((O0e,Ar)=>{"use strict";var Mr=cE(),_J=uE(),DJ=Mr.Readable.destroy;Ar.exports=Mr.Readable;Ar.exports._uint8ArrayToBuffer=Mr._uint8ArrayToBuffer;Ar.exports._isUint8Array=Mr._isUint8Array;Ar.exports.isDisturbed=Mr.isDisturbed;Ar.exports.isErrored=Mr.isErrored;Ar.exports.isReadable=Mr.isReadable;Ar.exports.Readable=Mr.Readable;Ar.exports.Writable=Mr.Writable;Ar.exports.Duplex=Mr.Duplex;Ar.exports.Transform=Mr.Transform;Ar.exports.PassThrough=Mr.PassThrough;Ar.exports.addAbortSignal=Mr.addAbortSignal;Ar.exports.finished=Mr.finished;Ar.exports.destroy=Mr.destroy;Ar.exports.destroy=DJ;Ar.exports.pipeline=Mr.pipeline;Ar.exports.compose=Mr.compose;Object.defineProperty(Mr,"promises",{configurable:!0,enumerable:!0,get(){return _J}});Ar.exports.Stream=Mr.Stream;Ar.exports.default=Ar.exports});var l_=D((M0,Fk)=>{(function(t,e){typeof M0=="object"&&typeof Fk<"u"?e(M0):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(M0,function(t){"use strict";function e(){for(var V=arguments.length,L=Array(V),W=0;W<V;W++)L[W]=arguments[W];if(L.length>1){L[0]=L[0].slice(0,-1);for(var J=L.length-1,G=1;G<J;++G)L[G]=L[G].slice(1,-1);return L[J]=L[J].slice(1),L.join("")}else return L[0]}function r(V){return"(?:"+V+")"}function n(V){return V===void 0?"undefined":V===null?"null":Object.prototype.toString.call(V).split(" ").pop().split("]").shift().toLowerCase()}function s(V){return V.toUpperCase()}function i(V){return V!=null?V instanceof Array?V:typeof V.length!="number"||V.split||V.setInterval||V.call?[V]:Array.prototype.slice.call(V):[]}function o(V,L){var W=V;if(L)for(var J in L)W[J]=L[J];return W}function a(V){var L="[A-Za-z]",W="[\\x0D]",J="[0-9]",G="[\\x22]",fe=e(J,"[A-Fa-f]"),Ye="[\\x0A]",At="[\\x20]",Tt=r(r("%[EFef]"+fe+"%"+fe+fe+"%"+fe+fe)+"|"+r("%[89A-Fa-f]"+fe+"%"+fe+fe)+"|"+r("%"+fe+fe)),Pr="[\\:\\/\\?\\#\\[\\]\\@]",_t="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",or=e(Pr,_t),Or=V?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Yt=V?"[\\uE000-\\uF8FF]":"[]",Pt=e(L,J,"[\\-\\.\\_\\~]",Or),ar=r(L+e(L,J,"[\\+\\-\\.]")+"*"),Nt=r(r(Tt+"|"+e(Pt,_t,"[\\:]"))+"*"),Gu=r(r("25[0-5]")+"|"+r("2[0-4]"+J)+"|"+r("1"+J+J)+"|"+r("[1-9]"+J)+"|"+J),li=r(r("25[0-5]")+"|"+r("2[0-4]"+J)+"|"+r("1"+J+J)+"|"+r("0?[1-9]"+J)+"|0?0?"+J),Ai=r(li+"\\."+li+"\\."+li+"\\."+li),Lt=r(fe+"{1,4}"),di=r(r(Lt+"\\:"+Lt)+"|"+Ai),xi=r(r(Lt+"\\:")+"{6}"+di),Ns=r("\\:\\:"+r(Lt+"\\:")+"{5}"+di),Xu=r(r(Lt)+"?\\:\\:"+r(Lt+"\\:")+"{4}"+di),Fo=r(r(r(Lt+"\\:")+"{0,1}"+Lt)+"?\\:\\:"+r(Lt+"\\:")+"{3}"+di),Wf=r(r(r(Lt+"\\:")+"{0,2}"+Lt)+"?\\:\\:"+r(Lt+"\\:")+"{2}"+di),jm=r(r(r(Lt+"\\:")+"{0,3}"+Lt)+"?\\:\\:"+Lt+"\\:"+di),qm=r(r(r(Lt+"\\:")+"{0,4}"+Lt)+"?\\:\\:"+di),Al=r(r(r(Lt+"\\:")+"{0,5}"+Lt)+"?\\:\\:"+Lt),xl=r(r(r(Lt+"\\:")+"{0,6}"+Lt)+"?\\:\\:"),$o=r([xi,Ns,Xu,Fo,Wf,jm,qm,Al,xl].join("|")),Cl=r(r(Pt+"|"+Tt)+"+"),Rb=r($o+"\\%25"+Cl),Yu=r($o+r("\\%25|\\%(?!"+fe+"{2})")+Cl),U7=r("[vV]"+fe+"+\\."+e(Pt,_t,"[\\:]")+"+"),V7=r("\\["+r(Yu+"|"+$o+"|"+U7)+"\\]"),wC=r(r(Tt+"|"+e(Pt,_t))+"*"),zf=r(V7+"|"+Ai+"(?!"+wC+")|"+wC),Jf=r(J+"*"),EC=r(r(Nt+"@")+"?"+zf+r("\\:"+Jf)+"?"),Gf=r(Tt+"|"+e(Pt,_t,"[\\:\\@]")),K7=r(Gf+"*"),_C=r(Gf+"+"),H7=r(r(Tt+"|"+e(Pt,_t,"[\\@]"))+"+"),Ro=r(r("\\/"+K7)+"*"),Pl=r("\\/"+r(_C+Ro)+"?"),Nb=r(H7+Ro),Mm=r(_C+Ro),Ol="(?!"+Gf+")",Ghe=r(Ro+"|"+Pl+"|"+Nb+"|"+Mm+"|"+Ol),kl=r(r(Gf+"|"+e("[\\/\\?]",Yt))+"*"),Xf=r(r(Gf+"|[\\/\\?]")+"*"),DC=r(r("\\/\\/"+EC+Ro)+"|"+Pl+"|"+Mm+"|"+Ol),W7=r(ar+"\\:"+DC+r("\\?"+kl)+"?"+r("\\#"+Xf)+"?"),z7=r(r("\\/\\/"+EC+Ro)+"|"+Pl+"|"+Nb+"|"+Ol),J7=r(z7+r("\\?"+kl)+"?"+r("\\#"+Xf)+"?"),Xhe=r(W7+"|"+J7),Yhe=r(ar+"\\:"+DC+r("\\?"+kl)+"?"),Zhe="^("+ar+")\\:"+r(r("\\/\\/("+r("("+Nt+")@")+"?("+zf+")"+r("\\:("+Jf+")")+"?)")+"?("+Ro+"|"+Pl+"|"+Mm+"|"+Ol+")")+r("\\?("+kl+")")+"?"+r("\\#("+Xf+")")+"?$",Qhe="^(){0}"+r(r("\\/\\/("+r("("+Nt+")@")+"?("+zf+")"+r("\\:("+Jf+")")+"?)")+"?("+Ro+"|"+Pl+"|"+Nb+"|"+Ol+")")+r("\\?("+kl+")")+"?"+r("\\#("+Xf+")")+"?$",eme="^("+ar+")\\:"+r(r("\\/\\/("+r("("+Nt+")@")+"?("+zf+")"+r("\\:("+Jf+")")+"?)")+"?("+Ro+"|"+Pl+"|"+Mm+"|"+Ol+")")+r("\\?("+kl+")")+"?$",tme="^"+r("\\#("+Xf+")")+"?$",rme="^"+r("("+Nt+")@")+"?("+zf+")"+r("\\:("+Jf+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",L,J,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",Pt,_t),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",Pt,_t),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",Pt,_t),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",Pt,_t),"g"),NOT_QUERY:new RegExp(e("[^\\%]",Pt,_t,"[\\:\\@\\/\\?]",Yt),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",Pt,_t,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",Pt,_t),"g"),UNRESERVED:new RegExp(Pt,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",Pt,or),"g"),PCT_ENCODED:new RegExp(Tt,"g"),IPV4ADDRESS:new RegExp("^("+Ai+")$"),IPV6ADDRESS:new RegExp("^\\[?("+$o+")"+r(r("\\%25|\\%(?!"+fe+"{2})")+"("+Cl+")")+"?\\]?$")}}var u=a(!1),c=a(!0),l=function(){function V(L,W){var J=[],G=!0,fe=!1,Ye=void 0;try{for(var At=L[Symbol.iterator](),Tt;!(G=(Tt=At.next()).done)&&(J.push(Tt.value),!(W&&J.length===W));G=!0);}catch(Pr){fe=!0,Ye=Pr}finally{try{!G&&At.return&&At.return()}finally{if(fe)throw Ye}}return J}return function(L,W){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return V(L,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(V){if(Array.isArray(V)){for(var L=0,W=Array(V.length);L<V.length;L++)W[L]=V[L];return W}else return Array.from(V)},h=2147483647,f=36,p=1,y=26,w=38,P=700,C=72,v=128,k="-",I=/^xn--/,T=/[^\0-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=f-p,E=Math.floor,B=String.fromCharCode;function S(V){throw new RangeError(g[V])}function N(V,L){for(var W=[],J=V.length;J--;)W[J]=L(V[J]);return W}function $(V,L){var W=V.split("@"),J="";W.length>1&&(J=W[0]+"@",V=W[1]),V=V.replace(j,".");var G=V.split("."),fe=N(G,L).join(".");return J+fe}function O(V){for(var L=[],W=0,J=V.length;W<J;){var G=V.charCodeAt(W++);if(G>=55296&&G<=56319&&W<J){var fe=V.charCodeAt(W++);(fe&64512)==56320?L.push(((G&1023)<<10)+(fe&1023)+65536):(L.push(G),W--)}else L.push(G)}return L}var F=function(L){return String.fromCodePoint.apply(String,d(L))},U=function(L){return L-48<10?L-22:L-65<26?L-65:L-97<26?L-97:f},M=function(L,W){return L+22+75*(L<26)-((W!=0)<<5)},R=function(L,W,J){var G=0;for(L=J?E(L/P):L>>1,L+=E(L/W);L>b*y>>1;G+=f)L=E(L/b);return E(G+(b+1)*L/(L+w))},K=function(L){var W=[],J=L.length,G=0,fe=v,Ye=C,At=L.lastIndexOf(k);At<0&&(At=0);for(var Tt=0;Tt<At;++Tt)L.charCodeAt(Tt)>=128&&S("not-basic"),W.push(L.charCodeAt(Tt));for(var Pr=At>0?At+1:0;Pr<J;){for(var _t=G,or=1,Or=f;;Or+=f){Pr>=J&&S("invalid-input");var Yt=U(L.charCodeAt(Pr++));(Yt>=f||Yt>E((h-G)/or))&&S("overflow"),G+=Yt*or;var Pt=Or<=Ye?p:Or>=Ye+y?y:Or-Ye;if(Yt<Pt)break;var ar=f-Pt;or>E(h/ar)&&S("overflow"),or*=ar}var Nt=W.length+1;Ye=R(G-_t,Nt,_t==0),E(G/Nt)>h-fe&&S("overflow"),fe+=E(G/Nt),G%=Nt,W.splice(G++,0,fe)}return String.fromCodePoint.apply(String,W)},z=function(L){var W=[];L=O(L);var J=L.length,G=v,fe=0,Ye=C,At=!0,Tt=!1,Pr=void 0;try{for(var _t=L[Symbol.iterator](),or;!(At=(or=_t.next()).done);At=!0){var Or=or.value;Or<128&&W.push(B(Or))}}catch(Yu){Tt=!0,Pr=Yu}finally{try{!At&&_t.return&&_t.return()}finally{if(Tt)throw Pr}}var Yt=W.length,Pt=Yt;for(Yt&&W.push(k);Pt<J;){var ar=h,Nt=!0,Gu=!1,li=void 0;try{for(var Ai=L[Symbol.iterator](),Lt;!(Nt=(Lt=Ai.next()).done);Nt=!0){var di=Lt.value;di>=G&&di<ar&&(ar=di)}}catch(Yu){Gu=!0,li=Yu}finally{try{!Nt&&Ai.return&&Ai.return()}finally{if(Gu)throw li}}var xi=Pt+1;ar-G>E((h-fe)/xi)&&S("overflow"),fe+=(ar-G)*xi,G=ar;var Ns=!0,Xu=!1,Fo=void 0;try{for(var Wf=L[Symbol.iterator](),jm;!(Ns=(jm=Wf.next()).done);Ns=!0){var qm=jm.value;if(qm<G&&++fe>h&&S("overflow"),qm==G){for(var Al=fe,xl=f;;xl+=f){var $o=xl<=Ye?p:xl>=Ye+y?y:xl-Ye;if(Al<$o)break;var Cl=Al-$o,Rb=f-$o;W.push(B(M($o+Cl%Rb,0))),Al=E(Cl/Rb)}W.push(B(M(Al,0))),Ye=R(fe,xi,Pt==Yt),fe=0,++Pt}}}catch(Yu){Xu=!0,Fo=Yu}finally{try{!Ns&&Wf.return&&Wf.return()}finally{if(Xu)throw Fo}}++fe,++G}return W.join("")},ee=function(L){return $(L,function(W){return I.test(W)?K(W.slice(4).toLowerCase()):W})},ce=function(L){return $(L,function(W){return T.test(W)?"xn--"+z(W):W})},re={version:"2.1.0",ucs2:{decode:O,encode:F},decode:K,encode:z,toASCII:ce,toUnicode:ee},ie={};function ue(V){var L=V.charCodeAt(0),W=void 0;return L<16?W="%0"+L.toString(16).toUpperCase():L<128?W="%"+L.toString(16).toUpperCase():L<2048?W="%"+(L>>6|192).toString(16).toUpperCase()+"%"+(L&63|128).toString(16).toUpperCase():W="%"+(L>>12|224).toString(16).toUpperCase()+"%"+(L>>6&63|128).toString(16).toUpperCase()+"%"+(L&63|128).toString(16).toUpperCase(),W}function ye(V){for(var L="",W=0,J=V.length;W<J;){var G=parseInt(V.substr(W+1,2),16);if(G<128)L+=String.fromCharCode(G),W+=3;else if(G>=194&&G<224){if(J-W>=6){var fe=parseInt(V.substr(W+4,2),16);L+=String.fromCharCode((G&31)<<6|fe&63)}else L+=V.substr(W,6);W+=6}else if(G>=224){if(J-W>=9){var Ye=parseInt(V.substr(W+4,2),16),At=parseInt(V.substr(W+7,2),16);L+=String.fromCharCode((G&15)<<12|(Ye&63)<<6|At&63)}else L+=V.substr(W,9);W+=9}else L+=V.substr(W,3),W+=3}return L}function ke(V,L){function W(J){var G=ye(J);return G.match(L.UNRESERVED)?G:J}return V.scheme&&(V.scheme=String(V.scheme).replace(L.PCT_ENCODED,W).toLowerCase().replace(L.NOT_SCHEME,"")),V.userinfo!==void 0&&(V.userinfo=String(V.userinfo).replace(L.PCT_ENCODED,W).replace(L.NOT_USERINFO,ue).replace(L.PCT_ENCODED,s)),V.host!==void 0&&(V.host=String(V.host).replace(L.PCT_ENCODED,W).toLowerCase().replace(L.NOT_HOST,ue).replace(L.PCT_ENCODED,s)),V.path!==void 0&&(V.path=String(V.path).replace(L.PCT_ENCODED,W).replace(V.scheme?L.NOT_PATH:L.NOT_PATH_NOSCHEME,ue).replace(L.PCT_ENCODED,s)),V.query!==void 0&&(V.query=String(V.query).replace(L.PCT_ENCODED,W).replace(L.NOT_QUERY,ue).replace(L.PCT_ENCODED,s)),V.fragment!==void 0&&(V.fragment=String(V.fragment).replace(L.PCT_ENCODED,W).replace(L.NOT_FRAGMENT,ue).replace(L.PCT_ENCODED,s)),V}function He(V){return V.replace(/^0*(.*)/,"$1")||"0"}function Xe(V,L){var W=V.match(L.IPV4ADDRESS)||[],J=l(W,2),G=J[1];return G?G.split(".").map(He).join("."):V}function Me(V,L){var W=V.match(L.IPV6ADDRESS)||[],J=l(W,3),G=J[1],fe=J[2];if(G){for(var Ye=G.toLowerCase().split("::").reverse(),At=l(Ye,2),Tt=At[0],Pr=At[1],_t=Pr?Pr.split(":").map(He):[],or=Tt.split(":").map(He),Or=L.IPV4ADDRESS.test(or[or.length-1]),Yt=Or?7:8,Pt=or.length-Yt,ar=Array(Yt),Nt=0;Nt<Yt;++Nt)ar[Nt]=_t[Nt]||or[Pt+Nt]||"";Or&&(ar[Yt-1]=Xe(ar[Yt-1],L));var Gu=ar.reduce(function(xi,Ns,Xu){if(!Ns||Ns==="0"){var Fo=xi[xi.length-1];Fo&&Fo.index+Fo.length===Xu?Fo.length++:xi.push({index:Xu,length:1})}return xi},[]),li=Gu.sort(function(xi,Ns){return Ns.length-xi.length})[0],Ai=void 0;if(li&&li.length>1){var Lt=ar.slice(0,li.index),di=ar.slice(li.index+li.length);Ai=Lt.join(":")+"::"+di.join(":")}else Ai=ar.join(":");return fe&&(Ai+="%"+fe),Ai}else return V}var Le=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,pt="".match(/(){0}/)[1]===void 0;function je(V){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W={},J=L.iri!==!1?c:u;L.reference==="suffix"&&(V=(L.scheme?L.scheme+":":"")+"//"+V);var G=V.match(Le);if(G){pt?(W.scheme=G[1],W.userinfo=G[3],W.host=G[4],W.port=parseInt(G[5],10),W.path=G[6]||"",W.query=G[7],W.fragment=G[8],isNaN(W.port)&&(W.port=G[5])):(W.scheme=G[1]||void 0,W.userinfo=V.indexOf("@")!==-1?G[3]:void 0,W.host=V.indexOf("//")!==-1?G[4]:void 0,W.port=parseInt(G[5],10),W.path=G[6]||"",W.query=V.indexOf("?")!==-1?G[7]:void 0,W.fragment=V.indexOf("#")!==-1?G[8]:void 0,isNaN(W.port)&&(W.port=V.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?G[4]:void 0)),W.host&&(W.host=Me(Xe(W.host,J),J)),W.scheme===void 0&&W.userinfo===void 0&&W.host===void 0&&W.port===void 0&&!W.path&&W.query===void 0?W.reference="same-document":W.scheme===void 0?W.reference="relative":W.fragment===void 0?W.reference="absolute":W.reference="uri",L.reference&&L.reference!=="suffix"&&L.reference!==W.reference&&(W.error=W.error||"URI is not a "+L.reference+" reference.");var fe=ie[(L.scheme||W.scheme||"").toLowerCase()];if(!L.unicodeSupport&&(!fe||!fe.unicodeSupport)){if(W.host&&(L.domainHost||fe&&fe.domainHost))try{W.host=re.toASCII(W.host.replace(J.PCT_ENCODED,ye).toLowerCase())}catch(Ye){W.error=W.error||"Host's domain name can not be converted to ASCII via punycode: "+Ye}ke(W,u)}else ke(W,J);fe&&fe.parse&&fe.parse(W,L)}else W.error=W.error||"URI can not be parsed.";return W}function at(V,L){var W=L.iri!==!1?c:u,J=[];return V.userinfo!==void 0&&(J.push(V.userinfo),J.push("@")),V.host!==void 0&&J.push(Me(Xe(String(V.host),W),W).replace(W.IPV6ADDRESS,function(G,fe,Ye){return"["+fe+(Ye?"%25"+Ye:"")+"]"})),(typeof V.port=="number"||typeof V.port=="string")&&(J.push(":"),J.push(String(V.port))),J.length?J.join(""):void 0}var wr=/^\.\.?\//,Fs=/^\/\.(\/|$)/,ss=/^\/\.\.(\/|$)/,To=/^\/?(?:.|\n)*?(?=\/|$)/;function Er(V){for(var L=[];V.length;)if(V.match(wr))V=V.replace(wr,"");else if(V.match(Fs))V=V.replace(Fs,"/");else if(V.match(ss))V=V.replace(ss,"/"),L.pop();else if(V==="."||V==="..")V="";else{var W=V.match(To);if(W){var J=W[0];V=V.slice(J.length),L.push(J)}else throw new Error("Unexpected dot segment condition")}return L.join("")}function Un(V){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=L.iri?c:u,J=[],G=ie[(L.scheme||V.scheme||"").toLowerCase()];if(G&&G.serialize&&G.serialize(V,L),V.host&&!W.IPV6ADDRESS.test(V.host)){if(L.domainHost||G&&G.domainHost)try{V.host=L.iri?re.toUnicode(V.host):re.toASCII(V.host.replace(W.PCT_ENCODED,ye).toLowerCase())}catch(At){V.error=V.error||"Host's domain name can not be converted to "+(L.iri?"Unicode":"ASCII")+" via punycode: "+At}}ke(V,W),L.reference!=="suffix"&&V.scheme&&(J.push(V.scheme),J.push(":"));var fe=at(V,L);if(fe!==void 0&&(L.reference!=="suffix"&&J.push("//"),J.push(fe),V.path&&V.path.charAt(0)!=="/"&&J.push("/")),V.path!==void 0){var Ye=V.path;!L.absolutePath&&(!G||!G.absolutePath)&&(Ye=Er(Ye)),fe===void 0&&(Ye=Ye.replace(/^\/\//,"/%2F")),J.push(Ye)}return V.query!==void 0&&(J.push("?"),J.push(V.query)),V.fragment!==void 0&&(J.push("#"),J.push(V.fragment)),J.join("")}function Ma(V,L){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},J=arguments[3],G={};return J||(V=je(Un(V,W),W),L=je(Un(L,W),W)),W=W||{},!W.tolerant&&L.scheme?(G.scheme=L.scheme,G.userinfo=L.userinfo,G.host=L.host,G.port=L.port,G.path=Er(L.path||""),G.query=L.query):(L.userinfo!==void 0||L.host!==void 0||L.port!==void 0?(G.userinfo=L.userinfo,G.host=L.host,G.port=L.port,G.path=Er(L.path||""),G.query=L.query):(L.path?(L.path.charAt(0)==="/"?G.path=Er(L.path):((V.userinfo!==void 0||V.host!==void 0||V.port!==void 0)&&!V.path?G.path="/"+L.path:V.path?G.path=V.path.slice(0,V.path.lastIndexOf("/")+1)+L.path:G.path=L.path,G.path=Er(G.path)),G.query=L.query):(G.path=V.path,L.query!==void 0?G.query=L.query:G.query=V.query),G.userinfo=V.userinfo,G.host=V.host,G.port=V.port),G.scheme=V.scheme),G.fragment=L.fragment,G}function bt(V,L,W){var J=o({scheme:"null"},W);return Un(Ma(je(V,J),je(L,J),J,!0),J)}function sr(V,L){return typeof V=="string"?V=Un(je(V,L),L):n(V)==="object"&&(V=je(Un(V,L),L)),V}function Te(V,L,W){return typeof V=="string"?V=Un(je(V,W),W):n(V)==="object"&&(V=Un(V,W)),typeof L=="string"?L=Un(je(L,W),W):n(L)==="object"&&(L=Un(L,W)),V===L}function _r(V,L){return V&&V.toString().replace(!L||!L.iri?u.ESCAPE:c.ESCAPE,ue)}function St(V,L){return V&&V.toString().replace(!L||!L.iri?u.PCT_ENCODED:c.PCT_ENCODED,ye)}var $s={scheme:"http",domainHost:!0,parse:function(L,W){return L.host||(L.error=L.error||"HTTP URIs must have a host."),L},serialize:function(L,W){var J=String(L.scheme).toLowerCase()==="https";return(L.port===(J?443:80)||L.port==="")&&(L.port=void 0),L.path||(L.path="/"),L}},zu={scheme:"https",domainHost:$s.domainHost,parse:$s.parse,serialize:$s.serialize};function Vn(V){return typeof V.secure=="boolean"?V.secure:String(V.scheme).toLowerCase()==="wss"}var Rs={scheme:"ws",domainHost:!0,parse:function(L,W){var J=L;return J.secure=Vn(J),J.resourceName=(J.path||"/")+(J.query?"?"+J.query:""),J.path=void 0,J.query=void 0,J},serialize:function(L,W){if((L.port===(Vn(L)?443:80)||L.port==="")&&(L.port=void 0),typeof L.secure=="boolean"&&(L.scheme=L.secure?"wss":"ws",L.secure=void 0),L.resourceName){var J=L.resourceName.split("?"),G=l(J,2),fe=G[0],Ye=G[1];L.path=fe&&fe!=="/"?fe:void 0,L.query=Ye,L.resourceName=void 0}return L.fragment=void 0,L}},os={scheme:"wss",domainHost:Rs.domainHost,parse:Rs.parse,serialize:Rs.serialize},gr={},$m=!0,Rm="[A-Za-z0-9\\-\\.\\_\\~"+($m?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",kt="[0-9A-Fa-f]",kn=r(r("%[EFef]"+kt+"%"+kt+kt+"%"+kt+kt)+"|"+r("%[89A-Fa-f]"+kt+"%"+kt+kt)+"|"+r("%"+kt+kt)),Ju="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Sl="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Nm=e(Sl,'[\\"\\\\]'),Fb="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",$b=new RegExp(Rm,"g"),m=new RegExp(kn,"g"),A=new RegExp(e("[^]",Ju,"[\\.]",'[\\"]',Nm),"g"),_=new RegExp(e("[^]",Rm,Fb),"g"),x=_;function q(V){var L=ye(V);return L.match($b)?L:V}var X={scheme:"mailto",parse:function(L,W){var J=L,G=J.to=J.path?J.path.split(","):[];if(J.path=void 0,J.query){for(var fe=!1,Ye={},At=J.query.split("&"),Tt=0,Pr=At.length;Tt<Pr;++Tt){var _t=At[Tt].split("=");switch(_t[0]){case"to":for(var or=_t[1].split(","),Or=0,Yt=or.length;Or<Yt;++Or)G.push(or[Or]);break;case"subject":J.subject=St(_t[1],W);break;case"body":J.body=St(_t[1],W);break;default:fe=!0,Ye[St(_t[0],W)]=St(_t[1],W);break}}fe&&(J.headers=Ye)}J.query=void 0;for(var Pt=0,ar=G.length;Pt<ar;++Pt){var Nt=G[Pt].split("@");if(Nt[0]=St(Nt[0]),W.unicodeSupport)Nt[1]=St(Nt[1],W).toLowerCase();else try{Nt[1]=re.toASCII(St(Nt[1],W).toLowerCase())}catch(Gu){J.error=J.error||"Email address's domain name can not be converted to ASCII via punycode: "+Gu}G[Pt]=Nt.join("@")}return J},serialize:function(L,W){var J=L,G=i(L.to);if(G){for(var fe=0,Ye=G.length;fe<Ye;++fe){var At=String(G[fe]),Tt=At.lastIndexOf("@"),Pr=At.slice(0,Tt).replace(m,q).replace(m,s).replace(A,ue),_t=At.slice(Tt+1);try{_t=W.iri?re.toUnicode(_t):re.toASCII(St(_t,W).toLowerCase())}catch(Pt){J.error=J.error||"Email address's domain name can not be converted to "+(W.iri?"Unicode":"ASCII")+" via punycode: "+Pt}G[fe]=Pr+"@"+_t}J.path=G.join(",")}var or=L.headers=L.headers||{};L.subject&&(or.subject=L.subject),L.body&&(or.body=L.body);var Or=[];for(var Yt in or)or[Yt]!==gr[Yt]&&Or.push(Yt.replace(m,q).replace(m,s).replace(_,ue)+"="+or[Yt].replace(m,q).replace(m,s).replace(x,ue));return Or.length&&(J.query=Or.join("&")),J}},te=/^([^\:]+)\:(.*)/,se={scheme:"urn",parse:function(L,W){var J=L.path&&L.path.match(te),G=L;if(J){var fe=W.scheme||G.scheme||"urn",Ye=J[1].toLowerCase(),At=J[2],Tt=fe+":"+(W.nid||Ye),Pr=ie[Tt];G.nid=Ye,G.nss=At,G.path=void 0,Pr&&(G=Pr.parse(G,W))}else G.error=G.error||"URN can not be parsed.";return G},serialize:function(L,W){var J=W.scheme||L.scheme||"urn",G=L.nid,fe=J+":"+(W.nid||G),Ye=ie[fe];Ye&&(L=Ye.serialize(L,W));var At=L,Tt=L.nss;return At.path=(G||W.nid)+":"+Tt,At}},ge=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ht={scheme:"urn:uuid",parse:function(L,W){var J=L;return J.uuid=J.nss,J.nss=void 0,!W.tolerant&&(!J.uuid||!J.uuid.match(ge))&&(J.error=J.error||"UUID is not valid."),J},serialize:function(L,W){var J=L;return J.nss=(L.uuid||"").toLowerCase(),J}};ie[$s.scheme]=$s,ie[zu.scheme]=zu,ie[Rs.scheme]=Rs,ie[os.scheme]=os,ie[X.scheme]=X,ie[se.scheme]=se,ie[ht.scheme]=ht,t.SCHEMES=ie,t.pctEncChar=ue,t.pctDecChars=ye,t.parse=je,t.removeDotSegments=Er,t.serialize=Un,t.resolveComponents=Ma,t.resolve=bt,t.normalize=sr,t.equal=Te,t.escapeComponent=_r,t.unescapeComponent=St,Object.defineProperty(t,"__esModule",{value:!0})})});var f_=D((Bwe,$k)=>{"use strict";$k.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return n;let i=n.length===0?"":",";return`${n}${i}${t(s)}:${t(e[s])}`},"")}}`}});var jk=D(($we,Nk)=>{"use strict";function XX(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=t.length,a=t.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var p=0,y=0,w=0,P=f.length;w!==P&&f[w]===0;)w++,p++;for(var C=(P-w)*c+1>>>0,v=new Uint8Array(C);w!==P;){for(var k=f[w],I=0,T=C-1;(k!==0||I<y)&&T!==-1;T--,I++)k+=256*v[T]>>>0,v[T]=k%o>>>0,k=k/o>>>0;if(k!==0)throw new Error("Non-zero carry");y=I,w++}for(var j=C-y;j!==C&&v[j]===0;)j++;for(var g=a.repeat(p);j<C;++j)g+=t.charAt(v[j]);return g}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var p=0;if(f[p]!==" "){for(var y=0,w=0;f[p]===a;)y++,p++;for(var P=(f.length-p)*u+1>>>0,C=new Uint8Array(P);f[p];){var v=e[f.charCodeAt(p)];if(v===255)return;for(var k=0,I=P-1;(v!==0||k<w)&&I!==-1;I--,k++)v+=o*C[I]>>>0,C[I]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");w=k,p++}if(f[p]!==" "){for(var T=P-w;T!==P&&C[T]===0;)T++;for(var j=new Uint8Array(y+(P-T)),g=y;T!==P;)j[g++]=C[T++];return j}}}function h(f){var p=d(f);if(p)return p;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:d,decode:h}}Nk.exports=XX});var L0=D((Rwe,qk)=>{"use strict";var YX=new TextDecoder,ZX=t=>YX.decode(t),QX=new TextEncoder,eY=t=>QX.encode(t);function tY(t,e){let r=new Uint8Array(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return r}qk.exports={decodeText:ZX,encodeText:eY,concat:tY}});var Lk=D((Nwe,Mk)=>{"use strict";var{encodeText:rY}=L0(),p_=class{constructor(e,r,n,s){this.name=e,this.code=r,this.codeBuf=rY(this.code),this.alphabet=s,this.codec=n(s)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};Mk.exports=p_});var Vk=D((jwe,Uk)=>{"use strict";var nY=(t,e,r)=>{let n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),o=0,a=0,u=0;for(let c=0;c<s;++c){let l=n[t[c]];if(l===void 0)throw new SyntaxError("Invalid character "+t[c]);a=a<<r|l,o+=r,o>=8&&(o-=8,i[u++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return i},iY=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},sY=t=>e=>({encode(r){return iY(r,e,t)},decode(r){return nY(r,e,t)}});Uk.exports={rfc4648:sY}});var zk=D((qwe,Wk)=>{"use strict";var sh=jk(),oY=Lk(),{rfc4648:fn}=Vk(),{decodeText:aY,encodeText:uY}=L0(),cY=()=>({encode:aY,decode:uY}),Kk=[["identity","\0",cY,""],["base2","0",fn(1),"01"],["base8","7",fn(3),"01234567"],["base10","9",sh,"0123456789"],["base16","f",fn(4),"0123456789abcdef"],["base16upper","F",fn(4),"0123456789ABCDEF"],["base32hex","v",fn(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",fn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",fn(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",fn(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",fn(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",fn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",fn(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",fn(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",fn(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",sh,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",sh,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",sh,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",sh,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",fn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",fn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",fn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",fn(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],Hk=Kk.reduce((t,e)=>(t[e[0]]=new oY(e[0],e[1],e[2],e[3]),t),{}),lY=Kk.reduce((t,e)=>(t[e[1]]=Hk[e[0]],t),{});Wk.exports={names:Hk,codes:lY}});var Xk=D((da,Gk)=>{"use strict";var Ad=zk(),{encodeText:dY,decodeText:U0,concat:Jk}=L0();function fY(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=qc(t);return yY(r,e),Jk([n,e],n.length+e.length)}function pY(t,e){let r=qc(t),n=dY(r.encode(e));return Jk([r.codeBuf,n],r.codeBuf.length+n.length)}function hY(t){t instanceof Uint8Array&&(t=U0(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),qc(t[0]).decode(t.substring(1))}function mY(t){if(t instanceof Uint8Array&&(t=U0(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return qc(t[0]).name}catch{return!1}}function yY(t,e){qc(t).decode(U0(e))}function qc(t){if(Object.prototype.hasOwnProperty.call(Ad.names,t))return Ad.names[t];if(Object.prototype.hasOwnProperty.call(Ad.codes,t))return Ad.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function gY(t){return t instanceof Uint8Array&&(t=U0(t)),qc(t[0])}da=Gk.exports=fY;da.encode=pY;da.decode=hY;da.isEncoded=mY;da.encoding=qc;da.encodingFromData=gY;var vY=Object.freeze(Ad.names),bY=Object.freeze(Ad.codes);da.names=vY;da.codes=bY});var eI=D((Mwe,Qk)=>{Qk.exports=Zk;var Yk=128,wY=127,EY=~wY,_Y=Math.pow(2,31);function Zk(t,e,r){e=e||[],r=r||0;for(var n=r;t>=_Y;)e[r++]=t&255|Yk,t/=128;for(;t&EY;)e[r++]=t&255|Yk,t>>>=7;return e[r]=t|0,Zk.bytes=r-n+1,e}});var nI=D((Lwe,rI)=>{rI.exports=h_;var DY=128,tI=127;function h_(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw h_.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&tI)<<s:(o&tI)*Math.pow(2,s),s+=7}while(o>=DY);return h_.bytes=i-n,r}});var sI=D((Uwe,iI)=>{var SY=Math.pow(2,7),AY=Math.pow(2,14),xY=Math.pow(2,21),CY=Math.pow(2,28),PY=Math.pow(2,35),OY=Math.pow(2,42),kY=Math.pow(2,49),IY=Math.pow(2,56),BY=Math.pow(2,63);iI.exports=function(t){return t<SY?1:t<AY?2:t<xY?3:t<CY?4:t<PY?5:t<OY?6:t<kY?7:t<IY?8:t<BY?9:10}});var aI=D((Vwe,oI)=>{oI.exports={encode:eI(),decode:nI(),encodingLength:sI()}});var cI=D((Kwe,uI)=>{"use strict";var TY=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});uI.exports={names:TY}});function FY(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,w=0,P=0,C=p.length;P!==C&&p[P]===0;)P++,y++;for(var v=(C-P)*l+1>>>0,k=new Uint8Array(v);P!==C;){for(var I=p[P],T=0,j=v-1;(I!==0||T<w)&&j!==-1;j--,T++)I+=256*k[j]>>>0,k[j]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");w=T,P++}for(var g=v-w;g!==v&&k[g]===0;)g++;for(var b=u.repeat(y);g<v;++g)b+=t.charAt(k[g]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var w=0,P=0;p[y]===u;)w++,y++;for(var C=(p.length-y)*c+1>>>0,v=new Uint8Array(C);p[y];){var k=r[p.charCodeAt(y)];if(k===255)return;for(var I=0,T=C-1;(k!==0||I<P)&&T!==-1;T--,I++)k+=a*v[T]>>>0,v[T]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");P=I,y++}if(p[y]!==" "){for(var j=C-P;j!==C&&v[j]===0;)j++;for(var g=new Uint8Array(w+(C-j)),b=w;j!==C;)g[b++]=v[j++];return g}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var $Y,RY,lI,dI=Ot(()=>{$Y=FY,RY=$Y,lI=RY});var Wwe,fI,fa,pI,hI,du=Ot(()=>{Wwe=new Uint8Array(0),fI=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fa=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},pI=t=>new TextEncoder().encode(t),hI=t=>new TextDecoder().decode(t)});var m_,y_,g_,yI,v_,xd,fu,NY,jY,vr,gs=Ot(()=>{dI();du();m_=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},y_=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yI(this,e)}},g_=class{constructor(e){this.decoders=e}or(e){return yI(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},yI=(t,e)=>new g_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),v_=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new m_(e,r,n),this.decoder=new y_(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},xd=({name:t,prefix:e,encode:r,decode:n})=>new v_(t,e,r,n),fu=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=lI(r,e);return xd({prefix:t,name:e,encode:n,decode:i=>fa(s(i))})},NY=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},jY=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},vr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>xd({prefix:e,name:t,encode(s){return jY(s,n,r)},decode(s){return NY(s,n,r,t)}})});var b_={};Zt(b_,{identity:()=>qY});var qY,gI=Ot(()=>{gs();du();qY=xd({prefix:"\0",name:"identity",encode:t=>hI(t),decode:t=>pI(t)})});var w_={};Zt(w_,{base2:()=>MY});var MY,vI=Ot(()=>{gs();MY=vr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var E_={};Zt(E_,{base8:()=>LY});var LY,bI=Ot(()=>{gs();LY=vr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var __={};Zt(__,{base10:()=>UY});var UY,wI=Ot(()=>{gs();UY=fu({prefix:"9",name:"base10",alphabet:"0123456789"})});var D_={};Zt(D_,{base16:()=>VY,base16upper:()=>KY});var VY,KY,EI=Ot(()=>{gs();VY=vr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),KY=vr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var S_={};Zt(S_,{base32:()=>Cd,base32hex:()=>JY,base32hexpad:()=>XY,base32hexpadupper:()=>YY,base32hexupper:()=>GY,base32pad:()=>WY,base32padupper:()=>zY,base32upper:()=>HY,base32z:()=>ZY});var Cd,HY,WY,zY,JY,GY,XY,YY,ZY,A_=Ot(()=>{gs();Cd=vr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),HY=vr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),WY=vr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),zY=vr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),JY=vr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),GY=vr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),XY=vr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),YY=vr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ZY=vr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var x_={};Zt(x_,{base36:()=>QY,base36upper:()=>eZ});var QY,eZ,_I=Ot(()=>{gs();QY=fu({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eZ=fu({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var C_={};Zt(C_,{base58btc:()=>oo,base58flickr:()=>tZ});var oo,tZ,P_=Ot(()=>{gs();oo=fu({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tZ=fu({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var O_={};Zt(O_,{base64:()=>rZ,base64pad:()=>nZ,base64url:()=>iZ,base64urlpad:()=>sZ});var rZ,nZ,iZ,sZ,DI=Ot(()=>{gs();rZ=vr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nZ=vr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),iZ=vr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sZ=vr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var k_={};Zt(k_,{base256emoji:()=>lZ});function uZ(t){return t.reduce((e,r)=>(e+=oZ[r],e),"")}function cZ(t){let e=[];for(let r of t){let n=aZ[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var SI,oZ,aZ,lZ,AI=Ot(()=>{gs();SI=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),oZ=SI.reduce((t,e,r)=>(t[r]=e,t),[]),aZ=SI.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);lZ=xd({prefix:"\u{1F680}",name:"base256emoji",encode:uZ,decode:cZ})});function PI(t,e,r){e=e||[],r=r||0;for(var n=r;t>=hZ;)e[r++]=t&255|xI,t/=128;for(;t&pZ;)e[r++]=t&255|xI,t>>>=7;return e[r]=t|0,PI.bytes=r-n+1,e}function I_(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw I_.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&CI)<<s:(o&CI)*Math.pow(2,s),s+=7}while(o>=yZ);return I_.bytes=i-n,r}var dZ,xI,fZ,pZ,hZ,mZ,yZ,CI,gZ,vZ,bZ,wZ,EZ,_Z,DZ,SZ,AZ,xZ,CZ,PZ,oh,OI=Ot(()=>{dZ=PI,xI=128,fZ=127,pZ=~fZ,hZ=Math.pow(2,31);mZ=I_,yZ=128,CI=127;gZ=Math.pow(2,7),vZ=Math.pow(2,14),bZ=Math.pow(2,21),wZ=Math.pow(2,28),EZ=Math.pow(2,35),_Z=Math.pow(2,42),DZ=Math.pow(2,49),SZ=Math.pow(2,56),AZ=Math.pow(2,63),xZ=function(t){return t<gZ?1:t<vZ?2:t<bZ?3:t<wZ?4:t<EZ?5:t<_Z?6:t<DZ?7:t<SZ?8:t<AZ?9:10},CZ={encode:dZ,decode:mZ,encodingLength:xZ},PZ=CZ,oh=PZ});var ah,Pd,Od,K0=Ot(()=>{OI();ah=(t,e=0)=>[oh.decode(t,e),oh.decode.bytes],Pd=(t,e,r=0)=>(oh.encode(t,e,r),e),Od=t=>oh.encodingLength(t)});var Mc,kI,II,kd,ch=Ot(()=>{du();K0();Mc=(t,e)=>{let r=e.byteLength,n=Od(t),s=n+Od(r),i=new Uint8Array(s+r);return Pd(t,i,0),Pd(r,i,n),i.set(e,s),new kd(t,r,e,i)},kI=t=>{let e=fa(t),[r,n]=ah(e),[s,i]=ah(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new kd(r,s,o,e)},II=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&fI(t.bytes,e.bytes),kd=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}});var T_,B_,F_=Ot(()=>{ch();T_=({name:t,code:e,encode:r})=>new B_(t,e,r),B_=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Mc(this.code,r):r.then(n=>Mc(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var $_={};Zt($_,{sha256:()=>OZ,sha512:()=>kZ});var TI,OZ,kZ,FI=Ot(()=>{F_();TI=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),OZ=T_({name:"sha2-256",code:18,encode:TI("SHA-256")}),kZ=T_({name:"sha2-512",code:19,encode:TI("SHA-512")})});var R_={};Zt(R_,{identity:()=>TZ});var $I,IZ,RI,BZ,TZ,NI=Ot(()=>{du();ch();$I=0,IZ="identity",RI=fa,BZ=t=>Mc($I,RI(t)),TZ={code:$I,name:IZ,encode:RI,digest:BZ}});var jI=Ot(()=>{du()});var pEe,hEe,qI=Ot(()=>{pEe=new TextEncoder,hEe=new TextDecoder});var Kr,RZ,NZ,jZ,lh,qZ,MI,LI,H0,W0,MZ,LZ,UZ,UI=Ot(()=>{K0();ch();P_();A_();du();Kr=class{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this.byteOffset=s.byteOffset,this.byteLength=s.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:W0,byteLength:W0,code:H0,version:H0,multihash:H0,bytes:H0,_baseCache:W0,asCID:W0})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==lh)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==qZ)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Kr.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Mc(e,r);return Kr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&II(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:s}=this;switch(n){case 0:return NZ(r,s,e||oo.encoder);default:return jZ(r,s,e||Cd.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return LZ(/^0\.0/,UZ),!!(e&&(e[LI]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Kr)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:s,bytes:i}=e;return new Kr(r,n,s,i||MI(r,n,s.bytes))}else if(e!=null&&e[LI]===!0){let{version:r,multihash:n,code:s}=e,i=kI(n);return Kr.create(r,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==lh)throw new Error(`Version 0 CID must use dag-pb (code: ${lh}) block encoding`);return new Kr(e,r,n,n.bytes)}case 1:{let s=MI(e,r,n.bytes);return new Kr(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return Kr.create(0,lh,e)}static createV1(e,r){return Kr.create(1,e,r)}static decode(e){let[r,n]=Kr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Kr.inspectBytes(e),n=r.size-r.multihashSize,s=fa(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new kd(r.multihashCode,r.digestSize,i,s);return[r.version===0?Kr.createV0(o):Kr.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,h]=ah(e.subarray(r));return r+=h,d},s=n(),i=lh;if(s===18?(s=0,r=0):s===1&&(i=n()),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=RZ(e,r),i=Kr.decode(s);return i._baseCache.set(n,e),i}},RZ=(t,e)=>{switch(t[0]){case"Q":{let r=e||oo;return[oo.prefix,r.decode(`${oo.prefix}${t}`)]}case oo.prefix:{let r=e||oo;return[oo.prefix,r.decode(t)]}case Cd.prefix:{let r=e||Cd;return[Cd.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},NZ=(t,e,r)=>{let{prefix:n}=r;if(n!==oo.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},jZ=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},lh=112,qZ=18,MI=(t,e,r)=>{let n=Od(t),s=n+Od(e),i=new Uint8Array(s+r.byteLength);return Pd(t,i,0),Pd(e,i,n),i.set(r,s),i},LI=Symbol.for("@ipld/js-cid/CID"),H0={writable:!1,configurable:!1,enumerable:!0},W0={writable:!1,enumerable:!1,configurable:!1},MZ="0.0.0-dev",LZ=(t,e)=>{if(t.test(MZ))console.warn(e);else throw new Error(e)},UZ=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var VI=Ot(()=>{UI();K0();du();F_();ch()});var N_,_Ee,KI=Ot(()=>{gI();vI();bI();wI();EI();A_();_I();P_();DI();AI();FI();NI();jI();qI();VI();N_={...b_,...w_,...E_,...__,...D_,...S_,...x_,...C_,...O_,...k_},_Ee={...$_,...R_}});function Id(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var z0=Ot(()=>{});function J0(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Id(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var j_=Ot(()=>{z0()});function WI(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var HI,q_,VZ,G0,M_=Ot(()=>{KI();j_();HI=WI("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),q_=WI("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=J0(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),VZ={utf8:HI,"utf-8":HI,hex:N_.base16,latin1:q_,ascii:q_,binary:q_,...N_},G0=VZ});var zI={};Zt(zI,{toString:()=>KZ});function KZ(t,e="utf8"){let r=G0[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var JI=Ot(()=>{M_()});var GI={};Zt(GI,{fromString:()=>HZ});function HZ(t,e="utf8"){let r=G0[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Id(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var XI=Ot(()=>{M_();z0()});var YI={};Zt(YI,{concat:()=>WZ});function WZ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));let r=J0(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return Id(r)}var ZI=Ot(()=>{j_();z0()});var sB=D(($Ee,iB)=>{"use strict";var QI=Xk(),Bd=aI(),{names:dh}=cI(),{toString:X0}=(JI(),Yf(zI)),{fromString:zZ}=(XI(),Yf(GI)),{concat:JZ}=(ZI(),Yf(YI)),Td={};for(let t in dh){let e=t;Td[dh[e]]=e}Object.freeze(Td);function GZ(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return X0(t,"base16")}function XZ(t){return zZ(t,"base16")}function YZ(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return X0(QI.encode("base58btc",t)).slice(1)}function ZZ(t){let e=t instanceof Uint8Array?X0(t):t;return QI.decode("z"+e)}function eB(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=Bd.decode(t);if(!rB(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(Bd.decode.bytes);let r=Bd.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(Bd.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${X0(t,"base16")}`);return{code:e,name:Td[e],length:r,digest:t}}function QZ(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=tB(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");let s=Bd.encode(n),i=Bd.encode(r);return JZ([s,i,t],s.length+i.length+t.length)}function tB(t){let e=t;if(typeof t=="string"){if(dh[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=dh[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(Td[e]===void 0&&!L_(e))throw new Error(`Unrecognized function code: ${e}`);return e}function L_(t){return t>0&&t<16}function rB(t){return!!(L_(t)||Td[t])}function nB(t){eB(t)}function eQ(t){return nB(t),t.subarray(0,2)}iB.exports={names:dh,codes:Td,toHexString:GZ,fromHexString:XZ,toB58String:YZ,fromB58String:ZZ,decode:eB,encode:QZ,coerceCode:tB,isAppCode:L_,validate:nB,prefix:eQ,isValidCode:rB}});var e2=D((m2e,mB)=>{var Fd=1e3,$d=Fd*60,Rd=$d*60,Uc=Rd*24,SQ=Uc*7,AQ=Uc*365.25;mB.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return xQ(t);if(r==="number"&&isFinite(t))return e.long?PQ(t):CQ(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function xQ(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*AQ;case"weeks":case"week":case"w":return r*SQ;case"days":case"day":case"d":return r*Uc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Rd;case"minutes":case"minute":case"mins":case"min":case"m":return r*$d;case"seconds":case"second":case"secs":case"sec":case"s":return r*Fd;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function CQ(t){var e=Math.abs(t);return e>=Uc?Math.round(t/Uc)+"d":e>=Rd?Math.round(t/Rd)+"h":e>=$d?Math.round(t/$d)+"m":e>=Fd?Math.round(t/Fd)+"s":t+"ms"}function PQ(t){var e=Math.abs(t);return e>=Uc?eg(t,e,Uc,"day"):e>=Rd?eg(t,e,Rd,"hour"):e>=$d?eg(t,e,$d,"minute"):e>=Fd?eg(t,e,Fd,"second"):t+" ms"}function eg(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var n2=D((H2e,bB)=>{"use strict";bB.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var jd=D(i2=>{"use strict";Object.defineProperty(i2,"__esModule",{value:!0});var wB=n2();wB.code='require("ajv/dist/runtime/equal").default';i2.default=wB});var zr=D(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.hasErrors=ya.Checked=ya.Status=void 0;ya.Status={INFO:"info",WARN:"warn",ERROR:"error"};var YQ=class{constructor(t,e,r){this.tag=t,this.status=e,this.message=r}};ya.Checked=YQ;var ZQ=t=>{function e(r){return r.status===ya.Status.ERROR}return t.filter(r=>e(r)).length>0};ya.hasErrors=ZQ});var xB=D(AB=>{"use strict";Object.defineProperty(AB,"__esModule",{value:!0})});var CB=D(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.HandlerCheckResult=void 0;var QQ=class{constructor(t,e,r,n,s,i){this.input_descriptor_path=t,this.verifiable_credential_path=e,this.evaluator=r,this.status=n,this.message=s,this.payload=i}};sg.HandlerCheckResult=QQ});var OB=D(PB=>{"use strict";Object.defineProperty(PB,"__esModule",{value:!0})});var IB=D(kB=>{"use strict";Object.defineProperty(kB,"__esModule",{value:!0})});var BB=D(co=>{"use strict";var eee=co&&co.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),og=co&&co.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&eee(e,t,r)};Object.defineProperty(co,"__esModule",{value:!0});og(xB(),co);og(CB(),co);og(OB(),co);og(IB(),co)});var TB=D(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.parseDid=lo.IProofType=lo.IProofPurpose=void 0;var tee;(function(t){t.verificationMethod="verificationMethod",t.assertionMethod="assertionMethod",t.authentication="authentication",t.keyAgreement="keyAgreement",t.contractAgreement="contactAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(tee=lo.IProofPurpose||(lo.IProofPurpose={}));var ree;(function(t){t.Ed25519Signature2018="Ed25519Signature2018",t.Ed25519Signature2020="Ed25519Signature2020",t.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",t.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",t.JsonWebSignature2020="JsonWebSignature2020",t.RsaSignature2018="RsaSignature2018",t.GpgSignature2020="GpgSignature2020",t.JcsEd25519Signature2020="JcsEd25519Signature2020",t.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",t.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",t.JwtProof2020="JwtProof2020"})(ree=lo.IProofType||(lo.IProofType={}));var nee=t=>{let e=iee(t);if(e===null)throw new Error("invalid did");return e};lo.parseDid=nee;var iee=t=>{let r="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",n="([a-z0-9]+)",s=`((?:${r}*:)*(${r}+))`,i="[a-zA-Z0-9_.:%-]",a=`((${`;${i}+=${i}*`})*)`,u="(/[^#?]*)?",c="([?][^#]*)?",l="(#.*)?",d=new RegExp(`^did:${n}:${s}${a}${u}${c}${l}$`);if(t===""||!t)return null;let h=t.match(d);if(h){let f={did:`did:${h[1]}:${h[2]}`,method:h[1],id:h[2],didUrl:t};if(h[4]){let p=h[4].slice(1).split(";");f.params={};for(let y of p){let w=y.split("=");f.params[w[0]]=w[1]}}return h[6]&&(f.path=h[6]),h[7]&&(f.query=h[7].slice(1)),h[8]&&(f.fragment=h[8].slice(1)),f}return null}});var $B=D(FB=>{"use strict";Object.defineProperty(FB,"__esModule",{value:!0})});var RB=D(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.JWT_PROOF_TYPE_2020=fo.DocumentFormat=fo.OriginalType=void 0;var see;(function(t){t.JSONLD="json-ld",t.JWT_ENCODED="jwt-encoded",t.JWT_DECODED="jwt-decoded"})(see=fo.OriginalType||(fo.OriginalType={}));var oee;(function(t){t[t.JWT=0]="JWT",t[t.JSONLD=1]="JSONLD",t[t.EIP712=2]="EIP712"})(oee=fo.DocumentFormat||(fo.DocumentFormat={}));fo.JWT_PROOF_TYPE_2020="JwtProof2020"});var jB=D(NB=>{"use strict";Object.defineProperty(NB,"__esModule",{value:!0})});var p2=D(po=>{"use strict";var aee=po&&po.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ag=po&&po.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&aee(e,t,r)};Object.defineProperty(po,"__esModule",{value:!0});ag(TB(),po);ag($B(),po);ag(RB(),po);ag(jB(),po)});var qB=D(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});ug.ObjectUtils=void 0;var mh=class{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;mh.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}};ug.ObjectUtils=mh});var h2=D(Kc=>{"use strict";var uee=Kc&&Kc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cee=Kc&&Kc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&uee(e,t,r)};Object.defineProperty(Kc,"__esModule",{value:!0});cee(qB(),Kc)});var VB=D((_De,UB)=>{"use strict";function y2(t){this.message=t}y2.prototype=new Error,y2.prototype.name="InvalidCharacterError";var MB=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new y2("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function lee(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(MB(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return MB(e)}}function yh(t){this.message=t}function LB(t,e){if(typeof t!="string")throw new yh("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(lee(t.split(".")[r]))}catch(n){throw new yh("Invalid token specified: "+n.message)}}yh.prototype=new Error,yh.prototype.name="InvalidTokenError";var m2=LB;m2.default=LB,m2.InvalidTokenError=yh,UB.exports=m2});var WB=D(bu=>{"use strict";var KB=bu&&bu.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},dee=bu&&bu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bu,"__esModule",{value:!0});bu.CredentialMapper=void 0;var ho=p2(),Ud=dee(VB()),HB=h2(),Ue=class{static decodeVerifiablePresentation(e){var r;if(Ue.isJwtEncoded(e)){let n=(0,Ud.default)(e),s=(0,Ud.default)(e,{header:!0});return n.vp.proof={type:ho.IProofType.JwtProof2020,created:n.nbf,proofPurpose:ho.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return Ue.isJwtDecodedPresentation(e)?e:Ue.isJsonLdAsString(e)?JSON.parse(e):e}static decodeVerifiableCredential(e){var r;if(Ue.isJwtEncoded(e)){let n=(0,Ud.default)(e),s=(0,Ud.default)(e,{header:!0});return n.vc.proof={type:ho.IProofType.JwtProof2020,created:n.nbf,proofPurpose:ho.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return Ue.isJwtDecodedCredential(e)?e:Ue.isJsonLdAsString(e)?JSON.parse(e):e}static toWrappedVerifiablePresentation(e,r){let n=Ue.getFirstProof(e),s=typeof e!="string"&&Ue.hasJWTProofType(e)?n?.jwt:e;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let i=Ue.decodeVerifiablePresentation(s),o=Ue.isJwtEncoded(s),a=Ue.isJwtDecodedPresentation(s),u=o?ho.OriginalType.JWT_ENCODED:a?ho.OriginalType.JWT_DECODED:ho.OriginalType.JSONLD,c=a||o?"jwt_vp":"ldp_vp",l;if(o||a?l=Ue.jwtDecodedPresentationToUniformPresentation(i,!1,r):l=i,!l||!("verifiableCredential"in l)||!l.verifiableCredential||l.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");let d=Ue.toWrappedVerifiableCredentials(l.verifiableCredential,r),h=Object.assign(Object.assign({},l),{verifiableCredential:d});return{type:u,format:c,original:s,decoded:i,presentation:h,vcs:d}}static toWrappedVerifiableCredentials(e,r){return e.map(n=>Ue.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(e,r){var n;let s=Ue.getFirstProof(e),i=Ue.hasJWTProofType(e)&&s&&(n=s.jwt)!==null&&n!==void 0?n:e;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");let o=Ue.decodeVerifiableCredential(i),a=Ue.isJwtEncoded(i),u=Ue.isJwtDecodedCredential(i),c=a?ho.OriginalType.JWT_ENCODED:u?ho.OriginalType.JWT_DECODED:ho.OriginalType.JSONLD,l=a||u?Ue.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||u?"jwt_vc":"ldp_vc",type:c,credential:l}}static isJwtEncoded(e){return HB.ObjectUtils.isString(e)&&e.startsWith("ey")}static isJsonLdAsString(e){return HB.ObjectUtils.isString(e)&&e.includes("@context")}static isJwtDecodedCredential(e){return e.vc!==void 0&&e.iss!==void 0}static isJwtDecodedPresentation(e){return e.vp!==void 0&&e.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(e,r=!0,n){return Ue.jwtDecodedPresentationToUniformPresentation((0,Ud.default)(e),r,n)}static jwtDecodedPresentationToUniformPresentation(e,r=!0,n){let{iss:s,aud:i,jti:o,vp:a}=e,u=KB(e,["iss","aud","jti","vp"]),c=Object.assign(Object.assign({},u),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");c.verifiableCredential=a.verifiableCredential.map(l=>Ue.toUniformCredential(l,n))}if(s){let l=c.holder;if(l&&l!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${l})`);c.holder=s}if(i){let l=c.verifier;if(l&&l!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${l})`);c.verifier=i}if(o){let l=c.id;if(l&&l!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${l})`);c.id=o}return c}static toUniformCredential(e,r){var n;let s=typeof e!="string"&&Ue.hasJWTProofType(e)?(n=Ue.getFirstProof(e))===null||n===void 0?void 0:n.jwt:e;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");let i=Ue.decodeVerifiableCredential(s),o=Ue.isJwtEncoded(s);return Ue.isJwtDecodedCredential(s)||o?Ue.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(e,r){var n;let s=Ue.getFirstProof(e),i=typeof e!="string"&&Ue.hasJWTProofType(e)?s?.jwt:e;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let o=Ue.decodeVerifiablePresentation(i),a=Ue.isJwtEncoded(i),u=Ue.isJwtDecodedPresentation(i),c=a||u?Ue.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r?.addContextIfMissing&&!c["@context"]&&(c["@context"]=["https://www.w3.org/2018/credentials/v1"]),c.verifiableCredential=(n=c.verifiableCredential)===null||n===void 0?void 0:n.map(l=>Ue.toUniformCredential(l,r)),c}static jwtEncodedCredentialToUniformCredential(e,r){return Ue.jwtDecodedCredentialToUniformCredential((0,Ud.default)(e),r)}static jwtDecodedCredentialToUniformCredential(e,r){let{exp:n,nbf:s,iss:i,vc:o,sub:a,jti:u}=e,c=KB(e,["exp","nbf","iss","vc","sub","jti"]),l=Object.assign(Object.assign({},c),o),d=r?.maxTimeSkewInMS!==void 0?r.maxTimeSkewInMS:999;if(n){let h=l.expirationDate,f=parseInt(n.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){let y=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||y>d)throw new Error(`Inconsistent expiration dates between JWT claim (${p}) and VC value (${h})`)}l.expirationDate=p}if(s){let h=l.issuanceDate,f=parseInt(s.toString()),p=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(h&&h!==p){let y=Math.abs(new Date(p).getTime()-new Date(h).getTime());if(!d||y>d)throw new Error(`Inconsistent issuance dates between JWT claim (${p}) and VC value (${h})`)}l.issuanceDate=p}if(i){let h=l.issuer;if(h){if(typeof h=="string"){if(h!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h})`)}else if(h.id!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${h.id})`)}else l.issuer=i}if(a){let h=Array.isArray(l.credentialSubject)?l.credentialSubject:[l.credentialSubject];for(let f=0;f<h.length;f++){let p=h[f].id;if(p&&p!==a)throw new Error(`Inconsistent credential subject ids between JWT claim (${a}) and VC value (${p})`);Array.isArray(l.credentialSubject)?l.credentialSubject[f].id=a:l.credentialSubject.id=a}}if(u){let h=l.id;if(h&&h!==u)throw new Error(`Inconsistent credential ids between JWT claim (${u}) and VC value (${h})`);l.id=u}return l}static toExternalVerifiableCredential(e){let r;if(e.proof){if(!e.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!e.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!e.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!e.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},e.proof),{type:e.proof.type,created:e.proof.created,proofPurpose:e.proof.proofPurpose,verificationMethod:e.proof.verificationMethod})}return Object.assign(Object.assign({},e),{type:e.type?typeof e.type=="string"?[e.type]:e.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(e){let r=Ue.detectDocumentType(e);if(typeof e=="string"){if(r===0)return Ue.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static storedPresentationToOriginalFormat(e){let r=Ue.detectDocumentType(e);if(typeof e=="string"){if(r===0)return Ue.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static toCompactJWT(e){if(!e||Ue.detectDocumentType(e)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof e=="string")return e;let r;if("vp"in e?r=e.vp.proof:"vc"in e?r=e.vc.proof:r=Array.isArray(e.proof)?e.proof[0].jwt:e.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(e){if(typeof e=="string")return this.isJsonLdAsString(e)?1:0;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof,n=Array.isArray(r)?r[0]:r;return n?.jwt?0:n?.type==="EthereumEip712Signature2021"?2:1}static hasJWTProofType(e){var r;return typeof e=="string"?!1:!!(!((r=Ue.getFirstProof(e))===null||r===void 0)&&r.jwt)}static getFirstProof(e){if(!e||typeof e=="string")return;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof;return Array.isArray(r)?r[0]:r}};bu.CredentialMapper=Ue});var zB=D(Hc=>{"use strict";var fee=Hc&&Hc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),pee=Hc&&Hc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&fee(e,t,r)};Object.defineProperty(Hc,"__esModule",{value:!0});pee(WB(),Hc)});var cg=D(ga=>{"use strict";var hee=ga&&ga.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),g2=ga&&ga.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hee(e,t,r)};Object.defineProperty(ga,"__esModule",{value:!0});g2(p2(),ga);g2(h2(),ga);g2(zB(),ga)});var ws=D(b2=>{"use strict";Object.defineProperty(b2,"__esModule",{value:!0});var v2;(function(t){t.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",t.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",t.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",t.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",t.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",t.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",t.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",t.SUBJECT_IS_NOT_ISSUER="subject is not issuer",t.SUBJECT_IS_ISSUER="subject is issuer",t.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",t.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",t.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",t.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",t.UNKNOWN_EXCEPTION="unknown exception occurred: ",t.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(v2||(v2={}));b2.default=v2});var dT=D(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.version=Ae.parse=Ae.tokenize=Ae.Syntax=void 0;var he,_s,ZB,wu,me,D2,S2,de,Ft,H,Je,ct,Rt,Z,pe,Ce,Q;he={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};_s={};_s[he.BooleanLiteral]="Boolean";_s[he.EOF]="<end>";_s[he.Identifier]="Identifier";_s[he.Keyword]="Keyword";_s[he.NullLiteral]="Null";_s[he.NumericLiteral]="Numeric";_s[he.Punctuator]="Punctuator";_s[he.StringLiteral]="String";_s[he.RegularExpression]="RegularExpression";ZB=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];Ae.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};wu={Data:1,Get:2,Set:4};me={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};D2={NonAsciiIdentifierStart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]"),NonAsciiIdentifierPart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]")};function bh(t,e){if(!t)throw new Error("ASSERT: "+e)}function va(t){return t>=48&&t<=57}function QB(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function gh(t){return"01234567".indexOf(t)>=0}function mee(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function zc(t){return t===10||t===13||t===8232||t===8233}function Kd(t){return t==64||t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&D2.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function dg(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&D2.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function yee(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function wh(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function zi(t){return t==="eval"||t==="arguments"}function gee(t){if(Ft&&wh(t))return!0;switch(t.length){case 2:return t==="if"||t==="in"||t==="do";case 3:return t==="var"||t==="for"||t==="new"||t==="try"||t==="let";case 4:return t==="this"||t==="else"||t==="case"||t==="void"||t==="with"||t==="enum";case 5:return t==="while"||t==="break"||t==="catch"||t==="throw"||t==="const"||t==="yield"||t==="class"||t==="super";case 6:return t==="return"||t==="typeof"||t==="delete"||t==="switch"||t==="export"||t==="import";case 7:return t==="default"||t==="finally"||t==="extends";case 8:return t==="function"||t==="continue"||t==="debugger";case 10:return t==="instanceof";default:return!1}}function _2(t,e,r,n,s){var i,o;bh(typeof r=="number","Comment must have valid position"),!(Ce.lastCommentStart>=r)&&(Ce.lastCommentStart=r,i={type:t,value:e},Q.range&&(i.range=[r,n]),Q.loc&&(i.loc=s),Q.comments.push(i),Q.attachComment&&(Q.leadingComments.push(i),Q.trailingComments.push(i)))}function w2(t){var e,r,n,s;for(e=H-t,r={start:{line:Je,column:H-ct-t}};H<Rt;)if(n=de.charCodeAt(H),++H,zc(n)){Q.comments&&(s=de.slice(e+t,H-1),r.end={line:Je,column:H-ct-1},_2("Line",s,e,H-1,r)),n===13&&de.charCodeAt(H)===10&&++H,++Je,ct=H;return}Q.comments&&(s=de.slice(e+t,H),r.end={line:Je,column:H-ct},_2("Line",s,e,H,r))}function vee(){var t,e,r,n;for(Q.comments&&(t=H-2,e={start:{line:Je,column:H-ct-2}});H<Rt;)if(r=de.charCodeAt(H),zc(r))r===13&&de.charCodeAt(H+1)===10&&++H,++Je,++H,ct=H,H>=Rt&&st({},me.UnexpectedToken,"ILLEGAL");else if(r===42){if(de.charCodeAt(H+1)===47){++H,++H,Q.comments&&(n=de.slice(t+2,H-2),e.end={line:Je,column:H-ct},_2("Block",n,t,H,e));return}++H}else++H;st({},me.UnexpectedToken,"ILLEGAL")}function Eu(){var t,e;for(e=H===0;H<Rt;)if(t=de.charCodeAt(H),mee(t))++H;else if(zc(t))++H,t===13&&de.charCodeAt(H)===10&&++H,++Je,ct=H,e=!0;else if(t===47)if(t=de.charCodeAt(H+1),t===47)++H,++H,w2(2),e=!0;else if(t===42)++H,++H,vee();else break;else if(e&&t===45)if(de.charCodeAt(H+1)===45&&de.charCodeAt(H+2)===62)H+=3,w2(3);else break;else if(t===60)if(de.slice(H+1,H+4)==="!--")++H,++H,++H,++H,w2(4);else break;else break}function fg(t){var e,r,n,s=0;for(r=t==="u"?4:2,e=0;e<r;++e)if(H<Rt&&QB(de[H]))n=de[H++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function eT(){var t,e;for(t=de.charCodeAt(H++),e=String.fromCharCode(t),t===92&&(de.charCodeAt(H)!==117&&st({},me.UnexpectedToken,"ILLEGAL"),++H,t=fg("u"),(!t||t==="\\"||!Kd(t.charCodeAt(0)))&&st({},me.UnexpectedToken,"ILLEGAL"),e=t);H<Rt&&(t=de.charCodeAt(H),!!dg(t));)++H,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),de.charCodeAt(H)!==117&&st({},me.UnexpectedToken,"ILLEGAL"),++H,t=fg("u"),(!t||t==="\\"||!dg(t.charCodeAt(0)))&&st({},me.UnexpectedToken,"ILLEGAL"),e+=t);return e}function bee(){var t,e;for(t=H++;H<Rt;){if(e=de.charCodeAt(H),e===92)return H=t,eT();if(dg(e))++H;else break}return de.slice(t,H)}function wee(){var t,e,r;return t=H,e=de.charCodeAt(H)===92?eT():bee(),e.length===1?r=he.Identifier:gee(e)?r=he.Keyword:e==="null"?r=he.NullLiteral:e==="true"||e==="false"?r=he.BooleanLiteral:r=he.Identifier,{type:r,value:e,lineNumber:Je,lineStart:ct,start:t,end:H}}function ba(){var t=H,e=de.charCodeAt(H),r,n=de[H],s,i,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++H,Q.tokenize&&(e===40?Q.openParenToken=Q.tokens.length:e===123&&(Q.openCurlyToken=Q.tokens.length)),{type:he.Punctuator,value:String.fromCharCode(e),lineNumber:Je,lineStart:ct,start:t,end:H};default:if(r=de.charCodeAt(H+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return H+=2,{type:he.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(r),lineNumber:Je,lineStart:ct,start:t,end:H};case 33:case 61:return H+=2,de.charCodeAt(H)===61&&++H,{type:he.Punctuator,value:de.slice(t,H),lineNumber:Je,lineStart:ct,start:t,end:H}}}if(o=de.substr(H,4),o===">>>=")return H+=4,{type:he.Punctuator,value:o,lineNumber:Je,lineStart:ct,start:t,end:H};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return H+=3,{type:he.Punctuator,value:i,lineNumber:Je,lineStart:ct,start:t,end:H};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return H+=2,{type:he.Punctuator,value:s,lineNumber:Je,lineStart:ct,start:t,end:H};if("<>=!+-*%&|^/".indexOf(n)>=0)return++H,{type:he.Punctuator,value:n,lineNumber:Je,lineStart:ct,start:t,end:H};st({},me.UnexpectedToken,"ILLEGAL")}function Eee(t){for(var e="";H<Rt&&QB(de[H]);)e+=de[H++];return e.length===0&&st({},me.UnexpectedToken,"ILLEGAL"),Kd(de.charCodeAt(H))&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:Je,lineStart:ct,start:t,end:H}}function _ee(t){for(var e="0"+de[H++];H<Rt&&gh(de[H]);)e+=de[H++];return(Kd(de.charCodeAt(H))||va(de.charCodeAt(H)))&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:Je,lineStart:ct,start:t,end:H}}function JB(){var t,e,r;if(r=de[H],bh(va(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=H,t="",r!=="."){if(t=de[H++],r=de[H],t==="0"){if(r==="x"||r==="X")return++H,Eee(e);if(gh(r))return _ee(e);r&&va(r.charCodeAt(0))&&st({},me.UnexpectedToken,"ILLEGAL")}for(;va(de.charCodeAt(H));)t+=de[H++];r=de[H]}if(r==="."){for(t+=de[H++];va(de.charCodeAt(H));)t+=de[H++];r=de[H]}if(r==="e"||r==="E")if(t+=de[H++],r=de[H],(r==="+"||r==="-")&&(t+=de[H++]),va(de.charCodeAt(H)))for(;va(de.charCodeAt(H));)t+=de[H++];else st({},me.UnexpectedToken,"ILLEGAL");return Kd(de.charCodeAt(H))&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.NumericLiteral,value:parseFloat(t),lineNumber:Je,lineStart:ct,start:e,end:H}}function Dee(){var t="",e,r,n,s,i,o,a=!1,u,c;for(u=Je,c=ct,e=de[H],bh(e==="'"||e==='"',"String literal must starts with a quote"),r=H,++H;H<Rt;)if(n=de[H++],n===e){e="";break}else if(n==="\\")if(n=de[H++],!n||!zc(n.charCodeAt(0)))switch(n){case"u":case"x":o=H,i=fg(n),i?t+=i:(H=o,t+=n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:gh(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),H<Rt&&gh(de[H])&&(a=!0,s=s*8+"01234567".indexOf(de[H++]),"0123".indexOf(n)>=0&&H<Rt&&gh(de[H])&&(s=s*8+"01234567".indexOf(de[H++]))),t+=String.fromCharCode(s)):t+=n;break}else++Je,n==="\r"&&de[H]===`
`&&++H,ct=H;else{if(zc(n.charCodeAt(0)))break;t+=n}return e!==""&&st({},me.UnexpectedToken,"ILLEGAL"),{type:he.StringLiteral,value:t,octal:a,startLineNumber:u,startLineStart:c,lineNumber:Je,lineStart:ct,start:r,end:H}}function See(t,e){var r;try{r=new RegExp(t,e)}catch{st({},me.InvalidRegExp)}return r}function Aee(){var t,e,r,n,s;for(t=de[H],bh(t==="/","Regular expression literal must start with a slash"),e=de[H++],r=!1,n=!1;H<Rt;)if(t=de[H++],e+=t,t==="\\")t=de[H++],zc(t.charCodeAt(0))&&st({},me.UnterminatedRegExp),e+=t;else if(zc(t.charCodeAt(0)))st({},me.UnterminatedRegExp);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||st({},me.UnterminatedRegExp),s=e.substr(1,e.length-2),{value:s,literal:e}}function xee(){var t,e,r,n;for(e="",r="";H<Rt&&(t=de[H],!!dg(t.charCodeAt(0)));)if(++H,t==="\\"&&H<Rt)if(t=de[H],t==="u"){if(++H,n=H,t=fg("u"),t)for(r+=t,e+="\\u";n<H;++n)e+=de[n];else H=n,r+="u",e+="\\u";$t({},me.UnexpectedToken,"ILLEGAL")}else e+="\\",$t({},me.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}function tT(){var t,e,r,n,s;return pe=null,Eu(),t=H,e=Aee(),r=xee(),s=See(e.value,r.value),Q.tokenize?{type:he.RegularExpression,value:s,lineNumber:Je,lineStart:ct,start:t,end:H}:{literal:e.literal+r.literal,value:s,start:t,end:H}}function Wc(){var t,e,r,n;return Eu(),t=H,e={start:{line:Je,column:H-ct}},r=tT(),e.end={line:Je,column:H-ct},Q.tokenize||(Q.tokens.length>0&&(n=Q.tokens[Q.tokens.length-1],n.range[0]===t&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&Q.tokens.pop()),Q.tokens.push({type:"RegularExpression",value:r.literal,range:[t,H],loc:e})),r}function Cee(t){return t.type===he.Identifier||t.type===he.Keyword||t.type===he.BooleanLiteral||t.type===he.NullLiteral}function Pee(){var t,e;if(t=Q.tokens[Q.tokens.length-1],!t)return Wc();if(t.type==="Punctuator"){if(t.value==="]")return ba();if(t.value===")")return e=Q.tokens[Q.openParenToken-1],e&&e.type==="Keyword"&&(e.value==="if"||e.value==="while"||e.value==="for"||e.value==="with")?Wc():ba();if(t.value==="}"){if(Q.tokens[Q.openCurlyToken-3]&&Q.tokens[Q.openCurlyToken-3].type==="Keyword"){if(e=Q.tokens[Q.openCurlyToken-4],!e)return ba()}else if(Q.tokens[Q.openCurlyToken-4]&&Q.tokens[Q.openCurlyToken-4].type==="Keyword"){if(e=Q.tokens[Q.openCurlyToken-5],!e)return Wc()}else return ba();return ZB.indexOf(e.value)>=0?ba():Wc()}return Wc()}return t.type==="Keyword"?Wc():ba()}function A2(){var t;return Eu(),H>=Rt?{type:he.EOF,lineNumber:Je,lineStart:ct,start:H,end:H}:(t=de.charCodeAt(H),Kd(t)?wee():t===40||t===41||t===59?ba():t===39||t===34?Dee():t===46?va(de.charCodeAt(H+1))?JB():ba():va(t)?JB():Q.tokenize&&t===47?Pee():ba())}function rT(){var t,e,r,n;return Eu(),t={start:{line:Je,column:H-ct}},e=A2(),t.end={line:Je,column:H-ct},e.type!==he.EOF&&(n=de.slice(e.start,e.end),Q.tokens.push({type:_s[e.type],value:n,range:[e.start,e.end],loc:t})),e}function it(){var t;return t=pe,H=t.end,Je=t.lineNumber,ct=t.lineStart,pe=typeof Q.tokens<"u"?rT():A2(),H=t.end,Je=t.lineNumber,ct=t.lineStart,t}function x2(){var t,e,r;t=H,e=Je,r=ct,pe=typeof Q.tokens<"u"?rT():A2(),H=t,Je=e,ct=r}function GB(t,e){this.line=t,this.column=e}function Oee(t,e,r,n){this.start=new GB(t,e),this.end=new GB(r,n)}S2={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===Ae.Syntax.Program&&t.body.length>0)){for(Q.trailingComments.length>0?Q.trailingComments[0].range[0]>=t.range[1]?(r=Q.trailingComments,Q.trailingComments=[]):Q.trailingComments.length=0:Q.bottomRightStack.length>0&&Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments&&Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments,delete Q.bottomRightStack[Q.bottomRightStack.length-1].trailingComments);Q.bottomRightStack.length>0&&Q.bottomRightStack[Q.bottomRightStack.length-1].range[0]>=t.range[0];)e=Q.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):Q.leadingComments.length>0&&Q.leadingComments[Q.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=Q.leadingComments,Q.leadingComments=[]),r&&(t.trailingComments=r),Q.bottomRightStack.push(t)}},markEnd:function(t,e){return Q.range&&(t.range=[e.start,H]),Q.loc&&(t.loc=new Oee(e.startLineNumber===void 0?e.lineNumber:e.startLineNumber,e.start-(e.startLineStart===void 0?e.lineStart:e.startLineStart),Je,H-ct),this.postProcess(t)),Q.attachComment&&this.processComment(t),t},postProcess:function(t){return Q.source&&(t.loc.source=Q.source),t},createArrayExpression:function(t){return{type:Ae.Syntax.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:Ae.Syntax.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n=t==="||"||t==="&&"?Ae.Syntax.LogicalExpression:Ae.Syntax.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:Ae.Syntax.BlockStatement,body:t}},createBreakStatement:function(t){return{type:Ae.Syntax.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:Ae.Syntax.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:Ae.Syntax.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:Ae.Syntax.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:Ae.Syntax.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:Ae.Syntax.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:Ae.Syntax.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:Ae.Syntax.EmptyStatement}},createExpressionStatement:function(t){return{type:Ae.Syntax.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:Ae.Syntax.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:Ae.Syntax.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:Ae.Syntax.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:Ae.Syntax.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:Ae.Syntax.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:Ae.Syntax.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:Ae.Syntax.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:Ae.Syntax.Literal,value:t.value,raw:de.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:Ae.Syntax.MemberExpression,computed:t==="[",object:e,property:r}},createNewExpression:function(t,e){return{type:Ae.Syntax.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:Ae.Syntax.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:Ae.Syntax.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:Ae.Syntax.Program,body:t}},createProperty:function(t,e,r){return{type:Ae.Syntax.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:Ae.Syntax.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:Ae.Syntax.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:Ae.Syntax.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:Ae.Syntax.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:Ae.Syntax.ThisExpression}},createThrowStatement:function(t){return{type:Ae.Syntax.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:Ae.Syntax.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return t==="++"||t==="--"?{type:Ae.Syntax.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:Ae.Syntax.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:Ae.Syntax.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:Ae.Syntax.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:Ae.Syntax.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:Ae.Syntax.WithStatement,object:t,body:e}}};function Eh(){var t,e,r,n;return t=H,e=Je,r=ct,Eu(),n=Je!==e,H=t,Je=e,ct=r,n}function st(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=e.replace(/%(\d)/g,function(o,a){return bh(a<r.length,"Message reference must be in range"),r[a]});throw typeof t.lineNumber=="number"?(s=new Error("Line "+t.lineNumber+": "+i),s.index=t.start,s.lineNumber=t.lineNumber,s.column=t.start-ct+1):(s=new Error("Line "+Je+": "+i),s.index=H,s.lineNumber=Je,s.column=H-ct+1),s.description=i,s}function $t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{st.apply(null,t)}catch(r){if(Q.errors)Q.errors.push(r);else throw r}}function mo(t){if(t.type===he.EOF&&st(t,me.UnexpectedEOS),t.type===he.NumericLiteral&&st(t,me.UnexpectedNumber),t.type===he.StringLiteral&&st(t,me.UnexpectedString),t.type===he.Identifier&&st(t,me.UnexpectedIdentifier),t.type===he.Keyword){if(yee(t.value))st(t,me.UnexpectedReserved);else if(Ft&&wh(t.value)){$t(t,me.StrictReservedWord);return}st(t,me.UnexpectedToken,t.value)}st(t,me.UnexpectedToken,t.value)}function Re(t){var e=it();(e.type!==he.Punctuator||e.value!==t)&&mo(e)}function $r(t){var e=it();(e.type!==he.Keyword||e.value!==t)&&mo(e)}function Fe(t){return pe.type===he.Punctuator&&pe.value===t}function mn(t){return pe.type===he.Keyword&&pe.value===t}function kee(){var t;return pe.type!==he.Punctuator?!1:(t=pe.value,t==="="||t==="*="||t==="/="||t==="%="||t==="+="||t==="-="||t==="<<="||t===">>="||t===">>>="||t==="&="||t==="^="||t==="|=")}function yo(){var t;if(de.charCodeAt(H)===59||Fe(";")){it();return}t=Je,Eu(),Je===t&&pe.type!==he.EOF&&!Fe("}")&&mo(pe)}function hg(t){return t.type===Ae.Syntax.Identifier||t.type===Ae.Syntax.MemberExpression}function Iee(){var t=[],e;for(e=pe,Re("[");!Fe("]");)Fe(",")?(it(),t.push(null)):(t.push(Es()),Fe("]")||Re(","));return it(),Z.markEnd(Z.createArrayExpression(t),e)}function E2(t,e){var r,n,s;return r=Ft,s=pe,n=P2(),e&&Ft&&zi(t[0].name)&&$t(e,me.StrictParamName),Ft=r,Z.markEnd(Z.createFunctionExpression(null,t,[],n),s)}function lg(){var t,e;return e=pe,t=it(),t.type===he.StringLiteral||t.type===he.NumericLiteral?(Ft&&t.octal&&$t(t,me.StrictOctalLiteral),Z.markEnd(Z.createLiteral(t),e)):Z.markEnd(Z.createIdentifier(t.value),e)}function Bee(){var t,e,r,n,s,i;if(t=pe,i=pe,t.type===he.Identifier)return r=lg(),t.value==="get"&&!Fe(":")?(e=lg(),Re("("),Re(")"),n=E2([]),Z.markEnd(Z.createProperty("get",e,n),i)):t.value==="set"&&!Fe(":")?(e=lg(),Re("("),t=pe,t.type!==he.Identifier?(Re(")"),$t(t,me.UnexpectedToken,t.value),n=E2([])):(s=[_u()],Re(")"),n=E2(s,t)),Z.markEnd(Z.createProperty("set",e,n),i)):(Re(":"),n=Es(),Z.markEnd(Z.createProperty("init",r,n),i));if(t.type===he.EOF||t.type===he.Punctuator)mo(t);else return e=lg(),Re(":"),n=Es(),Z.markEnd(Z.createProperty("init",e,n),i)}function Tee(){var t=[],e,r,n,s,i={},o=String,a;for(a=pe,Re("{");!Fe("}");)e=Bee(),e.key.type===Ae.Syntax.Identifier?r=e.key.name:r=o(e.key.value),s=e.kind==="init"?wu.Data:e.kind==="get"?wu.Get:wu.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===wu.Data?Ft&&s===wu.Data?$t({},me.StrictDuplicateProperty):s!==wu.Data&&$t({},me.AccessorDataProperty):s===wu.Data?$t({},me.AccessorDataProperty):i[n]&s&&$t({},me.AccessorGetSet),i[n]|=s):i[n]=s,t.push(e),Fe("}")||Re(",");return Re("}"),Z.markEnd(Z.createObjectExpression(t),a)}function Fee(){var t;return Re("("),t=rn(),Re(")"),t}function nT(){var t,e,r,n;if(Fe("("))return Fee();if(Fe("["))return Iee();if(Fe("{"))return Tee();if(t=pe.type,n=pe,t===he.Identifier)r=Z.createIdentifier(it().value);else if(t===he.StringLiteral||t===he.NumericLiteral)Ft&&pe.octal&&$t(pe,me.StrictOctalLiteral),r=Z.createLiteral(it());else if(t===he.Keyword){if(mn("function"))return ate();mn("this")?(it(),r=Z.createThisExpression()):mo(it())}else t===he.BooleanLiteral?(e=it(),e.value=e.value==="true",r=Z.createLiteral(e)):t===he.NullLiteral?(e=it(),e.value=null,r=Z.createLiteral(e)):Fe("/")||Fe("/=")?(typeof Q.tokens<"u"?r=Z.createLiteral(Wc()):r=Z.createLiteral(tT()),x2()):mo(it());return Z.markEnd(r,n)}function iT(){var t=[];if(Re("("),!Fe(")"))for(;H<Rt&&(t.push(Es()),!Fe(")"));)Re(",");return Re(")"),t}function $ee(){var t,e;return e=pe,t=it(),Cee(t)||mo(t),Z.markEnd(Z.createIdentifier(t.value),e)}function sT(){return Re("."),$ee()}function oT(){var t;return Re("["),t=rn(),Re("]"),t}function aT(){var t,e,r;return r=pe,$r("new"),t=Nee(),e=Fe("(")?iT():[],Z.markEnd(Z.createNewExpression(t,e),r)}function Ree(){var t,e,r,n,s;for(s=pe,t=Ce.allowIn,Ce.allowIn=!0,e=mn("new")?aT():nT(),Ce.allowIn=t;;){if(Fe("."))n=sT(),e=Z.createMemberExpression(".",e,n);else if(Fe("("))r=iT(),e=Z.createCallExpression(e,r);else if(Fe("["))n=oT(),e=Z.createMemberExpression("[",e,n);else break;Z.markEnd(e,s)}return e}function Nee(){var t,e,r,n;for(n=pe,t=Ce.allowIn,e=mn("new")?aT():nT(),Ce.allowIn=t;Fe(".")||Fe("[");)Fe("[")?(r=oT(),e=Z.createMemberExpression("[",e,r)):(r=sT(),e=Z.createMemberExpression(".",e,r)),Z.markEnd(e,n);return e}function XB(){var t,e,r=pe;return t=Ree(),pe.type===he.Punctuator&&(Fe("++")||Fe("--"))&&!Eh()&&(Ft&&t.type===Ae.Syntax.Identifier&&zi(t.name)&&$t({},me.StrictLHSPostfix),hg(t)||$t({},me.InvalidLHSInAssignment),e=it(),t=Z.markEnd(Z.createPostfixExpression(e.value,t),r)),t}function Vd(){var t,e,r;return pe.type!==he.Punctuator&&pe.type!==he.Keyword?e=XB():Fe("++")||Fe("--")?(r=pe,t=it(),e=Vd(),Ft&&e.type===Ae.Syntax.Identifier&&zi(e.name)&&$t({},me.StrictLHSPrefix),hg(e)||$t({},me.InvalidLHSInAssignment),e=Z.createUnaryExpression(t.value,e),e=Z.markEnd(e,r)):Fe("+")||Fe("-")||Fe("~")||Fe("!")?(r=pe,t=it(),e=Vd(),e=Z.createUnaryExpression(t.value,e),e=Z.markEnd(e,r)):mn("delete")||mn("void")||mn("typeof")?(r=pe,t=it(),e=Vd(),e=Z.createUnaryExpression(t.value,e),e=Z.markEnd(e,r),Ft&&e.operator==="delete"&&e.argument.type===Ae.Syntax.Identifier&&$t({},me.StrictDelete)):e=XB(),e}function YB(t,e){var r=0;if(t.type!==he.Punctuator&&t.type!==he.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=e?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function jee(){var t,e,r,n,s,i,o,a,u,c;if(t=pe,u=Vd(),n=pe,s=YB(n,Ce.allowIn),s===0)return u;for(n.prec=s,it(),e=[t,pe],o=Vd(),i=[u,n,o];(s=YB(pe,Ce.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,u=i.pop(),r=Z.createBinaryExpression(a,u,o),e.pop(),t=e[e.length-1],Z.markEnd(r,t),i.push(r);n=it(),n.prec=s,i.push(n),e.push(pe),r=Vd(),i.push(r)}for(c=i.length-1,r=i[c],e.pop();c>1;)r=Z.createBinaryExpression(i[c-1].value,i[c-2],r),c-=2,t=e.pop(),Z.markEnd(r,t);return r}function qee(){var t,e,r,n,s;return s=pe,t=jee(),Fe("?")&&(it(),e=Ce.allowIn,Ce.allowIn=!0,r=Es(),Ce.allowIn=e,Re(":"),n=Es(),t=Z.createConditionalExpression(t,r,n),Z.markEnd(t,s)),t}function Es(){var t,e,r,n,s;return t=pe,s=pe,n=e=qee(),kee()&&(hg(e)||$t({},me.InvalidLHSInAssignment),Ft&&e.type===Ae.Syntax.Identifier&&zi(e.name)&&$t(t,me.StrictLHSAssignment),t=it(),r=Es(),n=Z.markEnd(Z.createAssignmentExpression(t.value,e,r),s)),n}function rn(){var t,e=pe;if(t=Es(),Fe(",")){for(t=Z.createSequenceExpression([t]);H<Rt&&Fe(",");)it(),t.expressions.push(Es());Z.markEnd(t,e)}return t}function Mee(){for(var t=[],e;H<Rt&&!(Fe("}")||(e=vh(),typeof e>"u"));)t.push(e);return t}function pg(){var t,e;return e=pe,Re("{"),t=Mee(),Re("}"),Z.markEnd(Z.createBlockStatement(t),e)}function _u(){var t,e;return e=pe,t=it(),t.type!==he.Identifier&&mo(t),Z.markEnd(Z.createIdentifier(t.value),e)}function Lee(t){var e=null,r,n;return n=pe,r=_u(),Ft&&zi(r.name)&&$t({},me.StrictVarName),t==="const"?(Re("="),e=Es()):Fe("=")&&(it(),e=Es()),Z.markEnd(Z.createVariableDeclarator(r,e),n)}function C2(t){var e=[];do{if(e.push(Lee(t)),!Fe(","))break;it()}while(H<Rt);return e}function Uee(){var t;return $r("var"),t=C2(),yo(),Z.createVariableDeclaration(t,"var")}function Vee(t){var e,r;return r=pe,$r(t),e=C2(t),yo(),Z.markEnd(Z.createVariableDeclaration(e,t),r)}function Kee(){return Re(";"),Z.createEmptyStatement()}function Hee(){var t=rn();return yo(),Z.createExpressionStatement(t)}function Wee(){var t,e,r;return $r("if"),Re("("),t=rn(),Re(")"),e=go(),mn("else")?(it(),r=go()):r=null,Z.createIfStatement(t,e,r)}function zee(){var t,e,r;return $r("do"),r=Ce.inIteration,Ce.inIteration=!0,t=go(),Ce.inIteration=r,$r("while"),Re("("),e=rn(),Re(")"),Fe(";")&&it(),Z.createDoWhileStatement(t,e)}function Jee(){var t,e,r;return $r("while"),Re("("),t=rn(),Re(")"),r=Ce.inIteration,Ce.inIteration=!0,e=go(),Ce.inIteration=r,Z.createWhileStatement(t,e)}function Gee(){var t,e,r;return r=pe,t=it(),e=C2(),Z.markEnd(Z.createVariableDeclaration(e,t.value),r)}function Xee(){var t,e,r,n,s,i,o;return t=e=r=null,$r("for"),Re("("),Fe(";")?it():(mn("var")||mn("let")?(Ce.allowIn=!1,t=Gee(),Ce.allowIn=!0,t.declarations.length===1&&mn("in")&&(it(),n=t,s=rn(),t=null)):(Ce.allowIn=!1,t=rn(),Ce.allowIn=!0,mn("in")&&(hg(t)||$t({},me.InvalidLHSInForIn),it(),n=t,s=rn(),t=null)),typeof n>"u"&&Re(";")),typeof n>"u"&&(Fe(";")||(e=rn()),Re(";"),Fe(")")||(r=rn())),Re(")"),o=Ce.inIteration,Ce.inIteration=!0,i=go(),Ce.inIteration=o,typeof n>"u"?Z.createForStatement(t,e,r,i):Z.createForInStatement(n,s,i)}function Yee(){var t=null,e;return $r("continue"),de.charCodeAt(H)===59?(it(),Ce.inIteration||st({},me.IllegalContinue),Z.createContinueStatement(null)):Eh()?(Ce.inIteration||st({},me.IllegalContinue),Z.createContinueStatement(null)):(pe.type===he.Identifier&&(t=_u(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Ce.labelSet,e)||st({},me.UnknownLabel,t.name)),yo(),t===null&&!Ce.inIteration&&st({},me.IllegalContinue),Z.createContinueStatement(t))}function Zee(){var t=null,e;return $r("break"),de.charCodeAt(H)===59?(it(),Ce.inIteration||Ce.inSwitch||st({},me.IllegalBreak),Z.createBreakStatement(null)):Eh()?(Ce.inIteration||Ce.inSwitch||st({},me.IllegalBreak),Z.createBreakStatement(null)):(pe.type===he.Identifier&&(t=_u(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Ce.labelSet,e)||st({},me.UnknownLabel,t.name)),yo(),t===null&&!(Ce.inIteration||Ce.inSwitch)&&st({},me.IllegalBreak),Z.createBreakStatement(t))}function Qee(){var t=null;return $r("return"),Ce.inFunctionBody||$t({},me.IllegalReturn),de.charCodeAt(H)===32&&Kd(de.charCodeAt(H+1))?(t=rn(),yo(),Z.createReturnStatement(t)):Eh()?Z.createReturnStatement(null):(Fe(";")||!Fe("}")&&pe.type!==he.EOF&&(t=rn()),yo(),Z.createReturnStatement(t))}function ete(){var t,e;return Ft&&(Eu(),$t({},me.StrictModeWith)),$r("with"),Re("("),t=rn(),Re(")"),e=go(),Z.createWithStatement(t,e)}function tte(){var t,e=[],r,n;for(n=pe,mn("default")?(it(),t=null):($r("case"),t=rn()),Re(":");H<Rt&&!(Fe("}")||mn("default")||mn("case"));)r=go(),e.push(r);return Z.markEnd(Z.createSwitchCase(t,e),n)}function rte(){var t,e,r,n,s;if($r("switch"),Re("("),t=rn(),Re(")"),Re("{"),e=[],Fe("}"))return it(),Z.createSwitchStatement(t,e);for(n=Ce.inSwitch,Ce.inSwitch=!0,s=!1;H<Rt&&!Fe("}");)r=tte(),r.test===null&&(s&&st({},me.MultipleDefaultsInSwitch),s=!0),e.push(r);return Ce.inSwitch=n,Re("}"),Z.createSwitchStatement(t,e)}function nte(){var t;return $r("throw"),Eh()&&st({},me.NewlineAfterThrow),t=rn(),yo(),Z.createThrowStatement(t)}function ite(){var t,e,r;return r=pe,$r("catch"),Re("("),Fe(")")&&mo(pe),t=_u(),Ft&&zi(t.name)&&$t({},me.StrictCatchVariable),Re(")"),e=pg(),Z.markEnd(Z.createCatchClause(t,e),r)}function ste(){var t,e=[],r=null;return $r("try"),t=pg(),mn("catch")&&e.push(ite()),mn("finally")&&(it(),r=pg()),e.length===0&&!r&&st({},me.NoCatchOrFinally),Z.createTryStatement(t,[],e,r)}function ote(){return $r("debugger"),yo(),Z.createDebuggerStatement()}function go(){var t=pe.type,e,r,n,s;if(t===he.EOF&&mo(pe),t===he.Punctuator&&pe.value==="{")return pg();if(s=pe,t===he.Punctuator)switch(pe.value){case";":return Z.markEnd(Kee(),s);case"(":return Z.markEnd(Hee(),s);default:break}if(t===he.Keyword)switch(pe.value){case"break":return Z.markEnd(Zee(),s);case"continue":return Z.markEnd(Yee(),s);case"debugger":return Z.markEnd(ote(),s);case"do":return Z.markEnd(zee(),s);case"for":return Z.markEnd(Xee(),s);case"function":return Z.markEnd(cT(),s);case"if":return Z.markEnd(Wee(),s);case"return":return Z.markEnd(Qee(),s);case"switch":return Z.markEnd(rte(),s);case"throw":return Z.markEnd(nte(),s);case"try":return Z.markEnd(ste(),s);case"var":return Z.markEnd(Uee(),s);case"while":return Z.markEnd(Jee(),s);case"with":return Z.markEnd(ete(),s);default:break}return e=rn(),e.type===Ae.Syntax.Identifier&&Fe(":")?(it(),n="$"+e.name,Object.prototype.hasOwnProperty.call(Ce.labelSet,n)&&st({},me.Redeclaration,"Label",e.name),Ce.labelSet[n]=!0,r=go(),delete Ce.labelSet[n],Z.markEnd(Z.createLabeledStatement(e,r),s)):(yo(),Z.markEnd(Z.createExpressionStatement(e),s))}function P2(){var t,e=[],r,n,s,i,o,a,u,c;for(c=pe,Re("{");H<Rt&&!(pe.type!==he.StringLiteral||(r=pe,t=vh(),e.push(t),t.expression.type!==Ae.Syntax.Literal));)n=de.slice(r.start+1,r.end-1),n==="use strict"?(Ft=!0,s&&$t(s,me.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=Ce.labelSet,o=Ce.inIteration,a=Ce.inSwitch,u=Ce.inFunctionBody,Ce.labelSet={},Ce.inIteration=!1,Ce.inSwitch=!1,Ce.inFunctionBody=!0;H<Rt&&!(Fe("}")||(t=vh(),typeof t>"u"));)e.push(t);return Re("}"),Ce.labelSet=i,Ce.inIteration=o,Ce.inSwitch=a,Ce.inFunctionBody=u,Z.markEnd(Z.createBlockStatement(e),c)}function uT(t){var e,r=[],n,s,i,o,a;if(Re("("),!Fe(")"))for(i={};H<Rt&&(n=pe,e=_u(),o="$"+n.value,Ft?(zi(n.value)&&(s=n,a=me.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=me.StrictParamDupe)):t||(zi(n.value)?(t=n,a=me.StrictParamName):wh(n.value)?(t=n,a=me.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=n,a=me.StrictParamDupe)),r.push(e),i[o]=!0,!Fe(")"));)Re(",");return Re(")"),{params:r,stricted:s,firstRestricted:t,message:a}}function cT(){var t,e=[],r,n,s,i,o,a,u,c;return c=pe,$r("function"),n=pe,t=_u(),Ft?zi(n.value)&&$t(n,me.StrictFunctionName):zi(n.value)?(o=n,a=me.StrictFunctionName):wh(n.value)&&(o=n,a=me.StrictReservedWord),i=uT(o),e=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),u=Ft,r=P2(),Ft&&o&&st(o,a),Ft&&s&&$t(s,a),Ft=u,Z.markEnd(Z.createFunctionDeclaration(t,e,[],r),c)}function ate(){var t,e=null,r,n,s,i,o=[],a,u,c;return c=pe,$r("function"),Fe("(")||(t=pe,e=_u(),Ft?zi(t.value)&&$t(t,me.StrictFunctionName):zi(t.value)?(n=t,s=me.StrictFunctionName):wh(t.value)&&(n=t,s=me.StrictReservedWord)),i=uT(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),u=Ft,a=P2(),Ft&&n&&st(n,s),Ft&&r&&$t(r,s),Ft=u,Z.markEnd(Z.createFunctionExpression(e,o,[],a),c)}function vh(){if(pe.type===he.Keyword)switch(pe.value){case"const":case"let":return Vee(pe.value);case"function":return cT();default:return go()}if(pe.type!==he.EOF)return go()}function ute(){for(var t,e=[],r,n,s;H<Rt&&(r=pe,!(r.type!==he.StringLiteral||(t=vh(),e.push(t),t.expression.type!==Ae.Syntax.Literal)));)n=de.slice(r.start+1,r.end-1),n==="use strict"?(Ft=!0,s&&$t(s,me.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;H<Rt&&(t=vh(),!(typeof t>"u"));)e.push(t);return e}function cte(){var t,e;return Eu(),x2(),e=pe,Ft=!1,t=ute(),Z.markEnd(Z.createProgram(t),e)}function lT(){var t,e,r,n=[];for(t=0;t<Q.tokens.length;++t)e=Q.tokens[t],r={type:e.type,value:e.value},Q.range&&(r.range=e.range),Q.loc&&(r.loc=e.loc),n.push(r);Q.tokens=n}function lte(t,e){var r,n,s;r=String,typeof t!="string"&&!(t instanceof String)&&(t=r(t)),Z=S2,de=t,H=0,Je=de.length>0?1:0,ct=0,Rt=de.length,pe=null,Ce={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Q={},e=e||{},e.tokens=!0,Q.tokens=[],Q.tokenize=!0,Q.openParenToken=-1,Q.openCurlyToken=-1,Q.range=typeof e.range=="boolean"&&e.range,Q.loc=typeof e.loc=="boolean"&&e.loc,typeof e.comment=="boolean"&&e.comment&&(Q.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(Q.errors=[]);try{if(x2(),pe.type===he.EOF)return Q.tokens;for(n=it();pe.type!==he.EOF;)try{n=it()}catch(i){if(n=pe,Q.errors){Q.errors.push(i);break}else throw i}lT(),s=Q.tokens,typeof Q.comments<"u"&&(s.comments=Q.comments),typeof Q.errors<"u"&&(s.errors=Q.errors)}catch(i){throw i}finally{Q={}}return s}Ae.tokenize=lte;function dte(t,e){var r,n;n=String,typeof t!="string"&&!(t instanceof String)&&(t=n(t)),Z=S2,de=t,H=0,Je=de.length>0?1:0,ct=0,Rt=de.length,pe=null,Ce={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Q={},typeof e<"u"&&(Q.range=typeof e.range=="boolean"&&e.range,Q.loc=typeof e.loc=="boolean"&&e.loc,Q.attachComment=typeof e.attachComment=="boolean"&&e.attachComment,Q.loc&&e.source!==null&&e.source!==void 0&&(Q.source=n(e.source)),typeof e.tokens=="boolean"&&e.tokens&&(Q.tokens=[]),typeof e.comment=="boolean"&&e.comment&&(Q.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(Q.errors=[]),Q.attachComment&&(Q.range=!0,Q.comments=[],Q.bottomRightStack=[],Q.trailingComments=[],Q.leadingComments=[]));try{r=cte(),typeof Q.comments<"u"&&(r.comments=Q.comments),typeof Q.tokens<"u"&&(lT(),r.tokens=Q.tokens),typeof Q.errors<"u"&&(r.errors=Q.errors)}catch(s){throw s}finally{Q={}}return r}Ae.parse=dte;Ae.version="1.2.2"});var fT=D(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});mg.slice=void 0;function fte(t,e,r,n){function s(u){return String(u).match(/^[0-9]+$/)?parseInt(u):Number.isFinite(u)?parseInt(u,10):0}if(typeof e=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=t.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,e=e<0?i+e:e,r=r<0?i+r:r,e=s(e===0?0:e||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),e=n>0?Math.max(0,e):Math.min(i,e),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=e)return[];if(n<0&&e<=r)return[];for(var o=[],a=e;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(t[a]);return o}mg.slice=fte});var pT=D((ODe,pte)=>{pte.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.3.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"}}});var mT=D(hT=>{(function t(e){"use strict";var r,n,s,i,o,a;function u(v){var k={},I,T;for(I in v)v.hasOwnProperty(I)&&(T=v[I],typeof T=="object"&&T!==null?k[I]=u(T):k[I]=T);return k}function c(v,k){var I,T,j,g;for(T=v.length,j=0;T;)I=T>>>1,g=j+I,k(v[g])?T=I:(j=g+1,T-=I+1);return j}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={},o={},a={},n={Break:i,Skip:o,Remove:a};function l(v,k){this.parent=v,this.key=k}l.prototype.replace=function(k){this.parent[this.key]=k},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function d(v,k,I,T){this.node=v,this.path=k,this.wrap=I,this.ref=T}function h(){}h.prototype.path=function(){var k,I,T,j,g,b;function E(B,S){if(Array.isArray(S))for(T=0,j=S.length;T<j;++T)B.push(S[T]);else B.push(S)}if(!this.__current.path)return null;for(g=[],k=2,I=this.__leavelist.length;k<I;++k)b=this.__leavelist[k],E(g,b.path);return E(g,this.__current.path),g},h.prototype.type=function(){var v=this.current();return v.type||this.__current.wrap},h.prototype.parents=function(){var k,I,T;for(T=[],k=1,I=this.__leavelist.length;k<I;++k)T.push(this.__leavelist[k].node);return T},h.prototype.current=function(){return this.__current.node},h.prototype.__execute=function(k,I){var T,j;return j=void 0,T=this.__current,this.__current=I,this.__state=null,k&&(j=k.call(this,I.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=T,j},h.prototype.notify=function(k){this.__state=k},h.prototype.skip=function(){this.notify(o)},h.prototype.break=function(){this.notify(i)},h.prototype.remove=function(){this.notify(a)},h.prototype.__initialize=function(v,k){this.visitor=k,this.root=v,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,k.fallback==="iteration"?this.__fallback=Object.keys:typeof k.fallback=="function"&&(this.__fallback=k.fallback),this.__keys=s,k.keys&&(this.__keys=Object.assign(Object.create(this.__keys),k.keys))};function f(v){return v==null?!1:typeof v=="object"&&typeof v.type=="string"}function p(v,k){return(v===r.ObjectExpression||v===r.ObjectPattern)&&k==="properties"}h.prototype.traverse=function(k,I){var T,j,g,b,E,B,S,N,$,O,F,U;for(this.__initialize(k,I),U={},T=this.__worklist,j=this.__leavelist,T.push(new d(k,null,null,null)),j.push(new d(null,null,null,null));T.length;){if(g=T.pop(),g===U){if(g=j.pop(),B=this.__execute(I.leave,g),this.__state===i||B===i)return;continue}if(g.node){if(B=this.__execute(I.enter,g),this.__state===i||B===i)return;if(T.push(U),j.push(g),this.__state===o||B===o)continue;if(b=g.node,E=b.type||g.wrap,O=this.__keys[E],!O)if(this.__fallback)O=this.__fallback(b);else throw new Error("Unknown node type "+E+".");for(N=O.length;(N-=1)>=0;)if(S=O[N],F=b[S],!!F)if(Array.isArray(F)){for($=F.length;($-=1)>=0;)if(F[$]){if(p(E,O[N]))g=new d(F[$],[S,$],"Property",null);else if(f(F[$]))g=new d(F[$],[S,$],null,null);else continue;T.push(g)}}else f(F)&&T.push(new d(F,S,null,null))}}},h.prototype.replace=function(k,I){var T,j,g,b,E,B,S,N,$,O,F,U,M;function R(K){var z,ee,ce,re;if(K.ref.remove()){for(ee=K.ref.key,re=K.ref.parent,z=T.length;z--;)if(ce=T[z],ce.ref&&ce.ref.parent===re){if(ce.ref.key<ee)break;--ce.ref.key}}}for(this.__initialize(k,I),F={},T=this.__worklist,j=this.__leavelist,U={root:k},B=new d(k,null,null,new l(U,"root")),T.push(B),j.push(B);T.length;){if(B=T.pop(),B===F){if(B=j.pop(),E=this.__execute(I.leave,B),E!==void 0&&E!==i&&E!==o&&E!==a&&B.ref.replace(E),(this.__state===a||E===a)&&R(B),this.__state===i||E===i)return U.root;continue}if(E=this.__execute(I.enter,B),E!==void 0&&E!==i&&E!==o&&E!==a&&(B.ref.replace(E),B.node=E),(this.__state===a||E===a)&&(R(B),B.node=null),this.__state===i||E===i)return U.root;if(g=B.node,!!g&&(T.push(F),j.push(B),!(this.__state===o||E===o))){if(b=g.type||B.wrap,$=this.__keys[b],!$)if(this.__fallback)$=this.__fallback(g);else throw new Error("Unknown node type "+b+".");for(S=$.length;(S-=1)>=0;)if(M=$[S],O=g[M],!!O)if(Array.isArray(O)){for(N=O.length;(N-=1)>=0;)if(O[N]){if(p(b,$[S]))B=new d(O[N],[M,N],"Property",new l(O,N));else if(f(O[N]))B=new d(O[N],[M,N],null,new l(O,N));else continue;T.push(B)}}else f(O)&&T.push(new d(O,M,null,new l(g,M)))}}return U.root};function y(v,k){var I=new h;return I.traverse(v,k)}function w(v,k){var I=new h;return I.replace(v,k)}function P(v,k){var I;return I=c(k,function(j){return j.range[0]>v.range[0]}),v.extendedRange=[v.range[0],v.range[1]],I!==k.length&&(v.extendedRange[1]=k[I].range[0]),I-=1,I>=0&&(v.extendedRange[0]=k[I].range[1]),v}function C(v,k,I){var T=[],j,g,b,E;if(!v.range)throw new Error("attachComments needs range information");if(!I.length){if(k.length){for(b=0,g=k.length;b<g;b+=1)j=u(k[b]),j.extendedRange=[0,v.range[0]],T.push(j);v.leadingComments=T}return v}for(b=0,g=k.length;b<g;b+=1)T.push(P(u(k[b]),I));return E=0,y(v,{enter:function(B){for(var S;E<T.length&&(S=T[E],!(S.extendedRange[1]>B.range[0]));)S.extendedRange[1]===B.range[0]?(B.leadingComments||(B.leadingComments=[]),B.leadingComments.push(S),T.splice(E,1)):E+=1;if(E===T.length)return n.Break;if(T[E].extendedRange[0]>B.range[1])return n.Skip}}),E=0,y(v,{leave:function(B){for(var S;E<T.length&&(S=T[E],!(B.range[1]<S.extendedRange[0]));)B.range[1]===S.extendedRange[0]?(B.trailingComments||(B.trailingComments=[]),B.trailingComments.push(S),T.splice(E,1)):E+=1;if(E===T.length)return n.Break;if(T[E].extendedRange[0]>B.range[1])return n.Skip}}),v}return e.version=pT().version,e.Syntax=r,e.traverse=y,e.replace=w,e.attachComments=C,e.VisitorKeys=s,e.VisitorOption=n,e.Controller=h,e.cloneEnvironment=function(){return t({})},e})(hT)});var gT=D((IDe,yT)=>{(function(){"use strict";function t(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}yT.exports={isExpression:t,isStatement:r,isIterationStatement:e,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})()});var O2=D((BDe,vT)=>{(function(){"use strict";var t,e,r,n,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(w){return 48<=w&&w<=57}function a(w){return 48<=w&&w<=57||97<=w&&w<=102||65<=w&&w<=70}function u(w){return w>=48&&w<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(w){return w===32||w===9||w===11||w===12||w===160||w>=5760&&r.indexOf(w)>=0}function l(w){return w===10||w===13||w===8232||w===8233}function d(w){if(w<=65535)return String.fromCharCode(w);var P=String.fromCharCode(Math.floor((w-65536)/1024)+55296),C=String.fromCharCode((w-65536)%1024+56320);return P+C}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function h(w){return w<128?n[w]:e.NonAsciiIdentifierStart.test(d(w))}function f(w){return w<128?s[w]:e.NonAsciiIdentifierPart.test(d(w))}function p(w){return w<128?n[w]:t.NonAsciiIdentifierStart.test(d(w))}function y(w){return w<128?s[w]:t.NonAsciiIdentifierPart.test(d(w))}vT.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:l,isIdentifierStartES5:h,isIdentifierPartES5:f,isIdentifierStartES6:p,isIdentifierPartES6:y}})()});var wT=D((TDe,bT)=>{(function(){"use strict";var t=O2();function e(h){switch(h){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(h,f){return!f&&h==="yield"?!1:n(h,f)}function n(h,f){if(f&&e(h))return!0;switch(h.length){case 2:return h==="if"||h==="in"||h==="do";case 3:return h==="var"||h==="for"||h==="new"||h==="try";case 4:return h==="this"||h==="else"||h==="case"||h==="void"||h==="with"||h==="enum";case 5:return h==="while"||h==="break"||h==="catch"||h==="throw"||h==="const"||h==="yield"||h==="class"||h==="super";case 6:return h==="return"||h==="typeof"||h==="delete"||h==="switch"||h==="export"||h==="import";case 7:return h==="default"||h==="finally"||h==="extends";case 8:return h==="function"||h==="continue"||h==="debugger";case 10:return h==="instanceof";default:return!1}}function s(h,f){return h==="null"||h==="true"||h==="false"||r(h,f)}function i(h,f){return h==="null"||h==="true"||h==="false"||n(h,f)}function o(h){return h==="eval"||h==="arguments"}function a(h){var f,p,y;if(h.length===0||(y=h.charCodeAt(0),!t.isIdentifierStartES5(y)))return!1;for(f=1,p=h.length;f<p;++f)if(y=h.charCodeAt(f),!t.isIdentifierPartES5(y))return!1;return!0}function u(h,f){return(h-55296)*1024+(f-56320)+65536}function c(h){var f,p,y,w,P;if(h.length===0)return!1;for(P=t.isIdentifierStartES6,f=0,p=h.length;f<p;++f){if(y=h.charCodeAt(f),55296<=y&&y<=56319){if(++f,f>=p||(w=h.charCodeAt(f),!(56320<=w&&w<=57343)))return!1;y=u(y,w)}if(!P(y))return!1;P=t.isIdentifierPartES6}return!0}function l(h,f){return a(h)&&!s(h,f)}function d(h,f){return c(h)&&!i(h,f)}bT.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:c,isIdentifierES5:l,isIdentifierES6:d}})()});var ET=D(yg=>{(function(){"use strict";yg.ast=gT(),yg.code=O2(),yg.keyword=wT()})()});var DT=D(k2=>{var _T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");k2.encode=function(t){if(0<=t&&t<_T.length)return _T[t];throw new TypeError("Must be between 0 and 63: "+t)};k2.decode=function(t){var e=65,r=90,n=97,s=122,i=48,o=57,a=43,u=47,c=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=s?t-n+c:i<=t&&t<=o?t-i+l:t==a?62:t==u?63:-1}});var T2=D(B2=>{var ST=DT(),I2=5,AT=1<<I2,xT=AT-1,CT=AT;function hte(t){return t<0?(-t<<1)+1:(t<<1)+0}function mte(t){var e=(t&1)===1,r=t>>1;return e?-r:r}B2.encode=function(e){var r="",n,s=hte(e);do n=s&xT,s>>>=I2,s>0&&(n|=CT),r+=ST.encode(n);while(s>0);return r};B2.decode=function(e,r,n){var s=e.length,i=0,o=0,a,u;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(u=ST.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&CT),u&=xT,i=i+(u<<o),o+=I2}while(a);n.value=mte(i),n.rest=r}});var zd=D(Sn=>{function yte(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}Sn.getArg=yte;var PT=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,gte=/^data:.+\,.+$/;function _h(t){var e=t.match(PT);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Sn.urlParse=_h;function Hd(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}Sn.urlGenerate=Hd;function F2(t){var e=t,r=_h(t);if(r){if(!r.path)return t;e=r.path}for(var n=Sn.isAbsolute(e),s=e.split(/\/+/),i,o=0,a=s.length-1;a>=0;a--)i=s[a],i==="."?s.splice(a,1):i===".."?o++:o>0&&(i===""?(s.splice(a+1,o),o=0):(s.splice(a,2),o--));return e=s.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,Hd(r)):e}Sn.normalize=F2;function OT(t,e){t===""&&(t="."),e===""&&(e=".");var r=_h(e),n=_h(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Hd(r);if(r||e.match(gte))return e;if(n&&!n.host&&!n.path)return n.host=e,Hd(n);var s=e.charAt(0)==="/"?e:F2(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=s,Hd(n)):s}Sn.join=OT;Sn.isAbsolute=function(t){return t.charAt(0)==="/"||PT.test(t)};function vte(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}Sn.relative=vte;var kT=function(){var t=Object.create(null);return!("__proto__"in t)}();function IT(t){return t}function bte(t){return BT(t)?"$"+t:t}Sn.toSetString=kT?IT:bte;function wte(t){return BT(t)?t.slice(1):t}Sn.fromSetString=kT?IT:wte;function BT(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function Ete(t,e,r){var n=Wd(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Wd(t.name,e.name)}Sn.compareByOriginalPositions=Ete;function _te(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Wd(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Wd(t.name,e.name)}Sn.compareByGeneratedPositionsDeflated=_te;function Wd(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function Dte(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Wd(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Wd(t.name,e.name)}Sn.compareByGeneratedPositionsInflated=Dte;function Ste(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}Sn.parseSourceMapInput=Ste;function Ate(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=_h(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var s=n.path.lastIndexOf("/");s>=0&&(n.path=n.path.substring(0,s+1))}e=OT(Hd(n),e)}return F2(e)}Sn.computeSourceURL=Ate});var N2=D(TT=>{var $2=zd(),R2=Object.prototype.hasOwnProperty,Jc=typeof Map<"u";function wa(){this._array=[],this._set=Jc?new Map:Object.create(null)}wa.fromArray=function(e,r){for(var n=new wa,s=0,i=e.length;s<i;s++)n.add(e[s],r);return n};wa.prototype.size=function(){return Jc?this._set.size:Object.getOwnPropertyNames(this._set).length};wa.prototype.add=function(e,r){var n=Jc?e:$2.toSetString(e),s=Jc?this.has(e):R2.call(this._set,n),i=this._array.length;(!s||r)&&this._array.push(e),s||(Jc?this._set.set(e,i):this._set[n]=i)};wa.prototype.has=function(e){if(Jc)return this._set.has(e);var r=$2.toSetString(e);return R2.call(this._set,r)};wa.prototype.indexOf=function(e){if(Jc){var r=this._set.get(e);if(r>=0)return r}else{var n=$2.toSetString(e);if(R2.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};wa.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};wa.prototype.toArray=function(){return this._array.slice()};TT.ArraySet=wa});var RT=D($T=>{var FT=zd();function xte(t,e){var r=t.generatedLine,n=e.generatedLine,s=t.generatedColumn,i=e.generatedColumn;return n>r||n==r&&i>=s||FT.compareByGeneratedPositionsInflated(t,e)<=0}function gg(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}gg.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};gg.prototype.add=function(e){xte(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};gg.prototype.toArray=function(){return this._sorted||(this._array.sort(FT.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};$T.MappingList=gg});var j2=D(NT=>{var Dh=T2(),Rr=zd(),vg=N2().ArraySet,Cte=RT().MappingList;function Ji(t){t||(t={}),this._file=Rr.getArg(t,"file",null),this._sourceRoot=Rr.getArg(t,"sourceRoot",null),this._skipValidation=Rr.getArg(t,"skipValidation",!1),this._sources=new vg,this._names=new vg,this._mappings=new Cte,this._sourcesContents=null}Ji.prototype._version=3;Ji.fromSourceMap=function(e){var r=e.sourceRoot,n=new Ji({file:e.file,sourceRoot:r});return e.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,r!=null&&(i.source=Rr.relative(r,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),e.sources.forEach(function(s){var i=s;r!==null&&(i=Rr.relative(r,s)),n._sources.has(i)||n._sources.add(i);var o=e.sourceContentFor(s);o!=null&&n.setSourceContent(s,o)}),n};Ji.prototype.addMapping=function(e){var r=Rr.getArg(e,"generated"),n=Rr.getArg(e,"original",null),s=Rr.getArg(e,"source",null),i=Rr.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,s,i),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:s,name:i})};Ji.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=Rr.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Rr.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Rr.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Ji.prototype.applySourceMap=function(e,r,n){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var i=this._sourceRoot;i!=null&&(s=Rr.relative(i,s));var o=new vg,a=new vg;this._mappings.unsortedForEach(function(u){if(u.source===s&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,n!=null&&(u.source=Rr.join(n,u.source)),i!=null&&(u.source=Rr.relative(i,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!o.has(l)&&o.add(l);var d=u.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=o,this._names=a,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=Rr.join(n,u)),i!=null&&(u=Rr.relative(i,u)),this.setSourceContent(u,c))},this)};Ji.prototype._validateMapping=function(e,r,n,s){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:s}))}};Ji.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,s=0,i=0,o=0,a="",u,c,l,d,h=this._mappings.toArray(),f=0,p=h.length;f<p;f++){if(c=h[f],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(f>0){if(!Rr.compareByGeneratedPositionsInflated(c,h[f-1]))continue;u+=","}u+=Dh.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(d=this._sources.indexOf(c.source),u+=Dh.encode(d-o),o=d,u+=Dh.encode(c.originalLine-1-s),s=c.originalLine-1,u+=Dh.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=Dh.encode(l-i),i=l)),a+=u}return a};Ji.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Rr.relative(r,n));var s=Rr.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};Ji.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Ji.prototype.toString=function(){return JSON.stringify(this.toJSON())};NT.SourceMapGenerator=Ji});var jT=D(Gc=>{Gc.GREATEST_LOWER_BOUND=1;Gc.LEAST_UPPER_BOUND=2;function q2(t,e,r,n,s,i){var o=Math.floor((e-t)/2)+t,a=s(r,n[o],!0);return a===0?o:a>0?e-o>1?q2(o,e,r,n,s,i):i==Gc.LEAST_UPPER_BOUND?e<n.length?e:-1:o:o-t>1?q2(t,o,r,n,s,i):i==Gc.LEAST_UPPER_BOUND?o:t<0?-1:t}Gc.search=function(e,r,n,s){if(r.length===0)return-1;var i=q2(-1,r.length,e,r,n,s||Gc.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var MT=D(qT=>{function M2(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Pte(t,e){return Math.round(t+Math.random()*(e-t))}function L2(t,e,r,n){if(r<n){var s=Pte(r,n),i=r-1;M2(t,s,n);for(var o=t[n],a=r;a<n;a++)e(t[a],o)<=0&&(i+=1,M2(t,i,a));M2(t,i+1,a);var u=i+1;L2(t,e,r,u-1),L2(t,e,u+1,n)}}qT.quickSort=function(t,e){L2(t,e,0,t.length-1)}});var UT=D(bg=>{var Se=zd(),U2=jT(),Jd=N2().ArraySet,Ote=T2(),Sh=MT().quickSort;function Gt(t,e){var r=t;return typeof t=="string"&&(r=Se.parseSourceMapInput(t)),r.sections!=null?new Ds(r,e):new yn(r,e)}Gt.fromSourceMap=function(t,e){return yn.fromSourceMap(t,e)};Gt.prototype._version=3;Gt.prototype.__generatedMappings=null;Object.defineProperty(Gt.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Gt.prototype.__originalMappings=null;Object.defineProperty(Gt.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Gt.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Gt.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Gt.GENERATED_ORDER=1;Gt.ORIGINAL_ORDER=2;Gt.GREATEST_LOWER_BOUND=1;Gt.LEAST_UPPER_BOUND=2;Gt.prototype.eachMapping=function(e,r,n){var s=r||null,i=n||Gt.GENERATED_ORDER,o;switch(i){case Gt.GENERATED_ORDER:o=this._generatedMappings;break;case Gt.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=Se.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,s)};Gt.prototype.allGeneratedPositionsFor=function(e){var r=Se.getArg(e,"line"),n={source:Se.getArg(e,"source"),originalLine:r,originalColumn:Se.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var s=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Se.compareByOriginalPositions,U2.LEAST_UPPER_BOUND);if(i>=0){var o=this._originalMappings[i];if(e.column===void 0)for(var a=o.originalLine;o&&o.originalLine===a;)s.push({line:Se.getArg(o,"generatedLine",null),column:Se.getArg(o,"generatedColumn",null),lastColumn:Se.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i];else for(var u=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==u;)s.push({line:Se.getArg(o,"generatedLine",null),column:Se.getArg(o,"generatedColumn",null),lastColumn:Se.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i]}return s};bg.SourceMapConsumer=Gt;function yn(t,e){var r=t;typeof t=="string"&&(r=Se.parseSourceMapInput(t));var n=Se.getArg(r,"version"),s=Se.getArg(r,"sources"),i=Se.getArg(r,"names",[]),o=Se.getArg(r,"sourceRoot",null),a=Se.getArg(r,"sourcesContent",null),u=Se.getArg(r,"mappings"),c=Se.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o&&(o=Se.normalize(o)),s=s.map(String).map(Se.normalize).map(function(l){return o&&Se.isAbsolute(o)&&Se.isAbsolute(l)?Se.relative(o,l):l}),this._names=Jd.fromArray(i.map(String),!0),this._sources=Jd.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(l){return Se.computeSourceURL(o,l,e)}),this.sourceRoot=o,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=c}yn.prototype=Object.create(Gt.prototype);yn.prototype.consumer=Gt;yn.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=Se.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};yn.fromSourceMap=function(e,r){var n=Object.create(yn.prototype),s=n._names=Jd.fromArray(e._names.toArray(),!0),i=n._sources=Jd.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return Se.computeSourceURL(n.sourceRoot,f,r)});for(var o=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],c=0,l=o.length;c<l;c++){var d=o[c],h=new LT;h.generatedLine=d.generatedLine,h.generatedColumn=d.generatedColumn,d.source&&(h.source=i.indexOf(d.source),h.originalLine=d.originalLine,h.originalColumn=d.originalColumn,d.name&&(h.name=s.indexOf(d.name)),u.push(h)),a.push(h)}return Sh(n.__originalMappings,Se.compareByOriginalPositions),n};yn.prototype._version=3;Object.defineProperty(yn.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function LT(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}yn.prototype._parseMappings=function(e,r){for(var n=1,s=0,i=0,o=0,a=0,u=0,c=e.length,l=0,d={},h={},f=[],p=[],y,w,P,C,v;l<c;)if(e.charAt(l)===";")n++,l++,s=0;else if(e.charAt(l)===",")l++;else{for(y=new LT,y.generatedLine=n,C=l;C<c&&!this._charIsMappingSeparator(e,C);C++);if(w=e.slice(l,C),P=d[w],P)l+=w.length;else{for(P=[];l<C;)Ote.decode(e,l,h),v=h.value,l=h.rest,P.push(v);if(P.length===2)throw new Error("Found a source, but no line and column");if(P.length===3)throw new Error("Found a source and line, but no column");d[w]=P}y.generatedColumn=s+P[0],s=y.generatedColumn,P.length>1&&(y.source=a+P[1],a+=P[1],y.originalLine=i+P[2],i=y.originalLine,y.originalLine+=1,y.originalColumn=o+P[3],o=y.originalColumn,P.length>4&&(y.name=u+P[4],u+=P[4])),p.push(y),typeof y.originalLine=="number"&&f.push(y)}Sh(p,Se.compareByGeneratedPositionsDeflated),this.__generatedMappings=p,Sh(f,Se.compareByOriginalPositions),this.__originalMappings=f};yn.prototype._findMapping=function(e,r,n,s,i,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return U2.search(e,r,i,o)};yn.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};yn.prototype.originalPositionFor=function(e){var r={generatedLine:Se.getArg(e,"line"),generatedColumn:Se.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",Se.compareByGeneratedPositionsDeflated,Se.getArg(e,"bias",Gt.GREATEST_LOWER_BOUND));if(n>=0){var s=this._generatedMappings[n];if(s.generatedLine===r.generatedLine){var i=Se.getArg(s,"source",null);i!==null&&(i=this._sources.at(i),i=Se.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var o=Se.getArg(s,"name",null);return o!==null&&(o=this._names.at(o)),{source:i,line:Se.getArg(s,"originalLine",null),column:Se.getArg(s,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};yn.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};yn.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var s=e;this.sourceRoot!=null&&(s=Se.relative(this.sourceRoot,s));var i;if(this.sourceRoot!=null&&(i=Se.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!i.path||i.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(r)return null;throw new Error('"'+s+'" is not in the SourceMap.')};yn.prototype.generatedPositionFor=function(e){var r=Se.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:Se.getArg(e,"line"),originalColumn:Se.getArg(e,"column")},s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",Se.compareByOriginalPositions,Se.getArg(e,"bias",Gt.GREATEST_LOWER_BOUND));if(s>=0){var i=this._originalMappings[s];if(i.source===n.source)return{line:Se.getArg(i,"generatedLine",null),column:Se.getArg(i,"generatedColumn",null),lastColumn:Se.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};bg.BasicSourceMapConsumer=yn;function Ds(t,e){var r=t;typeof t=="string"&&(r=Se.parseSourceMapInput(t));var n=Se.getArg(r,"version"),s=Se.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new Jd,this._names=new Jd;var i={line:-1,column:0};this._sections=s.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var a=Se.getArg(o,"offset"),u=Se.getArg(a,"line"),c=Se.getArg(a,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Gt(Se.getArg(o,"map"),e)}})}Ds.prototype=Object.create(Gt.prototype);Ds.prototype.constructor=Gt;Ds.prototype._version=3;Object.defineProperty(Ds.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});Ds.prototype.originalPositionFor=function(e){var r={generatedLine:Se.getArg(e,"line"),generatedColumn:Se.getArg(e,"column")},n=U2.search(r,this._sections,function(i,o){var a=i.generatedLine-o.generatedOffset.generatedLine;return a||i.generatedColumn-o.generatedOffset.generatedColumn}),s=this._sections[n];return s?s.consumer.originalPositionFor({line:r.generatedLine-(s.generatedOffset.generatedLine-1),column:r.generatedColumn-(s.generatedOffset.generatedLine===r.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Ds.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Ds.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var s=this._sections[n],i=s.consumer.sourceContentFor(e,!0);if(i)return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Ds.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(Se.getArg(e,"source"))!==-1){var s=n.consumer.generatedPositionFor(e);if(s){var i={line:s.line+(n.generatedOffset.generatedLine-1),column:s.column+(n.generatedOffset.generatedLine===s.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};Ds.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var s=this._sections[n],i=s.consumer._generatedMappings,o=0;o<i.length;o++){var a=i[o],u=s.consumer._sources.at(a.source);u=Se.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;a.name&&(c=s.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}Sh(this.__generatedMappings,Se.compareByGeneratedPositionsDeflated),Sh(this.__originalMappings,Se.compareByOriginalPositions)};bg.IndexedSourceMapConsumer=Ds});var KT=D(VT=>{var kte=j2().SourceMapGenerator,wg=zd(),Ite=/(\r?\n)/,Bte=10,Gd="$$$isSourceNode$$$";function wi(t,e,r,n,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=s??null,this[Gd]=!0,n!=null&&this.add(n)}wi.fromStringWithSourceMap=function(e,r,n){var s=new wi,i=e.split(Ite),o=0,a=function(){var h=p(),f=p()||"";return h+f;function p(){return o<i.length?i[o++]:void 0}},u=1,c=0,l=null;return r.eachMapping(function(h){if(l!==null)if(u<h.generatedLine)d(l,a()),u++,c=0;else{var f=i[o]||"",p=f.substr(0,h.generatedColumn-c);i[o]=f.substr(h.generatedColumn-c),c=h.generatedColumn,d(l,p),l=h;return}for(;u<h.generatedLine;)s.add(a()),u++;if(c<h.generatedColumn){var f=i[o]||"";s.add(f.substr(0,h.generatedColumn)),i[o]=f.substr(h.generatedColumn),c=h.generatedColumn}l=h},this),o<i.length&&(l&&d(l,a()),s.add(i.splice(o).join(""))),r.sources.forEach(function(h){var f=r.sourceContentFor(h);f!=null&&(n!=null&&(h=wg.join(n,h)),s.setSourceContent(h,f))}),s;function d(h,f){if(h===null||h.source===void 0)s.add(f);else{var p=n?wg.join(n,h.source):h.source;s.add(new wi(h.originalLine,h.originalColumn,p,f,h.name))}}};wi.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Gd]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};wi.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Gd]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};wi.prototype.walk=function(e){for(var r,n=0,s=this.children.length;n<s;n++)r=this.children[n],r[Gd]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};wi.prototype.join=function(e){var r,n,s=this.children.length;if(s>0){for(r=[],n=0;n<s-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};wi.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Gd]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};wi.prototype.setSourceContent=function(e,r){this.sourceContents[wg.toSetString(e)]=r};wi.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Gd]&&this.children[r].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),r=0,n=s.length;r<n;r++)e(wg.fromSetString(s[r]),this.sourceContents[s[r]])};wi.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};wi.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new kte(e),s=!1,i=null,o=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((i!==l.source||o!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),i=l.source,o=l.line,a=l.column,u=l.name,s=!0):s&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,s=!1);for(var d=0,h=c.length;d<h;d++)c.charCodeAt(d)===Bte?(r.line++,r.column=0,d+1===h?(i=null,s=!1):s&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}};VT.SourceNode=wi});var HT=D(Eg=>{Eg.SourceMapGenerator=j2().SourceMapGenerator;Eg.SourceMapConsumer=UT().SourceMapConsumer;Eg.SourceNode=KT().SourceNode});var WT=D((WDe,Tte)=>{Tte.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"1.14.3",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}});var zT=D(Ea=>{(function(){"use strict";var t,e,r,n,s,i,o,a,u,c,l,d,h,f,p,y,w,P,C,v,k,I,T,j,g,b;s=mT(),i=ET(),t=s.Syntax;function E(m){return kt.Expression.hasOwnProperty(m.type)}function B(m){return kt.Statement.hasOwnProperty(m.type)}e={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},r={"||":e.LogicalOR,"&&":e.LogicalAND,"|":e.BitwiseOR,"^":e.BitwiseXOR,"&":e.BitwiseAND,"==":e.Equality,"!=":e.Equality,"===":e.Equality,"!==":e.Equality,is:e.Equality,isnt:e.Equality,"<":e.Relational,">":e.Relational,"<=":e.Relational,">=":e.Relational,in:e.Relational,instanceof:e.Relational,"<<":e.BitwiseSHIFT,">>":e.BitwiseSHIFT,">>>":e.BitwiseSHIFT,"+":e.Additive,"-":e.Additive,"*":e.Multiplicative,"%":e.Multiplicative,"/":e.Multiplicative,"**":e.Exponentiation};var S=1,N=1<<1,$=1<<2,O=1<<3,F=1<<4,U=1<<5,M=N|$,R=S|N,K=S|N|$,z=S,ee=$,ce=S|$,re=S,ie=S|U,ue=0,ye=S|F,ke=S|O;function He(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function Xe(m,A){var _="";for(A|=0;A>0;A>>>=1,m+=m)A&1&&(_+=m);return _}function Me(m){return/[\r\n]/g.test(m)}function Le(m){var A=m.length;return A&&i.code.isLineTerminator(m.charCodeAt(A-1))}function pt(m,A){var _;for(_ in A)A.hasOwnProperty(_)&&(m[_]=A[_]);return m}function je(m,A){var _,x;function q(X){return typeof X=="object"&&X instanceof Object&&!(X instanceof RegExp)}for(_ in A)A.hasOwnProperty(_)&&(x=A[_],q(x)?q(m[_])?je(m[_],x):m[_]=je({},x):m[_]=x);return m}function at(m){var A,_,x,q,X;if(m!==m)throw new Error("Numeric literal whose value is NaN");if(m<0||m===0&&1/m<0)throw new Error("Numeric literal whose value is negative");if(m===1/0)return u?"null":c?"1e400":"1e+400";if(A=""+m,!c||A.length<3)return A;for(_=A.indexOf("."),!u&&A.charCodeAt(0)===48&&_===1&&(_=0,A=A.slice(1)),x=A,A=A.replace("e+","e"),q=0,(X=x.indexOf("e"))>0&&(q=+x.slice(X+1),x=x.slice(0,X)),_>=0&&(q-=x.length-_-1,x=+(x.slice(0,_)+x.slice(_+1))+""),X=0;x.charCodeAt(x.length+X-1)===48;)--X;return X!==0&&(q-=X,x=x.slice(0,X)),q!==0&&(x+="e"+q),(x.length<A.length||l&&m>1e12&&Math.floor(m)===m&&(x="0x"+m.toString(16)).length<A.length)&&+x===m&&(A=x),A}function wr(m,A){return(m&-2)===8232?(A?"u":"\\u")+(m===8232?"2028":"2029"):m===10||m===13?(A?"":"\\")+(m===10?"n":"r"):String.fromCharCode(m)}function Fs(m){var A,_,x,q,X,te,se,ge;if(_=m.toString(),m.source){if(A=_.match(/\/([^/]*)$/),!A)return _;for(x=A[1],_="",se=!1,ge=!1,q=0,X=m.source.length;q<X;++q)te=m.source.charCodeAt(q),ge?(_+=wr(te,ge),ge=!1):(se?te===93&&(se=!1):te===47?_+="\\":te===91&&(se=!0),_+=wr(te,ge),ge=te===92);return"/"+_+"/"+x}return _}function ss(m,A){var _;return m===8?"\\b":m===12?"\\f":m===9?"\\t":(_=m.toString(16).toUpperCase(),u||m>255?"\\u"+"0000".slice(_.length)+_:m===0&&!i.code.isDecimalDigit(A)?"\\0":m===11?"\\x0B":"\\x"+"00".slice(_.length)+_)}function To(m){if(m===92)return"\\\\";if(m===10)return"\\n";if(m===13)return"\\r";if(m===8232)return"\\u2028";if(m===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function Er(m){var A,_,x,q;for(q=d==="double"?'"':"'",A=0,_=m.length;A<_;++A)if(x=m.charCodeAt(A),x===39){q='"';break}else if(x===34){q="'";break}else x===92&&++A;return q+m+q}function Un(m){var A="",_,x,q,X=0,te=0,se,ge;for(_=0,x=m.length;_<x;++_){if(q=m.charCodeAt(_),q===39)++X;else if(q===34)++te;else if(q===47&&u)A+="\\";else if(i.code.isLineTerminator(q)||q===92){A+=To(q);continue}else if(!i.code.isIdentifierPartES5(q)&&(u&&q<32||!u&&!h&&(q<32||q>126))){A+=ss(q,m.charCodeAt(_+1));continue}A+=String.fromCharCode(q)}if(se=!(d==="double"||d==="auto"&&te<X),ge=se?"'":'"',!(se?X:te))return ge+A+ge;for(m=A,A=ge,_=0,x=m.length;_<x;++_)q=m.charCodeAt(_),(q===39&&se||q===34&&!se)&&(A+="\\"),A+=String.fromCharCode(q);return A+ge}function Ma(m){var A,_,x,q="";for(A=0,_=m.length;A<_;++A)x=m[A],q+=Array.isArray(x)?Ma(x):x;return q}function bt(m,A){if(!I)return Array.isArray(m)?Ma(m):m;if(A==null){if(m instanceof n)return m;A={}}return A.loc==null?new n(null,null,I,m,A.name||null):new n(A.loc.start.line,A.loc.start.column,I===!0?A.loc.source||null:I,m,A.name||null)}function sr(){return p||" "}function Te(m,A){var _,x,q,X;return _=bt(m).toString(),_.length===0?[A]:(x=bt(A).toString(),x.length===0?[m]:(q=_.charCodeAt(_.length-1),X=x.charCodeAt(0),(q===43||q===45)&&q===X||i.code.isIdentifierPartES5(q)&&i.code.isIdentifierPartES5(X)||q===47&&X===105?[m,sr(),A]:i.code.isWhiteSpace(q)||i.code.isLineTerminator(q)||i.code.isWhiteSpace(X)||i.code.isLineTerminator(X)?[m,A]:[m,p,A]))}function _r(m){return[o,m]}function St(m){var A;A=o,o+=a,m(o),o=A}function $s(m){var A;for(A=m.length-1;A>=0&&!i.code.isLineTerminator(m.charCodeAt(A));--A);return m.length-1-A}function zu(m,A){var _,x,q,X,te,se,ge,ht;for(_=m.split(/\r\n|[\r\n]/),se=Number.MAX_VALUE,x=1,q=_.length;x<q;++x){for(X=_[x],te=0;te<X.length&&i.code.isWhiteSpace(X.charCodeAt(te));)++te;se>te&&(se=te)}for(typeof A<"u"?(ge=o,_[1][se]==="*"&&(A+=" "),o=A):(se&1&&--se,ge=o),x=1,q=_.length;x<q;++x)ht=bt(_r(_[x].slice(se))),_[x]=I?ht.join(""):ht;return o=ge,_.join(`
`)}function Vn(m,A){if(m.type==="Line"){if(Le(m.value))return"//"+m.value;var _="//"+m.value;return j||(_+=`
`),_}return v.format.indent.adjustMultilineComment&&/[\n\r]/.test(m.value)?zu("/*"+m.value+"*/",A):"/*"+m.value+"*/"}function Rs(m,A){var _,x,q,X,te,se,ge,ht,V,L,W,J,G,fe;if(m.leadingComments&&m.leadingComments.length>0){if(X=A,j){for(q=m.leadingComments[0],A=[],ht=q.extendedRange,V=q.range,W=T.substring(ht[0],V[0]),fe=(W.match(/\n/g)||[]).length,fe>0?(A.push(Xe(`
`,fe)),A.push(_r(Vn(q)))):(A.push(W),A.push(Vn(q))),L=V,_=1,x=m.leadingComments.length;_<x;_++)q=m.leadingComments[_],V=q.range,J=T.substring(L[1],V[0]),fe=(J.match(/\n/g)||[]).length,A.push(Xe(`
`,fe)),A.push(_r(Vn(q))),L=V;G=T.substring(V[1],ht[1]),fe=(G.match(/\n/g)||[]).length,A.push(Xe(`
`,fe))}else for(q=m.leadingComments[0],A=[],P&&m.type===t.Program&&m.body.length===0&&A.push(`
`),A.push(Vn(q)),Le(bt(A).toString())||A.push(`
`),_=1,x=m.leadingComments.length;_<x;++_)q=m.leadingComments[_],ge=[Vn(q)],Le(bt(ge).toString())||ge.push(`
`),A.push(_r(ge));A.push(_r(X))}if(m.trailingComments)if(j)q=m.trailingComments[0],ht=q.extendedRange,V=q.range,W=T.substring(ht[0],V[0]),fe=(W.match(/\n/g)||[]).length,fe>0?(A.push(Xe(`
`,fe)),A.push(_r(Vn(q)))):(A.push(W),A.push(Vn(q)));else for(te=!Le(bt(A).toString()),se=Xe(" ",$s(bt([o,A,a]).toString())),_=0,x=m.trailingComments.length;_<x;++_)q=m.trailingComments[_],te?(_===0?A=[A,a]:A=[A,se],A.push(Vn(q,se))):A=[A,_r(Vn(q))],_!==x-1&&!Le(bt(A).toString())&&(A=[A,`
`]);return A}function os(m,A,_){var x,q=0;for(x=m;x<A;x++)T[x]===`
`&&q++;for(x=1;x<q;x++)_.push(f)}function gr(m,A,_){return A<_?["(",m,")"]:m}function $m(m){var A,_,x;for(x=m.split(/\r\n|\n/),A=1,_=x.length;A<_;A++)x[A]=f+o+x[A];return x}function Rm(m,A){var _,x,q;return _=m[v.verbatim],typeof _=="string"?x=gr($m(_),e.Sequence,A):(x=$m(_.content),q=_.precedence!=null?_.precedence:e.Sequence,x=gr(x,q,A)),bt(x,m)}function kt(){}kt.prototype.maybeBlock=function(m,A){var _,x,q=this;return x=!v.comment||!m.leadingComments,m.type===t.BlockStatement&&x?[p,this.generateStatement(m,A)]:m.type===t.EmptyStatement&&x?";":(St(function(){_=[f,_r(q.generateStatement(m,A))]}),_)},kt.prototype.maybeBlockSuffix=function(m,A){var _=Le(bt(A).toString());return m.type===t.BlockStatement&&(!v.comment||!m.leadingComments)&&!_?[A,p]:_?[A,o]:[A,f,o]};function kn(m){return bt(m.name,m)}function Ju(m,A){return m.async?"async"+(A?sr():p):""}function Sl(m){var A=m.generator&&!v.moz.starlessGenerator;return A?"*"+p:""}function Nm(m){var A=m.value,_="";return A.async&&(_+=Ju(A,!m.computed)),A.generator&&(_+=Sl(A)?"*":""),_}kt.prototype.generatePattern=function(m,A,_){return m.type===t.Identifier?kn(m):this.generateExpression(m,A,_)},kt.prototype.generateFunctionParams=function(m){var A,_,x,q;if(q=!1,m.type===t.ArrowFunctionExpression&&!m.rest&&(!m.defaults||m.defaults.length===0)&&m.params.length===1&&m.params[0].type===t.Identifier)x=[Ju(m,!0),kn(m.params[0])];else{for(x=m.type===t.ArrowFunctionExpression?[Ju(m,!1)]:[],x.push("("),m.defaults&&(q=!0),A=0,_=m.params.length;A<_;++A)q&&m.defaults[A]?x.push(this.generateAssignment(m.params[A],m.defaults[A],"=",e.Assignment,K)):x.push(this.generatePattern(m.params[A],e.Assignment,K)),A+1<_&&x.push(","+p);m.rest&&(m.params.length&&x.push(","+p),x.push("..."),x.push(kn(m.rest))),x.push(")")}return x},kt.prototype.generateFunctionBody=function(m){var A,_;return A=this.generateFunctionParams(m),m.type===t.ArrowFunctionExpression&&(A.push(p),A.push("=>")),m.expression?(A.push(p),_=this.generateExpression(m.body,e.Assignment,K),_.toString().charAt(0)==="{"&&(_=["(",_,")"]),A.push(_)):A.push(this.maybeBlock(m.body,ke)),A},kt.prototype.generateIterationForStatement=function(m,A,_){var x=["for"+(A.await?sr()+"await":"")+p+"("],q=this;return St(function(){A.left.type===t.VariableDeclaration?St(function(){x.push(A.left.kind+sr()),x.push(q.generateStatement(A.left.declarations[0],ue))}):x.push(q.generateExpression(A.left,e.Call,K)),x=Te(x,m),x=[Te(x,q.generateExpression(A.right,e.Assignment,K)),")"]}),x.push(this.maybeBlock(A.body,_)),x},kt.prototype.generatePropertyKey=function(m,A){var _=[];return A&&_.push("["),_.push(this.generateExpression(m,e.Assignment,K)),A&&_.push("]"),_},kt.prototype.generateAssignment=function(m,A,_,x,q){return e.Assignment<x&&(q|=S),gr([this.generateExpression(m,e.Call,q),p+_+p,this.generateExpression(A,e.Assignment,q)],e.Assignment,x)},kt.prototype.semicolon=function(m){return!w&&m&U?"":";"},kt.Statement={BlockStatement:function(m,A){var _,x,q=["{",f],X=this;return St(function(){m.body.length===0&&j&&(_=m.range,_[1]-_[0]>2&&(x=T.substring(_[0]+1,_[1]-1),x[0]===`
`&&(q=["{"]),q.push(x)));var te,se,ge,ht;for(ht=re,A&O&&(ht|=F),te=0,se=m.body.length;te<se;++te)j&&(te===0&&(m.body[0].leadingComments&&(_=m.body[0].leadingComments[0].extendedRange,x=T.substring(_[0],_[1]),x[0]===`
`&&(q=["{"])),m.body[0].leadingComments||os(m.range[0],m.body[0].range[0],q)),te>0&&!m.body[te-1].trailingComments&&!m.body[te].leadingComments&&os(m.body[te-1].range[1],m.body[te].range[0],q)),te===se-1&&(ht|=U),m.body[te].leadingComments&&j?ge=X.generateStatement(m.body[te],ht):ge=_r(X.generateStatement(m.body[te],ht)),q.push(ge),Le(bt(ge).toString())||j&&te<se-1&&m.body[te+1].leadingComments||q.push(f),j&&te===se-1&&(m.body[te].trailingComments||os(m.body[te].range[1],m.range[1],q))}),q.push(_r("}")),q},BreakStatement:function(m,A){return m.label?"break "+m.label.name+this.semicolon(A):"break"+this.semicolon(A)},ContinueStatement:function(m,A){return m.label?"continue "+m.label.name+this.semicolon(A):"continue"+this.semicolon(A)},ClassBody:function(m,A){var _=["{",f],x=this;return St(function(q){var X,te;for(X=0,te=m.body.length;X<te;++X)_.push(q),_.push(x.generateExpression(m.body[X],e.Sequence,K)),X+1<te&&_.push(f)}),Le(bt(_).toString())||_.push(f),_.push(o),_.push("}"),_},ClassDeclaration:function(m,A){var _,x;return _=["class"],m.id&&(_=Te(_,this.generateExpression(m.id,e.Sequence,K))),m.superClass&&(x=Te("extends",this.generateExpression(m.superClass,e.Unary,K)),_=Te(_,x)),_.push(p),_.push(this.generateStatement(m.body,ie)),_},DirectiveStatement:function(m,A){return v.raw&&m.raw?m.raw+this.semicolon(A):Er(m.directive)+this.semicolon(A)},DoWhileStatement:function(m,A){var _=Te("do",this.maybeBlock(m.body,re));return _=this.maybeBlockSuffix(m.body,_),Te(_,["while"+p+"(",this.generateExpression(m.test,e.Sequence,K),")"+this.semicolon(A)])},CatchClause:function(m,A){var _,x=this;return St(function(){var q;m.param?(_=["catch"+p+"(",x.generateExpression(m.param,e.Sequence,K),")"],m.guard&&(q=x.generateExpression(m.guard,e.Sequence,K),_.splice(2,0," if ",q))):_=["catch"]}),_.push(this.maybeBlock(m.body,re)),_},DebuggerStatement:function(m,A){return"debugger"+this.semicolon(A)},EmptyStatement:function(m,A){return";"},ExportDefaultDeclaration:function(m,A){var _=["export"],x;return x=A&U?ie:re,_=Te(_,"default"),B(m.declaration)?_=Te(_,this.generateStatement(m.declaration,x)):_=Te(_,this.generateExpression(m.declaration,e.Assignment,K)+this.semicolon(A)),_},ExportNamedDeclaration:function(m,A){var _=["export"],x,q=this;return x=A&U?ie:re,m.declaration?Te(_,this.generateStatement(m.declaration,x)):(m.specifiers&&(m.specifiers.length===0?_=Te(_,"{"+p+"}"):m.specifiers[0].type===t.ExportBatchSpecifier?_=Te(_,this.generateExpression(m.specifiers[0],e.Sequence,K)):(_=Te(_,"{"),St(function(X){var te,se;for(_.push(f),te=0,se=m.specifiers.length;te<se;++te)_.push(X),_.push(q.generateExpression(m.specifiers[te],e.Sequence,K)),te+1<se&&_.push(","+f)}),Le(bt(_).toString())||_.push(f),_.push(o+"}")),m.source?_=Te(_,["from"+p,this.generateExpression(m.source,e.Sequence,K),this.semicolon(A)]):_.push(this.semicolon(A))),_)},ExportAllDeclaration:function(m,A){return["export"+p,"*"+p,"from"+p,this.generateExpression(m.source,e.Sequence,K),this.semicolon(A)]},ExpressionStatement:function(m,A){var _,x;function q(se){var ge;return se.slice(0,5)!=="class"?!1:(ge=se.charCodeAt(5),ge===123||i.code.isWhiteSpace(ge)||i.code.isLineTerminator(ge))}function X(se){var ge;return se.slice(0,8)!=="function"?!1:(ge=se.charCodeAt(8),ge===40||i.code.isWhiteSpace(ge)||ge===42||i.code.isLineTerminator(ge))}function te(se){var ge,ht,V;if(se.slice(0,5)!=="async"||!i.code.isWhiteSpace(se.charCodeAt(5)))return!1;for(ht=6,V=se.length;ht<V&&i.code.isWhiteSpace(se.charCodeAt(ht));++ht);return ht===V||se.slice(ht,ht+8)!=="function"?!1:(ge=se.charCodeAt(ht+8),ge===40||i.code.isWhiteSpace(ge)||ge===42||i.code.isLineTerminator(ge))}return _=[this.generateExpression(m.expression,e.Sequence,K)],x=bt(_).toString(),x.charCodeAt(0)===123||q(x)||X(x)||te(x)||C&&A&F&&m.expression.type===t.Literal&&typeof m.expression.value=="string"?_=["(",_,")"+this.semicolon(A)]:_.push(this.semicolon(A)),_},ImportDeclaration:function(m,A){var _,x,q=this;return m.specifiers.length===0?["import",p,this.generateExpression(m.source,e.Sequence,K),this.semicolon(A)]:(_=["import"],x=0,m.specifiers[x].type===t.ImportDefaultSpecifier&&(_=Te(_,[this.generateExpression(m.specifiers[x],e.Sequence,K)]),++x),m.specifiers[x]&&(x!==0&&_.push(","),m.specifiers[x].type===t.ImportNamespaceSpecifier?_=Te(_,[p,this.generateExpression(m.specifiers[x],e.Sequence,K)]):(_.push(p+"{"),m.specifiers.length-x===1?(_.push(p),_.push(this.generateExpression(m.specifiers[x],e.Sequence,K)),_.push(p+"}"+p)):(St(function(X){var te,se;for(_.push(f),te=x,se=m.specifiers.length;te<se;++te)_.push(X),_.push(q.generateExpression(m.specifiers[te],e.Sequence,K)),te+1<se&&_.push(","+f)}),Le(bt(_).toString())||_.push(f),_.push(o+"}"+p)))),_=Te(_,["from"+p,this.generateExpression(m.source,e.Sequence,K),this.semicolon(A)]),_)},VariableDeclarator:function(m,A){var _=A&S?K:M;return m.init?[this.generateExpression(m.id,e.Assignment,_),p,"=",p,this.generateExpression(m.init,e.Assignment,_)]:this.generatePattern(m.id,e.Assignment,_)},VariableDeclaration:function(m,A){var _,x,q,X,te,se=this;_=[m.kind],te=A&S?re:ue;function ge(){for(X=m.declarations[0],v.comment&&X.leadingComments?(_.push(`
`),_.push(_r(se.generateStatement(X,te)))):(_.push(sr()),_.push(se.generateStatement(X,te))),x=1,q=m.declarations.length;x<q;++x)X=m.declarations[x],v.comment&&X.leadingComments?(_.push(","+f),_.push(_r(se.generateStatement(X,te)))):(_.push(","+p),_.push(se.generateStatement(X,te)))}return m.declarations.length>1?St(ge):ge(),_.push(this.semicolon(A)),_},ThrowStatement:function(m,A){return[Te("throw",this.generateExpression(m.argument,e.Sequence,K)),this.semicolon(A)]},TryStatement:function(m,A){var _,x,q,X;if(_=["try",this.maybeBlock(m.block,re)],_=this.maybeBlockSuffix(m.block,_),m.handlers)for(x=0,q=m.handlers.length;x<q;++x)_=Te(_,this.generateStatement(m.handlers[x],re)),(m.finalizer||x+1!==q)&&(_=this.maybeBlockSuffix(m.handlers[x].body,_));else{for(X=m.guardedHandlers||[],x=0,q=X.length;x<q;++x)_=Te(_,this.generateStatement(X[x],re)),(m.finalizer||x+1!==q)&&(_=this.maybeBlockSuffix(X[x].body,_));if(m.handler)if(Array.isArray(m.handler))for(x=0,q=m.handler.length;x<q;++x)_=Te(_,this.generateStatement(m.handler[x],re)),(m.finalizer||x+1!==q)&&(_=this.maybeBlockSuffix(m.handler[x].body,_));else _=Te(_,this.generateStatement(m.handler,re)),m.finalizer&&(_=this.maybeBlockSuffix(m.handler.body,_))}return m.finalizer&&(_=Te(_,["finally",this.maybeBlock(m.finalizer,re)])),_},SwitchStatement:function(m,A){var _,x,q,X,te,se=this;if(St(function(){_=["switch"+p+"(",se.generateExpression(m.discriminant,e.Sequence,K),")"+p+"{"+f]}),m.cases)for(te=re,q=0,X=m.cases.length;q<X;++q)q===X-1&&(te|=U),x=_r(this.generateStatement(m.cases[q],te)),_.push(x),Le(bt(x).toString())||_.push(f);return _.push(_r("}")),_},SwitchCase:function(m,A){var _,x,q,X,te,se=this;return St(function(){for(m.test?_=[Te("case",se.generateExpression(m.test,e.Sequence,K)),":"]:_=["default:"],q=0,X=m.consequent.length,X&&m.consequent[0].type===t.BlockStatement&&(x=se.maybeBlock(m.consequent[0],re),_.push(x),q=1),q!==X&&!Le(bt(_).toString())&&_.push(f),te=re;q<X;++q)q===X-1&&A&U&&(te|=U),x=_r(se.generateStatement(m.consequent[q],te)),_.push(x),q+1!==X&&!Le(bt(x).toString())&&_.push(f)}),_},IfStatement:function(m,A){var _,x,q,X=this;return St(function(){_=["if"+p+"(",X.generateExpression(m.test,e.Sequence,K),")"]}),q=A&U,x=re,q&&(x|=U),m.alternate?(_.push(this.maybeBlock(m.consequent,re)),_=this.maybeBlockSuffix(m.consequent,_),m.alternate.type===t.IfStatement?_=Te(_,["else ",this.generateStatement(m.alternate,x)]):_=Te(_,Te("else",this.maybeBlock(m.alternate,x)))):_.push(this.maybeBlock(m.consequent,x)),_},ForStatement:function(m,A){var _,x=this;return St(function(){_=["for"+p+"("],m.init?m.init.type===t.VariableDeclaration?_.push(x.generateStatement(m.init,ue)):(_.push(x.generateExpression(m.init,e.Sequence,M)),_.push(";")):_.push(";"),m.test&&(_.push(p),_.push(x.generateExpression(m.test,e.Sequence,K))),_.push(";"),m.update&&(_.push(p),_.push(x.generateExpression(m.update,e.Sequence,K))),_.push(")")}),_.push(this.maybeBlock(m.body,A&U?ie:re)),_},ForInStatement:function(m,A){return this.generateIterationForStatement("in",m,A&U?ie:re)},ForOfStatement:function(m,A){return this.generateIterationForStatement("of",m,A&U?ie:re)},LabeledStatement:function(m,A){return[m.label.name+":",this.maybeBlock(m.body,A&U?ie:re)]},Program:function(m,A){var _,x,q,X,te;for(X=m.body.length,_=[P&&X>0?`
`:""],te=ye,q=0;q<X;++q)!P&&q===X-1&&(te|=U),j&&(q===0&&(m.body[0].leadingComments||os(m.range[0],m.body[q].range[0],_)),q>0&&!m.body[q-1].trailingComments&&!m.body[q].leadingComments&&os(m.body[q-1].range[1],m.body[q].range[0],_)),x=_r(this.generateStatement(m.body[q],te)),_.push(x),q+1<X&&!Le(bt(x).toString())&&(j&&m.body[q+1].leadingComments||_.push(f)),j&&q===X-1&&(m.body[q].trailingComments||os(m.body[q].range[1],m.range[1],_));return _},FunctionDeclaration:function(m,A){return[Ju(m,!0),"function",Sl(m)||sr(),m.id?kn(m.id):"",this.generateFunctionBody(m)]},ReturnStatement:function(m,A){return m.argument?[Te("return",this.generateExpression(m.argument,e.Sequence,K)),this.semicolon(A)]:["return"+this.semicolon(A)]},WhileStatement:function(m,A){var _,x=this;return St(function(){_=["while"+p+"(",x.generateExpression(m.test,e.Sequence,K),")"]}),_.push(this.maybeBlock(m.body,A&U?ie:re)),_},WithStatement:function(m,A){var _,x=this;return St(function(){_=["with"+p+"(",x.generateExpression(m.object,e.Sequence,K),")"]}),_.push(this.maybeBlock(m.body,A&U?ie:re)),_}},pt(kt.prototype,kt.Statement),kt.Expression={SequenceExpression:function(m,A,_){var x,q,X;for(e.Sequence<A&&(_|=S),x=[],q=0,X=m.expressions.length;q<X;++q)x.push(this.generateExpression(m.expressions[q],e.Assignment,_)),q+1<X&&x.push(","+p);return gr(x,e.Sequence,A)},AssignmentExpression:function(m,A,_){return this.generateAssignment(m.left,m.right,m.operator,A,_)},ArrowFunctionExpression:function(m,A,_){return gr(this.generateFunctionBody(m),e.ArrowFunction,A)},ConditionalExpression:function(m,A,_){return e.Conditional<A&&(_|=S),gr([this.generateExpression(m.test,e.LogicalOR,_),p+"?"+p,this.generateExpression(m.consequent,e.Assignment,_),p+":"+p,this.generateExpression(m.alternate,e.Assignment,_)],e.Conditional,A)},LogicalExpression:function(m,A,_){return this.BinaryExpression(m,A,_)},BinaryExpression:function(m,A,_){var x,q,X,te,se,ge;return te=r[m.operator],q=m.operator==="**"?e.Postfix:te,X=m.operator==="**"?te:te+1,te<A&&(_|=S),se=this.generateExpression(m.left,q,_),ge=se.toString(),ge.charCodeAt(ge.length-1)===47&&i.code.isIdentifierPartES5(m.operator.charCodeAt(0))?x=[se,sr(),m.operator]:x=Te(se,m.operator),se=this.generateExpression(m.right,X,_),m.operator==="/"&&se.toString().charAt(0)==="/"||m.operator.slice(-1)==="<"&&se.toString().slice(0,3)==="!--"?(x.push(sr()),x.push(se)):x=Te(x,se),m.operator==="in"&&!(_&S)?["(",x,")"]:gr(x,te,A)},CallExpression:function(m,A,_){var x,q,X;for(x=[this.generateExpression(m.callee,e.Call,R)],x.push("("),q=0,X=m.arguments.length;q<X;++q)x.push(this.generateExpression(m.arguments[q],e.Assignment,K)),q+1<X&&x.push(","+p);return x.push(")"),_&N?gr(x,e.Call,A):["(",x,")"]},NewExpression:function(m,A,_){var x,q,X,te,se;if(q=m.arguments.length,se=_&$&&!y&&q===0?ce:z,x=Te("new",this.generateExpression(m.callee,e.New,se)),!(_&$)||y||q>0){for(x.push("("),X=0,te=q;X<te;++X)x.push(this.generateExpression(m.arguments[X],e.Assignment,K)),X+1<te&&x.push(","+p);x.push(")")}return gr(x,e.New,A)},MemberExpression:function(m,A,_){var x,q;return x=[this.generateExpression(m.object,e.Call,_&N?R:z)],m.computed?(x.push("["),x.push(this.generateExpression(m.property,e.Sequence,_&N?K:ce)),x.push("]")):(m.object.type===t.Literal&&typeof m.object.value=="number"&&(q=bt(x).toString(),q.indexOf(".")<0&&!/[eExX]/.test(q)&&i.code.isDecimalDigit(q.charCodeAt(q.length-1))&&!(q.length>=2&&q.charCodeAt(0)===48)&&x.push(" ")),x.push("."),x.push(kn(m.property))),gr(x,e.Member,A)},MetaProperty:function(m,A,_){var x;return x=[],x.push(typeof m.meta=="string"?m.meta:kn(m.meta)),x.push("."),x.push(typeof m.property=="string"?m.property:kn(m.property)),gr(x,e.Member,A)},UnaryExpression:function(m,A,_){var x,q,X,te,se;return q=this.generateExpression(m.argument,e.Unary,K),p===""?x=Te(m.operator,q):(x=[m.operator],m.operator.length>2?x=Te(x,q):(te=bt(x).toString(),se=te.charCodeAt(te.length-1),X=q.toString().charCodeAt(0),((se===43||se===45)&&se===X||i.code.isIdentifierPartES5(se)&&i.code.isIdentifierPartES5(X))&&x.push(sr()),x.push(q))),gr(x,e.Unary,A)},YieldExpression:function(m,A,_){var x;return m.delegate?x="yield*":x="yield",m.argument&&(x=Te(x,this.generateExpression(m.argument,e.Yield,K))),gr(x,e.Yield,A)},AwaitExpression:function(m,A,_){var x=Te(m.all?"await*":"await",this.generateExpression(m.argument,e.Await,K));return gr(x,e.Await,A)},UpdateExpression:function(m,A,_){return m.prefix?gr([m.operator,this.generateExpression(m.argument,e.Unary,K)],e.Unary,A):gr([this.generateExpression(m.argument,e.Postfix,K),m.operator],e.Postfix,A)},FunctionExpression:function(m,A,_){var x=[Ju(m,!0),"function"];return m.id?(x.push(Sl(m)||sr()),x.push(kn(m.id))):x.push(Sl(m)||p),x.push(this.generateFunctionBody(m)),x},ArrayPattern:function(m,A,_){return this.ArrayExpression(m,A,_,!0)},ArrayExpression:function(m,A,_,x){var q,X,te=this;return m.elements.length?(X=x?!1:m.elements.length>1,q=["[",X?f:""],St(function(se){var ge,ht;for(ge=0,ht=m.elements.length;ge<ht;++ge)m.elements[ge]?(q.push(X?se:""),q.push(te.generateExpression(m.elements[ge],e.Assignment,K))):(X&&q.push(se),ge+1===ht&&q.push(",")),ge+1<ht&&q.push(","+(X?f:p))}),X&&!Le(bt(q).toString())&&q.push(f),q.push(X?o:""),q.push("]"),q):"[]"},RestElement:function(m,A,_){return"..."+this.generatePattern(m.argument)},ClassExpression:function(m,A,_){var x,q;return x=["class"],m.id&&(x=Te(x,this.generateExpression(m.id,e.Sequence,K))),m.superClass&&(q=Te("extends",this.generateExpression(m.superClass,e.Unary,K)),x=Te(x,q)),x.push(p),x.push(this.generateStatement(m.body,ie)),x},MethodDefinition:function(m,A,_){var x,q;return m.static?x=["static"+p]:x=[],m.kind==="get"||m.kind==="set"?q=[Te(m.kind,this.generatePropertyKey(m.key,m.computed)),this.generateFunctionBody(m.value)]:q=[Nm(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)],Te(x,q)},Property:function(m,A,_){return m.kind==="get"||m.kind==="set"?[m.kind,sr(),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:m.shorthand?m.value.type==="AssignmentPattern"?this.AssignmentPattern(m.value,e.Sequence,K):this.generatePropertyKey(m.key,m.computed):m.method?[Nm(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:[this.generatePropertyKey(m.key,m.computed),":"+p,this.generateExpression(m.value,e.Assignment,K)]},ObjectExpression:function(m,A,_){var x,q,X,te=this;return m.properties.length?(x=m.properties.length>1,St(function(){X=te.generateExpression(m.properties[0],e.Sequence,K)}),!x&&!Me(bt(X).toString())?["{",p,X,p,"}"]:(St(function(se){var ge,ht;if(q=["{",f,se,X],x)for(q.push(","+f),ge=1,ht=m.properties.length;ge<ht;++ge)q.push(se),q.push(te.generateExpression(m.properties[ge],e.Sequence,K)),ge+1<ht&&q.push(","+f)}),Le(bt(q).toString())||q.push(f),q.push(o),q.push("}"),q)):"{}"},AssignmentPattern:function(m,A,_){return this.generateAssignment(m.left,m.right,"=",A,_)},ObjectPattern:function(m,A,_){var x,q,X,te,se,ge=this;if(!m.properties.length)return"{}";if(te=!1,m.properties.length===1)se=m.properties[0],se.type===t.Property&&se.value.type!==t.Identifier&&(te=!0);else for(q=0,X=m.properties.length;q<X;++q)if(se=m.properties[q],se.type===t.Property&&!se.shorthand){te=!0;break}return x=["{",te?f:""],St(function(ht){var V,L;for(V=0,L=m.properties.length;V<L;++V)x.push(te?ht:""),x.push(ge.generateExpression(m.properties[V],e.Sequence,K)),V+1<L&&x.push(","+(te?f:p))}),te&&!Le(bt(x).toString())&&x.push(f),x.push(te?o:""),x.push("}"),x},ThisExpression:function(m,A,_){return"this"},Super:function(m,A,_){return"super"},Identifier:function(m,A,_){return kn(m)},ImportDefaultSpecifier:function(m,A,_){return kn(m.id||m.local)},ImportNamespaceSpecifier:function(m,A,_){var x=["*"],q=m.id||m.local;return q&&x.push(p+"as"+sr()+kn(q)),x},ImportSpecifier:function(m,A,_){var x=m.imported,q=[x.name],X=m.local;return X&&X.name!==x.name&&q.push(sr()+"as"+sr()+kn(X)),q},ExportSpecifier:function(m,A,_){var x=m.local,q=[x.name],X=m.exported;return X&&X.name!==x.name&&q.push(sr()+"as"+sr()+kn(X)),q},Literal:function(m,A,_){var x;if(m.hasOwnProperty("raw")&&k&&v.raw)try{if(x=k(m.raw).body[0].expression,x.type===t.Literal&&x.value===m.value)return m.raw}catch{}return m.regex?"/"+m.regex.pattern+"/"+m.regex.flags:m.value===null?"null":typeof m.value=="string"?Un(m.value):typeof m.value=="number"?at(m.value):typeof m.value=="boolean"?m.value?"true":"false":Fs(m.value)},GeneratorExpression:function(m,A,_){return this.ComprehensionExpression(m,A,_)},ComprehensionExpression:function(m,A,_){var x,q,X,te,se=this;return x=m.type===t.GeneratorExpression?["("]:["["],v.moz.comprehensionExpressionStartsWithAssignment&&(te=this.generateExpression(m.body,e.Assignment,K),x.push(te)),m.blocks&&St(function(){for(q=0,X=m.blocks.length;q<X;++q)te=se.generateExpression(m.blocks[q],e.Sequence,K),q>0||v.moz.comprehensionExpressionStartsWithAssignment?x=Te(x,te):x.push(te)}),m.filter&&(x=Te(x,"if"+p),te=this.generateExpression(m.filter,e.Sequence,K),x=Te(x,["(",te,")"])),v.moz.comprehensionExpressionStartsWithAssignment||(te=this.generateExpression(m.body,e.Assignment,K),x=Te(x,te)),x.push(m.type===t.GeneratorExpression?")":"]"),x},ComprehensionBlock:function(m,A,_){var x;return m.left.type===t.VariableDeclaration?x=[m.left.kind,sr(),this.generateStatement(m.left.declarations[0],ue)]:x=this.generateExpression(m.left,e.Call,K),x=Te(x,m.of?"of":"in"),x=Te(x,this.generateExpression(m.right,e.Sequence,K)),["for"+p+"(",x,")"]},SpreadElement:function(m,A,_){return["...",this.generateExpression(m.argument,e.Assignment,K)]},TaggedTemplateExpression:function(m,A,_){var x=R;_&N||(x=z);var q=[this.generateExpression(m.tag,e.Call,x),this.generateExpression(m.quasi,e.Primary,ee)];return gr(q,e.TaggedTemplate,A)},TemplateElement:function(m,A,_){return m.value.raw},TemplateLiteral:function(m,A,_){var x,q,X;for(x=["`"],q=0,X=m.quasis.length;q<X;++q)x.push(this.generateExpression(m.quasis[q],e.Primary,K)),q+1<X&&(x.push("${"+p),x.push(this.generateExpression(m.expressions[q],e.Sequence,K)),x.push(p+"}"));return x.push("`"),x},ModuleSpecifier:function(m,A,_){return this.Literal(m,A,_)},ImportExpression:function(m,A,_){return gr(["import(",this.generateExpression(m.source,e.Assignment,K),")"],e.Call,A)}},pt(kt.prototype,kt.Expression),kt.prototype.generateExpression=function(m,A,_){var x,q;return q=m.type||t.Property,v.verbatim&&m.hasOwnProperty(v.verbatim)?Rm(m,A):(x=this[q](m,A,_),v.comment&&(x=Rs(m,x)),bt(x,m))},kt.prototype.generateStatement=function(m,A){var _,x;return _=this[m.type](m,A),v.comment&&(_=Rs(m,_)),x=bt(_).toString(),m.type===t.Program&&!P&&f===""&&x.charAt(x.length-1)===`
`&&(_=I?bt(_).replaceRight(/\s+$/,""):x.replace(/\s+$/,"")),bt(_,m)};function Fb(m){var A;if(A=new kt,B(m))return A.generateStatement(m,re);if(E(m))return A.generateExpression(m,e.Sequence,K);throw new Error("Unknown node type: "+m.type)}function $b(m,A){var _=He(),x,q;return A!=null?(typeof A.indent=="string"&&(_.format.indent.style=A.indent),typeof A.base=="number"&&(_.format.indent.base=A.base),A=je(_,A),a=A.format.indent.style,typeof A.base=="string"?o=A.base:o=Xe(a,A.format.indent.base)):(A=_,a=A.format.indent.style,o=Xe(a,A.format.indent.base)),u=A.format.json,c=A.format.renumber,l=u?!1:A.format.hexadecimal,d=u?"double":A.format.quotes,h=A.format.escapeless,f=A.format.newline,p=A.format.space,A.format.compact&&(f=p=a=o=""),y=A.format.parentheses,w=A.format.semicolons,P=A.format.safeConcatenation,C=A.directive,k=u?null:A.parse,I=A.sourceMap,T=A.sourceCode,j=A.format.preserveBlankLines&&T!==null,v=A,I&&(Ea.browser?n=globalThis.sourceMap.SourceNode:n=HT().SourceNode),x=Fb(m),I?(q=x.toStringWithSourceMap({file:A.file,sourceRoot:A.sourceMapRoot}),A.sourceContent&&q.map.setSourceContent(A.sourceMap,A.sourceContent),A.sourceMapWithCode?q:q.map.toString()):(q={code:x.toString(),map:null},A.sourceMapWithCode?q:q.code)}g={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},b=He().format,Ea.version=WT().version,Ea.generate=$b,Ea.attachComments=s.attachComments,Ea.Precedence=je({},e),Ea.browser=!1,Ea.FORMAT_MINIFY=g,Ea.FORMAT_DEFAULTS=b})()});var GT=D((JDe,JT)=>{var Fte=zT().generate;JT.exports=function(t,e){e||(e={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var u=[],c=0,l=i.elements.length;c<l;c++){var d=s(i.elements[c]);if(d===r)return r;u.push(d)}return u}else if(i.type==="ObjectExpression"){for(var h={},c=0;c<i.properties.length;c++){var f=i.properties[c],p=f.value===null?f.value:s(f.value);if(p===r)return r;h[f.key.value||f.key.name]=p}return h}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var l=s(i.left);if(l===r)return r;var y=s(i.right);if(y===r)return r;var w=i.operator;return w==="=="?l==y:w==="==="?l===y:w==="!="?l!=y:w==="!=="?l!==y:w==="+"?l+y:w==="-"?l-y:w==="*"?l*y:w==="/"?l/y:w==="%"?l%y:w==="<"?l<y:w==="<="?l<=y:w===">"?l>y:w===">="?l>=y:w==="|"?l|y:w==="&"?l&y:w==="^"?l^y:w==="&&"?l&&y:w==="||"?l||y:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(e,i.name)?e[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(e,"this")?e.this:r;if(i.type==="CallExpression"){var P=s(i.callee);if(P===r||typeof P!="function")return r;var C=i.callee.object?s(i.callee.object):r;C===r&&(C=null);for(var v=[],c=0,l=i.arguments.length;c<l;c++){var d=s(i.arguments[c]);if(d===r)return r;v.push(d)}return P.apply(C,v)}else if(i.type==="MemberExpression"){var h=s(i.object);if(h===r||typeof h=="function")return r;if(i.property.type==="Identifier")return h[i.property.name];var f=s(i.property);return f===r?r:h[f]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var k=i.body.body,I={};Object.keys(e).forEach(function($){I[$]=e[$]});for(var c=0;c<i.params.length;c++){var T=i.params[c];if(T.type=="Identifier")e[T.name]=null;else return r}for(var c in k)if(s(k[c])===r)return r;e=I;var j=Object.keys(e),g=j.map(function($){return e[$]});return Function(j.join(", "),"return "+Fte(i)).apply(null,g)}else if(i.type==="TemplateLiteral"){for(var b="",c=0;c<i.expressions.length;c++)b+=s(i.quasis[c]),b+=s(i.expressions[c]);return b+=s(i.quasis[c]),b}else if(i.type==="TaggedTemplateExpression"){var E=s(i.tag),B=i.quasi,S=B.quasis.map(s),N=B.expressions.map(s);return E.apply(null,[S].concat(N))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(t);return n===r?void 0:n}});var eF=D(Gi=>{"use strict";var $te=Gi&&Gi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Rte=Gi&&Gi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Nte=Gi&&Gi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$te(e,t,r);return Rte(e,t),e},jte=Gi&&Gi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.Handlers=void 0;var K2=Nte(dT()),qte=fT(),ZT=Xi(),Mte=jte(GT());function XT(t){return function(e,r,n,s){var i=e.value,o=e.path,a=[],u=function(c,l){QT(c)?(c.forEach(function(d,h){a.length>=s||n(h,d,r)&&a.push({path:l.concat(h),value:d})}),c.forEach(function(d,h){a.length>=s||t&&u(d,l.concat(h))})):Ute(c)&&(Object.keys(c).forEach(function(d){a.length>=s||n(d,c[d],r)&&a.push({path:l.concat(d),value:c[d]})}),Object.keys(c).forEach(function(d){a.length>=s||t&&u(c[d],l.concat(d))}))}.bind(this);return u(i,o),a}}function H2(t,e){try{return(0,Mte.default)(t,e)}catch{}}function _g(t){return function(e,r,n){return this.descend(r,e.expression.value,t,n)}}function Dg(t){return function(e,r,n){return this.traverse(r,e.expression.value,t,n)}}function YT(t){return t=t.filter(function(e){return e}),Kte(t,function(e){return e.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function Lte(t){var e=String(t);return e.match(/^-?[0-9]+$/)?parseInt(e):null}function QT(t){return Array.isArray(t)}function Ute(t){return t&&!(t instanceof Array)&&t instanceof Object}function V2(t,e,r){var n=K2.parse(e).body[0].expression,s=H2(n,{"@":t.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=ZT.JSONPath.nodes(t.value,i);return o.forEach(function(a){a.path=t.path.concat(a.path.slice(1))}),o}var Vte=function(){function t(){this._fns={"member-child-identifier":function(e,r){var n=e.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":Dg(function(e,r,n){return e==n}),"subscript-child-numeric_literal":_g(function(e,r,n){return e===n}),"member-child-numeric_literal":_g(function(e,r,n){return String(e)===String(n)}),"subscript-descendant-numeric_literal":Dg(function(e,r,n){return e===n}),"member-child-wildcard":_g(function(){return!0}),"member-descendant-wildcard":Dg(function(){return!0}),"subscript-descendant-wildcard":Dg(function(){return!0}),"subscript-child-wildcard":_g(function(){return!0}),"subscript-child-slice":function(e,r){if(QT(r.value)){var n=e.expression.value.split(":").map(Lte),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return qte.slice.apply(null,[s].concat(n))}},"subscript-child-union":function(e,r){var n=[];return e.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),YT(n)},"subscript-descendant-union":function(e,r,n){var s=this,i=[],o=ZT.JSONPath.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||e.expression.value.forEach(function(u){var c={operation:"subscript",scope:"child",expression:u.expression},l=s.resolve(c),d=l(c,a);i=i.concat(d)})}),YT(i)},"subscript-child-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=K2.parse(s).body[0].expression,o=function(a,u){return H2(i,{"@":u})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=K2.parse(s).body[0].expression,o=function(a,u){return H2(i,{"@":u})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return V2(r,n,"$[{{value}}]")},"member-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return V2(r,n,"$.{{value}}")},"member-descendant-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return V2(r,n,"$..value")}},this.initialize()}return t.prototype.initialize=function(){this.traverse=XT(!0),this.descend=XT(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},t.prototype.resolve=function(e){var r=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},t.prototype.register=function(e,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[e]=r},t}();Gi.Handlers=Vte;function Kte(t,e){for(var r=[],n=[],s=0,i=t?.length;s<i;s++){var o=t[s],a=e?e(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}});var tF=D(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.TOKENS=void 0;Sg.TOKENS={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}});var rF=D(Ah=>{var Ag=function(){var t=function(T,j,g,b){for(g=g||{},b=T.length;b--;g[T[b]]=j);return g},e=[1,5],r=[1,6],n=[1,7],s=[1,8],i=[1,9],o=[1,18],a=[1,19],u=[1,20],c=[1,12,14,22],l=[1,29],d=[1,30],h=[1,33],f=[1,35],p=[1,31],y=[1,36],w=[1,37],P=[24,28],C={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(j,g,b,E,B,S,N){E.ast||(E.ast=v,v.initialize());var $=S.length-1;switch(B){case 1:return E.ast.set({expression:{type:"root",value:S[$]}}),E.ast.unshift(),E.ast.yield();break;case 2:return E.ast.set({expression:{type:"root",value:S[$-1]}}),E.ast.unshift(),E.ast.yield();break;case 3:return E.ast.unshift(),E.ast.yield();break;case 4:return E.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:S[$-1]}}),E.ast.unshift(),E.ast.yield();break;case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:E.ast.set({operation:"member"}),E.ast.push();break;case 8:E.ast.set({operation:"subscript"}),E.ast.push();break;case 9:case 19:E.ast.set({scope:"child"});break;case 10:case 20:E.ast.set({scope:"descendant"});break;case 12:E.ast.set({scope:"child",operation:"member"});break;case 14:E.ast.set({expression:{type:"wildcard",value:S[$]}});break;case 15:E.ast.set({expression:{type:"identifier",value:S[$]}});break;case 16:E.ast.set({expression:{type:"script_expression",value:S[$]}});break;case 17:E.ast.set({expression:{type:"numeric_literal",value:parseInt(S[$])}});break;case 24:S[$].length>1?E.ast.set({expression:{type:"union",value:S[$]}}):this.$=S[$];break;case 25:this.$=[S[$]];break;case 26:this.$=S[$-2].concat(S[$]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(S[$])}},E.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:S[$]}},E.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:S[$]}},E.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:S[$]}},E.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:S[$]}},E.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:S[$]}},E.ast.set(this.$);break;case 33:case 34:this.$=S[$];break}},table:[{3:1,4:[1,2],6:3,13:4,15:e,16:r,17:n,18:s,19:i},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,12]),t(c,[2,14]),t(c,[2,15]),t(c,[2,16]),t(c,[2,17]),t(c,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,5]),t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,19]),t(c,[2,20]),{13:23,15:e,16:r,17:n,18:s,19:i},{13:24,15:e,16:r,17:n,18:s,19:i,22:[1,25]},{15:l,17:d,18:h,23:26,25:27,26:28,27:32,29:34,30:f,31:p,32:y,33:w},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,6]),t(c,[2,11]),t(c,[2,13]),{15:l,17:d,18:h,23:38,25:27,26:28,27:32,29:34,30:f,31:p,32:y,33:w},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},t(P,[2,25]),t(P,[2,27]),t(P,[2,28]),t(P,[2,29]),t(P,[2,33]),t(P,[2,34]),{24:[1,41]},t(c,[2,21]),{18:h,27:42,29:34,30:f,32:y,33:w},t(c,[2,22]),t(P,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(j,g){if(g.recoverable)this.trace(j);else{var b=new Error(j);throw b.hash=g,b}},parse:function(j){var g=this,b=[0],E=[],B=[null],S=[],N=this.table,$="",O=0,F=0,U=0,M=2,R=1,K=S.slice.call(arguments,1),z=Object.create(this.lexer),ee={yy:{}};for(var ce in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ce)&&(ee.yy[ce]=this.yy[ce]);z.setInput(j,ee.yy),ee.yy.lexer=z,ee.yy.parser=this,typeof z.yylloc>"u"&&(z.yylloc={});var re=z.yylloc;S.push(re);var ie=z.options&&z.options.ranges;typeof ee.yy.parseError=="function"?this.parseError=ee.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ue(Er){b.length=b.length-2*Er,B.length=B.length-Er,S.length=S.length-Er}e:var ye=function(){var Er;return Er=z.lex()||R,typeof Er!="number"&&(Er=g.symbols_[Er]||Er),Er};for(var ke,He,Xe,Me,Le,pt,je={},at,wr,Fs,ss;;){if(Xe=b[b.length-1],this.defaultActions[Xe]?Me=this.defaultActions[Xe]:((ke===null||typeof ke>"u")&&(ke=ye()),Me=N[Xe]&&N[Xe][ke]),typeof Me>"u"||!Me.length||!Me[0]){var To="";ss=[];for(at in N[Xe])this.terminals_[at]&&at>M&&ss.push("'"+this.terminals_[at]+"'");z.showPosition?To="Parse error on line "+(O+1)+`:
`+z.showPosition()+`
Expecting `+ss.join(", ")+", got '"+(this.terminals_[ke]||ke)+"'":To="Parse error on line "+(O+1)+": Unexpected "+(ke==R?"end of input":"'"+(this.terminals_[ke]||ke)+"'"),this.parseError(To,{text:z.match,token:this.terminals_[ke]||ke,line:z.yylineno,loc:re,expected:ss})}if(Me[0]instanceof Array&&Me.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Xe+", token: "+ke);switch(Me[0]){case 1:b.push(ke),B.push(z.yytext),S.push(z.yylloc),b.push(Me[1]),ke=null,He?(ke=He,He=null):(F=z.yyleng,$=z.yytext,O=z.yylineno,re=z.yylloc,U>0&&U--);break;case 2:if(wr=this.productions_[Me[1]][1],je.$=B[B.length-wr],je._$={first_line:S[S.length-(wr||1)].first_line,last_line:S[S.length-1].last_line,first_column:S[S.length-(wr||1)].first_column,last_column:S[S.length-1].last_column},ie&&(je._$.range=[S[S.length-(wr||1)].range[0],S[S.length-1].range[1]]),pt=this.performAction.apply(je,[$,F,O,ee.yy,Me[1],B,S].concat(K)),typeof pt<"u")return pt;wr&&(b=b.slice(0,-1*wr*2),B=B.slice(0,-1*wr),S=S.slice(0,-1*wr)),b.push(this.productions_[Me[1]][0]),B.push(je.$),S.push(je._$),Fs=N[b[b.length-2]][b[b.length-1]],b.push(Fs);break;case 3:return!0}}return!0}},v={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(T){for(var j in T)this._node[j]=T[j];return this._node},node:function(T){return arguments.length&&(this._node=T),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var T=this._nodes;return this.initialize(),T}},k=function(){var T={EOF:1,parseError:function(g,b){if(this.yy.parser)this.yy.parser.parseError(g,b);else throw new Error(g)},setInput:function(j,g){return this.yy=g||this.yy||{},this._input=j,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var j=this._input[0];this.yytext+=j,this.yyleng++,this.offset++,this.match+=j,this.matched+=j;var g=j.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),j},unput:function(j){var g=j.length,b=j.split(/(?:\r\n?|\n)/g);this._input=j+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),b.length-1&&(this.yylineno-=b.length-1);var B=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===E.length?this.yylloc.first_column:0)+E[E.length-b.length].length-b[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[B[0],B[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(j){this.unput(this.match.slice(j))},pastInput:function(){var j=this.matched.substr(0,this.matched.length-this.match.length);return(j.length>20?"...":"")+j.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var j=this.match;return j.length<20&&(j+=this._input.substr(0,20-j.length)),(j.substr(0,20)+(j.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var j=this.pastInput(),g=new Array(j.length+1).join("-");return j+this.upcomingInput()+`
`+g+"^"},test_match:function(j,g){var b,E,B;if(this.options.backtrack_lexer&&(B={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(B.yylloc.range=this.yylloc.range.slice(0))),E=j[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+j[0].length},this.yytext+=j[0],this.match+=j[0],this.matches=j,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(j[0].length),this.matched+=j[0],b=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),b)return b;if(this._backtrack){for(var S in B)this[S]=B[S];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var j,g,b,E;this._more||(this.yytext="",this.match="");for(var B=this._currentRules(),S=0;S<B.length;S++)if(b=this._input.match(this.rules[B[S]]),b&&(!g||b[0].length>g[0].length)){if(g=b,E=S,this.options.backtrack_lexer){if(j=this.test_match(b,B[S]),j!==!1)return j;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(j=this.test_match(g,B[E]),j!==!1?j:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var g=this.next();return g||this.lex()},begin:function(g){this.conditionStack.push(g)},popState:function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},pushState:function(g){this.begin(g)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(g,b,E,B){var S=B;switch(E){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return b.yytext=b.yytext.substr(1,b.yyleng-2),32;break;case 11:return b.yytext=b.yytext.substr(1,b.yyleng-2),33;break;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return T}();C.lexer=k;function I(){this.yy={}}return I.prototype=C,C.Parser=I,new I}();typeof SC<"u"&&typeof Ah<"u"&&(Ah.parser=Ag,Ah.Parser=Ag.Parser,Ah.parse=function(){return Ag.parse.apply(Ag,arguments)})});var nF=D(vo=>{"use strict";var Hte=vo&&vo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wte=vo&&vo.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zte=vo&&vo.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hte(e,t,r);return Wte(e,t),e};Object.defineProperty(vo,"__esModule",{value:!0});vo.Parser=void 0;var Jte=zte(rF());function Gte(){var t=new Jte.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t}vo.Parser=Gte});var iF=D(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.assert=void 0;var Xte=function(){function t(){}return t.ok=function(e,r){if(!e)throw new Error(r)},t.equal=function(e,r,n){if(e!==r)throw new Error(n)},t}();xg.assert=Xte});var sF=D(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.JSONPath=void 0;var Yte=eF(),Zte=tF(),Cg=nF(),nn=iF(),Qte=function(){function t(){}return t.parse=function(e){return nn.assert.ok(typeof e=="string","we need a path"),new Cg.Parser().parse(e)},t.parent=function(e,r){nn.assert.ok(e instanceof Object,"obj needs to be an object"),nn.assert.ok(r,"we need a path");var n=this.nodes(e,r)[0],s=n.path.pop();return this.value(e,n.path)},t.apply=function(e,r,n){nn.assert.ok(e instanceof Object,"obj needs to be an object"),nn.assert.ok(r,"we need a path"),nn.assert.equal(typeof n,"function","fn needs to be function");var s=this.nodes(e,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(e,this.stringify(i.path)),u=i.value=n.call(e,a[o]);a[o]=u},this),s},t.value=function(e,r,n){if(nn.assert.ok(e instanceof Object,"obj needs to be an object"),nn.assert.ok(r,"we need a path"),n!==void 0){var s=this.nodes(e,r).shift();if(!s)return this._vivify(e,r,n);var i=s.path.slice(-1).shift(),o=this.parent(e,this.stringify(s.path));o[i]=n}return this.query(e,this.stringify(r),1).shift()},t._vivify=function(e,r,n){var s=this;nn.assert.ok(e instanceof Object,"obj needs to be an object"),nn.assert.ok(r,"we need a path");var i=new Cg.Parser().parse(r).map(function(a){return a.expression.value}),o=function(a,u){var c=a.pop(),l=s.value(e,a);l||(o(a.concat(),typeof c=="string"?{}:[]),l=s.value(e,a)),l[c]=u};return o(i,n),this.query(e,r)[0]},t.query=function(e,r,n){nn.assert.ok(e instanceof Object,"obj needs to be an object"),nn.assert.ok(typeof r=="string","we need a path");var s=this.nodes(e,r,n).map(function(i){return i.value});return s},t.paths=function(e,r,n){nn.assert.ok(e instanceof Object,"obj needs to be an object"),nn.assert.ok(r,"we need a path");var s=this.nodes(e,r,n).map(function(i){return i.path});return s},t.nodes=function(e,r,n){if(nn.assert.ok(e instanceof Object,"obj needs to be an object"),nn.assert.ok(r,"we need a path"),n===0)return[];var s=new Cg.Parser().parse(r),i=new Yte.Handlers,o=[{path:["$"],value:e}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(u,c){if(!(a.length>=n)){var l=i.resolve(u),d=[];o.forEach(function(h){if(!(a.length>=n)){var f=l(u,h,n);c==s.length-1?a=a.concat(f||[]):d=d.concat(f||[])}}),o=d}}),n?a.slice(0,n):a):o},t.stringify=function(e){nn.assert.ok(e,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return e=this._normalize(e),e.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},t._normalize=function(e){if(nn.assert.ok(e,"we need a path"),typeof e=="string")return new Cg.Parser().parse(e);if(Array.isArray(e)&&typeof e[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return e.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+Zte.TOKENS.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(e)&&typeof e[0]=="object")return e;throw new Error("couldn't understand path "+e)},t}();Pg.JSONPath=Qte});var Xi=D(Xc=>{"use strict";var ere=Xc&&Xc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),tre=Xc&&Xc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ere(e,t,r)};Object.defineProperty(Xc,"__esModule",{value:!0});tre(sF(),Xc)});var uF=D((nSe,aF)=>{"use strict";var rre="Function.prototype.bind called on incompatible ",nre=Object.prototype.toString,ire=Math.max,sre="[object Function]",oF=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},ore=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},are=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};aF.exports=function(e){var r=this;if(typeof r!="function"||nre.apply(r)!==sre)throw new TypeError(rre+r);for(var n=ore(arguments,1),s,i=function(){if(this instanceof s){var l=r.apply(this,oF(n,arguments));return Object(l)===l?l:this}return r.apply(e,oF(n,arguments))},o=ire(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(s=Function("binder","return function ("+are(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s}});var Og=D((iSe,cF)=>{"use strict";var ure=uF();cF.exports=Function.prototype.bind||ure});var dF=D((sSe,lF)=>{"use strict";lF.exports=Error});var pF=D((oSe,fF)=>{"use strict";fF.exports=EvalError});var mF=D((aSe,hF)=>{"use strict";hF.exports=RangeError});var gF=D((uSe,yF)=>{"use strict";yF.exports=ReferenceError});var kg=D((cSe,vF)=>{"use strict";vF.exports=SyntaxError});var gt=D((lSe,bF)=>{"use strict";bF.exports=TypeError});var EF=D((dSe,wF)=>{"use strict";wF.exports=URIError});var W2=D((fSe,_F)=>{"use strict";_F.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0}});var Yc=D((pSe,SF)=>{"use strict";var DF=typeof Symbol<"u"&&Symbol,cre=W2();SF.exports=function(){return typeof DF!="function"||typeof Symbol!="function"||typeof DF("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:cre()}});var J2=D((hSe,AF)=>{"use strict";var z2={__proto__:null,foo:{}},lre=Object;AF.exports=function(){return{__proto__:z2}.foo===z2.foo&&!(z2 instanceof lre)}});var Zc=D((mSe,xF)=>{"use strict";var dre=Function.prototype.call,fre=Object.prototype.hasOwnProperty,pre=Og();xF.exports=pre.call(dre,fre)});var pr=D((ySe,IF)=>{"use strict";var vt,hre=dF(),mre=pF(),yre=mF(),gre=gF(),Qd=kg(),Zd=gt(),vre=EF(),kF=Function,G2=function(t){try{return kF('"use strict"; return ('+t+").constructor;")()}catch{}},Qc=Object.getOwnPropertyDescriptor;if(Qc)try{Qc({},"")}catch{Qc=null}var X2=function(){throw new Zd},bre=Qc?function(){try{return arguments.callee,X2}catch{try{return Qc(arguments,"callee").get}catch{return X2}}}():X2,Xd=Yc()(),wre=J2()(),sn=Object.getPrototypeOf||(wre?function(t){return t.__proto__}:null),Yd={},Ere=typeof Uint8Array>"u"||!sn?vt:sn(Uint8Array),el={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?vt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?vt:ArrayBuffer,"%ArrayIteratorPrototype%":Xd&&sn?sn([][Symbol.iterator]()):vt,"%AsyncFromSyncIteratorPrototype%":vt,"%AsyncFunction%":Yd,"%AsyncGenerator%":Yd,"%AsyncGeneratorFunction%":Yd,"%AsyncIteratorPrototype%":Yd,"%Atomics%":typeof Atomics>"u"?vt:Atomics,"%BigInt%":typeof BigInt>"u"?vt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?vt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?vt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?vt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":hre,"%eval%":eval,"%EvalError%":mre,"%Float32Array%":typeof Float32Array>"u"?vt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?vt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?vt:FinalizationRegistry,"%Function%":kF,"%GeneratorFunction%":Yd,"%Int8Array%":typeof Int8Array>"u"?vt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?vt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?vt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xd&&sn?sn(sn([][Symbol.iterator]())):vt,"%JSON%":typeof JSON=="object"?JSON:vt,"%Map%":typeof Map>"u"?vt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Xd||!sn?vt:sn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?vt:Promise,"%Proxy%":typeof Proxy>"u"?vt:Proxy,"%RangeError%":yre,"%ReferenceError%":gre,"%Reflect%":typeof Reflect>"u"?vt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?vt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Xd||!sn?vt:sn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?vt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xd&&sn?sn(""[Symbol.iterator]()):vt,"%Symbol%":Xd?Symbol:vt,"%SyntaxError%":Qd,"%ThrowTypeError%":bre,"%TypedArray%":Ere,"%TypeError%":Zd,"%Uint8Array%":typeof Uint8Array>"u"?vt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?vt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?vt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?vt:Uint32Array,"%URIError%":vre,"%WeakMap%":typeof WeakMap>"u"?vt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?vt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?vt:WeakSet};if(sn)try{null.error}catch(t){CF=sn(sn(t)),el["%Error.prototype%"]=CF}var CF,_re=function t(e){var r;if(e==="%AsyncFunction%")r=G2("async function () {}");else if(e==="%GeneratorFunction%")r=G2("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=G2("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&sn&&(r=sn(s.prototype))}return el[e]=r,r},PF={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},xh=Og(),Ig=Zc(),Dre=xh.call(Function.call,Array.prototype.concat),Sre=xh.call(Function.apply,Array.prototype.splice),OF=xh.call(Function.call,String.prototype.replace),Bg=xh.call(Function.call,String.prototype.slice),Are=xh.call(Function.call,RegExp.prototype.exec),xre=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Cre=/\\(\\)?/g,Pre=function(e){var r=Bg(e,0,1),n=Bg(e,-1);if(r==="%"&&n!=="%")throw new Qd("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Qd("invalid intrinsic syntax, expected opening `%`");var s=[];return OF(e,xre,function(i,o,a,u){s[s.length]=a?OF(u,Cre,"$1"):o||i}),s},Ore=function(e,r){var n=e,s;if(Ig(PF,n)&&(s=PF[n],n="%"+s[0]+"%"),Ig(el,n)){var i=el[n];if(i===Yd&&(i=_re(n)),typeof i>"u"&&!r)throw new Zd("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Qd("intrinsic "+e+" does not exist!")};IF.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Zd("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Zd('"allowMissing" argument must be a boolean');if(Are(/^%?[^%]*%?$/,e)===null)throw new Qd("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Pre(e),s=n.length>0?n[0]:"",i=Ore("%"+s+"%",r),o=i.name,a=i.value,u=!1,c=i.alias;c&&(s=c[0],Sre(n,Dre([0,1],c)));for(var l=1,d=!0;l<n.length;l+=1){var h=n[l],f=Bg(h,0,1),p=Bg(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Qd("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(u=!0),s+="."+h,o="%"+s+"%",Ig(el,o))a=el[o];else if(a!=null){if(!(h in a)){if(!r)throw new Zd("base intrinsic for "+e+" exists, but the property is not available.");return}if(Qc&&l+1>=n.length){var y=Qc(a,h);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[h]}else d=Ig(a,h),a=a[h];d&&!u&&(el[o]=a)}}return a}});var Ch=D((gSe,BF)=>{"use strict";var kre=pr(),Tg=kre("%Object.defineProperty%",!0)||!1;if(Tg)try{Tg({},"a",{value:1})}catch{Tg=!1}BF.exports=Tg});var $g=D((vSe,TF)=>{"use strict";var Ire=pr(),Fg=Ire("%Object.getOwnPropertyDescriptor%",!0);if(Fg)try{Fg([],"length")}catch{Fg=null}TF.exports=Fg});var Rg=D((bSe,RF)=>{"use strict";var FF=Ch(),Bre=kg(),ef=gt(),$F=$g();RF.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new ef("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new ef("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ef("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ef("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ef("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ef("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!$F&&$F(e,r);if(FF)FF(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:s===null&&u?u.enumerable:!s,value:n,writable:i===null&&u?u.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new Bre("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Ph=D((wSe,jF)=>{"use strict";var Y2=Ch(),NF=function(){return!!Y2};NF.hasArrayLengthDefineBug=function(){if(!Y2)return null;try{return Y2([],"length",{value:1}).length!==1}catch{return!0}};jF.exports=NF});var VF=D((ESe,UF)=>{"use strict";var Tre=pr(),qF=Rg(),Fre=Ph()(),MF=$g(),LF=gt(),$re=Tre("%Math.floor%");UF.exports=function(e,r){if(typeof e!="function")throw new LF("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||$re(r)!==r)throw new LF("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&MF){var o=MF(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(Fre?qF(e,"length",r,!0,!0):qF(e,"length",r)),e}});var Oh=D((_Se,Ng)=>{"use strict";var Z2=Og(),jg=pr(),Rre=VF(),Nre=gt(),WF=jg("%Function.prototype.apply%"),zF=jg("%Function.prototype.call%"),JF=jg("%Reflect.apply%",!0)||Z2.call(zF,WF),KF=Ch(),jre=jg("%Math.max%");Ng.exports=function(e){if(typeof e!="function")throw new Nre("a function is required");var r=JF(Z2,zF,arguments);return Rre(r,1+jre(0,e.length-(arguments.length-1)),!0)};var HF=function(){return JF(Z2,WF,arguments)};KF?KF(Ng.exports,"apply",{value:HF}):Ng.exports.apply=HF});var Q2=D((DSe,XF)=>{"use strict";var GF=Object.prototype.toString;XF.exports=function(e){var r=GF.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&GF.call(e.callee)==="[object Function]"),n}});var s6=D((SSe,i6)=>{"use strict";var n6;Object.keys||(kh=Object.prototype.hasOwnProperty,eD=Object.prototype.toString,YF=Q2(),tD=Object.prototype.propertyIsEnumerable,ZF=!tD.call({toString:null},"toString"),QF=tD.call(function(){},"prototype"),Ih=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],qg=function(t){var e=t.constructor;return e&&e.prototype===t},e6={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},t6=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!e6["$"+t]&&kh.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{qg(window[t])}catch{return!0}}catch{return!0}return!1}(),r6=function(t){if(typeof window>"u"||!t6)return qg(t);try{return qg(t)}catch{return!1}},n6=function(e){var r=e!==null&&typeof e=="object",n=eD.call(e)==="[object Function]",s=YF(e),i=r&&eD.call(e)==="[object String]",o=[];if(!r&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var a=QF&&n;if(i&&e.length>0&&!kh.call(e,0))for(var u=0;u<e.length;++u)o.push(String(u));if(s&&e.length>0)for(var c=0;c<e.length;++c)o.push(String(c));else for(var l in e)!(a&&l==="prototype")&&kh.call(e,l)&&o.push(String(l));if(ZF)for(var d=r6(e),h=0;h<Ih.length;++h)!(d&&Ih[h]==="constructor")&&kh.call(e,Ih[h])&&o.push(Ih[h]);return o});var kh,eD,YF,tD,ZF,QF,Ih,qg,e6,t6,r6;i6.exports=n6});var c6=D((ASe,u6)=>{"use strict";var qre=Array.prototype.slice,Mre=Q2(),o6=Object.keys,Mg=o6?function(e){return o6(e)}:s6(),a6=Object.keys;Mg.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return Mre(n)?a6(qre.call(n)):a6(n)})}else Object.keys=Mg;return Object.keys||Mg};u6.exports=Mg});var Du=D((xSe,p6)=>{"use strict";var Lre=c6(),Ure=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Vre=Object.prototype.toString,Kre=Array.prototype.concat,l6=Rg(),Hre=function(t){return typeof t=="function"&&Vre.call(t)==="[object Function]"},d6=Ph()(),Wre=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Hre(n)||!n())return}d6?l6(t,e,r,!0):l6(t,e,r)},f6=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Lre(e);Ure&&(n=Kre.call(n,Object.getOwnPropertySymbols(e)));for(var s=0;s<n.length;s+=1)Wre(t,n[s],e[n[s]],r[n[s]])};f6.supportsDescriptors=!!d6;p6.exports=f6});var Ei=D((CSe,y6)=>{"use strict";var h6=pr(),m6=Oh(),zre=m6(h6("String.prototype.indexOf"));y6.exports=function(e,r){var n=h6(e,!!r);return typeof n=="function"&&zre(e,".prototype.")>-1?m6(n):n}});var rD=D((PSe,v6)=>{"use strict";var Jre=pr(),g6=Jre("%Array%"),Gre=!g6.isArray&&Ei()("Object.prototype.toString");v6.exports=g6.isArray||function(e){return Gre(e)==="[object Array]"}});var nD=D((OSe,b6)=>{"use strict";b6.exports=rD()});var iD=D((kSe,w6)=>{"use strict";var Xre=pr(),Yre=Ei(),Zre=gt(),Qre=nD(),ene=Xre("%Reflect.apply%",!0)||Yre("Function.prototype.apply");w6.exports=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!Qre(n))throw new Zre("Assertion failed: optional `argumentsList`, if provided, must be a List");return ene(e,r,n)}});var E6=D(()=>{});var $h=D((TSe,M6)=>{var hD=typeof Map=="function"&&Map.prototype,sD=Object.getOwnPropertyDescriptor&&hD?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ug=hD&&sD&&typeof sD.get=="function"?sD.get:null,_6=hD&&Map.prototype.forEach,mD=typeof Set=="function"&&Set.prototype,oD=Object.getOwnPropertyDescriptor&&mD?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Vg=mD&&oD&&typeof oD.get=="function"?oD.get:null,D6=mD&&Set.prototype.forEach,tne=typeof WeakMap=="function"&&WeakMap.prototype,Th=tne?WeakMap.prototype.has:null,rne=typeof WeakSet=="function"&&WeakSet.prototype,Fh=rne?WeakSet.prototype.has:null,nne=typeof WeakRef=="function"&&WeakRef.prototype,S6=nne?WeakRef.prototype.deref:null,ine=Boolean.prototype.valueOf,sne=Object.prototype.toString,one=Function.prototype.toString,ane=String.prototype.match,yD=String.prototype.slice,Au=String.prototype.replace,une=String.prototype.toUpperCase,A6=String.prototype.toLowerCase,F6=RegExp.prototype.test,x6=Array.prototype.concat,bo=Array.prototype.join,cne=Array.prototype.slice,C6=Math.floor,cD=typeof BigInt=="function"?BigInt.prototype.valueOf:null,aD=Object.getOwnPropertySymbols,lD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,tf=typeof Symbol=="function"&&typeof Symbol.iterator=="object",An=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===tf||"symbol")?Symbol.toStringTag:null,$6=Object.prototype.propertyIsEnumerable,P6=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function O6(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||F6.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-C6(-t):C6(t);if(n!==t){var s=String(n),i=yD.call(e,s.length+1);return Au.call(s,r,"$&_")+"."+Au.call(Au.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Au.call(e,r,"$&_")}var dD=E6(),k6=dD.custom,I6=N6(k6)?k6:null;M6.exports=function t(e,r,n,s){var i=r||{};if(Su(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Su(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Su(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Su(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Su(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return q6(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?O6(e,u):u}if(typeof e=="bigint"){var c=String(e)+"n";return a?O6(e,c):c}var l=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return fD(e)?"[Array]":"[Object]";var d=Cne(i,n);if(typeof s>"u")s=[];else if(j6(s,e)>=0)return"[Circular]";function h(N,$,O){if($&&(s=cne.call(s),s.push($)),O){var F={depth:i.depth};return Su(i,"quoteStyle")&&(F.quoteStyle=i.quoteStyle),t(N,F,n+1,s)}return t(N,i,n+1,s)}if(typeof e=="function"&&!B6(e)){var f=vne(e),p=Lg(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+bo.call(p,", ")+" }":"")}if(N6(e)){var y=tf?Au.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):lD.call(e);return typeof e=="object"&&!tf?Bh(y):y}if(Sne(e)){for(var w="<"+A6.call(String(e.nodeName)),P=e.attributes||[],C=0;C<P.length;C++)w+=" "+P[C].name+"="+R6(lne(P[C].value),"double",i);return w+=">",e.childNodes&&e.childNodes.length&&(w+="..."),w+="</"+A6.call(String(e.nodeName))+">",w}if(fD(e)){if(e.length===0)return"[]";var v=Lg(e,h);return d&&!xne(v)?"["+pD(v,d)+"]":"[ "+bo.call(v,", ")+" ]"}if(fne(e)){var k=Lg(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!$6.call(e,"cause")?"{ ["+String(e)+"] "+bo.call(x6.call("[cause]: "+h(e.cause),k),", ")+" }":k.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+bo.call(k,", ")+" }"}if(typeof e=="object"&&o){if(I6&&typeof e[I6]=="function"&&dD)return dD(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(bne(e)){var I=[];return _6&&_6.call(e,function(N,$){I.push(h($,e,!0)+" => "+h(N,e))}),T6("Map",Ug.call(e),I,d)}if(_ne(e)){var T=[];return D6&&D6.call(e,function(N){T.push(h(N,e))}),T6("Set",Vg.call(e),T,d)}if(wne(e))return uD("WeakMap");if(Dne(e))return uD("WeakSet");if(Ene(e))return uD("WeakRef");if(hne(e))return Bh(h(Number(e)));if(yne(e))return Bh(h(cD.call(e)));if(mne(e))return Bh(ine.call(e));if(pne(e))return Bh(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===globalThis)return"{ [object globalThis] }";if(!dne(e)&&!B6(e)){var j=Lg(e,h),g=P6?P6(e)===Object.prototype:e instanceof Object||e.constructor===Object,b=e instanceof Object?"":"null prototype",E=!g&&An&&Object(e)===e&&An in e?yD.call(xu(e),8,-1):b?"Object":"",B=g||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",S=B+(E||b?"["+bo.call(x6.call([],E||[],b||[]),": ")+"] ":"");return j.length===0?S+"{}":d?S+"{"+pD(j,d)+"}":S+"{ "+bo.call(j,", ")+" }"}return String(e)};function R6(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function lne(t){return Au.call(String(t),/"/g,"&quot;")}function fD(t){return xu(t)==="[object Array]"&&(!An||!(typeof t=="object"&&An in t))}function dne(t){return xu(t)==="[object Date]"&&(!An||!(typeof t=="object"&&An in t))}function B6(t){return xu(t)==="[object RegExp]"&&(!An||!(typeof t=="object"&&An in t))}function fne(t){return xu(t)==="[object Error]"&&(!An||!(typeof t=="object"&&An in t))}function pne(t){return xu(t)==="[object String]"&&(!An||!(typeof t=="object"&&An in t))}function hne(t){return xu(t)==="[object Number]"&&(!An||!(typeof t=="object"&&An in t))}function mne(t){return xu(t)==="[object Boolean]"&&(!An||!(typeof t=="object"&&An in t))}function N6(t){if(tf)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!lD)return!1;try{return lD.call(t),!0}catch{}return!1}function yne(t){if(!t||typeof t!="object"||!cD)return!1;try{return cD.call(t),!0}catch{}return!1}var gne=Object.prototype.hasOwnProperty||function(t){return t in this};function Su(t,e){return gne.call(t,e)}function xu(t){return sne.call(t)}function vne(t){if(t.name)return t.name;var e=ane.call(one.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function j6(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function bne(t){if(!Ug||!t||typeof t!="object")return!1;try{Ug.call(t);try{Vg.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function wne(t){if(!Th||!t||typeof t!="object")return!1;try{Th.call(t,Th);try{Fh.call(t,Fh)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Ene(t){if(!S6||!t||typeof t!="object")return!1;try{return S6.call(t),!0}catch{}return!1}function _ne(t){if(!Vg||!t||typeof t!="object")return!1;try{Vg.call(t);try{Ug.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function Dne(t){if(!Fh||!t||typeof t!="object")return!1;try{Fh.call(t,Fh);try{Th.call(t,Th)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Sne(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function q6(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return q6(yD.call(t,0,e.maxStringLength),e)+n}var s=Au.call(Au.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ane);return R6(s,"single",e)}function Ane(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+une.call(e.toString(16))}function Bh(t){return"Object("+t+")"}function uD(t){return t+" { ? }"}function T6(t,e,r,n){var s=n?pD(r,n):bo.call(r,", ");return t+" ("+e+") {"+s+"}"}function xne(t){for(var e=0;e<t.length;e++)if(j6(t[e],`
`)>=0)return!1;return!0}function Cne(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=bo.call(Array(t.indent+1)," ");else return null;return{base:r,prev:bo.call(Array(e+1),r)}}function pD(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+bo.call(t,","+r)+`
`+e.prev}function Lg(t,e){var r=fD(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=Su(t,s)?e(t[s],t):""}var i=typeof aD=="function"?aD(t):[],o;if(tf){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var u in t)Su(t,u)&&(r&&String(Number(u))===u&&u<t.length||tf&&o["$"+u]instanceof Symbol||(F6.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof aD=="function")for(var c=0;c<i.length;c++)$6.call(t,i[c])&&n.push("["+e(i[c])+"]: "+e(t[i[c]],t));return n}});var tl=D((FSe,L6)=>{"use strict";L6.exports=function(e){return typeof e=="string"||typeof e=="symbol"}});var V6=D(($Se,U6)=>{"use strict";U6.exports=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}});var Ss=D((RSe,K6)=>{"use strict";var Pne=V6();K6.exports=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":Pne(e)}});var Rh=D((NSe,W6)=>{"use strict";var H6=gt(),One=$h(),kne=tl(),Ine=Ss();W6.exports=function(e,r){if(Ine(e)!=="Object")throw new H6("Assertion failed: Type(O) is not Object");if(!kne(r))throw new H6("Assertion failed: IsPropertyKey(P) is not true, got "+One(r));return e[r]}});var J6=D((jSe,z6)=>{"use strict";var Bne=gt(),Tne=$h(),Fne=tl();z6.exports=function(e,r){if(!Fne(r))throw new Bne("Assertion failed: IsPropertyKey(P) is not true, got "+Tne(r));return e[r]}});var ED=D((qSe,Y6)=>{"use strict";var X6=Function.prototype.toString,rf=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,vD,Kg;if(typeof rf=="function"&&typeof Object.defineProperty=="function")try{vD=Object.defineProperty({},"length",{get:function(){throw Kg}}),Kg={},rf(function(){throw 42},null,vD)}catch(t){t!==Kg&&(rf=null)}else rf=null;var $ne=/^\s*class\b/,bD=function(e){try{var r=X6.call(e);return $ne.test(r)}catch{return!1}},gD=function(e){try{return bD(e)?!1:(X6.call(e),!0)}catch{return!1}},Hg=Object.prototype.toString,Rne="[object Object]",Nne="[object Function]",jne="[object GeneratorFunction]",qne="[object HTMLAllCollection]",Mne="[object HTML document.all class]",Lne="[object HTMLCollection]",Une=typeof Symbol=="function"&&!!Symbol.toStringTag,Vne=!(0 in[,]),wD=function(){return!1};typeof document=="object"&&(G6=document.all,Hg.call(G6)===Hg.call(document.all)&&(wD=function(e){if((Vne||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=Hg.call(e);return(r===qne||r===Mne||r===Lne||r===Rne)&&e("")==null}catch{}return!1}));var G6;Y6.exports=rf?function(e){if(wD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{rf(e,null,vD)}catch(r){if(r!==Kg)return!1}return!bD(e)&&gD(e)}:function(e){if(wD(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Une)return gD(e);if(bD(e))return!1;var r=Hg.call(e);return r!==Nne&&r!==jne&&!/^\[object HTML/.test(r)?!1:gD(e)}});var Wg=D((MSe,Z6)=>{"use strict";Z6.exports=ED()});var r4=D((LSe,t4)=>{"use strict";var Q6=gt(),Kne=J6(),Hne=Wg(),Wne=tl(),e4=$h();t4.exports=function(e,r){if(!Wne(r))throw new Q6("Assertion failed: IsPropertyKey(P) is not true");var n=Kne(e,r);if(n!=null){if(!Hne(n))throw new Q6(e4(r)+" is not a function: "+e4(n));return n}}});var zg=D((USe,n4)=>{"use strict";var zne=W2();n4.exports=function(){return zne()&&!!Symbol.toStringTag}});var AD=D((VSe,a4)=>{"use strict";var _D=Ei(),i4=zg()(),s4,o4,DD,SD;i4&&(s4=_D("Object.prototype.hasOwnProperty"),o4=_D("RegExp.prototype.exec"),DD={},Jg=function(){throw DD},SD={toString:Jg,valueOf:Jg},typeof Symbol.toPrimitive=="symbol"&&(SD[Symbol.toPrimitive]=Jg));var Jg,Jne=_D("Object.prototype.toString"),Gne=Object.getOwnPropertyDescriptor,Xne="[object RegExp]";a4.exports=i4?function(e){if(!e||typeof e!="object")return!1;var r=Gne(e,"lastIndex"),n=r&&s4(r,"value");if(!n)return!1;try{o4(e,SD)}catch(s){return s===DD}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:Jne(e)===Xne}});var xD=D((KSe,u4)=>{"use strict";u4.exports=function(e){return!!e}});var d4=D((HSe,l4)=>{"use strict";var Yne=pr(),c4=Yne("%Symbol.match%",!0),Zne=AD(),Qne=xD();l4.exports=function(e){if(!e||typeof e!="object")return!1;if(c4){var r=e[c4];if(typeof r<"u")return Qne(r)}return Zne(e)}});var Nh=D((WSe,f4)=>{"use strict";var eie=pr(),tie=eie("%String%"),rie=gt();f4.exports=function(e){if(typeof e=="symbol")throw new rie("Cannot convert a Symbol value to a string");return tie(e)}});var Gg=D((zSe,p4)=>{"use strict";var nie=gt();p4.exports=function(e){if(e==null)throw new nie(arguments.length>0&&arguments[1]||"Cannot call method on "+e);return e}});var m4=D((JSe,h4)=>{"use strict";var qh=function(){return typeof function(){}.name=="string"},jh=Object.getOwnPropertyDescriptor;if(jh)try{jh([],"length")}catch{jh=null}qh.functionsHaveConfigurableNames=function(){if(!qh()||!jh)return!1;var e=jh(function(){},"name");return!!e&&!!e.configurable};var iie=Function.prototype.bind;qh.boundFunctionsHaveNames=function(){return qh()&&typeof iie=="function"&&function(){}.bind().name!==""};h4.exports=qh});var CD=D((GSe,g4)=>{"use strict";var y4=Rg(),sie=Ph()(),oie=m4().functionsHaveConfigurableNames(),aie=gt();g4.exports=function(e,r){if(typeof e!="function")throw new aie("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||oie)&&(sie?y4(e,"name",r,!0,!0):y4(e,"name",r)),e}});var PD=D((XSe,v4)=>{"use strict";var uie=CD(),cie=gt(),lie=Object;v4.exports=uie(function(){if(this==null||this!==lie(this))throw new cie("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var OD=D((YSe,b4)=>{"use strict";var die=PD(),fie=Du().supportsDescriptors,pie=Object.getOwnPropertyDescriptor;b4.exports=function(){if(fie&&/a/mig.flags==="gim"){var e=pie(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return die}});var _4=D((ZSe,E4)=>{"use strict";var hie=Du().supportsDescriptors,mie=OD(),yie=Object.getOwnPropertyDescriptor,gie=Object.defineProperty,vie=TypeError,w4=Object.getPrototypeOf,bie=/a/;E4.exports=function(){if(!hie||!w4)throw new vie("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=mie(),r=w4(bie),n=yie(r,"flags");return(!n||n.get!==e)&&gie(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var kD=D((QSe,A4)=>{"use strict";var wie=Du(),Eie=Oh(),_ie=PD(),D4=OD(),Die=_4(),S4=Eie(D4());wie(S4,{getPolyfill:D4,implementation:_ie,shim:Die});A4.exports=S4});var ID=D((eAe,x4)=>{"use strict";x4.exports=function(e){return typeof e=="number"&&e>=55296&&e<=56319}});var BD=D((tAe,C4)=>{"use strict";C4.exports=function(e){return typeof e=="number"&&e>=56320&&e<=57343}});var k4=D((rAe,O4)=>{"use strict";var Sie=pr(),Aie=gt(),P4=Sie("%String.fromCharCode%"),xie=ID(),Cie=BD();O4.exports=function(e,r){if(!xie(e)||!Cie(r))throw new Aie("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return P4(e)+P4(r)}});var R4=D((nAe,$4)=>{"use strict";var I4=gt(),F4=Ei(),Pie=ID(),B4=BD(),Oie=k4(),kie=F4("String.prototype.charAt"),T4=F4("String.prototype.charCodeAt");$4.exports=function(e,r){if(typeof e!="string")throw new I4("Assertion failed: `string` must be a String");var n=e.length;if(r<0||r>=n)throw new I4("Assertion failed: `position` must be >= 0, and < the length of `string`");var s=T4(e,r),i=kie(e,r),o=Pie(s),a=B4(s);if(!o&&!a)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(a||r+1===n)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var u=T4(e,r+1);return B4(u)?{"[[CodePoint]]":Oie(s,u),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}});var Mh=D((iAe,N4)=>{"use strict";N4.exports=Number.isNaN||function(e){return e!==e}});var TD=D((sAe,j4)=>{"use strict";var Iie=Mh();j4.exports=function(t){return(typeof t=="number"||typeof t=="bigint")&&!Iie(t)&&t!==1/0&&t!==-1/0}});var L4=D((oAe,M4)=>{"use strict";var q4=pr(),Bie=q4("%Math.abs%"),Tie=q4("%Math.floor%"),Fie=Mh(),$ie=TD();M4.exports=function(e){if(typeof e!="number"||Fie(e)||!$ie(e))return!1;var r=Bie(e);return Tie(r)===r}});var FD=D((aAe,U4)=>{"use strict";U4.exports=Number.MAX_SAFE_INTEGER||9007199254740991});var K4=D((uAe,V4)=>{"use strict";var Rie=R4(),Nie=L4(),jie=FD(),$D=gt();V4.exports=function(e,r,n){if(typeof e!="string")throw new $D("Assertion failed: `S` must be a String");if(!Nie(r)||r<0||r>jie)throw new $D("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof n!="boolean")throw new $D("Assertion failed: `unicode` must be a Boolean");if(!n)return r+1;var s=e.length;if(r+1>=s)return r+1;var i=Rie(e,r);return r+i["[[CodeUnitCount]]"]}});var W4=D((cAe,H4)=>{"use strict";var qie=gt();H4.exports=function(e,r){if(typeof r!="boolean")throw new qie("Assertion failed: Type(done) is not Boolean");return{value:e,done:r}}});var Xg=D((lAe,z4)=>{"use strict";var Mie=gt(),Lh=Zc(),Lie={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};z4.exports=function(e){if(!e||typeof e!="object")return!1;for(var r in e)if(Lh(e,r)&&!Lie[r])return!1;var n=Lh(e,"[[Value]]")||Lh(e,"[[Writable]]"),s=Lh(e,"[[Get]]")||Lh(e,"[[Set]]");if(n&&s)throw new Mie("Property Descriptors may not be both accessor and data descriptors");return!0}});var Y4=D((dAe,X4)=>{"use strict";var Uie=Ph(),J4=Ch(),G4=Uie.hasArrayLengthDefineBug(),Vie=G4&&rD(),Kie=Ei(),Hie=Kie("Object.prototype.propertyIsEnumerable");X4.exports=function(e,r,n,s,i,o){if(!J4){if(!e(o)||!o["[[Configurable]]"]||!o["[[Writable]]"]||i in s&&Hie(s,i)!==!!o["[[Enumerable]]"])return!1;var a=o["[[Value]]"];return s[i]=a,r(s[i],a)}return G4&&i==="length"&&"[[Value]]"in o&&Vie(s)&&s.length!==o["[[Value]]"]?(s.length=o["[[Value]]"],s.length===o["[[Value]]"]):(J4(s,i,n(o)),!0)}});var Q4=D((fAe,Z4)=>{"use strict";Z4.exports=function(e){if(typeof e>"u")return e;var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=!!e["[[Configurable]]"]),r}});var t$=D((pAe,e$)=>{"use strict";var Wie=gt(),zie=Xg(),Jie=Q4();e$.exports=function(e){if(typeof e<"u"&&!zie(e))throw new Wie("Assertion failed: `Desc` must be a Property Descriptor");return Jie(e)}});var i$=D((hAe,n$)=>{"use strict";var Gie=gt(),r$=Zc(),Xie=Xg();n$.exports=function(e){if(typeof e>"u")return!1;if(!Xie(e))throw new Gie("Assertion failed: `Desc` must be a Property Descriptor");return!(!r$(e,"[[Value]]")&&!r$(e,"[[Writable]]"))}});var RD=D((mAe,o$)=>{"use strict";var s$=Mh();o$.exports=function(e,r){return e===r?e===0?1/e===1/r:!0:s$(e)&&s$(r)}});var c$=D((yAe,u$)=>{"use strict";var wo=Zc(),Yg=gt(),Yie=Ss(),ND=xD(),a$=Wg();u$.exports=function(e){if(Yie(e)!=="Object")throw new Yg("ToPropertyDescriptor requires an object");var r={};if(wo(e,"enumerable")&&(r["[[Enumerable]]"]=ND(e.enumerable)),wo(e,"configurable")&&(r["[[Configurable]]"]=ND(e.configurable)),wo(e,"value")&&(r["[[Value]]"]=e.value),wo(e,"writable")&&(r["[[Writable]]"]=ND(e.writable)),wo(e,"get")){var n=e.get;if(typeof n<"u"&&!a$(n))throw new Yg("getter must be a function");r["[[Get]]"]=n}if(wo(e,"set")){var s=e.set;if(typeof s<"u"&&!a$(s))throw new Yg("setter must be a function");r["[[Set]]"]=s}if((wo(r,"[[Get]]")||wo(r,"[[Set]]"))&&(wo(r,"[[Value]]")||wo(r,"[[Writable]]")))throw new Yg("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var qD=D((gAe,d$)=>{"use strict";var jD=gt(),l$=Xg(),Zie=Y4(),Qie=t$(),ese=i$(),tse=tl(),rse=RD(),nse=c$(),ise=Ss();d$.exports=function(e,r,n){if(ise(e)!=="Object")throw new jD("Assertion failed: Type(O) is not Object");if(!tse(r))throw new jD("Assertion failed: IsPropertyKey(P) is not true");var s=l$(n)?n:nse(n);if(!l$(s))throw new jD("Assertion failed: Desc is not a valid Property Descriptor");return Zie(ese,rse,Qie,e,r,s)}});var MD=D((vAe,f$)=>{"use strict";f$.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var y$=D((bAe,m$)=>{"use strict";var h$=pr(),sse=h$("%Object.preventExtensions%",!0),ose=h$("%Object.isExtensible%",!0),p$=MD();m$.exports=sse?function(e){return!p$(e)&&ose(e)}:function(e){return!p$(e)}});var v$=D((wAe,g$)=>{"use strict";var Uh=gt(),ase=qD(),use=y$(),cse=tl(),lse=Ss();g$.exports=function(e,r,n,s){if(lse(e)!=="Object")throw new Uh("Assertion failed: `homeObject` is not an Object");if(!cse(r))throw new Uh("Assertion failed: `key` is not a Property Key or a Private Name");if(typeof n!="function")throw new Uh("Assertion failed: `closure` is not a function");if(typeof s!="boolean")throw new Uh("Assertion failed: `enumerable` is not a Boolean");if(!use(e))throw new Uh("Assertion failed: `homeObject` is not an ordinary, extensible object, with no non-configurable properties");var i={"[[Value]]":n,"[[Writable]]":!0,"[[Enumerable]]":s,"[[Configurable]]":!0};ase(e,r,i)}});var w$=D((EAe,b$)=>{"use strict";b$.exports=function(e,r){for(var n=0;n<e.length;n+=1)r(e[n],n,e)}});var D$=D((_Ae,_$)=>{"use strict";var E$=pr(),nf=Ei(),dse=$h(),fse=gt(),Zg=E$("%WeakMap%",!0),Qg=E$("%Map%",!0),pse=nf("WeakMap.prototype.get",!0),hse=nf("WeakMap.prototype.set",!0),mse=nf("WeakMap.prototype.has",!0),yse=nf("Map.prototype.get",!0),gse=nf("Map.prototype.set",!0),vse=nf("Map.prototype.has",!0),LD=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},bse=function(t,e){var r=LD(t,e);return r&&r.value},wse=function(t,e,r){var n=LD(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},Ese=function(t,e){return!!LD(t,e)};_$.exports=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new fse("Side channel does not contain "+dse(i))},get:function(i){if(Zg&&i&&(typeof i=="object"||typeof i=="function")){if(e)return pse(e,i)}else if(Qg){if(r)return yse(r,i)}else if(n)return bse(n,i)},has:function(i){if(Zg&&i&&(typeof i=="object"||typeof i=="function")){if(e)return mse(e,i)}else if(Qg){if(r)return vse(r,i)}else if(n)return Ese(n,i);return!1},set:function(i,o){Zg&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Zg),hse(e,i,o)):Qg?(r||(r=new Qg),gse(r,i,o)):(n||(n={key:{},next:null}),wse(n,i,o))}};return s}});var VD=D((DAe,S$)=>{"use strict";var _se=Zc(),Vh=D$()(),_a=gt(),UD={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new _a("`O` is not an object");if(typeof e!="string")throw new _a("`slot` must be a string");if(Vh.assert(t),!UD.has(t,e))throw new _a("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new _a("`O` is not an object");if(typeof e!="string")throw new _a("`slot` must be a string");var r=Vh.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new _a("`O` is not an object");if(typeof e!="string")throw new _a("`slot` must be a string");var r=Vh.get(t);return!!r&&_se(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new _a("`O` is not an object");if(typeof e!="string")throw new _a("`slot` must be a string");var n=Vh.get(t);n||(n={},Vh.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(UD);S$.exports=UD});var P$=D((SAe,C$)=>{"use strict";var Dse=pr(),A$=Dse("%Object.create%",!0),x$=gt(),Sse=kg(),Ase=nD(),xse=Ss(),Cse=w$(),Pse=VD(),Ose=J2()();C$.exports=function(e){if(e!==null&&xse(e)!=="Object")throw new x$("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!Ase(r))throw new x$("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(A$)n=A$(e);else if(Ose)n={__proto__:e};else{if(e===null)throw new Sse("native Object.create support is required to create null objects");var s=function(){};s.prototype=e,n=new s}return r.length>0&&Cse(r,function(i){Pse.set(n,i,void 0)}),n}});var k$=D((AAe,O$)=>{"use strict";var KD=gt(),kse=Ei()("RegExp.prototype.exec"),Ise=iD(),Bse=Rh(),Tse=Wg(),Fse=Ss();O$.exports=function(e,r){if(Fse(e)!=="Object")throw new KD("Assertion failed: `R` must be an Object");if(typeof r!="string")throw new KD("Assertion failed: `S` must be a String");var n=Bse(e,"exec");if(Tse(n)){var s=Ise(n,e,[r]);if(typeof s=="object")return s;throw new KD('"exec" method must return `null` or an Object')}return kse(e,r)}});var HD=D((xAe,T$)=>{"use strict";var ev=gt(),$se=tl(),I$=RD(),Rse=Ss(),B$=function(){try{return delete[].length,!0}catch{return!1}}();T$.exports=function(e,r,n,s){if(Rse(e)!=="Object")throw new ev("Assertion failed: `O` must be an Object");if(!$se(r))throw new ev("Assertion failed: `P` must be a Property Key");if(typeof s!="boolean")throw new ev("Assertion failed: `Throw` must be a Boolean");if(s){if(e[r]=n,B$&&!I$(e[r],n))throw new ev("Attempted to assign to readonly property.");return!0}try{return e[r]=n,B$?I$(e[r],n):!0}catch{return!1}}});var $$=D((CAe,F$)=>{"use strict";F$.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var N$=D((PAe,R$)=>{"use strict";var Nse=Date.prototype.getDay,jse=function(e){try{return Nse.call(e),!0}catch{return!1}},qse=Object.prototype.toString,Mse="[object Date]",Lse=zg()();R$.exports=function(e){return typeof e!="object"||e===null?!1:Lse?jse(e):qse.call(e)===Mse}});var L$=D((OAe,WD)=>{"use strict";var Use=Object.prototype.toString,Vse=Yc()();Vse?(j$=Symbol.prototype.toString,q$=/^Symbol\(.*\)$/,M$=function(e){return typeof e.valueOf()!="symbol"?!1:q$.test(j$.call(e))},WD.exports=function(e){if(typeof e=="symbol")return!0;if(Use.call(e)!=="[object Symbol]")return!1;try{return M$(e)}catch{return!1}}):WD.exports=function(e){return!1};var j$,q$,M$});var H$=D((kAe,K$)=>{"use strict";var Kse=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",zD=$$(),V$=ED(),Hse=N$(),U$=L$(),Wse=function(e,r){if(typeof e>"u"||e===null)throw new TypeError("Cannot call method on "+e);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],s,i,o;for(o=0;o<n.length;++o)if(s=e[n[o]],V$(s)&&(i=s.call(e),zD(i)))return i;throw new TypeError("No default value")},zse=function(e,r){var n=e[r];if(n!==null&&typeof n<"u"){if(!V$(n))throw new TypeError(n+" returned for property "+r+" of object "+e+" is not a function");return n}};K$.exports=function(e){if(zD(e))return e;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(Kse&&(Symbol.toPrimitive?n=zse(e,Symbol.toPrimitive):U$(e)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var s=n.call(e,r);if(zD(s))return s;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(Hse(e)||U$(e))&&(r="string"),Wse(e,r==="default"?"number":r)}});var J$=D((IAe,z$)=>{"use strict";var W$=H$();z$.exports=function(e){return arguments.length>1?W$(e,arguments[1]):W$(e)}});var X$=D((BAe,G$)=>{"use strict";var Jse=Ei(),Gse=AD(),Xse=Jse("RegExp.prototype.exec"),Yse=gt();G$.exports=function(e){if(!Gse(e))throw new Yse("`regex` must be a RegExp");return function(n){return Xse(e,n)!==null}}});var JD=D((TAe,Q$)=>{"use strict";var Zse=Gg(),Qse=Nh(),eoe=Ei(),Y$=eoe("String.prototype.replace"),Z$=/^\s$/.test("\u180E"),toe=Z$?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,roe=Z$?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;Q$.exports=function(){var e=Qse(Zse(this));return Y$(Y$(e,toe,""),roe,"")}});var GD=D((FAe,tR)=>{"use strict";var noe=JD(),eR="\u200B",sf="\u180E";tR.exports=function(){return String.prototype.trim&&eR.trim()===eR&&sf.trim()===sf&&("_"+sf).trim()==="_"+sf&&(sf+"_").trim()===sf+"_"?String.prototype.trim:noe}});var nR=D(($Ae,rR)=>{"use strict";var ioe=Du(),soe=GD();rR.exports=function(){var e=soe();return ioe(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var aR=D((RAe,oR)=>{"use strict";var ooe=Oh(),aoe=Du(),uoe=Gg(),coe=JD(),iR=GD(),loe=nR(),doe=ooe(iR()),sR=function(e){return uoe(e),doe(e)};aoe(sR,{getPolyfill:iR,implementation:coe,shim:loe});oR.exports=sR});var dR=D((NAe,lR)=>{"use strict";var YD=pr(),XD=YD("%Number%"),foe=YD("%RegExp%"),poe=gt(),uR=YD("%parseInt%"),hoe=Ei(),tv=X$(),cR=hoe("String.prototype.slice"),moe=tv(/^0b[01]+$/i),yoe=tv(/^0o[0-7]+$/i),goe=tv(/^[-+]0x[0-9a-f]+$/i),voe=["\x85","\u200B","\uFFFE"].join(""),boe=new foe("["+voe+"]","g"),woe=tv(boe),Eoe=aR();lR.exports=function t(e){if(typeof e!="string")throw new poe("Assertion failed: `argument` is not a String");if(moe(e))return XD(uR(cR(e,2),2));if(yoe(e))return XD(uR(cR(e,2),8));if(woe(e)||goe(e))return NaN;var r=Eoe(e);return r!==e?t(r):XD(e)}});var mR=D((jAe,hR)=>{"use strict";var _oe=pr(),fR=gt(),pR=_oe("%Number%"),Doe=MD(),Soe=J$(),Aoe=dR();hR.exports=function(e){var r=Doe(e)?e:Soe(e,pR);if(typeof r=="symbol")throw new fR("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new fR("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?Aoe(r):pR(r)}});var gR=D((qAe,yR)=>{"use strict";var xoe=Math.floor;yR.exports=function(e){return typeof e=="bigint"?e:xoe(e)}});var wR=D((MAe,bR)=>{"use strict";var vR=gR(),Coe=gt();bR.exports=function(e){if(typeof e!="number"&&typeof e!="bigint")throw new Coe("argument must be a Number or a BigInt");var r=e<0?-vR(-e):vR(e);return r===0?0:r}});var _R=D((LAe,ER)=>{"use strict";var Poe=mR(),Ooe=wR(),koe=Mh(),Ioe=TD();ER.exports=function(e){var r=Poe(e);return koe(r)||r===0?0:Ioe(r)?Ooe(r):r}});var ZD=D((UAe,SR)=>{"use strict";var DR=FD(),Boe=_R();SR.exports=function(e){var r=Boe(e);return r<=0?0:r>DR?DR:r}});var CR=D((VAe,xR)=>{"use strict";var Toe=pr(),AR=Toe("%Object.defineProperty%",!0),Foe=zg()(),$oe=Zc(),rv=Foe?Symbol.toStringTag:null;xR.exports=function(e,r){var n=arguments.length>2&&arguments[2]&&arguments[2].force;rv&&(n||!$oe(e,rv))&&(AR?AR(e,rv,{configurable:!0,enumerable:!1,value:r,writable:!1}):e[rv]=r)}});var TR=D((KAe,BR)=>{"use strict";var Roe=pr(),Noe=Yc()(),Kh=gt(),PR=Roe("%IteratorPrototype%",!0),joe=K4(),nv=W4(),IR=v$(),OR=Rh(),qoe=P$(),Moe=k$(),Loe=HD(),Uoe=ZD(),Voe=Nh(),Koe=Ss(),gn=VD(),Hoe=CR(),rl=function(e,r,n,s){if(typeof r!="string")throw new Kh("`S` must be a string");if(typeof n!="boolean")throw new Kh("`global` must be a boolean");if(typeof s!="boolean")throw new Kh("`fullUnicode` must be a boolean");gn.set(this,"[[IteratingRegExp]]",e),gn.set(this,"[[IteratedString]]",r),gn.set(this,"[[Global]]",n),gn.set(this,"[[Unicode]]",s),gn.set(this,"[[Done]]",!1)};PR&&(rl.prototype=qoe(PR));var Woe=function(){var e=this;if(Koe(e)!=="Object")throw new Kh("receiver must be an object");if(!(e instanceof rl)||!gn.has(e,"[[IteratingRegExp]]")||!gn.has(e,"[[IteratedString]]")||!gn.has(e,"[[Global]]")||!gn.has(e,"[[Unicode]]")||!gn.has(e,"[[Done]]"))throw new Kh('"this" value must be a RegExpStringIterator instance');if(gn.get(e,"[[Done]]"))return nv(void 0,!0);var r=gn.get(e,"[[IteratingRegExp]]"),n=gn.get(e,"[[IteratedString]]"),s=gn.get(e,"[[Global]]"),i=gn.get(e,"[[Unicode]]"),o=Moe(r,n);if(o===null)return gn.set(e,"[[Done]]",!0),nv(void 0,!0);if(s){var a=Voe(OR(o,"0"));if(a===""){var u=Uoe(OR(r,"lastIndex")),c=joe(n,u,i);Loe(r,"lastIndex",c,!0)}return nv(o,!1)}return gn.set(e,"[[Done]]",!0),nv(o,!1)};IR(rl.prototype,"next",Woe,!1);Noe&&(Hoe(rl.prototype,"RegExp String Iterator"),Symbol.iterator&&typeof rl.prototype[Symbol.iterator]!="function"&&(kR=function(){return this},IR(rl.prototype,Symbol.iterator,kR,!1)));var kR;BR.exports=function(e,r,n,s){return new rl(e,r,n,s)}});var $R=D((HAe,FR)=>{"use strict";FR.exports=pr()});var NR=D((WAe,tS)=>{"use strict";var zoe=$R(),RR=zoe("%Reflect.construct%",!0),iv=qD();try{iv({},"",{"[[Get]]":function(){}})}catch{iv=null}iv&&RR?(QD={},eS={},iv(eS,"length",{"[[Get]]":function(){throw QD},"[[Enumerable]]":!0}),tS.exports=function(e){try{RR(e,eS)}catch(r){return r===QD}}):tS.exports=function(e){return typeof e=="function"&&!!e.prototype};var QD,eS});var LR=D((zAe,MR)=>{"use strict";var Joe=pr(),jR=Joe("%Symbol.species%",!0),rS=gt(),Goe=NR(),qR=Ss();MR.exports=function(e,r){if(qR(e)!=="Object")throw new rS("Assertion failed: Type(O) is not Object");var n=e.constructor;if(typeof n>"u")return r;if(qR(n)!=="Object")throw new rS("O.constructor is not an Object");var s=jR?n[jR]:void 0;if(s==null)return r;if(Goe(s))return s;throw new rS("no constructor found")}});var WR=D((JAe,HR)=>{"use strict";var Xoe=TR(),VR=Rh(),Yoe=HD(),Zoe=LR(),Qoe=ZD(),KR=Nh(),eae=Ss(),tae=kD(),rae=CD(),nae=Ei(),iae=pr(),sae=gt(),UR=nae("String.prototype.indexOf"),nS=iae("%RegExp%"),oae="flags"in nS.prototype,aae=function(e,r){var n,s="flags"in r?VR(r,"flags"):KR(tae(r));return oae&&typeof s=="string"?n=new e(r,s):e===nS?n=new e(r.source,s):n=new e(r,s),{flags:s,matcher:n}},uae=rae(function(e){var r=this;if(eae(r)!=="Object")throw new sae('"this" value must be an Object');var n=KR(e),s=Zoe(r,nS),i=aae(s,r),o=i.flags,a=i.matcher,u=Qoe(VR(r,"lastIndex"));Yoe(a,"lastIndex",u,!0);var c=UR(o,"g")>-1,l=UR(o,"u")>-1;return Xoe(a,n,c,l)},"[Symbol.matchAll]",!0);HR.exports=uae});var iS=D((GAe,zR)=>{"use strict";var cae=Yc()(),lae=WR();zR.exports=function(){return!cae||typeof Symbol.matchAll!="symbol"||typeof RegExp.prototype[Symbol.matchAll]!="function"?lae:RegExp.prototype[Symbol.matchAll]}});var sS=D((XAe,eN)=>{"use strict";var JR=iD(),dae=Rh(),fae=r4(),ZR=d4(),GR=Nh(),XR=Gg(),pae=Ei(),hae=Yc()(),mae=kD(),yae=pr(),gae=gt(),QR=yae("%RegExp%"),vae=pae("String.prototype.indexOf"),bae=iS(),YR=function(e){var r=bae();if(hae&&typeof Symbol.matchAll=="symbol"){var n=fae(e,Symbol.matchAll);return n===QR.prototype[Symbol.matchAll]&&n!==r?r:n}if(ZR(e))return r};eN.exports=function(e){var r=XR(this);if(typeof e<"u"&&e!==null){var n=ZR(e);if(n){var s="flags"in e?dae(e,"flags"):mae(e);if(XR(s),vae(GR(s),"g")<0)throw new gae("matchAll requires a global regular expression")}var i=YR(e);if(typeof i<"u")return JR(i,e,[r])}var o=GR(r),a=new QR(e,"g");return JR(YR(a),a,[o])}});var oS=D((YAe,tN)=>{"use strict";var wae=sS();tN.exports=function(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch{return String.prototype.matchAll}return wae}});var sN=D((ZAe,iN)=>{"use strict";var aS=Du(),Eae=Yc()(),rN=$g(),_ae=oS(),Dae=iS(),nN=Object.defineProperty;iN.exports=function(){var e=_ae();if(aS(String.prototype,{matchAll:e},{matchAll:function(){return String.prototype.matchAll!==e}}),Eae){var r=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(aS(Symbol,{matchAll:r},{matchAll:function(){return Symbol.matchAll!==r}}),nN&&rN){var n=rN(Symbol,r);(!n||n.configurable)&&nN(Symbol,r,{configurable:!1,enumerable:!1,value:r,writable:!1})}var s=Dae(),i={};i[r]=s;var o={};o[r]=function(){return RegExp.prototype[r]!==s},aS(RegExp.prototype,i,o)}return e}});var uS=D((QAe,uN)=>{"use strict";var Sae=Oh(),Aae=Du(),oN=sS(),xae=oS(),Cae=sN(),aN=Sae(oN);Aae(aN,{getPolyfill:xae,implementation:oN,shim:Cae});uN.exports=aN});var cS=D(sv=>{"use strict";Object.defineProperty(sv,"__esModule",{value:!0});sv.JsonPathUtils=void 0;var Pae=Xi(),Cu=class{static extractInputField(e,r){let n=[];if(r){for(let s of r)if(n=Pae.JSONPath.nodes(e,s),n.length)break}return n}static changePropertyNameRecursively(e,r,n){let s=Cu.extractInputField(e,["$.."+r]);for(let i of s)this.copyResultPathToDestinationDefinition(i.path,e,n)}static copyResultPathToDestinationDefinition(e,r,n){let s=r;for(let i=1;i<e.length;i++)if(i+1<e.length&&(s=s[e[i]]),e.length==i+1){s[n]=s[e[i]],delete s[e[i]];break}}static changeSpecialPathsRecursively(e){let r=Cu.extractInputField(e,["$..path"]);for(let n of r)this.modifyPathsWithSpecialCharacter(n.path,e)}static modifyPathsWithSpecialCharacter(e,r){let n=r;for(let s=1;s<e.length;s++)if(s+1<e.length&&(n=n[e[s]]),e.length==s+1){let i=n[e[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[e[s]]=o;break}}static modifyPathWithSpecialCharacter(e){let r=this.matchAll(e,this.REGEX_PATH);return e=this.modifyPathRecursive(r,e),e}static modifyPathRecursive(e,r){let n=e.next(),s=!1;for(;n&&!n.done&&!s;){let i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;let o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r));n=e.next()}return r}};sv.JsonPathUtils=Cu;Cu.matchAll=uS();Cu.REGEX_PATH=/@\w+/g});var lS=D(ov=>{"use strict";Object.defineProperty(ov,"__esModule",{value:!0});ov.ObjectUtils=void 0;var Hh=class{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;Hh.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}static getDistinctFieldInObject(e,r){let n=e.map(s=>s[r]);return Array.from(new Set(n))}};ov.ObjectUtils=Hh});var cN=D(av=>{"use strict";Object.defineProperty(av,"__esModule",{value:!0});av.ObjectValidationUtils=void 0;var dS=class{static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static isValidDIDURI(e){let r="[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]",n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+r+")*)?";return""+r+r,new RegExp(n).test(e)}};av.ObjectValidationUtils=dS});var mS=D(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});Da.PEVersion=Da.InternalPresentationDefinitionV2=Da.InternalPresentationDefinitionV1=void 0;var fS=class{constructor(e,r,n,s,i,o){this.id=e,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return hS.v1}};Da.InternalPresentationDefinitionV1=fS;var pS=class{constructor(e,r,n,s,i,o,a){this.format=n,this.frame=s,this.id=e,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return hS.v2}};Da.InternalPresentationDefinitionV2=pS;var hS;(function(t){t.v1="v1",t.v2="v2"})(hS=Da.PEVersion||(Da.PEVersion={}))});var dN=D(cv=>{"use strict";Object.defineProperty(cv,"__esModule",{value:!0});cv.SSITypesBuilder=void 0;var lN=cg(),uv=Yi(),yS=mS(),Pu=class{static modelEntityToInternalPresentationDefinitionV1(e){let r=Pu.createCopyAndModifyPresentationDefinition(e);return new yS.InternalPresentationDefinitionV1(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(e){let r=Pu.createCopyAndModifyPresentationDefinition(e);return new yS.InternalPresentationDefinitionV2(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e));return uv.JsonPathUtils.changePropertyNameRecursively(r,"_const","const"),uv.JsonPathUtils.changePropertyNameRecursively(r,"_enum","enum"),uv.JsonPathUtils.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(e){return lN.CredentialMapper.toWrappedVerifiablePresentation(e)}static mapExternalVerifiableCredentialsToWrappedVcs(e){return lN.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(e)?e:[e])}static toInternalPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e)),n=(0,uv.definitionVersionDiscovery)(r);if(n.error)throw n.error;return n.version==yS.PEVersion.v1?Pu.modelEntityToInternalPresentationDefinitionV1(r):Pu.modelEntityInternalPresentationDefinitionV2(r)}};cv.SSITypesBuilder=Pu});var nl=D(Sa=>{"use strict";var Oae=Sa&&Sa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gS=Sa&&Sa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Oae(e,t,r)};Object.defineProperty(Sa,"__esModule",{value:!0});gS(ws(),Sa);gS(mS(),Sa);gS(dN(),Sa)});var ES=D((oxe,wS)=>{"use strict";wS.exports=bS;wS.exports.default=bS;var Jr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},nr={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},fN=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$","u"),pN=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),hN=new RegExp("additionalProperties","u");function dv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(fN.test(a)||pN.test(a)||hN.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:nr,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(fN.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].required,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items.type,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.type,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].type,parentSchema:nr.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(pN.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:nr.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(hN.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:nr.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nr.type,parentSchema:nr,data:t};i===null?i=[a]:i.push(a),o++}return dv.errors=i,o===0}var Pe={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},vS={validate:Wh};function Wh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pe.type,parentSchema:Pe,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Pe.oneOf[0].required,parentSchema:Pe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Pe.oneOf[0].required,parentSchema:Pe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.name.type,parentSchema:Pe.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.purpose.type,parentSchema:Pe.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.rule.type,parentSchema:Pe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Pe.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Pe.oneOf[0].properties.rule.enum,parentSchema:Pe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.count.type,parentSchema:Pe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Pe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.min.type,parentSchema:Pe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[0].properties.max.type,parentSchema:Pe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let p={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[0].properties.from.type,parentSchema:Pe.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Pe.oneOf[1].required,parentSchema:Pe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Pe.oneOf[1].required,parentSchema:Pe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Pe.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.name.type,parentSchema:Pe.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.purpose.type,parentSchema:Pe.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pe.oneOf[1].properties.rule.type,parentSchema:Pe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Pe.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Pe.oneOf[1].properties.rule.enum,parentSchema:Pe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.count.type,parentSchema:Pe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Pe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.min.type,parentSchema:Pe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Pe.oneOf[1].properties.max.type,parentSchema:Pe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Pe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let y={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Pe.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}let p=f.length;for(let y=0;y<p;y++)vS.validate(f[y],{instancePath:e+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?vS.validate.errors:i.concat(vS.validate.errors),o=i.length)}else{let p={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pe.oneOf[1].properties.from_nested.type,parentSchema:Pe.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Pe.oneOf,parentSchema:Pe,data:t};i===null?i=[f]:i.push(f),o++}return Wh.errors=i,o===0}var oe={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},Aa={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function fv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.uri===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:Aa.required,parentSchema:Aa,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="uri"||a==="required")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Aa,data:t};i===null?i=[u]:i.push(u),o++}if(t.uri!==void 0){let a=t.uri;if(typeof a!="string"){let u={instancePath:e+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Aa.properties.uri.type,parentSchema:Aa.properties.uri,data:a};i===null?i=[u]:i.push(u),o++}}if(t.required!==void 0){let a=t.required;if(typeof a!="boolean"){let u={instancePath:e+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:Aa.properties.required.type,parentSchema:Aa.properties.required,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Aa.type,parentSchema:Aa,data:t};i===null?i=[a]:i.push(a),o++}return fv.errors=i,o===0}var lv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function pv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lv.properties.manifest.type,parentSchema:lv.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:lv.type,parentSchema:lv,data:t};i===null?i=[a]:i.push(a),o++}return pv.errors=i,o===0}var wt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},lt={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},kae=Object.prototype.hasOwnProperty;function il(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:lt.required,parentSchema:lt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!kae.call(lt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:lt,data:t};i===null?i=[u]:i.push(u),o++}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.properties.type.type,parentSchema:lt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.properties.format.type,parentSchema:lt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:lt.properties.pattern.type,parentSchema:lt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0){let a=t.minimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:lt.properties.minimum.type},message:"must be number,string",schema:lt.properties.minimum.type,parentSchema:lt.properties.minimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minLength!==void 0){let a=t.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.properties.minLength.type,parentSchema:lt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:lt.properties.maxLength.type,parentSchema:lt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMinimum!==void 0){let a=t.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:lt.properties.exclusiveMinimum.type},message:"must be number,string",schema:lt.properties.exclusiveMinimum.type,parentSchema:lt.properties.exclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0){let a=t.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:lt.properties.exclusiveMaximum.type},message:"must be number,string",schema:lt.properties.exclusiveMaximum.type,parentSchema:lt.properties.exclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0){let a=t.maximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:lt.properties.maximum.type},message:"must be number,string",schema:lt.properties.maximum.type,parentSchema:lt.properties.maximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.const!==void 0){let a=t.const;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:lt.properties.const.type},message:"must be number,string",schema:lt.properties.const.type,parentSchema:lt.properties.const,data:a};i===null?i=[u]:i.push(u),o++}}if(t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="number"&&typeof l!="string"){let d={instancePath:e+"/enum/"+c,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:lt.properties.enum.items.type},message:"must be number,string",schema:lt.properties.enum.items.type,parentSchema:lt.properties.enum.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:lt.properties.enum.type,parentSchema:lt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.not!==void 0){let a=t.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){let u={instancePath:e+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:lt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}else{let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:lt.properties.not.type,parentSchema:lt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:lt.type,parentSchema:lt,data:t};i===null?i=[a]:i.push(a),o++}return il.errors=i,o===0}function hv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:wt.type,parentSchema:wt,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:wt.oneOf[0].required,parentSchema:wt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:wt.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[0].properties.id.type,parentSchema:wt.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let y=0;y<p;y++){let w=f[y];if(typeof w!="string"){let P={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[0].properties.path.items.type,parentSchema:wt.oneOf[0].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:wt.oneOf[0].properties.path.type,parentSchema:wt.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[0].properties.purpose.type,parentSchema:wt.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}t.filter!==void 0&&(il(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?il.errors:i.concat(il.errors),o=i.length))}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:wt.oneOf[1].required,parentSchema:wt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:wt.oneOf[1].required,parentSchema:wt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:wt.oneOf[1].required,parentSchema:wt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter"||f==="predicate")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:wt.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.id.type,parentSchema:wt.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let y=0;y<p;y++){let w=f[y];if(typeof w!="string"){let P={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.path.items.type,parentSchema:wt.oneOf[1].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:wt.oneOf[1].properties.path.type,parentSchema:wt.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.purpose.type,parentSchema:wt.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(il(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?il.errors:i.concat(il.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:wt.oneOf[1].properties.predicate.type,parentSchema:wt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:wt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:wt.oneOf[1].properties.predicate.enum,parentSchema:wt.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:wt.oneOf,parentSchema:wt,data:t};i===null?i=[f]:i.push(f),o++}return hv.errors=i,o===0}function mv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:oe.required,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}if(t.schema===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:oe.required,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:oe,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.id.type,parentSchema:oe.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.name.type,parentSchema:oe.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.purpose.type,parentSchema:oe.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.group.items.type,parentSchema:oe.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.group.type,parentSchema:oe.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.schema!==void 0){let a=t.schema;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)fv(a[c],{instancePath:e+"/schema/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?fv.errors:i.concat(fv.errors),o=i.length)}else{let u={instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.schema.type,parentSchema:oe.properties.schema,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)pv(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?pv.errors:i.concat(pv.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.issuance.type,parentSchema:oe.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.limit_disclosure.type,parentSchema:oe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.limit_disclosure.enum,parentSchema:oe.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.active.type,parentSchema:oe.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:oe.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:oe.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.statuses.type,parentSchema:oe.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)hv(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?hv.errors:i.concat(hv.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.fields.type,parentSchema:oe.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.subject_is_issuer.type,parentSchema:oe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.subject_is_issuer.enum,parentSchema:oe.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:oe.properties.constraints.properties.is_holder.items.required,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:oe.properties.constraints.properties.is_holder.items.required,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){let w={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:oe.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.is_holder.items.type,parentSchema:oe.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.is_holder.type,parentSchema:oe.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:oe.properties.constraints.properties.same_subject.items.required,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:oe.properties.constraints.properties.same_subject.items.required,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){let w={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:oe.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:oe.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:oe.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:oe.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.properties.same_subject.items.type,parentSchema:oe.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:oe.properties.constraints.properties.same_subject.type,parentSchema:oe.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.properties.constraints.type,parentSchema:oe.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:oe.type,parentSchema:oe,data:t};i===null?i=[a]:i.push(a),o++}return mv.errors=i,o===0}function bS(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Jr.properties.presentation_definition.required,parentSchema:Jr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Jr.properties.presentation_definition.required,parentSchema:Jr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Jr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jr.properties.presentation_definition.properties.id.type,parentSchema:Jr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jr.properties.presentation_definition.properties.name.type,parentSchema:Jr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jr.properties.presentation_definition.properties.purpose.type,parentSchema:Jr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(dv(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?dv.errors:i.concat(dv.errors),o=i.length)),a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Wh(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Wh.errors:i.concat(Wh.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Jr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Jr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)mv(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?mv.errors:i.concat(mv.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Jr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Jr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Jr.properties.presentation_definition.type,parentSchema:Jr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Jr.type,parentSchema:Jr,data:t};i===null?i=[a]:i.push(a),o++}return bS.errors=i,o===0}});var OS=D((axe,PS)=>{"use strict";PS.exports=CS;PS.exports.default=CS;var xr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},ir={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},mN=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$","u"),yN=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),gN=new RegExp("additionalProperties","u");function al(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(mN.test(a)||yN.test(a)||gN.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ir,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(mN.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].required,parentSchema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items.type,parentSchema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.type,parentSchema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].type,parentSchema:ir.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(yN.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let h=c[d];if(typeof h!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:h};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:ir.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(gN.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:ir.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ir.type,parentSchema:ir,data:t};i===null?i=[a]:i.push(a),o++}return al.errors=i,o===0}var Oe={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},_S={validate:Jh};function Jh(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Oe.type,parentSchema:Oe,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Oe.oneOf[0].required,parentSchema:Oe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Oe.oneOf[0].required,parentSchema:Oe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Oe.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.name.type,parentSchema:Oe.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.purpose.type,parentSchema:Oe.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.rule.type,parentSchema:Oe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Oe.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Oe.oneOf[0].properties.rule.enum,parentSchema:Oe.oneOf[0].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[0].properties.count.type,parentSchema:Oe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Oe.oneOf[0].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[0].properties.min.type,parentSchema:Oe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[0].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[0].properties.max.type,parentSchema:Oe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[0].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let p={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[0].properties.from.type,parentSchema:Oe.oneOf[0].properties.from,data:f};i===null?i=[p]:i.push(p),o++}}}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Oe.oneOf[1].required,parentSchema:Oe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Oe.oneOf[1].required,parentSchema:Oe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Oe.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[1].properties.name.type,parentSchema:Oe.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[1].properties.purpose.type,parentSchema:Oe.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Oe.oneOf[1].properties.rule.type,parentSchema:Oe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="all"||f==="pick")){let p={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Oe.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Oe.oneOf[1].properties.rule.enum,parentSchema:Oe.oneOf[1].properties.rule,data:f};i===null?i=[p]:i.push(p),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[1].properties.count.type,parentSchema:Oe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let p={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Oe.oneOf[1].properties.count,data:f};i===null?i=[p]:i.push(p),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[1].properties.min.type,parentSchema:Oe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[1].properties.min,data:f};i===null?i=[p]:i.push(p),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Oe.oneOf[1].properties.max.type,parentSchema:Oe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let p={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Oe.oneOf[1].properties.max,data:f};i===null?i=[p]:i.push(p),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let y={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Oe.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}let p=f.length;for(let y=0;y<p;y++)_S.validate(f[y],{instancePath:e+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?_S.validate.errors:i.concat(_S.validate.errors),o=i.length)}else{let p={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Oe.oneOf[1].properties.from_nested.type,parentSchema:Oe.oneOf[1].properties.from_nested,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Oe.oneOf,parentSchema:Oe,data:t};i===null?i=[f]:i.push(f),o++}return Jh.errors=i,o===0}var ae={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},yv={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function gv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:yv.properties.manifest.type,parentSchema:yv.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:yv.type,parentSchema:yv,data:t};i===null?i=[a]:i.push(a),o++}return gv.errors=i,o===0}var ze={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},we={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},DS={type:"integer",minimum:0};function Di(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t))){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:DS.type,parentSchema:DS,data:t};i===null?i=[a]:i.push(a),o++}if(typeof t=="number"&&(t<0||isNaN(t))){let a={instancePath:e,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:DS,data:t};i===null?i=[a]:i.push(a),o++}return Di.errors=i,o===0}function Eo(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return Di(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?Di.errors:i.concat(Di.errors),o=i.length),Eo.errors=i,o===0}var SS={type:"array",minItems:1,items:{$ref:"#"}},AS={validate:qe};function _i(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){if(t.length<1){let u={instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:SS,data:t};i===null?i=[u]:i.push(u),o++}let a=t.length;for(let u=0;u<a;u++)AS.validate(t[u],{instancePath:e+"/"+u,parentData:t,parentDataProperty:u,rootData:s})||(i=i===null?AS.validate.errors:i.concat(AS.validate.errors),o=i.length)}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:SS.type,parentSchema:SS,data:t};i===null?i=[a]:i.push(a),o++}return _i.errors=i,o===0}var zh={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function sl(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){let a=t.length;for(let l=0;l<a;l++){let d=t[l];if(typeof d!="string"){let h={instancePath:e+"/"+l,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:zh.items.type,parentSchema:zh.items,data:d};i===null?i=[h]:i.push(h),o++}}let u=t.length,c;if(u>1){let l={};for(;u--;){let d=t[u];if(typeof d=="string"){if(typeof l[d]=="number"){c=l[d];let h={instancePath:e,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:u,j:c},message:"must NOT have duplicate items (items ## "+c+" and "+u+" are identical)",schema:!0,parentSchema:zh,data:t};i===null?i=[h]:i.push(h),o++;break}l[d]=u}}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:zh.type,parentSchema:zh,data:t};i===null?i=[a]:i.push(a),o++}return sl.errors=i,o===0}var xS={enum:["array","boolean","integer","null","number","object","string"]};function ol(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t==="array"||t==="boolean"||t==="integer"||t==="null"||t==="number"||t==="object"||t==="string")){let a={instancePath:e,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:xS.enum},message:"must be equal to one of the allowed values",schema:xS.enum,parentSchema:xS,data:t};i===null?i=[a]:i.push(a),o++}return ol.errors=i,o===0}var vN=jd().default;function qe(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean"){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:we.type},message:"must be object,boolean",schema:we.type,parentSchema:we,data:t};i===null?i=[d]:i.push(d),o++}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let d=t.$id;if(typeof d!="string"){let h={instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$id.type,parentSchema:we.properties.$id,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$schema!==void 0){let d=t.$schema;if(typeof d!="string"){let h={instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$schema.type,parentSchema:we.properties.$schema,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$ref!==void 0){let d=t.$ref;if(typeof d!="string"){let h={instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$ref.type,parentSchema:we.properties.$ref,data:d};i===null?i=[h]:i.push(h),o++}}if(t.$comment!==void 0){let d=t.$comment;if(typeof d!="string"){let h={instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.$comment.type,parentSchema:we.properties.$comment,data:d};i===null?i=[h]:i.push(h),o++}}if(t.title!==void 0){let d=t.title;if(typeof d!="string"){let h={instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.title.type,parentSchema:we.properties.title,data:d};i===null?i=[h]:i.push(h),o++}}if(t.description!==void 0){let d=t.description;if(typeof d!="string"){let h={instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.description.type,parentSchema:we.properties.description,data:d};i===null?i=[h]:i.push(h),o++}}if(t.readOnly!==void 0){let d=t.readOnly;if(typeof d!="boolean"){let h={instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:we.properties.readOnly.type,parentSchema:we.properties.readOnly,data:d};i===null?i=[h]:i.push(h),o++}}if(t.examples!==void 0){let d=t.examples;if(!Array.isArray(d)){let h={instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.examples.type,parentSchema:we.properties.examples,data:d};i===null?i=[h]:i.push(h),o++}}if(t.multipleOf!==void 0){let d=t.multipleOf;if(typeof d=="number"){if(d<=0||isNaN(d)){let h={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:we.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}else{let h={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.multipleOf.type,parentSchema:we.properties.multipleOf,data:d};i===null?i=[h]:i.push(h),o++}}if(t.maximum!==void 0){let d=t.maximum;if(typeof d!="number"){let h={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.maximum.type,parentSchema:we.properties.maximum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.exclusiveMaximum!==void 0){let d=t.exclusiveMaximum;if(typeof d!="number"){let h={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.exclusiveMaximum.type,parentSchema:we.properties.exclusiveMaximum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.minimum!==void 0){let d=t.minimum;if(typeof d!="number"){let h={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.minimum.type,parentSchema:we.properties.minimum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.exclusiveMinimum!==void 0){let d=t.exclusiveMinimum;if(typeof d!="number"){let h={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:we.properties.exclusiveMinimum.type,parentSchema:we.properties.exclusiveMinimum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.maxLength!==void 0&&(Di(t.maxLength,{instancePath:e+"/maxLength",parentData:t,parentDataProperty:"maxLength",rootData:s})||(i=i===null?Di.errors:i.concat(Di.errors),o=i.length)),t.minLength!==void 0&&(Eo(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?Eo.errors:i.concat(Eo.errors),o=i.length)),t.pattern!==void 0){let d=t.pattern;if(typeof d!="string"){let h={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.pattern.type,parentSchema:we.properties.pattern,data:d};i===null?i=[h]:i.push(h),o++}}if(t.additionalItems!==void 0&&(qe(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.items!==void 0){let d=t.items,h=o,f=!1,p=o;qe(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);var a=p===o;if(f=f||a,!f){let y=o;_i(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?_i.errors:i.concat(_i.errors),o=i.length);var a=y===o;f=f||a}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{let y={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.items.anyOf,parentSchema:we.properties.items,data:d};i===null?i=[y]:i.push(y),o++}}if(t.maxItems!==void 0&&(Di(t.maxItems,{instancePath:e+"/maxItems",parentData:t,parentDataProperty:"maxItems",rootData:s})||(i=i===null?Di.errors:i.concat(Di.errors),o=i.length)),t.minItems!==void 0&&(Eo(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?Eo.errors:i.concat(Eo.errors),o=i.length)),t.uniqueItems!==void 0){let d=t.uniqueItems;if(typeof d!="boolean"){let h={instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:we.properties.uniqueItems.type,parentSchema:we.properties.uniqueItems,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contains!==void 0&&(qe(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.maxProperties!==void 0&&(Di(t.maxProperties,{instancePath:e+"/maxProperties",parentData:t,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?Di.errors:i.concat(Di.errors),o=i.length)),t.minProperties!==void 0&&(Eo(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?Eo.errors:i.concat(Eo.errors),o=i.length)),t.required!==void 0&&(sl(t.required,{instancePath:e+"/required",parentData:t,parentDataProperty:"required",rootData:s})||(i=i===null?sl.errors:i.concat(sl.errors),o=i.length)),t.additionalProperties!==void 0&&(qe(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.definitions!==void 0){let d=t.definitions;if(d&&typeof d=="object"&&!Array.isArray(d))for(let h in d)qe(d[h],{instancePath:e+"/definitions/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);else{let h={instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.definitions.type,parentSchema:we.properties.definitions,data:d};i===null?i=[h]:i.push(h),o++}}if(t.properties!==void 0){let d=t.properties;if(d&&typeof d=="object"&&!Array.isArray(d))for(let h in d)qe(d[h],{instancePath:e+"/properties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);else{let h={instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.properties.type,parentSchema:we.properties.properties,data:d};i===null?i=[h]:i.push(h),o++}}if(t.patternProperties!==void 0){let d=t.patternProperties;if(d&&typeof d=="object"&&!Array.isArray(d)){for(let h in d){var u=o===o;if(!u){let p={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:h},message:"property name must be valid",schema:we.properties.patternProperties.propertyNames,parentSchema:we.properties.patternProperties,data:d};i===null?i=[p]:i.push(p),o++}}for(let h in d)qe(d[h],{instancePath:e+"/patternProperties/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)}else{let h={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.patternProperties.type,parentSchema:we.properties.patternProperties,data:d};i===null?i=[h]:i.push(h),o++}}if(t.dependencies!==void 0){let d=t.dependencies;if(d&&typeof d=="object"&&!Array.isArray(d))for(let h in d){let f=d[h],p=o,y=!1,w=o;qe(f,{instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length);var c=w===o;if(y=y||c,!y){let P=o;sl(f,{instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:h,rootData:s})||(i=i===null?sl.errors:i.concat(sl.errors),o=i.length);var c=P===o;y=y||c}if(y)o=p,i!==null&&(p?i.length=p:i=null);else{let P={instancePath:e+"/dependencies/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.dependencies.additionalProperties.anyOf,parentSchema:we.properties.dependencies.additionalProperties,data:f};i===null?i=[P]:i.push(P),o++}}else{let h={instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:we.properties.dependencies.type,parentSchema:we.properties.dependencies,data:d};i===null?i=[h]:i.push(h),o++}}if(t.propertyNames!==void 0&&(qe(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.enum!==void 0){let d=t.enum;if(Array.isArray(d)){if(d.length<1){let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:we.properties.enum,data:d};i===null?i=[p]:i.push(p),o++}let h=d.length,f;if(h>1){e:for(;h--;)for(f=h;f--;)if(vN(d[h],d[f])){let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:h,j:f},message:"must NOT have duplicate items (items ## "+f+" and "+h+" are identical)",schema:!0,parentSchema:we.properties.enum,data:d};i===null?i=[p]:i.push(p),o++;break e}}}else{let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.enum.type,parentSchema:we.properties.enum,data:d};i===null?i=[h]:i.push(h),o++}}if(t.type!==void 0){let d=t.type,h=o,f=!1,p=o;ol(d,{instancePath:e+"/type",parentData:t,parentDataProperty:"type",rootData:s})||(i=i===null?ol.errors:i.concat(ol.errors),o=i.length);var l=p===o;if(f=f||l,!f){let y=o;if(Array.isArray(d)){if(d.length<1){let k={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[k]:i.push(k),o++}let P=d.length;for(let k=0;k<P;k++)ol(d[k],{instancePath:e+"/type/"+k,parentData:d,parentDataProperty:k,rootData:s})||(i=i===null?ol.errors:i.concat(ol.errors),o=i.length);let C=d.length,v;if(C>1){e:for(;C--;)for(v=C;v--;)if(vN(d[C],d[v])){let k={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:C,j:v},message:"must NOT have duplicate items (items ## "+v+" and "+C+" are identical)",schema:!0,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[k]:i.push(k),o++;break e}}}else{let P={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:we.properties.type.anyOf[1].type,parentSchema:we.properties.type.anyOf[1],data:d};i===null?i=[P]:i.push(P),o++}var l=y===o;f=f||l}if(f)o=h,i!==null&&(h?i.length=h:i=null);else{let y={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:we.properties.type.anyOf,parentSchema:we.properties.type,data:d};i===null?i=[y]:i.push(y),o++}}if(t.format!==void 0){let d=t.format;if(typeof d!="string"){let h={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.format.type,parentSchema:we.properties.format,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contentMediaType!==void 0){let d=t.contentMediaType;if(typeof d!="string"){let h={instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.contentMediaType.type,parentSchema:we.properties.contentMediaType,data:d};i===null?i=[h]:i.push(h),o++}}if(t.contentEncoding!==void 0){let d=t.contentEncoding;if(typeof d!="string"){let h={instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:we.properties.contentEncoding.type,parentSchema:we.properties.contentEncoding,data:d};i===null?i=[h]:i.push(h),o++}}t.if!==void 0&&(qe(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.then!==void 0&&(qe(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.else!==void 0&&(qe(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.allOf!==void 0&&(_i(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?_i.errors:i.concat(_i.errors),o=i.length)),t.anyOf!==void 0&&(_i(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?_i.errors:i.concat(_i.errors),o=i.length)),t.oneOf!==void 0&&(_i(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?_i.errors:i.concat(_i.errors),o=i.length)),t.not!==void 0&&(qe(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length))}return qe.errors=i,o===0}function vv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ze.type,parentSchema:ze,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:ze.oneOf[0].required,parentSchema:ze.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="name")){let p={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ze.oneOf[0],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.id.type,parentSchema:ze.oneOf[0].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let y=0;y<p;y++){let w=f[y];if(typeof w!="string"){let P={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.path.items.type,parentSchema:ze.oneOf[0].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ze.oneOf[0].properties.path.type,parentSchema:ze.oneOf[0].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.purpose.type,parentSchema:ze.oneOf[0].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let p={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ze.oneOf[0].properties.intent_to_retain.type,parentSchema:ze.oneOf[0].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(qe(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[0].properties.name.type,parentSchema:ze.oneOf[0].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=l===o;h&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:ze.oneOf[1].required,parentSchema:ze.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="predicate"||f==="name")){let p={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:ze.oneOf[1],data:t};i===null?i=[p]:i.push(p),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let p={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.id.type,parentSchema:ze.oneOf[1].properties.id,data:f};i===null?i=[p]:i.push(p),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let p=f.length;for(let y=0;y<p;y++){let w=f[y];if(typeof w!="string"){let P={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.path.items.type,parentSchema:ze.oneOf[1].properties.path.items,data:w};i===null?i=[P]:i.push(P),o++}}}else{let p={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ze.oneOf[1].properties.path.type,parentSchema:ze.oneOf[1].properties.path,data:f};i===null?i=[p]:i.push(p),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let p={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.purpose.type,parentSchema:ze.oneOf[1].properties.purpose,data:f};i===null?i=[p]:i.push(p),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let p={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ze.oneOf[1].properties.intent_to_retain.type,parentSchema:ze.oneOf[1].properties.intent_to_retain,data:f};i===null?i=[p]:i.push(p),o++}}if(t.filter!==void 0&&(qe(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?qe.errors:i.concat(qe.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.predicate.type,parentSchema:ze.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}if(!(f==="required"||f==="preferred")){let p={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:ze.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:ze.oneOf[1].properties.predicate.enum,parentSchema:ze.oneOf[1].properties.predicate,data:f};i===null?i=[p]:i.push(p),o++}}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let p={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ze.oneOf[1].properties.name.type,parentSchema:ze.oneOf[1].properties.name,data:f};i===null?i=[p]:i.push(p),o++}}}var h=d===o;if(h&&u?(u=!1,c=[c,1]):h&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:ze.oneOf,parentSchema:ze,data:t};i===null?i=[f]:i.push(f),o++}return vv.errors=i,o===0}function bv(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:ae.required,parentSchema:ae,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ae,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.id.type,parentSchema:ae.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.name.type,parentSchema:ae.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.purpose.type,parentSchema:ae.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)gv(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?gv.errors:i.concat(gv.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.issuance.type,parentSchema:ae.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.group.items.type,parentSchema:ae.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.group.type,parentSchema:ae.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0&&(al(t.format,{instancePath:e+"/format",parentData:t,parentDataProperty:"format",rootData:s})||(i=i===null?al.errors:i.concat(al.errors),o=i.length)),t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.limit_disclosure.type,parentSchema:ae.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.limit_disclosure.enum,parentSchema:ae.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.active.type,parentSchema:ae.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:ae.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:ae.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.statuses.type,parentSchema:ae.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)vv(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?vv.errors:i.concat(vv.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.fields.type,parentSchema:ae.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.subject_is_issuer.type,parentSchema:ae.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.subject_is_issuer.enum,parentSchema:ae.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ae.properties.constraints.properties.is_holder.items.required,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ae.properties.constraints.properties.is_holder.items.required,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){let w={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:ae.properties.constraints.properties.is_holder.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.is_holder.items.type,parentSchema:ae.properties.constraints.properties.is_holder.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.is_holder.type,parentSchema:ae.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ae.properties.constraints.properties.same_subject.items.required,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}if(d.directive===void 0){let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ae.properties.constraints.properties.same_subject.items.required,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}for(let h in d)if(!(h==="field_id"||h==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:h},message:"must NOT have additional properties",schema:!1,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let h=d.field_id;if(Array.isArray(h)){let f=h.length;for(let p=0;p<f;p++){let y=h[p];if(typeof y!="string"){let w={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+p,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[w]:i.push(w),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.field_id,data:h};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let h=d.directive;if(typeof h!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ae.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}if(!(h==="required"||h==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ae.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ae.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:ae.properties.constraints.properties.same_subject.items.properties.directive,data:h};i===null?i=[f]:i.push(f),o++}}}else{let h={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.properties.same_subject.items.type,parentSchema:ae.properties.constraints.properties.same_subject.items,data:d};i===null?i=[h]:i.push(h),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ae.properties.constraints.properties.same_subject.type,parentSchema:ae.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.properties.constraints.type,parentSchema:ae.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ae.type,parentSchema:ae,data:t};i===null?i=[a]:i.push(a),o++}return bv.errors=i,o===0}function CS(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:xr.properties.presentation_definition.required,parentSchema:xr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:xr.properties.presentation_definition.required,parentSchema:xr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="frame"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:xr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xr.properties.presentation_definition.properties.id.type,parentSchema:xr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xr.properties.presentation_definition.properties.name.type,parentSchema:xr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xr.properties.presentation_definition.properties.purpose.type,parentSchema:xr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(al(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?al.errors:i.concat(al.errors),o=i.length)),a.frame!==void 0){let u=a.frame;if(!(u&&typeof u=="object"&&!Array.isArray(u))){let c={instancePath:e+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:xr.properties.presentation_definition.properties.frame.type,parentSchema:xr.properties.presentation_definition.properties.frame,data:u};i===null?i=[c]:i.push(c),o++}}if(a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Jh(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Jh.errors:i.concat(Jh.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:xr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:xr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)bv(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?bv.errors:i.concat(bv.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:xr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:xr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:xr.properties.presentation_definition.type,parentSchema:xr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:xr.type,parentSchema:xr,data:t};i===null?i=[a]:i.push(a),o++}return CS.errors=i,o===0}});var _N=D(xn=>{"use strict";var EN=xn&&xn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xn,"__esModule",{value:!0});xn.filterToRestrictedDIDs=xn.isRestrictedDID=xn.uniformDIDMethods=xn.definitionVersionDiscovery=xn.getIssuerString=xn.getSubjectIdsAsString=void 0;var bN=nl(),Iae=EN(ES()),Bae=EN(OS()),Tae=lS(),wN=cS();function Fae(t){return(Array.isArray(t.credentialSubject)?t.credentialSubject:[t.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}xn.getSubjectIdsAsString=Fae;function $ae(t){return Tae.ObjectUtils.isString(t.issuer)?t.issuer:t.issuer.id}xn.getIssuerString=$ae;function Rae(t){let e=JSON.parse(JSON.stringify(t));wN.JsonPathUtils.changePropertyNameRecursively(e,"_const","const"),wN.JsonPathUtils.changePropertyNameRecursively(e,"_enum","enum");let r={presentation_definition:e},n=(0,Bae.default)(r);return n?{version:bN.PEVersion.v2}:(n=(0,Iae.default)(r),n?{version:bN.PEVersion.v1}:{error:"This is not a valid PresentationDefinition"})}xn.definitionVersionDiscovery=Rae;function kS(t,e){var r;let n=(r=t?.map(s=>s.toLowerCase()).map(s=>s.startsWith("did:")?s:`did:${s}`))!==null&&r!==void 0?r:[];if(e?.removePrefix){let s=e.removePrefix.endsWith(":")?e.removePrefix.length:e.removePrefix.length+1;n=n.map(i=>i.startsWith(e.removePrefix)?i.substring(s):i)}return n.includes("did")?[]:n}xn.uniformDIDMethods=kS;function Nae(t,e){let r=kS(e);return r.length===0||r.some(n=>t.toLowerCase().startsWith(n))}xn.isRestrictedDID=Nae;function jae(t,e){let r=kS(e);return r.length===0?t:r.flatMap(n=>t.filter(s=>s.toLowerCase().startsWith(n)))}xn.filterToRestrictedDIDs=jae});var Yi=D(_o=>{"use strict";var qae=_o&&_o.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),wv=_o&&_o.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qae(e,t,r)};Object.defineProperty(_o,"__esModule",{value:!0});wv(cS(),_o);wv(lS(),_o);wv(cN(),_o);wv(_N(),_o)});var Zi=D(Ev=>{"use strict";Object.defineProperty(Ev,"__esModule",{value:!0});Ev.AbstractEvaluationHandler=void 0;var Mae=Xi(),Lae=zr(),IS=class{constructor(e){this._client=e}setNext(e){return this.nextHandler=e,e}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(e){this._client.wrappedVcs=e}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(e){this._client.presentationSubmission=e}getResults(){return this._client.results}updatePresentationSubmission(e){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===Lae.Status.ERROR&&a.evaluator===this.getName()).find(a=>(i=Mae.JSONPath.query(e,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&i?.id===r.id))&&delete s[n]})}removeDuplicate(e){return e.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}};Ev.AbstractEvaluationHandler=IS});var SN=D(DN=>{"use strict";Object.defineProperty(DN,"__esModule",{value:!0})});var Yh=D(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.regexpCode=xt.getEsmExportName=xt.getProperty=xt.safeStringify=xt.stringify=xt.strConcat=xt.addCodeArg=xt.str=xt._=xt.nil=xt._Code=xt.Name=xt.IDENTIFIER=xt._CodeOrName=void 0;var Gh=class{};xt._CodeOrName=Gh;xt.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ul=class extends Gh{constructor(e){if(super(),!xt.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};xt.Name=ul;var Qi=class extends Gh{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof ul&&(r[n.str]=(r[n.str]||0)+1),r),{})}};xt._Code=Qi;xt.nil=new Qi("");function AN(t,...e){let r=[t[0]],n=0;for(;n<e.length;)TS(r,e[n]),r.push(t[++n]);return new Qi(r)}xt._=AN;var BS=new Qi("+");function xN(t,...e){let r=[Xh(t[0])],n=0;for(;n<e.length;)r.push(BS),TS(r,e[n]),r.push(BS,Xh(t[++n]));return Uae(r),new Qi(r)}xt.str=xN;function TS(t,e){e instanceof Qi?t.push(...e._items):e instanceof ul?t.push(e):t.push(Hae(e))}xt.addCodeArg=TS;function Uae(t){let e=1;for(;e<t.length-1;){if(t[e]===BS){let r=Vae(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Vae(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof ul||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof ul))return`"${t}${e.slice(1)}`}function Kae(t,e){return e.emptyStr()?t:t.emptyStr()?e:xN`${t}${e}`}xt.strConcat=Kae;function Hae(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Xh(Array.isArray(t)?t.join(","):t)}function Wae(t){return new Qi(Xh(t))}xt.stringify=Wae;function Xh(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}xt.safeStringify=Xh;function zae(t){return typeof t=="string"&&xt.IDENTIFIER.test(t)?new Qi(`.${t}`):AN`[${t}]`}xt.getProperty=zae;function Jae(t){if(typeof t=="string"&&xt.IDENTIFIER.test(t))return new Qi(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}xt.getEsmExportName=Jae;function Gae(t){return new Qi(t.toString())}xt.regexpCode=Gae});var NS=D(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.ValueScope=Nn.ValueScopeName=Nn.Scope=Nn.varKinds=Nn.UsedValueState=void 0;var oi=Yh(),FS=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},$S;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})($S=Nn.UsedValueState||(Nn.UsedValueState={}));Nn.varKinds={const:new oi.Name("const"),let:new oi.Name("let"),var:new oi.Name("var")};var _v=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof oi.Name?e:this.name(e)}name(e){return new oi.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Nn.Scope=_v;var Dv=class extends oi.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,oi._)`.${new oi.Name(r)}[${n}]`}};Nn.ValueScopeName=Dv;var Xae=(0,oi._)`\n`,RS=class extends _v{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Xae:oi.nil}}get(){return this._scope}name(e){return new Dv(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,oi._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=oi.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,$S.Started);let l=r(c);if(l){let d=this.opts.es5?Nn.varKinds.var:Nn.varKinds.const;i=(0,oi._)`${i}${d} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,oi._)`${i}${l}${this.opts._n}`;else throw new FS(c);u.set(c,$S.Completed)})}return i}};Nn.ValueScope=RS});var ot=D(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.or=dt.and=dt.not=dt.CodeGen=dt.operators=dt.varKinds=dt.ValueScopeName=dt.ValueScope=dt.Scope=dt.Name=dt.regexpCode=dt.stringify=dt.getProperty=dt.nil=dt.strConcat=dt.str=dt._=void 0;var Et=Yh(),As=NS(),Ou=Yh();Object.defineProperty(dt,"_",{enumerable:!0,get:function(){return Ou._}});Object.defineProperty(dt,"str",{enumerable:!0,get:function(){return Ou.str}});Object.defineProperty(dt,"strConcat",{enumerable:!0,get:function(){return Ou.strConcat}});Object.defineProperty(dt,"nil",{enumerable:!0,get:function(){return Ou.nil}});Object.defineProperty(dt,"getProperty",{enumerable:!0,get:function(){return Ou.getProperty}});Object.defineProperty(dt,"stringify",{enumerable:!0,get:function(){return Ou.stringify}});Object.defineProperty(dt,"regexpCode",{enumerable:!0,get:function(){return Ou.regexpCode}});Object.defineProperty(dt,"Name",{enumerable:!0,get:function(){return Ou.Name}});var Cv=NS();Object.defineProperty(dt,"Scope",{enumerable:!0,get:function(){return Cv.Scope}});Object.defineProperty(dt,"ValueScope",{enumerable:!0,get:function(){return Cv.ValueScope}});Object.defineProperty(dt,"ValueScopeName",{enumerable:!0,get:function(){return Cv.ValueScopeName}});Object.defineProperty(dt,"varKinds",{enumerable:!0,get:function(){return Cv.varKinds}});dt.operators={GT:new Et._Code(">"),GTE:new Et._Code(">="),LT:new Et._Code("<"),LTE:new Et._Code("<="),EQ:new Et._Code("==="),NEQ:new Et._Code("!=="),NOT:new Et._Code("!"),OR:new Et._Code("||"),AND:new Et._Code("&&"),ADD:new Et._Code("+")};var xa=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},jS=class extends xa{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?As.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=af(this.rhs,e,r)),this}get names(){return this.rhs instanceof Et._CodeOrName?this.rhs.names:{}}},Sv=class extends xa{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof Et.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=af(this.rhs,e,r),this}get names(){let e=this.lhs instanceof Et.Name?{}:{...this.lhs.names};return xv(e,this.rhs)}},qS=class extends Sv{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},MS=class extends xa{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},LS=class extends xa{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},US=class extends xa{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},VS=class extends xa{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=af(this.code,e,r),this}get names(){return this.code instanceof Et._CodeOrName?this.code.names:{}}},Zh=class extends xa{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(Yae(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>ll(e,r.names),{})}},Ca=class extends Zh{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},KS=class extends Zh{},of=class extends Ca{};of.kind="else";var xs=class extends Ca{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new of(n):n}if(r)return e===!1?r instanceof xs?r:r.nodes:this.nodes.length?this:new xs(CN(e),r instanceof xs?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=af(this.condition,e,r),this}get names(){let e=super.names;return xv(e,this.condition),this.else&&ll(e,this.else.names),e}};xs.kind="if";var cl=class extends Ca{};cl.kind="for";var HS=class extends cl{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=af(this.iteration,e,r),this}get names(){return ll(super.names,this.iteration.names)}},WS=class extends cl{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?As.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=xv(super.names,this.from);return xv(e,this.to)}},Av=class extends cl{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=af(this.iterable,e,r),this}get names(){return ll(super.names,this.iterable.names)}},Qh=class extends Ca{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Qh.kind="func";var em=class extends Zh{render(e){return"return "+super.render(e)}};em.kind="return";var zS=class extends Ca{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&ll(e,this.catch.names),this.finally&&ll(e,this.finally.names),e}},tm=class extends Ca{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};tm.kind="catch";var rm=class extends Ca{render(e){return"finally"+super.render(e)}};rm.kind="finally";var JS=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new As.Scope({parent:e}),this._nodes=[new KS]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new jS(e,i,n)),i}const(e,r,n){return this._def(As.varKinds.const,e,r,n)}let(e,r,n){return this._def(As.varKinds.let,e,r,n)}var(e,r,n){return this._def(As.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new Sv(e,r,n))}add(e,r){return this._leafNode(new qS(e,dt.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==Et.nil&&this._leafNode(new VS(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,Et.addCodeArg)(r,s));return r.push("}"),new Et._Code(r)}if(e,r,n){if(this._blockNode(new xs(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new xs(e))}else(){return this._elseNode(new of)}endIf(){return this._endBlockNode(xs,of)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new HS(e),r)}forRange(e,r,n,s,i=this.opts.es5?As.varKinds.var:As.varKinds.let){let o=this._scope.toName(e);return this._for(new WS(i,o,r,n),()=>s(o))}forOf(e,r,n,s=As.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof Et.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Et._)`${o}.length`,a=>{this.var(i,(0,Et._)`${o}[${a}]`),n(i)})}return this._for(new Av("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?As.varKinds.var:As.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,Et._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Av("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(cl)}label(e){return this._leafNode(new MS(e))}break(e){return this._leafNode(new LS(e))}return(e){let r=new em;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(em)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new zS;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new tm(i),r(i)}return n&&(this._currNode=s.finally=new rm,this.code(n)),this._endBlockNode(tm,rm)}throw(e){return this._leafNode(new US(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=Et.nil,n,s){return this._blockNode(new Qh(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Qh)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof xs))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};dt.CodeGen=JS;function ll(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function xv(t,e){return e instanceof Et._CodeOrName?ll(t,e.names):t}function af(t,e,r){if(t instanceof Et.Name)return n(t);if(!s(t))return t;return new Et._Code(t._items.reduce((i,o)=>(o instanceof Et.Name&&(o=n(o)),o instanceof Et._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof Et._Code&&i._items.some(o=>o instanceof Et.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function Yae(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function CN(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,Et._)`!${GS(t)}`}dt.not=CN;var Zae=PN(dt.operators.AND);function Qae(...t){return t.reduce(Zae)}dt.and=Qae;var eue=PN(dt.operators.OR);function tue(...t){return t.reduce(eue)}dt.or=tue;function PN(t){return(e,r)=>e===Et.nil?r:r===Et.nil?e:(0,Et._)`${GS(e)} ${t} ${GS(r)}`}function GS(t){return t instanceof Et.Name?t:(0,Et._)`(${t})`}});var Ct=D(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.checkStrictMode=ft.getErrorPath=ft.Type=ft.useFunc=ft.setEvaluated=ft.evaluatedPropsToName=ft.mergeEvaluated=ft.eachItem=ft.unescapeJsonPointer=ft.escapeJsonPointer=ft.escapeFragment=ft.unescapeFragment=ft.schemaRefOrVal=ft.schemaHasRulesButRef=ft.schemaHasRules=ft.checkUnknownRules=ft.alwaysValidSchema=ft.toHash=void 0;var Kt=ot(),rue=Yh();function nue(t){let e={};for(let r of t)e[r]=!0;return e}ft.toHash=nue;function iue(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(IN(t,e),!BN(e,t.self.RULES.all))}ft.alwaysValidSchema=iue;function IN(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||RN(t,`unknown keyword: "${i}"`)}ft.checkUnknownRules=IN;function BN(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}ft.schemaHasRules=BN;function sue(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}ft.schemaHasRulesButRef=sue;function oue({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Kt._)`${r}`}return(0,Kt._)`${t}${e}${(0,Kt.getProperty)(n)}`}ft.schemaRefOrVal=oue;function aue(t){return TN(decodeURIComponent(t))}ft.unescapeFragment=aue;function uue(t){return encodeURIComponent(XS(t))}ft.escapeFragment=uue;function XS(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}ft.escapeJsonPointer=XS;function TN(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}ft.unescapeJsonPointer=TN;function cue(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}ft.eachItem=cue;function ON({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof Kt.Name?(i instanceof Kt.Name?t(s,i,o):e(s,i,o),o):i instanceof Kt.Name?(e(s,o,i),i):r(i,o);return a===Kt.Name&&!(u instanceof Kt.Name)?n(s,u):u}}ft.mergeEvaluated={props:ON({mergeNames:(t,e,r)=>t.if((0,Kt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Kt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Kt._)`${r} || {}`).code((0,Kt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Kt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Kt._)`${r} || {}`),YS(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:FN}),items:ON({mergeNames:(t,e,r)=>t.if((0,Kt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Kt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Kt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Kt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function FN(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,Kt._)`{}`);return e!==void 0&&YS(t,r,e),r}ft.evaluatedPropsToName=FN;function YS(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Kt._)`${e}${(0,Kt.getProperty)(n)}`,!0))}ft.setEvaluated=YS;var kN={};function lue(t,e){return t.scopeValue("func",{ref:e,code:kN[e.code]||(kN[e.code]=new rue._Code(e.code))})}ft.useFunc=lue;var $N;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})($N=ft.Type||(ft.Type={}));function due(t,e,r){if(t instanceof Kt.Name){let n=e===$N.Num;return r?n?(0,Kt._)`"[" + ${t} + "]"`:(0,Kt._)`"['" + ${t} + "']"`:n?(0,Kt._)`"/" + ${t}`:(0,Kt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Kt.getProperty)(t).toString():"/"+XS(t)}ft.getErrorPath=due;function RN(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}ft.checkStrictMode=RN});var Pa=D(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});var Cn=ot(),fue={data:new Cn.Name("data"),valCxt:new Cn.Name("valCxt"),instancePath:new Cn.Name("instancePath"),parentData:new Cn.Name("parentData"),parentDataProperty:new Cn.Name("parentDataProperty"),rootData:new Cn.Name("rootData"),dynamicAnchors:new Cn.Name("dynamicAnchors"),vErrors:new Cn.Name("vErrors"),errors:new Cn.Name("errors"),this:new Cn.Name("this"),self:new Cn.Name("self"),scope:new Cn.Name("scope"),json:new Cn.Name("json"),jsonPos:new Cn.Name("jsonPos"),jsonLen:new Cn.Name("jsonLen"),jsonPart:new Cn.Name("jsonPart")};ZS.default=fue});var nm=D(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.extendErrors=Pn.resetErrorsCount=Pn.reportExtraError=Pn.reportError=Pn.keyword$DataError=Pn.keywordError=void 0;var Dt=ot(),Pv=Ct(),jn=Pa();Pn.keywordError={message:({keyword:t})=>(0,Dt.str)`must pass "${t}" keyword validation`};Pn.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,Dt.str)`"${t}" keyword must be ${e} ($data)`:(0,Dt.str)`"${t}" keyword is invalid ($data)`};function pue(t,e=Pn.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=qN(t,e,r);n??(o||a)?NN(i,u):jN(s,(0,Dt._)`[${u}]`)}Pn.reportError=pue;function hue(t,e=Pn.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=qN(t,e,r);NN(s,a),i||o||jN(n,jn.default.vErrors)}Pn.reportExtraError=hue;function mue(t,e){t.assign(jn.default.errors,e),t.if((0,Dt._)`${jn.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,Dt._)`${jn.default.vErrors}.length`,e),()=>t.assign(jn.default.vErrors,null)))}Pn.resetErrorsCount=mue;function yue({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,jn.default.errors,a=>{t.const(o,(0,Dt._)`${jn.default.vErrors}[${a}]`),t.if((0,Dt._)`${o}.instancePath === undefined`,()=>t.assign((0,Dt._)`${o}.instancePath`,(0,Dt.strConcat)(jn.default.instancePath,i.errorPath))),t.assign((0,Dt._)`${o}.schemaPath`,(0,Dt.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,Dt._)`${o}.schema`,r),t.assign((0,Dt._)`${o}.data`,n))})}Pn.extendErrors=yue;function NN(t,e){let r=t.const("err",e);t.if((0,Dt._)`${jn.default.vErrors} === null`,()=>t.assign(jn.default.vErrors,(0,Dt._)`[${r}]`),(0,Dt._)`${jn.default.vErrors}.push(${r})`),t.code((0,Dt._)`${jn.default.errors}++`)}function jN(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,Dt._)`new ${t.ValidationError}(${e})`):(r.assign((0,Dt._)`${n}.errors`,e),r.return(!1))}var dl={keyword:new Dt.Name("keyword"),schemaPath:new Dt.Name("schemaPath"),params:new Dt.Name("params"),propertyName:new Dt.Name("propertyName"),message:new Dt.Name("message"),schema:new Dt.Name("schema"),parentSchema:new Dt.Name("parentSchema")};function qN(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,Dt._)`{}`:gue(t,e,r)}function gue(t,e,r={}){let{gen:n,it:s}=t,i=[vue(s,r),bue(t,r)];return wue(t,e,i),n.object(...i)}function vue({errorPath:t},{instancePath:e}){let r=e?(0,Dt.str)`${t}${(0,Pv.getErrorPath)(e,Pv.Type.Str)}`:t;return[jn.default.instancePath,(0,Dt.strConcat)(jn.default.instancePath,r)]}function bue({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,Dt.str)`${e}/${t}`;return r&&(s=(0,Dt.str)`${s}${(0,Pv.getErrorPath)(r,Pv.Type.Str)}`),[dl.schemaPath,s]}function wue(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:d}=a;n.push([dl.keyword,s],[dl.params,typeof e=="function"?e(t):e||(0,Dt._)`{}`]),u.messages&&n.push([dl.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([dl.schema,o],[dl.parentSchema,(0,Dt._)`${l}${d}`],[jn.default.data,i]),c&&n.push([dl.propertyName,c])}});var LN=D(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.boolOrEmptySchema=uf.topBoolOrEmptySchema=void 0;var Eue=nm(),_ue=ot(),Due=Pa(),Sue={message:"boolean schema is false"};function Aue(t){let{gen:e,schema:r,validateName:n}=t;r===!1?MN(t,!1):typeof r=="object"&&r.$async===!0?e.return(Due.default.data):(e.assign((0,_ue._)`${n}.errors`,null),e.return(!0))}uf.topBoolOrEmptySchema=Aue;function xue(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),MN(t)):r.var(e,!0)}uf.boolOrEmptySchema=xue;function MN(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Eue.reportError)(s,Sue,void 0,e)}});var QS=D(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.getRules=cf.isJSONType=void 0;var Cue=["string","number","integer","boolean","null","object","array"],Pue=new Set(Cue);function Oue(t){return typeof t=="string"&&Pue.has(t)}cf.isJSONType=Oue;function kue(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}cf.getRules=kue});var eA=D(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.shouldUseRule=ku.shouldUseGroup=ku.schemaHasRulesForType=void 0;function Iue({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&UN(t,n)}ku.schemaHasRulesForType=Iue;function UN(t,e){return e.rules.some(r=>VN(t,r))}ku.shouldUseGroup=UN;function VN(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}ku.shouldUseRule=VN});var sm=D(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});vn.reportTypeError=vn.checkDataTypes=vn.checkDataType=vn.coerceAndCheckDataType=vn.getJSONTypes=vn.getSchemaTypes=vn.DataType=void 0;var Bue=QS(),Tue=eA(),Fue=nm(),tt=ot(),KN=Ct(),im;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(im=vn.DataType||(vn.DataType={}));function $ue(t){let e=HN(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}vn.getSchemaTypes=$ue;function HN(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Bue.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}vn.getJSONTypes=HN;function Rue(t,e){let{gen:r,data:n,opts:s}=t,i=Nue(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Tue.schemaHasRulesForType)(t,e[0]));if(o){let a=rA(e,n,s.strictNumbers,im.Wrong);r.if(a,()=>{i.length?jue(t,e,i):nA(t)})}return o}vn.coerceAndCheckDataType=Rue;var WN=new Set(["string","number","integer","boolean","null"]);function Nue(t,e){return e?t.filter(r=>WN.has(r)||e==="array"&&r==="array"):[]}function jue(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,tt._)`typeof ${s}`),a=n.let("coerced",(0,tt._)`undefined`);i.coerceTypes==="array"&&n.if((0,tt._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,tt._)`${s}[0]`).assign(o,(0,tt._)`typeof ${s}`).if(rA(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,tt._)`${a} !== undefined`);for(let c of r)(WN.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),nA(t),n.endIf(),n.if((0,tt._)`${a} !== undefined`,()=>{n.assign(s,a),que(t,a)});function u(c){switch(c){case"string":n.elseIf((0,tt._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,tt._)`"" + ${s}`).elseIf((0,tt._)`${s} === null`).assign(a,(0,tt._)`""`);return;case"number":n.elseIf((0,tt._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,tt._)`+${s}`);return;case"integer":n.elseIf((0,tt._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,tt._)`+${s}`);return;case"boolean":n.elseIf((0,tt._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,tt._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,tt._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,tt._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,tt._)`[${s}]`)}}}function que({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,tt._)`${e} !== undefined`,()=>t.assign((0,tt._)`${e}[${r}]`,n))}function tA(t,e,r,n=im.Correct){let s=n===im.Correct?tt.operators.EQ:tt.operators.NEQ,i;switch(t){case"null":return(0,tt._)`${e} ${s} null`;case"array":i=(0,tt._)`Array.isArray(${e})`;break;case"object":i=(0,tt._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,tt._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,tt._)`typeof ${e} ${s} ${t}`}return n===im.Correct?i:(0,tt.not)(i);function o(a=tt.nil){return(0,tt.and)((0,tt._)`typeof ${e} == "number"`,a,r?(0,tt._)`isFinite(${e})`:tt.nil)}}vn.checkDataType=tA;function rA(t,e,r,n){if(t.length===1)return tA(t[0],e,r,n);let s,i=(0,KN.toHash)(t);if(i.array&&i.object){let o=(0,tt._)`typeof ${e} != "object"`;s=i.null?o:(0,tt._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=tt.nil;i.number&&delete i.integer;for(let o in i)s=(0,tt.and)(s,tA(o,e,r,n));return s}vn.checkDataTypes=rA;var Mue={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,tt._)`{type: ${t}}`:(0,tt._)`{type: ${e}}`};function nA(t){let e=Lue(t);(0,Fue.reportError)(e,Mue)}vn.reportTypeError=nA;function Lue(t){let{gen:e,data:r,schema:n}=t,s=(0,KN.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var JN=D(Ov=>{"use strict";Object.defineProperty(Ov,"__esModule",{value:!0});Ov.assignDefaults=void 0;var lf=ot(),Uue=Ct();function Vue(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)zN(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>zN(t,i,s.default))}Ov.assignDefaults=Vue;function zN(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,lf._)`${i}${(0,lf.getProperty)(e)}`;if(s){(0,Uue.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,lf._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,lf._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,lf._)`${a} = ${(0,lf.stringify)(r)}`)}});var es=D(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.validateUnion=qt.validateArray=qt.usePattern=qt.callValidateCode=qt.schemaProperties=qt.allSchemaProperties=qt.noPropertyInData=qt.propertyInData=qt.isOwnProperty=qt.hasPropFunc=qt.reportMissingProp=qt.checkMissingProp=qt.checkReportMissingProp=void 0;var Xt=ot(),iA=Ct(),Iu=Pa(),Kue=Ct();function Hue(t,e){let{gen:r,data:n,it:s}=t;r.if(oA(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Xt._)`${e}`},!0),t.error()})}qt.checkReportMissingProp=Hue;function Wue({gen:t,data:e,it:{opts:r}},n,s){return(0,Xt.or)(...n.map(i=>(0,Xt.and)(oA(t,e,i,r.ownProperties),(0,Xt._)`${s} = ${i}`)))}qt.checkMissingProp=Wue;function zue(t,e){t.setParams({missingProperty:e},!0),t.error()}qt.reportMissingProp=zue;function GN(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Xt._)`Object.prototype.hasOwnProperty`})}qt.hasPropFunc=GN;function sA(t,e,r){return(0,Xt._)`${GN(t)}.call(${e}, ${r})`}qt.isOwnProperty=sA;function Jue(t,e,r,n){let s=(0,Xt._)`${e}${(0,Xt.getProperty)(r)} !== undefined`;return n?(0,Xt._)`${s} && ${sA(t,e,r)}`:s}qt.propertyInData=Jue;function oA(t,e,r,n){let s=(0,Xt._)`${e}${(0,Xt.getProperty)(r)} === undefined`;return n?(0,Xt.or)(s,(0,Xt.not)(sA(t,e,r))):s}qt.noPropertyInData=oA;function XN(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}qt.allSchemaProperties=XN;function Gue(t,e){return XN(e).filter(r=>!(0,iA.alwaysValidSchema)(t,e[r]))}qt.schemaProperties=Gue;function Xue({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,Xt._)`${t}, ${e}, ${n}${s}`:e,d=[[Iu.default.instancePath,(0,Xt.strConcat)(Iu.default.instancePath,i)],[Iu.default.parentData,o.parentData],[Iu.default.parentDataProperty,o.parentDataProperty],[Iu.default.rootData,Iu.default.rootData]];o.opts.dynamicRef&&d.push([Iu.default.dynamicAnchors,Iu.default.dynamicAnchors]);let h=(0,Xt._)`${l}, ${r.object(...d)}`;return u!==Xt.nil?(0,Xt._)`${a}.call(${u}, ${h})`:(0,Xt._)`${a}(${h})`}qt.callValidateCode=Xue;var Yue=(0,Xt._)`new RegExp`;function Zue({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Xt._)`${s.code==="new RegExp"?Yue:(0,Kue.useFunc)(t,s)}(${r}, ${n})`})}qt.usePattern=Zue;function Que(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,Xt._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:iA.Type.Num},i),e.if((0,Xt.not)(i),a)})}}qt.validateArray=Que;function ece(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,iA.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,Xt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,Xt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}qt.validateUnion=ece});var QN=D(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.validateKeywordUsage=Do.validSchemaType=Do.funcKeywordCode=Do.macroKeywordCode=void 0;var qn=ot(),fl=Pa(),tce=es(),rce=nm();function nce(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=ZN(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:qn.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}Do.macroKeywordCode=nce;function ice(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;oce(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=ZN(n,s,c),d=n.let("valid");t.block$data(d,h),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function h(){if(e.errors===!1)y(),e.modifying&&YN(t),w(()=>t.error());else{let P=e.async?f():p();e.modifying&&YN(t),w(()=>sce(t,P))}}function f(){let P=n.let("ruleErrs",null);return n.try(()=>y((0,qn._)`await `),C=>n.assign(d,!1).if((0,qn._)`${C} instanceof ${u.ValidationError}`,()=>n.assign(P,(0,qn._)`${C}.errors`),()=>n.throw(C))),P}function p(){let P=(0,qn._)`${l}.errors`;return n.assign(P,null),y(qn.nil),P}function y(P=e.async?(0,qn._)`await `:qn.nil){let C=u.opts.passContext?fl.default.this:fl.default.self,v=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,qn._)`${P}${(0,tce.callValidateCode)(t,l,C,v)}`,e.modifying)}function w(P){var C;n.if((0,qn.not)((C=e.valid)!==null&&C!==void 0?C:d),P)}}Do.funcKeywordCode=ice;function YN(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,qn._)`${n.parentData}[${n.parentDataProperty}]`))}function sce(t,e){let{gen:r}=t;r.if((0,qn._)`Array.isArray(${e})`,()=>{r.assign(fl.default.vErrors,(0,qn._)`${fl.default.vErrors} === null ? ${e} : ${fl.default.vErrors}.concat(${e})`).assign(fl.default.errors,(0,qn._)`${fl.default.vErrors}.length`),(0,rce.extendErrors)(t)},()=>t.error())}function oce({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function ZN(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,qn.stringify)(r)})}function ace(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Do.validSchemaType=ace;function uce({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Do.validateKeywordUsage=uce});var tj=D(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.extendSubschemaMode=Bu.extendSubschemaData=Bu.getSubschema=void 0;var So=ot(),ej=Ct();function cce(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,So._)`${t.schemaPath}${(0,So.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,So._)`${t.schemaPath}${(0,So.getProperty)(e)}${(0,So.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,ej.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Bu.getSubschema=cce;function lce(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:d}=e,h=a.let("data",(0,So._)`${e.data}${(0,So.getProperty)(r)}`,!0);u(h),t.errorPath=(0,So.str)`${c}${(0,ej.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,So._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof So.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}Bu.extendSubschemaData=lce;function dce(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Bu.extendSubschemaMode=dce});var nj=D((xxe,rj)=>{"use strict";var Tu=rj.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};kv(e,n,s,t,"",t)};Tu.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Tu.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Tu.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Tu.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function kv(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var d=n[l];if(Array.isArray(d)){if(l in Tu.arrayKeywords)for(var h=0;h<d.length;h++)kv(t,e,r,d[h],s+"/"+l+"/"+h,i,s,l,n,h)}else if(l in Tu.propsKeywords){if(d&&typeof d=="object")for(var f in d)kv(t,e,r,d[f],s+"/"+l+"/"+fce(f),i,s,l,n,f)}else(l in Tu.keywords||t.allKeys&&!(l in Tu.skipKeywords))&&kv(t,e,r,d,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function fce(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var om=D(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.getSchemaRefs=ai.resolveUrl=ai.normalizeId=ai._getFullPath=ai.getFullPath=ai.inlineRef=void 0;var pce=Ct(),hce=n2(),mce=nj(),yce=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function gce(t,e=!0){return typeof t=="boolean"?!0:e===!0?!aA(t):e?ij(t)<=e:!1}ai.inlineRef=gce;var vce=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function aA(t){for(let e in t){if(vce.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(aA)||typeof r=="object"&&aA(r))return!0}return!1}function ij(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!yce.has(r)&&(typeof t[r]=="object"&&(0,pce.eachItem)(t[r],n=>e+=ij(n)),e===1/0))return 1/0}return e}function sj(t,e="",r){r!==!1&&(e=df(e));let n=t.parse(e);return oj(t,n)}ai.getFullPath=sj;function oj(t,e){return t.serialize(e).split("#")[0]+"#"}ai._getFullPath=oj;var bce=/#\/?$/;function df(t){return t?t.replace(bce,""):""}ai.normalizeId=df;function wce(t,e,r){return r=df(r),t.resolve(e,r)}ai.resolveUrl=wce;var Ece=/^[a-z_][-a-z0-9._]*$/i;function _ce(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=df(t[r]||e),i={"":s},o=sj(n,s,!1),a={},u=new Set;return mce(t,{allKeys:!0},(d,h,f,p)=>{if(p===void 0)return;let y=o+h,w=i[p];typeof d[r]=="string"&&(w=P.call(this,d[r])),C.call(this,d.$anchor),C.call(this,d.$dynamicAnchor),i[h]=w;function P(v){let k=this.opts.uriResolver.resolve;if(v=df(w?k(w,v):v),u.has(v))throw l(v);u.add(v);let I=this.refs[v];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?c(d,I.schema,v):v!==df(y)&&(v[0]==="#"?(c(d,a[v],v),a[v]=d):this.refs[v]=y),v}function C(v){if(typeof v=="string"){if(!Ece.test(v))throw new Error(`invalid anchor "${v}"`);P.call(this,`#${v}`)}}}),a;function c(d,h,f){if(h!==void 0&&!hce(d,h))throw l(f)}function l(d){return new Error(`reference "${d}" resolves to more than one schema`)}}ai.getSchemaRefs=_ce});var cm=D(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.getData=Fu.KeywordCxt=Fu.validateFunctionCode=void 0;var dj=LN(),aj=sm(),cA=eA(),Iv=sm(),Dce=JN(),um=QN(),uA=tj(),xe=ot(),Ve=Pa(),Sce=om(),Oa=Ct(),am=nm();function Ace(t){if(hj(t)&&(mj(t),pj(t))){Pce(t);return}fj(t,()=>(0,dj.topBoolOrEmptySchema)(t))}Fu.validateFunctionCode=Ace;function fj({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,xe._)`${Ve.default.data}, ${Ve.default.valCxt}`,n.$async,()=>{t.code((0,xe._)`"use strict"; ${uj(r,s)}`),Cce(t,s),t.code(i)}):t.func(e,(0,xe._)`${Ve.default.data}, ${xce(s)}`,n.$async,()=>t.code(uj(r,s)).code(i))}function xce(t){return(0,xe._)`{${Ve.default.instancePath}="", ${Ve.default.parentData}, ${Ve.default.parentDataProperty}, ${Ve.default.rootData}=${Ve.default.data}${t.dynamicRef?(0,xe._)`, ${Ve.default.dynamicAnchors}={}`:xe.nil}}={}`}function Cce(t,e){t.if(Ve.default.valCxt,()=>{t.var(Ve.default.instancePath,(0,xe._)`${Ve.default.valCxt}.${Ve.default.instancePath}`),t.var(Ve.default.parentData,(0,xe._)`${Ve.default.valCxt}.${Ve.default.parentData}`),t.var(Ve.default.parentDataProperty,(0,xe._)`${Ve.default.valCxt}.${Ve.default.parentDataProperty}`),t.var(Ve.default.rootData,(0,xe._)`${Ve.default.valCxt}.${Ve.default.rootData}`),e.dynamicRef&&t.var(Ve.default.dynamicAnchors,(0,xe._)`${Ve.default.valCxt}.${Ve.default.dynamicAnchors}`)},()=>{t.var(Ve.default.instancePath,(0,xe._)`""`),t.var(Ve.default.parentData,(0,xe._)`undefined`),t.var(Ve.default.parentDataProperty,(0,xe._)`undefined`),t.var(Ve.default.rootData,Ve.default.data),e.dynamicRef&&t.var(Ve.default.dynamicAnchors,(0,xe._)`{}`)})}function Pce(t){let{schema:e,opts:r,gen:n}=t;fj(t,()=>{r.$comment&&e.$comment&&gj(t),Tce(t),n.let(Ve.default.vErrors,null),n.let(Ve.default.errors,0),r.unevaluated&&Oce(t),yj(t),Rce(t)})}function Oce(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,xe._)`${r}.evaluated`),e.if((0,xe._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,xe._)`${t.evaluated}.props`,(0,xe._)`undefined`)),e.if((0,xe._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,xe._)`${t.evaluated}.items`,(0,xe._)`undefined`))}function uj(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,xe._)`/*# sourceURL=${r} */`:xe.nil}function kce(t,e){if(hj(t)&&(mj(t),pj(t))){Ice(t,e);return}(0,dj.boolOrEmptySchema)(t,e)}function pj({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function hj(t){return typeof t.schema!="boolean"}function Ice(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&gj(t),Fce(t),$ce(t);let i=n.const("_errs",Ve.default.errors);yj(t,i),n.var(e,(0,xe._)`${i} === ${Ve.default.errors}`)}function mj(t){(0,Oa.checkUnknownRules)(t),Bce(t)}function yj(t,e){if(t.opts.jtd)return cj(t,[],!1,e);let r=(0,aj.getSchemaTypes)(t.schema),n=(0,aj.coerceAndCheckDataType)(t,r);cj(t,r,!n,e)}function Bce(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Oa.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Tce(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Oa.checkStrictMode)(t,"default is ignored in the schema root")}function Fce(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,Sce.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function $ce(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function gj({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,xe._)`${Ve.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,xe.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,xe._)`${Ve.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Rce(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,xe._)`${Ve.default.errors} === 0`,()=>e.return(Ve.default.data),()=>e.throw((0,xe._)`new ${s}(${Ve.default.vErrors})`)):(e.assign((0,xe._)`${n}.errors`,Ve.default.vErrors),i.unevaluated&&Nce(t),e.return((0,xe._)`${Ve.default.errors} === 0`))}function Nce({gen:t,evaluated:e,props:r,items:n}){r instanceof xe.Name&&t.assign((0,xe._)`${e}.props`,r),n instanceof xe.Name&&t.assign((0,xe._)`${e}.items`,n)}function cj(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,Oa.schemaHasRulesButRef)(i,l))){s.block(()=>bj(t,"$ref",l.all.$ref.definition));return}u.jtd||jce(t,e),s.block(()=>{for(let h of l.rules)d(h);d(l.post)});function d(h){(0,cA.shouldUseGroup)(i,h)&&(h.type?(s.if((0,Iv.checkDataType)(h.type,o,u.strictNumbers)),lj(t,h),e.length===1&&e[0]===h.type&&r&&(s.else(),(0,Iv.reportTypeError)(t)),s.endIf()):lj(t,h),a||s.if((0,xe._)`${Ve.default.errors} === ${n||0}`))}}function lj(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,Dce.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,cA.shouldUseRule)(n,i)&&bj(t,i.keyword,i.definition,e.type)})}function jce(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(qce(t,e),t.opts.allowUnionTypes||Mce(t,e),Lce(t,t.dataTypes))}function qce(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{vj(t.dataTypes,r)||lA(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Vce(t,e)}}function Mce(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&lA(t,"use allowUnionTypes to allow union type keyword")}function Lce(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,cA.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>Uce(e,o))&&lA(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function Uce(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function vj(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Vce(t,e){let r=[];for(let n of t.dataTypes)vj(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function lA(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Oa.checkStrictMode)(t,e,t.opts.strictTypes)}var Bv=class{constructor(e,r,n){if((0,um.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Oa.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",wj(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,um.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Ve.default.errors))}result(e,r,n){this.failResult((0,xe.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,xe.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,xe._)`${r} !== undefined && (${(0,xe.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?am.reportExtraError:am.reportError)(this,this.def.error,r)}$dataError(){(0,am.reportError)(this,this.def.$dataError||am.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,am.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=xe.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=xe.nil,r=xe.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,xe.or)((0,xe._)`${s} === undefined`,r)),e!==xe.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==xe.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,xe.or)(o(),a());function o(){if(n.length){if(!(r instanceof xe.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,xe._)`${(0,Iv.checkDataTypes)(u,r,i.opts.strictNumbers,Iv.DataType.Wrong)}`}return xe.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,xe._)`!${u}(${r})`}return xe.nil}}subschema(e,r){let n=(0,uA.getSubschema)(this.it,e);(0,uA.extendSubschemaData)(n,this.it,e),(0,uA.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return kce(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Oa.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Oa.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,xe.Name)),!0}};Fu.KeywordCxt=Bv;function bj(t,e,r,n){let s=new Bv(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,um.funcKeywordCode)(s,r):"macro"in r?(0,um.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,um.funcKeywordCode)(s,r)}var Kce=/^\/(?:[^~]|~0|~1)*$/,Hce=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function wj(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return Ve.default.rootData;if(t[0]==="/"){if(!Kce.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Ve.default.rootData}else{let c=Hce.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,xe._)`${i}${(0,xe.getProperty)((0,Oa.unescapeJsonPointer)(c))}`,o=(0,xe._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}Fu.getData=wj});var Tv=D(fA=>{"use strict";Object.defineProperty(fA,"__esModule",{value:!0});var dA=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};fA.default=dA});var Fv=D(mA=>{"use strict";Object.defineProperty(mA,"__esModule",{value:!0});var pA=om(),hA=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,pA.resolveUrl)(e,r,n),this.missingSchema=(0,pA.normalizeId)((0,pA.getFullPath)(e,this.missingRef))}};mA.default=hA});var Rv=D(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.resolveSchema=ts.getCompilingSchema=ts.resolveRef=ts.compileSchema=ts.SchemaEnv=void 0;var Cs=ot(),Wce=Tv(),pl=Pa(),Ps=om(),Ej=Ct(),zce=cm(),ff=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Ps.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};ts.SchemaEnv=ff;function gA(t){let e=_j.call(this,t);if(e)return e;let r=(0,Ps.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Cs.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Wce.default,code:(0,Cs._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:pl.default.data,parentData:pl.default.parentData,parentDataProperty:pl.default.parentDataProperty,dataNames:[pl.default.data],dataPathArr:[Cs.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Cs.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Cs.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Cs._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,zce.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();l=`${o.scopeRefs(pl.default.scope)}return ${d}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let f=new Function(`${pl.default.self}`,`${pl.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:u,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:y}=c;f.evaluated={props:p instanceof Cs.Name?void 0:p,items:y instanceof Cs.Name?void 0:y,dynamicProps:p instanceof Cs.Name,dynamicItems:y instanceof Cs.Name},f.source&&(f.source.evaluated=(0,Cs.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),d}finally{this._compilations.delete(t)}}ts.compileSchema=gA;function Jce(t,e,r){var n;r=(0,Ps.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=Yce.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new ff({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Gce.call(this,i)}ts.resolveRef=Jce;function Gce(t){return(0,Ps.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:gA.call(this,t)}function _j(t){for(let e of this._compilations)if(Xce(e,t))return e}ts.getCompilingSchema=_j;function Xce(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Yce(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||$v.call(this,t,e)}function $v(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Ps._getFullPath)(this.opts.uriResolver,r),s=(0,Ps.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return yA.call(this,r,t);let i=(0,Ps.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=$v.call(this,t,o);return typeof a?.schema!="object"?void 0:yA.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||gA.call(this,o),i===(0,Ps.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,Ps.resolveUrl)(this.opts.uriResolver,s,c)),new ff({schema:a,schemaId:u,root:t,baseId:s})}return yA.call(this,r,o)}}ts.resolveSchema=$v;var Zce=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function yA(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,Ej.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!Zce.has(a)&&c&&(e=(0,Ps.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,Ej.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Ps.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=$v.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new ff({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var Dj=D((Bxe,Qce)=>{Qce.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Aj=D(vA=>{"use strict";Object.defineProperty(vA,"__esModule",{value:!0});var Sj=l_();Sj.code='require("ajv/dist/runtime/uri").default';vA.default=Sj});var Tj=D(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.CodeGen=bn.Name=bn.nil=bn.stringify=bn.str=bn._=bn.KeywordCxt=void 0;var ele=cm();Object.defineProperty(bn,"KeywordCxt",{enumerable:!0,get:function(){return ele.KeywordCxt}});var pf=ot();Object.defineProperty(bn,"_",{enumerable:!0,get:function(){return pf._}});Object.defineProperty(bn,"str",{enumerable:!0,get:function(){return pf.str}});Object.defineProperty(bn,"stringify",{enumerable:!0,get:function(){return pf.stringify}});Object.defineProperty(bn,"nil",{enumerable:!0,get:function(){return pf.nil}});Object.defineProperty(bn,"Name",{enumerable:!0,get:function(){return pf.Name}});Object.defineProperty(bn,"CodeGen",{enumerable:!0,get:function(){return pf.CodeGen}});var tle=Tv(),kj=Fv(),rle=QS(),lm=Rv(),nle=ot(),dm=om(),Nv=sm(),wA=Ct(),xj=Dj(),ile=Aj(),Ij=(t,e)=>new RegExp(t,e);Ij.code="new RegExp";var sle=["removeAdditional","useDefaults","coerceTypes"],ole=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ale={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ule={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Cj=200;function cle(t){var e,r,n,s,i,o,a,u,c,l,d,h,f,p,y,w,P,C,v,k,I,T,j,g,b;let E=t.strict,B=(e=t.code)===null||e===void 0?void 0:e.optimize,S=B===!0||B===void 0?1:B||0,N=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Ij,$=(s=t.uriResolver)!==null&&s!==void 0?s:ile.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:E)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:E)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:E)!==null&&l!==void 0?l:"log",strictTuples:(h=(d=t.strictTuples)!==null&&d!==void 0?d:E)!==null&&h!==void 0?h:"log",strictRequired:(p=(f=t.strictRequired)!==null&&f!==void 0?f:E)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:S,regExp:N}:{optimize:S,regExp:N},loopRequired:(y=t.loopRequired)!==null&&y!==void 0?y:Cj,loopEnum:(w=t.loopEnum)!==null&&w!==void 0?w:Cj,meta:(P=t.meta)!==null&&P!==void 0?P:!0,messages:(C=t.messages)!==null&&C!==void 0?C:!0,inlineRefs:(v=t.inlineRefs)!==null&&v!==void 0?v:!0,schemaId:(k=t.schemaId)!==null&&k!==void 0?k:"$id",addUsedSchema:(I=t.addUsedSchema)!==null&&I!==void 0?I:!0,validateSchema:(T=t.validateSchema)!==null&&T!==void 0?T:!0,validateFormats:(j=t.validateFormats)!==null&&j!==void 0?j:!0,unicodeRegExp:(g=t.unicodeRegExp)!==null&&g!==void 0?g:!0,int32range:(b=t.int32range)!==null&&b!==void 0?b:!0,uriResolver:$}}var fm=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...cle(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new nle.ValueScope({scope:{},prefixes:ole,es5:r,lines:n}),this.logger=mle(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,rle.getRules)(),Pj.call(this,ale,e,"NOT SUPPORTED"),Pj.call(this,ule,e,"DEPRECATED","warn"),this._metaOpts=ple.call(this),e.formats&&dle.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&fle.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),lle.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=xj;n==="id"&&(s={...xj},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,d){await i.call(this,l.$schema);let h=this._addSchema(l,d);return h.validate||o.call(this,h)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(d){if(!(d instanceof kj.default))throw d;return a.call(this,d),await u.call(this,d.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:d}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${d} cannot be resolved`)}async function u(l){let d=await c.call(this,l);this.refs[l]||await i.call(this,d.$schema),this.refs[l]||this.addSchema(d,l,r)}async function c(l){let d=this._loading[l];if(d)return d;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,dm.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=Oj.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new lm.SchemaEnv({schema:{},schemaId:n});if(r=lm.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Oj.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,dm.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(gle.call(this,n,r),!r)return(0,wA.eachItem)(n,i=>bA.call(this,i)),this;ble.call(this,r);let s={...r,type:(0,Nv.getJSONTypes)(r.type),schemaType:(0,Nv.getJSONTypes)(r.schemaType)};return(0,wA.eachItem)(n,s.type.length===0?i=>bA.call(this,i,s):i=>s.type.forEach(o=>bA.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=Bj(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,dm.normalizeId)(o||n);let c=dm.getSchemaRefs.call(this,e,n);return u=new lm.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):lm.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{lm.compileSchema.call(this,e)}finally{this.opts=r}}};bn.default=fm;fm.ValidationError=tle.default;fm.MissingRefError=kj.default;function Pj(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function Oj(t){return t=(0,dm.normalizeId)(t),this.schemas[t]||this.refs[t]}function lle(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function dle(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function fle(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function ple(){let t={...this.opts};for(let e of sle)delete t[e];return t}var hle={log(){},warn(){},error(){}};function mle(t){if(t===!1)return hle;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var yle=/^[a-z_$][a-z0-9_$:-]*$/i;function gle(t,e){let{RULES:r}=this;if((0,wA.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!yle.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function bA(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Nv.getJSONTypes)(e.type),schemaType:(0,Nv.getJSONTypes)(e.schemaType)}};e.before?vle.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function vle(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function ble(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=Bj(e)),t.validateSchema=this.compile(e,!0))}var wle={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Bj(t){return{anyOf:[t,wle]}}});var Fj=D(EA=>{"use strict";Object.defineProperty(EA,"__esModule",{value:!0});var Ele={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};EA.default=Ele});var jj=D(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.callRef=hl.getValidate=void 0;var _le=Fv(),$j=es(),ui=ot(),hf=Pa(),Rj=Rv(),jv=Ct(),Dle={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let l=Rj.resolveRef.call(u,c,s,r);if(l===void 0)throw new _le.default(n.opts.uriResolver,s,r);if(l instanceof Rj.SchemaEnv)return h(l);return f(l);function d(){if(i===c)return qv(t,o,i,i.$async);let p=e.scopeValue("root",{ref:c});return qv(t,(0,ui._)`${p}.validate`,c,c.$async)}function h(p){let y=Nj(t,p);qv(t,y,p,p.$async)}function f(p){let y=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,ui.stringify)(p)}:{ref:p}),w=e.name("valid"),P=t.subschema({schema:p,dataTypes:[],schemaPath:ui.nil,topSchemaRef:y,errSchemaPath:r},w);t.mergeEvaluated(P),t.ok(w)}}};function Nj(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,ui._)`${r.scopeValue("wrapper",{ref:e})}.validate`}hl.getValidate=Nj;function qv(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?hf.default.this:ui.nil;n?l():d();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,ui._)`await ${(0,$j.callValidateCode)(t,e,c)}`),f(e),o||s.assign(p,!0)},y=>{s.if((0,ui._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),h(y),o||s.assign(p,!1)}),t.ok(p)}function d(){t.result((0,$j.callValidateCode)(t,e,c),()=>f(e),()=>h(e))}function h(p){let y=(0,ui._)`${p}.errors`;s.assign(hf.default.vErrors,(0,ui._)`${hf.default.vErrors} === null ? ${y} : ${hf.default.vErrors}.concat(${y})`),s.assign(hf.default.errors,(0,ui._)`${hf.default.vErrors}.length`)}function f(p){var y;if(!i.opts.unevaluated)return;let w=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(w&&!w.dynamicProps)w.props!==void 0&&(i.props=jv.mergeEvaluated.props(s,w.props,i.props));else{let P=s.var("props",(0,ui._)`${p}.evaluated.props`);i.props=jv.mergeEvaluated.props(s,P,i.props,ui.Name)}if(i.items!==!0)if(w&&!w.dynamicItems)w.items!==void 0&&(i.items=jv.mergeEvaluated.items(s,w.items,i.items));else{let P=s.var("items",(0,ui._)`${p}.evaluated.items`);i.items=jv.mergeEvaluated.items(s,P,i.items,ui.Name)}}}hl.callRef=qv;hl.default=Dle});var qj=D(_A=>{"use strict";Object.defineProperty(_A,"__esModule",{value:!0});var Sle=Fj(),Ale=jj(),xle=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Sle.default,Ale.default];_A.default=xle});var Mj=D(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});var Mv=ot(),$u=Mv.operators,Lv={maximum:{okStr:"<=",ok:$u.LTE,fail:$u.GT},minimum:{okStr:">=",ok:$u.GTE,fail:$u.LT},exclusiveMaximum:{okStr:"<",ok:$u.LT,fail:$u.GTE},exclusiveMinimum:{okStr:">",ok:$u.GT,fail:$u.LTE}},Cle={message:({keyword:t,schemaCode:e})=>(0,Mv.str)`must be ${Lv[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Mv._)`{comparison: ${Lv[t].okStr}, limit: ${e}}`},Ple={keyword:Object.keys(Lv),type:"number",schemaType:"number",$data:!0,error:Cle,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Mv._)`${r} ${Lv[e].fail} ${n} || isNaN(${r})`)}};DA.default=Ple});var Lj=D(SA=>{"use strict";Object.defineProperty(SA,"__esModule",{value:!0});var pm=ot(),Ole={message:({schemaCode:t})=>(0,pm.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,pm._)`{multipleOf: ${t}}`},kle={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ole,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,pm._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,pm._)`${o} !== parseInt(${o})`;t.fail$data((0,pm._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};SA.default=kle});var Vj=D(AA=>{"use strict";Object.defineProperty(AA,"__esModule",{value:!0});function Uj(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}AA.default=Uj;Uj.code='require("ajv/dist/runtime/ucs2length").default'});var Kj=D(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0});var ml=ot(),Ile=Ct(),Ble=Vj(),Tle={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,ml.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ml._)`{limit: ${t}}`},Fle={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Tle,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?ml.operators.GT:ml.operators.LT,o=s.opts.unicode===!1?(0,ml._)`${r}.length`:(0,ml._)`${(0,Ile.useFunc)(t.gen,Ble.default)}(${r})`;t.fail$data((0,ml._)`${o} ${i} ${n}`)}};xA.default=Fle});var Hj=D(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0});var $le=es(),Uv=ot(),Rle={message:({schemaCode:t})=>(0,Uv.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Uv._)`{pattern: ${t}}`},Nle={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Rle,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Uv._)`(new RegExp(${s}, ${o}))`:(0,$le.usePattern)(t,n);t.fail$data((0,Uv._)`!${a}.test(${e})`)}};CA.default=Nle});var Wj=D(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0});var hm=ot(),jle={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,hm.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,hm._)`{limit: ${t}}`},qle={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:jle,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?hm.operators.GT:hm.operators.LT;t.fail$data((0,hm._)`Object.keys(${r}).length ${s} ${n}`)}};PA.default=qle});var zj=D(OA=>{"use strict";Object.defineProperty(OA,"__esModule",{value:!0});var mm=es(),ym=ot(),Mle=Ct(),Lle={message:({params:{missingProperty:t}})=>(0,ym.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,ym._)`{missingProperty: ${t}}`},Ule={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Lle,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:p}=t.it;for(let y of r)if(f?.[y]===void 0&&!p.has(y)){let w=o.schemaEnv.baseId+o.errSchemaPath,P=`required property "${y}" is not defined at "${w}" (strictRequired)`;(0,Mle.checkStrictMode)(o,P,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(ym.nil,d);else for(let f of r)(0,mm.checkReportMissingProp)(t,f)}function l(){let f=e.let("missing");if(u||i){let p=e.let("valid",!0);t.block$data(p,()=>h(f,p)),t.ok(p)}else e.if((0,mm.checkMissingProp)(t,r,f)),(0,mm.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,mm.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function h(f,p){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(p,(0,mm.propertyInData)(e,s,f,a.ownProperties)),e.if((0,ym.not)(p),()=>{t.error(),e.break()})},ym.nil)}}};OA.default=Ule});var Jj=D(kA=>{"use strict";Object.defineProperty(kA,"__esModule",{value:!0});var gm=ot(),Vle={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,gm.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,gm._)`{limit: ${t}}`},Kle={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Vle,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?gm.operators.GT:gm.operators.LT;t.fail$data((0,gm._)`${r}.length ${s} ${n}`)}};kA.default=Kle});var Gj=D(BA=>{"use strict";Object.defineProperty(BA,"__esModule",{value:!0});var IA=sm(),wn=ot(),Hle=Ct(),Wle=jd(),zle={message:({params:{i:t,j:e}})=>(0,wn.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,wn._)`{i: ${t}, j: ${e}}`},Jle={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:zle,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,IA.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,wn._)`${o} === false`),t.ok(u);function l(){let p=e.let("i",(0,wn._)`${r}.length`),y=e.let("j");t.setParams({i:p,j:y}),e.assign(u,!0),e.if((0,wn._)`${p} > 1`,()=>(d()?h:f)(p,y))}function d(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function h(p,y){let w=e.name("item"),P=(0,IA.checkDataTypes)(c,w,a.opts.strictNumbers,IA.DataType.Wrong),C=e.const("indices",(0,wn._)`{}`);e.for((0,wn._)`;${p}--;`,()=>{e.let(w,(0,wn._)`${r}[${p}]`),e.if(P,(0,wn._)`continue`),c.length>1&&e.if((0,wn._)`typeof ${w} == "string"`,(0,wn._)`${w} += "_"`),e.if((0,wn._)`typeof ${C}[${w}] == "number"`,()=>{e.assign(y,(0,wn._)`${C}[${w}]`),t.error(),e.assign(u,!1).break()}).code((0,wn._)`${C}[${w}] = ${p}`)})}function f(p,y){let w=(0,Hle.useFunc)(e,Wle.default),P=e.name("outer");e.label(P).for((0,wn._)`;${p}--;`,()=>e.for((0,wn._)`${y} = ${p}; ${y}--;`,()=>e.if((0,wn._)`${w}(${r}[${p}], ${r}[${y}])`,()=>{t.error(),e.assign(u,!1).break(P)})))}}};BA.default=Jle});var Xj=D(FA=>{"use strict";Object.defineProperty(FA,"__esModule",{value:!0});var TA=ot(),Gle=Ct(),Xle=jd(),Yle={message:"must be equal to constant",params:({schemaCode:t})=>(0,TA._)`{allowedValue: ${t}}`},Zle={keyword:"const",$data:!0,error:Yle,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,TA._)`!${(0,Gle.useFunc)(e,Xle.default)}(${r}, ${s})`):t.fail((0,TA._)`${i} !== ${r}`)}};FA.default=Zle});var Yj=D($A=>{"use strict";Object.defineProperty($A,"__esModule",{value:!0});var vm=ot(),Qle=Ct(),ede=jd(),tde={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,vm._)`{allowedValues: ${t}}`},rde={keyword:"enum",schemaType:"array",$data:!0,error:tde,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,Qle.useFunc)(e,ede.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);l=(0,vm.or)(...s.map((p,y)=>h(f,y)))}t.pass(l);function d(){e.assign(l,!1),e.forOf("v",i,f=>e.if((0,vm._)`${c()}(${r}, ${f})`,()=>e.assign(l,!0).break()))}function h(f,p){let y=s[p];return typeof y=="object"&&y!==null?(0,vm._)`${c()}(${r}, ${f}[${p}])`:(0,vm._)`${r} === ${y}`}}};$A.default=rde});var Zj=D(RA=>{"use strict";Object.defineProperty(RA,"__esModule",{value:!0});var nde=Mj(),ide=Lj(),sde=Kj(),ode=Hj(),ade=Wj(),ude=zj(),cde=Jj(),lde=Gj(),dde=Xj(),fde=Yj(),pde=[nde.default,ide.default,sde.default,ode.default,ade.default,ude.default,cde.default,lde.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},dde.default,fde.default];RA.default=pde});var jA=D(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.validateAdditionalItems=void 0;var yl=ot(),NA=Ct(),hde={message:({params:{len:t}})=>(0,yl.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,yl._)`{limit: ${t}}`},mde={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:hde,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,NA.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Qj(t,n)}};function Qj(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,yl._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,yl._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,NA.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,yl._)`${a} <= ${e.length}`);r.if((0,yl.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:NA.Type.Num},c),o.allErrors||r.if((0,yl.not)(c),()=>r.break())})}}bm.validateAdditionalItems=Qj;bm.default=mde});var qA=D(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.validateTuple=void 0;var e9=ot(),Vv=Ct(),yde=es(),gde={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return t9(t,"additionalItems",e);r.items=!0,!(0,Vv.alwaysValidSchema)(r,e)&&t.ok((0,yde.validateArray)(t))}};function t9(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Vv.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,e9._)`${i}.length`);r.forEach((d,h)=>{(0,Vv.alwaysValidSchema)(a,d)||(n.if((0,e9._)`${c} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},u)),t.ok(u))});function l(d){let{opts:h,errSchemaPath:f}=a,p=r.length,y=p===d.minItems&&(p===d.maxItems||d[e]===!1);if(h.strictTuples&&!y){let w=`"${o}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Vv.checkStrictMode)(a,w,h.strictTuples)}}}wm.validateTuple=t9;wm.default=gde});var r9=D(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0});var vde=qA(),bde={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,vde.validateTuple)(t,"items")};MA.default=bde});var i9=D(LA=>{"use strict";Object.defineProperty(LA,"__esModule",{value:!0});var n9=ot(),wde=Ct(),Ede=es(),_de=jA(),Dde={message:({params:{len:t}})=>(0,n9.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,n9._)`{limit: ${t}}`},Sde={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Dde,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,wde.alwaysValidSchema)(n,e)&&(s?(0,_de.validateAdditionalItems)(t,s):t.ok((0,Ede.validateArray)(t)))}};LA.default=Sde});var s9=D(UA=>{"use strict";Object.defineProperty(UA,"__esModule",{value:!0});var rs=ot(),Kv=Ct(),Ade={message:({params:{min:t,max:e}})=>e===void 0?(0,rs.str)`must contain at least ${t} valid item(s)`:(0,rs.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,rs._)`{minContains: ${t}}`:(0,rs._)`{minContains: ${t}, maxContains: ${e}}`},xde={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ade,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,rs._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Kv.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Kv.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Kv.alwaysValidSchema)(i,r)){let y=(0,rs._)`${l} >= ${o}`;a!==void 0&&(y=(0,rs._)`${y} && ${l} <= ${a}`),t.pass(y);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,rs._)`${s}.length > 0`,h)):(e.let(d,!1),h()),t.result(d,()=>t.reset());function h(){let y=e.name("_valid"),w=e.let("count",0);f(y,()=>e.if(y,()=>p(w)))}function f(y,w){e.forRange("i",0,l,P=>{t.subschema({keyword:"contains",dataProp:P,dataPropType:Kv.Type.Num,compositeRule:!0},y),w()})}function p(y){e.code((0,rs._)`${y}++`),a===void 0?e.if((0,rs._)`${y} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,rs._)`${y} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,rs._)`${y} >= ${o}`,()=>e.assign(d,!0)))}}};UA.default=xde});var u9=D(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.validateSchemaDeps=Ao.validatePropertyDeps=Ao.error=void 0;var VA=ot(),Cde=Ct(),Em=es();Ao.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,VA.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,VA._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var Pde={keyword:"dependencies",type:"object",schemaType:"object",error:Ao.error,code(t){let[e,r]=Ode(t);o9(t,e),a9(t,r)}};function Ode({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function o9(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,Em.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,Em.checkReportMissingProp)(t,c)}):(r.if((0,VA._)`${u} && (${(0,Em.checkMissingProp)(t,a,i)})`),(0,Em.reportMissingProp)(t,i),r.else())}}Ao.validatePropertyDeps=o9;function a9(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,Cde.alwaysValidSchema)(i,e[a])||(r.if((0,Em.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}Ao.validateSchemaDeps=a9;Ao.default=Pde});var l9=D(KA=>{"use strict";Object.defineProperty(KA,"__esModule",{value:!0});var c9=ot(),kde=Ct(),Ide={message:"property name must be valid",params:({params:t})=>(0,c9._)`{propertyName: ${t.propertyName}}`},Bde={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Ide,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,kde.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,c9.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};KA.default=Bde});var WA=D(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0});var Hv=es(),Os=ot(),Tde=Pa(),Wv=Ct(),Fde={message:"must NOT have additional properties",params:({params:t})=>(0,Os._)`{additionalProperty: ${t.additionalProperty}}`},$de={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Fde,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Wv.alwaysValidSchema)(o,r))return;let c=(0,Hv.allSchemaProperties)(n.properties),l=(0,Hv.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Os._)`${i} === ${Tde.default.errors}`);function d(){e.forIn("key",s,w=>{!c.length&&!l.length?p(w):e.if(h(w),()=>p(w))})}function h(w){let P;if(c.length>8){let C=(0,Wv.schemaRefOrVal)(o,n.properties,"properties");P=(0,Hv.isOwnProperty)(e,C,w)}else c.length?P=(0,Os.or)(...c.map(C=>(0,Os._)`${w} === ${C}`)):P=Os.nil;return l.length&&(P=(0,Os.or)(P,...l.map(C=>(0,Os._)`${(0,Hv.usePattern)(t,C)}.test(${w})`))),(0,Os.not)(P)}function f(w){e.code((0,Os._)`delete ${s}[${w}]`)}function p(w){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){f(w);return}if(r===!1){t.setParams({additionalProperty:w}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Wv.alwaysValidSchema)(o,r)){let P=e.name("valid");u.removeAdditional==="failing"?(y(w,P,!1),e.if((0,Os.not)(P),()=>{t.reset(),f(w)})):(y(w,P),a||e.if((0,Os.not)(P),()=>e.break()))}}function y(w,P,C){let v={keyword:"additionalProperties",dataProp:w,dataPropType:Wv.Type.Str};C===!1&&Object.assign(v,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(v,P)}}};HA.default=$de});var p9=D(JA=>{"use strict";Object.defineProperty(JA,"__esModule",{value:!0});var Rde=cm(),d9=es(),zA=Ct(),f9=WA(),Nde={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&f9.default.code(new Rde.KeywordCxt(i,f9.default,"additionalProperties"));let o=(0,d9.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=zA.mergeEvaluated.props(e,(0,zA.toHash)(o),i.props));let a=o.filter(d=>!(0,zA.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let u=e.name("valid");for(let d of a)c(d)?l(d):(e.if((0,d9.propertyInData)(e,s,d,i.opts.ownProperties)),l(d),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(u);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function l(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},u)}}};JA.default=Nde});var g9=D(GA=>{"use strict";Object.defineProperty(GA,"__esModule",{value:!0});var h9=es(),zv=ot(),m9=Ct(),y9=Ct(),jde={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,h9.allSchemaProperties)(r),u=a.filter(y=>(0,m9.alwaysValidSchema)(i,r[y]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof zv.Name)&&(i.props=(0,y9.evaluatedPropsToName)(e,i.props));let{props:d}=i;h();function h(){for(let y of a)c&&f(y),i.allErrors?p(y):(e.var(l,!0),p(y),e.if(l))}function f(y){for(let w in c)new RegExp(y).test(w)&&(0,m9.checkStrictMode)(i,`property ${w} matches pattern ${y} (use allowMatchingProperties)`)}function p(y){e.forIn("key",n,w=>{e.if((0,zv._)`${(0,h9.usePattern)(t,y)}.test(${w})`,()=>{let P=u.includes(y);P||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:w,dataPropType:y9.Type.Str},l),i.opts.unevaluated&&d!==!0?e.assign((0,zv._)`${d}[${w}]`,!0):!P&&!i.allErrors&&e.if((0,zv.not)(l),()=>e.break())})})}}};GA.default=jde});var v9=D(XA=>{"use strict";Object.defineProperty(XA,"__esModule",{value:!0});var qde=Ct(),Mde={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,qde.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};XA.default=Mde});var b9=D(YA=>{"use strict";Object.defineProperty(YA,"__esModule",{value:!0});var Lde=es(),Ude={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Lde.validateUnion,error:{message:"must match a schema in anyOf"}};YA.default=Ude});var w9=D(ZA=>{"use strict";Object.defineProperty(ZA,"__esModule",{value:!0});var Jv=ot(),Vde=Ct(),Kde={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Jv._)`{passingSchemas: ${t.passing}}`},Hde={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Kde,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,d)=>{let h;(0,Vde.alwaysValidSchema)(s,l)?e.var(u,!0):h=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},u),d>0&&e.if((0,Jv._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Jv._)`[${a}, ${d}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,d),h&&t.mergeEvaluated(h,Jv.Name)})})}}};ZA.default=Hde});var E9=D(QA=>{"use strict";Object.defineProperty(QA,"__esModule",{value:!0});var Wde=Ct(),zde={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,Wde.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};QA.default=zde});var S9=D(ex=>{"use strict";Object.defineProperty(ex,"__esModule",{value:!0});var Gv=ot(),D9=Ct(),Jde={message:({params:t})=>(0,Gv.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Gv._)`{failingKeyword: ${t.ifClause}}`},Gde={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Jde,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,D9.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=_9(n,"then"),i=_9(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,Gv.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,d){return()=>{let h=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(h,o),d?e.assign(d,(0,Gv._)`${l}`):t.setParams({ifClause:l})}}}};function _9(t,e){let r=t.schema[e];return r!==void 0&&!(0,D9.alwaysValidSchema)(t,r)}ex.default=Gde});var A9=D(tx=>{"use strict";Object.defineProperty(tx,"__esModule",{value:!0});var Xde=Ct(),Yde={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Xde.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};tx.default=Yde});var x9=D(rx=>{"use strict";Object.defineProperty(rx,"__esModule",{value:!0});var Zde=jA(),Qde=r9(),efe=qA(),tfe=i9(),rfe=s9(),nfe=u9(),ife=l9(),sfe=WA(),ofe=p9(),afe=g9(),ufe=v9(),cfe=b9(),lfe=w9(),dfe=E9(),ffe=S9(),pfe=A9();function hfe(t=!1){let e=[ufe.default,cfe.default,lfe.default,dfe.default,ffe.default,pfe.default,ife.default,sfe.default,nfe.default,ofe.default,afe.default];return t?e.push(Qde.default,tfe.default):e.push(Zde.default,efe.default),e.push(rfe.default),e}rx.default=hfe});var C9=D(nx=>{"use strict";Object.defineProperty(nx,"__esModule",{value:!0});var Cr=ot(),mfe={message:({schemaCode:t})=>(0,Cr.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Cr._)`{format: ${t}}`},yfe={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:mfe,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:d}=a;if(!u.validateFormats)return;s?h():f();function h(){let p=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),y=r.const("fDef",(0,Cr._)`${p}[${o}]`),w=r.let("fType"),P=r.let("format");r.if((0,Cr._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(w,(0,Cr._)`${y}.type || "string"`).assign(P,(0,Cr._)`${y}.validate`),()=>r.assign(w,(0,Cr._)`"string"`).assign(P,y)),t.fail$data((0,Cr.or)(C(),v()));function C(){return u.strictSchema===!1?Cr.nil:(0,Cr._)`${o} && !${P}`}function v(){let k=l.$async?(0,Cr._)`(${y}.async ? await ${P}(${n}) : ${P}(${n}))`:(0,Cr._)`${P}(${n})`,I=(0,Cr._)`(typeof ${P} == "function" ? ${k} : ${P}.test(${n}))`;return(0,Cr._)`${P} && ${P} !== true && ${w} === ${e} && !${I}`}}function f(){let p=d.formats[i];if(!p){C();return}if(p===!0)return;let[y,w,P]=v(p);y===e&&t.pass(k());function C(){if(u.strictSchema===!1){d.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function v(I){let T=I instanceof RegExp?(0,Cr.regexpCode)(I):u.code.formats?(0,Cr._)`${u.code.formats}${(0,Cr.getProperty)(i)}`:void 0,j=r.scopeValue("formats",{key:i,ref:I,code:T});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,Cr._)`${j}.validate`]:["string",I,j]}function k(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,Cr._)`await ${P}(${n})`}return typeof w=="function"?(0,Cr._)`${P}(${n})`:(0,Cr._)`${P}.test(${n})`}}}};nx.default=yfe});var P9=D(ix=>{"use strict";Object.defineProperty(ix,"__esModule",{value:!0});var gfe=C9(),vfe=[gfe.default];ix.default=vfe});var O9=D(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.contentVocabulary=mf.metadataVocabulary=void 0;mf.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];mf.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var I9=D(sx=>{"use strict";Object.defineProperty(sx,"__esModule",{value:!0});var bfe=qj(),wfe=Zj(),Efe=x9(),_fe=P9(),k9=O9(),Dfe=[bfe.default,wfe.default,(0,Efe.default)(),_fe.default,k9.metadataVocabulary,k9.contentVocabulary];sx.default=Dfe});var B9=D(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.DiscrError=void 0;var Sfe;(function(t){t.Tag="tag",t.Mapping="mapping"})(Sfe=_m.DiscrError||(_m.DiscrError={}))});var F9=D(ax=>{"use strict";Object.defineProperty(ax,"__esModule",{value:!0});var yf=ot(),ox=B9(),T9=Rv(),Afe=Ct(),xfe={message:({params:{discrError:t,tagName:e}})=>t===ox.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,yf._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Cfe={keyword:"discriminator",type:"object",schemaType:"object",error:xfe,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,yf._)`${r}${(0,yf.getProperty)(a)}`);e.if((0,yf._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:ox.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let f=h();e.if(!1);for(let p in f)e.elseIf((0,yf._)`${c} === ${p}`),e.assign(u,d(f[p]));e.else(),t.error(!1,{discrError:ox.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function d(f){let p=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:f},p);return t.mergeEvaluated(y,yf.Name),p}function h(){var f;let p={},y=P(s),w=!0;for(let k=0;k<o.length;k++){let I=o[k];I?.$ref&&!(0,Afe.schemaHasRulesButRef)(I,i.self.RULES)&&(I=T9.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,I?.$ref),I instanceof T9.SchemaEnv&&(I=I.schema));let T=(f=I?.properties)===null||f===void 0?void 0:f[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);w=w&&(y||P(I)),C(T,k)}if(!w)throw new Error(`discriminator: "${a}" must be required`);return p;function P({required:k}){return Array.isArray(k)&&k.includes(a)}function C(k,I){if(k.const)v(k.const,I);else if(k.enum)for(let T of k.enum)v(T,I);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function v(k,I){if(typeof k!="string"||k in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[k]=I}}}};ax.default=Cfe});var $9=D((bCe,Pfe)=>{Pfe.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Zv=D((hr,N9)=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.MissingRefError=hr.ValidationError=hr.CodeGen=hr.Name=hr.nil=hr.stringify=hr.str=hr._=hr.KeywordCxt=void 0;var Ofe=Tj(),kfe=I9(),Ife=F9(),R9=$9(),Bfe=["/properties"],Xv="http://json-schema.org/draft-07/schema",Yv=class extends Ofe.default{_addVocabularies(){super._addVocabularies(),kfe.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Ife.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(R9,Bfe):R9;this.addMetaSchema(e,Xv,!1),this.refs["http://json-schema.org/schema"]=Xv}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Xv)?Xv:void 0)}};N9.exports=hr=Yv;Object.defineProperty(hr,"__esModule",{value:!0});hr.default=Yv;var Tfe=cm();Object.defineProperty(hr,"KeywordCxt",{enumerable:!0,get:function(){return Tfe.KeywordCxt}});var gf=ot();Object.defineProperty(hr,"_",{enumerable:!0,get:function(){return gf._}});Object.defineProperty(hr,"str",{enumerable:!0,get:function(){return gf.str}});Object.defineProperty(hr,"stringify",{enumerable:!0,get:function(){return gf.stringify}});Object.defineProperty(hr,"nil",{enumerable:!0,get:function(){return gf.nil}});Object.defineProperty(hr,"Name",{enumerable:!0,get:function(){return gf.Name}});Object.defineProperty(hr,"CodeGen",{enumerable:!0,get:function(){return gf.CodeGen}});var Ffe=Tv();Object.defineProperty(hr,"ValidationError",{enumerable:!0,get:function(){return Ffe.default}});var $fe=Fv();Object.defineProperty(hr,"MissingRefError",{enumerable:!0,get:function(){return $fe.default}})});var V9=D(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.formatNames=xo.fastFormats=xo.fullFormats=void 0;function vf(t,e){return{validate:t,compare:e}}xo.fullFormats={date:vf(M9,lx),time:vf(L9,dx),"date-time":vf(qfe,U9),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Ufe,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Gfe,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Vfe,int32:{type:"number",validate:Wfe},int64:{type:"number",validate:zfe},float:{type:"number",validate:q9},double:{type:"number",validate:q9},password:!0,binary:!0};xo.fastFormats={...xo.fullFormats,date:vf(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,lx),time:vf(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,dx),"date-time":vf(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,U9),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};xo.formatNames=Object.keys(xo.fullFormats);function Rfe(t){return t%4===0&&(t%100!==0||t%400===0)}var Nfe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,jfe=[0,31,28,31,30,31,30,31,31,30,31,30,31];function M9(t){let e=Nfe.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&Rfe(r)?29:jfe[n])}function lx(t,e){if(t&&e)return t>e?1:t<e?-1:0}var ux=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function L9(t,e){let r=ux.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function dx(t,e){if(!(t&&e))return;let r=ux.exec(t),n=ux.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var cx=/t|\s/i;function qfe(t){let e=t.split(cx);return e.length===2&&M9(e[0])&&L9(e[1],!0)}function U9(t,e){if(!(t&&e))return;let[r,n]=t.split(cx),[s,i]=e.split(cx),o=lx(r,s);if(o!==void 0)return o||dx(n,i)}var Mfe=/\/|:/,Lfe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Ufe(t){return Mfe.test(t)&&Lfe.test(t)}var j9=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Vfe(t){return j9.lastIndex=0,j9.test(t)}var Kfe=-(2**31),Hfe=2**31-1;function Wfe(t){return Number.isInteger(t)&&t<=Hfe&&t>=Kfe}function zfe(t){return Number.isInteger(t)}function q9(){return!0}var Jfe=/[^\\]\\Z/;function Gfe(t){if(Jfe.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var K9=D(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});bf.formatLimitDefinition=void 0;var Xfe=Zv(),ks=ot(),Ru=ks.operators,Qv={formatMaximum:{okStr:"<=",ok:Ru.LTE,fail:Ru.GT},formatMinimum:{okStr:">=",ok:Ru.GTE,fail:Ru.LT},formatExclusiveMaximum:{okStr:"<",ok:Ru.LT,fail:Ru.GTE},formatExclusiveMinimum:{okStr:">",ok:Ru.GT,fail:Ru.LTE}},Yfe={message:({keyword:t,schemaCode:e})=>ks.str`should be ${Qv[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>ks._`{comparison: ${Qv[t].okStr}, limit: ${e}}`};bf.formatLimitDefinition={keyword:Object.keys(Qv),type:"string",schemaType:"string",$data:!0,error:Yfe,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new Xfe.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let h=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",ks._`${h}[${u.schemaCode}]`);t.fail$data(ks.or(ks._`typeof ${f} != "object"`,ks._`${f} instanceof RegExp`,ks._`typeof ${f}.compare != "function"`,d(f)))}function l(){let h=u.schema,f=a.formats[h];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${h}" does not define "compare" function`);let p=e.scopeValue("formats",{key:h,ref:f,code:o.code.formats?ks._`${o.code.formats}${ks.getProperty(h)}`:void 0});t.fail$data(d(p))}function d(h){return ks._`${h}.compare(${r}, ${n}) ${Qv[s].fail} 0`}},dependencies:["format"]};var Zfe=t=>(t.addKeyword(bf.formatLimitDefinition),t);bf.default=Zfe});var J9=D((Dm,z9)=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});var wf=V9(),Qfe=K9(),fx=ot(),H9=new fx.Name("fullFormats"),epe=new fx.Name("fastFormats"),px=(t,e={keywords:!0})=>{if(Array.isArray(e))return W9(t,e,wf.fullFormats,H9),t;let[r,n]=e.mode==="fast"?[wf.fastFormats,epe]:[wf.fullFormats,H9],s=e.formats||wf.formatNames;return W9(t,s,r,n),e.keywords&&Qfe.default(t),t};px.get=(t,e="full")=>{let n=(e==="fast"?wf.fastFormats:wf.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function W9(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=fx._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}z9.exports=Dm=px;Object.defineProperty(Dm,"__esModule",{value:!0});Dm.default=px});var X9=D(Ef=>{"use strict";var gx=Ef&&Ef.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ef,"__esModule",{value:!0});Ef.InputDescriptorFilterEvaluationHandler=void 0;var hx=Xi(),tpe=gx(Zv()),rpe=gx(J9()),G9=zr(),mx=gx(ws()),npe=Yi(),ipe=Zi(),yx=class extends ipe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FilterEvaluation"}handle(e,r){let n=hx.JSONPath.nodes(e,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(e,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=npe.JsonPathUtils.extractInputField(s.credential,o.value.path));let u=!1;for(let c of a)if(this.evaluateFilter(c,o.value)){u=!0;let l={result:Object.assign({},a[0]),valid:!0,format:s.format};this.getResults().push(Object.assign({},this.createResultObject(hx.JSONPath.stringify(o.path.slice(0,3)),i,l)))}if(!u)if(a.length){let c={result:Object.assign({},a[0]),valid:!1,format:s.format};this.createResponse(o,i,c,mx.default.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{let c={valid:!1,format:s.format};this.createResponse(o,i,c,mx.default.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(e)}createNoFieldResults(e,r,n){e.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,u;return((o=i.inDesc.constraints)===null||o===void 0?void 0:o.fields)===void 0||((u=(a=i.inDesc.constraints)===null||a===void 0?void 0:a.fields)===null||u===void 0?void 0:u.length)===0}).forEach(i=>{let o={result:[],valid:!0,format:n.format};this.getResults().push(Object.assign({},this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)))})}createResponse(e,r,n,s){this.getResults().push(Object.assign(Object.assign({},this.createResultObject(hx.JSONPath.stringify(e.path.slice(0,3)),r,n)),{status:G9.Status.ERROR,message:s}))}createResultObject(e,r,n){return{input_descriptor_path:e,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:G9.Status.INFO,message:mx.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(e,r){var n;!((n=r.filter)===null||n===void 0)&&n.format&&r.filter.format==="date"&&this.transformDateFormat(e);let s=new tpe.default({verbose:!0,code:{source:!0,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});return(0,rpe.default)(s),r.filter?s.validate(r.filter,e.value):!0}transformDateFormat(e){let r=new Date(e.value),n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),e.value=r.getUTCFullYear()+"-"+n+"-"+s,e.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}};Ef.InputDescriptorFilterEvaluationHandler=yx});var Z9=D(Y9=>{"use strict";Object.defineProperty(Y9,"__esModule",{value:!0})});var eq=D(Q9=>{"use strict";Object.defineProperty(Q9,"__esModule",{value:!0})});var rq=D(tq=>{"use strict";Object.defineProperty(tq,"__esModule",{value:!0})});var iq=D(nq=>{"use strict";Object.defineProperty(nq,"__esModule",{value:!0})});var oq=D(sq=>{"use strict";Object.defineProperty(sq,"__esModule",{value:!0})});var uq=D(aq=>{"use strict";Object.defineProperty(aq,"__esModule",{value:!0})});var cq=D(eb=>{"use strict";Object.defineProperty(eb,"__esModule",{value:!0});eb.Directives=void 0;eb.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"}});var lq=D(tb=>{"use strict";Object.defineProperty(tb,"__esModule",{value:!0});tb.ExchangeStatus=void 0;tb.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"}});var fq=D(dq=>{"use strict";Object.defineProperty(dq,"__esModule",{value:!0})});var hq=D(pq=>{"use strict";Object.defineProperty(pq,"__esModule",{value:!0})});var yq=D(mq=>{"use strict";Object.defineProperty(mq,"__esModule",{value:!0})});var vq=D(gq=>{"use strict";Object.defineProperty(gq,"__esModule",{value:!0})});var wq=D(bq=>{"use strict";Object.defineProperty(bq,"__esModule",{value:!0})});var _q=D(Eq=>{"use strict";Object.defineProperty(Eq,"__esModule",{value:!0})});var Sq=D(Dq=>{"use strict";Object.defineProperty(Dq,"__esModule",{value:!0})});var xq=D(Aq=>{"use strict";Object.defineProperty(Aq,"__esModule",{value:!0})});var Pq=D(Cq=>{"use strict";Object.defineProperty(Cq,"__esModule",{value:!0})});var kq=D(Oq=>{"use strict";Object.defineProperty(Oq,"__esModule",{value:!0})});var Bq=D(Iq=>{"use strict";Object.defineProperty(Iq,"__esModule",{value:!0})});var Fq=D(Tq=>{"use strict";Object.defineProperty(Tq,"__esModule",{value:!0})});var Rq=D($q=>{"use strict";Object.defineProperty($q,"__esModule",{value:!0})});var jq=D(Nq=>{"use strict";Object.defineProperty(Nq,"__esModule",{value:!0})});var Mq=D(qq=>{"use strict";Object.defineProperty(qq,"__esModule",{value:!0})});var Uq=D(Lq=>{"use strict";Object.defineProperty(Lq,"__esModule",{value:!0})});var Vq=D(rb=>{"use strict";Object.defineProperty(rb,"__esModule",{value:!0});rb.Optionality=void 0;rb.Optionality={Required:"required",Preferred:"preferred"}});var Hq=D(Kq=>{"use strict";Object.defineProperty(Kq,"__esModule",{value:!0})});var zq=D(Wq=>{"use strict";Object.defineProperty(Wq,"__esModule",{value:!0})});var Gq=D(Jq=>{"use strict";Object.defineProperty(Jq,"__esModule",{value:!0})});var Yq=D(Xq=>{"use strict";Object.defineProperty(Xq,"__esModule",{value:!0})});var Qq=D(Zq=>{"use strict";Object.defineProperty(Zq,"__esModule",{value:!0})});var tM=D(eM=>{"use strict";Object.defineProperty(eM,"__esModule",{value:!0})});var nM=D(rM=>{"use strict";Object.defineProperty(rM,"__esModule",{value:!0})});var sM=D(iM=>{"use strict";Object.defineProperty(iM,"__esModule",{value:!0})});var aM=D(oM=>{"use strict";Object.defineProperty(oM,"__esModule",{value:!0})});var uM=D(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0});nb.Rules=void 0;nb.Rules={All:"all",Pick:"pick"}});var lM=D(cM=>{"use strict";Object.defineProperty(cM,"__esModule",{value:!0})});var fM=D(dM=>{"use strict";Object.defineProperty(dM,"__esModule",{value:!0})});var pM=D(ib=>{"use strict";Object.defineProperty(ib,"__esModule",{value:!0});ib.Status=void 0;ib.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"}});var mM=D(hM=>{"use strict";Object.defineProperty(hM,"__esModule",{value:!0})});var gM=D(yM=>{"use strict";Object.defineProperty(yM,"__esModule",{value:!0})});var bM=D(vM=>{"use strict";Object.defineProperty(vM,"__esModule",{value:!0})});var EM=D(wM=>{"use strict";Object.defineProperty(wM,"__esModule",{value:!0})});var _M=D(Ne=>{"use strict";var spe=Ne&&Ne.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ge=Ne&&Ne.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&spe(e,t,r)};Object.defineProperty(Ne,"__esModule",{value:!0});Ge(Z9(),Ne);Ge(eq(),Ne);Ge(rq(),Ne);Ge(iq(),Ne);Ge(oq(),Ne);Ge(uq(),Ne);Ge(cq(),Ne);Ge(lq(),Ne);Ge(fq(),Ne);Ge(hq(),Ne);Ge(yq(),Ne);Ge(vq(),Ne);Ge(wq(),Ne);Ge(_q(),Ne);Ge(Sq(),Ne);Ge(xq(),Ne);Ge(Pq(),Ne);Ge(kq(),Ne);Ge(Bq(),Ne);Ge(Fq(),Ne);Ge(Rq(),Ne);Ge(jq(),Ne);Ge(Mq(),Ne);Ge(Uq(),Ne);Ge(Vq(),Ne);Ge(Hq(),Ne);Ge(zq(),Ne);Ge(Gq(),Ne);Ge(Yq(),Ne);Ge(Qq(),Ne);Ge(tM(),Ne);Ge(nM(),Ne);Ge(sM(),Ne);Ge(aM(),Ne);Ge(uM(),Ne);Ge(lM(),Ne);Ge(fM(),Ne);Ge(pM(),Ne);Ge(mM(),Ne);Ge(gM(),Ne);Ge(bM(),Ne);Ge(EM(),Ne)});var ka=D(gl=>{"use strict";var ope=gl&&gl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ape=gl&&gl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&ope(e,t,r)};Object.defineProperty(gl,"__esModule",{value:!0});ape(_M(),gl)});var DM=D(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});ob.SubjectIsHolderEvaluationHandler=void 0;var Nu=Xi(),sb=ka(),vl=zr(),upe=Zi(),vx=class extends upe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(vl.Status.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(vl.Status.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(vl.Status.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(e,r){this.findIsHolderFieldIdsToInputDescriptorsSets(e),this.findAllCredentialSubjects(r),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,vl.Status.INFO,sb.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,vl.Status.WARN,sb.Optionality.Preferred),this.updatePresentationSubmission(e)}findIsHolderFieldIdsToInputDescriptorsSets(e){var r;this.fieldIds.push(...Nu.JSONPath.nodes(e,"$..fields[*].id")),this.isHolder.push(...Nu.JSONPath.nodes(e,"$..is_holder[*]"));let n=(r=this.fieldIds)===null||r===void 0?void 0:r.map(i=>i.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,sb.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,sb.Optionality.Required)),s.forEach(i=>this.getResults().push(this.createResult(i[1],i[0],["",{}],vl.Status.ERROR,void 0)))}evaluateFields(e,r,n,s){let i=[];return r.filter(o=>o.value.directive===s).filter(o=>o.value.field_id.every(a=>n.includes(a))).forEach(o=>e.set(Nu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id)),r.filter(o=>o.value.directive===s).filter(o=>!o.value.field_id.every(a=>n.includes(a))).forEach(o=>i.push([Nu.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id])),i}findAllCredentialSubjects(e){let r=Nu.JSONPath.nodes(e.map(n=>n.credential),"$..credentialSubject");for(let n=0;n<r.length;n++){let s=r[n],i=Nu.JSONPath.stringify(s.path.slice(0,2));this.credentialsSubjectsByPath.set(i,s.value),this.credentialsByPath.set(i,e[n])}}confirmAllFieldSetHasSameSubject(e,r,n){let s=Array.from(e).flatMap(u=>Array.from(this.credentialsSubjectsByPath).filter(c=>u[1].find(l=>Object.keys(c[1]).includes(l)))),i=this.mapCredentialPathsToInputDescriptors(n),o=Array.from(s).flatMap(u=>Object.keys(u[1]).filter(c=>c!=="id")),a=Array.from(e.values()).flatMap(u=>u.every(c=>o.includes(c)))[0];s.forEach(u=>{let c=i.get(u[0]);a&&u[1].id&&this.client.dids.includes(u[1].id)?this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,r,this.credentialsByPath.get(u[0]))):this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,vl.Status.ERROR,this.credentialsByPath.get(u[0])))})}mapCredentialPathsToInputDescriptors(e){var r;let n=new Map;return(r=this.fieldIds)===null||r===void 0||r.forEach(s=>{let i=Nu.JSONPath.stringify(s.path.slice(0,3));this.credentialsSubjectsByPath.forEach((o,a)=>{let u=this.isHolder.find(c=>Nu.JSONPath.stringify(c.path.slice(0,3))===i);Object.keys(o).includes(s.value)&&u?.value.directive===e&&n.set(a,i)})}),n}createResult(e,r,n,s,i,o){return{input_descriptor_path:r,verifiable_credential_path:n[0],evaluator:this.getName(),status:s,payload:Object.assign({fieldIdSet:e,credentialSubject:n[1]},i?{format:i.format}:{}),message:o??this.messages.get(s)}}};ob.SubjectIsHolderEvaluationHandler=vx});var SM=D(_f=>{"use strict";var cpe=_f&&_f.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_f,"__esModule",{value:!0});_f.LimitDisclosureEvaluationHandler=void 0;var ab=ka(),ub=zr(),bx=cpe(ws()),lpe=Yi(),dpe=Zi(),wx=class extends dpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"LimitDisclosureEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{var i,o,a;!((i=n.constraints)===null||i===void 0)&&i.fields&&(((o=n.constraints)===null||o===void 0?void 0:o.limit_disclosure)===ab.Optionality.Required||((a=n.constraints)===null||a===void 0?void 0:a.limit_disclosure)===ab.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(e,r,n,s){let i=this.client.limitDisclosureSignatureSuites,o=e.decoded.proof;return!o||Array.isArray(o)||!o.type?!1:i?.includes(o.type)?!0:(s==ab.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(e,r,n){let s=r?.fields,i=r.limit_disclosure;e.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o.credential,s,n,a,e,i)})}enforceLimitDisclosure(e,r,n,s,i,o){let a=this.createVcWithRequiredFields(e,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}createVcWithRequiredFields(e,r,n,s){let i={};i=Object.assign(i,e),i.credentialSubject={};for(let o of r)if(o.path){let a=lpe.JsonPathUtils.extractInputField(e,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],e,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(e,r,n){let s=Object.assign({},r.credentialSubject);return e.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject=Object.assign(Object.assign({},n.credentialSubject),s),n}createSuccessResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===ab.Optionality.Required?ub.Status.INFO:ub.Status.WARN,message:bx.default.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:ub.Status.ERROR,message:bx.default.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(e,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:ub.Status.ERROR,message:bx.default.LIMIT_DISCLOSURE_NOT_SUPPORTED})}};_f.LimitDisclosureEvaluationHandler=wx});var xM=D(Df=>{"use strict";var fpe=Df&&Df.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Df,"__esModule",{value:!0});Df.MarkForSubmissionEvaluationHandler=void 0;var ppe=Xi(),Ex=zr(),AM=fpe(ws()),hpe=Zi(),_x=class extends hpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"MarkForSubmissionEvaluation"}handle(e,r){let n=[...this.getResults()],s=n.filter(o=>o.status===Ex.Status.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,e)}retrieveNoErrorStatus(e,r){return e.filter(s=>s.status!==Ex.Status.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(e,r){this.removeDuplicate(e).forEach(n=>{let i=ppe.JSONPath.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:Ex.Status.INFO,payload:{group:i},message:AM.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(e){this.removeDuplicate(e).forEach(r=>{let n=Object.assign({},r.payload);n.evaluator=r.evaluator,this.getResults().push(Object.assign(Object.assign({},r),{evaluator:this.getName(),message:AM.default.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}))})}};Df.MarkForSubmissionEvaluationHandler=_x});var CM=D(Sf=>{"use strict";var mpe=Sf&&Sf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sf,"__esModule",{value:!0});Sf.PredicateRelatedFieldEvaluationHandler=void 0;var ype=ka(),gpe=zr(),vpe=mpe(ws()),bpe=Zi(),Dx=class extends bpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"PredicateRelatedFieldEvaluation"}handle(e){e.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(e,r){if(r?.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,e,r,n)}examinePredicateForFilterEvaluationResult(e,r,n,s,i){var o;let a=this.retrieveResultInputDescriptorIdx(e[r].input_descriptor_path);if(e[r].payload&&e[r].payload.result&&e[r].payload.result.path&&e[r].evaluator==="FilterEvaluation"&&n===a&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&(!((o=s.fields[i].path)===null||o===void 0)&&o.includes(this.concatenatePath(e[r].payload.result.path)))){let u=Object.assign({},e[r].payload.result),c=this.createResultObject(n,r,u,e);s.fields[i].predicate===ype.Optionality.Required||(c.payload.value=!0),e.push(c)}}retrieveResultInputDescriptorIdx(e){let r="$.input_descriptors[",n=e.indexOf(r),s=e.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(e){let r="";for(let n=0;n<e.length;n++)typeof e[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=e[n]+".";return r.substring(0,r.length-1)}createResultObject(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:gpe.Status.INFO,message:vpe.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}};Sf.PredicateRelatedFieldEvaluationHandler=Dx});var OM=D(cb=>{"use strict";Object.defineProperty(cb,"__esModule",{value:!0});cb.SameSubjectEvaluationHandler=void 0;var ju=Xi(),PM=ka(),Ia=zr(),wpe=Zi(),Sx=class extends wpe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(Ia.Status.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(Ia.Status.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(Ia.Status.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(e,r){let n=this.mapSameSubjectFieldIdsToInputDescriptors(e),s=this.mapCredentialsToResultObjecs(r,n),i=this.countSameSubjectOccurrences(n,s);this.generateErrorResults(i,s),this.updatePresentationSubmission(e)}mapSameSubjectFieldIdsToInputDescriptors(e){this.fieldIds.push(...ju.JSONPath.nodes(e,"$..fields[*].id")),this.sameSubject.push(...ju.JSONPath.nodes(e,"$..same_subject[*]"));let r=[];return this.fieldIds.forEach(n=>{let s=this.sameSubject.find(i=>i.value.field_id.includes(n.value));s&&r.push([n,s])}),r}generateErrorResults(e,r){e.forEach((n,s)=>{let i=r.filter(o=>s===o.payload.fieldIdSet).map(o=>o.payload.credentialSubject.id);(i.length!==n||new Set(i).size!==1)&&r.forEach((o,a,u)=>{o.payload.fieldIdSet===s&&(o.status=Ia.Status.ERROR,o.message=this.messages.get(Ia.Status.ERROR),u[a]=o)})}),this.client.results.push(...r)}countSameSubjectOccurrences(e,r){let n=new Map;return e.forEach(s=>{r.filter(o=>s[1].value.field_id===o.payload.fieldIdSet)&&(n.has(s[1].value.field_id)&&n.get(s[1].value.field_id)?n.set(s[1].value.field_id,n.get(s[1].value.field_id)+1):n.set(s[1].value.field_id,1))}),n}mapCredentialsToResultObjecs(e,r){let n=[...ju.JSONPath.nodes(e.map(i=>i.credential),"$..credentialSubject")],s=[];return n.forEach(i=>{let o=r.find(a=>ju.JSONPath.query(i.value,`$..${a[0].value}`).length!==0);o&&o[1].value.directive===PM.Optionality.Required?s.push({input_descriptor_path:ju.JSONPath.stringify(o[0].path.slice(0,3)),status:Ia.Status.INFO,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Ia.Status.INFO),verifiable_credential_path:ju.JSONPath.stringify(i.path.slice(0,2))}):o&&o[1].value.directive===PM.Optionality.Preferred&&s.push({input_descriptor_path:ju.JSONPath.stringify(o[0].path.slice(0,3)),status:Ia.Status.WARN,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Ia.Status.WARN),verifiable_credential_path:ju.JSONPath.stringify(i.path.slice(0,2))})}),s}};cb.SameSubjectEvaluationHandler=Sx});var TM=D(Af=>{"use strict";var Epe=Af&&Af.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Af,"__esModule",{value:!0});Af.SubjectIsIssuerEvaluationHandler=void 0;var _pe=ka(),kM=cg(),IM=zr(),BM=Epe(ws()),Ax=Yi(),Dpe=Zi(),xx=class extends Dpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"SubjectIsIssuerEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{let i=n.constraints;i?.subject_is_issuer===_pe.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(e)}checkSubjectIsIssuer(e,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===e){let i=Ax.JsonPathUtils.extractInputField(r.map(o=>o.credential),[s.path]);for(let o of i){let a=(0,Ax.getIssuerString)(o.value);o&&o.value&&(0,Ax.getSubjectIdsAsString)(o.value).every(u=>u===a)?this.getResults().push(this.generateSuccessResult(n,s.path,kM.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,kM.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:IM.Status.ERROR,message:BM.default.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:IM.Status.INFO,message:s??BM.default.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}};Af.SubjectIsIssuerEvaluationHandler=xx});var FM,$M=Ot(()=>{FM="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var jM={};Zt(jM,{customAlphabet:()=>Spe,customRandom:()=>NM,nanoid:()=>Ape,random:()=>RM,urlAlphabet:()=>FM});var RM,NM,Spe,Ape,qM=Ot(()=>{$M();RM=t=>crypto.getRandomValues(new Uint8Array(t)),NM=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let a=r(s),u=s;for(;u--;)if(o+=t[a[u]&n]||"",o.length===i)return o}}},Spe=(t,e=21)=>NM(t,e,RM),Ape=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")});var MM=D(xf=>{"use strict";var xpe=xf&&xf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xf,"__esModule",{value:!0});xf.UriEvaluationHandler=void 0;var Cpe=Xi(),Ppe=(qM(),Yf(jM)),Sm=zr(),Cx=nl(),lb=xpe(ws()),Ope=Zi(),Is=class extends Ope.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"UriEvaluation"}handle(e,r){e.input_descriptors.forEach((s,i)=>{let o=e.getVersion()!==Cx.PEVersion.v2?s.schema.map(a=>a.uri):[];r.forEach((a,u)=>{let c=Is.buildVcContextAndSchemaUris(a.credential,e.getVersion());this.evaluateUris(a,c,o,i,u,e.getVersion())})});let n=this.getResults().filter(s=>s.status===Sm.Status.INFO).map(s=>{var i;return{id:Cpe.JSONPath.nodes(e,s.input_descriptor_path)[0].value.id,format:(i=s.payload)===null||i===void 0?void 0:i.format,path:s.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:(0,Ppe.nanoid)(),definition_id:e.id,descriptor_map:n})}evaluateUris(e,r,n,s,i,o){let a=!1;if(o===Cx.PEVersion.v1){for(let u=0;u<n.length;u++)Is.containsHashlink(n[u])&&this.getResults().push(this.createWarnResultObject(s,i));for(let u=0;u<r.length;u++)n.find(c=>c===r[u])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(e,n,s,i)):this.getResults().push(this.createErrorResultObject(e,n,s,i))}static buildVcContextAndSchemaUris(e,r){let n=[];return Array.isArray(e["@context"])?e["@context"].forEach(s=>n.push(s)):n.push(e["@context"]),Array.isArray(e.credentialSchema)&&e.credentialSchema.length>0?e.credentialSchema.forEach(s=>n.push(s.id)):e.credentialSchema&&n.push(e.credentialSchema.id),r===Cx.PEVersion.v1&&(Array.isArray(e.type)?e.type.forEach(s=>n.push(s)):e.type&&n.push(e.type)),n}createSuccessResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=Sm.Status.INFO,i.message=lb.default.URI_EVALUATION_PASSED,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createErrorResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=Sm.Status.ERROR,i.message=lb.default.URI_EVALUATION_DIDNT_PASS,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createWarnResultObject(e,r){let n=this.createResult(e,r);return n.status=Sm.Status.WARN,n.message=lb.default.URI_EVALUATION_DIDNT_PASS,n.payload=lb.default.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(e,r){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:Sm.Status.INFO,message:void 0}}static containsHashlink(e){return!(this.matchAll(e,Is.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(e,Is.HASHLINK_URL_ENCODED_REGEX).next().done)}};xf.UriEvaluationHandler=Is;Is.matchAll=uS();Is.HASHLINK_URL_ENCODED_REGEX=/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g;Is.HASHLINK_QUERY_URL_REGEX=/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g});var VM=D(Cf=>{"use strict";var kpe=Cf&&Cf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cf,"__esModule",{value:!0});Cf.FormatRestrictionEvaluationHandler=void 0;var LM=zr(),UM=kpe(ws()),Ipe=Zi(),Px=class extends Ipe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FormatRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{!this.client.restrictToFormats||Object.keys(this.client.restrictToFormats).includes(i.format)?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${i.format} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:LM.Status.ERROR,message:UM.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:LM.Status.INFO,message:s??UM.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Cf.FormatRestrictionEvaluationHandler=Px});var WM=D(Pf=>{"use strict";var Bpe=Pf&&Pf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pf,"__esModule",{value:!0});Pf.DIDRestrictionEvaluationHandler=void 0;var KM=zr(),HM=Bpe(ws()),Tpe=Yi(),Fpe=Zi(),Ox=class extends Fpe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"DIDRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{let a=typeof i.credential.issuer=="object"?i.credential.issuer.id:i.credential.issuer;!this.client.hasRestrictToDIDMethods()||!a||(0,Tpe.isRestrictedDID)(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:KM.Status.ERROR,message:HM.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:KM.Status.INFO,message:s??HM.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Pf.DIDRestrictionEvaluationHandler=Ox});var zM=D(on=>{"use strict";var $pe=on&&on.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ns=on&&on.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&$pe(e,t,r)};Object.defineProperty(on,"__esModule",{value:!0});ns(Zi(),on);ns(SN(),on);ns(X9(),on);ns(DM(),on);ns(SM(),on);ns(xM(),on);ns(CM(),on);ns(OM(),on);ns(TM(),on);ns(MM(),on);ns(VM(),on);ns(WM(),on)});var Bx=D(Of=>{"use strict";var Rpe=Of&&Of.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Of,"__esModule",{value:!0});Of.EvaluationClient=void 0;var Npe=cg(),jpe=zr(),qpe=Rpe(ws()),kx=Yi(),Co=zM(),JM=[Npe.IProofType.BbsBlsSignatureProof2020],Ix=class{constructor(){this.failed_catched={tag:"root",status:jpe.Status.ERROR,message:qpe.default.UNKNOWN_EXCEPTION,stacktrace:""},this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=JM,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(e,r,n){this._restrictToDIDMethods=n?.restrictToDIDMethods?(0,kx.uniformDIDMethods)(n?.restrictToDIDMethods):[],this._dids=n?.holderDIDs?(0,kx.filterToRestrictedDIDs)(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n?.limitDisclosureSignatureSuites,this._restrictToFormats=n?.restrictToFormats,this._generatePresentationSubmission=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:!0,n?.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s?.handle(e,r);s?.hasNext();){s=s.getNext();try{s?.handle(e,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(e){this._dids=e}assertPresentationSubmission(){if(!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(e){this._generatePresentationSubmission=e}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(e){this._presentationSubmission=e}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(e){this._wrappedVcs=e}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||JM}set limitDisclosureSignatureSuites(e){this._limitDisclosureSignatureSuites=e}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(e){this._restrictToDIDMethods=(0,kx.uniformDIDMethods)(e)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(e){this._restrictToFormats=e}initEvaluationHandlers(){let e=new Co.UriEvaluationHandler(this);return e.setNext(new Co.DIDRestrictionEvaluationHandler(this)).setNext(new Co.FormatRestrictionEvaluationHandler(this)).setNext(new Co.InputDescriptorFilterEvaluationHandler(this)).setNext(new Co.PredicateRelatedFieldEvaluationHandler(this)).setNext(new Co.LimitDisclosureEvaluationHandler(this)).setNext(new Co.SubjectIsIssuerEvaluationHandler(this)).setNext(new Co.SubjectIsHolderEvaluationHandler(this)).setNext(new Co.SameSubjectEvaluationHandler(this)).setNext(new Co.MarkForSubmissionEvaluationHandler(this)),e}};Of.EvaluationClient=Ix});var GM=D(pb=>{"use strict";Object.defineProperty(pb,"__esModule",{value:!0});pb.EvaluationClientWrapper=void 0;var db=Xi(),kf=ka(),Ke=zr(),fb=Yi(),Mpe=Bx(),Tx=class{constructor(){this._client=new Mpe.EvaluationClient}getEvaluationClient(){return this._client}selectFrom(e,r,n){var s;let i;this._client.evaluate(e,r,n);let o=[...this.formatNotInfo(Ke.Status.WARN)],a=[...this.formatNotInfo(Ke.Status.ERROR)];if(e.submission_requirements){let u=this._client.results.filter(p=>p.evaluator==="MarkForSubmissionEvaluation"&&p.payload.group&&p.status!==Ke.Status.ERROR),c=Array.from(new Set(u)),l;try{l=this.matchSubmissionRequirements(e,e.submission_requirements,c)}catch(p){let y={status:Ke.Status.ERROR,message:JSON.stringify(p),tag:"matchSubmissionRequirements"};return{errors:a?[...a,y]:[y],warnings:o,areRequiredCredentialsPresent:Ke.Status.ERROR}}let h=this.extractMatches(l).map(p=>db.JSONPath.nodes(this._client.wrappedVcs.map(y=>y.original),p)[0].value),f=this.determineAreRequiredCredentialsPresent(e,l);i={errors:f===Ke.Status.INFO?[]:a,matches:[...l],areRequiredCredentialsPresent:f,verifiableCredential:h,warnings:o}}else{let u=this._client.results.filter(l=>l.evaluator==="MarkForSubmissionEvaluation"&&l.status!==Ke.Status.ERROR);if(this.checkWithoutSubmissionRequirements(u,e).length)return{errors:a,matches:[],areRequiredCredentialsPresent:Ke.Status.ERROR,verifiableCredential:r.map(l=>l.original),warnings:o};{let l=this.matchWithoutSubmissionRequirements(u,e),h=this.extractMatches(l).map(f=>db.JSONPath.nodes(this._client.wrappedVcs.map(p=>p.original),f)[0].value);i={errors:[],matches:[...l],areRequiredCredentialsPresent:Ke.Status.INFO,verifiableCredential:h,warnings:o}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(i,r),i.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(e,i?.matches),this.remapMatches(r.map(u=>u.original),i.matches,i?.verifiableCredential),(s=i.matches)===null||s===void 0||s.forEach(u=>{this.updateSubmissionRequirementMatchPathToAlias(u,"verifiableCredential")}),i.areRequiredCredentialsPresent===Ke.Status.INFO?i.errors=[]:(i.errors=a,i.warnings=o,i.verifiableCredential=r.map(u=>u.original)),i}remapMatches(e,r,n){r?.forEach(s=>{s.from_nested?this.remapMatches(e,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{let u=db.JSONPath.query(e,i)[0],c=n?.findIndex(l=>JSON.stringify(l)===JSON.stringify(u));if(c===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${u}`);a[o]=`$[${c}]`}),s.name)})}extractMatches(e){let r=[];return e.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(e,r){let n=[];if(!r.input_descriptors)return[];if(!e.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ke.Status.ERROR,payload:"Not all the InputDescriptors are addressed"}];let s=r.input_descriptors,i=fb.ObjectUtils.getDistinctFieldInObject(e,"input_descriptor_path");if(i.length!==s.length){let o=i.map(a=>fb.JsonPathUtils.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:Ke.Status.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(e,r,n){let s=[];for(let i of r){let o={name:e.name||e.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){let a=this.mapMatchingDescriptors(e,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(e,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(e,r){let n=[],s=this.createIdToVcMap(e);for(let[i,o]of s.entries())if(!(!o||!o.length))for(let a of o){let u=fb.JsonPathUtils.extractInputField(r,[i]);u.length&&n.push({name:u[0].value.name||u[0].value.id,rule:kf.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(e,r,n){var s;let i={rule:r.rule,vc_path:[]};if(r?.from){i.from=r.from;for(let o of n){let a=db.JSONPath.query(e,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(i.name=a.name||a.id,o.payload.group.includes(r.from)&&((s=i.vc_path)===null||s===void 0?void 0:s.indexOf(o.verifiable_credential_path))===-1&&i.vc_path.push(o.verifiable_credential_path))}}return i}evaluate(e,r,n){var s,i,o,a;this._client.evaluate(e,r,n);let u={areRequiredCredentialsPresent:Ke.Status.INFO,verifiableCredential:r.map(c=>c.original)};if(u.warnings=this.formatNotInfo(Ke.Status.WARN),u.errors=this.formatNotInfo(Ke.Status.ERROR),this._client.assertPresentationSubmission(),!((s=this._client.presentationSubmission)===null||s===void 0)&&s.descriptor_map.length){let c=(i=this._client.presentationSubmission)===null||i===void 0?void 0:i.descriptor_map.length;for(let l=0;l<c;l++)this._client.presentationSubmission.descriptor_map[l]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[l]);this._client.presentationSubmission.descriptor_map.splice(0,c),u.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToAlias("verifiableCredential",u.value),u.verifiableCredential=this._client.wrappedVcs.map(c=>c.original),u.areRequiredCredentialsPresent=!((a=(o=u.value)===null||o===void 0?void 0:o.descriptor_map)===null||a===void 0)&&a.length?Ke.Status.INFO:Ke.Status.ERROR,u}formatNotInfo(e){return this._client.results.filter(r=>r.status===e).map(r=>{let n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(e,r){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(e.submission_requirements){let i=this._client.results.filter(d=>d.evaluator==="MarkForSubmissionEvaluation"&&d.payload.group&&d.status!==Ke.Status.ERROR),[o,a]=this.matchUserSelectedVcs(i,r),u=new Map;"input_descriptors"in e&&e.input_descriptors.forEach(d=>{d.group&&d.group.forEach(h=>{u.has(h)?u.set(h,u.get(h)+1):u.set(h,1)})});let c=this.evaluateRequirements(e.submission_requirements,o,u,0),l=a.filter(d=>c[1].find(h=>h.verifiable_credential_path===d[1]));return this.updatePresentationSubmission(l),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}let n=this._client.results.filter(i=>i.evaluator==="MarkForSubmissionEvaluation"&&i.status!==Ke.Status.ERROR),s=this.matchUserSelectedVcs(n,r);return this.updatePresentationSubmission(s[1]),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}updatePresentationSubmission(e){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>e.find(n=>n[0]===r.path)).map(r=>{let n=e.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}matchUserSelectedVcs(e,r){let n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((u,c)=>{u[1]===o[1]&&i.push([`$[${c}]`,`$[${a}]`])})}),e=e.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{let a=i.find(u=>u[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[e,i]}evaluateRequirements(e,r,n,s){let i=0,o=[];for(let a of e)if(a.from){if(a.rule===kf.Rules.All){let[u,c]=this.countMatchingInputDescriptors(a,r);if(u!==n.get(a.from))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...c)}else if(a.rule===kf.Rules.Pick){let[u,c]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,u,s),i++}catch(l){if(s===0)throw l}o.push(...c)}}else if(a.from_nested){let[u,c]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=u,o.push(...c),this.handleCount(a,u,s)}return[i,o]}countMatchingInputDescriptors(e,r){let n=0,s=[];for(let i of r)i.payload.group.includes(e.from)&&(s.push(i),n++);return[n,s]}handleCount(e,r,n){if(e.count&&r!==e.count)throw Error(`Count: expected: ${e.count} actual: ${r} at level: ${n}`);if(e.min&&r<e.min)throw Error(`Min: expected: ${e.min} actual: ${r} at level: ${n}`);if(e.max&&r>e.max)throw Error(`Max: expected: ${e.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(e){return e.filter((r,n)=>{let s=JSON.stringify(r);return n===e.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(e,r){var n;e&&((n=e.verifiableCredential)===null||n===void 0||n.forEach(s=>{var i;let o=fb.ObjectUtils.isString(s)?r.findIndex(a=>s===a.original):r.findIndex(a=>JSON.stringify(s.proof)===JSON.stringify(a.credential.proof));if(o===-1)throw new Error("index is not right");(i=e.vcIndexes)===null||i===void 0||i.push(o)}))}determineAreRequiredCredentialsPresent(e,r,n){if(!r||!r.length)return Ke.Status.ERROR;let s=r.map(i=>this.determineSubmissionRequirementStatus(e,i));if(n){if(n.rule===kf.Rules.All&&s.includes(Ke.Status.ERROR))return Ke.Status.ERROR;let i=s.filter(o=>o!==Ke.Status.ERROR).length;if(n.count)return n.count>i?Ke.Status.ERROR:n.count<i?Ke.Status.WARN:Ke.Status.INFO;if(n.min&&n.min>i)return Ke.Status.ERROR;if(n.max&&n.max<i)return Ke.Status.WARN}else return s.includes(Ke.Status.ERROR)?Ke.Status.ERROR:s.includes(Ke.Status.WARN)?Ke.Status.WARN:Ke.Status.INFO;return Ke.Status.INFO}determineSubmissionRequirementStatus(e,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return Ke.Status.ERROR;if(r.from){let n=this.countGroupIDs(e.input_descriptors,r.from);switch(r.rule){case kf.Rules.All:return r.vc_path.length===n?Ke.Status.INFO:Ke.Status.WARN;case kf.Rules.Pick:return this.getPickRuleStatus(r);default:return Ke.Status.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(e,r.from_nested,r);return Ke.Status.INFO}getPickRuleStatus(e){return e.vc_path.length===0?Ke.Status.ERROR:e.count&&e.vc_path.length!==e.count?e.vc_path.length>e.count?Ke.Status.WARN:Ke.Status.ERROR:e.min&&e.vc_path.length<e.min?Ke.Status.ERROR:e.max&&e.vc_path.length>e.max?Ke.Status.WARN:Ke.Status.INFO}updateSubmissionRequirementMatchPathToAlias(e,r){let n=[];e.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),e.vc_path=n,e.from_nested&&e.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToAlias(e,r){r?r.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)}):this._client.generatePresentationSubmission&&this._client.presentationSubmission.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)})}replacePathWithAlias(e,r){e.path=e.path.replace("$","$."+r),e.path_nested&&this.replacePathWithAlias(e.path_nested,r)}createIdToVcMap(e){let r=new Map,n=new Map;for(let s=0;s<e.length;s++){let i=e[s].input_descriptor_path;if(n.has(i)){let o=n.get(i);o&&o.push(e[s])}else n.set(i,[e[s]])}for(let[s,i]of n.entries()){let o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(e,r){let n=0;for(let s of e)s.group&&s.group.includes(r)&&n++;return n}};pb.EvaluationClientWrapper=Tx});var Am=D(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.HandlerCheckResult=qu.EvaluationClientWrapper=qu.EvaluationClient=void 0;var Lpe=BB();Object.defineProperty(qu,"HandlerCheckResult",{enumerable:!0,get:function(){return Lpe.HandlerCheckResult}});var Upe=Bx();Object.defineProperty(qu,"EvaluationClient",{enumerable:!0,get:function(){return Upe.EvaluationClient}});var Vpe=GM();Object.defineProperty(qu,"EvaluationClientWrapper",{enumerable:!0,get:function(){return Vpe.EvaluationClientWrapper}})});var XM=D(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.KeyEncoding=Mu.PresentationSubmissionLocation=void 0;var Kpe;(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.PRESENTATION=1]="PRESENTATION"})(Kpe=Mu.PresentationSubmissionLocation||(Mu.PresentationSubmissionLocation={}));var Hpe;(function(t){t.Jwk="Jwk",t.Base58="Base58",t.Hex="Hex",t.Multibase="Multibase"})(Hpe=Mu.KeyEncoding||(Mu.KeyEncoding={}))});var xm=D(bl=>{"use strict";var Wpe=bl&&bl.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),zpe=bl&&bl.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Wpe(e,t,r)};Object.defineProperty(bl,"__esModule",{value:!0});zpe(XM(),bl)});var YM=D((kPe,Rx)=>{"use strict";Rx.exports=$x;Rx.exports.default=$x;var Nr={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},Jpe=Object.prototype.hasOwnProperty,Fx={type:["number","string"]};function Gr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:Fx.type},message:"must be number,string",schema:Fx.type,parentSchema:Fx,data:t};i===null?i=[a]:i.push(a),o++}return Gr.errors=i,o===0}function hb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Nr.required,parentSchema:Nr,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Jpe.call(Nr.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Nr,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Gr(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Gr(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Nr.properties.enum.type,parentSchema:Nr.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Gr(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Gr(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Nr.properties.format.type,parentSchema:Nr.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Nr.properties.maxLength.type,parentSchema:Nr.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Gr(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Nr.properties.minLength.type,parentSchema:Nr.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Gr(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Gr.errors:i.concat(Gr.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Nr.properties.not.type,parentSchema:Nr.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Nr.properties.pattern.type,parentSchema:Nr.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Nr.properties.type.type,parentSchema:Nr.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Nr.type,parentSchema:Nr,data:t};i===null?i=[a]:i.push(a),o++}return hb.errors=i,o===0}function $x(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return hb(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?hb.errors:i.concat(hb.errors),o=i.length),$x.errors=i,o===0}});var ZM=D((IPe,qx)=>{"use strict";qx.exports=jx;qx.exports.default=jx;var Mt={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},Gpe=Object.prototype.hasOwnProperty,Nx={type:["number","string"]};function Xr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:Nx.type},message:"must be number,string",schema:Nx.type,parentSchema:Nx,data:t};i===null?i=[a]:i.push(a),o++}return Xr.errors=i,o===0}function mb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Mt.required,parentSchema:Mt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Gpe.call(Mt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Mt,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Xr(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Xr.errors:i.concat(Xr.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Xr(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Xr.errors:i.concat(Xr.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Mt.properties.enum.type,parentSchema:Mt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Xr(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Xr.errors:i.concat(Xr.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Xr(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Xr.errors:i.concat(Xr.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.format.type,parentSchema:Mt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMaximum!==void 0){let a=t.formatExclusiveMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatExclusiveMaximum.type,parentSchema:Mt.properties.formatExclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMinimum!==void 0){let a=t.formatExclusiveMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatExclusiveMinimum.type,parentSchema:Mt.properties.formatExclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMaximum!==void 0){let a=t.formatMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatMaximum.type,parentSchema:Mt.properties.formatMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMinimum!==void 0){let a=t.formatMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.formatMinimum.type,parentSchema:Mt.properties.formatMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Mt.properties.maxLength.type,parentSchema:Mt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Xr(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Xr.errors:i.concat(Xr.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Mt.properties.minLength.type,parentSchema:Mt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Xr(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Xr.errors:i.concat(Xr.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Mt.properties.not.type,parentSchema:Mt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.pattern.type,parentSchema:Mt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Mt.properties.type.type,parentSchema:Mt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Mt.type,parentSchema:Mt,data:t};i===null?i=[a]:i.push(a),o++}return mb.errors=i,o===0}function jx(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return mb(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?mb.errors:i.concat(mb.errors),o=i.length),jx.errors=i,o===0}});var Bs=D(yb=>{"use strict";Object.defineProperty(yb,"__esModule",{value:!0});yb.ValidationBundler=void 0;var QM=zr(),Mx=class{constructor(e,r){this.parentTag=e,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(e){return new QM.Checked(this.getTag(),QM.Status.ERROR,e)}};yb.ValidationBundler=Mx});var Lx=D(Bf=>{"use strict";var t7=Bf&&Bf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bf,"__esModule",{value:!0});Bf.FieldsVB=void 0;var Xpe=Xi(),e7=ka(),Ype=t7(YM()),Zpe=t7(ZM()),Qpe=Bs(),If=class extends Qpe.ValidationBundler{constructor(e){super(e,"fields"),this.mustHaveValidJsonPathsMsg='field object "path" property must contain array of valid json paths',this.pathObjMustHaveValidJsonPathMsg='field object "path" property must contain valid json paths.',this.filterMustBeValidJsonSchemaMsg='field object "filter" property must be valid json schema',this.filterIsMustInPresenceOfPredicateMsg='field object must have a "filter" property if "predicate" is present',this.filterIsNotValidJsonSchemaDescriptorMsg='could not parse "filter" object as a valid json schema descriptor.',this.purposeShouldBeANonEmptyStringMsg="purpose should be a non empty string",this.shouldBeKnownOptionMsg="Unknown predicate property"}getValidations(e){let r=[];if(e)for(let n=0;n<e.length;n++)r=[...r,...this.getValidationsFor(e[n],n)];return r}getValidationsFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(r),target:e,predicate:n=>If.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>If.shouldBeKnownOption(n?.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}mustHaveValidJsonPaths(){return e=>e.path!=null&&e.path.length>0&&this._validateJsonPaths(e.path)}_validateJsonPaths(e){let r=[];if(e.forEach(n=>{try{Xpe.JSONPath.parse(n)}catch{r.push(n)}}),r.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(r));return!0}filterMustBeValidJsonSchema(){return e=>this._validateFilter(e.filter)}_validateFilter(e){if(e==null)return!0;let r=!1;try{r=(0,Zpe.default)(e),r||(r=(0,Ype.default)(e))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(e))}return r}filterIsMustInPresenceOfPredicate(){return e=>!(e.predicate!=null&&e.filter==null)}static optionalNonEmptyString(e){return e==null||e.length>0}static shouldBeKnownOption(e){return e==null||e==e7.Optionality.Required||e==e7.Optionality.Preferred}};Bf.FieldsVB=If});var vb=D(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0});gb.ConstraintsVB=void 0;var Ba=ka(),ehe=Lx(),the=Bs(),Ta=class extends the.ValidationBundler{constructor(e){super(e,"constraints"),this.disclosureLimitShouldHaveKnownValueMsg="limit_disclosure should have known value",this.statusShouldHaveKnownValueMsg="Unknown status property",this.statusDirectiveShouldHaveKnownValueMsg="status directive should have known value",this.subjectIsIssuerShouldBeKnownValueMsg="subject_is_issuer should be known value",this.fieldIdIsMandatoryMsg="field_id property is mandatory",this.fieldIdMustBeArrayOfStringsMsg="field_id property must be an array of strings",this.fieldIdMustCorrespondToFieldIdMsg="field_id must correspond to a present field object id property",this.directivePropertyIsMandatoryMsg="directive property is mandatory",this.oneOfTheKnownDirectivePropertiesMandatoryMsg="directive property must be one of [required, preferred]"}getValidations(e){let r=[];return e&&(r=[{tag:this.getTag(),target:e,predicate:n=>Ta.disclosureLimitShouldHaveKnownValue(n.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>Ta.statusShouldHaveKnownValue(n.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:Ta.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>Ta.shouldBeKnownOption(n.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(e?.is_holder),...this.getSubjectsValidations(e?.same_subject),...this.getFieldsValidations(e)]),r}getFieldsValidations(e){var r;return!((r=e?.fields)===null||r===void 0)&&r.length?new ehe.FieldsVB(this.getTag()).getValidations(e.fields):[]}static disclosureLimitShouldHaveKnownValue(e){return!e||e===Ba.Optionality.Preferred||e===Ba.Optionality.Required}static statusShouldHaveKnownValue(e){return e==null||e.active!=null||e.revoked!=null||e.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return e=>{var r,n,s;return this.pdStatusShouldBeKnown((r=e?.statuses)===null||r===void 0?void 0:r.active)&&this.pdStatusShouldBeKnown((n=e?.statuses)===null||n===void 0?void 0:n.revoked)&&this.pdStatusShouldBeKnown((s=e?.statuses)===null||s===void 0?void 0:s.suspended)}}static pdStatusShouldBeKnown(e){return!e||e.directive===Ba.Directives.Allowed||e.directive===Ba.Directives.Disallowed||e.directive===Ba.Directives.Required}static shouldBeKnownOption(e){return e?e.filter(r=>r.directive!==Ba.Optionality.Preferred&&r.directive!==Ba.Optionality.Required).length===0:!0}getSubjectsValidations(e){if(e){let r=[];for(let n=0;n<e.length;n++)r=[{tag:this.getMyTag(n),target:e[n],predicate:s=>Array.isArray(s.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>!!s.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.field_id.length===s.field_id.filter(i=>typeof i=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive===Ba.Optionality.Preferred||s.directive===Ba.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return r}return[]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}fieldIdInSubjectMustCorrespondToFieldId(e,r){if(r){for(let n of r)for(let s of n.field_id)if(!Ta.isValidFieldId(e,s))return!1}return!0}static isValidFieldId(e,r){return e?.fields?e.fields.map(n=>n.id).includes(r):!1}};gb.ConstraintsVB=Ta});var Vx=D(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});bb.InputDescriptorsV1VB=void 0;var Cm=Yi(),rhe=vb(),nhe=Bs(),Ux=class extends nhe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string",this.shouldHaveValidSchemaURIMsg="schema should have valid URI"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>Cm.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Cm.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Cm.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}isValidSchema(){return e=>e.schema.filter(r=>this.isAValidURI(r.uri)&&(r.required==null||typeof r.required=="boolean")).length>0}isAValidURI(e){if(e){if(!Cm.ObjectValidationUtils.nonEmptyString(e))return!1}else return!1;if(e.startsWith("http://")||e.startsWith("https://"))try{new URL(e)}catch{return Cm.ObjectValidationUtils.isValidDIDURI(e)}return!0}constraintsValidations(e,r){return e.constraints?new rhe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}};bb.InputDescriptorsV1VB=Ux});var Wx=D(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0});wb.InputDescriptorsV2VB=void 0;var Kx=Yi(),ihe=vb(),she=Bs(),Hx=class extends she.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldNotHaveSchema(n),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>Kx.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Kx.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>Kx.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}constraintsValidations(e,r){return e.constraints?new ihe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}shouldNotHaveSchema(e){let r=!1;return e.forEach(n=>{n.schema&&(r=!0)}),!r}};wb.InputDescriptorsV2VB=Hx});var Jx=D(Eb=>{"use strict";Object.defineProperty(Eb,"__esModule",{value:!0});Eb.JwtAlgos=void 0;var zx=class{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}};Eb.JwtAlgos=zx});var Xx=D(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});_b.LdpTypes=void 0;var Gx=class{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020"]}};_b.LdpTypes=Gx});var Sb=D(Db=>{"use strict";Object.defineProperty(Db,"__esModule",{value:!0});Db.SubmissionRequirementVB=void 0;var ohe=Bs(),Fa=class extends ohe.ValidationBundler{constructor(e){super(e,"submission_requirements"),this.ruleIsMandatoryMsg="rule is a mandatory field",this.needsOneFromOrFromNestedMsg="needs exactly one of from or from_nested",this.fromNestedShouldBeArrayMsg="The value of the from_nested property MUST be an array",this.isCountPositiveIntMsg="count must be a practical positive number",this.isMinPositiveIntMsg="min must be a practical positive number",this.isMaxPositiveIntMsg="max must be a practical positive number",this.ruleShouldBePickOrAllMsg="rule should be either pick or all"}getValidations(e){let r=[];if(e!=null&&e.length>0)for(let n=0;n<e.length;n++)r=[...r,...this.getMyValidations(n,e),...this.getSubValidations(n,e)];return r}getMyValidations(e,r){return[{tag:this.getMyTag(e),target:r[e],predicate:Fa.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(e),target:r[e],predicate:Fa.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(e),target:r[e],predicate:Fa.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:Fa.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}getSubValidations(e,r){let n=r[e].from_nested;return n!=null?new Fa(this.getFromNestedTag(e)).getValidations(n):[]}getFromNestedTag(e){return this.getMyTag(e)+".from_nested"}isCountPositiveInt(e){return e.rule!=="pick"||e.count==null||0<e.count}isMinPositiveInt(e){return e.rule!=="pick"||e.min==null||0<=e.min}isMaxPositiveInt(e){return e.rule!=="pick"||e.max==null||0<e.max}static ruleIsMandatory(e){return e.rule!=null}static needsOneFromOrFromNested(e){return e.from==null!=(e.from_nested==null)}static fromNestedShouldBeArray(e){return e.from_nested==null||Array.isArray(e.from_nested)}static ruleShouldBePickOrAll(e){return e.rule==="pick"||e.rule==="all"}};Db.SubmissionRequirementVB=Fa});var n7=D(Tf=>{"use strict";var ahe=Tf&&Tf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tf,"__esModule",{value:!0});Tf.PresentationDefinitionV1VB=void 0;var uhe=Jx(),che=Xx(),lhe=ahe(ES()),r7=Vx(),dhe=Sb(),fhe=Bs(),ci=class extends fhe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){return e.submission_requirements?[...this.myValidations(e),...new r7.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors),...new dhe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:[...this.myValidations(e),...new r7.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors)]}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>ci.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>ci.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>ci.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>ci.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>ci.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>ci.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:e,predicate:r=>ci.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=uhe.JwtAlgos.getJwtAlgos(),s=che.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...ci.isJWTAlgoKnown(o,n)):r.push(...ci.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];ci.flatten(e.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,lhe.default)({presentation_definition:e})}static shouldNotHaveFrameProperty(e){return!e.frame}};Tf.PresentationDefinitionV1VB=ci});var i7=D(Ab=>{"use strict";Object.defineProperty(Ab,"__esModule",{value:!0});Ab.FrameVB=void 0;var Lu=Yi(),phe=Bs(),Pm=class extends phe.ValidationBundler{constructor(e){super(e,"frame"),this.frameIsValidMsg="frame value is not valid"}getValidations(e){let r=[];return r=[...r,...this.getMyValidations(e)],r}getMyValidations(e){return[{tag:this.getMyTag(),target:e,predicate:Pm.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(e){if(!e||Array.isArray(e)||typeof e!="object")return!1;let r=e;if(r&&r["@id"]){for(let n of Lu.ObjectUtils.asArray(e["@id"]))if(!(Lu.ObjectUtils.isObject(n)||Lu.ObjectUtils.isUrlAbsolute(n))||Lu.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}if(r["@types"]){for(let n of Lu.ObjectUtils.asArray(e["@types"]))if(!(Lu.ObjectUtils.isObject(n)||Lu.ObjectUtils.isUrlAbsolute(n))||Lu.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}return!0}};Ab.FrameVB=Pm});var o7=D(Ff=>{"use strict";var hhe=Ff&&Ff.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ff,"__esModule",{value:!0});Ff.PresentationDefinitionV2VB=void 0;var mhe=Jx(),yhe=Xx(),ghe=hhe(OS()),vhe=i7(),s7=Wx(),bhe=Sb(),whe=Bs(),Si=class extends whe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){let r=[];return e.submission_requirements?r=[...this.myValidations(e),...new s7.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors),...new bhe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:r=[...this.myValidations(e),...new s7.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors)],e.frame&&r.push(...new vhe.FrameVB(this.myTag).getValidations(e.frame)),r}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>Si.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>Si.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>Si.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>Si.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>Si.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>Si.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=mhe.JwtAlgos.getJwtAlgos(),s=yhe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...Si.isJWTAlgoKnown(o,n)):r.push(...Si.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];Si.flatten(e.submission_requirements).forEach(a=>{a.from&&s.push(...a.from)});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,ghe.default)({presentation_definition:e})}};Ff.PresentationDefinitionV2VB=Si});var u7=D(xb=>{"use strict";Object.defineProperty(xb,"__esModule",{value:!0});xb.PresentationSubmissionVB=void 0;var Ehe=Xi(),a7=zr(),_he=Bs(),On=class extends _he.ValidationBundler{constructor(e){super(e,"presentation_submission")}getValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:e,predicate:r=>On.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>On.nonEmptyString(r?.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>On.descriptorMapMustBePresent(r?.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:e,predicate:r=>On.idMustBeSameForEachLevelOfNesting(r?.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:e,predicate:r=>On.formatsShouldBeKnown(r?.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:e,predicate:r=>On.pathsShouldBeValidJsonPaths(r?.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(e){return e!=null&&e.length>0}static descriptorMapMustBePresent(e){return e!=null&&e.length>0}static idMustBeSameForEachLevelOfNesting(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=r&&On.isIdSameForEachLevelOfNesting(e[n],e[n].id);return r}static isIdSameForEachLevelOfNesting(e,r){let n=!0;return e!=null&&e.path_nested!=null&&(e.path_nested.id==r?n=n&&On.isIdSameForEachLevelOfNesting(e.path_nested,r):n=!1),n}static formatsShouldBeKnown(e){let r=!0;if(e!=null){let n=["jwt","jwt_vc","jwt_vp","ldp","ldp_vc","ldp_vp"];for(let s=0;s<e.length;s++)r=On.formatShouldBeKnown(e[s],n)}return r}static formatShouldBeKnown(e,r){let n=!0;return e!=null&&(n=r.includes(e.format)),e.path_nested!=null&&(n=n&&On.formatShouldBeKnown(e.path_nested,r)),n}static pathsShouldBeValidJsonPaths(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=On.pathShouldBeValid(e[n],[]);return r}static pathShouldBeValid(e,r){if(e!=null){try{Ehe.JSONPath.parse(e.path)}catch{r.push(e.path)}e.path_nested!=null&&On.pathShouldBeValid(e.path_nested,r)}if(r.length>0)throw new a7.Checked("",a7.Status.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}};xb.PresentationSubmissionVB=On});var c7=D(Mn=>{"use strict";var Dhe=Mn&&Mn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),$a=Mn&&Mn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Dhe(e,t,r)};Object.defineProperty(Mn,"__esModule",{value:!0});$a(Lx(),Mn);$a(Vx(),Mn);$a(Wx(),Mn);$a(n7(),Mn);$a(o7(),Mn);$a(u7(),Mn);$a(Sb(),Mn);$a(Bs(),Mn);$a(vb(),Mn)});var l7=D(Cb=>{"use strict";Object.defineProperty(Cb,"__esModule",{value:!0});Cb.validate=void 0;var $f=zr(),She=t=>{let e=t.map(a=>s(a));function r(a){return new $f.Checked(a.tag,$f.Status.ERROR,a.message)}function n(a){return new $f.Checked(a,$f.Status.INFO,"ok")}function s(a){let u;try{a.predicate(a.target)?u=n(a.tag):u=r(a)}catch{u=r(a)}return u}let i=(a,u)=>(u.status!==$f.Status.INFO&&a.push(u),a),o=e.reduce(i,[]);return(0,$f.hasErrors)(o)?o:[n("root")]};Cb.validate=She});var f7=D(d7=>{"use strict";Object.defineProperty(d7,"__esModule",{value:!0})});var p7=D(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});Pb.ValidationEngine=void 0;var Ahe=Zx(),Yx=class{validate(e){let r=[];for(let n of e)r=r.concat(n.bundler.getValidations(n.target));return(0,Ahe.validate)(r)}};Pb.ValidationEngine=Yx});var Zx=D(Ra=>{"use strict";var xhe=Ra&&Ra.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qx=Ra&&Ra.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&xhe(e,t,r)};Object.defineProperty(Ra,"__esModule",{value:!0});Qx(l7(),Ra);Qx(f7(),Ra);Qx(p7(),Ra)});var Om=D(Uu=>{"use strict";var Che=Uu&&Uu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),h7=Uu&&Uu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Che(e,t,r)};Object.defineProperty(Uu,"__esModule",{value:!0});h7(c7(),Uu);h7(Zx(),Uu)});var Ob=D(Rf=>{"use strict";var Phe=Rf&&Rf.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Rf,"__esModule",{value:!0});Rf.PEX=void 0;var m7=zr(),km=Am(),eC=xm(),Ts=nl(),y7=Yi(),Im=Om(),Bm=class{constructor(){this._evaluationClientWrapper=new km.EvaluationClientWrapper}evaluatePresentation(e,r,n){let s=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:n?.presentationSubmission!==void 0,i=Ts.SSITypesBuilder.toInternalPresentationDefinition(e),o=JSON.parse(JSON.stringify(r)),a=Ts.SSITypesBuilder.mapExternalVerifiablePresentationToWrappedVP(o),u=n?.presentationSubmission||a.presentation.presentation_submission;if(!u&&!s)throw Error("Either a presentation submission as part of the VP or provided separately was expected");let c=a.presentation.holder?[a.presentation.holder]:[],l=Object.assign(Object.assign({},n),{holderDIDs:c,presentationSubmission:u,generatePresentationSubmission:s}),d=this._evaluationClientWrapper.evaluate(i,a.vcs,l);return d.value&&d.value.descriptor_map.length&&new km.EvaluationClientWrapper().selectFrom(i,a.vcs,l).areRequiredCredentialsPresent!==m7.Status.ERROR&&(d.errors=[]),d}evaluateCredentials(e,r,n){let s=Ts.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r);this._evaluationClientWrapper=new km.EvaluationClientWrapper;let i=Ts.SSITypesBuilder.toInternalPresentationDefinition(e),o=this._evaluationClientWrapper.evaluate(i,s,n);if(o.value&&o.value.descriptor_map.length){let u=new km.EvaluationClientWrapper().selectFrom(i,s,n);o.areRequiredCredentialsPresent=u.areRequiredCredentialsPresent,o.errors=u.errors}else o.areRequiredCredentialsPresent=m7.Status.ERROR;return o}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r)),i=Ts.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper=new km.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(i,Ts.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationSubmissionFrom(e,r){let n=Ts.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper.submissionFrom(n,Ts.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r))}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:eC.PresentationSubmissionLocation.PRESENTATION,o=this.presentationSubmissionFrom(e,r);return{presentation:Bm.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===eC.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static constructPresentation(e,r){var n,s,i,o;let a=r?.holderDID,u=Array.isArray((n=r?.basePresentationPayload)===null||n===void 0?void 0:n.type)?((s=r?.basePresentationPayload)===null||s===void 0?void 0:s.type)||[]:!((i=r?.basePresentationPayload)===null||i===void 0)&&i.type?[r.basePresentationPayload.type]:[],c=!((o=r?.basePresentationPayload)===null||o===void 0)&&o["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return c.includes("https://www.w3.org/2018/credentials/v1")||c.push("https://www.w3.org/2018/credentials/v1"),u.includes("VerifiablePresentation")||u.push("VerifiablePresentation"),r?.presentationSubmission&&(u.includes("PresentationSubmission")||u.push("PresentationSubmission"),c.includes("https://identity.foundation/presentation-exchange/submission/v1")||c.push("https://identity.foundation/presentation-exchange/submission/v1")),Object.assign(Object.assign(Object.assign(Object.assign({},r?.basePresentationPayload),{"@context":c,type:u,holder:a}),!!r?.presentationSubmission&&{presentation_submission:r.presentationSubmission}),{verifiableCredential:Array.isArray(e)?e:[e]})}static validateDefinition(e){let r=(0,y7.definitionVersionDiscovery)(e);if(r.error)throw r.error;let n=[];return r.version===Ts.PEVersion.v1?n.push({bundler:new Im.PresentationDefinitionV1VB("root"),target:Ts.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e)}):n.push({bundler:new Im.PresentationDefinitionV2VB("root"),target:Ts.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e)}),new Im.ValidationEngine().validate(n)}static validateSubmission(e){return new Im.ValidationEngine().validate([{bundler:new Im.PresentationSubmissionVB("root"),target:e}])}verifiablePresentationFrom(e,r,n,s){var i;return Phe(this,void 0,void 0,function*(){let{holderDID:o,signatureOptions:a,proofOptions:u}=s,c=(i=s.presentationSubmissionLocation)!==null&&i!==void 0?i:eC.PresentationSubmissionLocation.PRESENTATION;function l(){let v=[];if(u?.typeSupportsSelectiveDisclosure){if(!u?.type)throw Error("Please provide a proof type if you enable selective disclosure");v=[u.type]}return v}let d=o?[o]:[],h=l(),f=this.evaluateCredentials(e,r,{holderDIDs:d,limitDisclosureSignatureSuites:h}),p=this.presentationFrom(e,f.verifiableCredential,Object.assign(Object.assign({},s),{presentationSubmissionLocation:c})),y=this.evaluatePresentation(e,p.presentation,{limitDisclosureSignatureSuites:h});if(!y.value)throw new Error("Could not get evaluation results from presentationResult");let w={type:u?.type,verificationMethod:a?.verificationMethod,created:u?.created?u.created:new Date().toISOString(),proofPurpose:u?.proofPurpose,proofValue:a?.proofValue,jws:a?.jws,challenge:u?.challenge,nonce:u?.nonce,domain:u?.domain},P={options:s,presentation:p.presentation,presentationDefinition:e,selectedCredentials:r,proof:w,presentationSubmission:y.value,evaluationResults:y};return{verifiablePresentation:yield n(P),presentationSubmissionLocation:c,presentationSubmission:y.value}})}static definitionVersionDiscovery(e){return(0,y7.definitionVersionDiscovery)(e)}};Rf.PEX=Bm});var b7=D(kb=>{"use strict";Object.defineProperty(kb,"__esModule",{value:!0});kb.PEXv1=void 0;var tC=Ob(),Ohe=Am(),g7=xm(),wl=nl(),v7=Om(),rC=class extends tC.PEX{constructor(){super()}evaluatePresentation(e,r,n){return wl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return wl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r));return this._evaluationClientWrapper=new Ohe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(wl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),wl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:g7.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(wl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),wl.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:tC.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===g7.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=wl.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e);return new v7.ValidationEngine().validate([{bundler:new v7.PresentationDefinitionV1VB("root"),target:r}])}static validateSubmission(e){return tC.PEX.validateSubmission(e)}};kb.PEXv1=rC});var _7=D(Ib=>{"use strict";Object.defineProperty(Ib,"__esModule",{value:!0});Ib.PEXv2=void 0;var nC=Ob(),khe=Am(),w7=xm(),El=nl(),E7=Om(),iC=class extends nC.PEX{constructor(){super()}evaluatePresentation(e,r,n){return El.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return El.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){return this._evaluationClientWrapper=new khe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(El.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),El.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:w7.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(El.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),El.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:nC.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===w7.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=El.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e);return new E7.ValidationEngine().validate([{bundler:new E7.PresentationDefinitionV2VB("root"),target:r}])}static validateSubmission(e){return nC.PEX.validateSubmission(e)}};Ib.PEXv2=iC});var S7=D(mr=>{"use strict";var Ihe=mr&&mr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Bhe=mr&&mr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ihe(e,t,r)};Object.defineProperty(mr,"__esModule",{value:!0});mr.PEXv2=mr.PEXv1=mr.PEX=mr.Status=mr.Checked=mr.PEVersion=mr.ValidationEngine=mr.HandlerCheckResult=void 0;var D7=zr();Object.defineProperty(mr,"Checked",{enumerable:!0,get:function(){return D7.Checked}});Object.defineProperty(mr,"Status",{enumerable:!0,get:function(){return D7.Status}});var The=Ob();Object.defineProperty(mr,"PEX",{enumerable:!0,get:function(){return The.PEX}});var Fhe=b7();Object.defineProperty(mr,"PEXv1",{enumerable:!0,get:function(){return Fhe.PEXv1}});var $he=_7();Object.defineProperty(mr,"PEXv2",{enumerable:!0,get:function(){return $he.PEXv2}});var Rhe=Am();Object.defineProperty(mr,"HandlerCheckResult",{enumerable:!0,get:function(){return Rhe.HandlerCheckResult}});var Nhe=nl();Object.defineProperty(mr,"PEVersion",{enumerable:!0,get:function(){return Nhe.PEVersion}});var jhe=Om();Object.defineProperty(mr,"ValidationEngine",{enumerable:!0,get:function(){return jhe.ValidationEngine}});Bhe(xm(),mr)});var A7=D(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.PresentationSubmissionLocation=br.HandlerCheckResult=br.ValidationEngine=br.PEVersion=br.Checked=br.Status=br.KeyEncoding=br.PEXv2=br.PEXv1=br.PEX=void 0;var Po=S7();Object.defineProperty(br,"Checked",{enumerable:!0,get:function(){return Po.Checked}});Object.defineProperty(br,"HandlerCheckResult",{enumerable:!0,get:function(){return Po.HandlerCheckResult}});Object.defineProperty(br,"KeyEncoding",{enumerable:!0,get:function(){return Po.KeyEncoding}});Object.defineProperty(br,"PEVersion",{enumerable:!0,get:function(){return Po.PEVersion}});Object.defineProperty(br,"PEX",{enumerable:!0,get:function(){return Po.PEX}});Object.defineProperty(br,"PEXv1",{enumerable:!0,get:function(){return Po.PEXv1}});Object.defineProperty(br,"PEXv2",{enumerable:!0,get:function(){return Po.PEXv2}});Object.defineProperty(br,"PresentationSubmissionLocation",{enumerable:!0,get:function(){return Po.PresentationSubmissionLocation}});Object.defineProperty(br,"Status",{enumerable:!0,get:function(){return Po.Status}});Object.defineProperty(br,"ValidationEngine",{enumerable:!0,get:function(){return Po.ValidationEngine}})});var Jhe={};Zt(Jhe,{Balance:()=>ko,Close:()=>Wu,Crypto:()=>bi,DevTools:()=>Dl,DidResolver:()=>tg,Exchange:()=>fC,InvalidDidError:()=>qf,Message:()=>Wr,MissingServiceEndpointError:()=>Mf,Offering:()=>is,Order:()=>Ku,OrderStatus:()=>Hu,Parser:()=>yr,Quote:()=>Vu,RequestError:()=>Io,RequestTokenAudienceMismatchError:()=>Kf,RequestTokenError:()=>ja,RequestTokenIssuerSignerMismatchError:()=>Hf,RequestTokenMissingClaimsError:()=>Vf,RequestTokenSigningError:()=>Lf,RequestTokenVerificationError:()=>Uf,Resource:()=>Vi,ResponseError:()=>Bo,Rfq:()=>En,TbdexHttpClient:()=>Ln,ValidationError:()=>jf,isVerificationMethod:()=>r2,requestTokenRequiredClaims:()=>bC,resolveDid:()=>t2});var Ht="0123456789abcdefghjkmnpqrstvwxyz",be=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,255,18,19,255,20,21,255,22,23,24,25,26,255,27,28,29,30,31,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]);function Um(t){let e=new Array(26).fill("");if(t.length!==16)throw new Error("Invalid length");return e[0]=Ht[(t[0]&224)>>5],e[1]=Ht[t[0]&31],e[2]=Ht[(t[1]&248)>>3],e[3]=Ht[(t[1]&7)<<2|(t[2]&192)>>6],e[4]=Ht[(t[2]&62)>>1],e[5]=Ht[(t[2]&1)<<4|(t[3]&240)>>4],e[6]=Ht[(t[3]&15)<<1|(t[4]&128)>>7],e[7]=Ht[(t[4]&124)>>2],e[8]=Ht[(t[4]&3)<<3|(t[5]&224)>>5],e[9]=Ht[t[5]&31],e[10]=Ht[(t[6]&248)>>3],e[11]=Ht[(t[6]&7)<<2|(t[7]&192)>>6],e[12]=Ht[(t[7]&62)>>1],e[13]=Ht[(t[7]&1)<<4|(t[8]&240)>>4],e[14]=Ht[(t[8]&15)<<1|(t[9]&128)>>7],e[15]=Ht[(t[9]&124)>>2],e[16]=Ht[(t[9]&3)<<3|(t[10]&224)>>5],e[17]=Ht[t[10]&31],e[18]=Ht[(t[11]&248)>>3],e[19]=Ht[(t[11]&7)<<2|(t[12]&192)>>6],e[20]=Ht[(t[12]&62)>>1],e[21]=Ht[(t[12]&1)<<4|(t[13]&240)>>4],e[22]=Ht[(t[13]&15)<<1|(t[14]&128)>>7],e[23]=Ht[(t[14]&124)>>2],e[24]=Ht[(t[14]&3)<<3|(t[15]&224)>>5],e[25]=Ht[t[15]&31],e.join("")}function jb(t){if(t.length!==26)throw new Error("Invalid length");let r=new TextEncoder().encode(t);if(be[r[0]]===255||be[r[1]]===255||be[r[2]]===255||be[r[3]]===255||be[r[4]]===255||be[r[5]]===255||be[r[6]]===255||be[r[7]]===255||be[r[8]]===255||be[r[9]]===255||be[r[10]]===255||be[r[11]]===255||be[r[12]]===255||be[r[13]]===255||be[r[14]]===255||be[r[15]]===255||be[r[16]]===255||be[r[17]]===255||be[r[18]]===255||be[r[19]]===255||be[r[20]]===255||be[r[21]]===255||be[r[22]]===255||be[r[23]]===255||be[r[24]]===255||be[r[25]]===255)throw new Error("Invalid base32 character");let n=new Uint8Array(16);return n[0]=be[r[0]]<<5|be[r[1]],n[1]=be[r[2]]<<3|be[r[3]]>>2,n[2]=(be[r[3]]&3)<<6|be[r[4]]<<1|be[r[5]]>>4,n[3]=(be[r[5]]&15)<<4|be[r[6]]>>1,n[4]=(be[r[6]]&1)<<7|be[r[7]]<<2|be[r[8]]>>3,n[5]=(be[r[8]]&7)<<5|be[r[9]],n[6]=be[r[10]]<<3|be[r[11]]>>2,n[7]=(be[r[11]]&3)<<6|be[r[12]]<<1|be[r[13]]>>4,n[8]=(be[r[13]]&15)<<4|be[r[14]]>>1,n[9]=(be[r[14]]&1)<<7|be[r[15]]<<2|be[r[16]]>>3,n[10]=(be[r[16]]&7)<<5|be[r[17]],n[11]=be[r[18]]<<3|be[r[19]]>>2,n[12]=(be[r[19]]&3)<<6|be[r[20]]<<1|be[r[21]]>>4,n[13]=(be[r[21]]&15)<<4|be[r[22]]>>1,n[14]=(be[r[22]]&1)<<7|be[r[23]]<<2|be[r[24]]>>3,n[15]=(be[r[24]]&7)<<5|be[r[25]],n}function xC(t){let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var La=Math.pow;var CC="0123456789abcdef",Vm=class{constructor(t){if(this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(t,e,r,n){if(!Number.isInteger(t)||!Number.isInteger(e)||!Number.isInteger(r)||!Number.isInteger(n)||t<0||e<0||r<0||n<0||t>0xffffffffffff||e>4095||r>1073741823||n>4294967295)throw new RangeError("invalid field value");let s=new Uint8Array(16);return s[0]=t/La(2,40),s[1]=t/La(2,32),s[2]=t/La(2,24),s[3]=t/La(2,16),s[4]=t/La(2,8),s[5]=t,s[6]=112|e>>>8,s[7]=e,s[8]=128|r>>>24,s[9]=r>>>16,s[10]=r>>>8,s[11]=r,s[12]=n>>>24,s[13]=n>>>16,s[14]=n>>>8,s[15]=n,new Vm(s)}toString(){let t="";for(let e=0;e<this.bytes.length;e++)t+=CC.charAt(this.bytes[e]>>>4),t+=CC.charAt(this.bytes[e]&15),(e===3||e===5||e===7||e===9)&&(t+="-");return t}clone(){return new Vm(this.bytes.slice(0))}equals(t){return this.compareTo(t)===0}compareTo(t){for(let e=0;e<16;e++){let r=this.bytes[e]-t.bytes[e];if(r!==0)return Math.sign(r)}return 0}},eL=class{constructor(){this.timestamp=0,this.counter=0,this.random=new tL}generate(){let t=this.generateOrAbort();return t!==void 0?t:(this.timestamp=0,this.generateOrAbort())}generateOrAbort(){let r=Date.now();if(r>this.timestamp)this.timestamp=r,this.resetCounter();else if(r+1e4>this.timestamp)this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter());else return;return Vm.fromFieldsV7(this.timestamp,Math.trunc(this.counter/La(2,30)),this.counter&La(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=this.random.nextUint32()*1024+(this.random.nextUint32()&1023)}},OC=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(let e=0;e<t.length;e++)t[e]=Math.trunc(Math.random()*65536)*65536+Math.trunc(Math.random()*65536);return t};typeof crypto<"u"&&crypto.getRandomValues&&(OC=t=>crypto.getRandomValues(t));var tL=class{constructor(){this.buffer=new Uint32Array(8),this.cursor=99}nextUint32(){return this.cursor>=this.buffer.length&&(OC(this.buffer),this.cursor=0),this.buffer[this.cursor++]}},PC,rL=()=>(PC||(PC=new eL)).generate();function nL(t){if(t.length>63)return!1;let e,r,n;for(r=0,n=t.length;r<n;r+=1)if(e=t.charCodeAt(r),!(e>96&&e<123))return!1;return!0}var Il=class{constructor(t,e=""){if(this.prefix=t,this.suffix=e,!nL(t))throw new Error("Invalid prefix. Must be at most 63 ascii letters [a-z]");if(this.prefix=t,e)this.suffix=e;else{let n=rL();this.suffix=Um(n.bytes)}if(this.suffix.length!==26)throw new Error(`Invalid length. Suffix should have 26 characters, got ${e.length}`);if(this.suffix[0]>"7")throw new Error("Invalid suffix. First character must be in the range [0-7]");let r=jb(this.suffix)}getType(){return this.prefix}getSuffix(){return this.suffix}asType(t){let e=this;if(e.prefix!==t)throw new Error(`Cannot convert TypeID of type ${e.prefix} to type ${t}`);return e}toUUIDBytes(){return jb(this.suffix)}toUUID(){return new Vm(this.toUUIDBytes()).toString()}toString(){return this.prefix===""?this.suffix:`${this.prefix}_${this.suffix}`}static fromString(t){let e=t.split("_");if(e.length===1)return new Il("",e[0]);if(e.length===2){if(e[0]==="")throw new Error(`Invalid TypeID. Prefix cannot be empty when there's a separator: ${t}`);return new Il(e[0],e[1])}throw new Error(`Invalid TypeID string: ${t}`)}static fromUUIDBytes(t,e){let r=Um(e);return new Il(t,r)}static fromUUID(t,e){let r=Um(xC(e));return new Il(t,r)}};function Zu(t="",e=""){return new Il(t,e)}function kC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function iL(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function qb(t,...e){if(!iL(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function IC(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");kC(t.outputLen),kC(t.blockLen)}function Bl(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function BC(t,e){qb(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Tl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function TC(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Km=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),as=(t,e)=>t<<32-e|t>>>e,sL=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!sL)throw new Error("Non little-endian hardware is not supported");function Mb(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Zf(t){if(typeof t=="string"&&(t=Mb(t)),!TC(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Hm(...t){let e=0;for(let n=0;n<t.length;n++){let s=t[n];if(!TC(s))throw new Error("Uint8Array expected");e+=s.length}let r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){let i=t[n];r.set(i,s),s+=i.length}return r}var Fl=class{clone(){return this._cloneInto()}},wme={}.toString;function Wm(t){let e=n=>t().update(Zf(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Qu(t=32){if(Tl&&typeof Tl.getRandomValues=="function")return Tl.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function oL(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var $l=class extends Fl{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Km(this.buffer)}update(e){Bl(this);let{view:r,buffer:n,blockLen:s}=this;e=Zf(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let u=Km(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Bl(this),BC(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;oL(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=Km(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var aL=(t,e,r)=>t&e^~t&r,uL=(t,e,r)=>t&e^t&r^e&r,cL=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ua=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Va=new Uint32Array(64),Lb=class extends $l{constructor(){super(64,32,8,!1),this.A=Ua[0]|0,this.B=Ua[1]|0,this.C=Ua[2]|0,this.D=Ua[3]|0,this.E=Ua[4]|0,this.F=Ua[5]|0,this.G=Ua[6]|0,this.H=Ua[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)Va[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let h=Va[d-15],f=Va[d-2],p=as(h,7)^as(h,18)^h>>>3,y=as(f,17)^as(f,19)^f>>>10;Va[d]=y+Va[d-7]+p+Va[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let d=0;d<64;d++){let h=as(a,6)^as(a,11)^as(a,25),f=l+h+aL(a,u,c)+cL[d]+Va[d]|0,y=(as(n,2)^as(n,13)^as(n,22))+uL(n,s,i)|0;l=c,c=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,u,c,l)}roundClean(){Va.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Hn=Wm(()=>new Lb);var fL=Kn($C(),1);function pL(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,w=0,P=0,C=p.length;P!==C&&p[P]===0;)P++,y++;for(var v=(C-P)*l+1>>>0,k=new Uint8Array(v);P!==C;){for(var I=p[P],T=0,j=v-1;(I!==0||T<w)&&j!==-1;j--,T++)I+=256*k[j]>>>0,k[j]=I%a>>>0,I=I/a>>>0;if(I!==0)throw new Error("Non-zero carry");w=T,P++}for(var g=v-w;g!==v&&k[g]===0;)g++;for(var b=u.repeat(y);g<v;++g)b+=t.charAt(k[g]);return b}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var w=0,P=0;p[y]===u;)w++,y++;for(var C=(p.length-y)*c+1>>>0,v=new Uint8Array(C);p[y];){var k=r[p.charCodeAt(y)];if(k===255)return;for(var I=0,T=C-1;(k!==0||I<P)&&T!==-1;T--,I++)k+=a*v[T]>>>0,v[T]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");P=I,y++}if(p[y]!==" "){for(var j=C-P;j!==C&&v[j]===0;)j++;for(var g=new Uint8Array(w+(C-j)),b=w;j!==C;)g[b++]=v[j++];return g}}}function f(p){var y=h(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var hL=pL,mL=hL,RC=mL;var Ime=new Uint8Array(0);var NC=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Rl=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Vb=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Kb=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jC(this,e)}},Hb=class{constructor(e){this.decoders=e}or(e){return jC(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},jC=(t,e)=>new Hb({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),Wb=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Vb(e,r,n),this.decoder=new Kb(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},qC=({name:t,prefix:e,encode:r,decode:n})=>new Wb(t,e,r,n),zb=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=RC(r,e);return qC({prefix:t,name:e,encode:n,decode:i=>Rl(s(i))})},gL=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},vL=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},In=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>qC({prefix:e,name:t,encode(s){return vL(s,n,r)},decode(s){return gL(s,n,r,t)}});var ep=In({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Rme=In({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Nme=In({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jme=In({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),qme=In({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Mme=In({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Lme=In({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ume=In({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jb=In({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Wn=zb({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Hme=zb({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Jme=In({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Gme=In({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),js=In({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Xme=In({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function MC(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function LC(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function Nl(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var tp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},UC=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}},Jm=new TextEncoder,ec=new TextDecoder,ne=class{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new ne(e,"ArrayBuffer")}static asyncIterable(e){if(!LC(e))throw new TypeError("Input must be of type AsyncIterable.");return new ne(e,"AsyncIterable")}static base32Z(e){return new ne(e,"Base32Z")}static base58Btc(e){return new ne(e,"Base58Btc")}static base64Url(e){return new ne(e,"Base64Url")}static bufferSource(e){return new ne(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new ne(e,"Hex")}static multibase(e){return new ne(e,"Multibase")}static object(e){return new ne(e,"Object")}static string(e){return new ne(e,"String")}static uint8Array(e){return new ne(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return Wn.baseDecode(this.data).buffer;case"Base64Url":return js.baseDecode(this.data).buffer;case"BufferSource":{if(Nl(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return MC(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return tp(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return Jb.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return Wn.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return Wn.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return js.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return js.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=Jm.encode(e);return js.baseEncode(r)}case"String":{let e=Jm.encode(this.data);return js.baseEncode(e)}case"Uint8Array":return js.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return tp(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u=[];try{for(var i=!0,o=UC(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;u.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return ne.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return ne.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=js.baseDecode(this.data),r=ec.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=ec.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return tp(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return ec.decode(this.data);case"Base64Url":{let e=js.baseDecode(this.data);return ec.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return ec.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return tp(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=UC(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let c=s;typeof c=="string"?u+=c:u+=ec.decode(c,{stream:!0})}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=ec.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return Jb.baseDecode(this.data);case"Base58Btc":return Wn.baseDecode(this.data);case"Base64Url":return js.baseDecode(this.data);case"BufferSource":{let e=Nl(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return Jm.encode(e)}case"String":return Jm.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return tp(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var No={};Zt(No,{decode:()=>jl,encodeTo:()=>tc,encodingLength:()=>rc});var bL=HC,VC=128,wL=127,EL=~wL,_L=Math.pow(2,31);function HC(t,e,r){e=e||[],r=r||0;for(var n=r;t>=_L;)e[r++]=t&255|VC,t/=128;for(;t&EL;)e[r++]=t&255|VC,t>>>=7;return e[r]=t|0,HC.bytes=r-n+1,e}var DL=Gb,SL=128,KC=127;function Gb(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Gb.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&KC)<<s:(o&KC)*Math.pow(2,s),s+=7}while(o>=SL);return Gb.bytes=i-n,r}var AL=Math.pow(2,7),xL=Math.pow(2,14),CL=Math.pow(2,21),PL=Math.pow(2,28),OL=Math.pow(2,35),kL=Math.pow(2,42),IL=Math.pow(2,49),BL=Math.pow(2,56),TL=Math.pow(2,63),FL=function(t){return t<AL?1:t<xL?2:t<CL?3:t<PL?4:t<OL?5:t<kL?6:t<IL?7:t<BL?8:t<TL?9:10},$L={encode:bL,decode:DL,encodingLength:FL},RL=$L,rp=RL;var jl=(t,e=0)=>[rp.decode(t,e),rp.decode.bytes],tc=(t,e,r=0)=>(rp.encode(t,e,r),e),rc=t=>rp.encodingLength(t);var Xb=(t,e)=>{let r=e.byteLength,n=rc(t),s=n+rc(r),i=new Uint8Array(s+r);return tc(t,i,0),tc(r,i,n),i.set(e,s),new ql(t,r,e,i)},WC=t=>{let e=Rl(t),[r,n]=jl(e),[s,i]=jl(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new ql(r,s,o,e)},zC=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&NC(t.bytes,r.bytes)}},ql=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var JC=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return jL(r,Zb(t),e||Wn.encoder);default:return qL(r,Zb(t),e||ep.encoder)}};var GC=new WeakMap,Zb=t=>{let e=GC.get(t);if(e==null){let r=new Map;return GC.set(t,r),r}return e},qr=class{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==np)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==ML)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return qr.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Xb(e,r);return qr.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return qr.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&zC(e.multihash,n.multihash)}toString(e){return JC(this,e)}toJSON(){return{"/":JC(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof qr)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new qr(n,s,i,o||XC(n,s,i.bytes))}else if(r[LL]===!0){let{version:n,multihash:s,code:i}=r,o=WC(s);return qr.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==np)throw new Error(`Version 0 CID must use dag-pb (code: ${np}) block encoding`);return new qr(e,r,n,n.bytes)}case 1:{let s=XC(e,r,n.bytes);return new qr(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return qr.create(0,np,e)}static createV1(e,r){return qr.create(1,e,r)}static decode(e){let[r,n]=qr.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=qr.inspectBytes(e),n=r.size-r.multihashSize,s=Rl(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new ql(r.multihashCode,r.digestSize,i,s);return[r.version===0?qr.createV0(o):qr.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,h]=jl(e.subarray(r));return r+=h,d},s=n(),i=np;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=NL(e,r),i=qr.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Zb(i).set(n,e),i}},NL=(t,e)=>{switch(t[0]){case"Q":{let r=e||Wn;return[Wn.prefix,r.decode(`${Wn.prefix}${t}`)]}case Wn.prefix:{let r=e||Wn;return[Wn.prefix,r.decode(t)]}case ep.prefix:{let r=e||ep;return[ep.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},jL=(t,e,r)=>{let{prefix:n}=r;if(n!==Wn.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},qL=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},np=112,ML=18,XC=(t,e,r)=>{let n=rc(t),s=n+rc(e),i=new Uint8Array(s+r.byteLength);return tc(t,i,0),tc(e,i,n),i.set(r,s),i},LL=Symbol.for("@ipld/js-cid/CID");var Qt=class{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=Qt.codeToName.has(n)?n:Qt.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=No.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),No.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=No.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=Qt.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=Qt.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){Qt.codeToName.set(e.code,e.name),Qt.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=No.decode(r),i=Qt.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};Qt.codeToName=new Map;Qt.nameToCode=new Map;Qt.registerCodec({code:237,name:"ed25519-pub"});Qt.registerCodec({code:4864,name:"ed25519-priv"});Qt.registerCodec({code:236,name:"x25519-pub"});Qt.registerCodec({code:4866,name:"x25519-priv"});Qt.registerCodec({code:231,name:"secp256k1-pub"});Qt.registerCodec({code:4865,name:"secp256k1-priv"});function Qb(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&Qb(t[e])})}var xV=Kn(tw(),1),bc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};var Ay=class{constructor(){this.store=new Map}clear(){return bc(this,void 0,void 0,function*(){this.store.clear()})}close(){return bc(this,void 0,void 0,function*(){})}delete(e){return bc(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return bc(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return bc(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return bc(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return bc(this,void 0,void 0,function*(){this.store.set(e,r)})}};var SJ=Kn(fE(),1);var AJ=Kn(fE(),1);var xJ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ld=class{static digest({data:e}){return xJ(this,void 0,void 0,function*(){return Hn(e)})}};var Qs=class{};var CJ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},n0=class extends Qs{digest({algorithm:e,data:r}){return CJ(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield ld.digest({data:r})}})}};var s0={};Zt(s0,{bitGet:()=>FJ,bitLen:()=>TJ,bitMask:()=>Rp,bitSet:()=>$J,bytesToHex:()=>Qo,bytesToNumberBE:()=>ea,bytesToNumberLE:()=>hs,concatBytes:()=>ra,createHmacDrbg:()=>mE,ensureBytes:()=>zt,equalBytes:()=>IJ,hexToBytes:()=>Bc,hexToNumber:()=>hE,isBytes:()=>ps,numberToBytesBE:()=>Gn,numberToBytesLE:()=>ta,numberToHexUnpadded:()=>y8,numberToVarBytesBE:()=>kJ,utf8ToBytes:()=>BJ,validateObject:()=>Ti});var m8=BigInt(0),i0=BigInt(1),PJ=BigInt(2);function ps(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var OJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Qo(t){if(!ps(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=OJ[t[r]];return e}function y8(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function hE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var Zo={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function p8(t){if(t>=Zo._0&&t<=Zo._9)return t-Zo._0;if(t>=Zo._A&&t<=Zo._F)return t-(Zo._A-10);if(t>=Zo._a&&t<=Zo._f)return t-(Zo._a-10)}function Bc(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=p8(t.charCodeAt(i)),a=p8(t.charCodeAt(i+1));if(o===void 0||a===void 0){let u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function ea(t){return hE(Qo(t))}function hs(t){if(!ps(t))throw new Error("Uint8Array expected");return hE(Qo(Uint8Array.from(t).reverse()))}function Gn(t,e){return Bc(t.toString(16).padStart(e*2,"0"))}function ta(t,e){return Gn(t,e).reverse()}function kJ(t){return Bc(y8(t))}function zt(t,e,r){let n;if(typeof e=="string")try{n=Bc(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(ps(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function ra(...t){let e=0;for(let s=0;s<t.length;s++){let i=t[s];if(!ps(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return r}function IJ(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function BJ(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function TJ(t){let e;for(e=0;t>m8;t>>=i0,e+=1);return e}function FJ(t,e){return t>>BigInt(e)&i0}var $J=(t,e,r)=>t|(r?i0:m8)<<BigInt(e),Rp=t=>(PJ<<BigInt(t-1))-i0,pE=t=>new Uint8Array(t),h8=t=>Uint8Array.from(t);function mE(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=pE(t),s=pE(t),i=0,o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),u=(d=pE())=>{s=a(h8([0]),d),n=a(),d.length!==0&&(s=a(h8([1]),d),n=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,h=[];for(;d<e;){n=a();let f=n.slice();h.push(f),d+=n.length}return ra(...h)};return(d,h)=>{o(),u(d);let f;for(;!(f=h(c()));)u();return o(),f}}var RJ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ps(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Ti(t,e,r={}){let n=(s,i,o)=>{let a=RJ[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let u=t[s];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${i}`)};for(let[s,i]of Object.entries(e))n(s,i,!1);for(let[s,i]of Object.entries(r))n(s,i,!0);return t}var Lr=BigInt(0),er=BigInt(1),Tc=BigInt(2),NJ=BigInt(3),yE=BigInt(4),g8=BigInt(5),v8=BigInt(8),jJ=BigInt(9),qJ=BigInt(16);function It(t,e){let r=t%e;return r>=Lr?r:e+r}function gE(t,e,r){if(r<=Lr||e<Lr)throw new Error("Expected power/modulo > 0");if(r===er)return Lr;let n=er;for(;e>Lr;)e&er&&(n=n*t%r),t=t*t%r,e>>=er;return n}function Jt(t,e,r){let n=t;for(;e-- >Lr;)n*=n,n%=r;return n}function o0(t,e){if(t===Lr||e<=Lr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=It(t,e),n=e,s=Lr,i=er,o=er,a=Lr;for(;r!==Lr;){let c=n/r,l=n%r,d=s-o*c,h=i-a*c;n=r,r=l,s=o,i=a,o=d,a=h}if(n!==er)throw new Error("invert: does not exist");return It(s,e)}function MJ(t){let e=(t-er)/Tc,r,n,s;for(r=t-er,n=0;r%Tc===Lr;r/=Tc,n++);for(s=Tc;s<t&&gE(s,e,t)!==t-er;s++);if(n===1){let o=(t+er)/yE;return function(u,c){let l=u.pow(c,o);if(!u.eql(u.sqr(l),c))throw new Error("Cannot find square root");return l}}let i=(r+er)/Tc;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,s),r),d=a.pow(u,i),h=a.pow(u,r);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let y=a.sqr(h);f<c&&!a.eql(y,a.ONE);f++)y=a.sqr(y);let p=a.pow(l,er<<BigInt(c-f-1));l=a.sqr(p),d=a.mul(d,p),h=a.mul(h,l),c=f}return d}}function LJ(t){if(t%yE===NJ){let e=(t+er)/yE;return function(n,s){let i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%v8===g8){let e=(t-g8)/v8;return function(n,s){let i=n.mul(s,Tc),o=n.pow(i,e),a=n.mul(s,o),u=n.mul(n.mul(a,Tc),o),c=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(c),s))throw new Error("Cannot find square root");return c}}return t%qJ,MJ(t)}var b8=(t,e)=>(It(t,e)&er)===er,UJ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function vE(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=UJ.reduce((n,s)=>(n[s]="function",n),e);return Ti(t,r)}function VJ(t,e,r){if(r<Lr)throw new Error("Expected power > 0");if(r===Lr)return t.ONE;if(r===er)return e;let n=t.ONE,s=e;for(;r>Lr;)r&er&&(n=t.mul(n,s)),s=t.sqr(s),r>>=er;return n}function KJ(t,e){let r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function bE(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function dd(t,e,r=!1,n={}){if(t<=Lr)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:s,nByteLength:i}=bE(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=LJ(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Rp(s),ZERO:Lr,ONE:er,create:u=>It(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Lr<=u&&u<t},is0:u=>u===Lr,isOdd:u=>(u&er)===er,neg:u=>It(-u,t),eql:(u,c)=>u===c,sqr:u=>It(u*u,t),add:(u,c)=>It(u+c,t),sub:(u,c)=>It(u-c,t),mul:(u,c)=>It(u*c,t),pow:(u,c)=>VJ(a,u,c),div:(u,c)=>It(u*o0(c,t),t),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>o0(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>KJ(a,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>r?ta(u,i):Gn(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return r?hs(u):ea(u)}});return Object.freeze(a)}function w8(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function E8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function wE(t){let e=E8(t);return e+Math.ceil(e/2)}function _8(t,e,r=!1){let n=t.length,s=E8(e),i=wE(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let o=r?ea(t):hs(t),a=It(o,e-er)+er;return r?ta(a,s):Gn(a,s)}var WJ=BigInt(0),EE=BigInt(1);function a0(t,e){let r=(s,i)=>{let o=i.negate();return s?o:i},n=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>WJ;)i&EE&&(o=o.add(a)),a=a.double(),i>>=EE;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=n(i),u=[],c=s,l=c;for(let d=0;d<o;d++){l=c,u.push(l);for(let h=1;h<a;h++)l=l.add(c),u.push(l);c=l.double()}return u},wNAF(s,i,o){let{windows:a,windowSize:u}=n(s),c=t.ZERO,l=t.BASE,d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){let y=p*u,w=Number(o&d);o>>=f,w>u&&(w-=h,o+=EE);let P=y,C=y+Math.abs(w)-1,v=p%2!==0,k=w<0;w===0?l=l.add(r(v,i[P])):c=c.add(r(k,i[C]))}return{p:c,f:l}},wNAFCached(s,i,o,a){let u=s._WINDOW_SIZE||1,c=i.get(s);return c||(c=this.precomputeWindow(s,u),u!==1&&i.set(s,a(c))),this.wNAF(u,c,o)}}}function Np(t){return vE(t.Fp),Ti(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bE(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function zJ(t){let e=Np(t);Ti(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:JJ,hexToBytes:GJ}=s0,Fc={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Fc;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:JJ(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Fc,r=typeof t=="string"?GJ(t):t;if(!ps(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=Fc._parseInt(r.subarray(2)),{d:o,l:a}=Fc._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){let e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{let l=c.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),u=r(o);return`30${r(o+i+4)}02${u}${s}02${a}${n}`}},na=BigInt(0),Fi=BigInt(1),rge=BigInt(2),D8=BigInt(3),nge=BigInt(4);function XJ(t){let e=zJ(t),{Fp:r}=e,n=e.toBytes||((p,y,w)=>{let P=y.toAffine();return ra(Uint8Array.from([4]),r.toBytes(P.x),r.toBytes(P.y))}),s=e.fromBytes||(p=>{let y=p.subarray(1),w=r.fromBytes(y.subarray(0,r.BYTES)),P=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x:w,y:P}});function i(p){let{a:y,b:w}=e,P=r.sqr(p),C=r.mul(P,p);return r.add(r.add(C,r.mul(p,y)),w)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&na<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(p){let{allowedPrivateKeyLengths:y,nByteLength:w,wrapPrivateKey:P,n:C}=e;if(y&&typeof p!="bigint"){if(ps(p)&&(p=Qo(p)),typeof p!="string"||!y.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:ea(zt("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return P&&(v=It(v,C)),a(v),v}let c=new Map;function l(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(y,w,P){if(this.px=y,this.py=w,this.pz=P,y==null||!r.isValid(y))throw new Error("x required");if(w==null||!r.isValid(w))throw new Error("y required");if(P==null||!r.isValid(P))throw new Error("z required")}static fromAffine(y){let{x:w,y:P}=y||{};if(!y||!r.isValid(w)||!r.isValid(P))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");let C=v=>r.eql(v,r.ZERO);return C(w)&&C(P)?d.ZERO:new d(w,P,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){let w=r.invertBatch(y.map(P=>P.pz));return y.map((P,C)=>P.toAffine(w[C])).map(d.fromAffine)}static fromHex(y){let w=d.fromAffine(s(zt("pointHex",y)));return w.assertValidity(),w}static fromPrivateKey(y){return d.BASE.multiply(u(y))}_setWindowSize(y){this._WINDOW_SIZE=y,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:y,y:w}=this.toAffine();if(!r.isValid(y)||!r.isValid(w))throw new Error("bad point: x or y not FE");let P=r.sqr(w),C=i(y);if(!r.eql(P,C))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);let{px:w,py:P,pz:C}=this,{px:v,py:k,pz:I}=y,T=r.eql(r.mul(w,I),r.mul(v,C)),j=r.eql(r.mul(P,I),r.mul(k,C));return T&&j}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:y,b:w}=e,P=r.mul(w,D8),{px:C,py:v,pz:k}=this,I=r.ZERO,T=r.ZERO,j=r.ZERO,g=r.mul(C,C),b=r.mul(v,v),E=r.mul(k,k),B=r.mul(C,v);return B=r.add(B,B),j=r.mul(C,k),j=r.add(j,j),I=r.mul(y,j),T=r.mul(P,E),T=r.add(I,T),I=r.sub(b,T),T=r.add(b,T),T=r.mul(I,T),I=r.mul(B,I),j=r.mul(P,j),E=r.mul(y,E),B=r.sub(g,E),B=r.mul(y,B),B=r.add(B,j),j=r.add(g,g),g=r.add(j,g),g=r.add(g,E),g=r.mul(g,B),T=r.add(T,g),E=r.mul(v,k),E=r.add(E,E),g=r.mul(E,B),I=r.sub(I,g),j=r.mul(E,b),j=r.add(j,j),j=r.add(j,j),new d(I,T,j)}add(y){l(y);let{px:w,py:P,pz:C}=this,{px:v,py:k,pz:I}=y,T=r.ZERO,j=r.ZERO,g=r.ZERO,b=e.a,E=r.mul(e.b,D8),B=r.mul(w,v),S=r.mul(P,k),N=r.mul(C,I),$=r.add(w,P),O=r.add(v,k);$=r.mul($,O),O=r.add(B,S),$=r.sub($,O),O=r.add(w,C);let F=r.add(v,I);return O=r.mul(O,F),F=r.add(B,N),O=r.sub(O,F),F=r.add(P,C),T=r.add(k,I),F=r.mul(F,T),T=r.add(S,N),F=r.sub(F,T),g=r.mul(b,O),T=r.mul(E,N),g=r.add(T,g),T=r.sub(S,g),g=r.add(S,g),j=r.mul(T,g),S=r.add(B,B),S=r.add(S,B),N=r.mul(b,N),O=r.mul(E,O),S=r.add(S,N),N=r.sub(B,N),N=r.mul(b,N),O=r.add(O,N),B=r.mul(S,O),j=r.add(j,B),B=r.mul(F,O),T=r.mul($,T),T=r.sub(T,B),B=r.mul($,S),g=r.mul(F,g),g=r.add(g,B),new d(T,j,g)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return f.wNAFCached(this,c,y,w=>{let P=r.invertBatch(w.map(C=>C.pz));return w.map((C,v)=>C.toAffine(P[v])).map(d.fromAffine)})}multiplyUnsafe(y){let w=d.ZERO;if(y===na)return w;if(a(y),y===Fi)return this;let{endo:P}=e;if(!P)return f.unsafeLadder(this,y);let{k1neg:C,k1:v,k2neg:k,k2:I}=P.splitScalar(y),T=w,j=w,g=this;for(;v>na||I>na;)v&Fi&&(T=T.add(g)),I&Fi&&(j=j.add(g)),g=g.double(),v>>=Fi,I>>=Fi;return C&&(T=T.negate()),k&&(j=j.negate()),j=new d(r.mul(j.px,P.beta),j.py,j.pz),T.add(j)}multiply(y){a(y);let w=y,P,C,{endo:v}=e;if(v){let{k1neg:k,k1:I,k2neg:T,k2:j}=v.splitScalar(w),{p:g,f:b}=this.wNAF(I),{p:E,f:B}=this.wNAF(j);g=f.constTimeNegate(k,g),E=f.constTimeNegate(T,E),E=new d(r.mul(E.px,v.beta),E.py,E.pz),P=g.add(E),C=b.add(B)}else{let{p:k,f:I}=this.wNAF(w);P=k,C=I}return d.normalizeZ([P,C])[0]}multiplyAndAddUnsafe(y,w,P){let C=d.BASE,v=(I,T)=>T===na||T===Fi||!I.equals(C)?I.multiplyUnsafe(T):I.multiply(T),k=v(this,w).add(v(y,P));return k.is0()?void 0:k}toAffine(y){let{px:w,py:P,pz:C}=this,v=this.is0();y==null&&(y=v?r.ONE:r.inv(C));let k=r.mul(w,y),I=r.mul(P,y),T=r.mul(C,y);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(T,r.ONE))throw new Error("invZ was invalid");return{x:k,y:I}}isTorsionFree(){let{h:y,isTorsionFree:w}=e;if(y===Fi)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:y,clearCofactor:w}=e;return y===Fi?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return this.assertValidity(),n(d,this,y)}toHex(y=!0){return Qo(this.toRawBytes(y))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let h=e.nBitLength,f=a0(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:o}}function YJ(t){let e=Np(t);return Ti(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function S8(t){let e=YJ(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(O){return na<O&&O<r.ORDER}function a(O){return It(O,n)}function u(O){return o0(O,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:h}=XJ({...e,toBytes(O,F,U){let M=F.toAffine(),R=r.toBytes(M.x),K=ra;return U?K(Uint8Array.from([F.hasEvenY()?2:3]),R):K(Uint8Array.from([4]),R,r.toBytes(M.y))},fromBytes(O){let F=O.length,U=O[0],M=O.subarray(1);if(F===s&&(U===2||U===3)){let R=ea(M);if(!o(R))throw new Error("Point is not on curve");let K=d(R),z=r.sqrt(K),ee=(z&Fi)===Fi;return(U&1)===1!==ee&&(z=r.neg(z)),{x:R,y:z}}else if(F===i&&U===4){let R=r.fromBytes(M.subarray(0,r.BYTES)),K=r.fromBytes(M.subarray(r.BYTES,2*r.BYTES));return{x:R,y:K}}else throw new Error(`Point of length ${F} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=O=>Qo(Gn(O,e.nByteLength));function p(O){let F=n>>Fi;return O>F}function y(O){return p(O)?a(-O):O}let w=(O,F,U)=>ea(O.slice(F,U));class P{constructor(F,U,M){this.r=F,this.s=U,this.recovery=M,this.assertValidity()}static fromCompact(F){let U=e.nByteLength;return F=zt("compactSignature",F,U*2),new P(w(F,0,U),w(F,U,2*U))}static fromDER(F){let{r:U,s:M}=Fc.toSig(zt("DER",F));return new P(U,M)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new P(this.r,this.s,F)}recoverPublicKey(F){let{r:U,s:M,recovery:R}=this,K=j(zt("msgHash",F));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");let z=R===2||R===3?U+e.n:U;if(z>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let ee=R&1?"03":"02",ce=c.fromHex(ee+f(z)),re=u(z),ie=a(-K*re),ue=a(M*re),ye=c.BASE.multiplyAndAddUnsafe(ce,ie,ue);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new P(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Bc(this.toDERHex())}toDERHex(){return Fc.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bc(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}let C={isValidPrivateKey(O){try{return l(O),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let O=wE(e.n);return _8(e.randomBytes(O),e.n)},precompute(O=8,F=c.BASE){return F._setWindowSize(O),F.multiply(BigInt(3)),F}};function v(O,F=!0){return c.fromPrivateKey(O).toRawBytes(F)}function k(O){let F=ps(O),U=typeof O=="string",M=(F||U)&&O.length;return F?M===s||M===i:U?M===2*s||M===2*i:O instanceof c}function I(O,F,U=!0){if(k(O))throw new Error("first arg must be private key");if(!k(F))throw new Error("second arg must be public key");return c.fromHex(F).multiply(l(O)).toRawBytes(U)}let T=e.bits2int||function(O){let F=ea(O),U=O.length*8-e.nBitLength;return U>0?F>>BigInt(U):F},j=e.bits2int_modN||function(O){return a(T(O))},g=Rp(e.nBitLength);function b(O){if(typeof O!="bigint")throw new Error("bigint expected");if(!(na<=O&&O<g))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Gn(O,e.nByteLength)}function E(O,F,U=B){if(["recovered","canonical"].some(He=>He in U))throw new Error("sign() legacy options not supported");let{hash:M,randomBytes:R}=e,{lowS:K,prehash:z,extraEntropy:ee}=U;K==null&&(K=!0),O=zt("msgHash",O),z&&(O=zt("prehashed msgHash",M(O)));let ce=j(O),re=l(F),ie=[b(re),b(ce)];if(ee!=null){let He=ee===!0?R(r.BYTES):ee;ie.push(zt("extraEntropy",He))}let ue=ra(...ie),ye=ce;function ke(He){let Xe=T(He);if(!h(Xe))return;let Me=u(Xe),Le=c.BASE.multiply(Xe).toAffine(),pt=a(Le.x);if(pt===na)return;let je=a(Me*a(ye+pt*re));if(je===na)return;let at=(Le.x===pt?0:2)|Number(Le.y&Fi),wr=je;return K&&p(je)&&(wr=y(je),at^=1),new P(pt,wr,at)}return{seed:ue,k2sig:ke}}let B={lowS:e.lowS,prehash:!1},S={lowS:e.lowS,prehash:!1};function N(O,F,U=B){let{seed:M,k2sig:R}=E(O,F,U),K=e;return mE(K.hash.outputLen,K.nByteLength,K.hmac)(M,R)}c.BASE._setWindowSize(8);function $(O,F,U,M=S){let R=O;if(F=zt("msgHash",F),U=zt("publicKey",U),"strict"in M)throw new Error("options.strict was renamed to lowS");let{lowS:K,prehash:z}=M,ee,ce;try{if(typeof R=="string"||ps(R))try{ee=P.fromDER(R)}catch(Le){if(!(Le instanceof Fc.Err))throw Le;ee=P.fromCompact(R)}else if(typeof R=="object"&&typeof R.r=="bigint"&&typeof R.s=="bigint"){let{r:Le,s:pt}=R;ee=new P(Le,pt)}else throw new Error("PARSE");ce=c.fromHex(U)}catch(Le){if(Le.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&ee.hasHighS())return!1;z&&(F=e.hash(F));let{r:re,s:ie}=ee,ue=j(F),ye=u(ie),ke=a(ue*ye),He=a(re*ye),Xe=c.BASE.multiplyAndAddUnsafe(ce,ke,He)?.toAffine();return Xe?a(Xe.x)===re:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:I,sign:N,verify:$,ProjectivePoint:c,Signature:P,utils:C}}var u0=class extends Fl{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,IC(e);let n=Zf(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Bl(this),this.iHash.update(e),this}digestInto(e){Bl(this),qb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},_E=(t,e,r)=>new u0(t,e).update(r).digest();_E.create=(t,e)=>new u0(t,e);function ZJ(t){return{hash:t,hmac:(e,...r)=>_E(t,e,Hm(...r)),randomBytes:Qu}}function c0(t,e){let r=n=>S8({...t,...ZJ(n)});return Object.freeze({...r(e),create:r})}var C8=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),A8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),QJ=BigInt(1),DE=BigInt(2),x8=(t,e)=>(t+e/DE)/e;function eG(t){let e=C8,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,l=c*c*t%e,d=Jt(l,r,e)*l%e,h=Jt(d,r,e)*l%e,f=Jt(h,DE,e)*c%e,p=Jt(f,s,e)*f%e,y=Jt(p,i,e)*p%e,w=Jt(y,a,e)*y%e,P=Jt(w,u,e)*w%e,C=Jt(P,a,e)*y%e,v=Jt(C,r,e)*l%e,k=Jt(v,o,e)*p%e,I=Jt(k,n,e)*c%e,T=Jt(I,DE,e);if(!SE.eql(SE.sqr(T),t))throw new Error("Cannot find square root");return T}var SE=dd(C8,void 0,void 0,{sqrt:eG}),Xn=c0({a:BigInt(0),b:BigInt(7),Fp:SE,n:A8,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=A8,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-QJ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=x8(i*t,e),u=x8(-n*t,e),c=It(t-a*r-u*s,e),l=It(-a*n-u*i,e),d=c>o,h=l>o;if(d&&(c=e-c),h&&(l=e-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:h,k2:l}}}},Hn),mge=BigInt(0);var yge=Xn.ProjectivePoint;function P8(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var tG=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},AE="urn:jwk:";function nt({jwk:t}){return tG(this,void 0,void 0,function*(){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);Qb(r);let n=P8(r),s=ne.string(n).toUint8Array(),i=yield ld.digest({data:s});return ne.uint8Array(i).toBase64Url()})}function eo(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function fd(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function to(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function pd(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function O8(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var un=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},rG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},tr=class{static adjustSignatureToLowS({signature:e}){return un(this,void 0,void 0,function*(){let r=Xn.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return un(this,void 0,void 0,function*(){let r=yield tr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:ne.uint8Array(e).toBase64Url(),x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){let r=yield tr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){return Xn.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return un(this,void 0,void 0,function*(){let r=yield tr.privateKeyToBytes({privateKey:e}),n=yield tr.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:ne.uint8Array(n.x).toBase64Url(),y:ne.uint8Array(n.y).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return un(this,void 0,void 0,function*(){return Xn.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){return Xn.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return un(this,void 0,void 0,function*(){let e=Xn.utils.randomPrivateKey(),r=yield tr.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return un(this,void 0,void 0,function*(){if(!(eo(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:n}=e,s=rG(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return un(this,void 0,void 0,function*(){if(!eo(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return un(this,void 0,void 0,function*(){if(!(fd(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ne.base64Url(e.x).toUint8Array(),s=ne.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return un(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield tr.privateKeyToBytes({privateKey:e}),s=yield tr.publicKeyToBytes({publicKey:r});return Xn.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return un(this,void 0,void 0,function*(){let n=yield tr.privateKeyToBytes({privateKey:r}),s=Hn(e);return Xn.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return un(this,void 0,void 0,function*(){return Xn.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return un(this,void 0,void 0,function*(){try{Xn.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return un(this,void 0,void 0,function*(){let s=yield tr.publicKeyToBytes({publicKey:e}),i=Hn(n);return Xn.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return un(this,void 0,void 0,function*(){e.byteLength===32&&(e=Xn.getPublicKey(e));let r=Xn.ProjectivePoint.fromHex(e),n=Gn(r.x,32),s=Gn(r.y,32);return{x:n,y:s}})}};var k8=dd(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),nG=k8.create(BigInt("-3")),iG=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),sG=c0({a:nG,b:iG,Fp:k8,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Hn),mi=sG;var cn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},oG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},cr=class{static adjustSignatureToLowS({signature:e}){return cn(this,void 0,void 0,function*(){let r=mi.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return cn(this,void 0,void 0,function*(){let r=yield cr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:ne.uint8Array(e).toBase64Url(),x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return cn(this,void 0,void 0,function*(){let r=yield cr.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:ne.uint8Array(r.x).toBase64Url(),y:ne.uint8Array(r.y).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return cn(this,void 0,void 0,function*(){return mi.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return cn(this,void 0,void 0,function*(){let r=yield cr.privateKeyToBytes({privateKey:e}),n=yield cr.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:ne.uint8Array(n.x).toBase64Url(),y:ne.uint8Array(n.y).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return cn(this,void 0,void 0,function*(){return mi.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return cn(this,void 0,void 0,function*(){return mi.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return cn(this,void 0,void 0,function*(){let e=mi.utils.randomPrivateKey(),r=yield cr.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return cn(this,void 0,void 0,function*(){if(!(eo(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:n}=e,s=oG(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return cn(this,void 0,void 0,function*(){if(!eo(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return cn(this,void 0,void 0,function*(){if(!(fd(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ne.base64Url(e.x).toUint8Array(),s=ne.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return cn(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield cr.privateKeyToBytes({privateKey:e}),s=yield cr.publicKeyToBytes({publicKey:r});return mi.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return cn(this,void 0,void 0,function*(){let n=yield cr.privateKeyToBytes({privateKey:r}),s=Hn(e);return mi.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return cn(this,void 0,void 0,function*(){return mi.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return cn(this,void 0,void 0,function*(){try{mi.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return cn(this,void 0,void 0,function*(){let s=yield cr.publicKeyToBytes({publicKey:e}),i=Hn(n);return mi.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return cn(this,void 0,void 0,function*(){e.byteLength===32&&(e=mi.getPublicKey(e));let r=mi.ProjectivePoint.fromHex(e),n=Gn(r.x,32),s=Gn(r.y,32);return{x:n,y:s}})}};var jp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},qp=class extends Qs{computePublicKey({key:e}){return jp(this,void 0,void 0,function*(){if(!eo(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield tr.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield cr.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return jp(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{let r=yield tr.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=yield cr.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return jp(this,void 0,void 0,function*(){if(!eo(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield tr.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield cr.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return jp(this,void 0,void 0,function*(){if(!eo(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield tr.sign({key:e,data:r});case"P-256":return yield cr.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return jp(this,void 0,void 0,function*(){if(!fd(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield tr.verify({key:e,signature:r,data:n});case"P-256":return yield cr.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var l0=BigInt(4294967295),xE=BigInt(32);function I8(t,e=!1){return e?{h:Number(t&l0),l:Number(t>>xE&l0)}:{h:Number(t>>xE&l0)|0,l:Number(t&l0)|0}}function aG(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:i,l:o}=I8(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}var uG=(t,e)=>BigInt(t>>>0)<<xE|BigInt(e>>>0),cG=(t,e,r)=>t>>>r,lG=(t,e,r)=>t<<32-r|e>>>r,dG=(t,e,r)=>t>>>r|e<<32-r,fG=(t,e,r)=>t<<32-r|e>>>r,pG=(t,e,r)=>t<<64-r|e>>>r-32,hG=(t,e,r)=>t>>>r-32|e<<64-r,mG=(t,e)=>e,yG=(t,e)=>t,gG=(t,e,r)=>t<<r|e>>>32-r,vG=(t,e,r)=>e<<r|t>>>32-r,bG=(t,e,r)=>e<<r-32|t>>>64-r,wG=(t,e,r)=>t<<r-32|e>>>64-r;function EG(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var _G=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),DG=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,SG=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),AG=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,xG=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),CG=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0;var PG={fromBig:I8,split:aG,toBig:uG,shrSH:cG,shrSL:lG,rotrSH:dG,rotrSL:fG,rotrBH:pG,rotrBL:hG,rotr32H:mG,rotr32L:yG,rotlSH:gG,rotlSL:vG,rotlBH:bG,rotlBL:wG,add:EG,add3L:_G,add3H:DG,add4L:SG,add4H:AG,add5H:CG,add5L:xG},Ze=PG;var[OG,kG]=(()=>Ze.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),nu=new Uint32Array(80),iu=new Uint32Array(80),CE=class extends $l{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:c,El:l,Fh:d,Fl:h,Gh:f,Gl:p,Hh:y,Hl:w}=this;return[e,r,n,s,i,o,a,u,c,l,d,h,f,p,y,w]}set(e,r,n,s,i,o,a,u,c,l,d,h,f,p,y,w){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=l|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=y|0,this.Hl=w|0}process(e,r){for(let v=0;v<16;v++,r+=4)nu[v]=e.getUint32(r),iu[v]=e.getUint32(r+=4);for(let v=16;v<80;v++){let k=nu[v-15]|0,I=iu[v-15]|0,T=Ze.rotrSH(k,I,1)^Ze.rotrSH(k,I,8)^Ze.shrSH(k,I,7),j=Ze.rotrSL(k,I,1)^Ze.rotrSL(k,I,8)^Ze.shrSL(k,I,7),g=nu[v-2]|0,b=iu[v-2]|0,E=Ze.rotrSH(g,b,19)^Ze.rotrBH(g,b,61)^Ze.shrSH(g,b,6),B=Ze.rotrSL(g,b,19)^Ze.rotrBL(g,b,61)^Ze.shrSL(g,b,6),S=Ze.add4L(j,B,iu[v-7],iu[v-16]),N=Ze.add4H(S,T,E,nu[v-7],nu[v-16]);nu[v]=N|0,iu[v]=S|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:c,Dl:l,Eh:d,El:h,Fh:f,Fl:p,Gh:y,Gl:w,Hh:P,Hl:C}=this;for(let v=0;v<80;v++){let k=Ze.rotrSH(d,h,14)^Ze.rotrSH(d,h,18)^Ze.rotrBH(d,h,41),I=Ze.rotrSL(d,h,14)^Ze.rotrSL(d,h,18)^Ze.rotrBL(d,h,41),T=d&f^~d&y,j=h&p^~h&w,g=Ze.add5L(C,I,j,kG[v],iu[v]),b=Ze.add5H(g,P,k,T,OG[v],nu[v]),E=g|0,B=Ze.rotrSH(n,s,28)^Ze.rotrBH(n,s,34)^Ze.rotrBH(n,s,39),S=Ze.rotrSL(n,s,28)^Ze.rotrBL(n,s,34)^Ze.rotrBL(n,s,39),N=n&i^n&a^i&a,$=s&o^s&u^o&u;P=y|0,C=w|0,y=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ze.add(c|0,l|0,b|0,E|0),c=a|0,l=u|0,a=i|0,u=o|0,i=n|0,o=s|0;let O=Ze.add3L(E,S,$);n=Ze.add3H(O,b,B,N),s=O|0}({h:n,l:s}=Ze.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Ze.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=Ze.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l}=Ze.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:d,l:h}=Ze.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ze.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:y,l:w}=Ze.add(this.Gh|0,this.Gl|0,y|0,w|0),{h:P,l:C}=Ze.add(this.Hh|0,this.Hl|0,P|0,C|0),this.set(n,s,i,o,a,u,c,l,d,h,f,p,y,w,P,C)}roundClean(){nu.fill(0),iu.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var PE=Wm(()=>new CE);var ms=BigInt(0),yi=BigInt(1),d0=BigInt(2),IG=BigInt(8),BG={zip215:!0};function TG(t){let e=Np(t);return Ti(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function f0(t){let e=TG(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=e,c=d0<<BigInt(a*8)-yi,l=r.create,d=e.uvRatio||((M,R)=>{try{return{isValid:!0,value:r.sqrt(M*r.inv(R))}}catch{return{isValid:!1,value:ms}}}),h=e.adjustScalarBytes||(M=>M),f=e.domain||((M,R,K)=>{if(R.length||K)throw new Error("Contexts/pre-hash are not supported");return M}),p=M=>typeof M=="bigint"&&ms<M,y=(M,R)=>p(M)&&p(R)&&M<R,w=M=>M===ms||y(M,c);function P(M,R){if(y(M,R))return M;throw new Error(`Expected valid scalar < ${R}, got ${typeof M} ${M}`)}function C(M){return M===ms?M:P(M,n)}let v=new Map;function k(M){if(!(M instanceof I))throw new Error("ExtendedPoint expected")}class I{constructor(R,K,z,ee){if(this.ex=R,this.ey=K,this.ez=z,this.et=ee,!w(R))throw new Error("x required");if(!w(K))throw new Error("y required");if(!w(z))throw new Error("z required");if(!w(ee))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof I)throw new Error("extended point not allowed");let{x:K,y:z}=R||{};if(!w(K)||!w(z))throw new Error("invalid affine point");return new I(K,z,yi,l(K*z))}static normalizeZ(R){let K=r.invertBatch(R.map(z=>z.ez));return R.map((z,ee)=>z.toAffine(K[ee])).map(I.fromAffine)}_setWindowSize(R){this._WINDOW_SIZE=R,v.delete(this)}assertValidity(){let{a:R,d:K}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:z,ey:ee,ez:ce,et:re}=this,ie=l(z*z),ue=l(ee*ee),ye=l(ce*ce),ke=l(ye*ye),He=l(ie*R),Xe=l(ye*l(He+ue)),Me=l(ke+l(K*l(ie*ue)));if(Xe!==Me)throw new Error("bad point: equation left != right (1)");let Le=l(z*ee),pt=l(ce*re);if(Le!==pt)throw new Error("bad point: equation left != right (2)")}equals(R){k(R);let{ex:K,ey:z,ez:ee}=this,{ex:ce,ey:re,ez:ie}=R,ue=l(K*ie),ye=l(ce*ee),ke=l(z*ie),He=l(re*ee);return ue===ye&&ke===He}is0(){return this.equals(I.ZERO)}negate(){return new I(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:R}=e,{ex:K,ey:z,ez:ee}=this,ce=l(K*K),re=l(z*z),ie=l(d0*l(ee*ee)),ue=l(R*ce),ye=K+z,ke=l(l(ye*ye)-ce-re),He=ue+re,Xe=He-ie,Me=ue-re,Le=l(ke*Xe),pt=l(He*Me),je=l(ke*Me),at=l(Xe*He);return new I(Le,pt,at,je)}add(R){k(R);let{a:K,d:z}=e,{ex:ee,ey:ce,ez:re,et:ie}=this,{ex:ue,ey:ye,ez:ke,et:He}=R;if(K===BigInt(-1)){let Ma=l((ce-ee)*(ye+ue)),bt=l((ce+ee)*(ye-ue)),sr=l(bt-Ma);if(sr===ms)return this.double();let Te=l(re*d0*He),_r=l(ie*d0*ke),St=_r+Te,$s=bt+Ma,zu=_r-Te,Vn=l(St*sr),Rs=l($s*zu),os=l(St*zu),gr=l(sr*$s);return new I(Vn,Rs,gr,os)}let Xe=l(ee*ue),Me=l(ce*ye),Le=l(ie*z*He),pt=l(re*ke),je=l((ee+ce)*(ue+ye)-Xe-Me),at=pt-Le,wr=pt+Le,Fs=l(Me-K*Xe),ss=l(je*at),To=l(wr*Fs),Er=l(je*Fs),Un=l(at*wr);return new I(ss,To,Un,Er)}subtract(R){return this.add(R.negate())}wNAF(R){return g.wNAFCached(this,v,R,I.normalizeZ)}multiply(R){let{p:K,f:z}=this.wNAF(P(R,n));return I.normalizeZ([K,z])[0]}multiplyUnsafe(R){let K=C(R);return K===ms?j:this.equals(j)||K===yi?this:this.equals(T)?this.wNAF(K).p:g.unsafeLadder(this,K)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return g.unsafeLadder(this,n).is0()}toAffine(R){let{ex:K,ey:z,ez:ee}=this,ce=this.is0();R==null&&(R=ce?IG:r.inv(ee));let re=l(K*R),ie=l(z*R),ue=l(ee*R);if(ce)return{x:ms,y:yi};if(ue!==yi)throw new Error("invZ was invalid");return{x:re,y:ie}}clearCofactor(){let{h:R}=e;return R===yi?this:this.multiplyUnsafe(R)}static fromHex(R,K=!1){let{d:z,a:ee}=e,ce=r.BYTES;R=zt("pointHex",R,ce);let re=R.slice(),ie=R[ce-1];re[ce-1]=ie&-129;let ue=hs(re);ue===ms||(K?P(ue,c):P(ue,r.ORDER));let ye=l(ue*ue),ke=l(ye-yi),He=l(z*ye-ee),{isValid:Xe,value:Me}=d(ke,He);if(!Xe)throw new Error("Point.fromHex: invalid y coordinate");let Le=(Me&yi)===yi,pt=(ie&128)!==0;if(!K&&Me===ms&&pt)throw new Error("Point.fromHex: x=0 and x_0=1");return pt!==Le&&(Me=l(-Me)),I.fromAffine({x:Me,y:ue})}static fromPrivateKey(R){return B(R).point}toRawBytes(){let{x:R,y:K}=this.toAffine(),z=ta(K,r.BYTES);return z[z.length-1]|=R&yi?128:0,z}toHex(){return Qo(this.toRawBytes())}}I.BASE=new I(e.Gx,e.Gy,yi,l(e.Gx*e.Gy)),I.ZERO=new I(ms,yi,yi,ms);let{BASE:T,ZERO:j}=I,g=a0(I,a*8);function b(M){return It(M,n)}function E(M){return b(hs(M))}function B(M){let R=a;M=zt("private key",M,R);let K=zt("hashed private key",i(M),2*R),z=h(K.slice(0,R)),ee=K.slice(R,2*R),ce=E(z),re=T.multiply(ce),ie=re.toRawBytes();return{head:z,prefix:ee,scalar:ce,point:re,pointBytes:ie}}function S(M){return B(M).pointBytes}function N(M=new Uint8Array,...R){let K=ra(...R);return E(i(f(K,zt("context",M),!!s)))}function $(M,R,K={}){M=zt("message",M),s&&(M=s(M));let{prefix:z,scalar:ee,pointBytes:ce}=B(R),re=N(K.context,z,M),ie=T.multiply(re).toRawBytes(),ue=N(K.context,ie,ce,M),ye=b(re+ue*ee);C(ye);let ke=ra(ie,ta(ye,r.BYTES));return zt("result",ke,a*2)}let O=BG;function F(M,R,K,z=O){let{context:ee,zip215:ce}=z,re=r.BYTES;M=zt("signature",M,2*re),R=zt("message",R),s&&(R=s(R));let ie=hs(M.slice(re,2*re)),ue,ye,ke;try{ue=I.fromHex(K,ce),ye=I.fromHex(M.slice(0,re),ce),ke=T.multiplyUnsafe(ie)}catch{return!1}if(!ce&&ue.isSmallOrder())return!1;let He=N(ee,ye.toRawBytes(),ue.toRawBytes(),R);return ye.add(ue.multiplyUnsafe(He)).subtract(ke).clearCofactor().equals(I.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:S,sign:$,verify:F,ExtendedPoint:I,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(r.BYTES),precompute(M=8,R=I.BASE){return R._setWindowSize(M),R.multiply(BigInt(3)),R}}}}var Mp=BigInt(0),OE=BigInt(1);function FG(t){return Ti(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function B8(t){let e=FG(t),{P:r}=e,n=v=>It(v,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(v=>v),u=e.powPminus2||(v=>gE(v,r-BigInt(2),r));function c(v,k,I){let T=n(v*(k-I));return k=n(k-T),I=n(I+T),[k,I]}function l(v){if(typeof v=="bigint"&&Mp<=v&&v<r)return v;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let d=(e.a-BigInt(2))/BigInt(4);function h(v,k){let I=l(v),T=l(k),j=I,g=OE,b=Mp,E=I,B=OE,S=Mp,N;for(let O=BigInt(s-1);O>=Mp;O--){let F=T>>O&OE;S^=F,N=c(S,g,E),g=N[0],E=N[1],N=c(S,b,B),b=N[0],B=N[1],S=F;let U=g+b,M=n(U*U),R=g-b,K=n(R*R),z=M-K,ee=E+B,ce=E-B,re=n(ce*U),ie=n(ee*R),ue=re+ie,ye=re-ie;E=n(ue*ue),B=n(j*n(ye*ye)),g=n(M*K),b=n(z*(M+n(d*z)))}N=c(S,g,E),g=N[0],E=N[1],N=c(S,b,B),b=N[0],B=N[1];let $=u(b);return n(g*$)}function f(v){return ta(n(v),i)}function p(v){let k=zt("u coordinate",v,i);return o===32&&(k[31]&=127),hs(k)}function y(v){let k=zt("scalar",v),I=k.length;if(I!==i&&I!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${I}`);return hs(a(k))}function w(v,k){let I=p(k),T=y(v),j=h(I,T);if(j===Mp)throw new Error("Invalid private or public key received");return f(j)}let P=f(e.Gu);function C(v){return w(v,P)}return{scalarMult:w,scalarMultBase:C,getSharedSecret:(v,k)=>w(v,k),getPublicKey:v=>C(v),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:P}}var Lp=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),T8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),ave=BigInt(0),$G=BigInt(1),kE=BigInt(2),RG=BigInt(5),F8=BigInt(10),NG=BigInt(20),jG=BigInt(40),$8=BigInt(80);function R8(t){let e=Lp,n=t*t%e*t%e,s=Jt(n,kE,e)*n%e,i=Jt(s,$G,e)*t%e,o=Jt(i,RG,e)*i%e,a=Jt(o,F8,e)*o%e,u=Jt(a,NG,e)*a%e,c=Jt(u,jG,e)*u%e,l=Jt(c,$8,e)*c%e,d=Jt(l,$8,e)*c%e,h=Jt(d,F8,e)*o%e;return{pow_p_5_8:Jt(h,kE,e)*t%e,b2:n}}function N8(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function qG(t,e){let r=Lp,n=It(e*e*e,r),s=It(n*n*e,r),i=R8(t*s).pow_p_5_8,o=It(t*n*i,r),a=It(e*o*o,r),u=o,c=It(o*T8,r),l=a===t,d=a===It(-t,r),h=a===It(-t*T8,r);return l&&(o=u),(d||h)&&(o=c),b8(o,r)&&(o=It(-o,r)),{isValid:l||d,value:o}}var $i=dd(Lp,void 0,!0),Up={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:$i,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:PE,randomBytes:Qu,adjustScalarBytes:N8,uvRatio:qG},su=f0(Up);function j8(t,e,r){if(e.length>255)throw new Error("Context is too big");return Hm(Mb("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var uve=f0({...Up,domain:j8}),cve=f0({...Up,domain:j8,prehash:PE}),$c=(()=>B8({P:Lp,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=Lp,{pow_p_5_8:r,b2:n}=R8(t);return It(Jt(r,BigInt(3),e)*n,e)},adjustScalarBytes:N8,randomBytes:Qu}))();function q8(t){let{y:e}=su.ExtendedPoint.fromHex(t),r=BigInt(1);return $i.toBytes($i.create((r+e)*$i.inv(r-e)))}function M8(t){let e=Up.hash(t.subarray(0,32));return Up.adjustScalarBytes(e).subarray(0,32)}var MG=($i.ORDER+BigInt(3))/BigInt(8),lve=$i.pow(kE,MG),dve=$i.sqrt($i.neg($i.ONE)),fve=($i.ORDER-BigInt(5))/BigInt(8),pve=BigInt(486662);var hve=w8($i,$i.neg(BigInt(486664)));var mve=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),yve=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),gve=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),vve=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var bve=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ri=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},LG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Wt=class{static bytesToPrivateKey({privateKeyBytes:e}){return Ri(this,void 0,void 0,function*(){let r=su.getPublicKey(e),n={crv:"Ed25519",d:ne.uint8Array(e).toBase64Url(),kty:"OKP",x:ne.uint8Array(r).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Ri(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"Ed25519",x:ne.uint8Array(e).toBase64Url()};return r.kid=yield nt({jwk:r}),r})}static computePublicKey({key:e}){return Ri(this,void 0,void 0,function*(){let r=yield Wt.privateKeyToBytes({privateKey:e}),n=su.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:ne.uint8Array(n).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:e}){return Ri(this,void 0,void 0,function*(){let r=yield Wt.privateKeyToBytes({privateKey:e}),n=M8(r),s=$c.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:ne.uint8Array(n).toBase64Url(),x:ne.uint8Array(s).toBase64Url()};return i.kid=yield nt({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:e}){return Ri(this,void 0,void 0,function*(){let r=yield Wt.publicKeyToBytes({publicKey:e});if(!(yield Wt.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");let s=q8(r),i={kty:"OKP",crv:"X25519",x:ne.uint8Array(s).toBase64Url()};return i.kid=yield nt({jwk:i}),i})}static generateKey(){return Ri(this,void 0,void 0,function*(){let e=su.utils.randomPrivateKey(),r=yield Wt.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return Ri(this,void 0,void 0,function*(){if(!(to(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:n}=e,s=LG(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Ri(this,void 0,void 0,function*(){if(!to(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Ri(this,void 0,void 0,function*(){if(!pd(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return ne.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return Ri(this,void 0,void 0,function*(){let n=yield Wt.privateKeyToBytes({privateKey:e});return su.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return Ri(this,void 0,void 0,function*(){try{su.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Ri(this,void 0,void 0,function*(){let s=yield Wt.publicKeyToBytes({publicKey:e});return su.verify(r,n,s)})}};var Vp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},p0=class extends Qs{computePublicKey({key:e}){return Vp(this,void 0,void 0,function*(){if(!to(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Wt.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Vp(this,void 0,void 0,function*(){switch(e){case"Ed25519":{let r=yield Wt.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return Vp(this,void 0,void 0,function*(){if(!to(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Wt.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Vp(this,void 0,void 0,function*(){if(!to(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Wt.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Vp(this,void 0,void 0,function*(){if(!pd(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Wt.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var ia=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},IE={Ed25519:{implementation:p0,names:["Ed25519"]},secp256k1:{implementation:qp,names:["ES256K","secp256k1"]},secp256r1:{implementation:qp,names:["ES256","secp256r1"]},"SHA-256":{implementation:n0,names:["SHA-256"]}},Ir=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new Ay}digest({algorithm:e,data:r}){return ia(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return ia(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return ia(this,void 0,void 0,function*(){let n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let s=`${AE}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:e}){return ia(this,void 0,void 0,function*(){let r=yield nt({jwk:e});return`${AE}${r}`})}getPublicKey({keyUri:e}){return ia(this,void 0,void 0,function*(){let r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return ia(this,void 0,void 0,function*(){if(!O8(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield nt({jwk:n}));let s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:e,data:r}){return ia(this,void 0,void 0,function*(){let n=yield this.getPrivateKey({keyUri:e}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return ia(this,void 0,void 0,function*(){let s=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:s}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;let n=(r=IE[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in IE){let i=IE[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return ia(this,void 0,void 0,function*(){let r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};var ou={};Zt(ou,{checkRequiredProperty:()=>UG,checkValidProperty:()=>VG,getJoseSignatureAlgorithmFromPublicKey:()=>KG,isWebCryptoSupported:()=>HG,randomBytes:()=>BE,randomUuid:()=>WG});function UG(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function VG(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function KG(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function HG(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function BE(t){return Qu(t)}function WG(){return Tl.randomUUID()}var zG=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var sa=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function L8(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var U8=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),JG=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!JG)throw new Error("Non little-endian hardware is not supported");function h0(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function m0(t){if(typeof t=="string")t=h0(t);else if(L8(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var GG=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function V8(t,e){if(e!==void 0&&(typeof e!="object"||!GG(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function Rc(t,e){if(!L8(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function K8(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var TE=(t,e)=>(Object.assign(e,t),e);function FE(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}function Kp(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function $E(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function XG(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function hd(t,...e){if(!XG(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function RE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function H8(t,e){hd(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var au=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},YG=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},oa=class{static bytesToPrivateKey({privateKeyBytes:e}){return au(this,void 0,void 0,function*(){let r=$c.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:ne.uint8Array(e).toBase64Url(),x:ne.uint8Array(r).toBase64Url()};return n.kid=yield nt({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return au(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"X25519",x:ne.uint8Array(e).toBase64Url()};return r.kid=yield nt({jwk:r}),r})}static computePublicKey({key:e}){return au(this,void 0,void 0,function*(){let r=yield oa.privateKeyToBytes({privateKey:e}),n=$c.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:ne.uint8Array(n).toBase64Url()};return s.kid=yield nt({jwk:s}),s})}static generateKey(){return au(this,void 0,void 0,function*(){let e=$c.utils.randomPrivateKey(),r=yield oa.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield nt({jwk:r}),r})}static getPublicKey({key:e}){var r;return au(this,void 0,void 0,function*(){if(!(to(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:n}=e,s=YG(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield nt({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return au(this,void 0,void 0,function*(){if(!to(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return ne.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return au(this,void 0,void 0,function*(){if(!pd(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return ne.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return au(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield oa.privateKeyToBytes({privateKey:e}),s=yield oa.publicKeyToBytes({publicKey:r});return $c.getSharedSecret(n,s)})}};var ln=(t,e)=>t[e++]&255|(t[e++]&255)<<8,qE=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=m0(e),Rc(e,32);let r=ln(e,0),n=ln(e,2),s=ln(e,4),i=ln(e,6),o=ln(e,8),a=ln(e,10),u=ln(e,12),c=ln(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=ln(e,16+2*l)}process(e,r,n=!1){let s=n?0:2048,{h:i,r:o}=this,a=o[0],u=o[1],c=o[2],l=o[3],d=o[4],h=o[5],f=o[6],p=o[7],y=o[8],w=o[9],P=ln(e,r+0),C=ln(e,r+2),v=ln(e,r+4),k=ln(e,r+6),I=ln(e,r+8),T=ln(e,r+10),j=ln(e,r+12),g=ln(e,r+14),b=i[0]+(P&8191),E=i[1]+((P>>>13|C<<3)&8191),B=i[2]+((C>>>10|v<<6)&8191),S=i[3]+((v>>>7|k<<9)&8191),N=i[4]+((k>>>4|I<<12)&8191),$=i[5]+(I>>>1&8191),O=i[6]+((I>>>14|T<<2)&8191),F=i[7]+((T>>>11|j<<5)&8191),U=i[8]+((j>>>8|g<<8)&8191),M=i[9]+(g>>>5|s),R=0,K=R+b*a+E*(5*w)+B*(5*y)+S*(5*p)+N*(5*f);R=K>>>13,K&=8191,K+=$*(5*h)+O*(5*d)+F*(5*l)+U*(5*c)+M*(5*u),R+=K>>>13,K&=8191;let z=R+b*u+E*a+B*(5*w)+S*(5*y)+N*(5*p);R=z>>>13,z&=8191,z+=$*(5*f)+O*(5*h)+F*(5*d)+U*(5*l)+M*(5*c),R+=z>>>13,z&=8191;let ee=R+b*c+E*u+B*a+S*(5*w)+N*(5*y);R=ee>>>13,ee&=8191,ee+=$*(5*p)+O*(5*f)+F*(5*h)+U*(5*d)+M*(5*l),R+=ee>>>13,ee&=8191;let ce=R+b*l+E*c+B*u+S*a+N*(5*w);R=ce>>>13,ce&=8191,ce+=$*(5*y)+O*(5*p)+F*(5*f)+U*(5*h)+M*(5*d),R+=ce>>>13,ce&=8191;let re=R+b*d+E*l+B*c+S*u+N*a;R=re>>>13,re&=8191,re+=$*(5*w)+O*(5*y)+F*(5*p)+U*(5*f)+M*(5*h),R+=re>>>13,re&=8191;let ie=R+b*h+E*d+B*l+S*c+N*u;R=ie>>>13,ie&=8191,ie+=$*a+O*(5*w)+F*(5*y)+U*(5*p)+M*(5*f),R+=ie>>>13,ie&=8191;let ue=R+b*f+E*h+B*d+S*l+N*c;R=ue>>>13,ue&=8191,ue+=$*u+O*a+F*(5*w)+U*(5*y)+M*(5*p),R+=ue>>>13,ue&=8191;let ye=R+b*p+E*f+B*h+S*d+N*l;R=ye>>>13,ye&=8191,ye+=$*c+O*u+F*a+U*(5*w)+M*(5*y),R+=ye>>>13,ye&=8191;let ke=R+b*y+E*p+B*f+S*h+N*d;R=ke>>>13,ke&=8191,ke+=$*l+O*c+F*u+U*a+M*(5*w),R+=ke>>>13,ke&=8191;let He=R+b*w+E*y+B*p+S*f+N*h;R=He>>>13,He&=8191,He+=$*d+O*l+F*c+U*u+M*a,R+=He>>>13,He&=8191,R=(R<<2)+R|0,R=R+K|0,K=R&8191,R=R>>>13,z+=R,i[0]=K,i[1]=z,i[2]=ee,i[3]=ce,i[4]=re,i[5]=ie,i[6]=ue,i[7]=ye,i[8]=ke,i[9]=He}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=1<<13;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){RE(this);let{buffer:r,blockLen:n}=this;e=m0(e);let s=e.length;for(let i=0;i<s;){let o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){RE(this),H8(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function ZG(t){let e=(n,s)=>t(s).update(m0(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var W8=ZG(t=>new qE(t));var QG=h0("expand 16-byte k"),eX=h0("expand 32-byte k"),tX=sa(QG),rX=sa(eX);function ve(t,e){return t<<e|t>>>32-e}function ME(t){return t.byteOffset%4===0}var y0=64,nX=16,J8=2**32-1,z8=new Uint32Array;function iX(t,e,r,n,s,i,o,a){let u=s.length,c=new Uint8Array(y0),l=sa(c),d=ME(s)&&ME(i),h=d?sa(s):z8,f=d?sa(i):z8;for(let p=0;p<u;o++){if(t(e,r,n,l,o,a),o>=J8)throw new Error("arx: counter overflow");let y=Math.min(y0,u-p);if(d&&y===y0){let w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let P=0,C;P<nX;P++)C=w+P,f[C]=h[C]^l[P];p+=y0;continue}for(let w=0,P;w<y;w++)P=p+w,i[P]=s[P]^c[w];p+=y}}function LE(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=V8({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Kp(s),Kp(o),$E(i),$E(r),(a,u,c,l,d=0)=>{hd(a),hd(u),hd(c);let h=c.length;if(l||(l=new Uint8Array(h)),hd(l),Kp(d),d<0||d>=J8)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);let f=[],p=a.length,y,w;if(p===32)y=a.slice(),f.push(y),w=rX;else if(p===16&&r)y=new Uint8Array(32),y.set(a),y.set(a,16),w=tX,f.push(y);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);ME(u)||(u=u.slice(),f.push(u));let P=sa(y);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(w,P,sa(u.subarray(0,16)),P),u=u.subarray(16)}let C=16-s;if(C!==u.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(C!==12){let k=new Uint8Array(12);k.set(u,i?0:12-u.length),u=k,f.push(u)}let v=sa(u);for(iX(t,w,P,v,c,l,d,o);f.length>0;)f.pop().fill(0);return l}}function Y8(t,e,r,n,s,i=20){let o=t[0],a=t[1],u=t[2],c=t[3],l=e[0],d=e[1],h=e[2],f=e[3],p=e[4],y=e[5],w=e[6],P=e[7],C=s,v=r[0],k=r[1],I=r[2],T=o,j=a,g=u,b=c,E=l,B=d,S=h,N=f,$=p,O=y,F=w,U=P,M=C,R=v,K=k,z=I;for(let ce=0;ce<i;ce+=2)T=T+E|0,M=ve(M^T,16),$=$+M|0,E=ve(E^$,12),T=T+E|0,M=ve(M^T,8),$=$+M|0,E=ve(E^$,7),j=j+B|0,R=ve(R^j,16),O=O+R|0,B=ve(B^O,12),j=j+B|0,R=ve(R^j,8),O=O+R|0,B=ve(B^O,7),g=g+S|0,K=ve(K^g,16),F=F+K|0,S=ve(S^F,12),g=g+S|0,K=ve(K^g,8),F=F+K|0,S=ve(S^F,7),b=b+N|0,z=ve(z^b,16),U=U+z|0,N=ve(N^U,12),b=b+N|0,z=ve(z^b,8),U=U+z|0,N=ve(N^U,7),T=T+B|0,z=ve(z^T,16),F=F+z|0,B=ve(B^F,12),T=T+B|0,z=ve(z^T,8),F=F+z|0,B=ve(B^F,7),j=j+S|0,M=ve(M^j,16),U=U+M|0,S=ve(S^U,12),j=j+S|0,M=ve(M^j,8),U=U+M|0,S=ve(S^U,7),g=g+N|0,R=ve(R^g,16),$=$+R|0,N=ve(N^$,12),g=g+N|0,R=ve(R^g,8),$=$+R|0,N=ve(N^$,7),b=b+E|0,K=ve(K^b,16),O=O+K|0,E=ve(E^O,12),b=b+E|0,K=ve(K^b,8),O=O+K|0,E=ve(E^O,7);let ee=0;n[ee++]=o+T|0,n[ee++]=a+j|0,n[ee++]=u+g|0,n[ee++]=c+b|0,n[ee++]=l+E|0,n[ee++]=d+B|0,n[ee++]=h+S|0,n[ee++]=f+N|0,n[ee++]=p+$|0,n[ee++]=y+O|0,n[ee++]=w+F|0,n[ee++]=P+U|0,n[ee++]=C+M|0,n[ee++]=v+R|0,n[ee++]=k+K|0,n[ee++]=I+z|0}function sX(t,e,r,n){let s=t[0],i=t[1],o=t[2],a=t[3],u=e[0],c=e[1],l=e[2],d=e[3],h=e[4],f=e[5],p=e[6],y=e[7],w=r[0],P=r[1],C=r[2],v=r[3];for(let I=0;I<20;I+=2)s=s+u|0,w=ve(w^s,16),h=h+w|0,u=ve(u^h,12),s=s+u|0,w=ve(w^s,8),h=h+w|0,u=ve(u^h,7),i=i+c|0,P=ve(P^i,16),f=f+P|0,c=ve(c^f,12),i=i+c|0,P=ve(P^i,8),f=f+P|0,c=ve(c^f,7),o=o+l|0,C=ve(C^o,16),p=p+C|0,l=ve(l^p,12),o=o+l|0,C=ve(C^o,8),p=p+C|0,l=ve(l^p,7),a=a+d|0,v=ve(v^a,16),y=y+v|0,d=ve(d^y,12),a=a+d|0,v=ve(v^a,8),y=y+v|0,d=ve(d^y,7),s=s+c|0,v=ve(v^s,16),p=p+v|0,c=ve(c^p,12),s=s+c|0,v=ve(v^s,8),p=p+v|0,c=ve(c^p,7),i=i+l|0,w=ve(w^i,16),y=y+w|0,l=ve(l^y,12),i=i+l|0,w=ve(w^i,8),y=y+w|0,l=ve(l^y,7),o=o+d|0,P=ve(P^o,16),h=h+P|0,d=ve(d^h,12),o=o+d|0,P=ve(P^o,8),h=h+P|0,d=ve(d^h,7),a=a+u|0,C=ve(C^a,16),f=f+C|0,u=ve(u^f,12),a=a+u|0,C=ve(C^a,8),f=f+C|0,u=ve(u^f,7);let k=0;n[k++]=s,n[k++]=i,n[k++]=o,n[k++]=a,n[k++]=w,n[k++]=P,n[k++]=C,n[k++]=v}var oX=LE(Y8,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Z8=LE(Y8,{counterRight:!1,counterLength:8,extendNonceFn:sX,allowShortKeys:!1});var aX=new Uint8Array(16),G8=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(aX.subarray(r))},uX=new Uint8Array(32);function X8(t,e,r,n,s){let i=t(e,r,uX),o=W8.create(i);s&&G8(o,s),G8(o,n);let a=new Uint8Array(16),u=U8(a);FE(u,0,BigInt(s?s.length:0),!0),FE(u,8,BigInt(n.length),!0),o.update(a);let c=o.digest();return i.fill(0),c}var Q8=t=>(e,r,n)=>(Rc(e,32),Rc(r),{encrypt:(i,o)=>{let a=i.length,u=a+16;o?Rc(o,u):o=new Uint8Array(u),t(e,r,i,o,1);let c=X8(t,e,r,o.subarray(0,-16),n);return o.set(c,a),o},decrypt:(i,o)=>{let a=i.length,u=a-16;if(a<16)throw new Error(`encrypted data must be at least ${16} bytes`);o?Rc(o,u):o=new Uint8Array(u);let c=i.subarray(0,-16),l=i.subarray(-16),d=X8(t,e,r,c,n);if(!K8(l,d))throw new Error("invalid tag");return t(e,r,c,o,1),o}}),Dbe=TE({blockSize:64,nonceLength:12,tagLength:16},Q8(oX)),cX=TE({blockSize:64,nonceLength:24,tagLength:16},Q8(Z8));var Nc;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityDelegation="capabilityDelegation",t.capabilityInvocation="capabilityInvocation"})(Nc||(Nc={}));var lr={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};var Qe=class{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;let r=Qe.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){let c={},l=o.slice(1).split("&");for(let d of l){let[h,f]=d.split("=");c[h]=f}u.params=c}return u}};Qe.METHOD_PATTERN="([a-z0-9]+)";Qe.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";Qe.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${Qe.PCT_ENCODED_PATTERN})`;Qe.METHOD_ID_PATTERN=`((?:${Qe.ID_CHAR_PATTERN}*:)*(${Qe.ID_CHAR_PATTERN}+))`;Qe.PATH_PATTERN="(/[^#?]*)?";Qe.QUERY_PATTERN="([?][^#]*)?";Qe.FRAGMENT_PATTERN="(#.*)?";Qe.DID_URI_PATTERN=new RegExp(`^did:(?<method>${Qe.METHOD_PATTERN}):(?<id>${Qe.METHOD_ID_PATTERN})(?<path>${Qe.PATH_PATTERN})(?<query>${Qe.QUERY_PATTERN})(?<fragment>${Qe.FRAGMENT_PATTERN})$`);var Ee=class extends Error{constructor(e,r){super(r),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ee)}},_e;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(_e||(_e={}));var jc={};Zt(jc,{extractDidFragment:()=>Yn,getServices:()=>dX,getVerificationMethodByKey:()=>fX,getVerificationMethodTypes:()=>UE,getVerificationMethods:()=>Hp,getVerificationRelationshipsById:()=>VE,isDidService:()=>ek,isDidVerificationMethod:()=>g0,isDwnDidService:()=>pX,keyBytesToMultibaseId:()=>v0,multibaseIdToKeyBytes:()=>b0});var lX=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};function Yn(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function dX({didDocument:t,id:e,type:r}){var n,s;return(s=(n=t?.service)===null||n===void 0?void 0:n.filter(i=>!(e&&i.id!==e||r&&i.type!==r)))!==null&&s!==void 0?s:[]}function fX({didDocument:t,publicKeyJwk:e,publicKeyMultibase:r}){return lX(this,void 0,void 0,function*(){let n=Hp({didDocument:t});for(let s of n)if(e&&s.publicKeyJwk){if((yield nt({jwk:e}))===(yield nt({jwk:s.publicKeyJwk})))return s}else if(r&&s.publicKeyMultibase&&r===s.publicKeyMultibase)return s;return null})}function Hp({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(g0))!==null&&r!==void 0?r:[]),Object.keys(Nc).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(g0))!==null&&o!==void 0?o:[])}),n}function UE({didDocument:t}){let r=Hp({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function VE({didDocument:t,methodId:e}){let r=[];return Object.keys(Nc).forEach(n=>{if(Array.isArray(t[n])){let s=t[n],i=Yn(e);s.some(a=>{let u=Yn(a)===i,c=g0(a)&&Yn(a.id)===i;return u||c})&&r.push(n)}}),r}function ek(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function pX(t){if(!ek(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function g0(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function v0({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=Qt.addPrefix({code:e,data:t,name:r}),s=ne.uint8Array(n).toBase58Btc();return ne.base58Btc(s).toMultibase()}function b0({multibaseKeyId:t}){try{let e=ne.multibase(t).toBase58Btc(),r=ne.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=Qt.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new Ee(_e.InvalidDid,`Invalid multibase identifier: ${t}`)}}var Wp=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Dn=class{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return Wp(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){var r;return Wp(this,void 0,void 0,function*(){let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var c,l;return Yn(u.id)===((c=Yn(e?.methodId))!==null&&c!==void 0?c:Yn((l=this.document.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(n&&n.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:ou.getJoseSignatureAlgorithmFromPublicKey(i),keyId:n.id,sign({data:u}){return Wp(this,void 0,void 0,function*(){return yield o.sign({data:u,keyUri:s})})},verify({data:u,signature:c}){return Wp(this,void 0,void 0,function*(){return yield o.verify({data:u,key:i,signature:c})})}}})}static import({portableDid:e,keyManager:r=new Ir}){var n;return Wp(this,void 0,void 0,function*(){let s=Hp({didDocument:e.document});if(s.length===0)throw new Ee(_e.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let o of(n=e.privateKeys)!==null&&n!==void 0?n:[])yield r.importKey({key:o});for(let o of s){if(!o.publicKeyJwk)throw new Error(`Verification method '${o.id}' does not contain a public key in JWK format`);let a=yield r.getKeyUri({key:o.publicKeyJwk});yield r.getPublicKey({keyUri:a})}return new Dn({uri:e.uri,document:e.document,metadata:e.metadata,keyManager:r})})}};var KE="0123456789abcdef",rk=[],tk=[];for(let t=0;t<256;t++)rk[t]=KE[t>>4&15]+KE[t&15],t<16&&(t<10?tk[48+t]=t:tk[97-10+t]=t);var HE=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=rk[t[n++]];return r};var nk=(t,e=0)=>{let r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}let n=new Uint8Array(e),s=e,i=r;for(;i--;)s-=t[i].length,n.set(t[i],s);return n};var ik="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hX=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(zp=0;zp<ik.length;zp++)hX[ik.charCodeAt(zp)]=zp;var zp;var mX=new TextDecoder,WE=(t,e)=>e?new TextDecoder(e).decode(t):mX.decode(t),yX=new TextEncoder,Ni=t=>yX.encode(t);var sk=typeof window<"u"?window:self,ok=sk.crypto||sk.msCrypto||{},S1e=ok.subtle||ok.webkitSubtle;function md(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function w0(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function Bt(t,e,r){let n=[],s=null;return Bt._encode(n,t),s=nk(n),Bt.bytes=s.length,ArrayBuffer.isView(e)?(e.set(s,r),e):s}Bt.bytes=-1;Bt._floatConversionDetected=!1;Bt._encode=function(t,e){if(e!=null)switch(w0(e)){case"object":Bt.dict(t,e);break;case"map":Bt.dictMap(t,e);break;case"array":Bt.list(t,e);break;case"set":Bt.listSet(t,e);break;case"string":Bt.string(t,e);break;case"number":Bt.number(t,e);break;case"boolean":Bt.number(t,e);break;case"arraybufferview":Bt.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":Bt.buffer(t,new Uint8Array(e));break}};var E0=new Uint8Array([101]),ak=new Uint8Array([100]),uk=new Uint8Array([108]);Bt.buffer=function(t,e){t.push(Ni(e.length+":"),e)};Bt.string=function(t,e){t.push(Ni(Ni(e).byteLength+":"+e))};Bt.number=function(t,e){if(Number.isInteger(e))return t.push(Ni("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,s=e%r<<0,i=n*r+s;t.push(Ni("i"+i+"e")),i!==e&&!Bt._floatConversionDetected&&(Bt._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};Bt.dict=function(t,e){t.push(ak);let r=0,n,s=Object.keys(e).sort(),i=s.length;for(;r<i;r++)n=s[r],e[n]!=null&&(Bt.string(t,n),Bt._encode(t,e[n]));t.push(E0)};Bt.dictMap=function(t,e){t.push(ak);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?Bt._encode(t,n):Bt.string(t,String(n)),Bt._encode(t,e.get(n)));t.push(E0)};Bt.list=function(t,e){let r=0,n=e.length;for(t.push(uk);r<n;r++)e[r]!=null&&Bt._encode(t,e[r]);t.push(E0)};Bt.listSet=function(t,e){t.push(uk);for(let r of e)r!=null&&Bt._encode(t,r);t.push(E0)};var ck=Bt;var gX=105,vX=58,bX=100,wX=108,zE=101;function lk(t,e,r){let n=0,s=1;for(let i=e;i<r;i++){let o=t[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===e&&o===43)){if(i===e&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function $e(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),$e.position=0,$e.encoding=n||null,$e.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):Ni(t),$e.bytes=$e.data.length,$e.next())}$e.bytes=0;$e.position=0;$e.data=null;$e.encoding=null;$e.next=function(){switch($e.data[$e.position]){case bX:return $e.dictionary();case wX:return $e.list();case gX:return $e.integer();default:return $e.buffer()}};$e.find=function(t){let e=$e.position,r=$e.data.length,n=$e.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};$e.dictionary=function(){$e.position++;let t={};for(;$e.data[$e.position]!==zE;){let e=$e.buffer(),r=WE(e);r.includes("\uFFFD")&&(r=HE(e)),t[r]=$e.next()}return $e.position++,t};$e.list=function(){$e.position++;let t=[];for(;$e.data[$e.position]!==zE;)t.push($e.next());return $e.position++,t};$e.integer=function(){let t=$e.find(zE),e=lk($e.data,$e.position+1,t);return $e.position+=t+1-$e.position,e};$e.buffer=function(){let t=$e.find(vX),e=lk($e.data,$e.position,t),r=++t+e;return $e.position=r,$e.encoding?WE($e.data.slice(t,r)):$e.data.slice(t,r)};var dk=$e;function EX(t){let e=2;for(let r of t)e+=_0(r);return e}function _X(t){let e=2;for(let[r,n]of t){let s=Ni(r).byteLength;e+=md(s)+1+s,e+=_0(n)}return e}function DX(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let s=Ni(r[n]).byteLength;e+=md(s)+1+s,e+=_0(t[r[n]])}return e}function SX(t){let e=Ni(t).byteLength;return md(e)+1+e}function AX(t){let e=t.byteLength-t.byteOffset;return md(e)+1+e}function _0(t){if(t==null)return 0;let r=w0(t);switch(r){case"arraybufferview":return AX(t);case"string":return SX(t);case"array":case"set":return EX(t);case"number":return 1+md(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return DX(t);case"map":return _X(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var JE=_0;var xX=JE,GE={encode:ck,decode:dk,byteLength:JE,encodingLength:xX};var CX=/^(\d{1,3}\.){3,3}\d{1,3}$/;var PX=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var ys={name:"v4",size:4,isFormat:t=>CX.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,s=0;for(let i=0;i<n;){let o=t.charCodeAt(i++);o===46?(e[r++]=s,s=0):s=s*10+(o-48)}return e[r]=s,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},aa={name:"v6",size:16,isFormat:t=>t.length>0&&PX.test(t),encode(t,e,r){r=~~r;let n=r+16,s=-1,i=0,o=0,a=!0,u=!1;e=e||new Uint8Array(r+16);for(let c=0;c<t.length;c++){let l=t.charCodeAt(c);l===58?(a?s!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(s=r):(u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2),i=0,o=0),a=!0,u=!1):l===46?(r<n&&(e[r]=o),r++,o=0,i=0,a=!1,u=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:(l-=48,o=o*10+l),i=(i<<4)+l)}if(a===!1)u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2);else if(s===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let c=Math.min(r-1,n-1);c>=s+2;c--)e[c]=e[c-2];e[s]=0,e[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)e[--n]=r<n&&r>s?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function fk(t){if(ys.isFormat(t))return ys.size;if(aa.isFormat(t))return aa.size;throw Error(`Invalid ip address: ${t}`)}function pk(t){return fk(t)===ys.size?1:2}function hk(t,e,r){r=~~r;let n=fk(t);return typeof e=="function"&&(e=e(r+n)),n===ys.size?ys.encode(t,e,r):aa.encode(t,e,r)}function mk(t,e,r){if(e=~~e,r=r||t.length-e,r===ys.size)return ys.decode(t,e,r);if(r===aa.size)return aa.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${ys.size} for v4 or ${aa.size} for v6.`)}function Jp(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function yd(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function yk(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function gk(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function XE(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function YE(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function vk(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function ZE(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}function QE(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s<=127)e+=1;else if(s<=2047)e+=2;else if((s&63488)!==55296)e+=3;else{let i=n+1;i===r||s>=56320||(t.charCodeAt(i)&64512)!==56320?e+=3:(n=i,e+=4)}}return e}function gd(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(QE(t)+r));let s=r;for(let i=0;i<n;i+=1){let o=t.charCodeAt(i);if(o<=127)e[s++]=o;else if(o<=2047)e[s++]=192|(o&1984)>>6,e[s++]=128|o&63;else if((o&63488)!==55296)e[s++]=224|(o&61440)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63;else{let a=i+1;if(a===n||o>=56320)e[s++]=239,e[s++]=191,e[s++]=189;else{let u=t.charCodeAt(a);(u&64512)!==56320?(e[s++]=239,e[s++]=191,e[s++]=189):(i=a,o=65536|(o&1023)<<10|u&1023,e[s++]=240|(o&1835008)>>18,e[s++]=128|(o&258048)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63)}}}return gd.bytes=s-r,e}gd.bytes=0;function vd(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let s=e;s<r;){let i=t[s++],o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|t[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(t[s++]&63)<<12|(t[s++]&63)<<6|t[s++]&63)-65536;let a=55296|o>>10&1023;n+=String.fromCharCode(a),o=56320|o&1023}else o=(i&15)<<12|(t[s++]&63)<<6|t[s++]&63;n+=String.fromCharCode(o)}return vd.bytes=r-e,n}vd.bytes=0;var uu=t=>t instanceof Uint8Array;function ua(t){return typeof t=="string"?QE(t):t.byteLength}function D0(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):gd(t)}function S0(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return gd(e,t,r),gd.bytes}var Gp={},bk=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let s=n.toString(16),i=s.toUpperCase(),o=t<<4|n,a=`${e}${s}`;bk[o]=a,Gp[a]=o,Gp[`${r}${s}`]=o,Gp[`${e}${i}`]=o,Gp[`${r}${i}`]=o}}function wk(t,e,r){let n="";for(let s=e;s<r;){let i=t[s++];n+=bk[i]}return n}function e_(t){return t.length>>>1}function Ek(t,e,r,n){let s=0;for(;r<n;){let i=e.substr(s,2),o=Gp[i];if(o===void 0)return;t[r++]=o,s+=2}return t}var RX=Math.pow(2,24),NX=Math.pow(2,16),jX=Math.pow(2,8),ro=(t,e)=>t[e]*RX+t[e+1]*NX+t[e+2]*jX+t[e+3],et=(t,e)=>t[e]<<8|t[e+1],no=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),Be=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function Zn(t,e,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=e.length||n>=s?0:qX(t,e,r,n,s)}function qX(t,e,r,n,s){s-n>e.length-r&&(s=n+e.length-r);let i=s-n,o=t.length-n;return i>o&&(i=o),(n!==0||s<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,i)),e.set(t,r),i}var LX=0,_k=1<<15,r_=1<<15,UX=~r_,Sk=1<<15,VX=~Sk;function Ut({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var De=Ut({encode(t,e,r){e||(e=new Uint8Array(De.encodingLength(t))),r||(r=0);let n=r,s=t.replace(/^\.|\.$/gm,"");if(s.length){let i=s.split(".");for(let o=0;o<i.length;o++){let a=S0(e,i[o],r+1);e[r]=a,r+=a+1}}return e[r++]=0,De.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,s=0,i=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let u=et(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(vd(t,e,e+a)),e+=a,i+=o?0:a}}return De.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:ua(t.replace(/^\.|\.$/gm,""))+2}}),Ur=Ut({encode(t,e,r){e||(e=new Uint8Array(Ur.encodingLength(t))),r||(r=0);let n=S0(e,t,r+1);return e[r]=n,Ur.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=vd(t,e+1,e+1+r);return Ur.decode.bytes=r+1,n},encodingLength(t){return ua(t)+1}}),bd=Ut({bytes:12,encode(t,e,r){e||(e=new Uint8Array(bd.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,s=t.type==="response"?_k:LX;return Be(e,t.id||0,r),Be(e,n|s,r+2),Be(e,t.questions.length,r+4),Be(e,t.answers.length,r+6),Be(e,t.authorities.length,r+8),Be(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=et(t,e+2);return{id:et(t,e),type:r&_k?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:gk(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:yk(r&15),questions:new Array(et(t,e+4)),answers:new Array(et(t,e+6)),authorities:new Array(et(t,e+8)),additionals:new Array(et(t,e+10))}},encodingLength(){return 12}}),x0=Ut({encode(t,e,r){e||(e=new Uint8Array(x0.encodingLength(t))),r||(r=0);let n=t.length;return Be(e,n,r),Zn(t,e,r+2,0,n),x0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=et(t,e),n=t.slice(e+2,e+2+r);return x0.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),C0=Ut({encode(t,e,r){return e||(e=new Uint8Array(C0.encodingLength(t))),r||(r=0),De.encode(t,e,r+2),Be(e,De.encode.bytes,r),C0.encode.bytes=De.encode.bytes+2,e},decode(t,e){e||(e=0);let r=et(t,e),n=De.decode(t,e+2);return C0.decode.bytes=r+2,n},encodingLength(t){return De.encodingLength(t)+2}}),P0=Ut({encode(t,e,r){e||(e=new Uint8Array(P0.encodingLength(t))),r||(r=0);let n=r;return r+=2,De.encode(t.mname,e,r),r+=De.encode.bytes,De.encode(t.rname,e,r),r+=De.encode.bytes,no(e,t.serial||0,r),r+=4,no(e,t.refresh||0,r),r+=4,no(e,t.retry||0,r),r+=4,no(e,t.expire||0,r),r+=4,no(e,t.minimum||0,r),r+=4,Be(e,r-n-2,n),P0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=De.decode(t,e),e+=De.decode.bytes,n.rname=De.decode(t,e),e+=De.decode.bytes,n.serial=ro(t,e),e+=4,n.refresh=ro(t,e),e+=4,n.retry=ro(t,e),e+=4,n.expire=ro(t,e),e+=4,n.minimum=ro(t,e),e+=4,P0.decode.bytes=e-r,n},encodingLength(t){return 22+De.encodingLength(t.mname)+De.encodingLength(t.rname)}}),O0=Ut({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(typeof t[s]=="string"&&(t[s]=D0(t[s])),!uu(t[s]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(O0.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(s){e[r++]=s.length,Zn(s,e,r,0,s.length),r+=s.length}),Be(e,r-n-2,n),O0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=et(t,e);e+=2;let s=[];for(;n>0;){let i=t[e++];if(--n,n<i)throw new Error("Buffer overflow");s.push(t.slice(e,e+i)),e+=i,n-=i}return O0.decode.bytes=e-r,s},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=ua(r)+1:e+=r.length+1}),e}}),k0=Ut({encode(t,e,r){e||(e=new Uint8Array(k0.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=D0(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let s=t.length;return Zn(t,e,r,0,s),r+=s,Be(e,r-n-2,n),k0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=et(t,e);e+=2;let s=t.slice(e,e+n);return e+=n,k0.decode.bytes=e-r,s},encodingLength(t){return t?(uu(t)?t.length:ua(t))+2:2}}),I0=Ut({encode(t,e,r){e||(e=new Uint8Array(I0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Ur.encode(t.cpu,e,r),r+=Ur.encode.bytes,Ur.encode(t.os,e,r),r+=Ur.encode.bytes,Be(e,r-n-2,n),I0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=Ur.decode(t,e),e+=Ur.decode.bytes,n.os=Ur.decode(t,e),e+=Ur.decode.bytes,I0.decode.bytes=e-r,n},encodingLength(t){return Ur.encodingLength(t.cpu)+Ur.encodingLength(t.os)+2}}),_d=Ut({encode(t,e,r){return e||(e=new Uint8Array(_d.encodingLength(t))),r||(r=0),De.encode(t,e,r+2),Be(e,De.encode.bytes,r),_d.encode.bytes=De.encode.bytes+2,e},decode(t,e){e||(e=0);let r=De.decode(t,e+2);return _d.decode.bytes=De.decode.bytes+2,r},encodingLength(t){return De.encodingLength(t)+2}}),B0=Ut({encode(t,e,r){e||(e=new Uint8Array(B0.encodingLength(t))),r||(r=0),Be(e,t.priority||0,r+2),Be(e,t.weight||0,r+4),Be(e,t.port||0,r+6),De.encode(t.target,e,r+8);let n=De.encode.bytes+6;return Be(e,n,r),B0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=et(t,e),n={};return n.priority=et(t,e+2),n.weight=et(t,e+4),n.port=et(t,e+6),n.target=De.decode(t,e+8),B0.decode.bytes=r+2,n},encodingLength(t){return 8+De.encodingLength(t.target)}}),cu=Ut({encode(t,e,r){let n=cu.encodingLength(t);return e||(e=new Uint8Array(cu.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=cu.ISSUER_CRITICAL),Be(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,Ur.encode(t.tag,e,r),r+=Ur.encode.bytes,S0(e,t.value,r),r+=ua(t.value),cu.encode.bytes=n,e},decode(t,e){e||(e=0);let r=et(t,e);e+=2;let n=e,s={};return s.flags=t[e],e+=1,s.tag=Ur.decode(t,e),e+=Ur.decode.bytes,s.value=vd(t,e,n+r),s.issuerCritical=!!(s.flags&cu.ISSUER_CRITICAL),cu.decode.bytes=r+2,s},encodingLength(t){return Ur.encodingLength(t.tag)+Ur.encodingLength(t.value)+2}});cu.ISSUER_CRITICAL=1<<7;var T0=Ut({encode(t,e,r){e||(e=new Uint8Array(T0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Be(e,t.preference||0,r),r+=2,De.encode(t.exchange,e,r),r+=De.encode.bytes,Be(e,r-n-2,n),T0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=et(t,e),e+=2,n.exchange=De.decode(t,e),e+=De.decode.bytes,T0.decode.bytes=e-r,n},encodingLength(t){return 4+De.encodingLength(t.exchange)}}),Ak=Ut({encode(t,e,r){return e||(e=new Uint8Array(Ak.encodingLength(t))),r||(r=0),Be(e,4,r),r+=2,ys.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,ys.decode(t,e)},bytes:6}),F0=Ut({encode(t,e,r){return e||(e=new Uint8Array(F0.encodingLength(t))),r||(r=0),Be(e,16,r),r+=2,aa.encode(t,e,r),F0.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=aa.decode(t,e);return F0.decode.bytes=18,r},bytes:18}),Dk=t=>new Uint8Array(t),ca=Ut({encode(t,e,r){e||(e=new Uint8Array(ca.encodingLength(t))),r||(r=0);let n=r,s=ZE(t.code);if(Be(e,s,r),r+=2,t.data)Be(e,t.data.length,r),r+=2,Zn(t.data,e,r),r+=t.data.length;else switch(s){case 8:{let i=t.sourcePrefixLength||0,o=t.family||pk(t.ip,Dk),a=hk(t.ip,Dk),u=Math.ceil(i/8);Be(e,u+4,r),r+=2,Be(e,o,r),r+=2,e[r++]=i,e[r++]=t.scopePrefixLength||0,Zn(a,e,r,0,u),r+=u}break;case 11:t.timeout?(Be(e,2,r),r+=2,Be(e,t.timeout,r),r+=2):(Be(e,0,r),r+=2);break;case 12:{let i=t.length||0;Be(e,i,r),r+=2,e.fill(0,r,r+i),r+=i}break;case 14:{let i=t.tags.length*2;Be(e,i,r),r+=2;for(let o of t.tags)Be(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return ca.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=et(t,e),r.type=vk(r.code),e+=2;let n=et(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=et(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let s=new Uint8Array(r.family===1?4:16);Zn(t,s,0,e,e+n-4),r.ip=mk(s)}break;case 11:n>0&&(r.timeout=et(t,e),e+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(et(t,e)),e+=2}return ca.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(ZE(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),lu=Ut({encode(t,e,r){e||(e=new Uint8Array(lu.encodingLength(t))),r||(r=0);let n=r,s=Ed(t,ca);return Be(e,s,r),r=th(t,ca,e,r+2),lu.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],s=et(t,e);e+=2;let i=0;for(;s>0;)n[i++]=ca.decode(t,e),e+=ca.decode.bytes,s-=ca.decode.bytes;return lu.decode.bytes=e-r,n},encodingLength(t){return 2+Ed(t||[],ca)}}),io=Ut({encode(t,e,r){e||(e=new Uint8Array(io.encodingLength(t))),r||(r=0);let n=r,s=t.key;if(!uu(s))throw new Error("Key must be a Buffer");return r+=2,Be(e,t.flags,r),r+=2,e[r]=io.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,Zn(s,e,r,0,s.length),r+=s.length,io.encode.bytes=r-n,Be(e,io.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);if(e+=2,n.flags=et(t,e),e+=2,t[e]!==io.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+s+2),e+=n.key.length,io.decode.bytes=e-r,n},encodingLength(t){return 6+ua(t.key)}});io.PROTOCOL_DNSSEC=3;io.ZONE_KEY=128;io.SECURE_ENTRYPOINT=32768;var Xp=Ut({encode(t,e,r){e||(e=new Uint8Array(Xp.encodingLength(t))),r||(r=0);let n=r,s=t.signature;if(!uu(s))throw new Error("Signature must be a Buffer");return r+=2,Be(e,yd(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,no(e,t.originalTTL,r),r+=4,no(e,t.expiration,r),r+=4,no(e,t.inception,r),r+=4,Be(e,t.keyTag,r),r+=2,De.encode(t.signersName,e,r),r+=De.encode.bytes,Zn(s,e,r,0,s.length),r+=s.length,Xp.encode.bytes=r-n,Be(e,Xp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);return e+=2,n.typeCovered=Jp(et(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=ro(t,e),e+=4,n.expiration=ro(t,e),e+=4,n.inception=ro(t,e),e+=4,n.keyTag=et(t,e),e+=2,n.signersName=De.decode(t,e),e+=De.decode.bytes,n.signature=t.slice(e,r+s+2),e+=n.signature.length,Xp.decode.bytes=e-r,n},encodingLength(t){return 20+De.encodingLength(t.signersName)+ua(t.signature)}}),Yp=Ut({encode(t,e,r){e||(e=new Uint8Array(Yp.encodingLength(t))),r||(r=0);let n=r;return r+=2,De.encode(t.mbox||".",e,r),r+=De.encode.bytes,De.encode(t.txt||".",e,r),r+=De.encode.bytes,Yp.encode.bytes=r-n,Be(e,Yp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=De.decode(t,e)||".",e+=De.decode.bytes,n.txt=De.decode(t,e)||".",e+=De.decode.bytes,Yp.decode.bytes=e-r,n},encodingLength(t){return 2+De.encodingLength(t.mbox||".")+De.encodingLength(t.txt||".")}}),gi=Ut({encode(t,e,r){e||(e=new Uint8Array(gi.encodingLength(t))),r||(r=0);let n=r,s=[];for(let i=0;i<t.length;i++){let o=yd(t[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){let o=D0(s[i]);e[r]=i,r+=1,e[r]=o.length,r+=1,Zn(o,e,r,0,o.length),r+=o.length}return gi.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,s=[];for(;e-n<r;){let i=t[e];e+=1;let o=t[e];e+=1;for(let a=0;a<o;a++){let u=t[e+a];for(let c=0;c<8;c++)if(u&1<<7-c){let l=Jp(i<<8|a<<3|c);s.push(l)}}e+=o}return gi.decode.bytes=e-n,s},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let s=yd(t[n]);e[s>>8]=Math.max(e[s>>8]||0,s&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),Zp=Ut({encode(t,e,r){e||(e=new Uint8Array(Zp.encodingLength(t))),r||(r=0);let n=r;return r+=2,De.encode(t.nextDomain,e,r),r+=De.encode.bytes,gi.encode(t.rrtypes,e,r),r+=gi.encode.bytes,Zp.encode.bytes=r-n,Be(e,Zp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);return e+=2,n.nextDomain=De.decode(t,e),e+=De.decode.bytes,n.rrtypes=gi.decode(t,e,s-(e-r)),e+=gi.decode.bytes,Zp.decode.bytes=e-r,n},encodingLength(t){return 2+De.encodingLength(t.nextDomain)+gi.encodingLength(t.rrtypes)}}),Qp=Ut({encode(t,e,r){e||(e=new Uint8Array(Qp.encodingLength(t))),r||(r=0);let n=r,s=t.salt;if(!uu(s))throw new Error("salt must be a Buffer");let i=t.nextDomain;if(!uu(i))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,Be(e,t.iterations,r),r+=2,e[r]=s.length,r+=1,Zn(s,e,r,0,s.length),r+=s.length,e[r]=i.length,r+=1,Zn(i,e,r,0,i.length),r+=i.length,gi.encode(t.rrtypes,e,r),r+=gi.encode.bytes,Qp.encode.bytes=r-n,Be(e,Qp.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=et(t,e),e+=2;let i=t[e];e+=1,n.salt=t.slice(e,e+i),e+=i;let o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=gi.decode(t,e,s-(e-r)),e+=gi.decode.bytes,Qp.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+gi.encodingLength(t.rrtypes)}}),eh=Ut({encode(t,e,r){e||(e=new Uint8Array(eh.encodingLength(t))),r||(r=0);let n=r,s=t.digest;if(!uu(s))throw new Error("Digest must be a Buffer");return r+=2,Be(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,Zn(s,e,r,0,s.length),r+=s.length,eh.encode.bytes=r-n,Be(e,eh.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=et(t,e);return e+=2,n.keyTag=et(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+s+2),e+=n.digest.length,eh.decode.bytes=e-r,n},encodingLength(t){return 6+ua(t.digest)}}),wd=Ut({encode(t,e,r){e||(e=new Uint8Array(wd.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let s=e_(t.fingerprint),i=n_(t.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${s} != ${i}`);return Ek(e,t.fingerprint,r,r+=s),wd.encode.bytes=r-n,Be(e,wd.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let s=n_(n.hash);return n.fingerprint=wk(t,e,e+s),e+=s,wd.decode.bytes=e-r,n},encodingLength(t){return 4+e_(t.fingerprint)}});function n_(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}wd.getFingerprintLengthForHashType=n_;function t_(t){switch(t.toUpperCase()){case"A":return Ak;case"PTR":return _d;case"CNAME":return _d;case"DNAME":return _d;case"TXT":return O0;case"NULL":return k0;case"AAAA":return F0;case"SRV":return B0;case"HINFO":return I0;case"CAA":return cu;case"NS":return C0;case"SOA":return P0;case"MX":return T0;case"OPT":return lu;case"DNSKEY":return io;case"RRSIG":return Xp;case"RP":return Yp;case"NSEC":return Zp;case"NSEC3":return Qp;case"SSHFP":return wd;case"DS":return eh}return x0}var ji=Ut({encode(t,e,r){e||(e=new Uint8Array(ji.encodingLength(t))),r||(r=0);let n=r;if(De.encode(t.name,e,r),r+=De.encode.bytes,Be(e,yd(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");Be(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,Be(e,t.flags||0,r+6),r+=8,lu.encode(t.options||[],e,r),r+=lu.encode.bytes}else{let s=YE(t.class===void 0?"IN":t.class);t.flush&&(s|=r_),Be(e,s,r+2),no(e,t.ttl||0,r+4),r+=8;let i=t_(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return ji.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=De.decode(t,e),e+=De.decode.bytes,r.type=Jp(et(t,e)),r.type==="OPT")r.udpPayloadSize=et(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=et(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=lu.decode(t,e+8),e+=8+lu.decode.bytes;else{let s=et(t,e+2);r.ttl=ro(t,e+4),r.class=XE(s&UX),r.flush=!!(s&r_);let i=t_(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return ji.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return De.encodingLength(t.name)+8+t_(t.type).encodingLength(e)}}),Dd=Ut({encode(t,e,r){e||(e=new Uint8Array(Dd.encodingLength(t))),r||(r=0);let n=r;return De.encode(t.name,e,r),r+=De.encode.bytes,Be(e,yd(t.type),r),r+=2,Be(e,YE(t.class===void 0?"IN":t.class),r),r+=2,Dd.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=De.decode(t,e),e+=De.decode.bytes,n.type=Jp(et(t,e)),e+=2,n.class=XE(et(t,e)),e+=2,!!(n.class&Sk)&&(n.class&=VX),Dd.decode.bytes=e-r,n},encodingLength(t){return De.encodingLength(t.name)+4}});var xk=1<<10,L1e=1<<9,U1e=1<<8,V1e=1<<7,K1e=1<<5,H1e=1<<4,W1e=1<<15,dn={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(KX(t))),r||(r=0);let s=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),bd.encode(t,e,r),r+=bd.encode.bytes,r=th(t.questions,Dd,e,r),r=th(t.answers,ji,e,r),r=th(t.authorities,ji,e,r),r=th(t.additionals,ji,e,r),dn.encode.bytes=r-s,n&&rh.bytes!==e.length?e.slice(0,rh.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=bd.decode(t,e);return e+=bd.decode.bytes,e=A0(n.questions,Dd,t,e),e=A0(n.answers,ji,t,e),e=A0(n.authorities,ji,t,e),e=A0(n.additionals,ji,t,e),dn.decode.bytes=e-r,n},encodingLength:function(t){return bd.encodingLength(t)+Ed(t.questions||[],Dd)+Ed(t.answers||[],ji)+Ed(t.authorities||[],ji)+Ed(t.additionals||[],ji)}};dn.encode.bytes=0;dn.decode.bytes=0;function $0(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var R0={encode:function(t,e,r){return e=dn.encode($0(t,"query"),e,r),R0.encode.bytes=dn.encode.bytes,e},decode:function(t,e){let r=dn.decode(t,e);return R0.decode.bytes=dn.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return dn.encodingLength($0(t,"query"))}};R0.encode.bytes=0;R0.decode.bytes=0;var N0={encode:function(t,e,r){return e=dn.encode($0(t,"response"),e,r),N0.encode.bytes=dn.encode.bytes,e},decode:function(t,e){let r=dn.decode(t,e);return N0.decode.bytes=dn.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return dn.encodingLength($0(t,"response"))}};N0.encode.bytes=0;N0.decode.bytes=0;var rh=dn.encode,j0=dn.decode,KX=dn.encodingLength;function Ck(t){let e=rh(t),r=new Uint8Array(2+e.byteLength);return Be(r,e.byteLength),Zn(e,r,2,0,e.length),Ck.bytes=r.byteLength,r}Ck.bytes=0;function Pk(t){let e=et(t,0);if(t.byteLength<e+2)return null;let r=j0(t.slice(2));return Pk.bytes=j0.bytes,r}Pk.bytes=0;function Ed(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function th(t,e,r,n){for(let s=0;s<t.length;s++)e.encode(t[s],r,n),n+=e.encode.bytes;return n}function A0(t,e,r,n){for(let s=0;s<t.length;s++)t[s]=e.decode(r,n),n+=e.decode.bytes;return n}var Ok=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},qi=class{static getSigningMethod(e){return Ok(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return Ok(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var $n=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},kk=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Ik="https://diddht.tbddev.org",HX=0,Sd=7200,q0=";",Fn=",",i_;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(i_||(i_={}));var so;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1"})(so||(so={}));var s_;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(s_||(s_={}));var Bk={Ed25519:so.Ed25519,ES256K:so.secp256k1,ES256:so.secp256r1,"P-256":so.secp256r1,secp256k1:so.secp256k1,secp256r1:so.secp256r1},Mi=class extends qi{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o,a,u,c,l,d,h,f;return $n(this,void 0,void 0,function*(){if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(I=>!(I.algorithm in Bk)))throw new Error("One or more verification method algorithms are not supported");let p=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(I=>"id"in I).map(I=>I.id);if(p&&p.length!==new Set(p).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(I=>!I.id||!I.type||!I.serviceEndpoint))throw new Error("One or more services are missing required properties");let y=yield e.generateKey({algorithm:"Ed25519"}),w=yield e.getPublicKey({keyUri:y}),P=yield Zr.identityKeyToIdentifier({identityKey:w}),C=Object.assign(Object.assign({id:P},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),v=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];v?.some(I=>{var T;return((T=I.id)===null||T===void 0?void 0:T.split("#").pop())==="0"})||v.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let I of v){let T=I.id&&I.id.split("#").pop()==="0"?y:yield e.generateKey({algorithm:I.algorithm}),j=yield e.getPublicKey({keyUri:T}),g=(u=(a=I.id)!==null&&a!==void 0?a:j.kid)!==null&&u!==void 0?u:yield nt({jwk:j});g=`${P}#${Yn(g)}`,(c=C.verificationMethod)!==null&&c!==void 0||(C.verificationMethod=[]),C.verificationMethod.push({id:g,type:"JsonWebKey",controller:(l=I.controller)!==null&&l!==void 0?l:P,publicKeyJwk:j});for(let b of(d=I.purposes)!==null&&d!==void 0?d:[])C[b]||(C[b]=[]),C[b].push(g)}(h=r.services)===null||h===void 0||h.forEach(I=>{var T;(T=C.service)!==null&&T!==void 0||(C.service=[]),I.id=`${P}#${I.id.split("#").pop()}`,C.service.push(I)});let k=new Dn({uri:P,document:C,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){let I=yield Mi.publish({did:k,gatewayUri:r.gatewayUri});k.metadata=I.didDocumentMetadata}return k})}static import({portableDid:e,keyManager:r=new Ir}){var n;return $n(this,void 0,void 0,function*(){let s=Qe.parse(e.uri);if(s?.method!==Mi.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");let i=yield Dn.import({portableDid:e,keyManager:r});if(!(!((n=i.document.verificationMethod)===null||n===void 0)&&n.some(o=>{var a;return((a=o.id)===null||a===void 0?void 0:a.split("#").pop())==="0"})))throw new Ee(_e.InvalidDidDocument,"DID document must contain an Identity Key");return i})}static getSigningMethod({didDocument:e,methodId:r="#0"}){var n;return $n(this,void 0,void 0,function*(){let s=Qe.parse(e.id);if(s&&s.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${s.method}`);let i=(n=e.verificationMethod)===null||n===void 0?void 0:n.find(o=>{var a,u;return Yn(o.id)===((a=Yn(r))!==null&&a!==void 0?a:Yn((u=e.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(i&&i.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static publish({did:e,gatewayUri:r=Ik}){return $n(this,void 0,void 0,function*(){return yield la.put({did:e,gatewayUri:r})})}static resolve(e,r={}){var n;return $n(this,void 0,void 0,function*(){let s=(n=r?.gatewayUri)!==null&&n!==void 0?n:Ik;try{yield Zr.identifierToIdentityKey({didUri:e});let{didDocument:i,didDocumentMetadata:o}=yield la.get({didUri:e,gatewayUri:s});return Object.assign(Object.assign({},lr),{didDocument:i,didDocumentMetadata:o})}catch(i){if(!(i instanceof Ee))throw new Error(i);return Object.assign(Object.assign({},lr),{didResolutionMetadata:Object.assign({error:i.code},i.message&&{errorMessage:i.message})})}})}};Mi.methodName="dht";var la=class{static get({didUri:e,gatewayUri:r}){return $n(this,void 0,void 0,function*(){let n=Zr.identifierToIdentityKeyBytes({didUri:e}),s=yield la.pkarrGet({gatewayUri:r,publicKeyBytes:n}),i=yield Zr.parseBep44GetMessage({bep44Message:s}),o=yield la.fromDnsPacket({didUri:e,dnsPacket:i});return o.didDocumentMetadata.versionId=s.seq.toString(),o})}static put({did:e,gatewayUri:r}){return $n(this,void 0,void 0,function*(){let n=yield la.toDnsPacket({didDocument:e.document,didMetadata:e.metadata}),s=yield Zr.createBep44PutMessage({dnsPacket:n,publicKeyBytes:Zr.identifierToIdentityKeyBytes({didUri:e.uri}),signer:yield e.getSigner({methodId:"0"})}),i=yield la.pkarrPut({gatewayUri:r,bep44Message:s});return{didDocument:e.document,didDocumentMetadata:Object.assign(Object.assign({},e.metadata),{published:i,versionId:s.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet({gatewayUri:e,publicKeyBytes:r}){return $n(this,void 0,void 0,function*(){let n=ne.uint8Array(r).toBase32Z(),s=new URL(n,e).href,i;try{if(i=yield fetch(s,{method:"GET"}),!i.ok)throw new Ee(_e.NotFound,`Pkarr record not found for: ${n}`)}catch(u){throw u instanceof Ee?u:new Ee(_e.InternalError,`Failed to fetch Pkarr record: ${u.message}`)}let o=yield i.arrayBuffer();if(!o)throw new Ee(_e.NotFound,`Pkarr record not found for: ${n}`);if(o.byteLength<72)throw new Ee(_e.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${o.byteLength}`);if(o.byteLength>1072)throw new Ee(_e.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${o.byteLength}`);return{k:r,seq:Number(new DataView(o).getBigUint64(64)),sig:new Uint8Array(o,0,64),v:new Uint8Array(o,72)}})}static pkarrPut({gatewayUri:e,bep44Message:r}){return $n(this,void 0,void 0,function*(){let n=ne.uint8Array(r.k).toBase32Z(),s=new URL(n,e).href,i=new Uint8Array(r.v.length+72);i.set(r.sig,0),new DataView(i.buffer).setBigUint64(r.sig.length,BigInt(r.seq)),i.set(r.v,r.sig.length+8);let o;try{o=yield fetch(s,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:i})}catch(a){throw new Ee(_e.InternalError,`Failed to put Pkarr record: ${a.message}`)}return o.ok})}static fromDnsPacket({didUri:e,dnsPacket:r}){var n,s,i;return $n(this,void 0,void 0,function*(){let o={id:e},a={published:!0},u=new Map;for(let c of(n=r?.answers)!==null&&n!==void 0?n:[]){if(c.type!=="TXT")continue;let l=c.name.split(".")[0].substring(1);switch(!0){case l.startsWith("aka"):{let d=Zr.parseTxtDataToString(c.data);o.alsoKnownAs=d.split(Fn);break}case l.startsWith("cnt"):{let d=Zr.parseTxtDataToString(c.data);o.controller=d.includes(Fn)?d.split(Fn):d;break}case l.startsWith("k"):{let{id:d,t:h,k:f,c:p}=Zr.parseTxtDataToObject(c.data),y=ne.base64Url(f).toUint8Array(),w=so[Number(h)],P=yield Zr.keyConverter(w).bytesToPublicKey({publicKeyBytes:y});(s=o.verificationMethod)!==null&&s!==void 0||(o.verificationMethod=[]);let C=`${e}#${d}`;o.verificationMethod.push({id:C,type:"JsonWebKey",controller:p??e,publicKeyJwk:P}),u.set(l,C);break}case l.startsWith("s"):{let d=Zr.parseTxtDataToObject(c.data),{id:h,t:f,se:p}=d,y=kk(d,["id","t","se"]),w=p.includes(Fn)?p.split(Fn):p,P=Object.fromEntries(Object.entries(y).map(([C,v])=>[C,v.includes(Fn)?v.split(Fn):v]));(i=o.service)!==null&&i!==void 0||(o.service=[]),o.service.push(Object.assign(Object.assign({},P),{id:`${e}#${h}`,type:f,serviceEndpoint:w}));break}case l.startsWith("typ"):{let{id:d}=Zr.parseTxtDataToObject(c.data);a.types=d.split(Fn).map(h=>Number(h));break}case l.startsWith("did"):{let d=P=>P.split(Fn).map(C=>u.get(C)).filter(C=>typeof C=="string"),{auth:h,asm:f,del:p,inv:y,agm:w}=Zr.parseTxtDataToObject(c.data);h&&(o.authentication=d(h)),f&&(o.assertionMethod=d(f)),p&&(o.capabilityDelegation=d(p)),y&&(o.capabilityInvocation=d(y)),w&&(o.keyAgreement=d(w));break}}}return{didDocument:o,didDocumentMetadata:a,didResolutionMetadata:{}}})}static toDnsPacket({didDocument:e,didMetadata:r}){var n,s,i,o,a;return $n(this,void 0,void 0,function*(){let u=[],c=new Map,l=[],d=[];if(e.alsoKnownAs&&u.push({type:"TXT",name:"_aka.did.",ttl:Sd,data:e.alsoKnownAs.join(Fn)}),e.controller){let y=Array.isArray(e.controller)?e.controller.join(Fn):e.controller;u.push({type:"TXT",name:"_cnt.did.",ttl:Sd,data:y})}for(let[y,w]of(s=(n=e.verificationMethod)===null||n===void 0?void 0:n.entries())!==null&&s!==void 0?s:[]){let P=`k${y}`;d.push(P);let C=w.id.split("#").pop();c.set(C,P);let v=w.publicKeyJwk;if(!(v?.crv&&v.crv in Bk))throw new Ee(_e.InvalidPublicKeyType,`Verification method '${w.id}' contains an unsupported key type: ${(i=v?.crv)!==null&&i!==void 0?i:"undefined"}`);let k=so[v.crv],I=yield Zr.keyConverter(v.crv).publicKeyToBytes({publicKey:v}),T=ne.uint8Array(I).toBase64Url(),j=[`id=${C}`,`t=${k}`,`k=${T}`];w.controller!==e.id&&j.push(`c=${w.controller}`),u.push({type:"TXT",name:`_${P}._did.`,ttl:Sd,data:j.join(q0)})}(o=e.service)===null||o===void 0||o.forEach((y,w)=>{let P=`s${w}`;l.push(P);let{id:C,type:v,serviceEndpoint:k}=y,I=kk(y,["id","type","serviceEndpoint"]);C=Yn(C),k=Array.isArray(k)?k.join(","):k;let T=Object.entries(Object.assign({id:C,t:v,se:k},I)).map(([j,g])=>`${j}=${g}`);u.push({type:"TXT",name:`_${P}._did.`,ttl:Sd,data:T.join(q0)})});let h=[`v=${HX}`];if(d.length&&h.push(`vm=${d.join(Fn)}`),Object.keys(Nc).forEach(y=>{var w;let P=(w=e[y])===null||w===void 0?void 0:w.map(C=>c.get(C.split("#").pop()));if(P){let C=s_[y];h.push(`${C}=${P.join(Fn)}`)}}),l.length&&h.push(`svc=${l.join(Fn)}`),!((a=r.types)===null||a===void 0)&&a.length){let w=r.types.map(P=>typeof P=="string"?i_[P]:P);u.push({type:"TXT",name:"_typ._did.",ttl:Sd,data:`id=${w.join(Fn)}`})}u.push({type:"TXT",name:"_did.",ttl:Sd,data:h.join(q0)});let[,,f]=e.id.split(":");return u.forEach(y=>y.name+=f),{id:0,type:"response",flags:xk,answers:u}})}},Zr=class{static createBep44PutMessage({dnsPacket:e,publicKeyBytes:r,signer:n}){return $n(this,void 0,void 0,function*(){let s=Math.ceil(Date.now()/1e3),i=rh(e),o=GE.encode({seq:s,v:i}).subarray(1,-1);if(o.length>1e3)throw new Ee(_e.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${o.length} bytes`);let a=yield n.sign({data:o});return{k:r,seq:s,sig:a,v:i}})}static identifierToIdentityKey({didUri:e}){return $n(this,void 0,void 0,function*(){let r=Zr.identifierToIdentityKeyBytes({didUri:e});return yield Wt.bytesToPublicKey({publicKeyBytes:r})})}static identifierToIdentityKeyBytes({didUri:e}){let r=Qe.parse(e);if(!r)throw new Ee(_e.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==Mi.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=ne.base32Z(r.id).toUint8Array()}catch{throw new Ee(_e.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new Ee(_e.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier({identityKey:e}){return $n(this,void 0,void 0,function*(){let r=yield Wt.publicKeyToBytes({publicKey:e}),n=ne.uint8Array(r).toBase32Z();return`did:${Mi.methodName}:${n}`})}static keyConverter(e){let n={Ed25519:Wt,"P-256":cr,secp256k1:tr}[e];if(!n)throw new Ee(_e.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage({bep44Message:e}){return $n(this,void 0,void 0,function*(){let r=yield Wt.bytesToPublicKey({publicKeyBytes:e.k}),n=GE.encode({seq:e.seq,v:e.v}).subarray(1,-1);if(!(yield Wt.verify({key:r,signature:e.sig,data:n})))throw new Ee(_e.InvalidSignature,"Invalid signature for DHT BEP44 message");return j0(e.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(q0).reduce((r,n)=>{let[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return ne.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new Ee(_e.InternalError,"Pkarr returned DNS TXT record with invalid data type")}};var rr={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};var Vt=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var lwe=new Uint8Array(0);var o_=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},a_=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Tk(this,e)}},u_=class{constructor(e){this.decoders=e}or(e){return Tk(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Tk=(t,e)=>new u_({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),c_=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new o_(e,r,n),this.decoder=new a_(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},zX=({name:t,prefix:e,encode:r,decode:n})=>new c_(t,e,r,n);var JX=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},GX=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},nh=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>zX({prefix:e,name:t,encode(s){return GX(s,n,r)},decode(s){return JX(s,n,r,t)}});var gwe=nh({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vwe=nh({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ih=nh({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bwe=nh({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Qr=class{static encode(e){return ih.baseEncode(e)}static decodeAsBytes(e,r){if(!Qr.isBase64UrlString(e))throw new Vt(rr.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return ih.baseDecode(e)}static decodeAsString(e,r){let n=Qr.decodeAsBytes(e,r);return Qr.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var lB=Kn(l_(),1);var d_;(function(t){t.Public="public",t.Private="private"})(d_||(d_={}));var vi=d_;var Vr=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===vi.Private&&n.add("d");for(let s in e)if(!n.has(s))throw new Vt(rr.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(e.crv!=="secp256k1")throw new Vt(rr.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Vt(rr.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Vt(rr.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Vt(rr.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===vi.Private&&(e.d===void 0||e.d.length!==43))throw new Vt(rr.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Vt(rr.IdTooLong,`Key ID length ${e.length} exceed max allowed length of ${50}.`);if(!Qr.isBase64UrlString(e))throw new Vt(rr.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new Vt(rr.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};var Br=class{};Br.hashAlgorithmInMultihashCode=18;Br.maxCanonicalizedDeltaSizeInBytes=1e3;var Rk=Kn(f_(),1);var Qn=class{static canonicalizeAsBytes(e){let r=Qn.removeAllUndefinedProperties(e),n=Rk.default(r);return Qr.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?Qn.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};var Y0=Kn(sB(),1);var tQ=uB,oB=128,rQ=127,nQ=~rQ,iQ=Math.pow(2,31);function uB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=iQ;)e[r++]=t&255|oB,t/=128;for(;t&nQ;)e[r++]=t&255|oB,t>>>=7;return e[r]=t|0,uB.bytes=r-n+1,e}var sQ=U_,oQ=128,aB=127;function U_(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw U_.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&aB)<<s:(o&aB)*Math.pow(2,s),s+=7}while(o>=oQ);return U_.bytes=i-n,r}var aQ=Math.pow(2,7),uQ=Math.pow(2,14),cQ=Math.pow(2,21),lQ=Math.pow(2,28),dQ=Math.pow(2,35),fQ=Math.pow(2,42),pQ=Math.pow(2,49),hQ=Math.pow(2,56),mQ=Math.pow(2,63),yQ=function(t){return t<aQ?1:t<uQ?2:t<cQ?3:t<lQ?4:t<dQ?5:t<fQ?6:t<pQ?7:t<hQ?8:t<mQ?9:10},gQ={encode:tQ,decode:sQ,encodingLength:yQ},vQ=gQ,V_=vQ;var K_=(t,e,r=0)=>(V_.encode(t,e,r),e),H_=t=>V_.encodingLength(t);var z_=(t,e)=>{let r=e.byteLength,n=H_(t),s=n+H_(r),i=new Uint8Array(s+r);return K_(t,i,0),K_(r,i,n),i.set(e,s),new W_(t,r,e,i)};var W_=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var G_=({name:t,code:e,encode:r})=>new J_(t,e,r),J_=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?z_(this.code,r):r.then(n=>z_(this.code,n))}else throw Error("Unknown type, must be binary type")}};var cB=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),X_=G_({name:"sha2-256",code:18,encode:cB("SHA-256")}),VEe=G_({name:"sha2-512",code:19,encode:cB("SHA-512")});var fh=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},dr=class{static hash(e,r){return fh(this,void 0,void 0,function*(){let n=yield this.hashAsNonMultihashBytes(e,r);return Y0.encode(n,r)})}static hashAsNonMultihashBytes(e,r){return fh(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield X_.encode(e);break;default:throw new Vt(rr.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return fh(this,void 0,void 0,function*(){let n=Qn.canonicalizeAsBytes(e);return yield dr.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return fh(this,void 0,void 0,function*(){let n=Qn.canonicalizeAsBytes(e),s=yield dr.hashAsNonMultihashBytes(n,r);return yield dr.hashThenEncode(s,r)})}static hashThenEncode(e,r){return fh(this,void 0,void 0,function*(){let n=yield dr.hash(e,r);return Qr.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,s=Qr.decodeAsBytes(e,r);try{n=Y0.decode(s)}catch{throw new Vt(rr.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let i=Br.hashAlgorithmInMultihashCode;if(i!==n.code)throw new Vt(rr.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}};var Y_;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(Y_||(Y_={}));var ph=Y_;var Z_;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(Z_||(Z_={}));var Lc=Z_;var Z0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Tr=class{static createCreateRequest(e){return Z0(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,s=e.document.publicKeys,i=e.document.services;Vr.validateEs256kOperationKey(r,vi.Public),Vr.validateEs256kOperationKey(n,vi.Public),Tr.validateDidDocumentKeys(s),Tr.validateServices(i);let o=Br.hashAlgorithmInMultihashCode,a=[{action:Lc.Replace,document:e.document}],u={updateCommitment:yield dr.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};Tr.validateDeltaSize(u);let l={deltaHash:yield dr.canonicalizeThenHashThenEncode(u,o),recoveryCommitment:yield dr.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:ph.Create,suffixData:l,delta:u}})}static createDeactivateRequest(e){return Z0(this,void 0,void 0,function*(){Tr.validateDidSuffix(e.didSuffix),Vr.validateEs256kOperationKey(e.recoveryPublicKey,vi.Public);let r=Br.hashAlgorithmInMultihashCode,n=yield dr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},i=yield e.signer.sign({alg:"ES256K"},s);return{type:ph.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(e){return Z0(this,void 0,void 0,function*(){Tr.validateDidSuffix(e.didSuffix),Vr.validateEs256kOperationKey(e.recoveryPublicKey,vi.Public),Vr.validateEs256kOperationKey(e.nextRecoveryPublicKey,vi.Public),Vr.validateEs256kOperationKey(e.nextUpdatePublicKey,vi.Public),Tr.validateDidDocumentKeys(e.document.publicKeys),Tr.validateServices(e.document.services);let r=Br.hashAlgorithmInMultihashCode,n=yield dr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s=[{action:Lc.Replace,document:e.document}],i=yield dr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield dr.canonicalizeThenHashThenEncode(o,r),c={recoveryCommitment:yield dr.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},l=yield e.signer.sign({alg:"ES256K"},c);return{type:ph.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:l}})}static createUpdateRequest(e){return Z0(this,void 0,void 0,function*(){if(Tr.validateDidSuffix(e.didSuffix),Vr.validateEs256kOperationKey(e.updatePublicKey,vi.Public),Vr.validateEs256kOperationKey(e.nextUpdatePublicKey,vi.Public),Tr.validateServices(e.servicesToAdd),Tr.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let p of e.idsOfServicesToRemove)Vr.validateId(p);if(e.idsOfPublicKeysToRemove!==void 0)for(let p of e.idsOfPublicKeysToRemove)Vr.validateId(p);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let p={action:Lc.AddServices,services:n};r.push(p)}let s=e.idsOfServicesToRemove;if(s!==void 0&&s.length>0){let p={action:Lc.RemoveServices,ids:s};r.push(p)}let i=e.publicKeysToAdd;if(i!==void 0&&i.length>0){let p={action:Lc.AddPublicKeys,publicKeys:i};r.push(p)}let o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){let p={action:Lc.RemovePublicKeys,ids:o};r.push(p)}let a=Br.hashAlgorithmInMultihashCode,u=yield dr.canonicalizeThenHashThenEncode(e.updatePublicKey,a),c=yield dr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),l={patches:r,updateCommitment:c},d=yield dr.canonicalizeThenHashThenEncode(l,a),h={updateKey:e.updatePublicKey,deltaHash:d},f=yield e.signer.sign({alg:"ES256K"},h);return{type:ph.Update,didSuffix:e.didSuffix,revealValue:u,delta:l,signedData:f}})}static validateDidSuffix(e){dr.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new Vt(rr.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(Vr.validateId(n.id),r.has(n.id))throw new Vt(rr.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),Vr.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(Tr.validateService(n),r.has(n.id))throw new Vt(rr.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){Vr.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Vt(rr.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new Vt(rr.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&lB.parse(e.serviceEndpoint).error!==void 0)throw new Vt(rr.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=Qn.canonicalizeAsBytes(e);if(r.length>Br.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${Br.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Vt(rr.DeltaExceedsMaximumSize,n)}}};var dB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},pu=class{static createLongFormDid(e){return dB(this,void 0,void 0,function*(){let r=yield Tr.createCreateRequest(e),n=yield pu.computeDidUniqueSuffix(r.suffixData),s;Br.network===void 0||Br.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${Br.network}:${n}`;let i={suffixData:r.suffixData,delta:r.delta},o=Qn.canonicalizeAsBytes(i),a=Qr.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(e){return dB(this,void 0,void 0,function*(){let r=Qn.canonicalizeAsBytes(e),n=yield dr.hash(r,Br.hashAlgorithmInMultihashCode);return Qr.encode(n)})}};var fB;(function(t){t.Mainnet="mainnet",t.Testnet="test"})(fB||(fB={}));var pB;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(pB||(pB={}));var hu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ao;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(ao||(ao={}));var EQ={Ed25519:ao.Ed25519,ES256K:ao.secp256k1,ES256:ao.secp256r1,"P-256":ao.secp256r1,secp256k1:ao.secp256k1,secp256r1:ao.secp256r1},hB="https://ion.tbd.engineering",uo=class extends qi{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o,a,u,c;return hu(this,void 0,void 0,function*(){if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(I=>!(I.algorithm in EQ)))throw new Error("One or more verification method algorithms are not supported");let l=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(I=>"id"in I).map(I=>I.id);if(l&&l.length!==new Set(l).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(I=>!I.id||!I.type||!I.serviceEndpoint))throw new Error("One or more services are missing required properties");let d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},h=[];for(let I of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){let T=yield e.generateKey({algorithm:I.algorithm}),j=yield e.getPublicKey({keyUri:T});h.push({id:I.id,publicKeyJwk:j,purposes:(a=I.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let f=yield e.generateKey({algorithm:ao.secp256k1}),p=yield e.getPublicKey({keyUri:f}),y=yield e.generateKey({algorithm:ao.secp256k1}),w=yield e.getPublicKey({keyUri:y}),P=yield ei.computeLongFormDidUri({recoveryKey:p,updateKey:w,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:h}),{didDocument:C,didResolutionMetadata:v}=yield uo.resolve(P,{gatewayUri:r.gatewayUri});if(C===null)throw new Error(`Unable to resolve DID during creation: ${v?.error}`);let k=new Dn({uri:P,document:C,metadata:{published:!1,canonicalId:P.split(":",3).join(":"),recoveryKey:p,updateKey:w},keyManager:e});if(!((c=r.publish)!==null&&c!==void 0)||c){let I=yield uo.publish({did:k,gatewayUri:r.gatewayUri});k.metadata=I.didDocumentMetadata}return k})}static getSigningMethod({didDocument:e,methodId:r}){var n;return hu(this,void 0,void 0,function*(){let s=Qe.parse(e.id);if(s&&s.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${s.method}`);let i=(n=e.verificationMethod)===null||n===void 0?void 0:n.find(o=>{var a;return o.id===(r??((a=e.assertionMethod)===null||a===void 0?void 0:a[0]))});if(!(i&&i.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import({portableDid:e,keyManager:r=new Ir}){return hu(this,void 0,void 0,function*(){let n=Qe.parse(e.uri);if(n?.method!==uo.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");return yield Dn.import({portableDid:e,keyManager:r})})}static publish({did:e,gatewayUri:r=hB}){var n,s,i;return hu(this,void 0,void 0,function*(){let o=(s=(n=e.document.verificationMethod)===null||n===void 0?void 0:n.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:VE({didDocument:e.document,methodId:c.id})})))!==null&&s!==void 0?s:[],a=yield ei.createIonDocument({services:(i=e.document.service)!==null&&i!==void 0?i:[],verificationMethods:o}),u=yield ei.constructCreateRequest({ionDocument:a,recoveryKey:e.metadata.recoveryKey,updateKey:e.metadata.updateKey});try{let c=ei.appendPathToUrl({baseUrl:r,path:"/operations"}),l=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});return{didDocument:e.document,didDocumentMetadata:Object.assign(Object.assign({},e.metadata),{published:l.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:_e.InternalError,errorMessage:`Failed to publish DID document for: ${e.uri}`}}}})}static resolve(e,r={}){var n,s;return hu(this,void 0,void 0,function*(){let i=Qe.parse(e);if(!i)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"invalidDid"}});if(i.method!==uo.methodName)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"methodNotSupported"}});let o=(n=r?.gatewayUri)!==null&&n!==void 0?n:hB;try{let a=ei.appendPathToUrl({baseUrl:o,path:`/identifiers/${e}`}),u=yield fetch(a);if(!u.ok)throw new Ee(_e.NotFound,`Unable to find DID document for: ${e}`);let{didDocument:c,didDocumentMetadata:l}=yield u.json();return Object.assign(Object.assign(Object.assign({},lr),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(s=l?.method)===null||s===void 0?void 0:s.published},l)})}catch(a){if(!(a instanceof Ee))throw new Error(a);return Object.assign(Object.assign({},lr),{didResolutionMetadata:Object.assign({error:a.code},a.message&&{errorMessage:a.message})})}})}};uo.methodName="ion";var ei=class{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri({recoveryKey:e,updateKey:r,services:n,verificationMethods:s}){return hu(this,void 0,void 0,function*(){let i=yield ei.createIonDocument({services:n,verificationMethods:s}),o=ei.normalizeJwk(e),a=ei.normalizeJwk(r);return yield pu.createLongFormDid({document:i,recoveryKey:o,updateKey:a})})}static constructCreateRequest({ionDocument:e,recoveryKey:r,updateKey:n}){return hu(this,void 0,void 0,function*(){return yield Tr.createCreateRequest({document:e,recoveryKey:ei.normalizeJwk(r),updateKey:ei.normalizeJwk(n)})})}static createIonDocument({services:e,verificationMethods:r}){var n,s;return hu(this,void 0,void 0,function*(){let i=[];for(let u of r){let c=(s=(n=u.id)!==null&&n!==void 0?n:u.publicKeyJwk.kid)!==null&&s!==void 0?s:yield nt({jwk:u.publicKeyJwk});c=`${c.split("#").pop()}`;let l={id:c,publicKeyJwk:ei.normalizeJwk(u.publicKeyJwk),purposes:u.purposes,type:"JsonWebKey2020"};i.push(l)}let o=e.map(u=>Object.assign(Object.assign({},u),{id:`${u.id.split("#").pop()}`}));return{publicKeys:i,services:o}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var Q0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Li=class extends qi{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o;return Q0(this,void 0,void 0,function*(){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=ne.object(c).toBase64Url(),d=`did:${Li.methodName}:${l}`,f=(yield Li.resolve(d)).didDocument;return new Dn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod({didDocument:e}){var r;return Q0(this,void 0,void 0,function*(){let n=Qe.parse(e.id);if(n&&n.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${n.method}`);let[s]=(r=e.verificationMethod)!==null&&r!==void 0?r:[];if(!(s&&s.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import({portableDid:e,keyManager:r=new Ir}){return Q0(this,void 0,void 0,function*(){let n=Qe.parse(e.uri);if(n?.method!==Li.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");let s=yield Dn.import({portableDid:e,keyManager:r});if(s.document.verificationMethod.length!==1)throw new Ee(_e.InvalidDidDocument,"DID document must contain exactly one verification method");return s})}static resolve(e,r){return Q0(this,void 0,void 0,function*(){let n=Qe.parse(e),s;try{s=ne.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==Li.methodName)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"methodNotSupported"}});let i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},lr),{didDocument:i})})}};Li.methodName="jwk";var vs=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},pa;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(pa||(pa={}));var Q_={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},_Q={Ed25519:pa.Ed25519,ES256K:pa.secp256k1,ES256:pa.secp256r1,"P-256":pa.secp256r1,secp256k1:pa.secp256k1,secp256r1:pa.secp256r1,X25519:pa.X25519},ti=class extends qi{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o;return vs(this,void 0,void 0,function*(){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=yield Fr.publicKeyToMultibaseId({publicKey:c}),d=`did:${ti.methodName}:${l}`,f=(yield ti.resolve(d,r)).didDocument;return new Dn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod({didDocument:e}){var r;return vs(this,void 0,void 0,function*(){let n=Qe.parse(e.id);if(n&&n.method!==this.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${n.method}`);let[s]=e.assertionMethod||[],i=(r=e.verificationMethod)===null||r===void 0?void 0:r.find(o=>o.id===s);if(!(i&&i.publicKeyJwk))throw new Ee(_e.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import({portableDid:e,keyManager:r=new Ir}){return vs(this,void 0,void 0,function*(){let n=Qe.parse(e.uri);if(n?.method!==ti.methodName)throw new Ee(_e.MethodNotSupported,"Method not supported");let s=yield Dn.import({portableDid:e,keyManager:r});if(s.document.verificationMethod.length!==1)throw new Ee(_e.InvalidDidDocument,"DID document must contain exactly one verification method");return s})}static resolve(e,r){return vs(this,void 0,void 0,function*(){try{let n=yield ti.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},lr),{didDocument:n})}catch(n){if(!(n instanceof Ee))throw new Error(n);return Object.assign(Object.assign({},lr),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument({didUri:e,options:r={}}){return vs(this,void 0,void 0,function*(){let{defaultContext:n="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:s=!1,enableExperimentalPublicKeyTypes:i=!1,publicKeyFormat:o="JsonWebKey2020"}=r,a={id:""},u=Qe.parse(e);if(!u)throw new Ee(_e.InvalidDid,`Invalid DID URI: ${e}`);let c=u.id;if(u.method!==ti.methodName)throw new Ee(_e.MethodNotSupported,`Method not supported: ${u.method}`);if(!ti.validateIdentifier(u))throw new Ee(_e.InvalidDid,`Invalid DID URI: ${e}`);let l=yield ti.createSignatureMethod({didUri:e,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}});if(a.id=u.uri,a.verificationMethod=[l],a.authentication=[l.id],a.assertionMethod=[l.id],a.capabilityInvocation=[l.id],a.capabilityDelegation=[l.id],s===!0){let f=o==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",p=yield this.createEncryptionMethod({didUri:e,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:i,publicKeyFormat:f}});a.verificationMethod.push(p),a.keyAgreement=[p.id]}let d=[n];return UE({didDocument:a}).forEach(f=>{let p=Q_[f];d.push(p)}),a["@context"]=d,a})}static createEncryptionMethod({didUri:e,multibaseValue:r,options:n}){return vs(this,void 0,void 0,function*(){let{enableExperimentalPublicKeyTypes:s,publicKeyFormat:i}=n,o={id:"",type:"",controller:""},{keyBytes:a,multicodecCode:u}=yield ti.deriveEncryptionKey({multibaseValue:r}),c=a.byteLength,l=Fr.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(c!==l)throw new Ee(_e.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${l}`);let d=v0({keyBytes:a,multicodecCode:u});o.id=`${e}#${d}`;try{new URL(o.id)}catch{throw new Ee(_e.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(i in Q_))throw new Ee(_e.UnsupportedPublicKeyType,`Unsupported format: ${i}`);if(s===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(i))throw new Ee(_e.InvalidPublicKeyType,`Specified '${i}' without setting enableExperimentalPublicKeyTypes to true.`);if(o.type=i,o.controller=e,i==="X25519KeyAgreementKey2020"&&(o.publicKeyMultibase=d),i==="JsonWebKey2020"){let{crv:f}=yield Fr.multicodecToJwk({code:u});o.publicKeyJwk=yield Fr.keyConverter(f).bytesToPublicKey({publicKeyBytes:a})}return o})}static createSignatureMethod({didUri:e,multibaseValue:r,options:n}){return vs(this,void 0,void 0,function*(){let{enableExperimentalPublicKeyTypes:s,publicKeyFormat:i}=n,o={id:"",type:"",controller:""},{keyBytes:a,multicodecCode:u,multicodecName:c}=b0({multibaseKeyId:r}),l=a.byteLength,d=Fr.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(l!==d)throw new Ee(_e.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${d}`);let h=!1;switch(c){case"secp256k1-pub":h=yield tr.validatePublicKey({publicKeyBytes:a});break;case"ed25519-pub":h=yield Wt.validatePublicKey({publicKeyBytes:a});break;case"x25519-pub":h=!0;break}if(!h)throw new Ee(_e.InvalidPublicKey,"Invalid public key detected.");o.id=`${e}#${r}`;try{new URL(o.id)}catch{throw new Ee(_e.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(i in Q_))throw new Ee(_e.UnsupportedPublicKeyType,`Unsupported format: ${i}`);if(s===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(i))throw new Ee(_e.InvalidPublicKeyType,`Specified '${i}' without setting enableExperimentalPublicKeyTypes to true.`);if(o.type=i,o.controller=e,i==="Ed25519VerificationKey2020"&&(o.publicKeyMultibase=r),i==="JsonWebKey2020"){let{crv:p}=yield Fr.multicodecToJwk({code:u});o.publicKeyJwk=yield Fr.keyConverter(p).bytesToPublicKey({publicKeyBytes:a})}return o})}static deriveEncryptionKey({multibaseValue:e}){return vs(this,void 0,void 0,function*(){let r={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:n,multicodecCode:s}=b0({multibaseKeyId:e});if(s===237){let i=yield Fr.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:n}),o=yield Wt.convertPublicKeyToX25519({publicKey:i});r={keyBytes:yield Fr.keyConverter("Ed25519").publicKeyToBytes({publicKey:o}),multicodecCode:236}}return r})}static validateIdentifier(e){let{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&Nl(n)==="String"&&n.startsWith("z")}};ti.methodName="key";var Fr=class{static jwkToMulticodec({jwk:e}){return vs(this,void 0,void 0,function*(){let r=[];e.crv&&(r.push(e.crv),e.d?r.push("private"):r.push("public"));let n=r.join(":"),s=Fr.JWK_TO_MULTICODEC[n];if(s===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${n}'`);return{code:Qt.getCodeFromName({name:s}),name:s}})}static keyCompressor(e){let n={"P-256":cr.compressPublicKey,secp256k1:tr.compressPublicKey}[e];if(!n)throw new Ee(_e.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:Wt,"P-256":cr,secp256k1:tr,X25519:oa}[e];if(!n)throw new Ee(_e.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk({code:e,name:r}){return vs(this,void 0,void 0,function*(){if(!(r?!e:e))throw new Error("Either 'name' or 'code' must be defined, but not both.");r=r===void 0?Qt.getNameFromCode({code:e}):r;let n=r,s=Fr.MULTICODEC_TO_JWK[n];if(s===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},s)})}static publicKeyToMultibaseId({publicKey:e}){var r;return vs(this,void 0,void 0,function*(){if(!(e?.crv&&e.crv in _Q))throw new Ee(_e.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(r=e?.crv)!==null&&r!==void 0?r:"undefined"}`);let n=yield Fr.keyConverter(e.crv).publicKeyToBytes({publicKey:e});/^(secp256k1|P-256|P-384|P-521)$/.test(e.crv)&&(n=yield Fr.keyCompressor(e.crv)({publicKeyBytes:n}));let{name:s}=yield Fr.jwkToMulticodec({jwk:e});return v0({keyBytes:n,multicodecName:s})})}};Fr.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Fr.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Fr.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var DQ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ha=class extends qi{static resolve(e,r){return DQ(this,void 0,void 0,function*(){let n=Qe.parse(e);if(!n)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==ha.methodName)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);let i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{let o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");let a=yield o.json();return Object.assign(Object.assign({},lr),{didDocument:a})}catch{return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:"notFound"}})}})}};ha.methodName="web";var OQ=Kn(e2(),1),kQ=Kn(tw(),1);var yB={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var gB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Nd=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||yB;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return gB(this,void 0,void 0,function*(){let n=Qe.parse(e);if(!n)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:_e.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},lr),{didResolutionMetadata:{error:_e.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let i=yield this.cache.get(n.uri);if(i)return i;{let o=yield s.resolve(n.uri,r);return yield this.cache.set(n.uri,o),o}})}dereference(e,r){return gB(this,void 0,void 0,function*(){let n=Qe.parse(e);if(!n)return{dereferencingMetadata:{error:_e.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};let{service:a=[],verificationMethod:u=[]}=s,c=new Set([e,n.fragment,`#${n.fragment}`]),l;for(let d of u)if(c.has(d.id)){l=d;break}for(let d of a)if(c.has(d.id)){l=d;break}return l?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:l,contentMetadata:i}:{dereferencingMetadata:{error:_e.NotFound},contentStream:null,contentMetadata:{}}})}};var tg=new Nd({didResolvers:[Mi,Li,ha]});async function t2(t){let{didResolutionMetadata:e,didDocument:r}=await tg.resolve(t);if(e.error)throw new Error(`Failed to resolve DID: ${t}. Error: ${e.error}`);return r}function r2(t){return!!t&&"id"in t&&"type"in t&&"controller"in t}var vB=Kn(f_(),1),IQ=new Ir,bi=class{static digest(e){let r=(0,vB.default)(e),n=ne.string(r).toUint8Array();return Hn(n)}static async sign(e){let{did:r,payload:n,detached:s}=e,i=await r.getSigner(),o=i.keyId;o.startsWith("#")&&(o=`${r.uri}${o}`);let a={alg:i.algorithm,kid:o},u=ne.object(a).toBase64Url(),c=ne.uint8Array(n).toBase64Url(),l=`${u}.${c}`,d=ne.string(l).toUint8Array(),h=await i.sign({data:d}),f=ne.uint8Array(h).toBase64Url();return s?`${u}..${f}`:`${u}.${c}.${f}`}static async verify(e){let{signature:r,detachedPayload:n}=e;if(!r)throw new Error("Signature verification failed: Expected signature property to exist");let s=r.split(".");if(s.length!==3)throw new Error("Signature verification failed: Expected valid JWS with detached content");let[i,o,a]=s;if(n){if(o.length!==0)throw new Error("Signature verification failed: Expected valid JWS with detached content");o=ne.uint8Array(n).toBase64Url()}let u=ne.base64Url(i).toObject();if(!u.alg||!u.kid)throw new Error("Signature verification failed: Expected JWS header to contain alg and kid");let l=(await tg.dereference(u.kid)).contentStream;if(!r2(l))throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method");let d=l.publicKeyJwk;if(!d)throw new Error("Signature verification failed: Expected kid in JWS header to dereference to a DID Document Verification Method with publicKeyJwk");let h=`${i}.${o}`,f=ne.string(h).toUint8Array(),p=ne.base64Url(a).toUint8Array();if(!await IQ.verify({key:d,data:f,signature:p}))throw new Error("Signature verification failed: Integrity mismatch");let[w]=u.kid.split("#");return w}};var c2={};Zt(c2,{balance:()=>jQ,close:()=>BQ,definitions:()=>TQ,message:()=>qQ,offering:()=>FQ,order:()=>LQ,orderstatus:()=>UQ,quote:()=>VQ,resource:()=>KQ,rfq:()=>zQ,rfqPrivate:()=>WQ});var a2=Kn(jd(),1),BQ=qd;function qd(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u=o;for(let c in t)if(!(c==="reason"||c==="success")){return qd.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;break}if(u===o){if(t.reason!==void 0){let c=o;if(typeof t.reason!="string")return qd.errors=[{instancePath:e+"/reason",schemaPath:"#/properties/reason/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a)if(t.success!==void 0){let c=o;if(typeof t.success!="boolean")return qd.errors=[{instancePath:e+"/success",schemaPath:"#/properties/success/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=c===o}else var a=!0}}else return qd.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return qd.errors=i,o===0}var TQ=o2;function o2(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return t&&typeof t=="object"&&!Array.isArray(t)?(o2.errors=i,o===0):(o2.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1)}var FQ=Ie,$Q={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/offering.schema.json",type:"object",properties:{additionalProperties:!1,description:{type:"string",description:"Brief description of what is being offered."},payin:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. Absence of this field implies that there is no _additional_ fee associated to the respective payment method."}},required:["kind"]}}},required:["currencyCode","methods"]},payout:{type:"object",additionalProperties:!1,properties:{currencyCode:{type:"string",description:"ISO 3166 currency code string"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount of currency that can be requested"},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount of currency that can be requested"},methods:{type:"array",items:{type:"object",additionalProperties:!1,properties:{kind:{type:"string",description:"The type of payment method. e.g. BITCOIN_ADDRESS, DEBIT_CARD, etc."},name:{type:"string",description:"Payment Method name. Expected to be rendered on screen."},description:{type:"string",description:'Blurb containing helpful information about the payment method. Expected to be rendered on screen. e.g. "segwit addresses only"'},group:{type:"string",description:"Value that can be used to group specific payment methods together (e.g. Mobile Money vs. Direct Bank Deposit)."},requiredPaymentDetails:{$ref:"http://json-schema.org/draft-07/schema",description:"A JSON Schema containing the fields that need to be collected in order to use this payment method"},min:{$ref:"definitions.json#/definitions/decimalString",description:"Minimum amount required to use this payment method."},max:{$ref:"definitions.json#/definitions/decimalString",description:"Maximum amount allowed when using this payment method."},fee:{$ref:"definitions.json#/definitions/decimalString",description:"Fee charged to use this payment method. absence of this field implies that there is no _additional_ fee associated to the respective payment method"},estimatedSettlementTime:{type:"number",description:"Estimated time in seconds for the payout to be settled. e.g. 3600 for 1 hour. 0 for instant settlement.",minimum:0}},required:["kind","estimatedSettlementTime"]}}},required:["currencyCode","methods"]},payoutUnitsPerPayinUnit:{type:"string",description:"Number of payout currency units for one payin currency unit (i.e 290000 USD for 1 BTC)"},requiredClaims:{type:"object",description:"PresentationDefinition that describes the credential(s) the PFI requires in order to provide a quote."}},required:["description","payin","payout","payoutUnitsPerPayinUnit"]};var ni=new RegExp("^([0-9]+(?:[.][0-9]+)?)$","u"),RQ={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var EB={enum:["array","boolean","integer","null","number","object","string"]};function Ui(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0,a=o;return typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t)?o===a&&typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))?(Ui.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(Ui.errors=i,o===0):(Ui.errors=[{instancePath:e,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var s2={validate:le};function Rn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(Array.isArray(t)){if(t.length<1)return Rn.errors=[{instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=t.length;for(let c=0;c<u;c++){let l=o;s2.validate(t[c],{instancePath:e+"/"+c,parentData:t,parentDataProperty:c,rootData:s})||(i=i===null?s2.validate.errors:i.concat(s2.validate.errors),o=i.length);var a=l===o;if(!a)break}}}else return Rn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return Rn.errors=i,o===0}function le(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean")return le.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:RQ.type},message:"must be object,boolean"}],!1;if(o===0&&t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let v=o;if(o===v&&o===v&&typeof t.$id!="string")return le.errors=[{instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$schema!==void 0){let v=o;if(o===v&&o===v&&typeof t.$schema!="string")return le.errors=[{instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$ref!==void 0){let v=o;if(o===v&&o===v&&typeof t.$ref!="string")return le.errors=[{instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.$comment!==void 0){let v=o;if(typeof t.$comment!="string")return le.errors=[{instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.title!==void 0){let v=o;if(typeof t.title!="string")return le.errors=[{instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.description!==void 0){let v=o;if(typeof t.description!="string")return le.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.readOnly!==void 0){let v=o;if(typeof t.readOnly!="boolean")return le.errors=[{instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.examples!==void 0){let v=o;if(o===v&&!Array.isArray(t.examples))return le.errors=[{instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=v===o}else var a=!0;if(a){if(t.multipleOf!==void 0){let v=t.multipleOf,k=o;if(o===k)if(typeof v=="number"&&isFinite(v)){if(v<=0||isNaN(v))return le.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return le.errors=[{instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.maximum!==void 0){let v=t.maximum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.exclusiveMaximum!==void 0){let v=t.exclusiveMaximum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.minimum!==void 0){let v=t.minimum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.exclusiveMinimum!==void 0){let v=t.exclusiveMinimum,k=o;if(!(typeof v=="number"&&isFinite(v)))return le.errors=[{instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=k===o}else var a=!0;if(a){if(t.maxLength!==void 0){let v=t.maxLength,k=o,I=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return le.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===I&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return le.errors=[{instancePath:e+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=k===o}else var a=!0;if(a){if(t.minLength!==void 0){let v=o;Ui(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?Ui.errors:i.concat(Ui.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.pattern!==void 0){let v=o;if(o===v&&o===v&&typeof t.pattern!="string")return le.errors=[{instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.additionalItems!==void 0){let v=o;le(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.items!==void 0){let v=t.items,k=o,I=o,T=!1,j=o;le(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var u=j===o;if(T=T||u,!T){let b=o;Rn(v,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var u=b===o;T=T||u}if(T)o=I,i!==null&&(I?i.length=I:i=null);else{let b={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[b]:i.push(b),o++,le.errors=i,!1}var a=k===o}else var a=!0;if(a){if(t.maxItems!==void 0){let v=t.maxItems,k=o,I=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return le.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===I&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return le.errors=[{instancePath:e+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=k===o}else var a=!0;if(a){if(t.minItems!==void 0){let v=o;Ui(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?Ui.errors:i.concat(Ui.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.uniqueItems!==void 0){let v=o;if(typeof t.uniqueItems!="boolean")return le.errors=[{instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=v===o}else var a=!0;if(a){if(t.contains!==void 0){let v=o;le(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.maxProperties!==void 0){let v=t.maxProperties,k=o,I=o;if(!(typeof v=="number"&&!(v%1)&&!isNaN(v)&&isFinite(v)))return le.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===I&&typeof v=="number"&&isFinite(v)&&(v<0||isNaN(v)))return le.errors=[{instancePath:e+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=k===o}else var a=!0;if(a){if(t.minProperties!==void 0){let v=o;Ui(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?Ui.errors:i.concat(Ui.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.required!==void 0){let v=t.required,k=o;if(o===o)if(Array.isArray(v)){var c=!0;let j=v.length;for(let g=0;g<j;g++){let b=o;if(typeof v[g]!="string")return le.errors=[{instancePath:e+"/required/"+g,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=b===o;if(!c)break}if(c){let g=v.length,b;if(g>1){let E={};for(;g--;){let B=v[g];if(typeof B=="string"){if(typeof E[B]=="number"){return b=E[B],le.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:g,j:b},message:"must NOT have duplicate items (items ## "+b+" and "+g+" are identical)"}],!1;break}E[B]=g}}}}}else return le.errors=[{instancePath:e+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=k===o}else var a=!0;if(a){if(t.additionalProperties!==void 0){let v=o;le(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.definitions!==void 0){let v=t.definitions,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v))for(let T in v){let j=o;le(v[T],{instancePath:e+"/definitions/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var l=j===o;if(!l)break}else return le.errors=[{instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.properties!==void 0){let v=t.properties,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v))for(let T in v){let j=o;le(v[T],{instancePath:e+"/properties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var d=j===o;if(!d)break}else return le.errors=[{instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.patternProperties!==void 0){let v=t.patternProperties,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v)){for(let T in v){var h=o===o;if(!h){let g={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:T},message:"property name must be valid"};return i===null?i=[g]:i.push(g),o++,le.errors=i,!1;break}}if(h)for(let T in v){let j=o;le(v[T],{instancePath:e+"/patternProperties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var f=j===o;if(!f)break}}else return le.errors=[{instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.dependencies!==void 0){let v=t.dependencies,k=o;if(o===k)if(v&&typeof v=="object"&&!Array.isArray(v))for(let T in v){let j=v[T],g=o,b=o,E=!1,B=o;le(j,{instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:v,parentDataProperty:T,rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var p=B===o;if(E=E||p,!E){let S=o;if(o===o)if(Array.isArray(j)){var y=!0;let O=j.length;for(let F=0;F<O;F++){let U=o;if(typeof j[F]!="string"){let R={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+F,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[R]:i.push(R),o++}var y=U===o;if(!y)break}if(y){let F=j.length,U;if(F>1){let M={};for(;F--;){let R=j[F];if(typeof R=="string"){if(typeof M[R]=="number"){U=M[R];let K={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:F,j:U},message:"must NOT have duplicate items (items ## "+U+" and "+F+" are identical)"};i===null?i=[K]:i.push(K),o++;break}M[R]=F}}}}}else{let O={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[O]:i.push(O),o++}var p=S===o;E=E||p}if(E)o=b,i!==null&&(b?i.length=b:i=null);else{let S={instancePath:e+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[S]:i.push(S),o++,le.errors=i,!1}var w=g===o;if(!w)break}else return le.errors=[{instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=k===o}else var a=!0;if(a){if(t.propertyNames!==void 0){let v=o;le(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.enum!==void 0){let v=t.enum,k=o;if(o===k)if(Array.isArray(v)){if(v.length<1)return le.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let T=v.length,j;if(T>1){e:for(;T--;)for(j=T;j--;)if((0,a2.default)(v[T],v[j])){return le.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:T,j},message:"must NOT have duplicate items (items ## "+j+" and "+T+" are identical)"}],!1;break e}}}}else return le.errors=[{instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=k===o}else var a=!0;if(a){if(t.type!==void 0){let v=t.type,k=o,I=o,T=!1,j=o;if(!(v==="array"||v==="boolean"||v==="integer"||v==="null"||v==="number"||v==="object"||v==="string")){let b={instancePath:e+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:EB.enum},message:"must be equal to one of the allowed values"};i===null?i=[b]:i.push(b),o++}var P=j===o;if(T=T||P,!T){let b=o;if(o===b)if(Array.isArray(v))if(v.length<1){let B={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[B]:i.push(B),o++}else{var C=!0;let B=v.length;for(let S=0;S<B;S++){let N=v[S],$=o;if(!(N==="array"||N==="boolean"||N==="integer"||N==="null"||N==="number"||N==="object"||N==="string")){let F={instancePath:e+"/type/"+S,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:EB.enum},message:"must be equal to one of the allowed values"};i===null?i=[F]:i.push(F),o++}var C=$===o;if(!C)break}if(C){let S=v.length,N;if(S>1){e:for(;S--;)for(N=S;N--;)if((0,a2.default)(v[S],v[N])){let $={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:S,j:N},message:"must NOT have duplicate items (items ## "+N+" and "+S+" are identical)"};i===null?i=[$]:i.push($),o++;break e}}}}else{let B={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[B]:i.push(B),o++}var P=b===o;T=T||P}if(T)o=I,i!==null&&(I?i.length=I:i=null);else{let b={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[b]:i.push(b),o++,le.errors=i,!1}var a=k===o}else var a=!0;if(a){if(t.format!==void 0){let v=o;if(typeof t.format!="string")return le.errors=[{instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentMediaType!==void 0){let v=o;if(typeof t.contentMediaType!="string")return le.errors=[{instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.contentEncoding!==void 0){let v=o;if(typeof t.contentEncoding!="string")return le.errors=[{instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=v===o}else var a=!0;if(a){if(t.if!==void 0){let v=o;le(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.then!==void 0){let v=o;le(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.else!==void 0){let v=o;le(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.allOf!==void 0){let v=o;Rn(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.anyOf!==void 0){let v=o;Rn(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var a=v===o}else var a=!0;if(a){if(t.oneOf!==void 0){let v=o;Rn(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Rn.errors:i.concat(Rn.errors),o=i.length);var a=v===o}else var a=!0;if(a)if(t.not!==void 0){let v=o;le(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var a=v===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return le.errors=i,o===0}var NQ=Object.prototype.hasOwnProperty;function Ie(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let p;if(t.description===void 0&&(p="description")||t.payin===void 0&&(p="payin")||t.payout===void 0&&(p="payout")||t.payoutUnitsPerPayinUnit===void 0&&(p="payoutUnitsPerPayinUnit"))return Ie.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return Ie.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.description!==void 0){let y=o;if(typeof t.description!="string")return Ie.errors=[{instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(t.payin!==void 0){let y=t.payin,w=o;if(o===w)if(y&&typeof y=="object"&&!Array.isArray(y)){let C;if(y.currencyCode===void 0&&(C="currencyCode")||y.methods===void 0&&(C="methods"))return Ie.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"}],!1;{let v=o;for(let k in y)if(!(k==="currencyCode"||k==="min"||k==="max"||k==="methods")){return Ie.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(v===o){if(y.currencyCode!==void 0){let k=o;if(typeof y.currencyCode!="string")return Ie.errors=[{instancePath:e+"/payin/currencyCode",schemaPath:"#/properties/payin/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=k===o}else var u=!0;if(u){if(y.min!==void 0){let k=y.min,I=o;if(o===o)if(typeof k=="string"){if(!ni.test(k))return Ie.errors=[{instancePath:e+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payin/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=I===o}else var u=!0;if(u){if(y.max!==void 0){let k=y.max,I=o;if(o===o)if(typeof k=="string"){if(!ni.test(k))return Ie.errors=[{instancePath:e+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payin/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=I===o}else var u=!0;if(u)if(y.methods!==void 0){let k=y.methods,I=o;if(o===I)if(Array.isArray(k)){var c=!0;let j=k.length;for(let g=0;g<j;g++){let b=k[g],E=o;if(o===E)if(b&&typeof b=="object"&&!Array.isArray(b)){let S;if(b.kind===void 0&&(S="kind"))return Ie.errors=[{instancePath:e+"/payin/methods/"+g,schemaPath:"#/properties/payin/properties/methods/items/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let N=o;for(let $ in b)if(!($==="kind"||$==="name"||$==="description"||$==="group"||$==="requiredPaymentDetails"||$==="min"||$==="max"||$==="fee")){return Ie.errors=[{instancePath:e+"/payin/methods/"+g,schemaPath:"#/properties/payin/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$},message:"must NOT have additional properties"}],!1;break}if(N===o){if(b.kind!==void 0){let $=o;if(typeof b.kind!="string")return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/kind",schemaPath:"#/properties/payin/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=$===o}else var l=!0;if(l){if(b.name!==void 0){let $=o;if(typeof b.name!="string")return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/name",schemaPath:"#/properties/payin/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=$===o}else var l=!0;if(l){if(b.description!==void 0){let $=o;if(typeof b.description!="string")return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/description",schemaPath:"#/properties/payin/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=$===o}else var l=!0;if(l){if(b.group!==void 0){let $=o;if(typeof b.group!="string")return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/group",schemaPath:"#/properties/payin/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=$===o}else var l=!0;if(l){if(b.requiredPaymentDetails!==void 0){let $=o;le(b.requiredPaymentDetails,{instancePath:e+"/payin/methods/"+g+"/requiredPaymentDetails",parentData:b,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var l=$===o}else var l=!0;if(l){if(b.min!==void 0){let $=b.min,O=o;if(o===o)if(typeof $=="string"){if(!ni.test($))return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=O===o}else var l=!0;if(l){if(b.max!==void 0){let $=b.max,O=o;if(o===o)if(typeof $=="string"){if(!ni.test($))return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=O===o}else var l=!0;if(l)if(b.fee!==void 0){let $=b.fee,O=o;if(o===o)if(typeof $=="string"){if(!ni.test($))return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payin/methods/"+g+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var l=O===o}else var l=!0}}}}}}}}}else return Ie.errors=[{instancePath:e+"/payin/methods/"+g,schemaPath:"#/properties/payin/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var c=E===o;if(!c)break}}else return Ie.errors=[{instancePath:e+"/payin/methods",schemaPath:"#/properties/payin/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=I===o}else var u=!0}}}}}else return Ie.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=w===o}else var a=!0;if(a){if(t.payout!==void 0){let y=t.payout,w=o;if(o===w)if(y&&typeof y=="object"&&!Array.isArray(y)){let C;if(y.currencyCode===void 0&&(C="currencyCode")||y.methods===void 0&&(C="methods"))return Ie.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:C},message:"must have required property '"+C+"'"}],!1;{let v=o;for(let k in y)if(!(k==="currencyCode"||k==="min"||k==="max"||k==="methods")){return Ie.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"}],!1;break}if(v===o){if(y.currencyCode!==void 0){let k=o;if(typeof y.currencyCode!="string")return Ie.errors=[{instancePath:e+"/payout/currencyCode",schemaPath:"#/properties/payout/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=k===o}else var d=!0;if(d){if(y.min!==void 0){let k=y.min,I=o;if(o===o)if(typeof k=="string"){if(!ni.test(k))return Ie.errors=[{instancePath:e+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payout/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=I===o}else var d=!0;if(d){if(y.max!==void 0){let k=y.max,I=o;if(o===o)if(typeof k=="string"){if(!ni.test(k))return Ie.errors=[{instancePath:e+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payout/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var d=I===o}else var d=!0;if(d)if(y.methods!==void 0){let k=y.methods,I=o;if(o===I)if(Array.isArray(k)){var h=!0;let j=k.length;for(let g=0;g<j;g++){let b=k[g],E=o;if(o===E)if(b&&typeof b=="object"&&!Array.isArray(b)){let S;if(b.kind===void 0&&(S="kind")||b.estimatedSettlementTime===void 0&&(S="estimatedSettlementTime"))return Ie.errors=[{instancePath:e+"/payout/methods/"+g,schemaPath:"#/properties/payout/properties/methods/items/required",keyword:"required",params:{missingProperty:S},message:"must have required property '"+S+"'"}],!1;{let N=o;for(let $ in b)if(!NQ.call($Q.properties.payout.properties.methods.items.properties,$)){return Ie.errors=[{instancePath:e+"/payout/methods/"+g,schemaPath:"#/properties/payout/properties/methods/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:$},message:"must NOT have additional properties"}],!1;break}if(N===o){if(b.kind!==void 0){let $=o;if(typeof b.kind!="string")return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/kind",schemaPath:"#/properties/payout/properties/methods/items/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=$===o}else var f=!0;if(f){if(b.name!==void 0){let $=o;if(typeof b.name!="string")return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/name",schemaPath:"#/properties/payout/properties/methods/items/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=$===o}else var f=!0;if(f){if(b.description!==void 0){let $=o;if(typeof b.description!="string")return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/description",schemaPath:"#/properties/payout/properties/methods/items/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=$===o}else var f=!0;if(f){if(b.group!==void 0){let $=o;if(typeof b.group!="string")return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/group",schemaPath:"#/properties/payout/properties/methods/items/properties/group/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=$===o}else var f=!0;if(f){if(b.requiredPaymentDetails!==void 0){let $=o;le(b.requiredPaymentDetails,{instancePath:e+"/payout/methods/"+g+"/requiredPaymentDetails",parentData:b,parentDataProperty:"requiredPaymentDetails",rootData:s})||(i=i===null?le.errors:i.concat(le.errors),o=i.length);var f=$===o}else var f=!0;if(f){if(b.min!==void 0){let $=b.min,O=o;if(o===o)if(typeof $=="string"){if(!ni.test($))return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/min",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/min",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=O===o}else var f=!0;if(f){if(b.max!==void 0){let $=b.max,O=o;if(o===o)if(typeof $=="string"){if(!ni.test($))return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/max",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/max",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=O===o}else var f=!0;if(f){if(b.fee!==void 0){let $=b.fee,O=o;if(o===o)if(typeof $=="string"){if(!ni.test($))return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var f=O===o}else var f=!0;if(f)if(b.estimatedSettlementTime!==void 0){let $=b.estimatedSettlementTime,O=o;if(o===O)if(typeof $=="number"&&isFinite($)){if($<0||isNaN($))return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1}else return Ie.errors=[{instancePath:e+"/payout/methods/"+g+"/estimatedSettlementTime",schemaPath:"#/properties/payout/properties/methods/items/properties/estimatedSettlementTime/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var f=O===o}else var f=!0}}}}}}}}}}else return Ie.errors=[{instancePath:e+"/payout/methods/"+g,schemaPath:"#/properties/payout/properties/methods/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=E===o;if(!h)break}}else return Ie.errors=[{instancePath:e+"/payout/methods",schemaPath:"#/properties/payout/properties/methods/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var d=I===o}else var d=!0}}}}}else return Ie.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=w===o}else var a=!0;if(a){if(t.payoutUnitsPerPayinUnit!==void 0){let y=o;if(typeof t.payoutUnitsPerPayinUnit!="string")return Ie.errors=[{instancePath:e+"/payoutUnitsPerPayinUnit",schemaPath:"#/properties/payoutUnitsPerPayinUnit/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a)if(t.requiredClaims!==void 0){let y=t.requiredClaims,w=o;if(!(y&&typeof y=="object"&&!Array.isArray(y)))return Ie.errors=[{instancePath:e+"/requiredClaims",schemaPath:"#/properties/requiredClaims/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=w===o}else var a=!0}}}}}else return Ie.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ie.errors=i,o===0}var jQ=mu;function mu(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.currencyCode===void 0&&(u="currencyCode")||t.available===void 0&&(u="available"))return mu.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return mu.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.currencyCode!==void 0){let c=o;if(typeof t.currencyCode!="string")return mu.errors=[{instancePath:e+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=c===o}else var a=!0;if(a)if(t.available!==void 0){let c=t.available,l=o;if(o===o)if(typeof c=="string"){if(!ni.test(c))return mu.errors=[{instancePath:e+"/available",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return mu.errors=[{instancePath:e+"/available",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0}}else return mu.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return mu.errors=i,o===0}var qQ=yu;var MQ={type:"object",additionalProperties:!1,properties:{from:{$ref:"definitions.json#/definitions/did",description:"The sender's DID"},to:{$ref:"definitions.json#/definitions/did",description:"The recipient's DID"},kind:{type:"string",enum:["rfq","quote","order","orderstatus","close"],description:"The message kind (e.g. rfq, quote)"},id:{type:"string",description:"The message ID"},exchangeId:{type:"string",description:"ID for a 'thread' of messages between Alice <-> PFI. Set by the first message in a thread"},externalId:{type:"string",description:"Arbitrary ID for the caller to associate with the message."},createdAt:{type:"string",description:"ISO8601 formatted string representing the timestamp"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","to","kind","id","exchangeId","createdAt","protocol"]};var u2=new RegExp("^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$","u");function en(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.from===void 0&&(u="from")||t.to===void 0&&(u="to")||t.kind===void 0&&(u="kind")||t.id===void 0&&(u="id")||t.exchangeId===void 0&&(u="exchangeId")||t.createdAt===void 0&&(u="createdAt")||t.protocol===void 0&&(u="protocol"))return en.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{let c=o;for(let l in t)if(!(l==="from"||l==="to"||l==="kind"||l==="id"||l==="exchangeId"||l==="externalId"||l==="createdAt"||l==="protocol")){return en.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===o){if(t.from!==void 0){let l=t.from,d=o;if(o===o)if(typeof l=="string"){if(!u2.test(l))return en.errors=[{instancePath:e+"/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return en.errors=[{instancePath:e+"/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.to!==void 0){let l=t.to,d=o;if(o===o)if(typeof l=="string"){if(!u2.test(l))return en.errors=[{instancePath:e+"/to",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return en.errors=[{instancePath:e+"/to",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.kind!==void 0){let l=t.kind,d=o;if(typeof l!="string")return en.errors=[{instancePath:e+"/kind",schemaPath:"#/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(l==="rfq"||l==="quote"||l==="order"||l==="orderstatus"||l==="close"))return en.errors=[{instancePath:e+"/kind",schemaPath:"#/properties/kind/enum",keyword:"enum",params:{allowedValues:MQ.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=d===o}else var a=!0;if(a){if(t.id!==void 0){let l=o;if(typeof t.id!="string")return en.errors=[{instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.exchangeId!==void 0){let l=o;if(typeof t.exchangeId!="string")return en.errors=[{instancePath:e+"/exchangeId",schemaPath:"#/properties/exchangeId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.externalId!==void 0){let l=o;if(typeof t.externalId!="string")return en.errors=[{instancePath:e+"/externalId",schemaPath:"#/properties/externalId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.createdAt!==void 0){let l=o;if(typeof t.createdAt!="string")return en.errors=[{instancePath:e+"/createdAt",schemaPath:"#/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(t.protocol!==void 0){let l=o;if(typeof t.protocol!="string")return en.errors=[{instancePath:e+"/protocol",schemaPath:"#/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0}}}}}}}}}else return en.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return en.errors=i,o===0}function yu(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.metadata===void 0&&(u="metadata")||t.data===void 0&&(u="data")||t.signature===void 0&&(u="signature"))return yu.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{let c=o;for(let l in t)if(!(l==="metadata"||l==="data"||l==="signature"||l==="privateData")){return yu.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===o){if(t.metadata!==void 0){let l=o;en(t.metadata,{instancePath:e+"/metadata",parentData:t,parentDataProperty:"metadata",rootData:s})||(i=i===null?en.errors:i.concat(en.errors),o=i.length);var a=l===o}else var a=!0;if(a){if(t.data!==void 0){let l=t.data,d=o;if(!(l&&typeof l=="object"&&!Array.isArray(l)))return yu.errors=[{instancePath:e+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a){if(t.signature!==void 0){let l=o;if(typeof t.signature!="string")return yu.errors=[{instancePath:e+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a)if(t.privateData!==void 0){let l=t.privateData,d=o;if(!(l&&typeof l=="object"&&!Array.isArray(l)))return yu.errors=[{instancePath:e+"/privateData",schemaPath:"#/properties/privateData/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}}else return yu.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return yu.errors=i,o===0}var LQ=rg;function rg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t))for(let a in t){return rg.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"}],!1;break}else return rg.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return rg.errors=i,o===0}var UQ=Md;function Md(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let a;if(t.orderStatus===void 0&&(a="orderStatus"))return Md.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:a},message:"must have required property '"+a+"'"}],!1;{let u=o;for(let c in t)if(c!=="orderStatus"){return Md.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties"}],!1;break}if(u===o&&t.orderStatus!==void 0&&typeof t.orderStatus!="string")return Md.errors=[{instancePath:e+"/orderStatus",schemaPath:"#/properties/orderStatus/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1}}else return Md.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Md.errors=i,o===0}var VQ=Ld;function Hr(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.currencyCode===void 0&&(c="currencyCode")||t.amount===void 0&&(c="amount"))return Hr.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=o;for(let d in t)if(!(d==="currencyCode"||d==="amount"||d==="fee"||d==="paymentInstruction")){return Hr.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties"}],!1;break}if(l===o){if(t.currencyCode!==void 0){let d=o;if(typeof t.currencyCode!="string")return Hr.errors=[{instancePath:e+"/currencyCode",schemaPath:"#/properties/currencyCode/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.amount!==void 0){let d=t.amount,h=o;if(o===o)if(typeof d=="string"){if(!ni.test(d))return Hr.errors=[{instancePath:e+"/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Hr.errors=[{instancePath:e+"/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=h===o}else var a=!0;if(a){if(t.fee!==void 0){let d=t.fee,h=o;if(o===o)if(typeof d=="string"){if(!ni.test(d))return Hr.errors=[{instancePath:e+"/fee",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return Hr.errors=[{instancePath:e+"/fee",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=h===o}else var a=!0;if(a)if(t.paymentInstruction!==void 0){let d=t.paymentInstruction,h=o;if(o===o)if(d&&typeof d=="object"&&!Array.isArray(d)){let y=o;for(let w in d)if(!(w==="link"||w==="instruction")){return Hr.errors=[{instancePath:e+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:w},message:"must NOT have additional properties"}],!1;break}if(y===o){if(d.link!==void 0){let w=o;if(typeof d.link!="string")return Hr.errors=[{instancePath:e+"/paymentInstruction/link",schemaPath:"#/definitions/PaymentInstruction/properties/link/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=w===o}else var u=!0;if(u)if(d.instruction!==void 0){let w=o;if(typeof d.instruction!="string")return Hr.errors=[{instancePath:e+"/paymentInstruction/instruction",schemaPath:"#/definitions/PaymentInstruction/properties/instruction/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=w===o}else var u=!0}}else return Hr.errors=[{instancePath:e+"/paymentInstruction",schemaPath:"#/definitions/PaymentInstruction/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0}}}}}else return Hr.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Hr.errors=i,o===0}function Ld(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let u;if(t.expiresAt===void 0&&(u="expiresAt")||t.payin===void 0&&(u="payin")||t.payout===void 0&&(u="payout"))return Ld.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:u},message:"must have required property '"+u+"'"}],!1;{let c=o;for(let l in t)if(!(l==="expiresAt"||l==="payin"||l==="payout")){return Ld.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"}],!1;break}if(c===o){if(t.expiresAt!==void 0){let l=o;if(typeof t.expiresAt!="string")return Ld.errors=[{instancePath:e+"/expiresAt",schemaPath:"#/properties/expiresAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.payin!==void 0){let l=o;Hr(t.payin,{instancePath:e+"/payin",parentData:t,parentDataProperty:"payin",rootData:s})||(i=i===null?Hr.errors:i.concat(Hr.errors),o=i.length);var a=l===o}else var a=!0;if(a)if(t.payout!==void 0){let l=o;Hr(t.payout,{instancePath:e+"/payout",parentData:t,parentDataProperty:"payout",rootData:s})||(i=i===null?Hr.errors:i.concat(Hr.errors),o=i.length);var a=l===o}else var a=!0}}}}else return Ld.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Ld.errors=i,o===0}var KQ=pn,HQ={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://tbdex.dev/resource.schema.json",type:"object",additionalProperties:!1,properties:{metadata:{type:"object",properties:{from:{$ref:"definitions.json#/definitions/did",description:"The PFI's DID"},kind:{type:"string",enum:["offering","balance"],description:"The resource kind (e.g. Offering)"},id:{type:"string",description:"The resource id"},createdAt:{type:"string",description:"When the resource was created at. Expressed as ISO8601"},updatedAt:{type:"string",description:"When the resource was last updated. Expressed as ISO8601"},protocol:{type:"string",description:"Version of the protocol in use (x.x format)"}},required:["from","kind","id","createdAt","protocol"],description:"The metadata object contains fields about the resource and is present for every tbdex resources of all types."},data:{description:"The actual resource content",type:"object"},signature:{type:"string",description:"Signature that verifies that authenticity and integrity of a message"}},required:["metadata","data","signature"],description:"ResourceModel"};function pn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.metadata===void 0&&(c="metadata")||t.data===void 0&&(c="data")||t.signature===void 0&&(c="signature"))return pn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;{let l=o;for(let d in t)if(!(d==="metadata"||d==="data"||d==="signature")){return pn.errors=[{instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:d},message:"must NOT have additional properties"}],!1;break}if(l===o){if(t.metadata!==void 0){let d=t.metadata,h=o;if(o===h)if(d&&typeof d=="object"&&!Array.isArray(d)){let f;if(d.from===void 0&&(f="from")||d.kind===void 0&&(f="kind")||d.id===void 0&&(f="id")||d.createdAt===void 0&&(f="createdAt")||d.protocol===void 0&&(f="protocol"))return pn.errors=[{instancePath:e+"/metadata",schemaPath:"#/properties/metadata/required",keyword:"required",params:{missingProperty:f},message:"must have required property '"+f+"'"}],!1;if(d.from!==void 0){let p=d.from,y=o;if(o===o)if(typeof p=="string"){if(!u2.test(p))return pn.errors=[{instancePath:e+"/metadata/from",schemaPath:"definitions.json#/definitions/did/pattern",keyword:"pattern",params:{pattern:"^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"},message:'must match pattern "^did:([a-z0-9]+):((?:(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))*:)*((?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))+))((;[a-zA-Z0-9_.:%-]+=[a-zA-Z0-9_.:%-]*)*)(/[^#?]*)?([?][^#]*)?(#.*)?$"'}],!1}else return pn.errors=[{instancePath:e+"/metadata/from",schemaPath:"definitions.json#/definitions/did/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=y===o}else var a=!0;if(a){if(d.kind!==void 0){let p=d.kind,y=o;if(typeof p!="string")return pn.errors=[{instancePath:e+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(!(p==="offering"||p==="balance"))return pn.errors=[{instancePath:e+"/metadata/kind",schemaPath:"#/properties/metadata/properties/kind/enum",keyword:"enum",params:{allowedValues:HQ.properties.metadata.properties.kind.enum},message:"must be equal to one of the allowed values"}],!1;var a=y===o}else var a=!0;if(a){if(d.id!==void 0){let p=o;if(typeof d.id!="string")return pn.errors=[{instancePath:e+"/metadata/id",schemaPath:"#/properties/metadata/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(d.createdAt!==void 0){let p=o;if(typeof d.createdAt!="string")return pn.errors=[{instancePath:e+"/metadata/createdAt",schemaPath:"#/properties/metadata/properties/createdAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a){if(d.updatedAt!==void 0){let p=o;if(typeof d.updatedAt!="string")return pn.errors=[{instancePath:e+"/metadata/updatedAt",schemaPath:"#/properties/metadata/properties/updatedAt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0;if(a)if(d.protocol!==void 0){let p=o;if(typeof d.protocol!="string")return pn.errors=[{instancePath:e+"/metadata/protocol",schemaPath:"#/properties/metadata/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=p===o}else var a=!0}}}}}else return pn.errors=[{instancePath:e+"/metadata",schemaPath:"#/properties/metadata/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=h===o}else var u=!0;if(u){if(t.data!==void 0){let d=t.data,h=o;if(!(d&&typeof d=="object"&&!Array.isArray(d)))return pn.errors=[{instancePath:e+"/data",schemaPath:"#/properties/data/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var u=h===o}else var u=!0;if(u)if(t.signature!==void 0){let d=o;if(typeof t.signature!="string")return pn.errors=[{instancePath:e+"/signature",schemaPath:"#/properties/signature/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=d===o}else var u=!0}}}}else return pn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return pn.errors=i,o===0}var WQ=ri;function ri(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let c;if(t.salt===void 0&&(c="salt"))return ri.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:c},message:"must have required property '"+c+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return ri.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.salt!==void 0){let l=o;if(typeof t.salt!="string")return ri.errors=[{instancePath:e+"/salt",schemaPath:"#/properties/salt/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=l===o}else var a=!0;if(a){if(t.claims!==void 0){let l=t.claims,d=o;if(o===d)if(Array.isArray(l)){var u=!0;let f=l.length;for(let p=0;p<f;p++){let y=o;if(typeof l[p]!="string")return ri.errors=[{instancePath:e+"/claims/"+p,schemaPath:"#/properties/claims/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=y===o;if(!u)break}}else return ri.errors=[{instancePath:e+"/claims",schemaPath:"#/properties/claims/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=d===o}else var a=!0;if(a){if(t.payin!==void 0){let l=t.payin,d=o;if(o===d)if(l&&typeof l=="object"&&!Array.isArray(l)){let f=o;for(let p in l)if(p!=="paymentDetails"){return ri.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(f===o&&l.paymentDetails!==void 0){let p=l.paymentDetails;if(!(p&&typeof p=="object"&&!Array.isArray(p)))return ri.errors=[{instancePath:e+"/payin/paymentDetails",schemaPath:"#/properties/payin/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return ri.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0;if(a)if(t.payout!==void 0){let l=t.payout,d=o;if(o===d)if(l&&typeof l=="object"&&!Array.isArray(l)){let f=o;for(let p in l)if(p!=="paymentDetails"){return ri.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"}],!1;break}if(f===o&&l.paymentDetails!==void 0){let p=l.paymentDetails;if(!(p&&typeof p=="object"&&!Array.isArray(p)))return ri.errors=[{instancePath:e+"/payout/paymentDetails",schemaPath:"#/properties/payout/properties/paymentDetails/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1}}else return ri.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=d===o}else var a=!0}}}}else return ri.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ri.errors=i,o===0}var zQ=hn;function hn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(o===0)if(t&&typeof t=="object"&&!Array.isArray(t)){let l;if(t.offeringId===void 0&&(l="offeringId")||t.payin===void 0&&(l="payin")||t.payout===void 0&&(l="payout"))return hn.errors=[{instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:l},message:"must have required property '"+l+"'"}],!1;if(t.additionalProperties!==void 0){var a=!1;return hn.errors=[{instancePath:e+"/additionalProperties",schemaPath:"#/properties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false"}],!1}else var a=!0;if(a){if(t.offeringId!==void 0){let d=o;if(typeof t.offeringId!="string")return hn.errors=[{instancePath:e+"/offeringId",schemaPath:"#/properties/offeringId/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.claimsHash!==void 0){let d=o;if(typeof t.claimsHash!="string")return hn.errors=[{instancePath:e+"/claimsHash",schemaPath:"#/properties/claimsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=d===o}else var a=!0;if(a){if(t.payin!==void 0){let d=t.payin,h=o;if(o===h)if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.amount===void 0&&(p="amount")||d.kind===void 0&&(p="kind"))return hn.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.amount!==void 0){let y=d.amount,w=o;if(o===o)if(typeof y=="string"){if(!ni.test(y))return hn.errors=[{instancePath:e+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/pattern",keyword:"pattern",params:{pattern:"^([0-9]+(?:[.][0-9]+)?)$"},message:'must match pattern "^([0-9]+(?:[.][0-9]+)?)$"'}],!1}else return hn.errors=[{instancePath:e+"/payin/amount",schemaPath:"definitions.json#/definitions/decimalString/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=w===o}else var u=!0;if(u){if(d.kind!==void 0){let y=o;if(typeof d.kind!="string")return hn.errors=[{instancePath:e+"/payin/kind",schemaPath:"#/properties/payin/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=y===o}else var u=!0;if(u)if(d.paymentDetailsHash!==void 0){let y=o;if(typeof d.paymentDetailsHash!="string")return hn.errors=[{instancePath:e+"/payin/paymentDetailsHash",schemaPath:"#/properties/payin/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var u=y===o}else var u=!0}}else return hn.errors=[{instancePath:e+"/payin",schemaPath:"#/properties/payin/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0;if(a)if(t.payout!==void 0){let d=t.payout,h=o;if(o===h)if(d&&typeof d=="object"&&!Array.isArray(d)){let p;if(d.kind===void 0&&(p="kind"))return hn.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/required",keyword:"required",params:{missingProperty:p},message:"must have required property '"+p+"'"}],!1;if(d.kind!==void 0){let y=o;if(typeof d.kind!="string")return hn.errors=[{instancePath:e+"/payout/kind",schemaPath:"#/properties/payout/properties/kind/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=y===o}else var c=!0;if(c)if(d.paymentDetailsHash!==void 0){let y=o;if(typeof d.paymentDetailsHash!="string")return hn.errors=[{instancePath:e+"/payout/paymentDetailsHash",schemaPath:"#/properties/payout/properties/paymentDetailsHash/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=y===o}else var c=!0}else return hn.errors=[{instancePath:e+"/payout",schemaPath:"#/properties/payout/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=h===o}else var a=!0}}}}else return hn.errors=[{instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return hn.errors=i,o===0}function gu(t,e){let r=c2[e];if(!r)throw new Error(`no validator found for ${e}`);r(t),r.errors&&JQ(r.errors)}function JQ(t){let[e]=t,{instancePath:r,message:n,params:s}=e;throw r||="message",n=s.allowedValues?`${n} - ${s.allowedValues.join(", ")}`:n,new Error(`${r}: ${n}`)}var Vi=class{metadata;data;_signature;constructor(e,r,n){this.metadata=e,this.data=r,this._signature=n}static generateId(e){return Zu(e).toString()}async sign(e){this._signature=await bi.sign({did:e,payload:this.digest(),detached:!0})}async verify(){return this.validate(),this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");let e=await bi.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==e)throw new Error("Signature verification failed: Expected DID in kid of JWS header must match metadata.from");return e}digest(){return bi.digest({metadata:this.metadata,data:this.data})}validate(){gu(this.toJSON(),"resource"),this.validateData()}validateData(){gu(this.data,this.kind)}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}get signature(){return this._signature}get id(){return this.metadata.id}get from(){return this.metadata.from}get createdAt(){return this.metadata.createdAt}get updatedAt(){return this.metadata.updatedAt}get protocol(){return this.metadata.protocol}isOffering(){return this.metadata.kind==="offering"}isBalance(){return this.metadata.kind==="balance"}};var Wr=class{metadata;data;_signature;constructor(e,r,n){this.metadata=e,this.data=r,this._signature=n}static generateId(e){return Zu(e).toString()}async sign(e){this._signature=await bi.sign({did:e,payload:this.digest(),detached:!0})}async verify(){return this.validate(),await this.verifySignature()}async verifySignature(){if(this.signature===void 0)throw new Error("Could not verify message signature because no signature is missing");let e=await bi.verify({detachedPayload:this.digest(),signature:this.signature});if(this.metadata.from!==e)throw new Error("Signature verification failed: Expected DID in kid of JWS header must match metadata.from");return e}digest(){return bi.digest({metadata:this.metadata,data:this.data})}validate(){gu(this.toJSON(),"message"),this.validateData()}validateData(){gu(this.data,this.kind)}get signature(){return this._signature}get id(){return this.metadata.id}get exchangeId(){return this.metadata.exchangeId}get from(){return this.metadata.from}get to(){return this.metadata.to}get createdAt(){return this.metadata.createdAt}get externalId(){return this.metadata.externalId}get protocol(){return this.metadata.protocol}isRfq(){return this.metadata.kind==="rfq"}isQuote(){return this.metadata.kind==="quote"}isOrder(){return this.metadata.kind==="order"}isOrderStatus(){return this.metadata.kind==="orderstatus"}isClose(){return this.metadata.kind==="close"}toJSON(){return{metadata:this.metadata,data:this.data,signature:this.signature}}};var GQ=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,l2=Math.ceil,Hi=Math.floor,ii="[BigNumber Error] ",_B=ii+"Number primitive has more than 15 significant digits: ",bs=1e14,We=14,d2=9007199254740991,f2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],vu=1e7,tn=1e9;function DB(t){var e,r,n,s=C.prototype={constructor:C,toString:null,valueOf:null},i=new C(1),o=20,a=4,u=-7,c=21,l=-1e7,d=1e7,h=!1,f=1,p=0,y={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},w="0123456789abcdefghijklmnopqrstuvwxyz",P=!0;function C(g,b){var E,B,S,N,$,O,F,U,M=this;if(!(M instanceof C))return new C(g,b);if(b==null){if(g&&g._isBigNumber===!0){M.s=g.s,!g.c||g.e>d?M.c=M.e=null:g.e<l?M.c=[M.e=0]:(M.e=g.e,M.c=g.c.slice());return}if((O=typeof g=="number")&&g*0==0){if(M.s=1/g<0?(g=-g,-1):1,g===~~g){for(N=0,$=g;$>=10;$/=10,N++);N>d?M.c=M.e=null:(M.e=N,M.c=[g]);return}U=String(g)}else{if(!GQ.test(U=String(g)))return n(M,U,O);M.s=U.charCodeAt(0)==45?(U=U.slice(1),-1):1}(N=U.indexOf("."))>-1&&(U=U.replace(".","")),($=U.search(/e/i))>0?(N<0&&(N=$),N+=+U.slice($+1),U=U.substring(0,$)):N<0&&(N=U.length)}else{if(fr(b,2,w.length,"Base"),b==10&&P)return M=new C(g),T(M,o+M.e+1,a);if(U=String(g),O=typeof g=="number"){if(g*0!=0)return n(M,U,O,b);if(M.s=1/g<0?(U=U.slice(1),-1):1,C.DEBUG&&U.replace(/^0\.0*|\./,"").length>15)throw Error(_B+g)}else M.s=U.charCodeAt(0)===45?(U=U.slice(1),-1):1;for(E=w.slice(0,b),N=$=0,F=U.length;$<F;$++)if(E.indexOf(B=U.charAt($))<0){if(B=="."){if($>N){N=F;continue}}else if(!S&&(U==U.toUpperCase()&&(U=U.toLowerCase())||U==U.toLowerCase()&&(U=U.toUpperCase()))){S=!0,$=-1,N=0;continue}return n(M,String(g),O,b)}O=!1,U=r(U,b,10,M.s),(N=U.indexOf("."))>-1?U=U.replace(".",""):N=U.length}for($=0;U.charCodeAt($)===48;$++);for(F=U.length;U.charCodeAt(--F)===48;);if(U=U.slice($,++F)){if(F-=$,O&&C.DEBUG&&F>15&&(g>d2||g!==Hi(g)))throw Error(_B+M.s*g);if((N=N-$-1)>d)M.c=M.e=null;else if(N<l)M.c=[M.e=0];else{if(M.e=N,M.c=[],$=(N+1)%We,N<0&&($+=We),$<F){for($&&M.c.push(+U.slice(0,$)),F-=We;$<F;)M.c.push(+U.slice($,$+=We));$=We-(U=U.slice($)).length}else $-=F;for(;$--;U+="0");M.c.push(+U)}}else M.c=[M.e=0]}C.clone=DB,C.ROUND_UP=0,C.ROUND_DOWN=1,C.ROUND_CEIL=2,C.ROUND_FLOOR=3,C.ROUND_HALF_UP=4,C.ROUND_HALF_DOWN=5,C.ROUND_HALF_EVEN=6,C.ROUND_HALF_CEIL=7,C.ROUND_HALF_FLOOR=8,C.EUCLID=9,C.config=C.set=function(g){var b,E;if(g!=null)if(typeof g=="object"){if(g.hasOwnProperty(b="DECIMAL_PLACES")&&(E=g[b],fr(E,0,tn,b),o=E),g.hasOwnProperty(b="ROUNDING_MODE")&&(E=g[b],fr(E,0,8,b),a=E),g.hasOwnProperty(b="EXPONENTIAL_AT")&&(E=g[b],E&&E.pop?(fr(E[0],-tn,0,b),fr(E[1],0,tn,b),u=E[0],c=E[1]):(fr(E,-tn,tn,b),u=-(c=E<0?-E:E))),g.hasOwnProperty(b="RANGE"))if(E=g[b],E&&E.pop)fr(E[0],-tn,-1,b),fr(E[1],1,tn,b),l=E[0],d=E[1];else if(fr(E,-tn,tn,b),E)l=-(d=E<0?-E:E);else throw Error(ii+b+" cannot be zero: "+E);if(g.hasOwnProperty(b="CRYPTO"))if(E=g[b],E===!!E)if(E)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))h=E;else throw h=!E,Error(ii+"crypto unavailable");else h=E;else throw Error(ii+b+" not true or false: "+E);if(g.hasOwnProperty(b="MODULO_MODE")&&(E=g[b],fr(E,0,9,b),f=E),g.hasOwnProperty(b="POW_PRECISION")&&(E=g[b],fr(E,0,tn,b),p=E),g.hasOwnProperty(b="FORMAT"))if(E=g[b],typeof E=="object")y=E;else throw Error(ii+b+" not an object: "+E);if(g.hasOwnProperty(b="ALPHABET"))if(E=g[b],typeof E=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(E))P=E.slice(0,10)=="0123456789",w=E;else throw Error(ii+b+" invalid: "+E)}else throw Error(ii+"Object expected: "+g);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[u,c],RANGE:[l,d],CRYPTO:h,MODULO_MODE:f,POW_PRECISION:p,FORMAT:y,ALPHABET:w}},C.isBigNumber=function(g){if(!g||g._isBigNumber!==!0)return!1;if(!C.DEBUG)return!0;var b,E,B=g.c,S=g.e,N=g.s;e:if({}.toString.call(B)=="[object Array]"){if((N===1||N===-1)&&S>=-tn&&S<=tn&&S===Hi(S)){if(B[0]===0){if(S===0&&B.length===1)return!0;break e}if(b=(S+1)%We,b<1&&(b+=We),String(B[0]).length==b){for(b=0;b<B.length;b++)if(E=B[b],E<0||E>=bs||E!==Hi(E))break e;if(E!==0)return!0}}}else if(B===null&&S===null&&(N===null||N===1||N===-1))return!0;throw Error(ii+"Invalid BigNumber: "+g)},C.maximum=C.max=function(){return k(arguments,-1)},C.minimum=C.min=function(){return k(arguments,1)},C.random=function(){var g=9007199254740992,b=Math.random()*g&2097151?function(){return Hi(Math.random()*g)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(E){var B,S,N,$,O,F=0,U=[],M=new C(i);if(E==null?E=o:fr(E,0,tn),$=l2(E/We),h)if(crypto.getRandomValues){for(B=crypto.getRandomValues(new Uint32Array($*=2));F<$;)O=B[F]*131072+(B[F+1]>>>11),O>=9e15?(S=crypto.getRandomValues(new Uint32Array(2)),B[F]=S[0],B[F+1]=S[1]):(U.push(O%1e14),F+=2);F=$/2}else if(crypto.randomBytes){for(B=crypto.randomBytes($*=7);F<$;)O=(B[F]&31)*281474976710656+B[F+1]*1099511627776+B[F+2]*4294967296+B[F+3]*16777216+(B[F+4]<<16)+(B[F+5]<<8)+B[F+6],O>=9e15?crypto.randomBytes(7).copy(B,F):(U.push(O%1e14),F+=7);F=$/7}else throw h=!1,Error(ii+"crypto unavailable");if(!h)for(;F<$;)O=b(),O<9e15&&(U[F++]=O%1e14);for($=U[--F],E%=We,$&&E&&(O=f2[We-E],U[F]=Hi($/O)*O);U[F]===0;U.pop(),F--);if(F<0)U=[N=0];else{for(N=-1;U[0]===0;U.splice(0,1),N-=We);for(F=1,O=U[0];O>=10;O/=10,F++);F<We&&(N-=We-F)}return M.e=N,M.c=U,M}}(),C.sum=function(){for(var g=1,b=arguments,E=new C(b[0]);g<b.length;)E=E.plus(b[g++]);return E},r=function(){var g="0123456789";function b(E,B,S,N){for(var $,O=[0],F,U=0,M=E.length;U<M;){for(F=O.length;F--;O[F]*=B);for(O[0]+=N.indexOf(E.charAt(U++)),$=0;$<O.length;$++)O[$]>S-1&&(O[$+1]==null&&(O[$+1]=0),O[$+1]+=O[$]/S|0,O[$]%=S)}return O.reverse()}return function(E,B,S,N,$){var O,F,U,M,R,K,z,ee,ce=E.indexOf("."),re=o,ie=a;for(ce>=0&&(M=p,p=0,E=E.replace(".",""),ee=new C(B),K=ee.pow(E.length-ce),p=M,ee.c=b(ma(Ki(K.c),K.e,"0"),10,S,g),ee.e=ee.c.length),z=b(E,B,S,$?(O=w,g):(O=g,w)),U=M=z.length;z[--M]==0;z.pop());if(!z[0])return O.charAt(0);if(ce<0?--U:(K.c=z,K.e=U,K.s=N,K=e(K,ee,re,ie,S),z=K.c,R=K.r,U=K.e),F=U+re+1,ce=z[F],M=S/2,R=R||F<0||z[F+1]!=null,R=ie<4?(ce!=null||R)&&(ie==0||ie==(K.s<0?3:2)):ce>M||ce==M&&(ie==4||R||ie==6&&z[F-1]&1||ie==(K.s<0?8:7)),F<1||!z[0])E=R?ma(O.charAt(1),-re,O.charAt(0)):O.charAt(0);else{if(z.length=F,R)for(--S;++z[--F]>S;)z[F]=0,F||(++U,z=[1].concat(z));for(M=z.length;!z[--M];);for(ce=0,E="";ce<=M;E+=O.charAt(z[ce++]));E=ma(E,U,O.charAt(0))}return E}}(),e=function(){function g(B,S,N){var $,O,F,U,M=0,R=B.length,K=S%vu,z=S/vu|0;for(B=B.slice();R--;)F=B[R]%vu,U=B[R]/vu|0,$=z*F+U*K,O=K*F+$%vu*vu+M,M=(O/N|0)+($/vu|0)+z*U,B[R]=O%N;return M&&(B=[M].concat(B)),B}function b(B,S,N,$){var O,F;if(N!=$)F=N>$?1:-1;else for(O=F=0;O<N;O++)if(B[O]!=S[O]){F=B[O]>S[O]?1:-1;break}return F}function E(B,S,N,$){for(var O=0;N--;)B[N]-=O,O=B[N]<S[N]?1:0,B[N]=O*$+B[N]-S[N];for(;!B[0]&&B.length>1;B.splice(0,1));}return function(B,S,N,$,O){var F,U,M,R,K,z,ee,ce,re,ie,ue,ye,ke,He,Xe,Me,Le,pt=B.s==S.s?1:-1,je=B.c,at=S.c;if(!je||!je[0]||!at||!at[0])return new C(!B.s||!S.s||(je?at&&je[0]==at[0]:!at)?NaN:je&&je[0]==0||!at?pt*0:pt/0);for(ce=new C(pt),re=ce.c=[],U=B.e-S.e,pt=N+U+1,O||(O=bs,U=Wi(B.e/We)-Wi(S.e/We),pt=pt/We|0),M=0;at[M]==(je[M]||0);M++);if(at[M]>(je[M]||0)&&U--,pt<0)re.push(1),R=!0;else{for(He=je.length,Me=at.length,M=0,pt+=2,K=Hi(O/(at[0]+1)),K>1&&(at=g(at,K,O),je=g(je,K,O),Me=at.length,He=je.length),ke=Me,ie=je.slice(0,Me),ue=ie.length;ue<Me;ie[ue++]=0);Le=at.slice(),Le=[0].concat(Le),Xe=at[0],at[1]>=O/2&&Xe++;do{if(K=0,F=b(at,ie,Me,ue),F<0){if(ye=ie[0],Me!=ue&&(ye=ye*O+(ie[1]||0)),K=Hi(ye/Xe),K>1)for(K>=O&&(K=O-1),z=g(at,K,O),ee=z.length,ue=ie.length;b(z,ie,ee,ue)==1;)K--,E(z,Me<ee?Le:at,ee,O),ee=z.length,F=1;else K==0&&(F=K=1),z=at.slice(),ee=z.length;if(ee<ue&&(z=[0].concat(z)),E(ie,z,ue,O),ue=ie.length,F==-1)for(;b(at,ie,Me,ue)<1;)K++,E(ie,Me<ue?Le:at,ue,O),ue=ie.length}else F===0&&(K++,ie=[0]);re[M++]=K,ie[0]?ie[ue++]=je[ke]||0:(ie=[je[ke]],ue=1)}while((ke++<He||ie[0]!=null)&&pt--);R=ie[0]!=null,re[0]||re.splice(0,1)}if(O==bs){for(M=1,pt=re[0];pt>=10;pt/=10,M++);T(ce,N+(ce.e=M+U*We-1)+1,$,R)}else ce.e=U,ce.r=+R;return ce}}();function v(g,b,E,B){var S,N,$,O,F;if(E==null?E=a:fr(E,0,8),!g.c)return g.toString();if(S=g.c[0],$=g.e,b==null)F=Ki(g.c),F=B==1||B==2&&($<=u||$>=c)?ig(F,$):ma(F,$,"0");else if(g=T(new C(g),b,E),N=g.e,F=Ki(g.c),O=F.length,B==1||B==2&&(b<=N||N<=u)){for(;O<b;F+="0",O++);F=ig(F,N)}else if(b-=$,F=ma(F,N,"0"),N+1>O){if(--b>0)for(F+=".";b--;F+="0");}else if(b+=N-O,b>0)for(N+1==O&&(F+=".");b--;F+="0");return g.s<0&&S?"-"+F:F}function k(g,b){for(var E,B,S=1,N=new C(g[0]);S<g.length;S++)B=new C(g[S]),(!B.s||(E=Vc(N,B))===b||E===0&&N.s===b)&&(N=B);return N}function I(g,b,E){for(var B=1,S=b.length;!b[--S];b.pop());for(S=b[0];S>=10;S/=10,B++);return(E=B+E*We-1)>d?g.c=g.e=null:E<l?g.c=[g.e=0]:(g.e=E,g.c=b),g}n=function(){var g=/^(-?)0([xbo])(?=\w[\w.]*$)/i,b=/^([^.]+)\.$/,E=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,S=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(N,$,O,F){var U,M=O?$:$.replace(S,"");if(B.test(M))N.s=isNaN(M)?null:M<0?-1:1;else{if(!O&&(M=M.replace(g,function(R,K,z){return U=(z=z.toLowerCase())=="x"?16:z=="b"?2:8,!F||F==U?K:R}),F&&(U=F,M=M.replace(b,"$1").replace(E,"0.$1")),$!=M))return new C(M,U);if(C.DEBUG)throw Error(ii+"Not a"+(F?" base "+F:"")+" number: "+$);N.s=null}N.c=N.e=null}}();function T(g,b,E,B){var S,N,$,O,F,U,M,R=g.c,K=f2;if(R){e:{for(S=1,O=R[0];O>=10;O/=10,S++);if(N=b-S,N<0)N+=We,$=b,F=R[U=0],M=Hi(F/K[S-$-1]%10);else if(U=l2((N+1)/We),U>=R.length)if(B){for(;R.length<=U;R.push(0));F=M=0,S=1,N%=We,$=N-We+1}else break e;else{for(F=O=R[U],S=1;O>=10;O/=10,S++);N%=We,$=N-We+S,M=$<0?0:Hi(F/K[S-$-1]%10)}if(B=B||b<0||R[U+1]!=null||($<0?F:F%K[S-$-1]),B=E<4?(M||B)&&(E==0||E==(g.s<0?3:2)):M>5||M==5&&(E==4||B||E==6&&(N>0?$>0?F/K[S-$]:0:R[U-1])%10&1||E==(g.s<0?8:7)),b<1||!R[0])return R.length=0,B?(b-=g.e+1,R[0]=K[(We-b%We)%We],g.e=-b||0):R[0]=g.e=0,g;if(N==0?(R.length=U,O=1,U--):(R.length=U+1,O=K[We-N],R[U]=$>0?Hi(F/K[S-$]%K[$])*O:0),B)for(;;)if(U==0){for(N=1,$=R[0];$>=10;$/=10,N++);for($=R[0]+=O,O=1;$>=10;$/=10,O++);N!=O&&(g.e++,R[0]==bs&&(R[0]=1));break}else{if(R[U]+=O,R[U]!=bs)break;R[U--]=0,O=1}for(N=R.length;R[--N]===0;R.pop());}g.e>d?g.c=g.e=null:g.e<l&&(g.c=[g.e=0])}return g}function j(g){var b,E=g.e;return E===null?g.toString():(b=Ki(g.c),b=E<=u||E>=c?ig(b,E):ma(b,E,"0"),g.s<0?"-"+b:b)}return s.absoluteValue=s.abs=function(){var g=new C(this);return g.s<0&&(g.s=1),g},s.comparedTo=function(g,b){return Vc(this,new C(g,b))},s.decimalPlaces=s.dp=function(g,b){var E,B,S,N=this;if(g!=null)return fr(g,0,tn),b==null?b=a:fr(b,0,8),T(new C(N),g+N.e+1,b);if(!(E=N.c))return null;if(B=((S=E.length-1)-Wi(this.e/We))*We,S=E[S])for(;S%10==0;S/=10,B--);return B<0&&(B=0),B},s.dividedBy=s.div=function(g,b){return e(this,new C(g,b),o,a)},s.dividedToIntegerBy=s.idiv=function(g,b){return e(this,new C(g,b),0,1)},s.exponentiatedBy=s.pow=function(g,b){var E,B,S,N,$,O,F,U,M,R=this;if(g=new C(g),g.c&&!g.isInteger())throw Error(ii+"Exponent not an integer: "+j(g));if(b!=null&&(b=new C(b)),O=g.e>14,!R.c||!R.c[0]||R.c[0]==1&&!R.e&&R.c.length==1||!g.c||!g.c[0])return M=new C(Math.pow(+j(R),O?g.s*(2-ng(g)):+j(g))),b?M.mod(b):M;if(F=g.s<0,b){if(b.c?!b.c[0]:!b.s)return new C(NaN);B=!F&&R.isInteger()&&b.isInteger(),B&&(R=R.mod(b))}else{if(g.e>9&&(R.e>0||R.e<-1||(R.e==0?R.c[0]>1||O&&R.c[1]>=24e7:R.c[0]<8e13||O&&R.c[0]<=9999975e7)))return N=R.s<0&&ng(g)?-0:0,R.e>-1&&(N=1/N),new C(F?1/N:N);p&&(N=l2(p/We+2))}for(O?(E=new C(.5),F&&(g.s=1),U=ng(g)):(S=Math.abs(+j(g)),U=S%2),M=new C(i);;){if(U){if(M=M.times(R),!M.c)break;N?M.c.length>N&&(M.c.length=N):B&&(M=M.mod(b))}if(S){if(S=Hi(S/2),S===0)break;U=S%2}else if(g=g.times(E),T(g,g.e+1,1),g.e>14)U=ng(g);else{if(S=+j(g),S===0)break;U=S%2}R=R.times(R),N?R.c&&R.c.length>N&&(R.c.length=N):B&&(R=R.mod(b))}return B?M:(F&&(M=i.div(M)),b?M.mod(b):N?T(M,p,a,$):M)},s.integerValue=function(g){var b=new C(this);return g==null?g=a:fr(g,0,8),T(b,b.e+1,g)},s.isEqualTo=s.eq=function(g,b){return Vc(this,new C(g,b))===0},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(g,b){return Vc(this,new C(g,b))>0},s.isGreaterThanOrEqualTo=s.gte=function(g,b){return(b=Vc(this,new C(g,b)))===1||b===0},s.isInteger=function(){return!!this.c&&Wi(this.e/We)>this.c.length-2},s.isLessThan=s.lt=function(g,b){return Vc(this,new C(g,b))<0},s.isLessThanOrEqualTo=s.lte=function(g,b){return(b=Vc(this,new C(g,b)))===-1||b===0},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&this.c[0]==0},s.minus=function(g,b){var E,B,S,N,$=this,O=$.s;if(g=new C(g,b),b=g.s,!O||!b)return new C(NaN);if(O!=b)return g.s=-b,$.plus(g);var F=$.e/We,U=g.e/We,M=$.c,R=g.c;if(!F||!U){if(!M||!R)return M?(g.s=-b,g):new C(R?$:NaN);if(!M[0]||!R[0])return R[0]?(g.s=-b,g):new C(M[0]?$:a==3?-0:0)}if(F=Wi(F),U=Wi(U),M=M.slice(),O=F-U){for((N=O<0)?(O=-O,S=M):(U=F,S=R),S.reverse(),b=O;b--;S.push(0));S.reverse()}else for(B=(N=(O=M.length)<(b=R.length))?O:b,O=b=0;b<B;b++)if(M[b]!=R[b]){N=M[b]<R[b];break}if(N&&(S=M,M=R,R=S,g.s=-g.s),b=(B=R.length)-(E=M.length),b>0)for(;b--;M[E++]=0);for(b=bs-1;B>O;){if(M[--B]<R[B]){for(E=B;E&&!M[--E];M[E]=b);--M[E],M[B]+=bs}M[B]-=R[B]}for(;M[0]==0;M.splice(0,1),--U);return M[0]?I(g,M,U):(g.s=a==3?-1:1,g.c=[g.e=0],g)},s.modulo=s.mod=function(g,b){var E,B,S=this;return g=new C(g,b),!S.c||!g.s||g.c&&!g.c[0]?new C(NaN):!g.c||S.c&&!S.c[0]?new C(S):(f==9?(B=g.s,g.s=1,E=e(S,g,0,3),g.s=B,E.s*=B):E=e(S,g,0,f),g=S.minus(E.times(g)),!g.c[0]&&f==1&&(g.s=S.s),g)},s.multipliedBy=s.times=function(g,b){var E,B,S,N,$,O,F,U,M,R,K,z,ee,ce,re,ie=this,ue=ie.c,ye=(g=new C(g,b)).c;if(!ue||!ye||!ue[0]||!ye[0])return!ie.s||!g.s||ue&&!ue[0]&&!ye||ye&&!ye[0]&&!ue?g.c=g.e=g.s=null:(g.s*=ie.s,!ue||!ye?g.c=g.e=null:(g.c=[0],g.e=0)),g;for(B=Wi(ie.e/We)+Wi(g.e/We),g.s*=ie.s,F=ue.length,R=ye.length,F<R&&(ee=ue,ue=ye,ye=ee,S=F,F=R,R=S),S=F+R,ee=[];S--;ee.push(0));for(ce=bs,re=vu,S=R;--S>=0;){for(E=0,K=ye[S]%re,z=ye[S]/re|0,$=F,N=S+$;N>S;)U=ue[--$]%re,M=ue[$]/re|0,O=z*U+M*K,U=K*U+O%re*re+ee[N]+E,E=(U/ce|0)+(O/re|0)+z*M,ee[N--]=U%ce;ee[N]=E}return E?++B:ee.splice(0,1),I(g,ee,B)},s.negated=function(){var g=new C(this);return g.s=-g.s||null,g},s.plus=function(g,b){var E,B=this,S=B.s;if(g=new C(g,b),b=g.s,!S||!b)return new C(NaN);if(S!=b)return g.s=-b,B.minus(g);var N=B.e/We,$=g.e/We,O=B.c,F=g.c;if(!N||!$){if(!O||!F)return new C(S/0);if(!O[0]||!F[0])return F[0]?g:new C(O[0]?B:S*0)}if(N=Wi(N),$=Wi($),O=O.slice(),S=N-$){for(S>0?($=N,E=F):(S=-S,E=O),E.reverse();S--;E.push(0));E.reverse()}for(S=O.length,b=F.length,S-b<0&&(E=F,F=O,O=E,b=S),S=0;b;)S=(O[--b]=O[b]+F[b]+S)/bs|0,O[b]=bs===O[b]?0:O[b]%bs;return S&&(O=[S].concat(O),++$),I(g,O,$)},s.precision=s.sd=function(g,b){var E,B,S,N=this;if(g!=null&&g!==!!g)return fr(g,1,tn),b==null?b=a:fr(b,0,8),T(new C(N),g,b);if(!(E=N.c))return null;if(S=E.length-1,B=S*We+1,S=E[S]){for(;S%10==0;S/=10,B--);for(S=E[0];S>=10;S/=10,B++);}return g&&N.e+1>B&&(B=N.e+1),B},s.shiftedBy=function(g){return fr(g,-d2,d2),this.times("1e"+g)},s.squareRoot=s.sqrt=function(){var g,b,E,B,S,N=this,$=N.c,O=N.s,F=N.e,U=o+4,M=new C("0.5");if(O!==1||!$||!$[0])return new C(!O||O<0&&(!$||$[0])?NaN:$?N:1/0);if(O=Math.sqrt(+j(N)),O==0||O==1/0?(b=Ki($),(b.length+F)%2==0&&(b+="0"),O=Math.sqrt(+b),F=Wi((F+1)/2)-(F<0||F%2),O==1/0?b="5e"+F:(b=O.toExponential(),b=b.slice(0,b.indexOf("e")+1)+F),E=new C(b)):E=new C(O+""),E.c[0]){for(F=E.e,O=F+U,O<3&&(O=0);;)if(S=E,E=M.times(S.plus(e(N,S,U,1))),Ki(S.c).slice(0,O)===(b=Ki(E.c)).slice(0,O))if(E.e<F&&--O,b=b.slice(O-3,O+1),b=="9999"||!B&&b=="4999"){if(!B&&(T(S,S.e+o+2,0),S.times(S).eq(N))){E=S;break}U+=4,O+=4,B=1}else{(!+b||!+b.slice(1)&&b.charAt(0)=="5")&&(T(E,E.e+o+2,1),g=!E.times(E).eq(N));break}}return T(E,E.e+o+1,a,g)},s.toExponential=function(g,b){return g!=null&&(fr(g,0,tn),g++),v(this,g,b,1)},s.toFixed=function(g,b){return g!=null&&(fr(g,0,tn),g=g+this.e+1),v(this,g,b)},s.toFormat=function(g,b,E){var B,S=this;if(E==null)g!=null&&b&&typeof b=="object"?(E=b,b=null):g&&typeof g=="object"?(E=g,g=b=null):E=y;else if(typeof E!="object")throw Error(ii+"Argument not an object: "+E);if(B=S.toFixed(g,b),S.c){var N,$=B.split("."),O=+E.groupSize,F=+E.secondaryGroupSize,U=E.groupSeparator||"",M=$[0],R=$[1],K=S.s<0,z=K?M.slice(1):M,ee=z.length;if(F&&(N=O,O=F,F=N,ee-=N),O>0&&ee>0){for(N=ee%O||O,M=z.substr(0,N);N<ee;N+=O)M+=U+z.substr(N,O);F>0&&(M+=U+z.slice(N)),K&&(M="-"+M)}B=R?M+(E.decimalSeparator||"")+((F=+E.fractionGroupSize)?R.replace(new RegExp("\\d{"+F+"}\\B","g"),"$&"+(E.fractionGroupSeparator||"")):R):M}return(E.prefix||"")+B+(E.suffix||"")},s.toFraction=function(g){var b,E,B,S,N,$,O,F,U,M,R,K,z=this,ee=z.c;if(g!=null&&(O=new C(g),!O.isInteger()&&(O.c||O.s!==1)||O.lt(i)))throw Error(ii+"Argument "+(O.isInteger()?"out of range: ":"not an integer: ")+j(O));if(!ee)return new C(z);for(b=new C(i),U=E=new C(i),B=F=new C(i),K=Ki(ee),N=b.e=K.length-z.e-1,b.c[0]=f2[($=N%We)<0?We+$:$],g=!g||O.comparedTo(b)>0?N>0?b:U:O,$=d,d=1/0,O=new C(K),F.c[0]=0;M=e(O,b,0,1),S=E.plus(M.times(B)),S.comparedTo(g)!=1;)E=B,B=S,U=F.plus(M.times(S=U)),F=S,b=O.minus(M.times(S=b)),O=S;return S=e(g.minus(E),B,0,1),F=F.plus(S.times(U)),E=E.plus(S.times(B)),F.s=U.s=z.s,N=N*2,R=e(U,B,N,a).minus(z).abs().comparedTo(e(F,E,N,a).minus(z).abs())<1?[U,B]:[F,E],d=$,R},s.toNumber=function(){return+j(this)},s.toPrecision=function(g,b){return g!=null&&fr(g,1,tn),v(this,g,b,2)},s.toString=function(g){var b,E=this,B=E.s,S=E.e;return S===null?B?(b="Infinity",B<0&&(b="-"+b)):b="NaN":(g==null?b=S<=u||S>=c?ig(Ki(E.c),S):ma(Ki(E.c),S,"0"):g===10&&P?(E=T(new C(E),o+S+1,a),b=ma(Ki(E.c),E.e,"0")):(fr(g,2,w.length,"Base"),b=r(ma(Ki(E.c),S,"0"),10,g,B,!0)),B<0&&E.c[0]&&(b="-"+b)),b},s.valueOf=s.toJSON=function(){return j(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,t!=null&&C.set(t),C}function Wi(t){var e=t|0;return t>0||t===e?e:e-1}function Ki(t){for(var e,r,n=1,s=t.length,i=t[0]+"";n<s;){for(e=t[n++]+"",r=We-e.length;r--;e="0"+e);i+=e}for(s=i.length;i.charCodeAt(--s)===48;);return i.slice(0,s+1||1)}function Vc(t,e){var r,n,s=t.c,i=e.c,o=t.s,a=e.s,u=t.e,c=e.e;if(!o||!a)return null;if(r=s&&!s[0],n=i&&!i[0],r||n)return r?n?0:-a:o;if(o!=a)return o;if(r=o<0,n=u==c,!s||!i)return n?0:!s^r?1:-1;if(!n)return u>c^r?1:-1;for(a=(u=s.length)<(c=i.length)?u:c,o=0;o<a;o++)if(s[o]!=i[o])return s[o]>i[o]^r?1:-1;return u==c?0:u>c^r?1:-1}function fr(t,e,r,n){if(t<e||t>r||t!==Hi(t))throw Error(ii+(n||"Argument")+(typeof t=="number"?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function ng(t){var e=t.c.length-1;return Wi(t.e/We)==e&&t.c[e]%2!=0}function ig(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function ma(t,e,r){var n,s;if(e<0){for(s=r+".";++e;s+=r);t=s+t}else if(n=t.length,++e>n){for(s=r,e-=n;--e;s+=r);t+=s}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}var hh=DB();var SB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},XQ=new Ir,si=class{static sign(e){return SB(this,void 0,void 0,function*(){let{signerDid:r,payload:n}=e,s=yield r.getSigner(),i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);let o={typ:"JWT",alg:s.algorithm,kid:i},a=ne.object(o).toBase64Url(),u=ne.object(n).toBase64Url(),c=`${a}.${u}`,l=ne.string(c).toUint8Array(),d=yield s.sign({data:l}),h=ne.uint8Array(d).toBase64Url();return`${c}.${h}`})}static verify(e){return SB(this,void 0,void 0,function*(){let{decoded:r,encoded:n}=si.parse({jwt:e.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");let s=yield si.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);let i=s.contentStream;if(!i||!jc.isDidVerificationMethod(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");let o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");let a=`${n.header}.${n.payload}`,u=ne.string(a).toUint8Array(),c=ne.base64Url(n.signature).toUint8Array();if(!(yield XQ.verify({key:o,signature:c,data:u})))throw new Error("Signature verification failed: Integrity mismatch");return r})}static parse(e){let r=e.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);let[n,s,i]=r,o,a;try{o=ne.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.typ||o.typ!=="JWT")throw new Error("Verification failed: Expected JWT header to contain typ property set to JWT");if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=ne.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}};si.didResolver=new Nd({didResolvers:[Mi,uo,ti,Li,ha]});var _l=Kn(A7(),1),Tm=class{static selectCredentials({vcJwts:e,presentationDefinition:r}){var n,s;this.resetPex();let i=this.pex.selectFrom(r,e);return((n=i.errors)===null||n===void 0?void 0:n.length)!==0?[]:Array.from(new Set((s=i.verifiableCredential)!==null&&s!==void 0?s:[]))}static satisfiesPresentationDefinition({vcJwts:e,presentationDefinition:r}){var n,s,i;this.resetPex();let o=this.pex.evaluateCredentials(r,e);if(!((n=o.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(o.warnings)),o.areRequiredCredentialsPresent.toString()!=="info"||!((s=o.errors)===null||s===void 0)&&s.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw o.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(o.areRequiredCredentialsPresent)),!((i=o.errors)===null||i===void 0)&&i.length&&(a+="Errors: "+JSON.stringify(o.errors)),new Error(a)}}static createPresentationFromCredentials({vcJwts:e,presentationDefinition:r}){var n,s,i;this.resetPex();let o=_l.PEX.validateDefinition(r);x7(o);let a=this.pex.evaluateCredentials(r,e);if(!((n=a.warnings)===null||n===void 0)&&n.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(a.warnings)),a.areRequiredCredentialsPresent.toString()!=="info"||!((s=a.errors)===null||s===void 0)&&s.length){let l="Failed to create Verifiable Presentation JWT due to: ";throw a.areRequiredCredentialsPresent&&(l+="Required Credentials Not Present: "+JSON.stringify(a.areRequiredCredentialsPresent)),!((i=a.errors)===null||i===void 0)&&i.length&&(l+="Errors: "+JSON.stringify(a.errors)),new Error(l)}let u=this.pex.presentationFrom(r,e),c=_l.PEX.validateSubmission(u.presentationSubmission);return x7(c),u}static validateDefinition({presentationDefinition:e}){return _l.PEX.validateDefinition(e)}static validateSubmission({presentationSubmission:e}){return _l.PEX.validateSubmission(e)}static evaluatePresentation({presentationDefinition:e,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(e,r)}static resetPex(){this.pex=new _l.PEX}};Tm.pex=new _l.PEX;function x7(t){let e="Failed to pass validation check due to: ";if(Array.isArray(t)){if(!t.every(r=>r.status==="info"))throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}else if(t.status!=="info")throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}var uC={};Zt(uC,{getCurrentXmlSchema112Timestamp:()=>sC,getFutureXmlSchema112Timestamp:()=>qhe,getXmlSchema112Timestamp:()=>Bb,isValidRFC3339Timestamp:()=>aC,isValidXmlSchema112Timestamp:()=>oC});function sC(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function Bb(t){return new Date(t*1e3).toISOString().replace(/\.\d{3}/,"")}function qhe(t){return new Date(Date.now()+t*1e3).toISOString().replace(/\.\d+Z$/,"Z")}function oC(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}function aC(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}var cC="VerifiablePresentation";var Na=class{static validateCredentialPayload(e){this.validateContext(e.vcDataModel["@context"]),this.validateVcType(e.type),this.validateCredentialSubject(e.vcDataModel.credentialSubject),e.vcDataModel.issuanceDate&&this.validateTimestamp(e.vcDataModel.issuanceDate),e.vcDataModel.expirationDate&&this.validateTimestamp(e.vcDataModel.expirationDate)}static validateContext(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Fm)===-1)throw new Error(`@context is missing default context "${Fm}"`)}static validateVcType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Nf)===-1)throw new Error(`type is missing default "${Nf}"`)}static validateVpType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(cC)===-1)throw new Error(`type is missing default "${cC}"`)}static validateCredentialSubject(e){if(Object.keys(e).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(e){if(!oC(e)&&!aC(e))throw new Error("timestamp is not valid xml schema 112 timestamp")}static asArray(e){return Array.isArray(e)?e:[e]}};var lC=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Fm="https://www.w3.org/2018/credentials/v1",Nf="VerifiableCredential",Oo=class{constructor(e){this.vcDataModel=e}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}sign(e){return lC(this,void 0,void 0,function*(){return yield si.sign({signerDid:e.did,payload:Object.assign({vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:e.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3)},this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)})})})}toString(){return JSON.stringify(this.vcDataModel)}static create(e){return lC(this,void 0,void 0,function*(){let{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,evidence:u}=e,c=JSON.parse(JSON.stringify(i));if(typeof c!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");let l=Object.assign({id:s},c),d=Object.assign(Object.assign({"@context":[Fm],type:Array.isArray(r)?[Nf,...r]:r?[Nf,r]:[Nf],id:`urn:uuid:${ou.randomUuid()}`,issuer:n,issuanceDate:o||sC(),credentialSubject:l},a&&{expirationDate:a}),u&&{evidence:u});return dC(d),new Oo(d)})}static verify({vcJwt:e}){return lC(this,void 0,void 0,function*(){let{payload:r}=yield si.verify({jwt:e}),{exp:n,iss:s,nbf:i,jti:o,sub:a,vc:u}=r;if(!u)throw new Error("vc property missing.");let c=r.vc;if(n&&c.expirationDate&&n!==Math.floor(new Date(c.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(n&&(c.expirationDate=Bb(n)),!s)throw new Error("Verification failed: iss claim is required");if(s!==c.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(i&&i>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(i&&c.issuanceDate&&i!==Math.floor(new Date(c.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(i&&(c.issuanceDate=Bb(i)),a&&!Array.isArray(c.credentialSubject)&&a!==c.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(a&&!Array.isArray(c.credentialSubject)&&(c.credentialSubject.id=a),o&&o!==c.id)throw new Error("Verification failed: jti claim does not match id");return o&&(c.id=o),dC(c),{issuer:r.iss,subject:r.sub,vc:c}})}static parseJwt({vcJwt:e}){let n=si.parse({jwt:e}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return dC(n),new Oo(n)}};function dC(t){Na.validateContext(t["@context"]),Na.validateVcType(t.type),Na.validateCredentialSubject(t.credentialSubject),t.issuanceDate&&Na.validateTimestamp(t.issuanceDate),t.expirationDate&&Na.validateTimestamp(t.expirationDate)}var C7=Kn(Zv(),1);var En=class extends Wr{validNext=new Set(["quote","close"]);kind="rfq";metadata;data;privateData;constructor(e,r,n,s){super(e,r,n),this.metadata=e,this.data=r,this.privateData=s}static async parse(e,r){let n=yr.rawToMessageModel(e),s=new En(n.metadata,n.data,n.signature,n.privateData);return await s.verify(),r?.requireAllPrivateData?s.verifyAllPrivateData():s.verifyPresentPrivateData(),s}validate(){super.validate(),this.privateData!==void 0&&gu(this.privateData,"rfqPrivate")}static create(e){let r=Wr.generateId("rfq"),n={...e.metadata,kind:"rfq",id:r,exchangeId:r,createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},{data:s,privateData:i}=En.hashPrivateData(e.data),o=new En(n,s,void 0,i);return o.validateData(),o}static hashPrivateData(e){let r=ne.uint8Array(BE(16)).toBase64Url(),{claims:n,payin:s,payout:i,...o}=e,{paymentDetails:a,...u}=s,{paymentDetails:c,...l}=i,d={...o,payin:u,payout:l};return a!==void 0&&(d.payin.paymentDetailsHash=En.digestPrivateData(r,a)),c!==void 0&&(d.payout.paymentDetailsHash=En.digestPrivateData(r,c)),n!==void 0&&n?.length>0&&(d.claimsHash=En.digestPrivateData(r,n)),{data:d,privateData:{salt:r,payin:{paymentDetails:a},payout:{paymentDetails:c},claims:n}}}verifyAllPrivateData(){if(this.privateData===void 0)throw new Error("Could not verify all privateData because privateData property is missing");this.data.payin.paymentDetailsHash!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&this.verifyClaimsHash()}verifyPresentPrivateData(){this.data.payin.paymentDetailsHash!==void 0&&this.privateData?.payin?.paymentDetails!==void 0&&this.verifyPayinDetailsHash(),this.data.payout.paymentDetailsHash!==void 0&&this.privateData?.payout?.paymentDetails!==void 0&&this.verifyPayoutDetailsHash(),this.data.claimsHash!==void 0&&this.privateData?.claims!==void 0&&this.verifyClaimsHash()}verifyPayinDetailsHash(){if(En.digestPrivateData(this.privateData.salt,this.privateData?.payin?.paymentDetails)!==this.data.payin.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payin.paymentDetailsHash does not match digest of privateData.payin.paymentDetails")}verifyPayoutDetailsHash(){if(En.digestPrivateData(this.privateData.salt,this.privateData?.payout?.paymentDetails)!==this.data.payout.paymentDetailsHash)throw new Error("Private data integrity check failed: data.payout.paymentDetailsHash does not match digest of privateData.payout.paymentDetails")}verifyClaimsHash(){let e=this.data.claimsHash,r=this.privateData?.claims;if(En.digestPrivateData(this.privateData.salt,r)!==e)throw new Error("Private data integrity check failed: data.claimsHash does not match digest of privateData.claims")}static digestPrivateData(e,r){let n=[e,r],s=bi.digest(n);return ne.uint8Array(s).toBase64Url()}async verifyOfferingRequirements(e){if(e.metadata.protocol!==this.metadata.protocol)throw new Error(`protocol version mismatch. (rfq) ${this.metadata.protocol} !== ${e.metadata.protocol} (offering)`);if(e.metadata.id!==this.data.offeringId)throw new Error(`offering id mismatch. (rfq) ${this.data.offeringId} !== ${e.metadata.id} (offering)`);let r;if(e.data.payin.max){r=hh(this.data.payin.amount);let n=hh(e.data.payin.max);if(r.isGreaterThan(n))throw new Error(`rfq payinAmount exceeds offering's maxAmount. (rfq) ${this.data.payin.amount} > ${e.data.payin.max} (offering)`)}if(e.data.payin.min){r??=hh(this.data.payin.amount);let n=hh(e.data.payin.min);if(r.isLessThan(n))throw new Error(`rfq payinAmount is below offering's minAmount. (rfq) ${this.data.payin.amount} > ${e.data.payin.min} (offering)`)}this.verifyPaymentMethod(this.data.payin.kind,this.data.payin.paymentDetailsHash,this.privateData?.payin?.paymentDetails,e.data.payin.methods,"payin"),this.verifyPaymentMethod(this.data.payout.kind,this.data.payout.paymentDetailsHash,this.privateData?.payout?.paymentDetails,e.data.payout.methods,"payout"),await this.verifyClaims(e)}verifyPaymentMethod(e,r,n,s,i){let o=s.filter(c=>c.kind===e);if(!o.length){let c=s.map(l=>l.kind).join(", ");throw new Error(`offering does not support rfq's ${i}Method kind. (rfq) ${e} was not found in: [${c}] (offering)`)}let a=new C7.default.default,u=new Set;for(let c of o)if(c.requiredPaymentDetails){let l=a.compile(c.requiredPaymentDetails);if(l(n))return;u.add(l.errors)}else{if(r===void 0)return;u.add(new Error("paymentDetails must be omitted when requiredPaymentDetails is omitted"))}throw new Error(`rfq ${i}Method paymentDetails could not be validated against offering requiredPaymentDetails. Schema validation errors: ${Array.from(u).join()}`)}async verifyClaims(e){if(!e.data.requiredClaims)return;let r=Tm.selectCredentials({vcJwts:this.privateData?.claims??[],presentationDefinition:e.data.requiredClaims});if(r.length===0)throw new Error("claims do not fulfill the offering's requirements");for(let n of r)await Oo.verify({vcJwt:n})}toJSON(){let e=super.toJSON();return this.privateData!==void 0&&(e.privateData=this.privateData),e}};var Vu=class extends Wr{validNext=new Set(["order","close"]);kind="quote";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=yr.rawToMessageModel(e),n=new Vu(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"quote",id:Wr.generateId("quote"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Vu(r,e.data);return n.validateData(),n}};var Ku=class extends Wr{validNext=new Set(["orderstatus"]);kind="order";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=yr.rawToMessageModel(e),n=new Ku(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"order",id:Wr.generateId("order"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Ku(r,{});return n.validateData(),n}};var Hu=class extends Wr{validNext=new Set(["orderstatus","close"]);kind="orderstatus";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=yr.rawToMessageModel(e),n=new Hu(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"orderstatus",id:Wr.generateId("orderstatus"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Hu(r,e.data);return n.validateData(),n}get orderStatus(){return this.data.orderStatus}};var Wu=class extends Wr{validNext=new Set([]);kind="close";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=yr.rawToMessageModel(e),n=new Wu(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"close",id:Wr.generateId("close"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new Wu(r,e.data);return n.validateData(),n}get reason(){return this.data.reason}};var yr=class{constructor(){}static async parseMessage(e){let r=yr.rawToMessageModel(e),n;switch(r.metadata.kind){case"rfq":n=new En(r.metadata,r.data,r.signature,r.privateData);break;case"quote":n=new Vu(r.metadata,r.data,r.signature);break;case"order":n=new Ku(r.metadata,r.data,r.signature);break;case"orderstatus":n=new Hu(r.metadata,r.data,r.signature);break;case"close":n=new Wu(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized message kind (${r.metadata.kind})`)}return await n.verify(),n}static async parseResource(e){let r=yr.rawToResourceModel(e),n;switch(r.metadata.kind){case"offering":n=new is(r.metadata,r.data,r.signature);break;case"balance":n=new ko(r.metadata,r.data,r.signature);break;default:throw new Error(`Unrecognized resource kind (${r.metadata.kind})`)}return await n.verify(),n}static rawToMessageModel(e){try{return typeof e=="string"?JSON.parse(e):e}catch(r){let n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse message. Error: ${n}`)}}static rawToResourceModel(e){try{return typeof e=="string"?JSON.parse(e):e}catch(r){let n=r instanceof Error?r.message:r;throw new Error(`parse: Failed to parse resource. Error: ${n}`)}}};var is=class extends Vi{kind="offering";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=yr.rawToResourceModel(e),n=new is(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"offering",id:Vi.generateId("offering"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new is(r,e.data);return n.validateData(),n}};var ko=class extends Vi{kind="balance";metadata;data;constructor(e,r,n){super(e,r,n),this.metadata=e,this.data=r}static async parse(e){let r=yr.rawToResourceModel(e),n=new ko(r.metadata,r.data,r.signature);return await n.verify(),n}static create(e){let r={...e.metadata,kind:"balance",id:Vi.generateId("balance"),createdAt:new Date().toISOString(),protocol:e.metadata.protocol??"1.0"},n=new ko(r,e.data);return n.validateData(),n}};var fC=class{rfq;quote;order;orderstatus;close;constructor(){this.orderstatus=[]}addMessages(e){let r=e.sort((n,s)=>{let i=new Date(n.metadata.createdAt).getTime(),o=new Date(s.metadata.createdAt).getTime();return i-o});for(let n of r)this.addNextMessage(n)}addNextMessage(e){if(this.protocol!==void 0&&e.metadata.protocol!==this.protocol)throw new Error(`Could not add message (${e.metadata.id}) with protocol version ${e.metadata.protocol} to exchange because it does not have matching protocol version ${this.protocol} as other messages in the exchange`);if(!this.isValidNext(e.metadata.kind))throw new Error(`Could not add message (${e.metadata.id}) to exchange because ${e.metadata.kind} is not a valid next message`);if(this.exchangeId!==void 0&&e.metadata.exchangeId!==this.exchangeId)throw new Error(`Could not add message (${e.metadata.id}) with exchange id ${e.metadata.exchangeId} to exchange because it does not have matching exchange id ${this.exchangeId} as the exchange`);if(e.isRfq())this.rfq=e;else if(e.isQuote())this.quote=e;else if(e.isClose())this.close=e;else if(e.isOrder())this.order=e;else if(e.isOrderStatus())this.orderstatus.push(e);else throw new Error("Unrecognized message kind")}isValidNext(e){return(this.latestMessage?.validNext??new Set(["rfq"])).has(e)}get latestMessage(){return this.close??this.orderstatus[this.orderstatus.length-1]??this.order??this.quote??this.rfq}get exchangeId(){return this.rfq?.metadata?.exchangeId}get protocol(){return this.rfq?.metadata?.protocol}get messages(){return[this.rfq,this.quote,this.order,...this.orderstatus,this.close].filter(r=>r!==void 0)}};var Dl=class{static createOffering(e){return is.create({metadata:{from:e?.from??"did:ex:pfi"},data:e?.offeringData??Dl.createOfferingData()})}static createOfferingData(){return{description:"Selling BTC for USD",payin:{currencyCode:"USD",min:"0.0",max:"999999.99",methods:[{kind:"DEBIT_CARD",requiredPaymentDetails:{$schema:"http://json-schema.org/draft-07/schema",type:"object",properties:{cardNumber:{type:"string",description:"The 16-digit debit card number",minLength:16,maxLength:16},expiryDate:{type:"string",description:"The expiry date of the card in MM/YY format",pattern:"^(0[1-9]|1[0-2])\\/([0-9]{2})$"},cardHolderName:{type:"string",description:"Name of the cardholder as it appears on the card"},cvv:{type:"string",description:"The 3-digit CVV code",minLength:3,maxLength:3}},required:["cardNumber","expiryDate","cardHolderName","cvv"],additionalProperties:!1}}]},payout:{currencyCode:"BTC",max:"999526.11",methods:[{kind:"BTC_ADDRESS",requiredPaymentDetails:{$schema:"http://json-schema.org/draft-07/schema",type:"object",properties:{btcAddress:{type:"string",description:"your Bitcoin wallet address"}},required:["btcAddress"],additionalProperties:!1},estimatedSettlementTime:10}]},payoutUnitsPerPayinUnit:"0.00003826",requiredClaims:{id:"7ce4004c-3c38-4853-968b-e411bafcd945",input_descriptors:[{id:"bbdb9b7c-5754-4f46-b63b-590bada959e0",constraints:{fields:[{path:["$.type[*]"],filter:{type:"string",pattern:"^YoloCredential$"}}]}}]}}}static createBalance(e){return ko.create({metadata:{from:e?.from??"did:ex:pfi"},data:e?.balanceData??Dl.createBalanceData()})}static createBalanceData(){return{currencyCode:"USD",available:"400.00"}}static createQuoteData(){return{expiresAt:new Date().toISOString(),payin:{currencyCode:"BTC",amount:"0.01",fee:"0.0001",paymentInstruction:{link:"tbdex.io/example",instruction:"Fake instruction"}},payout:{currencyCode:"USD",amount:"1000.00",paymentInstruction:{link:"tbdex.io/example",instruction:"Fake instruction"}}}}static async createRfq(e){let{sender:r,receiver:n}=e,s=await Dl.createRfqData(e);return En.create({metadata:{from:r.uri,to:n?.uri??"did:ex:pfi"},data:s})}static async createRfqData(e){let r="";return e?.sender&&(r=await(await Oo.create({type:"YoloCredential",issuer:e.sender.uri,subject:e.sender.uri,data:{beep:"boop"}})).sign({did:e.sender})),{offeringId:Vi.generateId("offering"),payin:{kind:"DEBIT_CARD",amount:"200.00",paymentDetails:{cardNumber:"1234567890123456",expiryDate:"12/22",cardHolderName:"Ephraim Bartholomew Winthrop",cvv:"123"}},payout:{kind:"BTC_ADDRESS",paymentDetails:{btcAddress:"1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa"}},claims:[r]}}};var Io=class extends Error{recipientDid;url;constructor(e){super(e.message,{cause:e.cause}),this.name=this.constructor.name,this.recipientDid=e.recipientDid,this.url=e.url}};var Bo=class extends Error{statusCode;details;recipientDid;url;constructor(e){super(),this.name=this.constructor.name,this.statusCode=e.statusCode,this.details=e.details,this.recipientDid=e.recipientDid,this.url=e.url}};var jf=class extends Error{constructor(e){super(e),this.name=this.constructor.name}},qf=class extends jf{},Mf=class extends jf{};var ja=class extends Error{constructor(e){super(e.message,{cause:e.cause}),this.name=this.constructor.name}},Lf=class extends ja{},Uf=class extends ja{},Vf=class extends ja{},Kf=class extends ja{},Hf=class extends ja{};var vC={};Zt(vC,{exclude:()=>zhe,extract:()=>yC,parse:()=>gC,parseUrl:()=>N7,pick:()=>q7,stringify:()=>R7,stringifyUrl:()=>j7});var k7="%[a-f0-9]{2}",P7=new RegExp("("+k7+")|([^%]+?)","gi"),O7=new RegExp("("+k7+")+","gi");function pC(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;let r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],pC(r),pC(n))}function Mhe(t){try{return decodeURIComponent(t)}catch{let e=t.match(P7)||[];for(let r=1;r<e.length;r++)t=pC(e,r).join(""),e=t.match(P7)||[];return t}}function Lhe(t){let e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=O7.exec(t);for(;r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{let s=Mhe(r[0]);s!==r[0]&&(e[r[0]]=s)}r=O7.exec(t)}e["%C2"]="\uFFFD";let n=Object.keys(e);for(let s of n)t=t.replace(new RegExp(s,"g"),e[s]);return t}function hC(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return Lhe(t)}}function Tb(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];let r=t.indexOf(e);return r===-1?[]:[t.slice(0,r),t.slice(r+e.length)]}function I7(t,e){let r={};if(Array.isArray(e))for(let n of e){let s=Object.getOwnPropertyDescriptor(t,n);s?.enumerable&&Object.defineProperty(r,n,s)}else for(let n of Reflect.ownKeys(t)){let s=Object.getOwnPropertyDescriptor(t,n);if(s.enumerable){let i=t[n];e(n,i,t)&&Object.defineProperty(r,n,s)}}return r}var Uhe=t=>t==null,Vhe=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),mC=Symbol("encodeFragmentIdentifier");function Khe(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let s=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[jr(e,t),"[",s,"]"].join("")]:[...r,[jr(e,t),"[",jr(s,t),"]=",jr(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[jr(e,t),"[]"].join("")]:[...r,[jr(e,t),"[]=",jr(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[jr(e,t),":list="].join("")]:[...r,[jr(e,t),":list=",jr(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,s)=>s===void 0||t.skipNull&&s===null||t.skipEmptyString&&s===""?n:(s=s===null?"":s,n.length===0?[[jr(r,t),e,jr(s,t)].join("")]:[[n,jr(s,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,jr(e,t)]:[...r,[jr(e,t),"=",jr(n,t)].join("")]}}function Hhe(t){let e;switch(t.arrayFormat){case"index":return(r,n,s)=>{if(e=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!e){s[r]=n;return}s[r]===void 0&&(s[r]={}),s[r][e[1]]=n};case"bracket":return(r,n,s)=>{if(e=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"colon-list-separator":return(r,n,s)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){s[r]=n;return}if(s[r]===void 0){s[r]=[n];return}s[r]=[...s[r],n]};case"comma":case"separator":return(r,n,s)=>{let i=typeof n=="string"&&n.includes(t.arrayFormatSeparator),o=typeof n=="string"&&!i&&qa(n,t).includes(t.arrayFormatSeparator);n=o?qa(n,t):n;let a=i||o?n.split(t.arrayFormatSeparator).map(u=>qa(u,t)):n===null?n:qa(n,t);s[r]=a};case"bracket-separator":return(r,n,s)=>{let i=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!i){s[r]=n&&qa(n,t);return}let o=n===null?[]:n.split(t.arrayFormatSeparator).map(a=>qa(a,t));if(s[r]===void 0){s[r]=o;return}s[r]=[...s[r],...o]};default:return(r,n,s)=>{if(s[r]===void 0){s[r]=n;return}s[r]=[...[s[r]].flat(),n]}}}function T7(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function jr(t,e){return e.encode?e.strict?Vhe(t):encodeURIComponent(t):t}function qa(t,e){return e.decode?hC(t):t}function F7(t){return Array.isArray(t)?t.sort():typeof t=="object"?F7(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function $7(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function Whe(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function B7(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function yC(t){t=$7(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function gC(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},T7(e.arrayFormatSeparator);let r=Hhe(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(let s of t.split("&")){if(s==="")continue;let i=e.decode?s.replace(/\+/g," "):s,[o,a]=Tb(i,"=");o===void 0&&(o=i),a=a===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?a:qa(a,e),r(qa(o,e),a,n)}for(let[s,i]of Object.entries(n))if(typeof i=="object"&&i!==null)for(let[o,a]of Object.entries(i))i[o]=B7(a,e);else n[s]=B7(i,e);return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((s,i)=>{let o=n[i];return s[i]=Boolean(o)&&typeof o=="object"&&!Array.isArray(o)?F7(o):o,s},Object.create(null))}function R7(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},T7(e.arrayFormatSeparator);let r=o=>e.skipNull&&Uhe(t[o])||e.skipEmptyString&&t[o]==="",n=Khe(e),s={};for(let[o,a]of Object.entries(t))r(o)||(s[o]=a);let i=Object.keys(s);return e.sort!==!1&&i.sort(e.sort),i.map(o=>{let a=t[o];return a===void 0?"":a===null?jr(o,e):Array.isArray(a)?a.length===0&&e.arrayFormat==="bracket-separator"?jr(o,e)+"[]":a.reduce(n(o),[]).join("&"):jr(o,e)+"="+jr(a,e)}).filter(o=>o.length>0).join("&")}function N7(t,e){e={decode:!0,...e};let[r,n]=Tb(t,"#");return r===void 0&&(r=t),{url:r?.split("?")?.[0]??"",query:gC(yC(t),e),...e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:qa(n,e)}:{}}}function j7(t,e){e={encode:!0,strict:!0,[mC]:!0,...e};let r=$7(t.url).split("?")[0]||"",n=yC(t.url),s={...gC(n,{sort:!1}),...t.query},i=R7(s,e);i&&(i=`?${i}`);let o=Whe(t.url);if(t.fragmentIdentifier){let a=new URL(r);a.hash=t.fragmentIdentifier,o=e[mC]?a.hash:`#${t.fragmentIdentifier}`}return`${r}${i}${o}`}function q7(t,e,r){r={parseFragmentIdentifier:!0,[mC]:!1,...r};let{url:n,query:s,fragmentIdentifier:i}=N7(t,r);return j7({url:n,query:I7(s,e),fragmentIdentifier:i},r)}function zhe(t,e,r){let n=Array.isArray(e)?s=>!e.includes(s):(s,i)=>!e(s,i);return q7(t,n,r)}var M7=vC;var L7=Kn(e2(),1),bC=["aud","iss","exp","iat","jti"],Ln=class{static async createExchange(e,r){await e.verify();let{to:n}=e.metadata,s=JSON.stringify({rfq:e,replyTo:r?.replyTo});await Ln.sendMessage(n,"POST","/exchanges",s)}static async submitOrder(e){await e.verify();let{to:r,exchangeId:n}=e.metadata,s=JSON.stringify(e);await Ln.sendMessage(r,"PUT",`/exchanges/${n}`,s)}static async submitClose(e){await e.verify();let{to:r,exchangeId:n}=e.metadata,s=JSON.stringify(e);await Ln.sendMessage(r,"PUT",`/exchanges/${n}`,s)}static async sendMessage(e,r,n,s){let o=`${await Ln.getPfiServiceEndpoint(e)}${n}`,a;try{a=await fetch(o,{method:r,headers:{"content-type":"application/json"},body:s})}catch(u){throw new Io({message:`Failed to send message to ${e}`,recipientDid:e,url:o,cause:u})}if(!a.ok){let u=await a.json();throw new Bo({statusCode:a.status,details:u,recipientDid:e,url:o})}}static async getOfferings(e){let{pfiDid:r}=e,s=`${await Ln.getPfiServiceEndpoint(r)}/offerings`,i;try{i=await fetch(s)}catch(c){throw new Io({message:`Failed to get offerings from ${r}`,recipientDid:r,url:s,cause:c})}let o=[];if(!i.ok){let c=await i.json();throw new Bo({statusCode:i.status,details:c,recipientDid:r,url:s})}let u=(await i.json()).data;for(let c of u){let l=await is.parse(c);o.push(l)}return o}static async getBalances(e){let{pfiDid:r,did:n}=e,i=`${await Ln.getPfiServiceEndpoint(r)}/balances`,o=await Ln.generateRequestToken({requesterDid:n,pfiDid:r}),a;try{a=await fetch(i,{headers:{authorization:`Bearer ${o}`}})}catch(l){throw new Io({message:`Failed to get balances from ${r}`,recipientDid:r,url:i,cause:l})}if(!a.ok){let l=await a.json();throw new Bo({statusCode:a.status,details:l,recipientDid:r,url:i})}return(await a.json()).data}static async getExchange(e){let{pfiDid:r,exchangeId:n,did:s}=e,o=`${await Ln.getPfiServiceEndpoint(r)}/exchanges/${n}`,a=await Ln.generateRequestToken({requesterDid:s,pfiDid:r}),u;try{u=await fetch(o,{headers:{authorization:`Bearer ${a}`}})}catch(d){throw new Io({message:`Failed to get exchange from ${r}`,recipientDid:r,url:o,cause:d})}let c=[];if(!u.ok){let d=await u.json();throw new Bo({statusCode:u.status,details:d,recipientDid:r,url:o})}let l=await u.json();for(let d of l.data){let h=await yr.parseMessage(d);c.push(h)}return c}static async getExchanges(e){let{pfiDid:r,filter:n,did:s}=e,i=await Ln.getPfiServiceEndpoint(r),o=n?`?${M7.stringify(n)}`:"",a=`${i}/exchanges${o}`,u=await Ln.generateRequestToken({requesterDid:s,pfiDid:r}),c;try{c=await fetch(a,{headers:{authorization:`Bearer ${u}`}})}catch(h){throw new Io({message:`Failed to get exchanges from ${r}`,recipientDid:r,url:a,cause:h})}let l=[];if(!c.ok){let h=await c.json();throw new Bo({statusCode:c.status,details:h,recipientDid:r,url:a})}let d=await c.json();for(let h of d.data){let f=[];for(let p of h){let y=await yr.parseMessage(p);f.push(y)}l.push(f)}return l}static async getPfiServiceEndpoint(e){let r;try{r=await t2(e)}catch(s){throw new qf(s.message)}let[n]=jc.getServices({didDocument:r,type:"PFI"});if(!n?.serviceEndpoint)throw new Mf(`${e} has no PFI service entry`);return n.serviceEndpoint}static async generateRequestToken(e){let{pfiDid:r,requesterDid:n}=e,s=Date.now(),i=s+(0,L7.default)("1m"),o={aud:r,iss:n.uri,exp:Math.floor(i/1e3),iat:Math.floor(s/1e3),jti:Zu().getSuffix()};try{return await si.sign({signerDid:n,payload:o})}catch(a){throw new Lf({message:a.message,cause:a})}}static async verifyRequestToken(e){let r;try{r=await si.verify({jwt:e.requestToken})}catch(a){throw new Uf({message:a.message,cause:a})}let{header:n,payload:s}=r;for(let a of bC)if(!s[a])throw new Vf({message:`Request token missing ${a} claim. Expected ${bC}.`});if(s.aud!==e.pfiDid)throw new Kf({message:"Request token contains invalid audience. Expected aud property to be PFI DID."});let i=n.kid,o=s.iss;if(!i.includes(o))throw new Hf({message:"Request token issuer does not match signer"});return o}};return Yf(Jhe);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

typeid-js/dist/chunk-FOHWUNKU.mjs:
  (*! Bundled license information:
  
  uuidv7/dist/index.js:
    (**
     * uuidv7: An experimental implementation of the proposed UUID Version 7
     *
     * @license Apache-2.0
     * @copyright 2021-2023 LiosK
     * @packageDocumentation
     *)
  *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)
*/
//# sourceMappingURL=browser.js.map
