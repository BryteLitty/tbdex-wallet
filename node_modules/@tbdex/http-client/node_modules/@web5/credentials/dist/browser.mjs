var t7=Object.create;var Bh=Object.defineProperty;var r7=Object.getOwnPropertyDescriptor;var n7=Object.getOwnPropertyNames;var i7=Object.getPrototypeOf,s7=Object.prototype.hasOwnProperty;var Ax=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var St=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),cr=(t,e)=>{for(var r in e)Bh(t,r,{get:e[r],enumerable:!0})},xx=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of n7(e))!s7.call(t,s)&&s!==r&&Bh(t,s,{get:()=>e[s],enumerable:!(n=r7(e,s))||n.enumerable});return t};var ts=(t,e,r)=>(r=t!=null?t7(i7(t)):{},xx(e||!t||!t.__esModule?Bh(r,"default",{value:t,enumerable:!0}):r,t)),Th=t=>xx(Bh({},"__esModule",{value:!0}),t);var Px=v((Lpe,Cx)=>{var o7=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Fh=()=>o7.now(),a7=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),Rb=t=>t===1/0||a7(t),$b=class t{constructor({max:e=1/0,ttl:r,updateAgeOnGet:n=!1,checkAgeOnGet:s=!1,noUpdateTTL:i=!1,dispose:o,noDisposeOnSet:a=!1}={}){if(this.expirations=Object.create(null),this.data=new Map,this.expirationMap=new Map,r!==void 0&&!Rb(r))throw new TypeError("ttl must be positive integer or Infinity if set");if(!Rb(e))throw new TypeError("max must be positive integer or Infinity");if(this.ttl=r,this.max=e,this.updateAgeOnGet=!!n,this.checkAgeOnGet=!!s,this.noUpdateTTL=!!i,this.noDisposeOnSet=!!a,o!==void 0){if(typeof o!="function")throw new TypeError("dispose must be function if set");this.dispose=o}this.timer=void 0,this.timerExpiration=void 0}setTimer(e,r){if(this.timerExpiration<e)return;this.timer&&clearTimeout(this.timer);let n=setTimeout(()=>{this.timer=void 0,this.timerExpiration=void 0,this.purgeStale();for(let s in this.expirations){this.setTimer(s,s-Fh());break}},r);n.unref&&n.unref(),this.timerExpiration=e,this.timer=n}cancelTimer(){this.timer&&(clearTimeout(this.timer),this.timerExpiration=void 0,this.timer=void 0)}cancelTimers(){return process.emitWarning('TTLCache.cancelTimers has been renamed to TTLCache.cancelTimer (no "s"), and will be removed in the next major version update'),this.cancelTimer()}clear(){let e=this.dispose!==t.prototype.dispose?[...this]:[];this.data.clear(),this.expirationMap.clear(),this.cancelTimer(),this.expirations=Object.create(null);for(let[r,n]of e)this.dispose(n,r,"delete")}setTTL(e,r=this.ttl){let n=this.expirationMap.get(e);if(n!==void 0){let s=this.expirations[n];!s||s.length<=1?delete this.expirations[n]:this.expirations[n]=s.filter(i=>i!==e)}if(r!==1/0){let s=Math.floor(Fh()+r);this.expirationMap.set(e,s),this.expirations[s]||(this.expirations[s]=[],this.setTimer(s,r)),this.expirations[s].push(e)}else this.expirationMap.set(e,1/0)}set(e,r,{ttl:n=this.ttl,noUpdateTTL:s=this.noUpdateTTL,noDisposeOnSet:i=this.noDisposeOnSet}={}){if(!Rb(n))throw new TypeError("ttl must be positive integer or Infinity");if(this.expirationMap.has(e)){s||this.setTTL(e,n);let o=this.data.get(e);o!==r&&(this.data.set(e,r),i||this.dispose(o,e,"set"))}else this.setTTL(e,n),this.data.set(e,r);for(;this.size>this.max;)this.purgeToCapacity();return this}has(e){return this.data.has(e)}getRemainingTTL(e){let r=this.expirationMap.get(e);return r===1/0?r:r!==void 0?Math.max(0,Math.ceil(r-Fh())):0}get(e,{updateAgeOnGet:r=this.updateAgeOnGet,ttl:n=this.ttl,checkAgeOnGet:s=this.checkAgeOnGet}={}){let i=this.data.get(e);if(s&&this.getRemainingTTL(e)===0){this.delete(e);return}return r&&this.setTTL(e,n),i}dispose(e,r){}delete(e){let r=this.expirationMap.get(e);if(r!==void 0){let n=this.data.get(e);this.data.delete(e),this.expirationMap.delete(e);let s=this.expirations[r];return s&&(s.length<=1?delete this.expirations[r]:this.expirations[r]=s.filter(i=>i!==e)),this.dispose(n,e,"delete"),this.size===0&&this.cancelTimer(),!0}return!1}purgeToCapacity(){for(let e in this.expirations){let r=this.expirations[e];if(this.size-r.length>=this.max){delete this.expirations[e];let n=[];for(let s of r)n.push([s,this.data.get(s)]),this.data.delete(s),this.expirationMap.delete(s);for(let[s,i]of n)this.dispose(i,s,"evict")}else{let n=this.size-this.max,s=[];for(let i of r.splice(0,n))s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"evict");return}}}get size(){return this.data.size}purgeStale(){let e=Math.ceil(Fh());for(let r in this.expirations){if(r==="Infinity"||r>e)return;let n=[...this.expirations[r]||[]],s=[];delete this.expirations[r];for(let i of n)s.push([i,this.data.get(i)]),this.data.delete(i),this.expirationMap.delete(i);for(let[i,o]of s)this.dispose(o,i,"stale")}this.size===0&&this.cancelTimer()}*entries(){for(let e in this.expirations)for(let r of this.expirations[e])yield[r,this.data.get(r)]}*keys(){for(let e in this.expirations)for(let r of this.expirations[e])yield r}*values(){for(let e in this.expirations)for(let r of this.expirations[e])yield this.data.get(r)}[Symbol.iterator](){return this.entries()}};Cx.exports=$b});var Hx=v(Kx=>{"use strict";Kx.supports=function(...e){let r=e.reduce((n,s)=>Object.assign(n,s),{});return Object.assign(r,{snapshots:r.snapshots||!1,permanence:r.permanence||!1,seek:r.seek||!1,clear:r.clear||!1,getMany:r.getMany||!1,keyIterator:r.keyIterator||!1,valueIterator:r.valueIterator||!1,iteratorNextv:r.iteratorNextv||!1,iteratorAll:r.iteratorAll||!1,status:r.status||!1,createIfMissing:r.createIfMissing||!1,errorIfExists:r.errorIfExists||!1,deferredOpen:r.deferredOpen||!1,promises:r.promises||!1,streams:r.streams||!1,encodings:Object.assign({},r.encodings),events:Object.assign({},r.events),additionalMethods:Object.assign({},r.additionalMethods)})}});var Ai=v((Ihe,Wx)=>{"use strict";Wx.exports=class extends Error{constructor(e,r){super(e||""),typeof r=="object"&&r!==null&&(r.code&&(this.code=String(r.code)),r.expected&&(this.expected=!0),r.transient&&(this.transient=!0),r.cause&&(this.cause=r.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Gx=v(kh=>{"use strict";kh.byteLength=q7;kh.toByteArray=U7;kh.fromByteArray=H7;var ns=[],Zn=[],j7=typeof Uint8Array<"u"?Uint8Array:Array,Gb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Za=0,zx=Gb.length;Za<zx;++Za)ns[Za]=Gb[Za],Zn[Gb.charCodeAt(Za)]=Za;var Za,zx;Zn[45]=62;Zn[95]=63;function Jx(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function q7(t){var e=Jx(t),r=e[0],n=e[1];return(r+n)*3/4-n}function L7(t,e,r){return(e+r)*3/4-r}function U7(t){var e,r=Jx(t),n=r[0],s=r[1],i=new j7(L7(t,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)e=Zn[t.charCodeAt(u)]<<18|Zn[t.charCodeAt(u+1)]<<12|Zn[t.charCodeAt(u+2)]<<6|Zn[t.charCodeAt(u+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=Zn[t.charCodeAt(u)]<<2|Zn[t.charCodeAt(u+1)]>>4,i[o++]=e&255),s===1&&(e=Zn[t.charCodeAt(u)]<<10|Zn[t.charCodeAt(u+1)]<<4|Zn[t.charCodeAt(u+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function V7(t){return ns[t>>18&63]+ns[t>>12&63]+ns[t>>6&63]+ns[t&63]}function K7(t,e,r){for(var n,s=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(t[i+2]&255),s.push(V7(n));return s.join("")}function H7(t){for(var e,r=t.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(K7(t,o,o+i>a?a:o+i));return n===1?(e=t[r-1],s.push(ns[e>>2]+ns[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],s.push(ns[e>>10]+ns[e>>4&63]+ns[e<<2&63]+"=")),s.join("")}});var Xx=v(Xb=>{Xb.read=function(t,e,r,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,c=u>>1,l=-7,d=r?s-1:0,p=r?-1:1,f=t[e+d];for(d+=p,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=i*256+t[e+d],d+=p,l-=8);for(o=i&(1<<-l)-1,i>>=-l,l+=n;l>0;o=o*256+t[e+d],d+=p,l-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-c}return(f?-1:1)*o*Math.pow(2,i-n)};Xb.write=function(t,e,r,n,s,i){var o,a,u,c=i*8-s-1,l=(1<<c)-1,d=l>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,h=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=p/u:e+=p*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=l?(a=0,o=l):o+d>=1?(a=(e*u-1)*Math.pow(2,s),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,s),o=0));s>=8;t[r+f]=a&255,f+=h,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;t[r+f]=o&255,f+=h,o/=256,c-=8);t[r+f-h]|=y*128}});var Qn=v(Nc=>{"use strict";var Yb=Gx(),Rc=Xx(),Yx=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Nc.Buffer=H;Nc.SlowBuffer=Y7;Nc.INSPECT_MAX_BYTES=50;var Rh=2147483647;Nc.kMaxLength=Rh;H.TYPED_ARRAY_SUPPORT=W7();!H.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function W7(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(H.prototype,"parent",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.buffer}});Object.defineProperty(H.prototype,"offset",{enumerable:!0,get:function(){if(H.isBuffer(this))return this.byteOffset}});function Zs(t){if(t>Rh)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,H.prototype),e}function H(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return tv(t)}return tC(t,e,r)}H.poolSize=8192;function tC(t,e,r){if(typeof t=="string")return J7(t,e);if(ArrayBuffer.isView(t))return G7(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(is(t,ArrayBuffer)||t&&is(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(is(t,SharedArrayBuffer)||t&&is(t.buffer,SharedArrayBuffer)))return Qb(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return H.from(n,e,r);let s=X7(t);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return H.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}H.from=function(t,e,r){return tC(t,e,r)};Object.setPrototypeOf(H.prototype,Uint8Array.prototype);Object.setPrototypeOf(H,Uint8Array);function rC(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function z7(t,e,r){return rC(t),t<=0?Zs(t):e!==void 0?typeof r=="string"?Zs(t).fill(e,r):Zs(t).fill(e):Zs(t)}H.alloc=function(t,e,r){return z7(t,e,r)};function tv(t){return rC(t),Zs(t<0?0:rv(t)|0)}H.allocUnsafe=function(t){return tv(t)};H.allocUnsafeSlow=function(t){return tv(t)};function J7(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!H.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=nC(t,e)|0,n=Zs(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}function Zb(t){let e=t.length<0?0:rv(t.length)|0,r=Zs(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function G7(t){if(is(t,Uint8Array)){let e=new Uint8Array(t);return Qb(e.buffer,e.byteOffset,e.byteLength)}return Zb(t)}function Qb(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,H.prototype),n}function X7(t){if(H.isBuffer(t)){let e=rv(t.length)|0,r=Zs(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||iv(t.length)?Zs(0):Zb(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Zb(t.data)}function rv(t){if(t>=Rh)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Rh.toString(16)+" bytes");return t|0}function Y7(t){return+t!=t&&(t=0),H.alloc(+t)}H.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==H.prototype};H.compare=function(e,r){if(is(e,Uint8Array)&&(e=H.from(e,e.offset,e.byteLength)),is(r,Uint8Array)&&(r=H.from(r,r.offset,r.byteLength)),!H.isBuffer(e)||!H.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,s=r.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==r[i]){n=e[i],s=r[i];break}return n<s?-1:s<n?1:0};H.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};H.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return H.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let s=H.allocUnsafe(r),i=0;for(n=0;n<e.length;++n){let o=e[n];if(is(o,Uint8Array))i+o.length>s.length?(H.isBuffer(o)||(o=H.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(H.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function nC(t,e){if(H.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||is(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return ev(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return fC(t).length;default:if(s)return n?-1:ev(t).length;e=(""+e).toLowerCase(),s=!0}}H.byteLength=nC;function Z7(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return uL(this,e,r);case"utf8":case"utf-8":return sC(this,e,r);case"ascii":return oL(this,e,r);case"latin1":case"binary":return aL(this,e,r);case"base64":return iL(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cL(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}H.prototype._isBuffer=!0;function Qa(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}H.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)Qa(this,r,r+1);return this};H.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)Qa(this,r,r+3),Qa(this,r+1,r+2);return this};H.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)Qa(this,r,r+7),Qa(this,r+1,r+6),Qa(this,r+2,r+5),Qa(this,r+3,r+4);return this};H.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?sC(this,0,e):Z7.apply(this,arguments)};H.prototype.toLocaleString=H.prototype.toString;H.prototype.equals=function(e){if(!H.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:H.compare(this,e)===0};H.prototype.inspect=function(){let e="",r=Nc.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Yx&&(H.prototype[Yx]=H.prototype.inspect);H.prototype.compare=function(e,r,n,s,i){if(is(e,Uint8Array)&&(e=H.from(e,e.offset,e.byteLength)),!H.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),r<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&r>=n)return 0;if(s>=i)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;let o=i-s,a=n-r,u=Math.min(o,a),c=this.slice(s,i),l=e.slice(r,n);for(let d=0;d<u;++d)if(c[d]!==l[d]){o=c[d],a=l[d];break}return o<a?-1:a<o?1:0};function iC(t,e,r,n,s){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,iv(r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof e=="string"&&(e=H.from(e,n)),H.isBuffer(e))return e.length===0?-1:Zx(t,e,r,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Zx(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function Zx(t,e,r,n,s){let i=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;i=2,o/=2,a/=2,r/=2}function u(l,d){return i===1?l[d]:l.readUInt16BE(d*i)}let c;if(s){let l=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===a)return l*i}else l!==-1&&(c-=c-l),l=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let l=!0;for(let d=0;d<a;d++)if(u(t,c+d)!==u(e,d)){l=!1;break}if(l)return c}return-1}H.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};H.prototype.indexOf=function(e,r,n){return iC(this,e,r,n,!0)};H.prototype.lastIndexOf=function(e,r,n){return iC(this,e,r,n,!1)};function Q7(t,e,r,n){r=Number(r)||0;let s=t.length-r;n?(n=Number(n),n>s&&(n=s)):n=s;let i=e.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(iv(a))return o;t[r+o]=a}return o}function eL(t,e,r,n){return $h(ev(e,t.length-r),t,r,n)}function tL(t,e,r,n){return $h(pL(e),t,r,n)}function rL(t,e,r,n){return $h(fC(e),t,r,n)}function nL(t,e,r,n){return $h(hL(e,t.length-r),t,r,n)}H.prototype.write=function(e,r,n,s){if(r===void 0)s="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")s=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-r;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return Q7(this,e,r,n);case"utf8":case"utf-8":return eL(this,e,r,n);case"ascii":case"latin1":case"binary":return tL(this,e,r,n);case"base64":return rL(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return nL(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};H.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function iL(t,e,r){return e===0&&r===t.length?Yb.fromByteArray(t):Yb.fromByteArray(t.slice(e,r))}function sC(t,e,r){r=Math.min(t.length,r);let n=[],s=e;for(;s<r;){let i=t[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=r){let u,c,l,d;switch(a){case 1:i<128&&(o=i);break;case 2:u=t[s+1],(u&192)===128&&(d=(i&31)<<6|u&63,d>127&&(o=d));break;case 3:u=t[s+1],c=t[s+2],(u&192)===128&&(c&192)===128&&(d=(i&15)<<12|(u&63)<<6|c&63,d>2047&&(d<55296||d>57343)&&(o=d));break;case 4:u=t[s+1],c=t[s+2],l=t[s+3],(u&192)===128&&(c&192)===128&&(l&192)===128&&(d=(i&15)<<18|(u&63)<<12|(c&63)<<6|l&63,d>65535&&d<1114112&&(o=d))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return sL(n)}var Qx=4096;function sL(t){let e=t.length;if(e<=Qx)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=Qx));return r}function oL(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]&127);return n}function aL(t,e,r){let n="";r=Math.min(t.length,r);for(let s=e;s<r;++s)n+=String.fromCharCode(t[s]);return n}function uL(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let s="";for(let i=e;i<r;++i)s+=mL[t[i]];return s}function cL(t,e,r){let n=t.slice(e,r),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}H.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let s=this.subarray(e,r);return Object.setPrototypeOf(s,H.prototype),s};function Tr(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}H.prototype.readUintLE=H.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return s};H.prototype.readUintBE=H.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tr(e,r,this.length);let s=this[e+--r],i=1;for(;r>0&&(i*=256);)s+=this[e+--r]*i;return s};H.prototype.readUint8=H.prototype.readUInt8=function(e,r){return e=e>>>0,r||Tr(e,1,this.length),this[e]};H.prototype.readUint16LE=H.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||Tr(e,2,this.length),this[e]|this[e+1]<<8};H.prototype.readUint16BE=H.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||Tr(e,2,this.length),this[e]<<8|this[e+1]};H.prototype.readUint32LE=H.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||Tr(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};H.prototype.readUint32BE=H.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||Tr(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};H.prototype.readBigUInt64LE=Jo(function(e){e=e>>>0,$c(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kd(e,this.length-8);let s=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});H.prototype.readBigUInt64BE=Jo(function(e){e=e>>>0,$c(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kd(e,this.length-8);let s=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});H.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tr(e,r,this.length);let s=this[e],i=1,o=0;for(;++o<r&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*r)),s};H.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||Tr(e,r,this.length);let s=r,i=1,o=this[e+--s];for(;s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*r)),o};H.prototype.readInt8=function(e,r){return e=e>>>0,r||Tr(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};H.prototype.readInt16LE=function(e,r){e=e>>>0,r||Tr(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};H.prototype.readInt16BE=function(e,r){e=e>>>0,r||Tr(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};H.prototype.readInt32LE=function(e,r){return e=e>>>0,r||Tr(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};H.prototype.readInt32BE=function(e,r){return e=e>>>0,r||Tr(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};H.prototype.readBigInt64LE=Jo(function(e){e=e>>>0,$c(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kd(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});H.prototype.readBigInt64BE=Jo(function(e){e=e>>>0,$c(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Kd(e,this.length-8);let s=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});H.prototype.readFloatLE=function(e,r){return e=e>>>0,r||Tr(e,4,this.length),Rc.read(this,e,!0,23,4)};H.prototype.readFloatBE=function(e,r){return e=e>>>0,r||Tr(e,4,this.length),Rc.read(this,e,!1,23,4)};H.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||Tr(e,8,this.length),Rc.read(this,e,!0,52,8)};H.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||Tr(e,8,this.length),Rc.read(this,e,!1,52,8)};function _n(t,e,r,n,s,i){if(!H.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}H.prototype.writeUintLE=H.prototype.writeUIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;_n(this,e,r,n,a,0)}let i=1,o=0;for(this[r]=e&255;++o<n&&(i*=256);)this[r+o]=e/i&255;return r+n};H.prototype.writeUintBE=H.prototype.writeUIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;_n(this,e,r,n,a,0)}let i=n-1,o=1;for(this[r+i]=e&255;--i>=0&&(o*=256);)this[r+i]=e/o&255;return r+n};H.prototype.writeUint8=H.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,1,255,0),this[r]=e&255,r+1};H.prototype.writeUint16LE=H.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};H.prototype.writeUint16BE=H.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};H.prototype.writeUint32LE=H.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};H.prototype.writeUint32BE=H.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function oC(t,e,r,n,s){dC(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i,i=i>>8,t[r++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function aC(t,e,r,n,s){dC(e,n,s,t,r,7);let i=Number(e&BigInt(4294967295));t[r+7]=i,i=i>>8,t[r+6]=i,i=i>>8,t[r+5]=i,i=i>>8,t[r+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}H.prototype.writeBigUInt64LE=Jo(function(e,r=0){return oC(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeBigUInt64BE=Jo(function(e,r=0){return aC(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});H.prototype.writeIntLE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);_n(this,e,r,n,u-1,-u)}let i=0,o=1,a=0;for(this[r]=e&255;++i<n&&(o*=256);)e<0&&a===0&&this[r+i-1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};H.prototype.writeIntBE=function(e,r,n,s){if(e=+e,r=r>>>0,!s){let u=Math.pow(2,8*n-1);_n(this,e,r,n,u-1,-u)}let i=n-1,o=1,a=0;for(this[r+i]=e&255;--i>=0&&(o*=256);)e<0&&a===0&&this[r+i+1]!==0&&(a=1),this[r+i]=(e/o>>0)-a&255;return r+n};H.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};H.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};H.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};H.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};H.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||_n(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};H.prototype.writeBigInt64LE=Jo(function(e,r=0){return oC(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});H.prototype.writeBigInt64BE=Jo(function(e,r=0){return aC(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function uC(t,e,r,n,s,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function cC(t,e,r,n,s){return e=+e,r=r>>>0,s||uC(t,e,r,4,34028234663852886e22,-34028234663852886e22),Rc.write(t,e,r,n,23,4),r+4}H.prototype.writeFloatLE=function(e,r,n){return cC(this,e,r,!0,n)};H.prototype.writeFloatBE=function(e,r,n){return cC(this,e,r,!1,n)};function lC(t,e,r,n,s){return e=+e,r=r>>>0,s||uC(t,e,r,8,17976931348623157e292,-17976931348623157e292),Rc.write(t,e,r,n,52,8),r+8}H.prototype.writeDoubleLE=function(e,r,n){return lC(this,e,r,!0,n)};H.prototype.writeDoubleBE=function(e,r,n){return lC(this,e,r,!1,n)};H.prototype.copy=function(e,r,n,s){if(!H.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),r>=e.length&&(r=e.length),r||(r=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-r<s-n&&(s=e.length-r+n);let i=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),r),i};H.prototype.fill=function(e,r,n,s){if(typeof e=="string"){if(typeof r=="string"?(s=r,r=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!H.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let o=e.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=r;i<n;++i)this[i]=e;else{let o=H.isBuffer(e)?e:H.from(e,s),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-r;++i)this[i+r]=o[i%a]}return this};var kc={};function nv(t,e,r){kc[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}nv("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);nv("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);nv("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,s=r;return Number.isInteger(r)&&Math.abs(r)>2**32?s=eC(String(r)):typeof r=="bigint"&&(s=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(s=eC(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function eC(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function lL(t,e,r){$c(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Kd(e,t.length-(r+1))}function dC(t,e,r,n,s,i){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw i>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:a=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new kc.ERR_OUT_OF_RANGE("value",a,t)}lL(n,s,i)}function $c(t,e){if(typeof t!="number")throw new kc.ERR_INVALID_ARG_TYPE(e,"number",t)}function Kd(t,e,r){throw Math.floor(t)!==t?($c(t,r),new kc.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new kc.ERR_BUFFER_OUT_OF_BOUNDS:new kc.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var dL=/[^+/0-9A-Za-z-_]/g;function fL(t){if(t=t.split("=")[0],t=t.trim().replace(dL,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function ev(t,e){e=e||1/0;let r,n=t.length,s=null,i=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return i}function pL(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function hL(t,e){let r,n,s,i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,s=r%256,i.push(s),i.push(n);return i}function fC(t){return Yb.toByteArray(fL(t))}function $h(t,e,r,n){let s;for(s=0;s<n&&!(s+r>=e.length||s>=t.length);++s)e[s+r]=t[s];return s}function is(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function iv(t){return t!==t}var mL=function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let s=0;s<16;++s)e[n+s]=t[r]+t[s]}return e}();function Jo(t){return typeof BigInt>"u"?yL:t}function yL(){throw new Error("BigInt not supported")}});var ov=v((Mhe,pC)=>{"use strict";var sv=null;pC.exports=function(){return sv===null&&(sv={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),sv}});var cv=v(hC=>{"use strict";var av=Ai(),gL=new Set(["buffer","view","utf8"]),uv=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!gL.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new av(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new av(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new av(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};hC.Encoding=uv});var pv=v(Nh=>{"use strict";var{Buffer:dv}=Qn()||{},{Encoding:fv}=cv(),bL=ov(),Hd=class extends fv{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new Wd({encode:this.encode,decode:e=>this.decode(dv.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Wd=class extends fv{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new Hd({encode:e=>{let r=this.encode(e);return dv.from(r.buffer,r.byteOffset,r.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},lv=class extends fv{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new Hd({encode:e=>dv.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:r}=bL();return new Wd({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(r.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Nh.BufferFormat=Hd;Nh.ViewFormat=Wd;Nh.UTF8Format=lv});var bC=v(eu=>{"use strict";var{Buffer:tn}=Qn()||{Buffer:{isBuffer:()=>!1}},{textEncoder:yC,textDecoder:mC}=ov()(),{BufferFormat:zd,ViewFormat:hv,UTF8Format:gC}=pv(),Mh=t=>t;eu.utf8=new gC({encode:function(t){return tn.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?mC.decode(t):String(t)},decode:Mh,name:"utf8",createViewTranscoder(){return new hv({encode:function(t){return ArrayBuffer.isView(t)?t:yC.encode(t)},decode:function(t){return mC.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new zd({encode:function(t){return tn.isBuffer(t)?t:ArrayBuffer.isView(t)?tn.from(t.buffer,t.byteOffset,t.byteLength):tn.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});eu.json=new gC({encode:JSON.stringify,decode:JSON.parse,name:"json"});eu.buffer=new zd({encode:function(t){return tn.isBuffer(t)?t:ArrayBuffer.isView(t)?tn.from(t.buffer,t.byteOffset,t.byteLength):tn.from(String(t),"utf8")},decode:Mh,name:"buffer",createViewTranscoder(){return new hv({encode:function(t){return ArrayBuffer.isView(t)?t:tn.from(String(t),"utf8")},decode:function(t){return tn.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});eu.view=new hv({encode:function(t){return ArrayBuffer.isView(t)?t:yC.encode(t)},decode:Mh,name:"view",createBufferTranscoder(){return new zd({encode:function(t){return tn.isBuffer(t)?t:ArrayBuffer.isView(t)?tn.from(t.buffer,t.byteOffset,t.byteLength):tn.from(String(t),"utf8")},decode:Mh,name:`${this.name}+buffer`})}});eu.hex=new zd({encode:function(t){return tn.isBuffer(t)?t:tn.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});eu.base64=new zd({encode:function(t){return tn.isBuffer(t)?t:tn.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"})});var EC=v(wC=>{"use strict";var vC=Ai(),qh=bC(),{Encoding:vL}=cv(),{BufferFormat:wL,ViewFormat:EL,UTF8Format:_L}=pv(),Jd=Symbol("formats"),jh=Symbol("encodings"),SL=new Set(["buffer","view","utf8"]),mv=class{constructor(e){if(Array.isArray(e)){if(!e.every(r=>SL.has(r)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[jh]=new Map,this[Jd]=new Set(e);for(let r in qh)try{this.encoding(r)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[jh].values()))}encoding(e){let r=this[jh].get(e);if(r===void 0){if(typeof e=="string"&&e!==""){if(r=CL[e],!r)throw new vC(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");r=DL(e)}let{name:n,format:s}=r;if(!this[Jd].has(s))if(this[Jd].has("view"))r=r.createViewTranscoder();else if(this[Jd].has("buffer"))r=r.createBufferTranscoder();else if(this[Jd].has("utf8"))r=r.createUTF8Transcoder();else throw new vC(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let i of[e,n,r.name,r.commonName])this[jh].set(i,r)}return r}};wC.Transcoder=mv;function DL(t){if(t instanceof vL)return t;let e="type"in t&&typeof t.type=="string"?t.type:void 0,r=t.name||e||`anonymous-${PL++}`;switch(AL(t)){case"view":return new EL({...t,name:r});case"utf8":return new _L({...t,name:r});case"buffer":return new wL({...t,name:r});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function AL(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}var xL={binary:qh.buffer,"utf-8":qh.utf8},CL={...qh,...xL},PL=0});var Gd=v((Vhe,yv)=>{"use strict";var Mc=typeof Reflect=="object"?Reflect:null,_C=Mc&&typeof Mc.apply=="function"?Mc.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Lh;Mc&&typeof Mc.ownKeys=="function"?Lh=Mc.ownKeys:Object.getOwnPropertySymbols?Lh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Lh=function(e){return Object.getOwnPropertyNames(e)};function OL(t){console&&console.warn&&console.warn(t)}var DC=Number.isNaN||function(e){return e!==e};function It(){It.init.call(this)}yv.exports=It;yv.exports.once=IL;It.EventEmitter=It;It.prototype._events=void 0;It.prototype._eventsCount=0;It.prototype._maxListeners=void 0;var SC=10;function Uh(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(It,"defaultMaxListeners",{enumerable:!0,get:function(){return SC},set:function(t){if(typeof t!="number"||t<0||DC(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");SC=t}});It.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};It.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||DC(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function AC(t){return t._maxListeners===void 0?It.defaultMaxListeners:t._maxListeners}It.prototype.getMaxListeners=function(){return AC(this)};It.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(u===void 0)return!1;if(typeof u=="function")_C(u,this,r);else for(var c=u.length,l=BC(u,c),n=0;n<c;++n)_C(l[n],this,r);return!0};function xC(t,e,r,n){var s,i,o;if(Uh(r),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),i=t._events),o=i[e]),o===void 0)o=i[e]=r,++t._eventsCount;else if(typeof o=="function"?o=i[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),s=AC(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,OL(a)}return t}It.prototype.addListener=function(e,r){return xC(this,e,r,!1)};It.prototype.on=It.prototype.addListener;It.prototype.prependListener=function(e,r){return xC(this,e,r,!0)};function BL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function CC(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},s=BL.bind(n);return s.listener=r,n.wrapFn=s,s}It.prototype.once=function(e,r){return Uh(r),this.on(e,CC(this,e,r)),this};It.prototype.prependOnceListener=function(e,r){return Uh(r),this.prependListener(e,CC(this,e,r)),this};It.prototype.removeListener=function(e,r){var n,s,i,o,a;if(Uh(r),s=this._events,s===void 0)return this;if(n=s[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():TL(n,i),n.length===1&&(s[e]=n[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};It.prototype.off=It.prototype.removeListener;It.prototype.removeAllListeners=function(e){var r,n,s;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var i=Object.keys(n),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(s=r.length-1;s>=0;s--)this.removeListener(e,r[s]);return this};function PC(t,e,r){var n=t._events;if(n===void 0)return[];var s=n[e];return s===void 0?[]:typeof s=="function"?r?[s.listener||s]:[s]:r?FL(s):BC(s,s.length)}It.prototype.listeners=function(e){return PC(this,e,!0)};It.prototype.rawListeners=function(e){return PC(this,e,!1)};It.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):OC.call(t,e)};It.prototype.listenerCount=OC;function OC(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}It.prototype.eventNames=function(){return this._eventsCount>0?Lh(this._events):[]};function BC(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function TL(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function FL(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function IL(t,e){return new Promise(function(r,n){function s(o){t.removeListener(e,i),n(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),r([].slice.call(arguments))}TC(t,e,i,{once:!0}),e!=="error"&&kL(t,s,{once:!0})})}function kL(t,e,r){typeof t.on=="function"&&TC(t,"error",e,r)}function TC(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){n.once&&t.removeEventListener(e,s),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var IC=v((Khe,FC)=>{FC.exports=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t)});var Xd=v(gv=>{"use strict";var kC=IC();gv.fromCallback=function(t,e){if(t===void 0){var r=new Promise(function(n,s){t=function(i,o){i?s(i):n(o)}});t[e!==void 0?e:"promise"]=r}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};gv.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(r){kC(()=>e(null,r))}).catch(function(r){kC(()=>e(r))})}});var Vh=v(bv=>{"use strict";bv.getCallback=function(t,e){return typeof t=="function"?t:e};bv.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}}});var ea=v(zh=>{"use strict";var{fromCallback:vv}=Xd(),Mn=Ai(),{getOptions:wv,getCallback:RC}=Vh(),tu=Symbol("promise"),jc=Symbol("callback"),ss=Symbol("working"),ru=Symbol("handleOne"),Qs=Symbol("handleMany"),Ev=Symbol("autoClose"),Zo=Symbol("finishWork"),os=Symbol("returnMany"),Go=Symbol("closing"),Yd=Symbol("handleClose"),Kh=Symbol("closed"),Zd=Symbol("closeCallbacks"),Yo=Symbol("keyEncoding"),nu=Symbol("valueEncoding"),_v=Symbol("abortOnClose"),Hh=Symbol("legacy"),Sv=Symbol("keys"),Dv=Symbol("values"),Xo=Symbol("limit"),ei=Symbol("count"),Wh=Object.freeze({}),RL=()=>{},$C=!1,Qd=class{constructor(e,r,n){if(typeof e!="object"||e===null){let s=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${s}`)}if(typeof r!="object"||r===null)throw new TypeError("The second argument must be an options object");this[Kh]=!1,this[Zd]=[],this[ss]=!1,this[Go]=!1,this[Ev]=!1,this[jc]=null,this[ru]=this[ru].bind(this),this[Qs]=this[Qs].bind(this),this[Yd]=this[Yd].bind(this),this[Yo]=r[Yo],this[nu]=r[nu],this[Hh]=n,this[Xo]=Number.isInteger(r.limit)&&r.limit>=0?r.limit:1/0,this[ei]=0,this[_v]=!!r.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[ei]}get limit(){return this[Xo]}next(e){let r;if(e===void 0)r=new Promise((n,s)=>{e=(i,o,a)=>{i?s(i):this[Hh]?o===void 0&&a===void 0?n():n([o,a]):n(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[Go]?this.nextTick(e,new Mn("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ss]?this.nextTick(e,new Mn("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ss]=!0,this[jc]=e,this[ei]>=this[Xo]?this.nextTick(this[ru],null):this._next(this[ru])),r}_next(e){this.nextTick(e)}nextv(e,r,n){return n=RC(r,n),n=vv(n,tu),r=wv(r,Wh),Number.isInteger(e)?(this[Go]?this.nextTick(n,new Mn("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ss]?this.nextTick(n,new Mn("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[Xo]<1/0&&(e=Math.min(e,this[Xo]-this[ei])),this[ss]=!0,this[jc]=n,e<=0?this.nextTick(this[Qs],null,[]):this._nextv(e,r,this[Qs])),n[tu]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[tu])}_nextv(e,r,n){let s=[],i=(o,a,u)=>{if(o)return n(o);if(this[Hh]?a===void 0&&u===void 0:a===void 0)return n(null,s);s.push(this[Hh]?[a,u]:a),s.length===e?n(null,s):this._next(i)};this._next(i)}all(e,r){return r=RC(e,r),r=vv(r,tu),e=wv(e,Wh),this[Go]?this.nextTick(r,new Mn("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[ss]?this.nextTick(r,new Mn("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[ss]=!0,this[jc]=r,this[Ev]=!0,this[ei]>=this[Xo]?this.nextTick(this[Qs],null,[]):this._all(e,this[Qs])),r[tu]}_all(e,r){let n=this[ei],s=[],i=()=>{let a=this[Xo]<1/0?Math.min(1e3,this[Xo]-n):1e3;a<=0?this.nextTick(r,null,s):this._nextv(a,Wh,o)},o=(a,u)=>{a?r(a):u.length===0?r(null,s):(s.push.apply(s,u),n+=u.length,i())};i()}[Zo](){let e=this[jc];return this[_v]&&e===null?RL:(this[ss]=!1,this[jc]=null,this[Go]&&this._close(this[Yd]),e)}[os](e,r,n){this[Ev]?this.close(e.bind(null,r,n)):e(r,n)}seek(e,r){if(r=wv(r,Wh),!this[Go]){if(this[ss])throw new Mn("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(r.keyEncoding||this[Yo]),s=n.format;r.keyEncoding!==s&&(r={...r,keyEncoding:s});let i=this.db.prefixKey(n.encode(e),s);this._seek(i,r)}}}_seek(e,r){throw new Mn("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=vv(e,tu),this[Kh]?this.nextTick(e):this[Go]?this[Zd].push(e):(this[Go]=!0,this[Zd].push(e),this[ss]?this[_v]&&this[Zo]()(new Mn("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Yd])),e[tu]}_close(e){this.nextTick(e)}[Yd](){this[Kh]=!0,this.db.detachResource(this);let e=this[Zd];this[Zd]=[];for(let r of e)r()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Kh]||await this.close()}}},qc=class extends Qd{constructor(e,r){super(e,r,!0),this[Sv]=r.keys!==!1,this[Dv]=r.values!==!1}[ru](e,r,n){let s=this[Zo]();if(e)return s(e);try{r=this[Sv]&&r!==void 0?this[Yo].decode(r):void 0,n=this[Dv]&&n!==void 0?this[nu].decode(n):void 0}catch(i){return s(new Qo("entry",i))}r===void 0&&n===void 0||this[ei]++,s(null,r,n)}[Qs](e,r){let n=this[Zo]();if(e)return this[os](n,e);try{for(let s of r){let i=s[0],o=s[1];s[0]=this[Sv]&&i!==void 0?this[Yo].decode(i):void 0,s[1]=this[Dv]&&o!==void 0?this[nu].decode(o):void 0}}catch(s){return this[os](n,new Qo("entries",s))}this[ei]+=r.length,this[os](n,null,r)}end(e){return!$C&&typeof console<"u"&&($C=!0,console.warn(new Mn("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},Av=class extends Qd{constructor(e,r){super(e,r,!1)}[ru](e,r){let n=this[Zo]();if(e)return n(e);try{r=r!==void 0?this[Yo].decode(r):void 0}catch(s){return n(new Qo("key",s))}r!==void 0&&this[ei]++,n(null,r)}[Qs](e,r){let n=this[Zo]();if(e)return this[os](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[Yo].decode(i):void 0}}catch(s){return this[os](n,new Qo("keys",s))}this[ei]+=r.length,this[os](n,null,r)}},xv=class extends Qd{constructor(e,r){super(e,r,!1)}[ru](e,r){let n=this[Zo]();if(e)return n(e);try{r=r!==void 0?this[nu].decode(r):void 0}catch(s){return n(new Qo("value",s))}r!==void 0&&this[ei]++,n(null,r)}[Qs](e,r){let n=this[Zo]();if(e)return this[os](n,e);try{for(let s=0;s<r.length;s++){let i=r[s];r[s]=i!==void 0?this[nu].decode(i):void 0}}catch(s){return this[os](n,new Qo("values",s))}this[ei]+=r.length,this[os](n,null,r)}},Qo=class extends Mn{constructor(e,r){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:r})}};for(let t of["_ended property","_nexting property","_end method"])Object.defineProperty(qc.prototype,t.split(" ")[0],{get(){throw new Mn(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Mn(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});qc.keyEncoding=Yo;qc.valueEncoding=nu;zh.AbstractIterator=qc;zh.AbstractKeyIterator=Av;zh.AbstractValueIterator=xv});var NC=v(Cv=>{"use strict";var{AbstractKeyIterator:$L,AbstractValueIterator:NL}=ea(),iu=Symbol("iterator"),ef=Symbol("callback"),Lc=Symbol("handleOne"),su=Symbol("handleMany"),tf=class extends $L{constructor(e,r){super(e,r),this[iu]=e.iterator({...r,keys:!0,values:!1}),this[Lc]=this[Lc].bind(this),this[su]=this[su].bind(this)}},Jh=class extends NL{constructor(e,r){super(e,r),this[iu]=e.iterator({...r,keys:!1,values:!0}),this[Lc]=this[Lc].bind(this),this[su]=this[su].bind(this)}};for(let t of[tf,Jh]){let e=t===tf,r=e?n=>n[0]:n=>n[1];t.prototype._next=function(n){this[ef]=n,this[iu].next(this[Lc])},t.prototype[Lc]=function(n,s,i){let o=this[ef];n?o(n):o(null,e?s:i)},t.prototype._nextv=function(n,s,i){this[ef]=i,this[iu].nextv(n,s,this[su])},t.prototype._all=function(n,s){this[ef]=s,this[iu].all(n,this[su])},t.prototype[su]=function(n,s){let i=this[ef];n?i(n):i(null,s.map(r))},t.prototype._seek=function(n,s){this[iu].seek(n,s)},t.prototype._close=function(n){this[iu].close(n)}}Cv.DefaultKeyIterator=tf;Cv.DefaultValueIterator=Jh});var MC=v(em=>{"use strict";var{AbstractIterator:ML,AbstractKeyIterator:jL,AbstractValueIterator:qL}=ea(),Pv=Ai(),Sn=Symbol("nut"),Zh=Symbol("undefer"),Qh=Symbol("factory"),Gh=class extends ML{constructor(e,r){super(e,r),this[Sn]=null,this[Qh]=()=>e.iterator(r),this.db.defer(()=>this[Zh]())}},Xh=class extends jL{constructor(e,r){super(e,r),this[Sn]=null,this[Qh]=()=>e.keys(r),this.db.defer(()=>this[Zh]())}},Yh=class extends qL{constructor(e,r){super(e,r),this[Sn]=null,this[Qh]=()=>e.values(r),this.db.defer(()=>this[Zh]())}};for(let t of[Gh,Xh,Yh])t.prototype[Zh]=function(){this.db.status==="open"&&(this[Sn]=this[Qh]())},t.prototype._next=function(e){this[Sn]!==null?this[Sn].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new Pv("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,r,n){this[Sn]!==null?this[Sn].nextv(e,r,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,r,n)):this.nextTick(n,new Pv("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,r){this[Sn]!==null?this[Sn].all(r):this.db.status==="opening"?this.db.defer(()=>this._all(e,r)):this.nextTick(r,new Pv("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,r){this[Sn]!==null?this[Sn]._seek(e,r):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,r))},t.prototype._close=function(e){this[Sn]!==null?this[Sn].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};em.DeferredIterator=Gh;em.DeferredKeyIterator=Xh;em.DeferredValueIterator=Yh});var Bv=v(qC=>{"use strict";var{fromCallback:jC}=Xd(),tm=Ai(),{getCallback:LL,getOptions:UL}=Vh(),rm=Symbol("promise"),ti=Symbol("status"),Uc=Symbol("operations"),rf=Symbol("finishClose"),Vc=Symbol("closeCallbacks"),Ov=class{constructor(e){if(typeof e!="object"||e===null){let r=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${r}`)}this[Uc]=[],this[Vc]=[],this[ti]="open",this[rf]=this[rf].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[Uc].length}put(e,r,n){if(this[ti]!=="open")throw new tm("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let s=this.db._checkKey(e)||this.db._checkValue(r);if(s)throw s;let i=n&&n.sublevel!=null?n.sublevel:this.db,o=n,a=i.keyEncoding(n&&n.keyEncoding),u=i.valueEncoding(n&&n.valueEncoding),c=a.format;n={...n,keyEncoding:c,valueEncoding:u.format},i!==this.db&&(n.sublevel=null);let l=i.prefixKey(a.encode(e),c),d=u.encode(r);return this._put(l,d,n),this[Uc].push({...o,type:"put",key:e,value:r}),this}_put(e,r,n){}del(e,r){if(this[ti]!=="open")throw new tm("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let s=r&&r.sublevel!=null?r.sublevel:this.db,i=r,o=s.keyEncoding(r&&r.keyEncoding),a=o.format;return r={...r,keyEncoding:a},s!==this.db&&(r.sublevel=null),this._del(s.prefixKey(o.encode(e),a),r),this[Uc].push({...i,type:"del",key:e}),this}_del(e,r){}clear(){if(this[ti]!=="open")throw new tm("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Uc]=[],this}_clear(){}write(e,r){return r=LL(e,r),r=jC(r,rm),e=UL(e),this[ti]!=="open"?this.nextTick(r,new tm("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(r):(this[ti]="writing",this._write(e,n=>{this[ti]="closing",this[Vc].push(()=>r(n)),n||this.db.emit("batch",this[Uc]),this._close(this[rf])})),r[rm]}_write(e,r){}close(e){return e=jC(e,rm),this[ti]==="closing"?this[Vc].push(e):this[ti]==="closed"?this.nextTick(e):(this[Vc].push(e),this[ti]!=="writing"&&(this[ti]="closing",this._close(this[rf]))),e[rm]}_close(e){this.nextTick(e)}[rf](){this[ti]="closed",this.db.detachResource(this);let e=this[Vc];this[Vc]=[];for(let r of e)r()}};qC.AbstractChainedBatch=Ov});var UC=v(LC=>{"use strict";var{AbstractChainedBatch:VL}=Bv(),KL=Ai(),Kc=Symbol("encoded"),Tv=class extends VL{constructor(e){super(e),this[Kc]=[]}_put(e,r,n){this[Kc].push({...n,type:"put",key:e,value:r})}_del(e,r){this[Kc].push({...r,type:"del",key:e})}_clear(){this[Kc]=[]}_write(e,r){this.db.status==="opening"?this.db.defer(()=>this._write(e,r)):this.db.status==="open"?this[Kc].length===0?this.nextTick(r):this.db._batch(this[Kc],e,r):this.nextTick(r,new KL("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};LC.DefaultChainedBatch=Tv});var HC=v((Zhe,KC)=>{"use strict";var VC=Ai(),HL=Object.prototype.hasOwnProperty,WL=new Set(["lt","lte","gt","gte"]);KC.exports=function(t,e){let r={};for(let n in t)if(HL.call(t,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new VC(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new VC("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});WL.has(n)?r[n]=e.encode(t[n]):r[n]=t[n]}return r.reverse=!!r.reverse,r.limit=Number.isInteger(r.limit)&&r.limit>=0?r.limit:-1,r}});var Fv=v((Qhe,zC)=>{var WC;zC.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(WC||(WC=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0))});var XC=v((eme,GC)=>{"use strict";var JC=Fv();GC.exports=function(t,...e){e.length===0?JC(t):JC(()=>t(...e))}});var YC=v(nm=>{"use strict";var{AbstractIterator:zL,AbstractKeyIterator:JL,AbstractValueIterator:GL}=ea(),Hc=Symbol("unfix"),xi=Symbol("iterator"),ou=Symbol("handleOne"),ta=Symbol("handleMany"),eo=Symbol("callback"),nf=class extends zL{constructor(e,r,n,s){super(e,r),this[xi]=n,this[Hc]=s,this[ou]=this[ou].bind(this),this[ta]=this[ta].bind(this),this[eo]=null}[ou](e,r,n){let s=this[eo];if(e)return s(e);r!==void 0&&(r=this[Hc](r)),s(e,r,n)}[ta](e,r){let n=this[eo];if(e)return n(e);for(let s of r){let i=s[0];i!==void 0&&(s[0]=this[Hc](i))}n(e,r)}},sf=class extends JL{constructor(e,r,n,s){super(e,r),this[xi]=n,this[Hc]=s,this[ou]=this[ou].bind(this),this[ta]=this[ta].bind(this),this[eo]=null}[ou](e,r){let n=this[eo];if(e)return n(e);r!==void 0&&(r=this[Hc](r)),n(e,r)}[ta](e,r){let n=this[eo];if(e)return n(e);for(let s=0;s<r.length;s++){let i=r[s];i!==void 0&&(r[s]=this[Hc](i))}n(e,r)}},of=class extends GL{constructor(e,r,n){super(e,r),this[xi]=n}};for(let t of[nf,sf])t.prototype._next=function(e){this[eo]=e,this[xi].next(this[ou])},t.prototype._nextv=function(e,r,n){this[eo]=n,this[xi].nextv(e,r,this[ta])},t.prototype._all=function(e,r){this[eo]=r,this[xi].all(e,this[ta])};for(let t of[of])t.prototype._next=function(e){this[xi].next(e)},t.prototype._nextv=function(e,r,n){this[xi].nextv(e,r,n)},t.prototype._all=function(e,r){this[xi].all(e,r)};for(let t of[nf,sf,of])t.prototype._seek=function(e,r){this[xi].seek(e,r)},t.prototype._close=function(e){this[xi].close(e)};nm.AbstractSublevelIterator=nf;nm.AbstractSublevelKeyIterator=sf;nm.AbstractSublevelValueIterator=of});var tP=v((rme,eP)=>{"use strict";var Iv=Ai(),{Buffer:$v}=Qn()||{},{AbstractSublevelIterator:XL,AbstractSublevelKeyIterator:YL,AbstractSublevelValueIterator:ZL}=YC(),to=Symbol("prefix"),ZC=Symbol("upperBound"),af=Symbol("prefixRange"),jn=Symbol("parent"),kv=Symbol("unfix"),QC=new TextEncoder,QL={separator:"!"};eP.exports=function({AbstractLevel:t}){class e extends t{static defaults(n){if(typeof n=="string")throw new Iv("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new Iv("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?QL:n.separator?n:{...n,separator:"!"}}constructor(n,s,i){let{separator:o,manifest:a,...u}=e.defaults(i);s=tU(s,o);let c=o.charCodeAt(0)+1,l=n[jn]||n;if(!QC.encode(s).every(f=>f>c&&f<127))throw new Iv(`Prefix must use bytes > ${c} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(eU(l,a),u);let d=(n.prefix||"")+o+s+o,p=d.slice(0,-1)+String.fromCharCode(c);this[jn]=l,this[to]=new im(d),this[ZC]=new im(p),this[kv]=new Nv,this.nextTick=l.nextTick}prefixKey(n,s){if(s==="utf8")return this[to].utf8+n;if(n.byteLength===0)return this[to][s];if(s==="view"){let i=this[to].view,o=new Uint8Array(i.byteLength+n.byteLength);return o.set(i,0),o.set(n,i.byteLength),o}else{let i=this[to].buffer;return $v.concat([i,n],i.byteLength+n.byteLength)}}[af](n,s){n.gte!==void 0?n.gte=this.prefixKey(n.gte,s):n.gt!==void 0?n.gt=this.prefixKey(n.gt,s):n.gte=this[to][s],n.lte!==void 0?n.lte=this.prefixKey(n.lte,s):n.lt!==void 0?n.lt=this.prefixKey(n.lt,s):n.lte=this[ZC][s]}get prefix(){return this[to].utf8}get db(){return this[jn]}_open(n,s){this[jn].open({passive:!0},s)}_put(n,s,i,o){this[jn].put(n,s,i,o)}_get(n,s,i){this[jn].get(n,s,i)}_getMany(n,s,i){this[jn].getMany(n,s,i)}_del(n,s,i){this[jn].del(n,s,i)}_batch(n,s,i){this[jn].batch(n,s,i)}_clear(n,s){this[af](n,n.keyEncoding),this[jn].clear(n,s)}_iterator(n){this[af](n,n.keyEncoding);let s=this[jn].iterator(n),i=this[kv].get(this[to].utf8.length,n.keyEncoding);return new XL(this,n,s,i)}_keys(n){this[af](n,n.keyEncoding);let s=this[jn].keys(n),i=this[kv].get(this[to].utf8.length,n.keyEncoding);return new YL(this,n,s,i)}_values(n){this[af](n,n.keyEncoding);let s=this[jn].values(n);return new ZL(this,n,s)}}return{AbstractSublevel:e}};var eU=function(t,e){return{...t.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:Rv(t,"utf8"),buffer:Rv(t,"buffer"),view:Rv(t,"view")}}},Rv=function(t,e){return t.supports.encodings[e]?t.keyEncoding(e).name===e:!1},im=class{constructor(e){this.utf8=e,this.view=QC.encode(e),this.buffer=$v?$v.from(this.view.buffer,0,this.view.byteLength):{}}},Nv=class{constructor(){this.cache=new Map}get(e,r){let n=this.cache.get(r);return n===void 0&&(r==="view"?n=(function(s,i){return i.subarray(s)}).bind(null,e):n=(function(s,i){return i.slice(s)}).bind(null,e),this.cache.set(r,n)),n}},tU=function(t,e){let r=0,n=t.length;for(;r<n&&t[r]===e;)r++;for(;n>r&&t[n-1]===e;)n--;return t.slice(r,n)}});var Uv=v(Lv=>{"use strict";var{supports:rU}=Hx(),{Transcoder:nU}=EC(),{EventEmitter:iU}=Gd(),{fromCallback:ra}=Xd(),Ci=Ai(),{AbstractIterator:au}=ea(),{DefaultKeyIterator:sU,DefaultValueIterator:oU}=NC(),{DeferredIterator:aU,DeferredKeyIterator:uU,DeferredValueIterator:cU}=MC(),{DefaultChainedBatch:rP}=UC(),{getCallback:uu,getOptions:na}=Vh(),sm=HC(),Ge=Symbol("promise"),ro=Symbol("landed"),cu=Symbol("resources"),Mv=Symbol("closeResources"),uf=Symbol("operations"),cf=Symbol("undefer"),om=Symbol("deferOpen"),nP=Symbol("options"),ut=Symbol("status"),lu=Symbol("defaultOptions"),Wc=Symbol("transcoder"),am=Symbol("keyEncoding"),jv=Symbol("valueEncoding"),lU=()=>{},lf=class extends iU{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");r=na(r);let{keyEncoding:n,valueEncoding:s,passive:i,...o}=r;this[cu]=new Set,this[uf]=[],this[om]=!0,this[nP]=o,this[ut]="opening",this.supports=rU(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Wc]=new nU(dU(this)),this[am]=this[Wc].encoding(n||"utf8"),this[jv]=this[Wc].encoding(s||"utf8");for(let a of this[Wc].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[lu]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[am].commonName,valueEncoding:this[jv].commonName}),key:Object.freeze({keyEncoding:this[am].commonName})},this.nextTick(()=>{this[om]&&this.open({passive:!1},lU)})}get status(){return this[ut]}keyEncoding(e){return this[Wc].encoding(e??this[am])}valueEncoding(e){return this[Wc].encoding(e??this[jv])}open(e,r){r=uu(e,r),r=ra(r,Ge),e={...this[nP],...na(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=s=>{this[ut]==="closing"||this[ut]==="opening"?this.once(ro,s?()=>n(s):n):this[ut]!=="open"?r(new Ci("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:s})):r()};return e.passive?this[ut]==="opening"?this.once(ro,n):this.nextTick(n):this[ut]==="closed"||this[om]?(this[om]=!1,this[ut]="opening",this.emit("opening"),this._open(e,s=>{if(s){this[ut]="closed",this[Mv](()=>{this.emit(ro),n(s)}),this[cf]();return}this[ut]="open",this[cf](),this.emit(ro),this[ut]==="open"&&this.emit("open"),this[ut]==="open"&&this.emit("ready"),n()})):this[ut]==="open"?this.nextTick(n):this.once(ro,()=>this.open(e,r)),r[Ge]}_open(e,r){this.nextTick(r)}close(e){e=ra(e,Ge);let r=n=>{this[ut]==="opening"||this[ut]==="closing"?this.once(ro,n?r(n):r):this[ut]!=="closed"?e(new Ci("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[ut]==="open"){this[ut]="closing",this.emit("closing");let n=s=>{this[ut]="open",this[cf](),this.emit(ro),r(s)};this[Mv](()=>{this._close(s=>{if(s)return n(s);this[ut]="closed",this[cf](),this.emit(ro),this[ut]==="closed"&&this.emit("closed"),r()})})}else this[ut]==="closed"?this.nextTick(r):this.once(ro,()=>this.close(e));return e[Ge]}[Mv](e){if(this[cu].size===0)return this.nextTick(e);let r=this[cu].size,n=!0,s=()=>{--r===0&&(n?this.nextTick(e):e())};for(let i of this[cu])i.close(s);n=!1,this[cu].clear()}_close(e){this.nextTick(e)}get(e,r,n){if(n=uu(r,n),n=ra(n,Ge),r=na(r,this[lu].entry),this[ut]==="opening")return this.defer(()=>this.get(e,r,n)),n[Ge];if(zc(this,n))return n[Ge];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Ge];let i=this.keyEncoding(r.keyEncoding),o=this.valueEncoding(r.valueEncoding),a=i.format,u=o.format;return(r.keyEncoding!==a||r.valueEncoding!==u)&&(r=Object.assign({},r,{keyEncoding:a,valueEncoding:u})),this._get(this.prefixKey(i.encode(e),a),r,(c,l)=>{if(c)return(c.code==="LEVEL_NOT_FOUND"||c.notFound||/NotFound/i.test(c))&&(c.code||(c.code="LEVEL_NOT_FOUND"),c.notFound||(c.notFound=!0),c.status||(c.status=404)),n(c);try{l=o.decode(l)}catch(d){return n(new Ci("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[Ge]}_get(e,r,n){this.nextTick(n,new Error("NotFound"))}getMany(e,r,n){if(n=uu(r,n),n=ra(n,Ge),r=na(r,this[lu].entry),this[ut]==="opening")return this.defer(()=>this.getMany(e,r,n)),n[Ge];if(zc(this,n))return n[Ge];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[Ge];if(e.length===0)return this.nextTick(n,null,[]),n[Ge];let s=this.keyEncoding(r.keyEncoding),i=this.valueEncoding(r.valueEncoding),o=s.format,a=i.format;(r.keyEncoding!==o||r.valueEncoding!==a)&&(r=Object.assign({},r,{keyEncoding:o,valueEncoding:a}));let u=new Array(e.length);for(let c=0;c<e.length;c++){let l=e[c],d=this._checkKey(l);if(d)return this.nextTick(n,d),n[Ge];u[c]=this.prefixKey(s.encode(l),o)}return this._getMany(u,r,(c,l)=>{if(c)return n(c);try{for(let d=0;d<l.length;d++)l[d]!==void 0&&(l[d]=i.decode(l[d]))}catch(d){return n(new Ci(`Could not decode one or more of ${l.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:d}))}n(null,l)}),n[Ge]}_getMany(e,r,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,r,n,s){if(s=uu(n,s),s=ra(s,Ge),n=na(n,this[lu].entry),this[ut]==="opening")return this.defer(()=>this.put(e,r,n,s)),s[Ge];if(zc(this,s))return s[Ge];let i=this._checkKey(e)||this._checkValue(r);if(i)return this.nextTick(s,i),s[Ge];let o=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),u=o.format,c=a.format;(n.keyEncoding!==u||n.valueEncoding!==c)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:c}));let l=this.prefixKey(o.encode(e),u),d=a.encode(r);return this._put(l,d,n,p=>{if(p)return s(p);this.emit("put",e,r),s()}),s[Ge]}_put(e,r,n,s){this.nextTick(s)}del(e,r,n){if(n=uu(r,n),n=ra(n,Ge),r=na(r,this[lu].key),this[ut]==="opening")return this.defer(()=>this.del(e,r,n)),n[Ge];if(zc(this,n))return n[Ge];let s=this._checkKey(e);if(s)return this.nextTick(n,s),n[Ge];let i=this.keyEncoding(r.keyEncoding),o=i.format;return r.keyEncoding!==o&&(r=Object.assign({},r,{keyEncoding:o})),this._del(this.prefixKey(i.encode(e),o),r,a=>{if(a)return n(a);this.emit("del",e),n()}),n[Ge]}_del(e,r,n){this.nextTick(n)}batch(e,r,n){if(!arguments.length){if(this[ut]==="opening")return new rP(this);if(this[ut]!=="open")throw new Ci("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=uu(r,n),n=ra(n,Ge),r=na(r,this[lu].empty),this[ut]==="opening")return this.defer(()=>this.batch(e,r,n)),n[Ge];if(zc(this,n))return n[Ge];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[Ge];if(e.length===0)return this.nextTick(n),n[Ge];let s=new Array(e.length),{keyEncoding:i,valueEncoding:o,...a}=r;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[Ge];let c=Object.assign({},e[u]);if(c.type!=="put"&&c.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[Ge];let l=this._checkKey(c.key);if(l)return this.nextTick(n,l),n[Ge];let d=c.sublevel!=null?c.sublevel:this,p=d.keyEncoding(c.keyEncoding||i),f=p.format;if(c.key=d.prefixKey(p.encode(c.key),f),c.keyEncoding=f,c.type==="put"){let h=this._checkValue(c.value);if(h)return this.nextTick(n,h),n[Ge];let y=d.valueEncoding(c.valueEncoding||o);c.value=y.encode(c.value),c.valueEncoding=y.format}d!==this&&(c.sublevel=null),s[u]=c}return this._batch(s,a,u=>{if(u)return n(u);this.emit("batch",e),n()}),n[Ge]}_batch(e,r,n){this.nextTick(n)}sublevel(e,r){return this._sublevel(e,qv.defaults(r))}_sublevel(e,r){return new qv(this,e,r)}prefixKey(e,r){return e}clear(e,r){if(r=uu(e,r),r=ra(r,Ge),e=na(e,this[lu].empty),this[ut]==="opening")return this.defer(()=>this.clear(e,r)),r[Ge];if(zc(this,r))return r[Ge];let n=e,s=this.keyEncoding(e.keyEncoding);return e=sm(e,s),e.keyEncoding=s.format,e.limit===0?this.nextTick(r):this._clear(e,i=>{if(i)return r(i);this.emit("clear",n),r()}),r[Ge]}_clear(e,r){this.nextTick(r)}iterator(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=sm(e,r),e.keys=e.keys!==!1,e.values=e.values!==!1,e[au.keyEncoding]=r,e[au.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new aU(this,e);if(this[ut]!=="open")throw new Ci("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new au(this,e)}keys(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=sm(e,r),e[au.keyEncoding]=r,e[au.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new uU(this,e);if(this[ut]!=="open")throw new Ci("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new sU(this,e)}values(e){let r=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=sm(e,r),e[au.keyEncoding]=r,e[au.valueEncoding]=n,e.keyEncoding=r.format,e.valueEncoding=n.format,this[ut]==="opening")return new cU(this,e);if(this[ut]!=="open")throw new Ci("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new oU(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[uf].push(e)}[cf](){if(this[uf].length===0)return;let e=this[uf];this[uf]=[];for(let r of e)r()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[cu].add(e)}detachResource(e){this[cu].delete(e)}_chainedBatch(){return new rP(this)}_checkKey(e){if(e==null)return new Ci("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new Ci("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};lf.prototype.nextTick=XC();var{AbstractSublevel:qv}=tP()({AbstractLevel:lf});Lv.AbstractLevel=lf;Lv.AbstractSublevel=qv;var zc=function(t,e){return t[ut]!=="open"?(t.nextTick(e,new Ci("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},dU=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])}});var Vv=v(du=>{"use strict";du.AbstractLevel=Uv().AbstractLevel;du.AbstractSublevel=Uv().AbstractSublevel;du.AbstractIterator=ea().AbstractIterator;du.AbstractKeyIterator=ea().AbstractKeyIterator;du.AbstractValueIterator=ea().AbstractValueIterator;du.AbstractChainedBatch=Bv().AbstractChainedBatch});var sP=v((sme,iP)=>{iP.exports=pU;var fU=Fv();function pU(t,e,r){if(typeof e!="number")throw new Error("second argument must be a Number");let n,s,i,o,a,u=!0,c;Array.isArray(t)?(n=[],i=s=t.length):(o=Object.keys(t),n={},i=s=o.length);function l(p){function f(){r&&r(p,n),r=null}u?fU(f):f()}function d(p,f,h){if(n[p]=h,f&&(a=!0),--i===0||f)l(f);else if(!a&&c<s){let y;o?(y=o[c],c+=1,t[y](function(g,S){d(y,g,S)})):(y=c,c+=1,t[y](function(g,S){d(y,g,S)}))}}c=e,i?o?o.some(function(p,f){return t[p](function(h,y){d(p,h,y)}),f===e-1}):t.some(function(p,f){return p(function(h,y){d(f,h,y)}),f===e-1}):l(null),u=!1}});var Kv=v((ome,oP)=>{"use strict";oP.exports=function(e){let r=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,s=e.gte===void 0,i=e.lte===void 0;return r!==void 0&&n!==void 0?IDBKeyRange.bound(r,n,s,i):r!==void 0?IDBKeyRange.lowerBound(r,s):n!==void 0?IDBKeyRange.upperBound(n,i):null}});var Hv=v((ame,aP)=>{"use strict";var hU=new TextEncoder;aP.exports=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):hU.encode(t)}});var fP=v(dP=>{"use strict";var{AbstractIterator:mU}=Vv(),uP=Kv(),um=Hv(),as=Symbol("cache"),no=Symbol("finished"),qn=Symbol("options"),io=Symbol("currentOptions"),fu=Symbol("position"),Wv=Symbol("location"),Jc=Symbol("first"),cP={},zv=class extends mU{constructor(e,r,n){super(e,n),this[as]=[],this[no]=this.limit===0,this[qn]=n,this[io]={...n},this[fu]=void 0,this[Wv]=r,this[Jc]=!0}_nextv(e,r,n){if(this[Jc]=!1,this[no])return this.nextTick(n,null,[]);if(this[as].length>0)return e=Math.min(e,this[as].length),this.nextTick(n,null,this[as].splice(0,e));this[fu]!==void 0&&(this[qn].reverse?(this[io].lt=this[fu],this[io].lte=void 0):(this[io].gt=this[fu],this[io].gte=void 0));let s;try{s=uP(this[io])}catch{return this[no]=!0,this.nextTick(n,null,[])}let i=this.db.db.transaction([this[Wv]],"readonly"),o=i.objectStore(this[Wv]),a=[];if(this[qn].reverse){let u=!this[qn].values&&o.openKeyCursor?"openKeyCursor":"openCursor";o[u](s,"prev").onsuccess=c=>{let l=c.target.result;if(l){let{key:d,value:p}=l;this[fu]=d,a.push([this[qn].keys&&d!==void 0?um(d):void 0,this[qn].values&&p!==void 0?um(p):void 0]),a.length<e?l.continue():lP(i)}else this[no]=!0}}else{let u,c,l=()=>{if(u===void 0||c===void 0)return;let d=Math.max(u.length,c.length);d===0||e===1/0?this[no]=!0:this[fu]=u[d-1],a.length=d;for(let p=0;p<d;p++){let f=u[p],h=c[p];a[p]=[this[qn].keys&&f!==void 0?um(f):void 0,this[qn].values&&h!==void 0?um(h):void 0]}lP(i)};this[qn].keys||e<1/0?o.getAllKeys(s,e<1/0?e:void 0).onsuccess=d=>{u=d.target.result,l()}:(u=[],this.nextTick(l)),this[qn].values?o.getAll(s,e<1/0?e:void 0).onsuccess=d=>{c=d.target.result,l()}:(c=[],this.nextTick(l))}i.onabort=()=>{n(i.error||new Error("aborted by user")),n=null},i.oncomplete=()=>{n(null,a),n=null}}_next(e){if(this[as].length>0){let[r,n]=this[as].shift();this.nextTick(e,null,r,n)}else if(this[no])this.nextTick(e);else{let r=Math.min(100,this.limit-this.count);this[Jc]&&(this[Jc]=!1,r=1),this._nextv(r,cP,(n,s)=>{if(n)return e(n);this[as]=s,this._next(e)})}}_all(e,r){this[Jc]=!1;let n=this[as].splice(0,this[as].length),s=this.limit-this.count-n.length;if(s<=0)return this.nextTick(r,null,n);this._nextv(s,cP,(i,o)=>{if(i)return r(i);n.length>0&&(o=n.concat(o)),r(null,o)})}_seek(e,r){this[Jc]=!0,this[as]=[],this[no]=!1,this[fu]=void 0,this[io]={...this[qn]};let n;try{n=uP(this[qn])}catch{this[no]=!0;return}n!==null&&!n.includes(e)?this[no]=!0:this[qn].reverse?this[io].lte=e:this[io].gte=e}};dP.Iterator=zv;function lP(t){typeof t.commit=="function"&&t.commit()}});var hP=v((cme,pP)=>{"use strict";pP.exports=function(e,r,n,s,i){if(s.limit===0)return e.nextTick(i);let o=e.db.transaction([r],"readwrite"),a=o.objectStore(r),u=0;o.oncomplete=function(){i()},o.onabort=function(){i(o.error||new Error("aborted by user"))};let c=a.openKeyCursor?"openKeyCursor":"openCursor",l=s.reverse?"prev":"next";a[c](n,l).onsuccess=function(d){let p=d.target.result;p&&(a.delete(p.key).onsuccess=function(){(s.limit<=0||++u<s.limit)&&p.continue()})}}});var wP=v(vP=>{"use strict";var{AbstractLevel:yU}=Vv(),mP=Ai(),gU=sP(),{fromCallback:bU}=Xd(),{Iterator:vU}=fP(),yP=Hv(),wU=hP(),EU=Kv(),bP="level-js-",df=Symbol("idb"),Jv=Symbol("namePrefix"),so=Symbol("location"),Gv=Symbol("version"),pu=Symbol("store"),ff=Symbol("onComplete"),gP=Symbol("promise"),cm=class extends yU{constructor(e,r,n){if(typeof r=="function"||typeof n=="function")throw new mP("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:s,version:i,...o}=r||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},o),typeof e!="string")throw new Error("constructor requires a location string argument");this[so]=e,this[Jv]=s??bP,this[Gv]=parseInt(i||1,10),this[df]=null}get location(){return this[so]}get namePrefix(){return this[Jv]}get version(){return this[Gv]}get db(){return this[df]}get type(){return"browser-level"}_open(e,r){let n=indexedDB.open(this[Jv]+this[so],this[Gv]);n.onerror=function(){r(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[df]=n.result,r()},n.onupgradeneeded=s=>{let i=s.target.result;i.objectStoreNames.contains(this[so])||i.createObjectStore(this[so])}}[pu](e){return this[df].transaction([this[so]],e).objectStore(this[so])}[ff](e,r){let n=e.transaction;n.onabort=function(){r(n.error||new Error("aborted by user"))},n.oncomplete=function(){r(null,e.result)}}_get(e,r,n){let s=this[pu]("readonly"),i;try{i=s.get(e)}catch(o){return this.nextTick(n,o)}this[ff](i,function(o,a){if(o)return n(o);if(a===void 0)return n(new mP("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,yP(a))})}_getMany(e,r,n){let s=this[pu]("readonly"),i=e.map(o=>a=>{let u;try{u=s.get(o)}catch(c){return a(c)}u.onsuccess=()=>{let c=u.result;a(null,c===void 0?c:yP(c))},u.onerror=c=>{c.stopPropagation(),a(u.error)}});gU(i,16,n)}_del(e,r,n){let s=this[pu]("readwrite"),i;try{i=s.delete(e)}catch(o){return this.nextTick(n,o)}this[ff](i,n)}_put(e,r,n,s){let i=this[pu]("readwrite"),o;try{o=i.put(r,e)}catch(a){return this.nextTick(s,a)}this[ff](o,s)}_iterator(e){return new vU(this,this[so],e)}_batch(e,r,n){let s=this[pu]("readwrite"),i=s.transaction,o=0,a;i.onabort=function(){n(a||i.error||new Error("aborted by user"))},i.oncomplete=function(){n()};function u(){let c=e[o++],l=c.key,d;try{d=c.type==="del"?s.delete(l):s.put(c.value,l)}catch(p){a=p,i.abort();return}o<e.length?d.onsuccess=u:typeof i.commit=="function"&&i.commit()}u()}_clear(e,r){let n,s;try{n=EU(e)}catch{return this.nextTick(r)}if(e.limit>=0)return wU(this,this[so],n,e,r);try{let i=this[pu]("readwrite");s=n?i.delete(n):i.clear()}catch(i){return this.nextTick(r,i)}this[ff](s,r)}_close(e){this[df].close(),this.nextTick(e)}};cm.destroy=function(t,e,r){typeof e=="function"&&(r=e,e=bP),r=bU(r,gP);let n=indexedDB.deleteDatabase(e+t);return n.onsuccess=function(){r()},n.onerror=function(s){r(s)},r[gP]};vP.BrowserLevel=cm});var Xv=v(EP=>{EP.Level=wP().BrowserLevel});var gr=v((mme,_P)=>{"use strict";_P.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Uint8Array}});var us=v((yme,Zv)=>{"use strict";var SU=Qn(),DU=Object.getPrototypeOf(async function(){}).constructor,SP=globalThis.Blob||SU.Blob,AU=typeof SP<"u"?function(e){return e instanceof SP}:function(e){return!1},Yv=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let n=0;n<e.length;n++)r+=`    ${e[n].stack}
`;super(r),this.name="AggregateError",this.errors=e}};Zv.exports={AggregateError:Yv,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((n,s)=>{t=n,e=s}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((n,...s)=>n?r(n):e(...s))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,n]){let s=e.shift();return n==="f"?s.toFixed(6):n==="j"?JSON.stringify(s):n==="s"&&typeof s=="object"?`${s.constructor!==Object?s.constructor.name:""} {}`.trim():s.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof DU},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:AU};Zv.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var fm=v((gme,dm)=>{"use strict";var{AbortController:DP,AbortSignal:xU}=typeof self<"u"?self:typeof window<"u"?window:void 0;dm.exports=DP;dm.exports.AbortSignal=xU;dm.exports.default=DP});var dn=v((bme,CP)=>{"use strict";var{format:CU,inspect:pm,AggregateError:PU}=us(),OU=globalThis.AggregateError||PU,BU=Symbol("kIsNodeError"),TU=["string","function","number","object","Function","Object","boolean","bigint","symbol"],FU=/^([A-Z][a-z0-9]*)+$/,IU="__node_internal_",hm={};function mu(t,e){if(!t)throw new hm.ERR_INTERNAL_ASSERTION(e)}function AP(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function kU(t,e,r){if(typeof e=="function")return mu(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let n=(e.match(/%[dfijoOs]/g)||[]).length;return mu(n===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?e:CU(e,...r)}function qr(t,e,r){r||(r=Error);class n extends r{constructor(...i){super(kU(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=t,n.prototype[BU]=!0,hm[t]=n}function xP(t){let e=IU+t.name;return Object.defineProperty(t,"name",{value:e}),t}function RU(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new OU([e,t],e.message);return r.code=e.code,r}return t||e}var Qv=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new hm.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};qr("ERR_ASSERTION","%s",Error);qr("ERR_INVALID_ARG_TYPE",(t,e,r)=>{mu(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let n="The ";t.endsWith(" argument")?n+=`${t} `:n+=`"${t}" ${t.includes(".")?"property":"argument"} `,n+="must be ";let s=[],i=[],o=[];for(let u of e)mu(typeof u=="string","All expected entries have to be of type string"),TU.includes(u)?s.push(u.toLowerCase()):FU.test(u)?i.push(u):(mu(u!=="object",'The value "object" should be written as "Object"'),o.push(u));if(i.length>0){let u=s.indexOf("object");u!==-1&&(s.splice(s,u,1),i.push("Object"))}if(s.length>0){switch(s.length){case 1:n+=`of type ${s[0]}`;break;case 2:n+=`one of type ${s[0]} or ${s[1]}`;break;default:{let u=s.pop();n+=`one of type ${s.join(", ")}, or ${u}`}}(i.length>0||o.length>0)&&(n+=" or ")}if(i.length>0){switch(i.length){case 1:n+=`an instance of ${i[0]}`;break;case 2:n+=`an instance of ${i[0]} or ${i[1]}`;break;default:{let u=i.pop();n+=`an instance of ${i.join(", ")}, or ${u}`}}o.length>0&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=`${o[0]}`;break;case 2:n+=`one of ${o[0]} or ${o[1]}`;break;default:{let u=o.pop();n+=`one of ${o.join(", ")}, or ${u}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{let u=pm(r,{depth:-1});n+=`. Received ${u}`}}else{let u=pm(r,{colors:!1});u.length>25&&(u=`${u.slice(0,25)}...`),n+=`. Received type ${typeof r} (${u})`}return n},TypeError);qr("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let n=pm(e);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${n}`},TypeError);qr("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var n;let s=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${s}.`},TypeError);qr("ERR_MISSING_ARGS",(...t)=>{mu(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(n=>`"${n}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let n=t.pop();e+=`The ${t.join(", ")}, and ${n} arguments`}break}return`${e} must be specified`},TypeError);qr("ERR_OUT_OF_RANGE",(t,e,r)=>{mu(e,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=AP(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=AP(n)),n+="n"):n=pm(r),`The value of "${t}" is out of range. It must be ${e}. Received ${n}`},RangeError);qr("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);qr("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);qr("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);qr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);qr("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);qr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);qr("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);qr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);qr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);qr("ERR_STREAM_WRITE_AFTER_END","write after end",Error);qr("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);CP.exports={AbortError:Qv,aggregateTwoErrors:xP(RU),hideStackFrames:xP,codes:hm}});var pf=v((vme,$P)=>{"use strict";var{ArrayIsArray:t1,ArrayPrototypeIncludes:TP,ArrayPrototypeJoin:FP,ArrayPrototypeMap:$U,NumberIsInteger:r1,NumberIsNaN:NU,NumberMAX_SAFE_INTEGER:MU,NumberMIN_SAFE_INTEGER:jU,NumberParseInt:qU,ObjectPrototypeHasOwnProperty:LU,RegExpPrototypeExec:IP,String:UU,StringPrototypeToUpperCase:VU,StringPrototypeTrim:KU}=gr(),{hideStackFrames:ri,codes:{ERR_SOCKET_BAD_PORT:HU,ERR_INVALID_ARG_TYPE:fn,ERR_INVALID_ARG_VALUE:Gc,ERR_OUT_OF_RANGE:yu,ERR_UNKNOWN_SIGNAL:PP}}=dn(),{normalizeEncoding:WU}=us(),{isAsyncFunction:zU,isArrayBufferView:JU}=us().types,OP={};function GU(t){return t===(t|0)}function XU(t){return t===t>>>0}var YU=/^[0-7]+$/,ZU="must be a 32-bit unsigned integer or an octal string";function QU(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(IP(YU,t)===null)throw new Gc(e,t,ZU);t=qU(t,8)}return kP(t,e),t}var eV=ri((t,e,r=jU,n=MU)=>{if(typeof t!="number")throw new fn(e,"number",t);if(!r1(t))throw new yu(e,"an integer",t);if(t<r||t>n)throw new yu(e,`>= ${r} && <= ${n}`,t)}),tV=ri((t,e,r=-2147483648,n=2147483647)=>{if(typeof t!="number")throw new fn(e,"number",t);if(!r1(t))throw new yu(e,"an integer",t);if(t<r||t>n)throw new yu(e,`>= ${r} && <= ${n}`,t)}),kP=ri((t,e,r=!1)=>{if(typeof t!="number")throw new fn(e,"number",t);if(!r1(t))throw new yu(e,"an integer",t);let n=r?1:0,s=4294967295;if(t<n||t>s)throw new yu(e,`>= ${n} && <= ${s}`,t)});function n1(t,e){if(typeof t!="string")throw new fn(e,"string",t)}function rV(t,e,r=void 0,n){if(typeof t!="number")throw new fn(e,"number",t);if(r!=null&&t<r||n!=null&&t>n||(r!=null||n!=null)&&NU(t))throw new yu(e,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,t)}var nV=ri((t,e,r)=>{if(!TP(r,t)){let s="must be one of: "+FP($U(r,i=>typeof i=="string"?`'${i}'`:UU(i)),", ");throw new Gc(e,t,s)}});function RP(t,e){if(typeof t!="boolean")throw new fn(e,"boolean",t)}function e1(t,e,r){return t==null||!LU(t,e)?r:t[e]}var iV=ri((t,e,r=null)=>{let n=e1(r,"allowArray",!1),s=e1(r,"allowFunction",!1);if(!e1(r,"nullable",!1)&&t===null||!n&&t1(t)||typeof t!="object"&&(!s||typeof t!="function"))throw new fn(e,"Object",t)}),sV=ri((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new fn(e,"a dictionary",t)}),i1=ri((t,e,r=0)=>{if(!t1(t))throw new fn(e,"Array",t);if(t.length<r){let n=`must be longer than ${r}`;throw new Gc(e,t,n)}});function oV(t,e){i1(t,e);for(let r=0;r<t.length;r++)n1(t[r],`${e}[${r}]`)}function aV(t,e){i1(t,e);for(let r=0;r<t.length;r++)RP(t[r],`${e}[${r}]`)}function uV(t,e="signal"){if(n1(t,e),OP[t]===void 0)throw OP[VU(t)]!==void 0?new PP(t+" (signals must use all capital letters)"):new PP(t)}var cV=ri((t,e="buffer")=>{if(!JU(t))throw new fn(e,["Buffer","TypedArray","DataView"],t)});function lV(t,e){let r=WU(e),n=t.length;if(r==="hex"&&n%2!==0)throw new Gc("encoding",e,`is invalid for data of length ${n}`)}function dV(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&KU(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new HU(e,t,r);return t|0}var fV=ri((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new fn(e,"AbortSignal",t)}),pV=ri((t,e)=>{if(typeof t!="function")throw new fn(e,"Function",t)}),hV=ri((t,e)=>{if(typeof t!="function"||zU(t))throw new fn(e,"Function",t)}),mV=ri((t,e)=>{if(t!==void 0)throw new fn(e,"undefined",t)});function yV(t,e,r){if(!TP(r,t))throw new fn(e,`('${FP(r,"|")}')`,t)}var gV=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function BP(t,e){if(typeof t>"u"||!IP(gV,t))throw new Gc(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function bV(t){if(typeof t=="string")return BP(t,"hints"),t;if(t1(t)){let e=t.length,r="";if(e===0)return r;for(let n=0;n<e;n++){let s=t[n];BP(s,"hints"),r+=s,n!==e-1&&(r+=", ")}return r}throw new Gc("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}$P.exports={isInt32:GU,isUint32:XU,parseFileMode:QU,validateArray:i1,validateStringArray:oV,validateBooleanArray:aV,validateBoolean:RP,validateBuffer:cV,validateDictionary:sV,validateEncoding:lV,validateFunction:pV,validateInt32:tV,validateInteger:eV,validateNumber:rV,validateObject:iV,validateOneOf:nV,validatePlainFunction:hV,validatePort:dV,validateSignalName:uV,validateString:n1,validateUint32:kP,validateUndefined:mV,validateUnion:yV,validateAbortSignal:fV,validateLinkHeaderValue:bV}});var ia=v((wme,qP)=>{var lr=qP.exports={},cs,ls;function s1(){throw new Error("setTimeout has not been defined")}function o1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cs=setTimeout:cs=s1}catch{cs=s1}try{typeof clearTimeout=="function"?ls=clearTimeout:ls=o1}catch{ls=o1}})();function NP(t){if(cs===setTimeout)return setTimeout(t,0);if((cs===s1||!cs)&&setTimeout)return cs=setTimeout,setTimeout(t,0);try{return cs(t,0)}catch{try{return cs.call(null,t,0)}catch{return cs.call(this,t,0)}}}function vV(t){if(ls===clearTimeout)return clearTimeout(t);if((ls===o1||!ls)&&clearTimeout)return ls=clearTimeout,clearTimeout(t);try{return ls(t)}catch{try{return ls.call(null,t)}catch{return ls.call(this,t)}}}var oo=[],Xc=!1,gu,mm=-1;function wV(){!Xc||!gu||(Xc=!1,gu.length?oo=gu.concat(oo):mm=-1,oo.length&&MP())}function MP(){if(!Xc){var t=NP(wV);Xc=!0;for(var e=oo.length;e;){for(gu=oo,oo=[];++mm<e;)gu&&gu[mm].run();mm=-1,e=oo.length}gu=null,Xc=!1,vV(t)}}lr.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];oo.push(new jP(t,e)),oo.length===1&&!Xc&&NP(MP)};function jP(t,e){this.fun=t,this.array=e}jP.prototype.run=function(){this.fun.apply(null,this.array)};lr.title="browser";lr.browser=!0;lr.env={};lr.argv=[];lr.version="";lr.versions={};function ao(){}lr.on=ao;lr.addListener=ao;lr.once=ao;lr.off=ao;lr.removeListener=ao;lr.removeAllListeners=ao;lr.emit=ao;lr.prependListener=ao;lr.prependOnceListener=ao;lr.listeners=function(t){return[]};lr.binding=function(t){throw new Error("process.binding is not supported")};lr.cwd=function(){return"/"};lr.chdir=function(t){throw new Error("process.chdir is not supported")};lr.umask=function(){return 0}});var fs=v((Eme,r3)=>{"use strict";var{Symbol:ym,SymbolAsyncIterator:LP,SymbolIterator:UP,SymbolFor:VP}=gr(),KP=ym("kDestroyed"),HP=ym("kIsErrored"),a1=ym("kIsReadable"),WP=ym("kIsDisturbed"),EV=VP("nodejs.webstream.isClosedPromise"),_V=VP("nodejs.webstream.controllerErrorFunction");function gm(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function bm(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function SV(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function ds(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function zP(t){return!!(t&&!ds(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function JP(t){return!!(t&&!ds(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function GP(t){return!!(t&&!ds(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function DV(t){return zP(t)||JP(t)||GP(t)}function AV(t,e){return t==null?!1:e===!0?typeof t[LP]=="function":e===!1?typeof t[UP]=="function":typeof t[LP]=="function"||typeof t[UP]=="function"}function vm(t){if(!ds(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!!(t.destroyed||t[KP]||n!=null&&n.destroyed)}function XP(t){if(!bm(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function xV(t,e){if(!bm(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function CV(t){if(!gm(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function YP(t,e){if(!gm(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function ZP(t){return t&&t[a1]!=null?t[a1]:typeof t?.readable!="boolean"?null:vm(t)?!1:gm(t)&&t.readable&&!YP(t)}function QP(t){return typeof t?.writable!="boolean"?null:vm(t)?!1:bm(t)&&t.writable&&!XP(t)}function PV(t,e){return ds(t)?vm(t)?!0:!(e?.readable!==!1&&ZP(t)||e?.writable!==!1&&QP(t)):null}function OV(t){var e,r;return ds(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function BV(t){var e,r;return ds(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function TV(t){if(!ds(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&e3(t)?t._closed:null}function e3(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function t3(t){return typeof t._sent100=="boolean"&&e3(t)}function FV(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function IV(t){if(!ds(t))return null;let e=t._writableState,r=t._readableState,n=e||r;return!n&&t3(t)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function kV(t){var e;return!!(t&&((e=t[WP])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function RV(t){var e,r,n,s,i,o,a,u,c,l;return!!(t&&((e=(r=(n=(s=(i=(o=t[HP])!==null&&o!==void 0?o:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&s!==void 0?s:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&n!==void 0?n:(u=t._writableState)===null||u===void 0?void 0:u.errorEmitted)!==null&&r!==void 0?r:(c=t._readableState)===null||c===void 0?void 0:c.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}r3.exports={kDestroyed:KP,isDisturbed:kV,kIsDisturbed:WP,isErrored:RV,kIsErrored:HP,isReadable:ZP,kIsReadable:a1,kIsClosedPromise:EV,kControllerErrorFunction:_V,isClosed:TV,isDestroyed:vm,isDuplexNodeStream:SV,isFinished:PV,isIterable:AV,isReadableNodeStream:gm,isReadableStream:zP,isReadableEnded:CV,isReadableFinished:YP,isReadableErrored:BV,isNodeStream:ds,isWebStream:DV,isWritable:QP,isWritableNodeStream:bm,isWritableStream:JP,isWritableEnded:XP,isWritableFinished:xV,isWritableErrored:OV,isServerRequest:FV,isServerResponse:t3,willEmitClose:IV,isTransformStream:GP}});var uo=v((_me,f1)=>{var sa=ia(),{AbortError:d3,codes:$V}=dn(),{ERR_INVALID_ARG_TYPE:NV,ERR_STREAM_PREMATURE_CLOSE:n3}=$V,{kEmptyObject:c1,once:l1}=us(),{validateAbortSignal:MV,validateFunction:jV,validateObject:qV,validateBoolean:LV}=pf(),{Promise:UV,PromisePrototypeThen:VV}=gr(),{isClosed:KV,isReadable:i3,isReadableNodeStream:u1,isReadableStream:HV,isReadableFinished:s3,isReadableErrored:o3,isWritable:a3,isWritableNodeStream:u3,isWritableStream:WV,isWritableFinished:c3,isWritableErrored:l3,isNodeStream:zV,willEmitClose:JV,kIsClosedPromise:GV}=fs();function XV(t){return t.setHeader&&typeof t.abort=="function"}var d1=()=>{};function f3(t,e,r){var n,s;if(arguments.length===2?(r=e,e=c1):e==null?e=c1:qV(e,"options"),jV(r,"callback"),MV(e.signal,"options.signal"),r=l1(r),HV(t)||WV(t))return YV(t,e,r);if(!zV(t))throw new NV("stream",["ReadableStream","WritableStream","Stream"],t);let i=(n=e.readable)!==null&&n!==void 0?n:u1(t),o=(s=e.writable)!==null&&s!==void 0?s:u3(t),a=t._writableState,u=t._readableState,c=()=>{t.writable||p()},l=JV(t)&&u1(t)===i&&u3(t)===o,d=c3(t,!1),p=()=>{d=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||i))&&(!i||f)&&r.call(t)},f=s3(t,!1),h=()=>{f=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||o))&&(!o||d)&&r.call(t)},y=D=>{r.call(t,D)},g=KV(t),S=()=>{g=!0;let D=l3(t)||o3(t);if(D&&typeof D!="boolean")return r.call(t,D);if(i&&!f&&u1(t,!0)&&!s3(t,!1))return r.call(t,new n3);if(o&&!d&&!c3(t,!1))return r.call(t,new n3);r.call(t)},A=()=>{g=!0;let D=l3(t)||o3(t);if(D&&typeof D!="boolean")return r.call(t,D);r.call(t)},w=()=>{t.req.on("finish",p)};XV(t)?(t.on("complete",p),l||t.on("abort",S),t.req?w():t.on("request",w)):o&&!a&&(t.on("end",c),t.on("close",c)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",S),t.on("end",h),t.on("finish",p),e.error!==!1&&t.on("error",y),t.on("close",S),g?sa.nextTick(S):a!=null&&a.errorEmitted||u!=null&&u.errorEmitted?l||sa.nextTick(A):(!i&&(!l||i3(t))&&(d||a3(t)===!1)||!o&&(!l||a3(t))&&(f||i3(t)===!1)||u&&t.req&&t.aborted)&&sa.nextTick(A);let P=()=>{r=d1,t.removeListener("aborted",S),t.removeListener("complete",p),t.removeListener("abort",S),t.removeListener("request",w),t.req&&t.req.removeListener("finish",p),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",p),t.removeListener("end",h),t.removeListener("error",y),t.removeListener("close",S)};if(e.signal&&!g){let D=()=>{let O=r;P(),O.call(t,new d3(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)sa.nextTick(D);else{let O=r;r=l1((...B)=>{e.signal.removeEventListener("abort",D),O.apply(t,B)}),e.signal.addEventListener("abort",D)}}return P}function YV(t,e,r){let n=!1,s=d1;if(e.signal)if(s=()=>{n=!0,r.call(t,new d3(void 0,{cause:e.signal.reason}))},e.signal.aborted)sa.nextTick(s);else{let o=r;r=l1((...a)=>{e.signal.removeEventListener("abort",s),o.apply(t,a)}),e.signal.addEventListener("abort",s)}let i=(...o)=>{n||sa.nextTick(()=>r.apply(t,o))};return VV(t[GV].promise,i,i),d1}function ZV(t,e){var r;let n=!1;return e===null&&(e=c1),(r=e)!==null&&r!==void 0&&r.cleanup&&(LV(e.cleanup,"cleanup"),n=e.cleanup),new UV((s,i)=>{let o=f3(t,e,a=>{n&&o(),a?i(a):s()})})}f1.exports=f3;f1.exports.finished=ZV});var bu=v((Sme,w3)=>{"use strict";var ps=ia(),{aggregateTwoErrors:QV,codes:{ERR_MULTIPLE_CALLBACK:eK},AbortError:tK}=dn(),{Symbol:m3}=gr(),{kDestroyed:rK,isDestroyed:nK,isFinished:iK,isServerRequest:sK}=fs(),y3=m3("kDestroy"),p1=m3("kConstruct");function g3(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function oK(t,e){let r=this._readableState,n=this._writableState,s=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(g3(t,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?p3(this,t,e):this.once(y3,function(i){p3(this,QV(i,t),e)}),this)}function p3(t,e,r){let n=!1;function s(i){if(n)return;n=!0;let o=t._readableState,a=t._writableState;g3(i,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(i),i?ps.nextTick(aK,t,i):ps.nextTick(b3,t)}try{t._destroy(e||null,s)}catch(i){s(i)}}function aK(t,e){h1(t,e),b3(t)}function b3(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function h1(t,e){let r=t._readableState,n=t._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function uK(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function m1(t,e,r){let n=t._readableState,s=t._writableState;if(s!=null&&s.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||s!=null&&s.autoDestroy?t.destroy(e):e&&(e.stack,s&&!s.errored&&(s.errored=e),n&&!n.errored&&(n.errored=e),r?ps.nextTick(h1,t,e):h1(t,e))}function cK(t,e){if(typeof t._construct!="function")return;let r=t._readableState,n=t._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),t.once(p1,e),!(t.listenerCount(p1)>1)&&ps.nextTick(lK,t)}function lK(t){let e=!1;function r(n){if(e){m1(t,n??new eK);return}e=!0;let s=t._readableState,i=t._writableState,o=i||s;s&&(s.constructed=!0),i&&(i.constructed=!0),o.destroyed?t.emit(y3,n):n?m1(t,n,!0):ps.nextTick(dK,t)}try{t._construct(n=>{ps.nextTick(r,n)})}catch(n){ps.nextTick(r,n)}}function dK(t){t.emit(p1)}function h3(t){return t?.setHeader&&typeof t.abort=="function"}function v3(t){t.emit("close")}function fK(t,e){t.emit("error",e),ps.nextTick(v3,t)}function pK(t,e){!t||nK(t)||(!e&&!iK(t)&&(e=new tK),sK(t)?(t.socket=null,t.destroy(e)):h3(t)?t.abort():h3(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?ps.nextTick(fK,t,e):ps.nextTick(v3,t),t.destroyed||(t[rK]=!0))}w3.exports={construct:cK,destroyer:pK,destroy:oK,undestroy:uK,errorOrDestroy:m1}});var _m=v((Dme,_3)=>{"use strict";var{ArrayIsArray:hK,ObjectSetPrototypeOf:E3}=gr(),{EventEmitter:wm}=Gd();function Em(t){wm.call(this,t)}E3(Em.prototype,wm.prototype);E3(Em,wm);Em.prototype.pipe=function(t,e){let r=this;function n(l){t.writable&&t.write(l)===!1&&r.pause&&r.pause()}r.on("data",n);function s(){r.readable&&r.resume&&r.resume()}t.on("drain",s),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let i=!1;function o(){i||(i=!0,t.end())}function a(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function u(l){c(),wm.listenerCount(this,"error")===0&&this.emit("error",l)}y1(r,"error",u),y1(t,"error",u);function c(){r.removeListener("data",n),t.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",u),t.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t};function y1(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):hK(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}_3.exports={Stream:Em,prependListener:y1}});var hf=v((Ame,Sm)=>{"use strict";var{AbortError:S3,codes:mK}=dn(),{isNodeStream:D3,isWebStream:yK,kControllerErrorFunction:gK}=fs(),bK=uo(),{ERR_INVALID_ARG_TYPE:A3}=mK,vK=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new A3(e,"AbortSignal",t)};Sm.exports.addAbortSignal=function(e,r){if(vK(e,"signal"),!D3(r)&&!yK(r))throw new A3("stream",["ReadableStream","WritableStream","Stream"],r);return Sm.exports.addAbortSignalNoValidate(e,r)};Sm.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=D3(e)?()=>{e.destroy(new S3(void 0,{cause:t.reason}))}:()=>{e[gK](new S3(void 0,{cause:t.reason}))};return t.aborted?r():(t.addEventListener("abort",r),bK(e,()=>t.removeEventListener("abort",r))),e}});var P3=v((Cme,C3)=>{"use strict";var{StringPrototypeSlice:x3,SymbolIterator:wK,TypedArrayPrototypeSet:Dm,Uint8Array:EK}=gr(),{Buffer:g1}=Qn(),{inspect:_K}=us();C3.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=e+r.data;return n}concat(e){if(this.length===0)return g1.alloc(0);let r=g1.allocUnsafe(e>>>0),n=this.head,s=0;for(;n;)Dm(r,n.data,s),s+=n.data.length,n=n.next;return r}consume(e,r){let n=this.head.data;if(e<n.length){let s=n.slice(0,e);return this.head.data=n.slice(e),s}return e===n.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[wK](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",n=this.head,s=0;do{let i=n.data;if(e>i.length)r+=i,e-=i.length;else{e===i.length?(r+=i,++s,n.next?this.head=n.next:this.head=this.tail=null):(r+=x3(i,0,e),this.head=n,n.data=x3(i,e));break}++s}while((n=n.next)!==null);return this.length-=s,r}_getBuffer(e){let r=g1.allocUnsafe(e),n=e,s=this.head,i=0;do{let o=s.data;if(e>o.length)Dm(r,o,n-e),e-=o.length;else{e===o.length?(Dm(r,o,n-e),++i,s.next?this.head=s.next:this.head=this.tail=null):(Dm(r,new EK(o.buffer,o.byteOffset,e),n-e),this.head=s,s.data=o.slice(e));break}++i}while((s=s.next)!==null);return this.length-=i,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return _K(this,{...r,depth:0,customInspect:!1})}}});var Am=v((Pme,B3)=>{"use strict";var{MathFloor:SK,NumberIsInteger:DK}=gr(),{ERR_INVALID_ARG_VALUE:AK}=dn().codes;function xK(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function O3(t){return t?16:16*1024}function CK(t,e,r,n){let s=xK(e,n,r);if(s!=null){if(!DK(s)||s<0){let i=n?`options.${r}`:"options.highWaterMark";throw new AK(i,s)}return SK(s)}return O3(t.objectMode)}B3.exports={getHighWaterMark:CK,getDefaultHighWaterMark:O3}});var I3=v((b1,F3)=>{var xm=Qn(),hs=xm.Buffer;function T3(t,e){for(var r in t)e[r]=t[r]}hs.from&&hs.alloc&&hs.allocUnsafe&&hs.allocUnsafeSlow?F3.exports=xm:(T3(xm,b1),b1.Buffer=vu);function vu(t,e,r){return hs(t,e,r)}vu.prototype=Object.create(hs.prototype);T3(hs,vu);vu.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return hs(t,e,r)};vu.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=hs(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};vu.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return hs(t)};vu.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return xm.SlowBuffer(t)}});var $3=v(R3=>{"use strict";var w1=I3().Buffer,k3=w1.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function PK(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function OK(t){var e=PK(t);if(typeof e!="string"&&(w1.isEncoding===k3||!k3(t)))throw new Error("Unknown encoding: "+t);return e||t}R3.StringDecoder=mf;function mf(t){this.encoding=OK(t);var e;switch(this.encoding){case"utf16le":this.text=RK,this.end=$K,e=4;break;case"utf8":this.fillLast=FK,e=4;break;case"base64":this.text=NK,this.end=MK,e=3;break;default:this.write=jK,this.end=qK;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=w1.allocUnsafe(e)}mf.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};mf.prototype.end=kK;mf.prototype.text=IK;mf.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function v1(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function BK(t,e,r){var n=e.length-1;if(n<r)return 0;var s=v1(e[n]);return s>=0?(s>0&&(t.lastNeed=s-1),s):--n<r||s===-2?0:(s=v1(e[n]),s>=0?(s>0&&(t.lastNeed=s-2),s):--n<r||s===-2?0:(s=v1(e[n]),s>=0?(s>0&&(s===2?s=0:t.lastNeed=s-3),s):0))}function TK(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function FK(t){var e=this.lastTotal-this.lastNeed,r=TK(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function IK(t,e){var r=BK(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function kK(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function RK(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function $K(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function NK(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function MK(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function jK(t){return t.toString(this.encoding)}function qK(t){return t&&t.length?this.write(t):""}});var E1=v((Bme,q3)=>{"use strict";var N3=ia(),{PromisePrototypeThen:LK,SymbolAsyncIterator:M3,SymbolIterator:j3}=gr(),{Buffer:UK}=Qn(),{ERR_INVALID_ARG_TYPE:VK,ERR_STREAM_NULL_VALUES:KK}=dn().codes;function HK(t,e,r){let n;if(typeof e=="string"||e instanceof UK)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let s;if(e&&e[M3])s=!0,n=e[M3]();else if(e&&e[j3])s=!1,n=e[j3]();else throw new VK("iterable",["Iterable"],e);let i=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;i._read=function(){o||(o=!0,u())},i._destroy=function(c,l){LK(a(c),()=>N3.nextTick(l,c),d=>N3.nextTick(l,d||c))};async function a(c){let l=c!=null,d=typeof n.throw=="function";if(l&&d){let{value:p,done:f}=await n.throw(c);if(await p,f)return}if(typeof n.return=="function"){let{value:p}=await n.return();await p}}async function u(){for(;;){try{let{value:c,done:l}=s?await n.next():n.next();if(l)i.push(null);else{let d=c&&typeof c.then=="function"?await c:c;if(d===null)throw o=!1,new KK;if(i.push(d))continue;o=!1}}catch(c){i.destroy(c)}break}}return i}q3.exports=HK});var yf=v((Tme,Q3)=>{var Pi=ia(),{ArrayPrototypeIndexOf:WK,NumberIsInteger:zK,NumberIsNaN:JK,NumberParseInt:GK,ObjectDefineProperties:V3,ObjectKeys:XK,ObjectSetPrototypeOf:K3,Promise:YK,SafeSet:ZK,SymbolAsyncIterator:QK,Symbol:eH}=gr();Q3.exports=et;et.ReadableState=C1;var{EventEmitter:tH}=Gd(),{Stream:oa,prependListener:rH}=_m(),{Buffer:_1}=Qn(),{addAbortSignal:nH}=hf(),iH=uo(),ct=us().debuglog("stream",t=>{ct=t}),sH=P3(),Zc=bu(),{getHighWaterMark:oH,getDefaultHighWaterMark:aH}=Am(),{aggregateTwoErrors:L3,codes:{ERR_INVALID_ARG_TYPE:uH,ERR_METHOD_NOT_IMPLEMENTED:cH,ERR_OUT_OF_RANGE:lH,ERR_STREAM_PUSH_AFTER_EOF:dH,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:fH}}=dn(),{validateObject:pH}=pf(),wu=eH("kPaused"),{StringDecoder:H3}=$3(),hH=E1();K3(et.prototype,oa.prototype);K3(et,oa);var S1=()=>{},{errorOrDestroy:Yc}=Zc;function C1(t,e,r){typeof r!="boolean"&&(r=e instanceof ms()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.readableObjectMode)),this.highWaterMark=t?oH(this,t,"readableHighWaterMark",r):aH(!1),this.buffer=new sH,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[wu]=null,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new H3(t.encoding),this.encoding=t.encoding)}function et(t){if(!(this instanceof et))return new et(t);let e=this instanceof ms();this._readableState=new C1(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&nH(t.signal,this)),oa.call(this,t),Zc.construct(this,()=>{this._readableState.needReadable&&Cm(this,this._readableState)})}et.prototype.destroy=Zc.destroy;et.prototype._undestroy=Zc.undestroy;et.prototype._destroy=function(t,e){e(t)};et.prototype[tH.captureRejectionSymbol]=function(t){this.destroy(t)};et.prototype.push=function(t,e){return W3(this,t,e,!1)};et.prototype.unshift=function(t,e){return W3(this,t,e,!0)};function W3(t,e,r,n){ct("readableAddChunk",e);let s=t._readableState,i;if(s.objectMode||(typeof e=="string"?(r=r||s.defaultEncoding,s.encoding!==r&&(n&&s.encoding?e=_1.from(e,r).toString(s.encoding):(e=_1.from(e,r),r=""))):e instanceof _1?r="":oa._isUint8Array(e)?(e=oa._uint8ArrayToBuffer(e),r=""):e!=null&&(i=new uH("chunk",["string","Buffer","Uint8Array"],e))),i)Yc(t,i);else if(e===null)s.reading=!1,gH(t,s);else if(s.objectMode||e&&e.length>0)if(n)if(s.endEmitted)Yc(t,new fH);else{if(s.destroyed||s.errored)return!1;D1(t,s,e,!0)}else if(s.ended)Yc(t,new dH);else{if(s.destroyed||s.errored)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?D1(t,s,e,!1):Cm(t,s)):D1(t,s,e,!1)}else n||(s.reading=!1,Cm(t,s));return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function D1(t,e,r,n){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Pm(t)),Cm(t,e)}et.prototype.isPaused=function(){let t=this._readableState;return t[wu]===!0||t.flowing===!1};et.prototype.setEncoding=function(t){let e=new H3(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,n="";for(let s of r)n+=e.write(s);return r.clear(),n!==""&&r.push(n),this._readableState.length=n.length,this};var mH=1073741824;function yH(t){if(t>mH)throw new lH("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function U3(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:JK(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}et.prototype.read=function(t){ct("read",t),t===void 0?t=NaN:zK(t)||(t=GK(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=yH(t)),t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return ct("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?A1(this):Pm(this),null;if(t=U3(t,e),t===0&&e.ended)return e.length===0&&A1(this),null;let n=e.needReadable;if(ct("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ct("length less than watermark",n)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)n=!1,ct("reading, ended or constructing",n);else if(n){ct("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0);try{this._read(e.highWaterMark)}catch(i){Yc(this,i)}e.sync=!1,e.reading||(t=U3(r,e))}let s;return t>0?s=Y3(t,e):s=null,s===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&A1(this)),s!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",s)),s};function gH(t,e){if(ct("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Pm(t):(e.needReadable=!1,e.emittedReadable=!0,z3(t))}}function Pm(t){let e=t._readableState;ct("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(ct("emitReadable",e.flowing),e.emittedReadable=!0,Pi.nextTick(z3,t))}function z3(t){let e=t._readableState;ct("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,G3(t)}function Cm(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,Pi.nextTick(bH,t,e))}function bH(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(ct("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}et.prototype._read=function(t){throw new cH("_read()")};et.prototype.pipe=function(t,e){let r=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new ZK(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(t),ct("pipe count=%d opts=%j",n.pipes.length,e);let i=(!e||e.end!==!1)&&t!==Pi.stdout&&t!==Pi.stderr?a:g;n.endEmitted?Pi.nextTick(i):r.once("end",i),t.on("unpipe",o);function o(S,A){ct("onunpipe"),S===r&&A&&A.hasUnpiped===!1&&(A.hasUnpiped=!0,l())}function a(){ct("onend"),t.end()}let u,c=!1;function l(){ct("cleanup"),t.removeListener("close",h),t.removeListener("finish",y),u&&t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",p),c=!0,u&&n.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&u()}function d(){c||(n.pipes.length===1&&n.pipes[0]===t?(ct("false write response, pause",0),n.awaitDrainWriters=t,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(t)&&(ct("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(t)),r.pause()),u||(u=vH(r,t),t.on("drain",u))}r.on("data",p);function p(S){ct("ondata");let A=t.write(S);ct("dest.write",A),A===!1&&d()}function f(S){if(ct("onerror",S),g(),t.removeListener("error",f),t.listenerCount("error")===0){let A=t._writableState||t._readableState;A&&!A.errorEmitted?Yc(t,S):t.emit("error",S)}}rH(t,"error",f);function h(){t.removeListener("finish",y),g()}t.once("close",h);function y(){ct("onfinish"),t.removeListener("close",h),g()}t.once("finish",y);function g(){ct("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?n.flowing&&d():n.flowing||(ct("pipe resume"),r.resume()),t};function vH(t,e){return function(){let n=t._readableState;n.awaitDrainWriters===e?(ct("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(ct("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(e)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}et.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let s=e.pipes;e.pipes=[],this.pause();for(let i=0;i<s.length;i++)s[i].emit("unpipe",this,{hasUnpiped:!1});return this}let n=WK(e.pipes,t);return n===-1?this:(e.pipes.splice(n,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};et.prototype.on=function(t,e){let r=oa.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,ct("on readable",n.length,n.reading),n.length?Pm(this):n.reading||Pi.nextTick(wH,this)),r};et.prototype.addListener=et.prototype.on;et.prototype.removeListener=function(t,e){let r=oa.prototype.removeListener.call(this,t,e);return t==="readable"&&Pi.nextTick(J3,this),r};et.prototype.off=et.prototype.removeListener;et.prototype.removeAllListeners=function(t){let e=oa.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&Pi.nextTick(J3,this),e};function J3(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[wu]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function wH(t){ct("readable nexttick read 0"),t.read(0)}et.prototype.resume=function(){let t=this._readableState;return t.flowing||(ct("resume"),t.flowing=!t.readableListening,EH(this,t)),t[wu]=!1,this};function EH(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Pi.nextTick(_H,t,e))}function _H(t,e){ct("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),G3(t),e.flowing&&!e.reading&&t.read(0)}et.prototype.pause=function(){return ct("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ct("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[wu]=!0,this};function G3(t){let e=t._readableState;for(ct("flow",e.flowing);e.flowing&&t.read()!==null;);}et.prototype.wrap=function(t){let e=!1;t.on("data",n=>{!this.push(n)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",n=>{Yc(this,n)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=XK(t);for(let n=1;n<r.length;n++){let s=r[n];this[s]===void 0&&typeof t[s]=="function"&&(this[s]=t[s].bind(t))}return this};et.prototype[QK]=function(){return X3(this)};et.prototype.iterator=function(t){return t!==void 0&&pH(t,"options"),X3(this,t)};function X3(t,e){typeof t.read!="function"&&(t=et.wrap(t,{objectMode:!0}));let r=SH(t,e);return r.stream=t,r}async function*SH(t,e){let r=S1;function n(o){this===t?(r(),r=S1):r=o}t.on("readable",n);let s,i=iH(t,{writable:!1},o=>{s=o?L3(s,o):null,r(),r=S1});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(s)throw s;if(s===null)return;await new YK(n)}}}catch(o){throw s=L3(s,o),s}finally{(s||e?.destroyOnReturn!==!1)&&(s===void 0||t._readableState.autoDestroy)?Zc.destroyer(t,null):(t.off("readable",n),i())}}V3(et.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});V3(C1.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[wu]!==!1},set(t){this[wu]=!!t}}});et._fromList=Y3;function Y3(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function A1(t){let e=t._readableState;ct("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,Pi.nextTick(DH,e,t))}function DH(t,e){if(ct("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)Pi.nextTick(AH,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function AH(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}et.from=function(t,e){return hH(et,t,e)};var x1;function Z3(){return x1===void 0&&(x1={}),x1}et.fromWeb=function(t,e){return Z3().newStreamReadableFromReadableStream(t,e)};et.toWeb=function(t,e){return Z3().newReadableStreamFromStreamReadable(t,e)};et.wrap=function(t,e){var r,n;return new et({objectMode:(r=(n=t.readableObjectMode)!==null&&n!==void 0?n:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(s,i){Zc.destroyer(t,s),i(s)}}).wrap(t)}});var k1=v((Fme,dO)=>{var Eu=ia(),{ArrayPrototypeSlice:rO,Error:xH,FunctionPrototypeSymbolHasInstance:nO,ObjectDefineProperty:iO,ObjectDefineProperties:CH,ObjectSetPrototypeOf:sO,StringPrototypeToLowerCase:PH,Symbol:OH,SymbolHasInstance:BH}=gr();dO.exports=Qt;Qt.WritableState=vf;var{EventEmitter:TH}=Gd(),gf=_m().Stream,{Buffer:Om}=Qn(),Fm=bu(),{addAbortSignal:FH}=hf(),{getHighWaterMark:IH,getDefaultHighWaterMark:kH}=Am(),{ERR_INVALID_ARG_TYPE:RH,ERR_METHOD_NOT_IMPLEMENTED:$H,ERR_MULTIPLE_CALLBACK:oO,ERR_STREAM_CANNOT_PIPE:NH,ERR_STREAM_DESTROYED:bf,ERR_STREAM_ALREADY_FINISHED:MH,ERR_STREAM_NULL_VALUES:jH,ERR_STREAM_WRITE_AFTER_END:qH,ERR_UNKNOWN_ENCODING:aO}=dn().codes,{errorOrDestroy:Qc}=Fm;sO(Qt.prototype,gf.prototype);sO(Qt,gf);function B1(){}var el=OH("kOnFinished");function vf(t,e,r){typeof r!="boolean"&&(r=e instanceof ms()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?IH(this,t,"writableHighWaterMark",r):kH(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(t&&t.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=UH.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Tm(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[el]=[]}function Tm(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}vf.prototype.getBuffer=function(){return rO(this.buffered,this.bufferedIndex)};iO(vf.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Qt(t){let e=this instanceof ms();if(!e&&!nO(Qt,this))return new Qt(t);this._writableState=new vf(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&FH(t.signal,this)),gf.call(this,t),Fm.construct(this,()=>{let r=this._writableState;r.writing||F1(this,r),I1(this,r)})}iO(Qt,BH,{__proto__:null,value:function(t){return nO(this,t)?!0:this!==Qt?!1:t&&t._writableState instanceof vf}});Qt.prototype.pipe=function(){Qc(this,new NH)};function uO(t,e,r,n){let s=t._writableState;if(typeof r=="function")n=r,r=s.defaultEncoding;else{if(!r)r=s.defaultEncoding;else if(r!=="buffer"&&!Om.isEncoding(r))throw new aO(r);typeof n!="function"&&(n=B1)}if(e===null)throw new jH;if(!s.objectMode)if(typeof e=="string")s.decodeStrings!==!1&&(e=Om.from(e,r),r="buffer");else if(e instanceof Om)r="buffer";else if(gf._isUint8Array(e))e=gf._uint8ArrayToBuffer(e),r="buffer";else throw new RH("chunk",["string","Buffer","Uint8Array"],e);let i;return s.ending?i=new qH:s.destroyed&&(i=new bf("write")),i?(Eu.nextTick(n,i),Qc(t,i,!0),i):(s.pendingcb++,LH(t,s,e,r,n))}Qt.prototype.write=function(t,e,r){return uO(this,t,e,r)===!0};Qt.prototype.cork=function(){this._writableState.corked++};Qt.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||F1(this,t))};Qt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=PH(e)),!Om.isEncoding(e))throw new aO(e);return this._writableState.defaultEncoding=e,this};function LH(t,e,r,n,s){let i=e.objectMode?1:r.length;e.length+=i;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:n,callback:s}),e.allBuffers&&n!=="buffer"&&(e.allBuffers=!1),e.allNoop&&s!==B1&&(e.allNoop=!1)):(e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,t._write(r,n,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function eO(t,e,r,n,s,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new bf("write")):r?t._writev(s,e.onwrite):t._write(s,i,e.onwrite),e.sync=!1}function tO(t,e,r,n){--e.pendingcb,n(r),T1(e),Qc(t,r)}function UH(t,e){let r=t._writableState,n=r.sync,s=r.writecb;if(typeof s!="function"){Qc(t,new oO);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),n?Eu.nextTick(tO,t,r,e,s):tO(t,r,e,s)):(r.buffered.length>r.bufferedIndex&&F1(t,r),n?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===s?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:s,stream:t,state:r},Eu.nextTick(VH,r.afterWriteTickInfo)):cO(t,r,1,s))}function VH({stream:t,state:e,count:r,cb:n}){return e.afterWriteTickInfo=null,cO(t,e,r,n)}function cO(t,e,r,n){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,n();e.destroyed&&T1(e),I1(t,e)}function T1(t){if(t.writing)return;for(let s=t.bufferedIndex;s<t.buffered.length;++s){var e;let{chunk:i,callback:o}=t.buffered[s],a=t.objectMode?1:i.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new bf("write"))}let r=t[el].splice(0);for(let s=0;s<r.length;s++){var n;r[s]((n=t.errored)!==null&&n!==void 0?n:new bf("end"))}Tm(t)}function F1(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:n,objectMode:s}=e,i=r.length-n;if(!i)return;let o=n;if(e.bufferProcessing=!0,i>1&&t._writev){e.pendingcb-=i-1;let a=e.allNoop?B1:c=>{for(let l=o;l<r.length;++l)r[l].callback(c)},u=e.allNoop&&o===0?r:rO(r,o);u.allBuffers=e.allBuffers,eO(t,e,!0,e.length,u,"",a),Tm(e)}else{do{let{chunk:a,encoding:u,callback:c}=r[o];r[o++]=null;let l=s?1:a.length;eO(t,e,!1,l,a,u,c)}while(o<r.length&&!e.writing);o===r.length?Tm(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}Qt.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new $H("_write()")};Qt.prototype._writev=null;Qt.prototype.end=function(t,e,r){let n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let s;if(t!=null){let i=uO(this,t,e);i instanceof xH&&(s=i)}return n.corked&&(n.corked=1,this.uncork()),s||(!n.errored&&!n.ending?(n.ending=!0,I1(this,n,!0),n.ended=!0):n.finished?s=new MH("end"):n.destroyed&&(s=new bf("end"))),typeof r=="function"&&(s||n.finished?Eu.nextTick(r,s):n[el].push(r)),this};function Bm(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function KH(t,e){let r=!1;function n(s){if(r){Qc(t,s??oO());return}if(r=!0,e.pendingcb--,s){let i=e[el].splice(0);for(let o=0;o<i.length;o++)i[o](s);Qc(t,s,e.sync)}else Bm(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,Eu.nextTick(O1,t,e))}e.sync=!0,e.pendingcb++;try{t._final(n)}catch(s){n(s)}e.sync=!1}function HH(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,KH(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function I1(t,e,r){Bm(e)&&(HH(t,e),e.pendingcb===0&&(r?(e.pendingcb++,Eu.nextTick((n,s)=>{Bm(s)?O1(n,s):s.pendingcb--},t,e)):Bm(e)&&(e.pendingcb++,O1(t,e))))}function O1(t,e){e.pendingcb--,e.finished=!0;let r=e[el].splice(0);for(let n=0;n<r.length;n++)r[n]();if(t.emit("finish"),e.autoDestroy){let n=t._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&t.destroy()}}CH(Qt.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var WH=Fm.destroy;Qt.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[el].length)&&Eu.nextTick(T1,r),WH.call(this,t,e),this};Qt.prototype._undestroy=Fm.undestroy;Qt.prototype._destroy=function(t,e){e(t)};Qt.prototype[TH.captureRejectionSymbol]=function(t){this.destroy(t)};var P1;function lO(){return P1===void 0&&(P1={}),P1}Qt.fromWeb=function(t,e){return lO().newStreamWritableFromWritableStream(t,e)};Qt.toWeb=function(t){return lO().newWritableStreamFromStreamWritable(t)}});var SO=v((Ime,_O)=>{var R1=ia(),zH=Qn(),{isReadable:JH,isWritable:GH,isIterable:fO,isNodeStream:XH,isReadableNodeStream:pO,isWritableNodeStream:hO,isDuplexNodeStream:YH}=fs(),mO=uo(),{AbortError:EO,codes:{ERR_INVALID_ARG_TYPE:ZH,ERR_INVALID_RETURN_VALUE:yO}}=dn(),{destroyer:tl}=bu(),QH=ms(),eW=yf(),{createDeferredPromise:gO}=us(),bO=E1(),vO=globalThis.Blob||zH.Blob,tW=typeof vO<"u"?function(e){return e instanceof vO}:function(e){return!1},rW=globalThis.AbortController||fm().AbortController,{FunctionPrototypeCall:wO}=gr(),_u=class extends QH{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};_O.exports=function t(e,r){if(YH(e))return e;if(pO(e))return Im({readable:e});if(hO(e))return Im({writable:e});if(XH(e))return Im({writable:!1,readable:!1});if(typeof e=="function"){let{value:s,write:i,final:o,destroy:a}=nW(e);if(fO(s))return bO(_u,s,{objectMode:!0,write:i,final:o,destroy:a});let u=s?.then;if(typeof u=="function"){let c,l=wO(u,s,d=>{if(d!=null)throw new yO("nully","body",d)},d=>{tl(c,d)});return c=new _u({objectMode:!0,readable:!1,write:i,final(d){o(async()=>{try{await l,R1.nextTick(d,null)}catch(p){R1.nextTick(d,p)}})},destroy:a})}throw new yO("Iterable, AsyncIterable or AsyncFunction",r,s)}if(tW(e))return t(e.arrayBuffer());if(fO(e))return bO(_u,e,{objectMode:!0,writable:!1});if(typeof e?.writable=="object"||typeof e?.readable=="object"){let s=e!=null&&e.readable?pO(e?.readable)?e?.readable:t(e.readable):void 0,i=e!=null&&e.writable?hO(e?.writable)?e?.writable:t(e.writable):void 0;return Im({readable:s,writable:i})}let n=e?.then;if(typeof n=="function"){let s;return wO(n,e,i=>{i!=null&&s.push(i),s.push(null)},i=>{tl(s,i)}),s=new _u({objectMode:!0,writable:!1,read(){}})}throw new ZH(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function nW(t){let{promise:e,resolve:r}=gO(),n=new rW,s=n.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:u,cb:c}=await o;if(R1.nextTick(c),u)return;if(s.aborted)throw new EO(void 0,{cause:s.reason});({promise:e,resolve:r}=gO()),yield a}}(),{signal:s}),write(o,a,u){let c=r;r=null,c({chunk:o,done:!1,cb:u})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){n.abort(),a(o)}}}function Im(t){let e=t.readable&&typeof t.readable.read!="function"?eW.wrap(t.readable):t.readable,r=t.writable,n=!!JH(e),s=!!GH(r),i,o,a,u,c;function l(d){let p=u;u=null,p?p(d):d&&c.destroy(d)}return c=new _u({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:n,writable:s}),s&&(mO(r,d=>{s=!1,d&&tl(e,d),l(d)}),c._write=function(d,p,f){r.write(d,p)?f():i=f},c._final=function(d){r.end(),o=d},r.on("drain",function(){if(i){let d=i;i=null,d()}}),r.on("finish",function(){if(o){let d=o;o=null,d()}})),n&&(mO(e,d=>{n=!1,d&&tl(e,d),l(d)}),e.on("readable",function(){if(a){let d=a;a=null,d()}}),e.on("end",function(){c.push(null)}),c._read=function(){for(;;){let d=e.read();if(d===null){a=c._read;return}if(!c.push(d))return}}),c._destroy=function(d,p){!d&&u!==null&&(d=new EO),a=null,i=null,o=null,u===null?p(d):(u=p,tl(r,d),tl(e,d))},c}});var ms=v((kme,xO)=>{"use strict";var{ObjectDefineProperties:iW,ObjectGetOwnPropertyDescriptor:co,ObjectKeys:sW,ObjectSetPrototypeOf:DO}=gr();xO.exports=Oi;var M1=yf(),ni=k1();DO(Oi.prototype,M1.prototype);DO(Oi,M1);{let t=sW(ni.prototype);for(let e=0;e<t.length;e++){let r=t[e];Oi.prototype[r]||(Oi.prototype[r]=ni.prototype[r])}}function Oi(t){if(!(this instanceof Oi))return new Oi(t);M1.call(this,t),ni.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}iW(Oi.prototype,{writable:{__proto__:null,...co(ni.prototype,"writable")},writableHighWaterMark:{__proto__:null,...co(ni.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...co(ni.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...co(ni.prototype,"writableBuffer")},writableLength:{__proto__:null,...co(ni.prototype,"writableLength")},writableFinished:{__proto__:null,...co(ni.prototype,"writableFinished")},writableCorked:{__proto__:null,...co(ni.prototype,"writableCorked")},writableEnded:{__proto__:null,...co(ni.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...co(ni.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var $1;function AO(){return $1===void 0&&($1={}),$1}Oi.fromWeb=function(t,e){return AO().newStreamDuplexFromReadableWritablePair(t,e)};Oi.toWeb=function(t){return AO().newReadableWritablePairFromDuplex(t)};var N1;Oi.from=function(t){return N1||(N1=SO()),N1(t,"body")}});var L1=v((Rme,PO)=>{"use strict";var{ObjectSetPrototypeOf:CO,Symbol:oW}=gr();PO.exports=lo;var{ERR_METHOD_NOT_IMPLEMENTED:aW}=dn().codes,q1=ms(),{getHighWaterMark:uW}=Am();CO(lo.prototype,q1.prototype);CO(lo,q1);var wf=oW("kCallback");function lo(t){if(!(this instanceof lo))return new lo(t);let e=t?uW(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),q1.call(this,t),this._readableState.sync=!1,this[wf]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",cW)}function j1(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function cW(){this._final!==j1&&j1.call(this)}lo.prototype._final=j1;lo.prototype._transform=function(t,e,r){throw new aW("_transform()")};lo.prototype._write=function(t,e,r){let n=this._readableState,s=this._writableState,i=n.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),s.ended||i===n.length||n.length<n.highWaterMark?r():this[wf]=r})};lo.prototype._read=function(){if(this[wf]){let t=this[wf];this[wf]=null,t()}}});var V1=v(($me,BO)=>{"use strict";var{ObjectSetPrototypeOf:OO}=gr();BO.exports=rl;var U1=L1();OO(rl.prototype,U1.prototype);OO(rl,U1);function rl(t){if(!(this instanceof rl))return new rl(t);U1.call(this,t)}rl.prototype._transform=function(t,e,r){r(null,t)}});var Nm=v((Nme,RO)=>{var Ef=ia(),{ArrayIsArray:lW,Promise:dW,SymbolAsyncIterator:fW}=gr(),$m=uo(),{once:pW}=us(),hW=bu(),TO=ms(),{aggregateTwoErrors:mW,codes:{ERR_INVALID_ARG_TYPE:Y1,ERR_INVALID_RETURN_VALUE:K1,ERR_MISSING_ARGS:yW,ERR_STREAM_DESTROYED:gW,ERR_STREAM_PREMATURE_CLOSE:bW},AbortError:vW}=dn(),{validateFunction:wW,validateAbortSignal:EW}=pf(),{isIterable:Su,isReadable:H1,isReadableNodeStream:Rm,isNodeStream:FO,isTransformStream:nl,isWebStream:_W,isReadableStream:W1,isReadableEnded:SW}=fs(),DW=globalThis.AbortController||fm().AbortController,z1,J1;function IO(t,e,r){let n=!1;t.on("close",()=>{n=!0});let s=$m(t,{readable:e,writable:r},i=>{n=!i});return{destroy:i=>{n||(n=!0,hW.destroyer(t,i||new gW("pipe")))},cleanup:s}}function AW(t){return wW(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function G1(t){if(Su(t))return t;if(Rm(t))return xW(t);throw new Y1("val",["Readable","Iterable","AsyncIterable"],t)}async function*xW(t){J1||(J1=yf()),yield*J1.prototype[fW].call(t)}async function km(t,e,r,{end:n}){let s,i=null,o=c=>{if(c&&(s=c),i){let l=i;i=null,l()}},a=()=>new dW((c,l)=>{s?l(s):i=()=>{s?l(s):c()}});e.on("drain",o);let u=$m(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let c of t)e.write(c)||await a();n&&e.end(),await a(),r()}catch(c){r(s!==c?mW(s,c):c)}finally{u(),e.off("drain",o)}}async function X1(t,e,r,{end:n}){nl(e)&&(e=e.writable);let s=e.getWriter();try{for await(let i of t)await s.ready,s.write(i).catch(()=>{});await s.ready,n&&await s.close(),r()}catch(i){try{await s.abort(i),r(i)}catch(o){r(o)}}}function CW(...t){return kO(t,pW(AW(t)))}function kO(t,e,r){if(t.length===1&&lW(t[0])&&(t=t[0]),t.length<2)throw new yW("streams");let n=new DW,s=n.signal,i=r?.signal,o=[];EW(i,"options.signal");function a(){f(new vW)}i?.addEventListener("abort",a);let u,c,l=[],d=0;function p(A){f(A,--d===0)}function f(A,w){if(A&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=A),!(!u&&!w)){for(;l.length;)l.shift()(u);i?.removeEventListener("abort",a),n.abort(),w&&(u||o.forEach(P=>P()),Ef.nextTick(e,u,c))}}let h;for(let A=0;A<t.length;A++){let w=t[A],P=A<t.length-1,D=A>0,O=P||r?.end!==!1,B=A===t.length-1;if(FO(w)){let F=function(N){N&&N.name!=="AbortError"&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(N)};var S=F;if(O){let{destroy:N,cleanup:R}=IO(w,P,D);l.push(N),H1(w)&&B&&o.push(R)}w.on("error",F),H1(w)&&B&&o.push(()=>{w.removeListener("error",F)})}if(A===0)if(typeof w=="function"){if(h=w({signal:s}),!Su(h))throw new K1("Iterable, AsyncIterable or Stream","source",h)}else Su(w)||Rm(w)||nl(w)?h=w:h=TO.from(w);else if(typeof w=="function"){if(nl(h)){var y;h=G1((y=h)===null||y===void 0?void 0:y.readable)}else h=G1(h);if(h=w(h,{signal:s}),P){if(!Su(h,!0))throw new K1("AsyncIterable",`transform[${A-1}]`,h)}else{var g;z1||(z1=V1());let F=new z1({objectMode:!0}),N=(g=h)===null||g===void 0?void 0:g.then;if(typeof N=="function")d++,N.call(h,M=>{c=M,M!=null&&F.write(M),O&&F.end(),Ef.nextTick(p)},M=>{F.destroy(M),Ef.nextTick(p,M)});else if(Su(h,!0))d++,km(h,F,p,{end:O});else if(W1(h)||nl(h)){let M=h.readable||h;d++,km(M,F,p,{end:O})}else throw new K1("AsyncIterable or Promise","destination",h);h=F;let{destroy:R,cleanup:q}=IO(h,!1,!0);l.push(R),B&&o.push(q)}}else if(FO(w)){if(Rm(h)){d+=2;let F=PW(h,w,p,{end:O});H1(w)&&B&&o.push(F)}else if(nl(h)||W1(h)){let F=h.readable||h;d++,km(F,w,p,{end:O})}else if(Su(h))d++,km(h,w,p,{end:O});else throw new Y1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=w}else if(_W(w)){if(Rm(h))d++,X1(G1(h),w,p,{end:O});else if(W1(h)||Su(h))d++,X1(h,w,p,{end:O});else if(nl(h))d++,X1(h.readable,w,p,{end:O});else throw new Y1("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],h);h=w}else h=TO.from(w)}return(s!=null&&s.aborted||i!=null&&i.aborted)&&Ef.nextTick(a),h}function PW(t,e,r,{end:n}){let s=!1;if(e.on("close",()=>{s||r(new bW)}),t.pipe(e,{end:!1}),n){let o=function(){s=!0,e.end()};var i=o;SW(t)?Ef.nextTick(o):t.once("end",o)}else r();return $m(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),$m(e,{readable:!1,writable:!0},r)}RO.exports={pipelineImpl:kO,pipeline:CW}});var Q1=v((Mme,LO)=>{"use strict";var{pipeline:OW}=Nm(),Mm=ms(),{destroyer:BW}=bu(),{isNodeStream:jm,isReadable:$O,isWritable:NO,isWebStream:Z1,isTransformStream:Du,isWritableStream:MO,isReadableStream:jO}=fs(),{AbortError:TW,codes:{ERR_INVALID_ARG_VALUE:qO,ERR_MISSING_ARGS:FW}}=dn(),IW=uo();LO.exports=function(...e){if(e.length===0)throw new FW("streams");if(e.length===1)return Mm.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=Mm.from(e[0])),typeof e[e.length-1]=="function"){let f=e.length-1;e[f]=Mm.from(e[f])}for(let f=0;f<e.length;++f)if(!(!jm(e[f])&&!Z1(e[f]))){if(f<e.length-1&&!($O(e[f])||jO(e[f])||Du(e[f])))throw new qO(`streams[${f}]`,r[f],"must be readable");if(f>0&&!(NO(e[f])||MO(e[f])||Du(e[f])))throw new qO(`streams[${f}]`,r[f],"must be writable")}let n,s,i,o,a;function u(f){let h=o;o=null,h?h(f):f?a.destroy(f):!p&&!d&&a.destroy()}let c=e[0],l=OW(e,u),d=!!(NO(c)||MO(c)||Du(c)),p=!!($O(l)||jO(l)||Du(l));if(a=new Mm({writableObjectMode:!!(c!=null&&c.writableObjectMode),readableObjectMode:!!(l!=null&&l.writableObjectMode),writable:d,readable:p}),d){if(jm(c))a._write=function(h,y,g){c.write(h,y)?g():n=g},a._final=function(h){c.end(),s=h},c.on("drain",function(){if(n){let h=n;n=null,h()}});else if(Z1(c)){let y=(Du(c)?c.writable:c).getWriter();a._write=async function(g,S,A){try{await y.ready,y.write(g).catch(()=>{}),A()}catch(w){A(w)}},a._final=async function(g){try{await y.ready,y.close().catch(()=>{}),s=g}catch(S){g(S)}}}let f=Du(l)?l.readable:l;IW(f,()=>{if(s){let h=s;s=null,h()}})}if(p){if(jm(l))l.on("readable",function(){if(i){let f=i;i=null,f()}}),l.on("end",function(){a.push(null)}),a._read=function(){for(;;){let f=l.read();if(f===null){i=a._read;return}if(!a.push(f))return}};else if(Z1(l)){let h=(Du(l)?l.readable:l).getReader();a._read=async function(){for(;;)try{let{value:y,done:g}=await h.read();if(!a.push(y))return;if(g){a.push(null);return}}catch{return}}}}return a._destroy=function(f,h){!f&&o!==null&&(f=new TW),i=null,n=null,s=null,o===null?h(f):(o=h,jm(l)&&BW(l,f))},a}});var GO=v((jme,rw)=>{"use strict";var HO=globalThis.AbortController||fm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:kW,ERR_INVALID_ARG_TYPE:_f,ERR_MISSING_ARGS:RW,ERR_OUT_OF_RANGE:$W},AbortError:ys}=dn(),{validateAbortSignal:Au,validateInteger:NW,validateObject:xu}=pf(),MW=gr().Symbol("kWeak"),{finished:jW}=uo(),qW=Q1(),{addAbortSignalNoValidate:LW}=hf(),{isWritable:UW,isNodeStream:VW}=fs(),{ArrayPrototypePush:KW,MathFloor:HW,Number:WW,NumberIsNaN:zW,Promise:UO,PromiseReject:VO,PromisePrototypeThen:JW,Symbol:WO}=gr(),qm=WO("kEmpty"),KO=WO("kEof");function GW(t,e){if(e!=null&&xu(e,"options"),e?.signal!=null&&Au(e.signal,"options.signal"),VW(t)&&!UW(t))throw new kW("stream",t,"must be writable");let r=qW(this,t);return e!=null&&e.signal&&LW(e.signal,r),r}function Lm(t,e){if(typeof t!="function")throw new _f("fn",["Function","AsyncFunction"],t);e!=null&&xu(e,"options"),e?.signal!=null&&Au(e.signal,"options.signal");let r=1;return e?.concurrency!=null&&(r=HW(e.concurrency)),NW(r,"concurrency",1),(async function*(){var s,i;let o=new HO,a=this,u=[],c=o.signal,l={signal:c},d=()=>o.abort();e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted&&d(),e==null||(i=e.signal)===null||i===void 0||i.addEventListener("abort",d);let p,f,h=!1;function y(){h=!0}async function g(){try{for await(let w of a){var S;if(h)return;if(c.aborted)throw new ys;try{w=t(w,l)}catch(P){w=VO(P)}w!==qm&&(typeof((S=w)===null||S===void 0?void 0:S.catch)=="function"&&w.catch(y),u.push(w),p&&(p(),p=null),!h&&u.length&&u.length>=r&&await new UO(P=>{f=P}))}u.push(KO)}catch(w){let P=VO(w);JW(P,void 0,y),u.push(P)}finally{var A;h=!0,p&&(p(),p=null),e==null||(A=e.signal)===null||A===void 0||A.removeEventListener("abort",d)}}g();try{for(;;){for(;u.length>0;){let S=await u[0];if(S===KO)return;if(c.aborted)throw new ys;S!==qm&&(yield S),u.shift(),f&&(f(),f=null)}await new UO(S=>{p=S})}}finally{o.abort(),h=!0,f&&(f(),f=null)}}).call(this)}function XW(t=void 0){return t!=null&&xu(t,"options"),t?.signal!=null&&Au(t.signal,"options.signal"),(async function*(){let r=0;for await(let s of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new ys({cause:t.signal.reason});yield[r++,s]}}).call(this)}async function zO(t,e=void 0){for await(let r of tw.call(this,t,e))return!0;return!1}async function YW(t,e=void 0){if(typeof t!="function")throw new _f("fn",["Function","AsyncFunction"],t);return!await zO.call(this,async(...r)=>!await t(...r),e)}async function ZW(t,e){for await(let r of tw.call(this,t,e))return r}async function QW(t,e){if(typeof t!="function")throw new _f("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s),qm}for await(let n of Lm.call(this,r,e));}function tw(t,e){if(typeof t!="function")throw new _f("fn",["Function","AsyncFunction"],t);async function r(n,s){return await t(n,s)?n:qm}return Lm.call(this,r,e)}var ew=class extends RW{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function ez(t,e,r){var n;if(typeof t!="function")throw new _f("reducer",["Function","AsyncFunction"],t);r!=null&&xu(r,"options"),r?.signal!=null&&Au(r.signal,"options.signal");let s=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){let c=new ys(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await jW(this.destroy(c)),c}let i=new HO,o=i.signal;if(r!=null&&r.signal){let c={once:!0,[MW]:this};r.signal.addEventListener("abort",()=>i.abort(),c)}let a=!1;try{for await(let c of this){var u;if(a=!0,r!=null&&(u=r.signal)!==null&&u!==void 0&&u.aborted)throw new ys;s?e=await t(e,c,{signal:o}):(e=c,s=!0)}if(!a&&!s)throw new ew}finally{i.abort()}return e}async function tz(t){t!=null&&xu(t,"options"),t?.signal!=null&&Au(t.signal,"options.signal");let e=[];for await(let n of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new ys(void 0,{cause:t.signal.reason});KW(e,n)}return e}function rz(t,e){let r=Lm.call(this,t,e);return(async function*(){for await(let s of r)yield*s}).call(this)}function JO(t){if(t=WW(t),zW(t))return 0;if(t<0)throw new $W("number",">= 0",t);return t}function nz(t,e=void 0){return e!=null&&xu(e,"options"),e?.signal!=null&&Au(e.signal,"options.signal"),t=JO(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ys;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new ys;t--<=0&&(yield i)}}).call(this)}function iz(t,e=void 0){return e!=null&&xu(e,"options"),e?.signal!=null&&Au(e.signal,"options.signal"),t=JO(t),(async function*(){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new ys;for await(let i of this){var s;if(e!=null&&(s=e.signal)!==null&&s!==void 0&&s.aborted)throw new ys;if(t-- >0)yield i;else return}}).call(this)}rw.exports.streamReturningOperators={asIndexedPairs:XW,drop:nz,filter:tw,flatMap:rz,map:Lm,take:iz,compose:GW};rw.exports.promiseReturningOperators={every:YW,forEach:QW,reduce:ez,toArray:tz,some:zO,find:ZW}});var nw=v((qme,XO)=>{"use strict";var{ArrayPrototypePop:sz,Promise:oz}=gr(),{isIterable:az,isNodeStream:uz,isWebStream:cz}=fs(),{pipelineImpl:lz}=Nm(),{finished:dz}=uo();iw();function fz(...t){return new oz((e,r)=>{let n,s,i=t[t.length-1];if(i&&typeof i=="object"&&!uz(i)&&!az(i)&&!cz(i)){let o=sz(t);n=o.signal,s=o.end}lz(t,(o,a)=>{o?r(o):e(a)},{signal:n,end:s})})}XO.exports={finished:dz,pipeline:fz}});var iw=v((Lme,s8)=>{var{Buffer:pz}=Qn(),{ObjectDefineProperty:fo,ObjectKeys:QO,ReflectApply:e8}=gr(),{promisify:{custom:t8}}=us(),{streamReturningOperators:YO,promiseReturningOperators:ZO}=GO(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:r8}}=dn(),hz=Q1(),{pipeline:n8}=Nm(),{destroyer:mz}=bu(),i8=uo(),sw=nw(),ow=fs(),dr=s8.exports=_m().Stream;dr.isDisturbed=ow.isDisturbed;dr.isErrored=ow.isErrored;dr.isReadable=ow.isReadable;dr.Readable=yf();for(let t of QO(YO)){let r=function(...n){if(new.target)throw r8();return dr.Readable.from(e8(e,this,n))};aw=r;let e=YO[t];fo(r,"name",{__proto__:null,value:e.name}),fo(r,"length",{__proto__:null,value:e.length}),fo(dr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var aw;for(let t of QO(ZO)){let r=function(...s){if(new.target)throw r8();return e8(e,this,s)};aw=r;let e=ZO[t];fo(r,"name",{__proto__:null,value:e.name}),fo(r,"length",{__proto__:null,value:e.length}),fo(dr.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var aw;dr.Writable=k1();dr.Duplex=ms();dr.Transform=L1();dr.PassThrough=V1();dr.pipeline=n8;var{addAbortSignal:yz}=hf();dr.addAbortSignal=yz;dr.finished=i8;dr.destroy=mz;dr.compose=hz;fo(dr,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return sw}});fo(n8,t8,{__proto__:null,enumerable:!0,get(){return sw.pipeline}});fo(i8,t8,{__proto__:null,enumerable:!0,get(){return sw.finished}});dr.Stream=dr;dr._isUint8Array=function(e){return e instanceof Uint8Array};dr._uint8ArrayToBuffer=function(e){return pz.from(e.buffer,e.byteOffset,e.byteLength)}});var uw=v((Ume,fr)=>{"use strict";var Sr=iw(),gz=nw(),bz=Sr.Readable.destroy;fr.exports=Sr.Readable;fr.exports._uint8ArrayToBuffer=Sr._uint8ArrayToBuffer;fr.exports._isUint8Array=Sr._isUint8Array;fr.exports.isDisturbed=Sr.isDisturbed;fr.exports.isErrored=Sr.isErrored;fr.exports.isReadable=Sr.isReadable;fr.exports.Readable=Sr.Readable;fr.exports.Writable=Sr.Writable;fr.exports.Duplex=Sr.Duplex;fr.exports.Transform=Sr.Transform;fr.exports.PassThrough=Sr.PassThrough;fr.exports.addAbortSignal=Sr.addAbortSignal;fr.exports.finished=Sr.finished;fr.exports.destroy=Sr.destroy;fr.exports.destroy=bz;fr.exports.pipeline=Sr.pipeline;fr.exports.compose=Sr.compose;Object.defineProperty(Sr,"promises",{configurable:!0,enumerable:!0,get(){return gz}});fr.exports.Stream=Sr.Stream;fr.exports.default=fr.exports});var uE=v((T0,TB)=>{(function(t,e){typeof T0=="object"&&typeof TB<"u"?e(T0):typeof define=="function"&&define.amd?define(["exports"],e):e(t.URI=t.URI||{})})(T0,function(t){"use strict";function e(){for(var T=arguments.length,C=Array(T),k=0;k<T;k++)C[k]=arguments[k];if(C.length>1){C[0]=C[0].slice(0,-1);for(var L=C.length-1,V=1;V<L;++V)C[V]=C[V].slice(1,-1);return C[L]=C[L].slice(1),C.join("")}else return C[0]}function r(T){return"(?:"+T+")"}function n(T){return T===void 0?"undefined":T===null?"null":Object.prototype.toString.call(T).split(" ").pop().split("]").shift().toLowerCase()}function s(T){return T.toUpperCase()}function i(T){return T!=null?T instanceof Array?T:typeof T.length!="number"||T.split||T.setInterval||T.call?[T]:Array.prototype.slice.call(T):[]}function o(T,C){var k=T;if(C)for(var L in C)k[L]=C[L];return k}function a(T){var C="[A-Za-z]",k="[\\x0D]",L="[0-9]",V="[\\x22]",ae=e(L,"[A-Fa-f]"),Ve="[\\x0A]",vt="[\\x20]",Pt=r(r("%[EFef]"+ae+"%"+ae+ae+"%"+ae+ae)+"|"+r("%[89A-Fa-f]"+ae+"%"+ae+ae)+"|"+r("%"+ae+ae)),mr="[\\:\\/\\?\\#\\[\\]\\@]",mt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Yt=e(mr,mt),yr=T?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ht=T?"[\\uE000-\\uF8FF]":"[]",_t=e(C,L,"[\\-\\.\\_\\~]",yr),Zt=r(C+e(C,L,"[\\+\\-\\.]")+"*"),Ft=r(r(Pt+"|"+e(_t,mt,"[\\:]"))+"*"),Wa=r(r("25[0-5]")+"|"+r("2[0-4]"+L)+"|"+r("1"+L+L)+"|"+r("[1-9]"+L)+"|"+L),$n=r(r("25[0-5]")+"|"+r("2[0-4]"+L)+"|"+r("1"+L+L)+"|"+r("0?[1-9]"+L)+"|0?0?"+L),Xn=r($n+"\\."+$n+"\\."+$n+"\\."+$n),$t=r(ae+"{1,4}"),Nn=r(r($t+"\\:"+$t)+"|"+Xn),Yn=r(r($t+"\\:")+"{6}"+Nn),es=r("\\:\\:"+r($t+"\\:")+"{5}"+Nn),za=r(r($t)+"?\\:\\:"+r($t+"\\:")+"{4}"+Nn),Js=r(r(r($t+"\\:")+"{0,1}"+$t)+"?\\:\\:"+r($t+"\\:")+"{3}"+Nn),Rd=r(r(r($t+"\\:")+"{0,2}"+$t)+"?\\:\\:"+r($t+"\\:")+"{2}"+Nn),Ch=r(r(r($t+"\\:")+"{0,3}"+$t)+"?\\:\\:"+$t+"\\:"+Nn),Ph=r(r(r($t+"\\:")+"{0,4}"+$t)+"?\\:\\:"+Nn),Dc=r(r(r($t+"\\:")+"{0,5}"+$t)+"?\\:\\:"+$t),Ac=r(r(r($t+"\\:")+"{0,6}"+$t)+"?\\:\\:"),Gs=r([Yn,es,za,Js,Rd,Ch,Ph,Dc,Ac].join("|")),xc=r(r(_t+"|"+Pt)+"+"),Ib=r(Gs+"\\%25"+xc),Ja=r(Gs+r("\\%25|\\%(?!"+ae+"{2})")+xc),Jq=r("[vV]"+ae+"+\\."+e(_t,mt,"[\\:]")+"+"),Gq=r("\\["+r(Ja+"|"+Gs+"|"+Jq)+"\\]"),Ex=r(r(Pt+"|"+e(_t,mt))+"*"),$d=r(Gq+"|"+Xn+"(?!"+Ex+")|"+Ex),Nd=r(L+"*"),_x=r(r(Ft+"@")+"?"+$d+r("\\:"+Nd)+"?"),Md=r(Pt+"|"+e(_t,mt,"[\\:\\@]")),Xq=r(Md+"*"),Sx=r(Md+"+"),Yq=r(r(Pt+"|"+e(_t,mt,"[\\@]"))+"+"),Xs=r(r("\\/"+Xq)+"*"),Cc=r("\\/"+r(Sx+Xs)+"?"),kb=r(Yq+Xs),Oh=r(Sx+Xs),Pc="(?!"+Md+")",Fpe=r(Xs+"|"+Cc+"|"+kb+"|"+Oh+"|"+Pc),Oc=r(r(Md+"|"+e("[\\/\\?]",Ht))+"*"),jd=r(r(Md+"|[\\/\\?]")+"*"),Dx=r(r("\\/\\/"+_x+Xs)+"|"+Cc+"|"+Oh+"|"+Pc),Zq=r(Zt+"\\:"+Dx+r("\\?"+Oc)+"?"+r("\\#"+jd)+"?"),Qq=r(r("\\/\\/"+_x+Xs)+"|"+Cc+"|"+kb+"|"+Pc),e7=r(Qq+r("\\?"+Oc)+"?"+r("\\#"+jd)+"?"),Ipe=r(Zq+"|"+e7),kpe=r(Zt+"\\:"+Dx+r("\\?"+Oc)+"?"),Rpe="^("+Zt+")\\:"+r(r("\\/\\/("+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?)")+"?("+Xs+"|"+Cc+"|"+Oh+"|"+Pc+")")+r("\\?("+Oc+")")+"?"+r("\\#("+jd+")")+"?$",$pe="^(){0}"+r(r("\\/\\/("+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?)")+"?("+Xs+"|"+Cc+"|"+kb+"|"+Pc+")")+r("\\?("+Oc+")")+"?"+r("\\#("+jd+")")+"?$",Npe="^("+Zt+")\\:"+r(r("\\/\\/("+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?)")+"?("+Xs+"|"+Cc+"|"+Oh+"|"+Pc+")")+r("\\?("+Oc+")")+"?$",Mpe="^"+r("\\#("+jd+")")+"?$",jpe="^"+r("("+Ft+")@")+"?("+$d+")"+r("\\:("+Nd+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",C,L,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",_t,mt),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",_t,mt),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",_t,mt),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",_t,mt),"g"),NOT_QUERY:new RegExp(e("[^\\%]",_t,mt,"[\\:\\@\\/\\?]",Ht),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",_t,mt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",_t,mt),"g"),UNRESERVED:new RegExp(_t,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",_t,Yt),"g"),PCT_ENCODED:new RegExp(Pt,"g"),IPV4ADDRESS:new RegExp("^("+Xn+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Gs+")"+r(r("\\%25|\\%(?!"+ae+"{2})")+"("+xc+")")+"?\\]?$")}}var u=a(!1),c=a(!0),l=function(){function T(C,k){var L=[],V=!0,ae=!1,Ve=void 0;try{for(var vt=C[Symbol.iterator](),Pt;!(V=(Pt=vt.next()).done)&&(L.push(Pt.value),!(k&&L.length===k));V=!0);}catch(mr){ae=!0,Ve=mr}finally{try{!V&&vt.return&&vt.return()}finally{if(ae)throw Ve}}return L}return function(C,k){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return T(C,k);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(T){if(Array.isArray(T)){for(var C=0,k=Array(T.length);C<T.length;C++)k[C]=T[C];return k}else return Array.from(T)},p=2147483647,f=36,h=1,y=26,g=38,S=700,A=72,w=128,P="-",D=/^xn--/,O=/[^\0-\x7E]/,B=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=f-h,R=Math.floor,q=String.fromCharCode;function M(T){throw new RangeError(F[T])}function Z(T,C){for(var k=[],L=T.length;L--;)k[L]=C(T[L]);return k}function Q(T,C){var k=T.split("@"),L="";k.length>1&&(L=k[0]+"@",T=k[1]),T=T.replace(B,".");var V=T.split("."),ae=Z(V,C).join(".");return L+ae}function U(T){for(var C=[],k=0,L=T.length;k<L;){var V=T.charCodeAt(k++);if(V>=55296&&V<=56319&&k<L){var ae=T.charCodeAt(k++);(ae&64512)==56320?C.push(((V&1023)<<10)+(ae&1023)+65536):(C.push(V),k--)}else C.push(V)}return C}var G=function(C){return String.fromCodePoint.apply(String,d(C))},ee=function(C){return C-48<10?C-22:C-65<26?C-65:C-97<26?C-97:f},z=function(C,k){return C+22+75*(C<26)-((k!=0)<<5)},$=function(C,k,L){var V=0;for(C=L?R(C/S):C>>1,C+=R(C/k);C>N*y>>1;V+=f)C=R(C/N);return R(V+(N+1)*C/(C+g))},j=function(C){var k=[],L=C.length,V=0,ae=w,Ve=A,vt=C.lastIndexOf(P);vt<0&&(vt=0);for(var Pt=0;Pt<vt;++Pt)C.charCodeAt(Pt)>=128&&M("not-basic"),k.push(C.charCodeAt(Pt));for(var mr=vt>0?vt+1:0;mr<L;){for(var mt=V,Yt=1,yr=f;;yr+=f){mr>=L&&M("invalid-input");var Ht=ee(C.charCodeAt(mr++));(Ht>=f||Ht>R((p-V)/Yt))&&M("overflow"),V+=Ht*Yt;var _t=yr<=Ve?h:yr>=Ve+y?y:yr-Ve;if(Ht<_t)break;var Zt=f-_t;Yt>R(p/Zt)&&M("overflow"),Yt*=Zt}var Ft=k.length+1;Ve=$(V-mt,Ft,mt==0),R(V/Ft)>p-ae&&M("overflow"),ae+=R(V/Ft),V%=Ft,k.splice(V++,0,ae)}return String.fromCodePoint.apply(String,k)},Y=function(C){var k=[];C=U(C);var L=C.length,V=w,ae=0,Ve=A,vt=!0,Pt=!1,mr=void 0;try{for(var mt=C[Symbol.iterator](),Yt;!(vt=(Yt=mt.next()).done);vt=!0){var yr=Yt.value;yr<128&&k.push(q(yr))}}catch(Ja){Pt=!0,mr=Ja}finally{try{!vt&&mt.return&&mt.return()}finally{if(Pt)throw mr}}var Ht=k.length,_t=Ht;for(Ht&&k.push(P);_t<L;){var Zt=p,Ft=!0,Wa=!1,$n=void 0;try{for(var Xn=C[Symbol.iterator](),$t;!(Ft=($t=Xn.next()).done);Ft=!0){var Nn=$t.value;Nn>=V&&Nn<Zt&&(Zt=Nn)}}catch(Ja){Wa=!0,$n=Ja}finally{try{!Ft&&Xn.return&&Xn.return()}finally{if(Wa)throw $n}}var Yn=_t+1;Zt-V>R((p-ae)/Yn)&&M("overflow"),ae+=(Zt-V)*Yn,V=Zt;var es=!0,za=!1,Js=void 0;try{for(var Rd=C[Symbol.iterator](),Ch;!(es=(Ch=Rd.next()).done);es=!0){var Ph=Ch.value;if(Ph<V&&++ae>p&&M("overflow"),Ph==V){for(var Dc=ae,Ac=f;;Ac+=f){var Gs=Ac<=Ve?h:Ac>=Ve+y?y:Ac-Ve;if(Dc<Gs)break;var xc=Dc-Gs,Ib=f-Gs;k.push(q(z(Gs+xc%Ib,0))),Dc=R(xc/Ib)}k.push(q(z(Dc,0))),Ve=$(ae,Yn,_t==Ht),ae=0,++_t}}}catch(Ja){za=!0,Js=Ja}finally{try{!es&&Rd.return&&Rd.return()}finally{if(za)throw Js}}++ae,++V}return k.join("")},se=function(C){return Q(C,function(k){return D.test(k)?j(k.slice(4).toLowerCase()):k})},pe=function(C){return Q(C,function(k){return O.test(k)?"xn--"+Y(k):k})},oe={version:"2.1.0",ucs2:{decode:U,encode:G},decode:j,encode:Y,toASCII:pe,toUnicode:se},he={};function Ee(T){var C=T.charCodeAt(0),k=void 0;return C<16?k="%0"+C.toString(16).toUpperCase():C<128?k="%"+C.toString(16).toUpperCase():C<2048?k="%"+(C>>6|192).toString(16).toUpperCase()+"%"+(C&63|128).toString(16).toUpperCase():k="%"+(C>>12|224).toString(16).toUpperCase()+"%"+(C>>6&63|128).toString(16).toUpperCase()+"%"+(C&63|128).toString(16).toUpperCase(),k}function Pe(T){for(var C="",k=0,L=T.length;k<L;){var V=parseInt(T.substr(k+1,2),16);if(V<128)C+=String.fromCharCode(V),k+=3;else if(V>=194&&V<224){if(L-k>=6){var ae=parseInt(T.substr(k+4,2),16);C+=String.fromCharCode((V&31)<<6|ae&63)}else C+=T.substr(k,6);k+=6}else if(V>=224){if(L-k>=9){var Ve=parseInt(T.substr(k+4,2),16),vt=parseInt(T.substr(k+7,2),16);C+=String.fromCharCode((V&15)<<12|(Ve&63)<<6|vt&63)}else C+=T.substr(k,9);k+=9}else C+=T.substr(k,3),k+=3}return C}function Ie(T,C){function k(L){var V=Pe(L);return V.match(C.UNRESERVED)?V:L}return T.scheme&&(T.scheme=String(T.scheme).replace(C.PCT_ENCODED,k).toLowerCase().replace(C.NOT_SCHEME,"")),T.userinfo!==void 0&&(T.userinfo=String(T.userinfo).replace(C.PCT_ENCODED,k).replace(C.NOT_USERINFO,Ee).replace(C.PCT_ENCODED,s)),T.host!==void 0&&(T.host=String(T.host).replace(C.PCT_ENCODED,k).toLowerCase().replace(C.NOT_HOST,Ee).replace(C.PCT_ENCODED,s)),T.path!==void 0&&(T.path=String(T.path).replace(C.PCT_ENCODED,k).replace(T.scheme?C.NOT_PATH:C.NOT_PATH_NOSCHEME,Ee).replace(C.PCT_ENCODED,s)),T.query!==void 0&&(T.query=String(T.query).replace(C.PCT_ENCODED,k).replace(C.NOT_QUERY,Ee).replace(C.PCT_ENCODED,s)),T.fragment!==void 0&&(T.fragment=String(T.fragment).replace(C.PCT_ENCODED,k).replace(C.NOT_FRAGMENT,Ee).replace(C.PCT_ENCODED,s)),T}function ze(T){return T.replace(/^0*(.*)/,"$1")||"0"}function at(T,C){var k=T.match(C.IPV4ADDRESS)||[],L=l(k,2),V=L[1];return V?V.split(".").map(ze).join("."):T}function dt(T,C){var k=T.match(C.IPV6ADDRESS)||[],L=l(k,3),V=L[1],ae=L[2];if(V){for(var Ve=V.toLowerCase().split("::").reverse(),vt=l(Ve,2),Pt=vt[0],mr=vt[1],mt=mr?mr.split(":").map(ze):[],Yt=Pt.split(":").map(ze),yr=C.IPV4ADDRESS.test(Yt[Yt.length-1]),Ht=yr?7:8,_t=Yt.length-Ht,Zt=Array(Ht),Ft=0;Ft<Ht;++Ft)Zt[Ft]=mt[Ft]||Yt[_t+Ft]||"";yr&&(Zt[Ht-1]=at(Zt[Ht-1],C));var Wa=Zt.reduce(function(Yn,es,za){if(!es||es==="0"){var Js=Yn[Yn.length-1];Js&&Js.index+Js.length===za?Js.length++:Yn.push({index:za,length:1})}return Yn},[]),$n=Wa.sort(function(Yn,es){return es.length-Yn.length})[0],Xn=void 0;if($n&&$n.length>1){var $t=Zt.slice(0,$n.index),Nn=Zt.slice($n.index+$n.length);Xn=$t.join(":")+"::"+Nn.join(":")}else Xn=Zt.join(":");return ae&&(Xn+="%"+ae),Xn}else return T}var Je=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,qt="".match(/(){0}/)[1]===void 0;function Dt(T){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k={},L=C.iri!==!1?c:u;C.reference==="suffix"&&(T=(C.scheme?C.scheme+":":"")+"//"+T);var V=T.match(Je);if(V){qt?(k.scheme=V[1],k.userinfo=V[3],k.host=V[4],k.port=parseInt(V[5],10),k.path=V[6]||"",k.query=V[7],k.fragment=V[8],isNaN(k.port)&&(k.port=V[5])):(k.scheme=V[1]||void 0,k.userinfo=T.indexOf("@")!==-1?V[3]:void 0,k.host=T.indexOf("//")!==-1?V[4]:void 0,k.port=parseInt(V[5],10),k.path=V[6]||"",k.query=T.indexOf("?")!==-1?V[7]:void 0,k.fragment=T.indexOf("#")!==-1?V[8]:void 0,isNaN(k.port)&&(k.port=T.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?V[4]:void 0)),k.host&&(k.host=dt(at(k.host,L),L)),k.scheme===void 0&&k.userinfo===void 0&&k.host===void 0&&k.port===void 0&&!k.path&&k.query===void 0?k.reference="same-document":k.scheme===void 0?k.reference="relative":k.fragment===void 0?k.reference="absolute":k.reference="uri",C.reference&&C.reference!=="suffix"&&C.reference!==k.reference&&(k.error=k.error||"URI is not a "+C.reference+" reference.");var ae=he[(C.scheme||k.scheme||"").toLowerCase()];if(!C.unicodeSupport&&(!ae||!ae.unicodeSupport)){if(k.host&&(C.domainHost||ae&&ae.domainHost))try{k.host=oe.toASCII(k.host.replace(L.PCT_ENCODED,Pe).toLowerCase())}catch(Ve){k.error=k.error||"Host's domain name can not be converted to ASCII via punycode: "+Ve}Ie(k,u)}else Ie(k,L);ae&&ae.parse&&ae.parse(k,C)}else k.error=k.error||"URI can not be parsed.";return k}function Qr(T,C){var k=C.iri!==!1?c:u,L=[];return T.userinfo!==void 0&&(L.push(T.userinfo),L.push("@")),T.host!==void 0&&L.push(dt(at(String(T.host),k),k).replace(k.IPV6ADDRESS,function(V,ae,Ve){return"["+ae+(Ve?"%25"+Ve:"")+"]"})),(typeof T.port=="number"||typeof T.port=="string")&&(L.push(":"),L.push(String(T.port))),L.length?L.join(""):void 0}var or=/^\.\.?\//,Yi=/^\/\.(\/|$)/,Si=/^\/\.\.(\/|$)/,zs=/^\/?(?:.|\n)*?(?=\/|$)/;function ar(T){for(var C=[];T.length;)if(T.match(or))T=T.replace(or,"");else if(T.match(Yi))T=T.replace(Yi,"/");else if(T.match(Si))T=T.replace(Si,"/"),C.pop();else if(T==="."||T==="..")T="";else{var k=T.match(zs);if(k){var L=k[0];T=T.slice(L.length),C.push(L)}else throw new Error("Unexpected dot segment condition")}return C.join("")}function vn(T){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=C.iri?c:u,L=[],V=he[(C.scheme||T.scheme||"").toLowerCase()];if(V&&V.serialize&&V.serialize(T,C),T.host&&!k.IPV6ADDRESS.test(T.host)){if(C.domainHost||V&&V.domainHost)try{T.host=C.iri?oe.toUnicode(T.host):oe.toASCII(T.host.replace(k.PCT_ENCODED,Pe).toLowerCase())}catch(vt){T.error=T.error||"Host's domain name can not be converted to "+(C.iri?"Unicode":"ASCII")+" via punycode: "+vt}}Ie(T,k),C.reference!=="suffix"&&T.scheme&&(L.push(T.scheme),L.push(":"));var ae=Qr(T,C);if(ae!==void 0&&(C.reference!=="suffix"&&L.push("//"),L.push(ae),T.path&&T.path.charAt(0)!=="/"&&L.push("/")),T.path!==void 0){var Ve=T.path;!C.absolutePath&&(!V||!V.absolutePath)&&(Ve=ar(Ve)),ae===void 0&&(Ve=Ve.replace(/^\/\//,"/%2F")),L.push(Ve)}return T.query!==void 0&&(L.push("?"),L.push(T.query)),T.fragment!==void 0&&(L.push("#"),L.push(T.fragment)),L.join("")}function zo(T,C){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},L=arguments[3],V={};return L||(T=Dt(vn(T,k),k),C=Dt(vn(C,k),k)),k=k||{},!k.tolerant&&C.scheme?(V.scheme=C.scheme,V.userinfo=C.userinfo,V.host=C.host,V.port=C.port,V.path=ar(C.path||""),V.query=C.query):(C.userinfo!==void 0||C.host!==void 0||C.port!==void 0?(V.userinfo=C.userinfo,V.host=C.host,V.port=C.port,V.path=ar(C.path||""),V.query=C.query):(C.path?(C.path.charAt(0)==="/"?V.path=ar(C.path):((T.userinfo!==void 0||T.host!==void 0||T.port!==void 0)&&!T.path?V.path="/"+C.path:T.path?V.path=T.path.slice(0,T.path.lastIndexOf("/")+1)+C.path:V.path=C.path,V.path=ar(V.path)),V.query=C.query):(V.path=T.path,C.query!==void 0?V.query=C.query:V.query=T.query),V.userinfo=T.userinfo,V.host=T.host,V.port=T.port),V.scheme=T.scheme),V.fragment=C.fragment,V}function ft(T,C,k){var L=o({scheme:"null"},k);return vn(zo(Dt(T,L),Dt(C,L),L,!0),L)}function Xt(T,C){return typeof T=="string"?T=vn(Dt(T,C),C):n(T)==="object"&&(T=Dt(vn(T,C),C)),T}function Be(T,C,k){return typeof T=="string"?T=vn(Dt(T,k),k):n(T)==="object"&&(T=vn(T,k)),typeof C=="string"?C=vn(Dt(C,k),k):n(C)==="object"&&(C=vn(C,k)),T===C}function ur(T,C){return T&&T.toString().replace(!C||!C.iri?u.ESCAPE:c.ESCAPE,Ee)}function bt(T,C){return T&&T.toString().replace(!C||!C.iri?u.PCT_ENCODED:c.PCT_ENCODED,Pe)}var Zi={scheme:"http",domainHost:!0,parse:function(C,k){return C.host||(C.error=C.error||"HTTP URIs must have a host."),C},serialize:function(C,k){var L=String(C.scheme).toLowerCase()==="https";return(C.port===(L?443:80)||C.port==="")&&(C.port=void 0),C.path||(C.path="/"),C}},Ka={scheme:"https",domainHost:Zi.domainHost,parse:Zi.parse,serialize:Zi.serialize};function wn(T){return typeof T.secure=="boolean"?T.secure:String(T.scheme).toLowerCase()==="wss"}var Qi={scheme:"ws",domainHost:!0,parse:function(C,k){var L=C;return L.secure=wn(L),L.resourceName=(L.path||"/")+(L.query?"?"+L.query:""),L.path=void 0,L.query=void 0,L},serialize:function(C,k){if((C.port===(wn(C)?443:80)||C.port==="")&&(C.port=void 0),typeof C.secure=="boolean"&&(C.scheme=C.secure?"wss":"ws",C.secure=void 0),C.resourceName){var L=C.resourceName.split("?"),V=l(L,2),ae=V[0],Ve=V[1];C.path=ae&&ae!=="/"?ae:void 0,C.query=Ve,C.resourceName=void 0}return C.fragment=void 0,C}},Di={scheme:"wss",domainHost:Qi.domainHost,parse:Qi.parse,serialize:Qi.serialize},nr={},Dh=!0,Ah="[A-Za-z0-9\\-\\.\\_\\~"+(Dh?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",At="[0-9A-Fa-f]",cn=r(r("%[EFef]"+At+"%"+At+At+"%"+At+At)+"|"+r("%[89A-Fa-f]"+At+"%"+At+At)+"|"+r("%"+At+At)),Ha="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Sc="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",xh=e(Sc,'[\\"\\\\]'),Tb="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Fb=new RegExp(Ah,"g"),m=new RegExp(cn,"g"),E=new RegExp(e("[^]",Ha,"[\\.]",'[\\"]',xh),"g"),b=new RegExp(e("[^]",Ah,Tb),"g"),_=b;function x(T){var C=Pe(T);return C.match(Fb)?C:T}var K={scheme:"mailto",parse:function(C,k){var L=C,V=L.to=L.path?L.path.split(","):[];if(L.path=void 0,L.query){for(var ae=!1,Ve={},vt=L.query.split("&"),Pt=0,mr=vt.length;Pt<mr;++Pt){var mt=vt[Pt].split("=");switch(mt[0]){case"to":for(var Yt=mt[1].split(","),yr=0,Ht=Yt.length;yr<Ht;++yr)V.push(Yt[yr]);break;case"subject":L.subject=bt(mt[1],k);break;case"body":L.body=bt(mt[1],k);break;default:ae=!0,Ve[bt(mt[0],k)]=bt(mt[1],k);break}}ae&&(L.headers=Ve)}L.query=void 0;for(var _t=0,Zt=V.length;_t<Zt;++_t){var Ft=V[_t].split("@");if(Ft[0]=bt(Ft[0]),k.unicodeSupport)Ft[1]=bt(Ft[1],k).toLowerCase();else try{Ft[1]=oe.toASCII(bt(Ft[1],k).toLowerCase())}catch(Wa){L.error=L.error||"Email address's domain name can not be converted to ASCII via punycode: "+Wa}V[_t]=Ft.join("@")}return L},serialize:function(C,k){var L=C,V=i(C.to);if(V){for(var ae=0,Ve=V.length;ae<Ve;++ae){var vt=String(V[ae]),Pt=vt.lastIndexOf("@"),mr=vt.slice(0,Pt).replace(m,x).replace(m,s).replace(E,Ee),mt=vt.slice(Pt+1);try{mt=k.iri?oe.toUnicode(mt):oe.toASCII(bt(mt,k).toLowerCase())}catch(_t){L.error=L.error||"Email address's domain name can not be converted to "+(k.iri?"Unicode":"ASCII")+" via punycode: "+_t}V[ae]=mr+"@"+mt}L.path=V.join(",")}var Yt=C.headers=C.headers||{};C.subject&&(Yt.subject=C.subject),C.body&&(Yt.body=C.body);var yr=[];for(var Ht in Yt)Yt[Ht]!==nr[Ht]&&yr.push(Ht.replace(m,x).replace(m,s).replace(b,Ee)+"="+Yt[Ht].replace(m,x).replace(m,s).replace(_,Ee));return yr.length&&(L.query=yr.join("&")),L}},X=/^([^\:]+)\:(.*)/,te={scheme:"urn",parse:function(C,k){var L=C.path&&C.path.match(X),V=C;if(L){var ae=k.scheme||V.scheme||"urn",Ve=L[1].toLowerCase(),vt=L[2],Pt=ae+":"+(k.nid||Ve),mr=he[Pt];V.nid=Ve,V.nss=vt,V.path=void 0,mr&&(V=mr.parse(V,k))}else V.error=V.error||"URN can not be parsed.";return V},serialize:function(C,k){var L=k.scheme||C.scheme||"urn",V=C.nid,ae=L+":"+(k.nid||V),Ve=he[ae];Ve&&(C=Ve.serialize(C,k));var vt=C,Pt=C.nss;return vt.path=(V||k.nid)+":"+Pt,vt}},fe=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ot={scheme:"urn:uuid",parse:function(C,k){var L=C;return L.uuid=L.nss,L.nss=void 0,!k.tolerant&&(!L.uuid||!L.uuid.match(fe))&&(L.error=L.error||"UUID is not valid."),L},serialize:function(C,k){var L=C;return L.nss=(C.uuid||"").toLowerCase(),L}};he[Zi.scheme]=Zi,he[Ka.scheme]=Ka,he[Qi.scheme]=Qi,he[Di.scheme]=Di,he[K.scheme]=K,he[te.scheme]=te,he[ot.scheme]=ot,t.SCHEMES=he,t.pctEncChar=Ee,t.pctDecChars=Pe,t.parse=Dt,t.removeDotSegments=ar,t.serialize=vn,t.resolveComponents=zo,t.resolve=ft,t.normalize=Xt,t.equal=Be,t.escapeComponent=ur,t.unescapeComponent=bt,Object.defineProperty(t,"__esModule",{value:!0})})});var IB=v((Xve,FB)=>{"use strict";FB.exports=function t(e){if(typeof e=="number"&&isNaN(e))throw new Error("NaN is not allowed");if(typeof e=="number"&&!isFinite(e))throw new Error("Infinity is not allowed");return e===null||typeof e!="object"?JSON.stringify(e):e.toJSON instanceof Function?t(e.toJSON()):Array.isArray(e)?`[${e.reduce((s,i,o)=>`${s}${o===0?"":","}${t(i===void 0||typeof i=="symbol"?null:i)}`,"")}]`:`{${Object.keys(e).sort().reduce((n,s)=>{if(e[s]===void 0||typeof e[s]=="symbol")return n;let i=n.length===0?"":",";return`${n}${i}${t(s)}:${t(e[s])}`},"")}}`}});var $B=v((Qve,RB)=>{"use strict";function ZG(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var s=t.charAt(n),i=s.charCodeAt(0);if(e[i]!==255)throw new TypeError(s+" is ambiguous");e[i]=n}var o=t.length,a=t.charAt(0),u=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function l(f){if(f instanceof Uint8Array||(ArrayBuffer.isView(f)?f=new Uint8Array(f.buffer,f.byteOffset,f.byteLength):Array.isArray(f)&&(f=Uint8Array.from(f))),!(f instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(f.length===0)return"";for(var h=0,y=0,g=0,S=f.length;g!==S&&f[g]===0;)g++,h++;for(var A=(S-g)*c+1>>>0,w=new Uint8Array(A);g!==S;){for(var P=f[g],D=0,O=A-1;(P!==0||D<y)&&O!==-1;O--,D++)P+=256*w[O]>>>0,w[O]=P%o>>>0,P=P/o>>>0;if(P!==0)throw new Error("Non-zero carry");y=D,g++}for(var B=A-y;B!==A&&w[B]===0;)B++;for(var F=a.repeat(h);B<A;++B)F+=t.charAt(w[B]);return F}function d(f){if(typeof f!="string")throw new TypeError("Expected String");if(f.length===0)return new Uint8Array;var h=0;if(f[h]!==" "){for(var y=0,g=0;f[h]===a;)y++,h++;for(var S=(f.length-h)*u+1>>>0,A=new Uint8Array(S);f[h];){var w=e[f.charCodeAt(h)];if(w===255)return;for(var P=0,D=S-1;(w!==0||P<g)&&D!==-1;D--,P++)w+=o*A[D]>>>0,A[D]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");g=P,h++}if(f[h]!==" "){for(var O=S-g;O!==S&&A[O]===0;)O++;for(var B=new Uint8Array(y+(S-O)),F=y;O!==S;)B[F++]=A[O++];return B}}}function p(f){var h=d(f);if(h)return h;throw new Error("Non-base"+o+" character")}return{encode:l,decodeUnsafe:d,decode:p}}RB.exports=ZG});var F0=v((e1e,NB)=>{"use strict";var QG=new TextDecoder,eX=t=>QG.decode(t),tX=new TextEncoder,rX=t=>tX.encode(t);function nX(t,e){let r=new Uint8Array(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return r}NB.exports={decodeText:eX,encodeText:rX,concat:nX}});var jB=v((t1e,MB)=>{"use strict";var{encodeText:iX}=F0(),lE=class{constructor(e,r,n,s){this.name=e,this.code=r,this.codeBuf=iX(this.code),this.alphabet=s,this.codec=n(s)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};MB.exports=lE});var LB=v((r1e,qB)=>{"use strict";var sX=(t,e,r)=>{let n={};for(let c=0;c<e.length;++c)n[e[c]]=c;let s=t.length;for(;t[s-1]==="=";)--s;let i=new Uint8Array(s*r/8|0),o=0,a=0,u=0;for(let c=0;c<s;++c){let l=n[t[c]];if(l===void 0)throw new SyntaxError("Invalid character "+t[c]);a=a<<r|l,o+=r,o>=8&&(o-=8,i[u++]=255&a>>o)}if(o>=r||255&a<<8-o)throw new SyntaxError("Unexpected end of data");return i},oX=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},aX=t=>e=>({encode(r){return oX(r,e,t)},decode(r){return sX(r,e,t)}});qB.exports={rfc4648:aX}});var HB=v((n1e,KB)=>{"use strict";var zf=$B(),uX=jB(),{rfc4648:Hr}=LB(),{decodeText:cX,encodeText:lX}=F0(),dX=()=>({encode:cX,decode:lX}),UB=[["identity","\0",dX,""],["base2","0",Hr(1),"01"],["base8","7",Hr(3),"01234567"],["base10","9",zf,"0123456789"],["base16","f",Hr(4),"0123456789abcdef"],["base16upper","F",Hr(4),"0123456789ABCDEF"],["base32hex","v",Hr(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",Hr(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",Hr(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",Hr(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",Hr(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",Hr(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",Hr(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",Hr(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",Hr(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",zf,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",zf,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",zf,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",zf,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",Hr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",Hr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",Hr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",Hr(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],VB=UB.reduce((t,e)=>(t[e[0]]=new uX(e[0],e[1],e[2],e[3]),t),{}),fX=UB.reduce((t,e)=>(t[e[1]]=VB[e[0]],t),{});KB.exports={names:VB,codes:fX}});var JB=v((Do,zB)=>{"use strict";var Sl=HB(),{encodeText:pX,decodeText:I0,concat:WB}=F0();function hX(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=Ru(t);return bX(r,e),WB([n,e],n.length+e.length)}function mX(t,e){let r=Ru(t),n=pX(r.encode(e));return WB([r.codeBuf,n],r.codeBuf.length+n.length)}function yX(t){t instanceof Uint8Array&&(t=I0(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),Ru(t[0]).decode(t.substring(1))}function gX(t){if(t instanceof Uint8Array&&(t=I0(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return Ru(t[0]).name}catch{return!1}}function bX(t,e){Ru(t).decode(I0(e))}function Ru(t){if(Object.prototype.hasOwnProperty.call(Sl.names,t))return Sl.names[t];if(Object.prototype.hasOwnProperty.call(Sl.codes,t))return Sl.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function vX(t){return t instanceof Uint8Array&&(t=I0(t)),Ru(t[0])}Do=zB.exports=hX;Do.encode=mX;Do.decode=yX;Do.isEncoded=gX;Do.encoding=Ru;Do.encodingFromData=vX;var wX=Object.freeze(Sl.names),EX=Object.freeze(Sl.codes);Do.names=wX;Do.codes=EX});var ZB=v((i1e,YB)=>{YB.exports=XB;var GB=128,_X=127,SX=~_X,DX=Math.pow(2,31);function XB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=DX;)e[r++]=t&255|GB,t/=128;for(;t&SX;)e[r++]=t&255|GB,t>>>=7;return e[r]=t|0,XB.bytes=r-n+1,e}});var tT=v((s1e,eT)=>{eT.exports=dE;var AX=128,QB=127;function dE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw dE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&QB)<<s:(o&QB)*Math.pow(2,s),s+=7}while(o>=AX);return dE.bytes=i-n,r}});var nT=v((o1e,rT)=>{var xX=Math.pow(2,7),CX=Math.pow(2,14),PX=Math.pow(2,21),OX=Math.pow(2,28),BX=Math.pow(2,35),TX=Math.pow(2,42),FX=Math.pow(2,49),IX=Math.pow(2,56),kX=Math.pow(2,63);rT.exports=function(t){return t<xX?1:t<CX?2:t<PX?3:t<OX?4:t<BX?5:t<TX?6:t<FX?7:t<IX?8:t<kX?9:10}});var sT=v((a1e,iT)=>{iT.exports={encode:ZB(),decode:tT(),encodingLength:nT()}});var aT=v((u1e,oT)=>{"use strict";var RX=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});oT.exports={names:RX}});function $X(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var y=0,g=0,S=0,A=h.length;S!==A&&h[S]===0;)S++,y++;for(var w=(A-S)*l+1>>>0,P=new Uint8Array(w);S!==A;){for(var D=h[S],O=0,B=w-1;(D!==0||O<g)&&B!==-1;B--,O++)D+=256*P[B]>>>0,P[B]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");g=O,S++}for(var F=w-g;F!==w&&P[F]===0;)F++;for(var N=u.repeat(y);F<w;++F)N+=t.charAt(P[F]);return N}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var y=0;if(h[y]!==" "){for(var g=0,S=0;h[y]===u;)g++,y++;for(var A=(h.length-y)*c+1>>>0,w=new Uint8Array(A);h[y];){var P=r[h.charCodeAt(y)];if(P===255)return;for(var D=0,O=A-1;(P!==0||D<S)&&O!==-1;O--,D++)P+=a*w[O]>>>0,w[O]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");S=D,y++}if(h[y]!==" "){for(var B=A-S;B!==A&&w[B]===0;)B++;for(var F=new Uint8Array(g+(A-B)),N=g;B!==A;)F[N++]=w[B++];return F}}}function f(h){var y=p(h);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:f}}var NX,MX,uT,cT=St(()=>{NX=$X,MX=NX,uT=MX});var l1e,lT,Ao,dT,fT,ga=St(()=>{l1e=new Uint8Array(0),lT=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Ao=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},dT=t=>new TextEncoder().encode(t),fT=t=>new TextDecoder().decode(t)});var fE,pE,hE,hT,mE,Dl,ba,jX,qX,ir,$i=St(()=>{cT();ga();fE=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},pE=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return hT(this,e)}},hE=class{constructor(e){this.decoders=e}or(e){return hT(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},hT=(t,e)=>new hE({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),mE=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new fE(e,r,n),this.decoder=new pE(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Dl=({name:t,prefix:e,encode:r,decode:n})=>new mE(t,e,r,n),ba=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=uT(r,e);return Dl({prefix:t,name:e,encode:n,decode:i=>Ao(s(i))})},jX=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},qX=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},ir=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Dl({prefix:e,name:t,encode(s){return qX(s,n,r)},decode(s){return jX(s,n,r,t)}})});var yE={};cr(yE,{identity:()=>LX});var LX,mT=St(()=>{$i();ga();LX=Dl({prefix:"\0",name:"identity",encode:t=>fT(t),decode:t=>dT(t)})});var gE={};cr(gE,{base2:()=>UX});var UX,yT=St(()=>{$i();UX=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1})});var bE={};cr(bE,{base8:()=>VX});var VX,gT=St(()=>{$i();VX=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3})});var vE={};cr(vE,{base10:()=>KX});var KX,bT=St(()=>{$i();KX=ba({prefix:"9",name:"base10",alphabet:"0123456789"})});var wE={};cr(wE,{base16:()=>HX,base16upper:()=>WX});var HX,WX,vT=St(()=>{$i();HX=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),WX=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4})});var EE={};cr(EE,{base32:()=>Al,base32hex:()=>XX,base32hexpad:()=>ZX,base32hexpadupper:()=>QX,base32hexupper:()=>YX,base32pad:()=>JX,base32padupper:()=>GX,base32upper:()=>zX,base32z:()=>eY});var Al,zX,JX,GX,XX,YX,ZX,QX,eY,_E=St(()=>{$i();Al=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),zX=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),JX=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),GX=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),XX=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),YX=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZX=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),QX=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eY=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})});var SE={};cr(SE,{base36:()=>tY,base36upper:()=>rY});var tY,rY,wT=St(()=>{$i();tY=ba({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rY=ba({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})});var DE={};cr(DE,{base58btc:()=>Ds,base58flickr:()=>nY});var Ds,nY,AE=St(()=>{$i();Ds=ba({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),nY=ba({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})});var xE={};cr(xE,{base64:()=>iY,base64pad:()=>sY,base64url:()=>oY,base64urlpad:()=>aY});var iY,sY,oY,aY,ET=St(()=>{$i();iY=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),sY=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),oY=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),aY=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})});var CE={};cr(CE,{base256emoji:()=>fY});function lY(t){return t.reduce((e,r)=>(e+=uY[r],e),"")}function dY(t){let e=[];for(let r of t){let n=cY[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var _T,uY,cY,fY,ST=St(()=>{$i();_T=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),uY=_T.reduce((t,e,r)=>(t[r]=e,t),[]),cY=_T.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);fY=Dl({prefix:"\u{1F680}",name:"base256emoji",encode:lY,decode:dY})});function xT(t,e,r){e=e||[],r=r||0;for(var n=r;t>=yY;)e[r++]=t&255|DT,t/=128;for(;t&mY;)e[r++]=t&255|DT,t>>>=7;return e[r]=t|0,xT.bytes=r-n+1,e}function PE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw PE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&AT)<<s:(o&AT)*Math.pow(2,s),s+=7}while(o>=bY);return PE.bytes=i-n,r}var pY,DT,hY,mY,yY,gY,bY,AT,vY,wY,EY,_Y,SY,DY,AY,xY,CY,PY,OY,BY,Jf,CT=St(()=>{pY=xT,DT=128,hY=127,mY=~hY,yY=Math.pow(2,31);gY=PE,bY=128,AT=127;vY=Math.pow(2,7),wY=Math.pow(2,14),EY=Math.pow(2,21),_Y=Math.pow(2,28),SY=Math.pow(2,35),DY=Math.pow(2,42),AY=Math.pow(2,49),xY=Math.pow(2,56),CY=Math.pow(2,63),PY=function(t){return t<vY?1:t<wY?2:t<EY?3:t<_Y?4:t<SY?5:t<DY?6:t<AY?7:t<xY?8:t<CY?9:10},OY={encode:pY,decode:gY,encodingLength:PY},BY=OY,Jf=BY});var Gf,xl,Cl,R0=St(()=>{CT();Gf=(t,e=0)=>[Jf.decode(t,e),Jf.decode.bytes],xl=(t,e,r=0)=>(Jf.encode(t,e,r),e),Cl=t=>Jf.encodingLength(t)});var $u,PT,OT,Pl,Yf=St(()=>{ga();R0();$u=(t,e)=>{let r=e.byteLength,n=Cl(t),s=n+Cl(r),i=new Uint8Array(s+r);return xl(t,i,0),xl(r,i,n),i.set(e,s),new Pl(t,r,e,i)},PT=t=>{let e=Ao(t),[r,n]=Gf(e),[s,i]=Gf(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Pl(r,s,o,e)},OT=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&lT(t.bytes,e.bytes),Pl=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}}});var BE,OE,TE=St(()=>{Yf();BE=({name:t,code:e,encode:r})=>new OE(t,e,r),OE=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?$u(this.code,r):r.then(n=>$u(this.code,n))}else throw Error("Unknown type, must be binary type")}}});var FE={};cr(FE,{sha256:()=>TY,sha512:()=>FY});var TT,TY,FY,FT=St(()=>{TE();TT=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),TY=BE({name:"sha2-256",code:18,encode:TT("SHA-256")}),FY=BE({name:"sha2-512",code:19,encode:TT("SHA-512")})});var IE={};cr(IE,{identity:()=>RY});var IT,IY,kT,kY,RY,RT=St(()=>{ga();Yf();IT=0,IY="identity",kT=Ao,kY=t=>$u(IT,kT(t)),RY={code:IT,name:IY,encode:kT,digest:kY}});var $T=St(()=>{ga()});var T1e,F1e,NT=St(()=>{T1e=new TextEncoder,F1e=new TextDecoder});var M0,MY,jY,qY,Zf,LY,MT,jT,$0,N0,UY,VY,KY,qT=St(()=>{R0();Yf();AE();_E();ga();M0=class t{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this.byteOffset=s.byteOffset,this.byteLength=s.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:N0,byteLength:N0,code:$0,version:$0,multihash:$0,bytes:$0,_baseCache:N0,asCID:N0})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==Zf)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==LY)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=$u(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&OT(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:s}=this;switch(n){case 0:return jY(r,s,e||Ds.encoder);default:return qY(r,s,e||Al.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return VY(/^0\.0/,KY),!!(e&&(e[jT]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof t)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:s,bytes:i}=e;return new t(r,n,s,i||MT(r,n,s.bytes))}else if(e!=null&&e[jT]===!0){let{version:r,multihash:n,code:s}=e,i=PT(n);return t.create(r,s,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==Zf)throw new Error(`Version 0 CID must use dag-pb (code: ${Zf}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=MT(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Zf,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=Ao(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Pl(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,p]=Gf(e.subarray(r));return r+=p,d},s=n(),i=Zf;if(s===18?(s=0,r=0):s===1&&(i=n()),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=MY(e,r),i=t.decode(s);return i._baseCache.set(n,e),i}},MY=(t,e)=>{switch(t[0]){case"Q":{let r=e||Ds;return[Ds.prefix,r.decode(`${Ds.prefix}${t}`)]}case Ds.prefix:{let r=e||Ds;return[Ds.prefix,r.decode(t)]}case Al.prefix:{let r=e||Al;return[Al.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},jY=(t,e,r)=>{let{prefix:n}=r;if(n!==Ds.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},qY=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},Zf=112,LY=18,MT=(t,e,r)=>{let n=Cl(t),s=n+Cl(e),i=new Uint8Array(s+r.byteLength);return xl(t,i,0),xl(e,i,n),i.set(r,s),i},jT=Symbol.for("@ipld/js-cid/CID"),$0={writable:!1,configurable:!1,enumerable:!0},N0={writable:!1,enumerable:!1,configurable:!1},UY="0.0.0-dev",VY=(t,e)=>{if(t.test(UY))console.warn(e);else throw new Error(e)},KY=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`});var LT=St(()=>{qT();R0();ga();TE();Yf()});var kE,q1e,UT=St(()=>{mT();yT();gT();bT();vT();_E();wT();AE();ET();ST();FT();RT();$T();NT();LT();kE={...yE,...gE,...bE,...vE,...wE,...EE,...SE,...DE,...xE,...CE},q1e={...FE,...IE}});function Ol(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}var j0=St(()=>{});function q0(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ol(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}var RE=St(()=>{j0()});function KT(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var VT,$E,HY,L0,NE=St(()=>{UT();RE();VT=KT("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$E=KT("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=q0(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),HY={utf8:VT,"utf-8":VT,hex:kE.base16,latin1:$E,ascii:$E,binary:$E,...kE},L0=HY});var HT={};cr(HT,{toString:()=>WY});function WY(t,e="utf8"){let r=L0[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var WT=St(()=>{NE()});var zT={};cr(zT,{fromString:()=>zY});function zY(t,e="utf8"){let r=L0[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ol(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var JT=St(()=>{NE();j0()});var GT={};cr(GT,{concat:()=>JY});function JY(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));let r=q0(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return Ol(r)}var XT=St(()=>{RE();j0()});var nF=v((Q1e,rF)=>{"use strict";var YT=JB(),Bl=sT(),{names:Qf}=aT(),{toString:U0}=(WT(),Th(HT)),{fromString:GY}=(JT(),Th(zT)),{concat:XY}=(XT(),Th(GT)),Tl={};for(let t in Qf){let e=t;Tl[Qf[e]]=e}Object.freeze(Tl);function YY(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return U0(t,"base16")}function ZY(t){return GY(t,"base16")}function QY(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return U0(YT.encode("base58btc",t)).slice(1)}function eZ(t){let e=t instanceof Uint8Array?U0(t):t;return YT.decode("z"+e)}function ZT(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=Bl.decode(t);if(!eF(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(Bl.decode.bytes);let r=Bl.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(Bl.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${U0(t,"base16")}`);return{code:e,name:Tl[e],length:r,digest:t}}function tZ(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=QT(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");let s=Bl.encode(n),i=Bl.encode(r);return XY([s,i,t],s.length+i.length+t.length)}function QT(t){let e=t;if(typeof t=="string"){if(Qf[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=Qf[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(Tl[e]===void 0&&!ME(e))throw new Error(`Unrecognized function code: ${e}`);return e}function ME(t){return t>0&&t<16}function eF(t){return!!(ME(t)||Tl[t])}function tF(t){ZT(t)}function rZ(t){return tF(t),t.subarray(0,2)}rF.exports={names:Qf,codes:Tl,toHexString:YY,fromHexString:ZY,toB58String:QY,fromB58String:eZ,decode:ZT,encode:tZ,coerceCode:QT,isAppCode:ME,validate:tF,prefix:rZ,isValidCode:eF}});var qF=v((MEe,jF)=>{var Rl=1e3,$l=Rl*60,Nl=$l*60,Uu=Nl*24,jZ=Uu*7,qZ=Uu*365.25;jF.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return LZ(t);if(r==="number"&&isFinite(t))return e.long?VZ(t):UZ(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function LZ(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*qZ;case"weeks":case"week":case"w":return r*jZ;case"days":case"day":case"d":return r*Uu;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Nl;case"minutes":case"minute":case"mins":case"min":case"m":return r*$l;case"seconds":case"second":case"secs":case"sec":case"s":return r*Rl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function UZ(t){var e=Math.abs(t);return e>=Uu?Math.round(t/Uu)+"d":e>=Nl?Math.round(t/Nl)+"h":e>=$l?Math.round(t/$l)+"m":e>=Rl?Math.round(t/Rl)+"s":t+"ms"}function VZ(t){var e=Math.abs(t);return e>=Uu?ty(t,e,Uu,"day"):e>=Nl?ty(t,e,Nl,"hour"):e>=$l?ty(t,e,$l,"minute"):e>=Rl?ty(t,e,Rl,"second"):t+" ms"}function ty(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var Cr=v(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.hasErrors=Po.Checked=Po.Status=void 0;Po.Status={INFO:"info",WARN:"warn",ERROR:"error"};var zZ=class{constructor(t,e,r){this.tag=t,this.status=e,this.message=r}};Po.Checked=zZ;var JZ=t=>{function e(r){return r.status===Po.Status.ERROR}return t.filter(r=>e(r)).length>0};Po.hasErrors=JZ});var KF=v(VF=>{"use strict";Object.defineProperty(VF,"__esModule",{value:!0})});var HF=v(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});ny.HandlerCheckResult=void 0;var GZ=class{constructor(t,e,r,n,s,i){this.input_descriptor_path=t,this.verifiable_credential_path=e,this.evaluator=r,this.status=n,this.message=s,this.payload=i}};ny.HandlerCheckResult=GZ});var zF=v(WF=>{"use strict";Object.defineProperty(WF,"__esModule",{value:!0})});var GF=v(JF=>{"use strict";Object.defineProperty(JF,"__esModule",{value:!0})});var XF=v(Ps=>{"use strict";var XZ=Ps&&Ps.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),iy=Ps&&Ps.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&XZ(e,t,r)};Object.defineProperty(Ps,"__esModule",{value:!0});iy(KF(),Ps);iy(HF(),Ps);iy(zF(),Ps);iy(GF(),Ps)});var YF=v(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.parseDid=Os.IProofType=Os.IProofPurpose=void 0;var YZ;(function(t){t.verificationMethod="verificationMethod",t.assertionMethod="assertionMethod",t.authentication="authentication",t.keyAgreement="keyAgreement",t.contractAgreement="contactAgreement",t.capabilityInvocation="capabilityInvocation",t.capabilityDelegation="capabilityDelegation"})(YZ=Os.IProofPurpose||(Os.IProofPurpose={}));var ZZ;(function(t){t.Ed25519Signature2018="Ed25519Signature2018",t.Ed25519Signature2020="Ed25519Signature2020",t.EcdsaSecp256k1Signature2019="EcdsaSecp256k1Signature2019",t.EcdsaSecp256k1RecoverySignature2020="EcdsaSecp256k1RecoverySignature2020",t.JsonWebSignature2020="JsonWebSignature2020",t.RsaSignature2018="RsaSignature2018",t.GpgSignature2020="GpgSignature2020",t.JcsEd25519Signature2020="JcsEd25519Signature2020",t.BbsBlsSignatureProof2020="BbsBlsSignatureProof2020",t.BbsBlsBoundSignatureProof2020="BbsBlsBoundSignatureProof2020",t.JwtProof2020="JwtProof2020"})(ZZ=Os.IProofType||(Os.IProofType={}));var QZ=t=>{let e=eQ(t);if(e===null)throw new Error("invalid did");return e};Os.parseDid=QZ;var eQ=t=>{let r="(?:[a-zA-Z0-9._-]|(?:%[0-9a-fA-F]{2}))",n="([a-z0-9]+)",s=`((?:${r}*:)*(${r}+))`,i="[a-zA-Z0-9_.:%-]",a=`((${`;${i}+=${i}*`})*)`,u="(/[^#?]*)?",c="([?][^#]*)?",l="(#.*)?",d=new RegExp(`^did:${n}:${s}${a}${u}${c}${l}$`);if(t===""||!t)return null;let p=t.match(d);if(p){let f={did:`did:${p[1]}:${p[2]}`,method:p[1],id:p[2],didUrl:t};if(p[4]){let h=p[4].slice(1).split(";");f.params={};for(let y of h){let g=y.split("=");f.params[g[0]]=g[1]}}return p[6]&&(f.path=p[6]),p[7]&&(f.query=p[7].slice(1)),p[8]&&(f.fragment=p[8].slice(1)),f}return null}});var QF=v(ZF=>{"use strict";Object.defineProperty(ZF,"__esModule",{value:!0})});var eI=v(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.JWT_PROOF_TYPE_2020=Bs.DocumentFormat=Bs.OriginalType=void 0;var tQ;(function(t){t.JSONLD="json-ld",t.JWT_ENCODED="jwt-encoded",t.JWT_DECODED="jwt-decoded"})(tQ=Bs.OriginalType||(Bs.OriginalType={}));var rQ;(function(t){t[t.JWT=0]="JWT",t[t.JSONLD=1]="JSONLD",t[t.EIP712=2]="EIP712"})(rQ=Bs.DocumentFormat||(Bs.DocumentFormat={}));Bs.JWT_PROOF_TYPE_2020="JwtProof2020"});var rI=v(tI=>{"use strict";Object.defineProperty(tI,"__esModule",{value:!0})});var c_=v(Ts=>{"use strict";var nQ=Ts&&Ts.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sy=Ts&&Ts.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&nQ(e,t,r)};Object.defineProperty(Ts,"__esModule",{value:!0});sy(YF(),Ts);sy(QF(),Ts);sy(eI(),Ts);sy(rI(),Ts)});var nI=v(oy=>{"use strict";Object.defineProperty(oy,"__esModule",{value:!0});oy.ObjectUtils=void 0;var l_=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}};oy.ObjectUtils=l_});var d_=v(Vu=>{"use strict";var iQ=Vu&&Vu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),sQ=Vu&&Vu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&iQ(e,t,r)};Object.defineProperty(Vu,"__esModule",{value:!0});sQ(nI(),Vu)});var aI=v((x_e,oI)=>{"use strict";function p_(t){this.message=t}p_.prototype=new Error,p_.prototype.name="InvalidCharacterError";var iI=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new p_("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,s=0,i=0,o="";n=e.charAt(i++);~n&&(r=s%4?64*r+n:n,s++%4)?o+=String.fromCharCode(255&r>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function oQ(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(iI(r).replace(/(.)/g,function(n,s){var i=s.charCodeAt(0).toString(16).toUpperCase();return i.length<2&&(i="0"+i),"%"+i}))}(e)}catch{return iI(e)}}function cp(t){this.message=t}function sI(t,e){if(typeof t!="string")throw new cp("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(oQ(t.split(".")[r]))}catch(n){throw new cp("Invalid token specified: "+n.message)}}cp.prototype=new Error,cp.prototype.name="InvalidTokenError";var f_=sI;f_.default=sI,f_.InvalidTokenError=cp,oI.exports=f_});var lI=v(_a=>{"use strict";var uI=_a&&_a.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},aQ=_a&&_a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_a,"__esModule",{value:!0});_a.CredentialMapper=void 0;var Fs=c_(),Ml=aQ(aI()),cI=d_(),h_=class t{static decodeVerifiablePresentation(e){var r;if(t.isJwtEncoded(e)){let n=(0,Ml.default)(e),s=(0,Ml.default)(e,{header:!0});return n.vp.proof={type:Fs.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Fs.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return t.isJwtDecodedPresentation(e)?e:t.isJsonLdAsString(e)?JSON.parse(e):e}static decodeVerifiableCredential(e){var r;if(t.isJwtEncoded(e)){let n=(0,Ml.default)(e),s=(0,Ml.default)(e,{header:!0});return n.vc.proof={type:Fs.IProofType.JwtProof2020,created:n.nbf,proofPurpose:Fs.IProofPurpose.authentication,verificationMethod:(r=s.kid)!==null&&r!==void 0?r:n.iss,jwt:e},n}else return t.isJwtDecodedCredential(e)?e:t.isJsonLdAsString(e)?JSON.parse(e):e}static toWrappedVerifiablePresentation(e,r){let n=t.getFirstProof(e),s=typeof e!="string"&&t.hasJWTProofType(e)?n?.jwt:e;if(!s)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let i=t.decodeVerifiablePresentation(s),o=t.isJwtEncoded(s),a=t.isJwtDecodedPresentation(s),u=o?Fs.OriginalType.JWT_ENCODED:a?Fs.OriginalType.JWT_DECODED:Fs.OriginalType.JSONLD,c=a||o?"jwt_vp":"ldp_vp",l;if(o||a?l=t.jwtDecodedPresentationToUniformPresentation(i,!1,r):l=i,!l||!("verifiableCredential"in l)||!l.verifiableCredential||l.verifiableCredential.length===0)throw Error("VP needs to have at least one verifiable credential at this point");let d=t.toWrappedVerifiableCredentials(l.verifiableCredential,r),p=Object.assign(Object.assign({},l),{verifiableCredential:d});return{type:u,format:c,original:s,decoded:i,presentation:p,vcs:d}}static toWrappedVerifiableCredentials(e,r){return e.map(n=>t.toWrappedVerifiableCredential(n,r))}static toWrappedVerifiableCredential(e,r){var n;let s=t.getFirstProof(e),i=t.hasJWTProofType(e)&&s&&(n=s.jwt)!==null&&n!==void 0?n:e;if(!i)throw Error("Could not determine original credential, probably it was a converted JWT credential, that is now missing the JWT value in the proof");let o=t.decodeVerifiableCredential(i),a=t.isJwtEncoded(i),u=t.isJwtDecodedCredential(i),c=a?Fs.OriginalType.JWT_ENCODED:u?Fs.OriginalType.JWT_DECODED:Fs.OriginalType.JSONLD,l=a||u?t.jwtDecodedCredentialToUniformCredential(o,r):o;return{original:i,decoded:o,format:a||u?"jwt_vc":"ldp_vc",type:c,credential:l}}static isJwtEncoded(e){return cI.ObjectUtils.isString(e)&&e.startsWith("ey")}static isJsonLdAsString(e){return cI.ObjectUtils.isString(e)&&e.includes("@context")}static isJwtDecodedCredential(e){return e.vc!==void 0&&e.iss!==void 0}static isJwtDecodedPresentation(e){return e.vp!==void 0&&e.iss!==void 0}static jwtEncodedPresentationToUniformPresentation(e,r=!0,n){return t.jwtDecodedPresentationToUniformPresentation((0,Ml.default)(e),r,n)}static jwtDecodedPresentationToUniformPresentation(e,r=!0,n){let{iss:s,aud:i,jti:o,vp:a}=e,u=uI(e,["iss","aud","jti","vp"]),c=Object.assign(Object.assign({},u),a);if(r){if(!a.verifiableCredential)throw Error("Verifiable Presentation should have a verifiable credential at this point");c.verifiableCredential=a.verifiableCredential.map(l=>t.toUniformCredential(l,n))}if(s){let l=c.holder;if(l&&l!==s)throw new Error(`Inconsistent holders between JWT claim (${s}) and VC value (${l})`);c.holder=s}if(i){let l=c.verifier;if(l&&l!==i)throw new Error(`Inconsistent holders between JWT claim (${i}) and VC value (${l})`);c.verifier=i}if(o){let l=c.id;if(l&&l!==o)throw new Error(`Inconsistent VP ids between JWT claim (${o}) and VP value (${l})`);c.id=o}return c}static toUniformCredential(e,r){var n;let s=typeof e!="string"&&t.hasJWTProofType(e)?(n=t.getFirstProof(e))===null||n===void 0?void 0:n.jwt:e;if(!s)throw Error("Could not determine original credential from passed in credential. Probably because a JWT proof type was present, but now is not available anymore");let i=t.decodeVerifiableCredential(s),o=t.isJwtEncoded(s);return t.isJwtDecodedCredential(s)||o?t.jwtDecodedCredentialToUniformCredential(i,r):i}static toUniformPresentation(e,r){var n;let s=t.getFirstProof(e),i=typeof e!="string"&&t.hasJWTProofType(e)?s?.jwt:e;if(!i)throw Error("Could not determine original presentation, probably it was a converted JWT presentation, that is now missing the JWT value in the proof");let o=t.decodeVerifiablePresentation(i),a=t.isJwtEncoded(i),u=t.isJwtDecodedPresentation(i),c=a||u?t.jwtDecodedPresentationToUniformPresentation(o,!1):o;return r?.addContextIfMissing&&!c["@context"]&&(c["@context"]=["https://www.w3.org/2018/credentials/v1"]),c.verifiableCredential=(n=c.verifiableCredential)===null||n===void 0?void 0:n.map(l=>t.toUniformCredential(l,r)),c}static jwtEncodedCredentialToUniformCredential(e,r){return t.jwtDecodedCredentialToUniformCredential((0,Ml.default)(e),r)}static jwtDecodedCredentialToUniformCredential(e,r){let{exp:n,nbf:s,iss:i,vc:o,sub:a,jti:u}=e,c=uI(e,["exp","nbf","iss","vc","sub","jti"]),l=Object.assign(Object.assign({},c),o),d=r?.maxTimeSkewInMS!==void 0?r.maxTimeSkewInMS:999;if(n){let p=l.expirationDate,f=parseInt(n.toString()),h=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(p&&p!==h){let y=Math.abs(new Date(h).getTime()-new Date(p).getTime());if(!d||y>d)throw new Error(`Inconsistent expiration dates between JWT claim (${h}) and VC value (${p})`)}l.expirationDate=h}if(s){let p=l.issuanceDate,f=parseInt(s.toString()),h=f<9999999999?new Date(f*1e3).toISOString().replace(/\.000Z/,"Z"):new Date(f).toISOString();if(p&&p!==h){let y=Math.abs(new Date(h).getTime()-new Date(p).getTime());if(!d||y>d)throw new Error(`Inconsistent issuance dates between JWT claim (${h}) and VC value (${p})`)}l.issuanceDate=h}if(i){let p=l.issuer;if(p){if(typeof p=="string"){if(p!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${p})`)}else if(p.id!==i)throw new Error(`Inconsistent issuers between JWT claim (${i}) and VC value (${p.id})`)}else l.issuer=i}if(a){let p=Array.isArray(l.credentialSubject)?l.credentialSubject:[l.credentialSubject];for(let f=0;f<p.length;f++){let h=p[f].id;if(h&&h!==a)throw new Error(`Inconsistent credential subject ids between JWT claim (${a}) and VC value (${h})`);Array.isArray(l.credentialSubject)?l.credentialSubject[f].id=a:l.credentialSubject.id=a}}if(u){let p=l.id;if(p&&p!==u)throw new Error(`Inconsistent credential ids between JWT claim (${u}) and VC value (${p})`);l.id=u}return l}static toExternalVerifiableCredential(e){let r;if(e.proof){if(!e.proof.type)throw new Error("Verifiable credential proof is missing a type");if(!e.proof.created)throw new Error("Verifiable credential proof is missing a created date");if(!e.proof.proofPurpose)throw new Error("Verifiable credential proof is missing a proof purpose");if(!e.proof.verificationMethod)throw new Error("Verifiable credential proof is missing a verification method");r=Object.assign(Object.assign({},e.proof),{type:e.proof.type,created:e.proof.created,proofPurpose:e.proof.proofPurpose,verificationMethod:e.proof.verificationMethod})}return Object.assign(Object.assign({},e),{type:e.type?typeof e.type=="string"?[e.type]:e.type:["VerifiableCredential"],proof:r})}static storedCredentialToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static storedPresentationToOriginalFormat(e){let r=t.detectDocumentType(e);if(typeof e=="string"){if(r===0)return t.toCompactJWT(e);if(r===1)return JSON.parse(e)}return e}static toCompactJWT(e){if(!e||t.detectDocumentType(e)!==0)throw Error("Cannot convert non JWT credential to JWT");if(typeof e=="string")return e;let r;if("vp"in e?r=e.vp.proof:"vc"in e?r=e.vc.proof:r=Array.isArray(e.proof)?e.proof[0].jwt:e.proof.jwt,!r)throw Error("Could not get JWT from supplied document");return r}static detectDocumentType(e){if(typeof e=="string")return this.isJsonLdAsString(e)?1:0;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof,n=Array.isArray(r)?r[0]:r;return n?.jwt?0:n?.type==="EthereumEip712Signature2021"?2:1}static hasJWTProofType(e){var r;return typeof e=="string"?!1:!!(!((r=t.getFirstProof(e))===null||r===void 0)&&r.jwt)}static getFirstProof(e){if(!e||typeof e=="string")return;let r="vc"in e?e.vc.proof:"vp"in e?e.vp.proof:e.proof;return Array.isArray(r)?r[0]:r}};_a.CredentialMapper=h_});var dI=v(Ku=>{"use strict";var uQ=Ku&&Ku.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cQ=Ku&&Ku.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&uQ(e,t,r)};Object.defineProperty(Ku,"__esModule",{value:!0});cQ(lI(),Ku)});var ay=v(Oo=>{"use strict";var lQ=Oo&&Oo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),m_=Oo&&Oo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lQ(e,t,r)};Object.defineProperty(Oo,"__esModule",{value:!0});m_(c_(),Oo);m_(d_(),Oo);m_(dI(),Oo)});var Mi=v(g_=>{"use strict";Object.defineProperty(g_,"__esModule",{value:!0});var y_;(function(t){t.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY="Input candidate does not contain property",t.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION="Input candidate failed filter evaluation",t.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is eligible for submission",t.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION="The input candidate is not eligible for submission",t.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED="Input descriptor contains hashlink. This version doesn't support hashlink verification.",t.LIMIT_DISCLOSURE_APPLIED="added variable in the limit_disclosure to the verifiableCredential",t.LIMIT_DISCLOSURE_NOT_SUPPORTED="Limit disclosure not supported",t.SUBJECT_IS_NOT_ISSUER="subject is not issuer",t.SUBJECT_IS_ISSUER="subject is issuer",t.FORMAT_RESTRICTION_PASSED="the Credential format of the candidate inputs matches the required formats",t.FORMAT_RESTRICTION_DIDNT_PASS="the Credential format of the candidate inputs didn't match the required formats",t.URI_EVALUATION_PASSED="@context URI(s) for the schema of the candidate input is equal to one of the input_descriptors object uri values.",t.URI_EVALUATION_DIDNT_PASS="@context URI for the of the candidate input MUST be equal to one of the input_descriptors object uri values exactly.",t.UNKNOWN_EXCEPTION="unknown exception occurred: ",t.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT="mandatory field not present in the verifiableCredential"})(y_||(y_={}));g_.default=y_});var OI=v(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.version=we.parse=we.tokenize=we.Syntax=void 0;var le,qi,yI,Sa,de,E_,__,ie,Ot,I,Le,rt,Tt,W,ue,Ae,J;le={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};qi={};qi[le.BooleanLiteral]="Boolean";qi[le.EOF]="<end>";qi[le.Identifier]="Identifier";qi[le.Keyword]="Keyword";qi[le.NullLiteral]="Null";qi[le.NumericLiteral]="Numeric";qi[le.Punctuator]="Punctuator";qi[le.StringLiteral]="String";qi[le.RegularExpression]="RegularExpression";yI=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];we.Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};Sa={Data:1,Get:2,Set:4};de={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};E_={NonAsciiIdentifierStart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]"),NonAsciiIdentifierPart:new RegExp("[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0\u08A2-\u08AC\u08E4-\u08FE\u0900-\u0963\u0966-\u096F\u0971-\u0977\u0979-\u097F\u0981-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C82\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D02\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F0\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191C\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1D00-\u1DE6\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA697\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7B\uAA80-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE26\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]")};function fp(t,e){if(!t)throw new Error("ASSERT: "+e)}function Bo(t){return t>=48&&t<=57}function gI(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function lp(t){return"01234567".indexOf(t)>=0}function dQ(t){return t===32||t===9||t===11||t===12||t===160||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Wu(t){return t===10||t===13||t===8232||t===8233}function ql(t){return t==64||t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t===92||t>=128&&E_.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function cy(t){return t===36||t===95||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||t===92||t>=128&&E_.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function fQ(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function pp(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function fi(t){return t==="eval"||t==="arguments"}function pQ(t){if(Ot&&pp(t))return!0;switch(t.length){case 2:return t==="if"||t==="in"||t==="do";case 3:return t==="var"||t==="for"||t==="new"||t==="try"||t==="let";case 4:return t==="this"||t==="else"||t==="case"||t==="void"||t==="with"||t==="enum";case 5:return t==="while"||t==="break"||t==="catch"||t==="throw"||t==="const"||t==="yield"||t==="class"||t==="super";case 6:return t==="return"||t==="typeof"||t==="delete"||t==="switch"||t==="export"||t==="import";case 7:return t==="default"||t==="finally"||t==="extends";case 8:return t==="function"||t==="continue"||t==="debugger";case 10:return t==="instanceof";default:return!1}}function w_(t,e,r,n,s){var i,o;fp(typeof r=="number","Comment must have valid position"),!(Ae.lastCommentStart>=r)&&(Ae.lastCommentStart=r,i={type:t,value:e},J.range&&(i.range=[r,n]),J.loc&&(i.loc=s),J.comments.push(i),J.attachComment&&(J.leadingComments.push(i),J.trailingComments.push(i)))}function b_(t){var e,r,n,s;for(e=I-t,r={start:{line:Le,column:I-rt-t}};I<Tt;)if(n=ie.charCodeAt(I),++I,Wu(n)){J.comments&&(s=ie.slice(e+t,I-1),r.end={line:Le,column:I-rt-1},w_("Line",s,e,I-1,r)),n===13&&ie.charCodeAt(I)===10&&++I,++Le,rt=I;return}J.comments&&(s=ie.slice(e+t,I),r.end={line:Le,column:I-rt},w_("Line",s,e,I,r))}function hQ(){var t,e,r,n;for(J.comments&&(t=I-2,e={start:{line:Le,column:I-rt-2}});I<Tt;)if(r=ie.charCodeAt(I),Wu(r))r===13&&ie.charCodeAt(I+1)===10&&++I,++Le,++I,rt=I,I>=Tt&&Ze({},de.UnexpectedToken,"ILLEGAL");else if(r===42){if(ie.charCodeAt(I+1)===47){++I,++I,J.comments&&(n=ie.slice(t+2,I-2),e.end={line:Le,column:I-rt},w_("Block",n,t,I,e));return}++I}else++I;Ze({},de.UnexpectedToken,"ILLEGAL")}function Da(){var t,e;for(e=I===0;I<Tt;)if(t=ie.charCodeAt(I),dQ(t))++I;else if(Wu(t))++I,t===13&&ie.charCodeAt(I)===10&&++I,++Le,rt=I,e=!0;else if(t===47)if(t=ie.charCodeAt(I+1),t===47)++I,++I,b_(2),e=!0;else if(t===42)++I,++I,hQ();else break;else if(e&&t===45)if(ie.charCodeAt(I+1)===45&&ie.charCodeAt(I+2)===62)I+=3,b_(3);else break;else if(t===60)if(ie.slice(I+1,I+4)==="!--")++I,++I,++I,++I,b_(4);else break;else break}function ly(t){var e,r,n,s=0;for(r=t==="u"?4:2,e=0;e<r;++e)if(I<Tt&&gI(ie[I]))n=ie[I++],s=s*16+"0123456789abcdef".indexOf(n.toLowerCase());else return"";return String.fromCharCode(s)}function bI(){var t,e;for(t=ie.charCodeAt(I++),e=String.fromCharCode(t),t===92&&(ie.charCodeAt(I)!==117&&Ze({},de.UnexpectedToken,"ILLEGAL"),++I,t=ly("u"),(!t||t==="\\"||!ql(t.charCodeAt(0)))&&Ze({},de.UnexpectedToken,"ILLEGAL"),e=t);I<Tt&&(t=ie.charCodeAt(I),!!cy(t));)++I,e+=String.fromCharCode(t),t===92&&(e=e.substr(0,e.length-1),ie.charCodeAt(I)!==117&&Ze({},de.UnexpectedToken,"ILLEGAL"),++I,t=ly("u"),(!t||t==="\\"||!cy(t.charCodeAt(0)))&&Ze({},de.UnexpectedToken,"ILLEGAL"),e+=t);return e}function mQ(){var t,e;for(t=I++;I<Tt;){if(e=ie.charCodeAt(I),e===92)return I=t,bI();if(cy(e))++I;else break}return ie.slice(t,I)}function yQ(){var t,e,r;return t=I,e=ie.charCodeAt(I)===92?bI():mQ(),e.length===1?r=le.Identifier:pQ(e)?r=le.Keyword:e==="null"?r=le.NullLiteral:e==="true"||e==="false"?r=le.BooleanLiteral:r=le.Identifier,{type:r,value:e,lineNumber:Le,lineStart:rt,start:t,end:I}}function To(){var t=I,e=ie.charCodeAt(I),r,n=ie[I],s,i,o;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++I,J.tokenize&&(e===40?J.openParenToken=J.tokens.length:e===123&&(J.openCurlyToken=J.tokens.length)),{type:le.Punctuator,value:String.fromCharCode(e),lineNumber:Le,lineStart:rt,start:t,end:I};default:if(r=ie.charCodeAt(I+1),r===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return I+=2,{type:le.Punctuator,value:String.fromCharCode(e)+String.fromCharCode(r),lineNumber:Le,lineStart:rt,start:t,end:I};case 33:case 61:return I+=2,ie.charCodeAt(I)===61&&++I,{type:le.Punctuator,value:ie.slice(t,I),lineNumber:Le,lineStart:rt,start:t,end:I}}}if(o=ie.substr(I,4),o===">>>=")return I+=4,{type:le.Punctuator,value:o,lineNumber:Le,lineStart:rt,start:t,end:I};if(i=o.substr(0,3),i===">>>"||i==="<<="||i===">>=")return I+=3,{type:le.Punctuator,value:i,lineNumber:Le,lineStart:rt,start:t,end:I};if(s=i.substr(0,2),n===s[1]&&"+-<>&|".indexOf(n)>=0||s==="=>")return I+=2,{type:le.Punctuator,value:s,lineNumber:Le,lineStart:rt,start:t,end:I};if("<>=!+-*%&|^/".indexOf(n)>=0)return++I,{type:le.Punctuator,value:n,lineNumber:Le,lineStart:rt,start:t,end:I};Ze({},de.UnexpectedToken,"ILLEGAL")}function gQ(t){for(var e="";I<Tt&&gI(ie[I]);)e+=ie[I++];return e.length===0&&Ze({},de.UnexpectedToken,"ILLEGAL"),ql(ie.charCodeAt(I))&&Ze({},de.UnexpectedToken,"ILLEGAL"),{type:le.NumericLiteral,value:parseInt("0x"+e,16),lineNumber:Le,lineStart:rt,start:t,end:I}}function bQ(t){for(var e="0"+ie[I++];I<Tt&&lp(ie[I]);)e+=ie[I++];return(ql(ie.charCodeAt(I))||Bo(ie.charCodeAt(I)))&&Ze({},de.UnexpectedToken,"ILLEGAL"),{type:le.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:Le,lineStart:rt,start:t,end:I}}function fI(){var t,e,r;if(r=ie[I],fp(Bo(r.charCodeAt(0))||r===".","Numeric literal must start with a decimal digit or a decimal point"),e=I,t="",r!=="."){if(t=ie[I++],r=ie[I],t==="0"){if(r==="x"||r==="X")return++I,gQ(e);if(lp(r))return bQ(e);r&&Bo(r.charCodeAt(0))&&Ze({},de.UnexpectedToken,"ILLEGAL")}for(;Bo(ie.charCodeAt(I));)t+=ie[I++];r=ie[I]}if(r==="."){for(t+=ie[I++];Bo(ie.charCodeAt(I));)t+=ie[I++];r=ie[I]}if(r==="e"||r==="E")if(t+=ie[I++],r=ie[I],(r==="+"||r==="-")&&(t+=ie[I++]),Bo(ie.charCodeAt(I)))for(;Bo(ie.charCodeAt(I));)t+=ie[I++];else Ze({},de.UnexpectedToken,"ILLEGAL");return ql(ie.charCodeAt(I))&&Ze({},de.UnexpectedToken,"ILLEGAL"),{type:le.NumericLiteral,value:parseFloat(t),lineNumber:Le,lineStart:rt,start:e,end:I}}function vQ(){var t="",e,r,n,s,i,o,a=!1,u,c;for(u=Le,c=rt,e=ie[I],fp(e==="'"||e==='"',"String literal must starts with a quote"),r=I,++I;I<Tt;)if(n=ie[I++],n===e){e="";break}else if(n==="\\")if(n=ie[I++],!n||!Wu(n.charCodeAt(0)))switch(n){case"u":case"x":o=I,i=ly(n),i?t+=i:(I=o,t+=n);break;case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:lp(n)?(s="01234567".indexOf(n),s!==0&&(a=!0),I<Tt&&lp(ie[I])&&(a=!0,s=s*8+"01234567".indexOf(ie[I++]),"0123".indexOf(n)>=0&&I<Tt&&lp(ie[I])&&(s=s*8+"01234567".indexOf(ie[I++]))),t+=String.fromCharCode(s)):t+=n;break}else++Le,n==="\r"&&ie[I]===`
`&&++I,rt=I;else{if(Wu(n.charCodeAt(0)))break;t+=n}return e!==""&&Ze({},de.UnexpectedToken,"ILLEGAL"),{type:le.StringLiteral,value:t,octal:a,startLineNumber:u,startLineStart:c,lineNumber:Le,lineStart:rt,start:r,end:I}}function wQ(t,e){var r;try{r=new RegExp(t,e)}catch{Ze({},de.InvalidRegExp)}return r}function EQ(){var t,e,r,n,s;for(t=ie[I],fp(t==="/","Regular expression literal must start with a slash"),e=ie[I++],r=!1,n=!1;I<Tt;)if(t=ie[I++],e+=t,t==="\\")t=ie[I++],Wu(t.charCodeAt(0))&&Ze({},de.UnterminatedRegExp),e+=t;else if(Wu(t.charCodeAt(0)))Ze({},de.UnterminatedRegExp);else if(r)t==="]"&&(r=!1);else if(t==="/"){n=!0;break}else t==="["&&(r=!0);return n||Ze({},de.UnterminatedRegExp),s=e.substr(1,e.length-2),{value:s,literal:e}}function _Q(){var t,e,r,n;for(e="",r="";I<Tt&&(t=ie[I],!!cy(t.charCodeAt(0)));)if(++I,t==="\\"&&I<Tt)if(t=ie[I],t==="u"){if(++I,n=I,t=ly("u"),t)for(r+=t,e+="\\u";n<I;++n)e+=ie[n];else I=n,r+="u",e+="\\u";Bt({},de.UnexpectedToken,"ILLEGAL")}else e+="\\",Bt({},de.UnexpectedToken,"ILLEGAL");else r+=t,e+=t;return{value:r,literal:e}}function vI(){var t,e,r,n,s;return ue=null,Da(),t=I,e=EQ(),r=_Q(),s=wQ(e.value,r.value),J.tokenize?{type:le.RegularExpression,value:s,lineNumber:Le,lineStart:rt,start:t,end:I}:{literal:e.literal+r.literal,value:s,start:t,end:I}}function Hu(){var t,e,r,n;return Da(),t=I,e={start:{line:Le,column:I-rt}},r=vI(),e.end={line:Le,column:I-rt},J.tokenize||(J.tokens.length>0&&(n=J.tokens[J.tokens.length-1],n.range[0]===t&&n.type==="Punctuator"&&(n.value==="/"||n.value==="/=")&&J.tokens.pop()),J.tokens.push({type:"RegularExpression",value:r.literal,range:[t,I],loc:e})),r}function SQ(t){return t.type===le.Identifier||t.type===le.Keyword||t.type===le.BooleanLiteral||t.type===le.NullLiteral}function DQ(){var t,e;if(t=J.tokens[J.tokens.length-1],!t)return Hu();if(t.type==="Punctuator"){if(t.value==="]")return To();if(t.value===")")return e=J.tokens[J.openParenToken-1],e&&e.type==="Keyword"&&(e.value==="if"||e.value==="while"||e.value==="for"||e.value==="with")?Hu():To();if(t.value==="}"){if(J.tokens[J.openCurlyToken-3]&&J.tokens[J.openCurlyToken-3].type==="Keyword"){if(e=J.tokens[J.openCurlyToken-4],!e)return To()}else if(J.tokens[J.openCurlyToken-4]&&J.tokens[J.openCurlyToken-4].type==="Keyword"){if(e=J.tokens[J.openCurlyToken-5],!e)return Hu()}else return To();return yI.indexOf(e.value)>=0?To():Hu()}return Hu()}return t.type==="Keyword"?Hu():To()}function S_(){var t;return Da(),I>=Tt?{type:le.EOF,lineNumber:Le,lineStart:rt,start:I,end:I}:(t=ie.charCodeAt(I),ql(t)?yQ():t===40||t===41||t===59?To():t===39||t===34?vQ():t===46?Bo(ie.charCodeAt(I+1))?fI():To():Bo(t)?fI():J.tokenize&&t===47?DQ():To())}function wI(){var t,e,r,n;return Da(),t={start:{line:Le,column:I-rt}},e=S_(),t.end={line:Le,column:I-rt},e.type!==le.EOF&&(n=ie.slice(e.start,e.end),J.tokens.push({type:qi[e.type],value:n,range:[e.start,e.end],loc:t})),e}function Ye(){var t;return t=ue,I=t.end,Le=t.lineNumber,rt=t.lineStart,ue=typeof J.tokens<"u"?wI():S_(),I=t.end,Le=t.lineNumber,rt=t.lineStart,t}function D_(){var t,e,r;t=I,e=Le,r=rt,ue=typeof J.tokens<"u"?wI():S_(),I=t,Le=e,rt=r}function pI(t,e){this.line=t,this.column=e}function AQ(t,e,r,n){this.start=new pI(t,e),this.end=new pI(r,n)}__={name:"SyntaxTree",processComment:function(t){var e,r;if(!(t.type===we.Syntax.Program&&t.body.length>0)){for(J.trailingComments.length>0?J.trailingComments[0].range[0]>=t.range[1]?(r=J.trailingComments,J.trailingComments=[]):J.trailingComments.length=0:J.bottomRightStack.length>0&&J.bottomRightStack[J.bottomRightStack.length-1].trailingComments&&J.bottomRightStack[J.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(r=J.bottomRightStack[J.bottomRightStack.length-1].trailingComments,delete J.bottomRightStack[J.bottomRightStack.length-1].trailingComments);J.bottomRightStack.length>0&&J.bottomRightStack[J.bottomRightStack.length-1].range[0]>=t.range[0];)e=J.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):J.leadingComments.length>0&&J.leadingComments[J.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=J.leadingComments,J.leadingComments=[]),r&&(t.trailingComments=r),J.bottomRightStack.push(t)}},markEnd:function(t,e){return J.range&&(t.range=[e.start,I]),J.loc&&(t.loc=new AQ(e.startLineNumber===void 0?e.lineNumber:e.startLineNumber,e.start-(e.startLineStart===void 0?e.lineStart:e.startLineStart),Le,I-rt),this.postProcess(t)),J.attachComment&&this.processComment(t),t},postProcess:function(t){return J.source&&(t.loc.source=J.source),t},createArrayExpression:function(t){return{type:we.Syntax.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,r){return{type:we.Syntax.AssignmentExpression,operator:t,left:e,right:r}},createBinaryExpression:function(t,e,r){var n=t==="||"||t==="&&"?we.Syntax.LogicalExpression:we.Syntax.BinaryExpression;return{type:n,operator:t,left:e,right:r}},createBlockStatement:function(t){return{type:we.Syntax.BlockStatement,body:t}},createBreakStatement:function(t){return{type:we.Syntax.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:we.Syntax.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:we.Syntax.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,r){return{type:we.Syntax.ConditionalExpression,test:t,consequent:e,alternate:r}},createContinueStatement:function(t){return{type:we.Syntax.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:we.Syntax.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:we.Syntax.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:we.Syntax.EmptyStatement}},createExpressionStatement:function(t){return{type:we.Syntax.ExpressionStatement,expression:t}},createForStatement:function(t,e,r,n){return{type:we.Syntax.ForStatement,init:t,test:e,update:r,body:n}},createForInStatement:function(t,e,r){return{type:we.Syntax.ForInStatement,left:t,right:e,body:r,each:!1}},createFunctionDeclaration:function(t,e,r,n){return{type:we.Syntax.FunctionDeclaration,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,r,n){return{type:we.Syntax.FunctionExpression,id:t,params:e,defaults:r,body:n,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:we.Syntax.Identifier,name:t}},createIfStatement:function(t,e,r){return{type:we.Syntax.IfStatement,test:t,consequent:e,alternate:r}},createLabeledStatement:function(t,e){return{type:we.Syntax.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:we.Syntax.Literal,value:t.value,raw:ie.slice(t.start,t.end)}},createMemberExpression:function(t,e,r){return{type:we.Syntax.MemberExpression,computed:t==="[",object:e,property:r}},createNewExpression:function(t,e){return{type:we.Syntax.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:we.Syntax.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:we.Syntax.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:we.Syntax.Program,body:t}},createProperty:function(t,e,r){return{type:we.Syntax.Property,key:e,value:r,kind:t}},createReturnStatement:function(t){return{type:we.Syntax.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:we.Syntax.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:we.Syntax.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:we.Syntax.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:we.Syntax.ThisExpression}},createThrowStatement:function(t){return{type:we.Syntax.ThrowStatement,argument:t}},createTryStatement:function(t,e,r,n){return{type:we.Syntax.TryStatement,block:t,guardedHandlers:e,handlers:r,finalizer:n}},createUnaryExpression:function(t,e){return t==="++"||t==="--"?{type:we.Syntax.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:we.Syntax.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:we.Syntax.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:we.Syntax.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:we.Syntax.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:we.Syntax.WithStatement,object:t,body:e}}};function hp(){var t,e,r,n;return t=I,e=Le,r=rt,Da(),n=Le!==e,I=t,Le=e,rt=r,n}function Ze(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var s,i=e.replace(/%(\d)/g,function(o,a){return fp(a<r.length,"Message reference must be in range"),r[a]});throw typeof t.lineNumber=="number"?(s=new Error("Line "+t.lineNumber+": "+i),s.index=t.start,s.lineNumber=t.lineNumber,s.column=t.start-rt+1):(s=new Error("Line "+Le+": "+i),s.index=I,s.lineNumber=Le,s.column=I-rt+1),s.description=i,s}function Bt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{Ze.apply(null,t)}catch(r){if(J.errors)J.errors.push(r);else throw r}}function Is(t){if(t.type===le.EOF&&Ze(t,de.UnexpectedEOS),t.type===le.NumericLiteral&&Ze(t,de.UnexpectedNumber),t.type===le.StringLiteral&&Ze(t,de.UnexpectedString),t.type===le.Identifier&&Ze(t,de.UnexpectedIdentifier),t.type===le.Keyword){if(fQ(t.value))Ze(t,de.UnexpectedReserved);else if(Ot&&pp(t.value)){Bt(t,de.StrictReservedWord);return}Ze(t,de.UnexpectedToken,t.value)}Ze(t,de.UnexpectedToken,t.value)}function Re(t){var e=Ye();(e.type!==le.Punctuator||e.value!==t)&&Is(e)}function vr(t){var e=Ye();(e.type!==le.Keyword||e.value!==t)&&Is(e)}function Te(t){return ue.type===le.Punctuator&&ue.value===t}function zr(t){return ue.type===le.Keyword&&ue.value===t}function xQ(){var t;return ue.type!==le.Punctuator?!1:(t=ue.value,t==="="||t==="*="||t==="/="||t==="%="||t==="+="||t==="-="||t==="<<="||t===">>="||t===">>>="||t==="&="||t==="^="||t==="|=")}function ks(){var t;if(ie.charCodeAt(I)===59||Te(";")){Ye();return}t=Le,Da(),Le===t&&ue.type!==le.EOF&&!Te("}")&&Is(ue)}function fy(t){return t.type===we.Syntax.Identifier||t.type===we.Syntax.MemberExpression}function CQ(){var t=[],e;for(e=ue,Re("[");!Te("]");)Te(",")?(Ye(),t.push(null)):(t.push(ji()),Te("]")||Re(","));return Ye(),W.markEnd(W.createArrayExpression(t),e)}function v_(t,e){var r,n,s;return r=Ot,s=ue,n=x_(),e&&Ot&&fi(t[0].name)&&Bt(e,de.StrictParamName),Ot=r,W.markEnd(W.createFunctionExpression(null,t,[],n),s)}function uy(){var t,e;return e=ue,t=Ye(),t.type===le.StringLiteral||t.type===le.NumericLiteral?(Ot&&t.octal&&Bt(t,de.StrictOctalLiteral),W.markEnd(W.createLiteral(t),e)):W.markEnd(W.createIdentifier(t.value),e)}function PQ(){var t,e,r,n,s,i;if(t=ue,i=ue,t.type===le.Identifier)return r=uy(),t.value==="get"&&!Te(":")?(e=uy(),Re("("),Re(")"),n=v_([]),W.markEnd(W.createProperty("get",e,n),i)):t.value==="set"&&!Te(":")?(e=uy(),Re("("),t=ue,t.type!==le.Identifier?(Re(")"),Bt(t,de.UnexpectedToken,t.value),n=v_([])):(s=[Aa()],Re(")"),n=v_(s,t)),W.markEnd(W.createProperty("set",e,n),i)):(Re(":"),n=ji(),W.markEnd(W.createProperty("init",r,n),i));if(t.type===le.EOF||t.type===le.Punctuator)Is(t);else return e=uy(),Re(":"),n=ji(),W.markEnd(W.createProperty("init",e,n),i)}function OQ(){var t=[],e,r,n,s,i={},o=String,a;for(a=ue,Re("{");!Te("}");)e=PQ(),e.key.type===we.Syntax.Identifier?r=e.key.name:r=o(e.key.value),s=e.kind==="init"?Sa.Data:e.kind==="get"?Sa.Get:Sa.Set,n="$"+r,Object.prototype.hasOwnProperty.call(i,n)?(i[n]===Sa.Data?Ot&&s===Sa.Data?Bt({},de.StrictDuplicateProperty):s!==Sa.Data&&Bt({},de.AccessorDataProperty):s===Sa.Data?Bt({},de.AccessorDataProperty):i[n]&s&&Bt({},de.AccessorGetSet),i[n]|=s):i[n]=s,t.push(e),Te("}")||Re(",");return Re("}"),W.markEnd(W.createObjectExpression(t),a)}function BQ(){var t;return Re("("),t=$r(),Re(")"),t}function EI(){var t,e,r,n;if(Te("("))return BQ();if(Te("["))return CQ();if(Te("{"))return OQ();if(t=ue.type,n=ue,t===le.Identifier)r=W.createIdentifier(Ye().value);else if(t===le.StringLiteral||t===le.NumericLiteral)Ot&&ue.octal&&Bt(ue,de.StrictOctalLiteral),r=W.createLiteral(Ye());else if(t===le.Keyword){if(zr("function"))return nee();zr("this")?(Ye(),r=W.createThisExpression()):Is(Ye())}else t===le.BooleanLiteral?(e=Ye(),e.value=e.value==="true",r=W.createLiteral(e)):t===le.NullLiteral?(e=Ye(),e.value=null,r=W.createLiteral(e)):Te("/")||Te("/=")?(typeof J.tokens<"u"?r=W.createLiteral(Hu()):r=W.createLiteral(vI()),D_()):Is(Ye());return W.markEnd(r,n)}function _I(){var t=[];if(Re("("),!Te(")"))for(;I<Tt&&(t.push(ji()),!Te(")"));)Re(",");return Re(")"),t}function TQ(){var t,e;return e=ue,t=Ye(),SQ(t)||Is(t),W.markEnd(W.createIdentifier(t.value),e)}function SI(){return Re("."),TQ()}function DI(){var t;return Re("["),t=$r(),Re("]"),t}function AI(){var t,e,r;return r=ue,vr("new"),t=IQ(),e=Te("(")?_I():[],W.markEnd(W.createNewExpression(t,e),r)}function FQ(){var t,e,r,n,s;for(s=ue,t=Ae.allowIn,Ae.allowIn=!0,e=zr("new")?AI():EI(),Ae.allowIn=t;;){if(Te("."))n=SI(),e=W.createMemberExpression(".",e,n);else if(Te("("))r=_I(),e=W.createCallExpression(e,r);else if(Te("["))n=DI(),e=W.createMemberExpression("[",e,n);else break;W.markEnd(e,s)}return e}function IQ(){var t,e,r,n;for(n=ue,t=Ae.allowIn,e=zr("new")?AI():EI(),Ae.allowIn=t;Te(".")||Te("[");)Te("[")?(r=DI(),e=W.createMemberExpression("[",e,r)):(r=SI(),e=W.createMemberExpression(".",e,r)),W.markEnd(e,n);return e}function hI(){var t,e,r=ue;return t=FQ(),ue.type===le.Punctuator&&(Te("++")||Te("--"))&&!hp()&&(Ot&&t.type===we.Syntax.Identifier&&fi(t.name)&&Bt({},de.StrictLHSPostfix),fy(t)||Bt({},de.InvalidLHSInAssignment),e=Ye(),t=W.markEnd(W.createPostfixExpression(e.value,t),r)),t}function jl(){var t,e,r;return ue.type!==le.Punctuator&&ue.type!==le.Keyword?e=hI():Te("++")||Te("--")?(r=ue,t=Ye(),e=jl(),Ot&&e.type===we.Syntax.Identifier&&fi(e.name)&&Bt({},de.StrictLHSPrefix),fy(e)||Bt({},de.InvalidLHSInAssignment),e=W.createUnaryExpression(t.value,e),e=W.markEnd(e,r)):Te("+")||Te("-")||Te("~")||Te("!")?(r=ue,t=Ye(),e=jl(),e=W.createUnaryExpression(t.value,e),e=W.markEnd(e,r)):zr("delete")||zr("void")||zr("typeof")?(r=ue,t=Ye(),e=jl(),e=W.createUnaryExpression(t.value,e),e=W.markEnd(e,r),Ot&&e.operator==="delete"&&e.argument.type===we.Syntax.Identifier&&Bt({},de.StrictDelete)):e=hI(),e}function mI(t,e){var r=0;if(t.type!==le.Punctuator&&t.type!==le.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=e?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11;break;default:break}return r}function kQ(){var t,e,r,n,s,i,o,a,u,c;if(t=ue,u=jl(),n=ue,s=mI(n,Ae.allowIn),s===0)return u;for(n.prec=s,Ye(),e=[t,ue],o=jl(),i=[u,n,o];(s=mI(ue,Ae.allowIn))>0;){for(;i.length>2&&s<=i[i.length-2].prec;)o=i.pop(),a=i.pop().value,u=i.pop(),r=W.createBinaryExpression(a,u,o),e.pop(),t=e[e.length-1],W.markEnd(r,t),i.push(r);n=Ye(),n.prec=s,i.push(n),e.push(ue),r=jl(),i.push(r)}for(c=i.length-1,r=i[c],e.pop();c>1;)r=W.createBinaryExpression(i[c-1].value,i[c-2],r),c-=2,t=e.pop(),W.markEnd(r,t);return r}function RQ(){var t,e,r,n,s;return s=ue,t=kQ(),Te("?")&&(Ye(),e=Ae.allowIn,Ae.allowIn=!0,r=ji(),Ae.allowIn=e,Re(":"),n=ji(),t=W.createConditionalExpression(t,r,n),W.markEnd(t,s)),t}function ji(){var t,e,r,n,s;return t=ue,s=ue,n=e=RQ(),xQ()&&(fy(e)||Bt({},de.InvalidLHSInAssignment),Ot&&e.type===we.Syntax.Identifier&&fi(e.name)&&Bt(t,de.StrictLHSAssignment),t=Ye(),r=ji(),n=W.markEnd(W.createAssignmentExpression(t.value,e,r),s)),n}function $r(){var t,e=ue;if(t=ji(),Te(",")){for(t=W.createSequenceExpression([t]);I<Tt&&Te(",");)Ye(),t.expressions.push(ji());W.markEnd(t,e)}return t}function $Q(){for(var t=[],e;I<Tt&&!(Te("}")||(e=dp(),typeof e>"u"));)t.push(e);return t}function dy(){var t,e;return e=ue,Re("{"),t=$Q(),Re("}"),W.markEnd(W.createBlockStatement(t),e)}function Aa(){var t,e;return e=ue,t=Ye(),t.type!==le.Identifier&&Is(t),W.markEnd(W.createIdentifier(t.value),e)}function NQ(t){var e=null,r,n;return n=ue,r=Aa(),Ot&&fi(r.name)&&Bt({},de.StrictVarName),t==="const"?(Re("="),e=ji()):Te("=")&&(Ye(),e=ji()),W.markEnd(W.createVariableDeclarator(r,e),n)}function A_(t){var e=[];do{if(e.push(NQ(t)),!Te(","))break;Ye()}while(I<Tt);return e}function MQ(){var t;return vr("var"),t=A_(),ks(),W.createVariableDeclaration(t,"var")}function jQ(t){var e,r;return r=ue,vr(t),e=A_(t),ks(),W.markEnd(W.createVariableDeclaration(e,t),r)}function qQ(){return Re(";"),W.createEmptyStatement()}function LQ(){var t=$r();return ks(),W.createExpressionStatement(t)}function UQ(){var t,e,r;return vr("if"),Re("("),t=$r(),Re(")"),e=Rs(),zr("else")?(Ye(),r=Rs()):r=null,W.createIfStatement(t,e,r)}function VQ(){var t,e,r;return vr("do"),r=Ae.inIteration,Ae.inIteration=!0,t=Rs(),Ae.inIteration=r,vr("while"),Re("("),e=$r(),Re(")"),Te(";")&&Ye(),W.createDoWhileStatement(t,e)}function KQ(){var t,e,r;return vr("while"),Re("("),t=$r(),Re(")"),r=Ae.inIteration,Ae.inIteration=!0,e=Rs(),Ae.inIteration=r,W.createWhileStatement(t,e)}function HQ(){var t,e,r;return r=ue,t=Ye(),e=A_(),W.markEnd(W.createVariableDeclaration(e,t.value),r)}function WQ(){var t,e,r,n,s,i,o;return t=e=r=null,vr("for"),Re("("),Te(";")?Ye():(zr("var")||zr("let")?(Ae.allowIn=!1,t=HQ(),Ae.allowIn=!0,t.declarations.length===1&&zr("in")&&(Ye(),n=t,s=$r(),t=null)):(Ae.allowIn=!1,t=$r(),Ae.allowIn=!0,zr("in")&&(fy(t)||Bt({},de.InvalidLHSInForIn),Ye(),n=t,s=$r(),t=null)),typeof n>"u"&&Re(";")),typeof n>"u"&&(Te(";")||(e=$r()),Re(";"),Te(")")||(r=$r())),Re(")"),o=Ae.inIteration,Ae.inIteration=!0,i=Rs(),Ae.inIteration=o,typeof n>"u"?W.createForStatement(t,e,r,i):W.createForInStatement(n,s,i)}function zQ(){var t=null,e;return vr("continue"),ie.charCodeAt(I)===59?(Ye(),Ae.inIteration||Ze({},de.IllegalContinue),W.createContinueStatement(null)):hp()?(Ae.inIteration||Ze({},de.IllegalContinue),W.createContinueStatement(null)):(ue.type===le.Identifier&&(t=Aa(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Ae.labelSet,e)||Ze({},de.UnknownLabel,t.name)),ks(),t===null&&!Ae.inIteration&&Ze({},de.IllegalContinue),W.createContinueStatement(t))}function JQ(){var t=null,e;return vr("break"),ie.charCodeAt(I)===59?(Ye(),Ae.inIteration||Ae.inSwitch||Ze({},de.IllegalBreak),W.createBreakStatement(null)):hp()?(Ae.inIteration||Ae.inSwitch||Ze({},de.IllegalBreak),W.createBreakStatement(null)):(ue.type===le.Identifier&&(t=Aa(),e="$"+t.name,Object.prototype.hasOwnProperty.call(Ae.labelSet,e)||Ze({},de.UnknownLabel,t.name)),ks(),t===null&&!(Ae.inIteration||Ae.inSwitch)&&Ze({},de.IllegalBreak),W.createBreakStatement(t))}function GQ(){var t=null;return vr("return"),Ae.inFunctionBody||Bt({},de.IllegalReturn),ie.charCodeAt(I)===32&&ql(ie.charCodeAt(I+1))?(t=$r(),ks(),W.createReturnStatement(t)):hp()?W.createReturnStatement(null):(Te(";")||!Te("}")&&ue.type!==le.EOF&&(t=$r()),ks(),W.createReturnStatement(t))}function XQ(){var t,e;return Ot&&(Da(),Bt({},de.StrictModeWith)),vr("with"),Re("("),t=$r(),Re(")"),e=Rs(),W.createWithStatement(t,e)}function YQ(){var t,e=[],r,n;for(n=ue,zr("default")?(Ye(),t=null):(vr("case"),t=$r()),Re(":");I<Tt&&!(Te("}")||zr("default")||zr("case"));)r=Rs(),e.push(r);return W.markEnd(W.createSwitchCase(t,e),n)}function ZQ(){var t,e,r,n,s;if(vr("switch"),Re("("),t=$r(),Re(")"),Re("{"),e=[],Te("}"))return Ye(),W.createSwitchStatement(t,e);for(n=Ae.inSwitch,Ae.inSwitch=!0,s=!1;I<Tt&&!Te("}");)r=YQ(),r.test===null&&(s&&Ze({},de.MultipleDefaultsInSwitch),s=!0),e.push(r);return Ae.inSwitch=n,Re("}"),W.createSwitchStatement(t,e)}function QQ(){var t;return vr("throw"),hp()&&Ze({},de.NewlineAfterThrow),t=$r(),ks(),W.createThrowStatement(t)}function eee(){var t,e,r;return r=ue,vr("catch"),Re("("),Te(")")&&Is(ue),t=Aa(),Ot&&fi(t.name)&&Bt({},de.StrictCatchVariable),Re(")"),e=dy(),W.markEnd(W.createCatchClause(t,e),r)}function tee(){var t,e=[],r=null;return vr("try"),t=dy(),zr("catch")&&e.push(eee()),zr("finally")&&(Ye(),r=dy()),e.length===0&&!r&&Ze({},de.NoCatchOrFinally),W.createTryStatement(t,[],e,r)}function ree(){return vr("debugger"),ks(),W.createDebuggerStatement()}function Rs(){var t=ue.type,e,r,n,s;if(t===le.EOF&&Is(ue),t===le.Punctuator&&ue.value==="{")return dy();if(s=ue,t===le.Punctuator)switch(ue.value){case";":return W.markEnd(qQ(),s);case"(":return W.markEnd(LQ(),s);default:break}if(t===le.Keyword)switch(ue.value){case"break":return W.markEnd(JQ(),s);case"continue":return W.markEnd(zQ(),s);case"debugger":return W.markEnd(ree(),s);case"do":return W.markEnd(VQ(),s);case"for":return W.markEnd(WQ(),s);case"function":return W.markEnd(CI(),s);case"if":return W.markEnd(UQ(),s);case"return":return W.markEnd(GQ(),s);case"switch":return W.markEnd(ZQ(),s);case"throw":return W.markEnd(QQ(),s);case"try":return W.markEnd(tee(),s);case"var":return W.markEnd(MQ(),s);case"while":return W.markEnd(KQ(),s);case"with":return W.markEnd(XQ(),s);default:break}return e=$r(),e.type===we.Syntax.Identifier&&Te(":")?(Ye(),n="$"+e.name,Object.prototype.hasOwnProperty.call(Ae.labelSet,n)&&Ze({},de.Redeclaration,"Label",e.name),Ae.labelSet[n]=!0,r=Rs(),delete Ae.labelSet[n],W.markEnd(W.createLabeledStatement(e,r),s)):(ks(),W.markEnd(W.createExpressionStatement(e),s))}function x_(){var t,e=[],r,n,s,i,o,a,u,c;for(c=ue,Re("{");I<Tt&&!(ue.type!==le.StringLiteral||(r=ue,t=dp(),e.push(t),t.expression.type!==we.Syntax.Literal));)n=ie.slice(r.start+1,r.end-1),n==="use strict"?(Ot=!0,s&&Bt(s,de.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(i=Ae.labelSet,o=Ae.inIteration,a=Ae.inSwitch,u=Ae.inFunctionBody,Ae.labelSet={},Ae.inIteration=!1,Ae.inSwitch=!1,Ae.inFunctionBody=!0;I<Tt&&!(Te("}")||(t=dp(),typeof t>"u"));)e.push(t);return Re("}"),Ae.labelSet=i,Ae.inIteration=o,Ae.inSwitch=a,Ae.inFunctionBody=u,W.markEnd(W.createBlockStatement(e),c)}function xI(t){var e,r=[],n,s,i,o,a;if(Re("("),!Te(")"))for(i={};I<Tt&&(n=ue,e=Aa(),o="$"+n.value,Ot?(fi(n.value)&&(s=n,a=de.StrictParamName),Object.prototype.hasOwnProperty.call(i,o)&&(s=n,a=de.StrictParamDupe)):t||(fi(n.value)?(t=n,a=de.StrictParamName):pp(n.value)?(t=n,a=de.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,o)&&(t=n,a=de.StrictParamDupe)),r.push(e),i[o]=!0,!Te(")"));)Re(",");return Re(")"),{params:r,stricted:s,firstRestricted:t,message:a}}function CI(){var t,e=[],r,n,s,i,o,a,u,c;return c=ue,vr("function"),n=ue,t=Aa(),Ot?fi(n.value)&&Bt(n,de.StrictFunctionName):fi(n.value)?(o=n,a=de.StrictFunctionName):pp(n.value)&&(o=n,a=de.StrictReservedWord),i=xI(o),e=i.params,s=i.stricted,o=i.firstRestricted,i.message&&(a=i.message),u=Ot,r=x_(),Ot&&o&&Ze(o,a),Ot&&s&&Bt(s,a),Ot=u,W.markEnd(W.createFunctionDeclaration(t,e,[],r),c)}function nee(){var t,e=null,r,n,s,i,o=[],a,u,c;return c=ue,vr("function"),Te("(")||(t=ue,e=Aa(),Ot?fi(t.value)&&Bt(t,de.StrictFunctionName):fi(t.value)?(n=t,s=de.StrictFunctionName):pp(t.value)&&(n=t,s=de.StrictReservedWord)),i=xI(n),o=i.params,r=i.stricted,n=i.firstRestricted,i.message&&(s=i.message),u=Ot,a=x_(),Ot&&n&&Ze(n,s),Ot&&r&&Bt(r,s),Ot=u,W.markEnd(W.createFunctionExpression(e,o,[],a),c)}function dp(){if(ue.type===le.Keyword)switch(ue.value){case"const":case"let":return jQ(ue.value);case"function":return CI();default:return Rs()}if(ue.type!==le.EOF)return Rs()}function iee(){for(var t,e=[],r,n,s;I<Tt&&(r=ue,!(r.type!==le.StringLiteral||(t=dp(),e.push(t),t.expression.type!==we.Syntax.Literal)));)n=ie.slice(r.start+1,r.end-1),n==="use strict"?(Ot=!0,s&&Bt(s,de.StrictOctalLiteral)):!s&&r.octal&&(s=r);for(;I<Tt&&(t=dp(),!(typeof t>"u"));)e.push(t);return e}function see(){var t,e;return Da(),D_(),e=ue,Ot=!1,t=iee(),W.markEnd(W.createProgram(t),e)}function PI(){var t,e,r,n=[];for(t=0;t<J.tokens.length;++t)e=J.tokens[t],r={type:e.type,value:e.value},J.range&&(r.range=e.range),J.loc&&(r.loc=e.loc),n.push(r);J.tokens=n}function oee(t,e){var r,n,s;r=String,typeof t!="string"&&!(t instanceof String)&&(t=r(t)),W=__,ie=t,I=0,Le=ie.length>0?1:0,rt=0,Tt=ie.length,ue=null,Ae={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},J={},e=e||{},e.tokens=!0,J.tokens=[],J.tokenize=!0,J.openParenToken=-1,J.openCurlyToken=-1,J.range=typeof e.range=="boolean"&&e.range,J.loc=typeof e.loc=="boolean"&&e.loc,typeof e.comment=="boolean"&&e.comment&&(J.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(J.errors=[]);try{if(D_(),ue.type===le.EOF)return J.tokens;for(n=Ye();ue.type!==le.EOF;)try{n=Ye()}catch(i){if(n=ue,J.errors){J.errors.push(i);break}else throw i}PI(),s=J.tokens,typeof J.comments<"u"&&(s.comments=J.comments),typeof J.errors<"u"&&(s.errors=J.errors)}catch(i){throw i}finally{J={}}return s}we.tokenize=oee;function aee(t,e){var r,n;n=String,typeof t!="string"&&!(t instanceof String)&&(t=n(t)),W=__,ie=t,I=0,Le=ie.length>0?1:0,rt=0,Tt=ie.length,ue=null,Ae={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},J={},typeof e<"u"&&(J.range=typeof e.range=="boolean"&&e.range,J.loc=typeof e.loc=="boolean"&&e.loc,J.attachComment=typeof e.attachComment=="boolean"&&e.attachComment,J.loc&&e.source!==null&&e.source!==void 0&&(J.source=n(e.source)),typeof e.tokens=="boolean"&&e.tokens&&(J.tokens=[]),typeof e.comment=="boolean"&&e.comment&&(J.comments=[]),typeof e.tolerant=="boolean"&&e.tolerant&&(J.errors=[]),J.attachComment&&(J.range=!0,J.comments=[],J.bottomRightStack=[],J.trailingComments=[],J.leadingComments=[]));try{r=see(),typeof J.comments<"u"&&(r.comments=J.comments),typeof J.tokens<"u"&&(PI(),r.tokens=J.tokens),typeof J.errors<"u"&&(r.errors=J.errors)}catch(s){throw s}finally{J={}}return r}we.parse=aee;we.version="1.2.2"});var BI=v(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0});py.slice=void 0;function uee(t,e,r,n){function s(u){return String(u).match(/^[0-9]+$/)?parseInt(u):Number.isFinite(u)?parseInt(u,10):0}if(typeof e=="string")throw new Error("start cannot be a string");if(typeof r=="string")throw new Error("end cannot be a string");if(typeof n=="string")throw new Error("step cannot be a string");var i=t.length;if(n===0)throw new Error("step cannot be zero");if(n=n?s(n):1,e=e<0?i+e:e,r=r<0?i+r:r,e=s(e===0?0:e||(n>0?0:i-1)),r=s(r===0?0:r||(n>0?i:-1)),e=n>0?Math.max(0,e):Math.min(i,e),r=n>0?Math.min(r,i):Math.max(-1,r),n>0&&r<=e)return[];if(n<0&&e<=r)return[];for(var o=[],a=e;a!=r&&!(n<0&&a<=r||n>0&&a>=r);a+=n)o.push(t[a]);return o}py.slice=uee});var TI=v((I_e,cee)=>{cee.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.3.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register"}}});var II=v(FI=>{(function t(e){"use strict";var r,n,s,i,o,a;function u(w){var P={},D,O;for(D in w)w.hasOwnProperty(D)&&(O=w[D],typeof O=="object"&&O!==null?P[D]=u(O):P[D]=O);return P}function c(w,P){var D,O,B,F;for(O=w.length,B=0;O;)D=O>>>1,F=B+D,P(w[F])?O=D:(B=F+1,O-=D+1);return B}r={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},i={},o={},a={},n={Break:i,Skip:o,Remove:a};function l(w,P){this.parent=w,this.key=P}l.prototype.replace=function(P){this.parent[this.key]=P},l.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)};function d(w,P,D,O){this.node=w,this.path=P,this.wrap=D,this.ref=O}function p(){}p.prototype.path=function(){var P,D,O,B,F,N;function R(q,M){if(Array.isArray(M))for(O=0,B=M.length;O<B;++O)q.push(M[O]);else q.push(M)}if(!this.__current.path)return null;for(F=[],P=2,D=this.__leavelist.length;P<D;++P)N=this.__leavelist[P],R(F,N.path);return R(F,this.__current.path),F},p.prototype.type=function(){var w=this.current();return w.type||this.__current.wrap},p.prototype.parents=function(){var P,D,O;for(O=[],P=1,D=this.__leavelist.length;P<D;++P)O.push(this.__leavelist[P].node);return O},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(P,D){var O,B;return B=void 0,O=this.__current,this.__current=D,this.__state=null,P&&(B=P.call(this,D.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=O,B},p.prototype.notify=function(P){this.__state=P},p.prototype.skip=function(){this.notify(o)},p.prototype.break=function(){this.notify(i)},p.prototype.remove=function(){this.notify(a)},p.prototype.__initialize=function(w,P){this.visitor=P,this.root=w,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,P.fallback==="iteration"?this.__fallback=Object.keys:typeof P.fallback=="function"&&(this.__fallback=P.fallback),this.__keys=s,P.keys&&(this.__keys=Object.assign(Object.create(this.__keys),P.keys))};function f(w){return w==null?!1:typeof w=="object"&&typeof w.type=="string"}function h(w,P){return(w===r.ObjectExpression||w===r.ObjectPattern)&&P==="properties"}p.prototype.traverse=function(P,D){var O,B,F,N,R,q,M,Z,Q,U,G,ee;for(this.__initialize(P,D),ee={},O=this.__worklist,B=this.__leavelist,O.push(new d(P,null,null,null)),B.push(new d(null,null,null,null));O.length;){if(F=O.pop(),F===ee){if(F=B.pop(),q=this.__execute(D.leave,F),this.__state===i||q===i)return;continue}if(F.node){if(q=this.__execute(D.enter,F),this.__state===i||q===i)return;if(O.push(ee),B.push(F),this.__state===o||q===o)continue;if(N=F.node,R=N.type||F.wrap,U=this.__keys[R],!U)if(this.__fallback)U=this.__fallback(N);else throw new Error("Unknown node type "+R+".");for(Z=U.length;(Z-=1)>=0;)if(M=U[Z],G=N[M],!!G)if(Array.isArray(G)){for(Q=G.length;(Q-=1)>=0;)if(G[Q]){if(h(R,U[Z]))F=new d(G[Q],[M,Q],"Property",null);else if(f(G[Q]))F=new d(G[Q],[M,Q],null,null);else continue;O.push(F)}}else f(G)&&O.push(new d(G,M,null,null))}}},p.prototype.replace=function(P,D){var O,B,F,N,R,q,M,Z,Q,U,G,ee,z;function $(j){var Y,se,pe,oe;if(j.ref.remove()){for(se=j.ref.key,oe=j.ref.parent,Y=O.length;Y--;)if(pe=O[Y],pe.ref&&pe.ref.parent===oe){if(pe.ref.key<se)break;--pe.ref.key}}}for(this.__initialize(P,D),G={},O=this.__worklist,B=this.__leavelist,ee={root:P},q=new d(P,null,null,new l(ee,"root")),O.push(q),B.push(q);O.length;){if(q=O.pop(),q===G){if(q=B.pop(),R=this.__execute(D.leave,q),R!==void 0&&R!==i&&R!==o&&R!==a&&q.ref.replace(R),(this.__state===a||R===a)&&$(q),this.__state===i||R===i)return ee.root;continue}if(R=this.__execute(D.enter,q),R!==void 0&&R!==i&&R!==o&&R!==a&&(q.ref.replace(R),q.node=R),(this.__state===a||R===a)&&($(q),q.node=null),this.__state===i||R===i)return ee.root;if(F=q.node,!!F&&(O.push(G),B.push(q),!(this.__state===o||R===o))){if(N=F.type||q.wrap,Q=this.__keys[N],!Q)if(this.__fallback)Q=this.__fallback(F);else throw new Error("Unknown node type "+N+".");for(M=Q.length;(M-=1)>=0;)if(z=Q[M],U=F[z],!!U)if(Array.isArray(U)){for(Z=U.length;(Z-=1)>=0;)if(U[Z]){if(h(N,Q[M]))q=new d(U[Z],[z,Z],"Property",new l(U,Z));else if(f(U[Z]))q=new d(U[Z],[z,Z],null,new l(U,Z));else continue;O.push(q)}}else f(U)&&O.push(new d(U,z,null,new l(F,z)))}}return ee.root};function y(w,P){var D=new p;return D.traverse(w,P)}function g(w,P){var D=new p;return D.replace(w,P)}function S(w,P){var D;return D=c(P,function(B){return B.range[0]>w.range[0]}),w.extendedRange=[w.range[0],w.range[1]],D!==P.length&&(w.extendedRange[1]=P[D].range[0]),D-=1,D>=0&&(w.extendedRange[0]=P[D].range[1]),w}function A(w,P,D){var O=[],B,F,N,R;if(!w.range)throw new Error("attachComments needs range information");if(!D.length){if(P.length){for(N=0,F=P.length;N<F;N+=1)B=u(P[N]),B.extendedRange=[0,w.range[0]],O.push(B);w.leadingComments=O}return w}for(N=0,F=P.length;N<F;N+=1)O.push(S(u(P[N]),D));return R=0,y(w,{enter:function(q){for(var M;R<O.length&&(M=O[R],!(M.extendedRange[1]>q.range[0]));)M.extendedRange[1]===q.range[0]?(q.leadingComments||(q.leadingComments=[]),q.leadingComments.push(M),O.splice(R,1)):R+=1;if(R===O.length)return n.Break;if(O[R].extendedRange[0]>q.range[1])return n.Skip}}),R=0,y(w,{leave:function(q){for(var M;R<O.length&&(M=O[R],!(q.range[1]<M.extendedRange[0]));)q.range[1]===M.extendedRange[0]?(q.trailingComments||(q.trailingComments=[]),q.trailingComments.push(M),O.splice(R,1)):R+=1;if(R===O.length)return n.Break;if(O[R].extendedRange[0]>q.range[1])return n.Skip}}),w}return e.version=TI().version,e.Syntax=r,e.traverse=y,e.replace=g,e.attachComments=A,e.VisitorKeys=s,e.VisitorOption=n,e.Controller=p,e.cloneEnvironment=function(){return t({})},e})(FI)});var RI=v((R_e,kI)=>{(function(){"use strict";function t(o){if(o==null)return!1;switch(o.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return!0}return!1}function e(o){if(o==null)return!1;switch(o.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return!0}return!1}function r(o){if(o==null)return!1;switch(o.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return!0}return!1}function n(o){return r(o)||o!=null&&o.type==="FunctionDeclaration"}function s(o){switch(o.type){case"IfStatement":return o.alternate!=null?o.alternate:o.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return o.body}return null}function i(o){var a;if(o.type!=="IfStatement"||o.alternate==null)return!1;a=o.consequent;do{if(a.type==="IfStatement"&&a.alternate==null)return!0;a=s(a)}while(a);return!1}kI.exports={isExpression:t,isStatement:r,isIterationStatement:e,isSourceElement:n,isProblematicIfStatement:i,trailingStatement:s}})()});var C_=v(($_e,$I)=>{(function(){"use strict";var t,e,r,n,s,i;e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,NonAsciiIdentifierPart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/},t={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};function o(g){return 48<=g&&g<=57}function a(g){return 48<=g&&g<=57||97<=g&&g<=102||65<=g&&g<=70}function u(g){return g>=48&&g<=55}r=[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function c(g){return g===32||g===9||g===11||g===12||g===160||g>=5760&&r.indexOf(g)>=0}function l(g){return g===10||g===13||g===8232||g===8233}function d(g){if(g<=65535)return String.fromCharCode(g);var S=String.fromCharCode(Math.floor((g-65536)/1024)+55296),A=String.fromCharCode((g-65536)%1024+56320);return S+A}for(n=new Array(128),i=0;i<128;++i)n[i]=i>=97&&i<=122||i>=65&&i<=90||i===36||i===95;for(s=new Array(128),i=0;i<128;++i)s[i]=i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||i===36||i===95;function p(g){return g<128?n[g]:e.NonAsciiIdentifierStart.test(d(g))}function f(g){return g<128?s[g]:e.NonAsciiIdentifierPart.test(d(g))}function h(g){return g<128?n[g]:t.NonAsciiIdentifierStart.test(d(g))}function y(g){return g<128?s[g]:t.NonAsciiIdentifierPart.test(d(g))}$I.exports={isDecimalDigit:o,isHexDigit:a,isOctalDigit:u,isWhiteSpace:c,isLineTerminator:l,isIdentifierStartES5:p,isIdentifierPartES5:f,isIdentifierStartES6:h,isIdentifierPartES6:y}})()});var MI=v((N_e,NI)=>{(function(){"use strict";var t=C_();function e(p){switch(p){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return!0;default:return!1}}function r(p,f){return!f&&p==="yield"?!1:n(p,f)}function n(p,f){if(f&&e(p))return!0;switch(p.length){case 2:return p==="if"||p==="in"||p==="do";case 3:return p==="var"||p==="for"||p==="new"||p==="try";case 4:return p==="this"||p==="else"||p==="case"||p==="void"||p==="with"||p==="enum";case 5:return p==="while"||p==="break"||p==="catch"||p==="throw"||p==="const"||p==="yield"||p==="class"||p==="super";case 6:return p==="return"||p==="typeof"||p==="delete"||p==="switch"||p==="export"||p==="import";case 7:return p==="default"||p==="finally"||p==="extends";case 8:return p==="function"||p==="continue"||p==="debugger";case 10:return p==="instanceof";default:return!1}}function s(p,f){return p==="null"||p==="true"||p==="false"||r(p,f)}function i(p,f){return p==="null"||p==="true"||p==="false"||n(p,f)}function o(p){return p==="eval"||p==="arguments"}function a(p){var f,h,y;if(p.length===0||(y=p.charCodeAt(0),!t.isIdentifierStartES5(y)))return!1;for(f=1,h=p.length;f<h;++f)if(y=p.charCodeAt(f),!t.isIdentifierPartES5(y))return!1;return!0}function u(p,f){return(p-55296)*1024+(f-56320)+65536}function c(p){var f,h,y,g,S;if(p.length===0)return!1;for(S=t.isIdentifierStartES6,f=0,h=p.length;f<h;++f){if(y=p.charCodeAt(f),55296<=y&&y<=56319){if(++f,f>=h||(g=p.charCodeAt(f),!(56320<=g&&g<=57343)))return!1;y=u(y,g)}if(!S(y))return!1;S=t.isIdentifierPartES6}return!0}function l(p,f){return a(p)&&!s(p,f)}function d(p,f){return c(p)&&!i(p,f)}NI.exports={isKeywordES5:r,isKeywordES6:n,isReservedWordES5:s,isReservedWordES6:i,isRestrictedWord:o,isIdentifierNameES5:a,isIdentifierNameES6:c,isIdentifierES5:l,isIdentifierES6:d}})()});var jI=v(hy=>{(function(){"use strict";hy.ast=RI(),hy.code=C_(),hy.keyword=MI()})()});var LI=v(P_=>{var qI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");P_.encode=function(t){if(0<=t&&t<qI.length)return qI[t];throw new TypeError("Must be between 0 and 63: "+t)};P_.decode=function(t){var e=65,r=90,n=97,s=122,i=48,o=57,a=43,u=47,c=26,l=52;return e<=t&&t<=r?t-e:n<=t&&t<=s?t-n+c:i<=t&&t<=o?t-i+l:t==a?62:t==u?63:-1}});var T_=v(B_=>{var UI=LI(),O_=5,VI=1<<O_,KI=VI-1,HI=VI;function lee(t){return t<0?(-t<<1)+1:(t<<1)+0}function dee(t){var e=(t&1)===1,r=t>>1;return e?-r:r}B_.encode=function(e){var r="",n,s=lee(e);do n=s&KI,s>>>=O_,s>0&&(n|=HI),r+=UI.encode(n);while(s>0);return r};B_.decode=function(e,r,n){var s=e.length,i=0,o=0,a,u;do{if(r>=s)throw new Error("Expected more digits in base 64 VLQ value.");if(u=UI.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&HI),u&=KI,i=i+(u<<o),o+=O_}while(a);n.value=dee(i),n.rest=r}});var Vl=v(nn=>{function fee(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}nn.getArg=fee;var WI=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,pee=/^data:.+\,.+$/;function mp(t){var e=t.match(WI);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}nn.urlParse=mp;function Ll(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}nn.urlGenerate=Ll;function F_(t){var e=t,r=mp(t);if(r){if(!r.path)return t;e=r.path}for(var n=nn.isAbsolute(e),s=e.split(/\/+/),i,o=0,a=s.length-1;a>=0;a--)i=s[a],i==="."?s.splice(a,1):i===".."?o++:o>0&&(i===""?(s.splice(a+1,o),o=0):(s.splice(a,2),o--));return e=s.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,Ll(r)):e}nn.normalize=F_;function zI(t,e){t===""&&(t="."),e===""&&(e=".");var r=mp(e),n=mp(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Ll(r);if(r||e.match(pee))return e;if(n&&!n.host&&!n.path)return n.host=e,Ll(n);var s=e.charAt(0)==="/"?e:F_(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=s,Ll(n)):s}nn.join=zI;nn.isAbsolute=function(t){return t.charAt(0)==="/"||WI.test(t)};function hee(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}nn.relative=hee;var JI=function(){var t=Object.create(null);return!("__proto__"in t)}();function GI(t){return t}function mee(t){return XI(t)?"$"+t:t}nn.toSetString=JI?GI:mee;function yee(t){return XI(t)?t.slice(1):t}nn.fromSetString=JI?GI:yee;function XI(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function gee(t,e,r){var n=Ul(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:Ul(t.name,e.name)}nn.compareByOriginalPositions=gee;function bee(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=Ul(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:Ul(t.name,e.name)}nn.compareByGeneratedPositionsDeflated=bee;function Ul(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function vee(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=Ul(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:Ul(t.name,e.name)}nn.compareByGeneratedPositionsInflated=vee;function wee(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}nn.parseSourceMapInput=wee;function Eee(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=mp(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var s=n.path.lastIndexOf("/");s>=0&&(n.path=n.path.substring(0,s+1))}e=zI(Ll(n),e)}return F_(e)}nn.computeSourceURL=Eee});var R_=v(YI=>{var I_=Vl(),k_=Object.prototype.hasOwnProperty,zu=typeof Map<"u";function Fo(){this._array=[],this._set=zu?new Map:Object.create(null)}Fo.fromArray=function(e,r){for(var n=new Fo,s=0,i=e.length;s<i;s++)n.add(e[s],r);return n};Fo.prototype.size=function(){return zu?this._set.size:Object.getOwnPropertyNames(this._set).length};Fo.prototype.add=function(e,r){var n=zu?e:I_.toSetString(e),s=zu?this.has(e):k_.call(this._set,n),i=this._array.length;(!s||r)&&this._array.push(e),s||(zu?this._set.set(e,i):this._set[n]=i)};Fo.prototype.has=function(e){if(zu)return this._set.has(e);var r=I_.toSetString(e);return k_.call(this._set,r)};Fo.prototype.indexOf=function(e){if(zu){var r=this._set.get(e);if(r>=0)return r}else{var n=I_.toSetString(e);if(k_.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};Fo.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};Fo.prototype.toArray=function(){return this._array.slice()};YI.ArraySet=Fo});var e5=v(QI=>{var ZI=Vl();function _ee(t,e){var r=t.generatedLine,n=e.generatedLine,s=t.generatedColumn,i=e.generatedColumn;return n>r||n==r&&i>=s||ZI.compareByGeneratedPositionsInflated(t,e)<=0}function my(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}my.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};my.prototype.add=function(e){_ee(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};my.prototype.toArray=function(){return this._sorted||(this._array.sort(ZI.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};QI.MappingList=my});var $_=v(t5=>{var yp=T_(),wr=Vl(),yy=R_().ArraySet,See=e5().MappingList;function pi(t){t||(t={}),this._file=wr.getArg(t,"file",null),this._sourceRoot=wr.getArg(t,"sourceRoot",null),this._skipValidation=wr.getArg(t,"skipValidation",!1),this._sources=new yy,this._names=new yy,this._mappings=new See,this._sourcesContents=null}pi.prototype._version=3;pi.fromSourceMap=function(e){var r=e.sourceRoot,n=new pi({file:e.file,sourceRoot:r});return e.eachMapping(function(s){var i={generated:{line:s.generatedLine,column:s.generatedColumn}};s.source!=null&&(i.source=s.source,r!=null&&(i.source=wr.relative(r,i.source)),i.original={line:s.originalLine,column:s.originalColumn},s.name!=null&&(i.name=s.name)),n.addMapping(i)}),e.sources.forEach(function(s){var i=s;r!==null&&(i=wr.relative(r,s)),n._sources.has(i)||n._sources.add(i);var o=e.sourceContentFor(s);o!=null&&n.setSourceContent(s,o)}),n};pi.prototype.addMapping=function(e){var r=wr.getArg(e,"generated"),n=wr.getArg(e,"original",null),s=wr.getArg(e,"source",null),i=wr.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,s,i),s!=null&&(s=String(s),this._sources.has(s)||this._sources.add(s)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:s,name:i})};pi.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=wr.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[wr.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[wr.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};pi.prototype.applySourceMap=function(e,r,n){var s=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);s=e.file}var i=this._sourceRoot;i!=null&&(s=wr.relative(i,s));var o=new yy,a=new yy;this._mappings.unsortedForEach(function(u){if(u.source===s&&u.originalLine!=null){var c=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});c.source!=null&&(u.source=c.source,n!=null&&(u.source=wr.join(n,u.source)),i!=null&&(u.source=wr.relative(i,u.source)),u.originalLine=c.line,u.originalColumn=c.column,c.name!=null&&(u.name=c.name))}var l=u.source;l!=null&&!o.has(l)&&o.add(l);var d=u.name;d!=null&&!a.has(d)&&a.add(d)},this),this._sources=o,this._names=a,e.sources.forEach(function(u){var c=e.sourceContentFor(u);c!=null&&(n!=null&&(u=wr.join(n,u)),i!=null&&(u=wr.relative(i,u)),this.setSourceContent(u,c))},this)};pi.prototype._validateMapping=function(e,r,n,s){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!s)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:s}))}};pi.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,s=0,i=0,o=0,a="",u,c,l,d,p=this._mappings.toArray(),f=0,h=p.length;f<h;f++){if(c=p[f],u="",c.generatedLine!==r)for(e=0;c.generatedLine!==r;)u+=";",r++;else if(f>0){if(!wr.compareByGeneratedPositionsInflated(c,p[f-1]))continue;u+=","}u+=yp.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(d=this._sources.indexOf(c.source),u+=yp.encode(d-o),o=d,u+=yp.encode(c.originalLine-1-s),s=c.originalLine-1,u+=yp.encode(c.originalColumn-n),n=c.originalColumn,c.name!=null&&(l=this._names.indexOf(c.name),u+=yp.encode(l-i),i=l)),a+=u}return a};pi.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=wr.relative(r,n));var s=wr.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,s)?this._sourcesContents[s]:null},this)};pi.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};pi.prototype.toString=function(){return JSON.stringify(this.toJSON())};t5.SourceMapGenerator=pi});var r5=v(Ju=>{Ju.GREATEST_LOWER_BOUND=1;Ju.LEAST_UPPER_BOUND=2;function N_(t,e,r,n,s,i){var o=Math.floor((e-t)/2)+t,a=s(r,n[o],!0);return a===0?o:a>0?e-o>1?N_(o,e,r,n,s,i):i==Ju.LEAST_UPPER_BOUND?e<n.length?e:-1:o:o-t>1?N_(t,o,r,n,s,i):i==Ju.LEAST_UPPER_BOUND?o:t<0?-1:t}Ju.search=function(e,r,n,s){if(r.length===0)return-1;var i=N_(-1,r.length,e,r,n,s||Ju.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var i5=v(n5=>{function M_(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Dee(t,e){return Math.round(t+Math.random()*(e-t))}function j_(t,e,r,n){if(r<n){var s=Dee(r,n),i=r-1;M_(t,s,n);for(var o=t[n],a=r;a<n;a++)e(t[a],o)<=0&&(i+=1,M_(t,i,a));M_(t,i+1,a);var u=i+1;j_(t,e,r,u-1),j_(t,e,u+1,n)}}n5.quickSort=function(t,e){j_(t,e,0,t.length-1)}});var o5=v(gy=>{var ve=Vl(),q_=r5(),Kl=R_().ArraySet,Aee=T_(),gp=i5().quickSort;function Vt(t,e){var r=t;return typeof t=="string"&&(r=ve.parseSourceMapInput(t)),r.sections!=null?new Li(r,e):new Jr(r,e)}Vt.fromSourceMap=function(t,e){return Jr.fromSourceMap(t,e)};Vt.prototype._version=3;Vt.prototype.__generatedMappings=null;Object.defineProperty(Vt.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Vt.prototype.__originalMappings=null;Object.defineProperty(Vt.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Vt.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Vt.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Vt.GENERATED_ORDER=1;Vt.ORIGINAL_ORDER=2;Vt.GREATEST_LOWER_BOUND=1;Vt.LEAST_UPPER_BOUND=2;Vt.prototype.eachMapping=function(e,r,n){var s=r||null,i=n||Vt.GENERATED_ORDER,o;switch(i){case Vt.GENERATED_ORDER:o=this._generatedMappings;break;case Vt.ORIGINAL_ORDER:o=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;o.map(function(u){var c=u.source===null?null:this._sources.at(u.source);return c=ve.computeSourceURL(a,c,this._sourceMapURL),{source:c,generatedLine:u.generatedLine,generatedColumn:u.generatedColumn,originalLine:u.originalLine,originalColumn:u.originalColumn,name:u.name===null?null:this._names.at(u.name)}},this).forEach(e,s)};Vt.prototype.allGeneratedPositionsFor=function(e){var r=ve.getArg(e,"line"),n={source:ve.getArg(e,"source"),originalLine:r,originalColumn:ve.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var s=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",ve.compareByOriginalPositions,q_.LEAST_UPPER_BOUND);if(i>=0){var o=this._originalMappings[i];if(e.column===void 0)for(var a=o.originalLine;o&&o.originalLine===a;)s.push({line:ve.getArg(o,"generatedLine",null),column:ve.getArg(o,"generatedColumn",null),lastColumn:ve.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i];else for(var u=o.originalColumn;o&&o.originalLine===r&&o.originalColumn==u;)s.push({line:ve.getArg(o,"generatedLine",null),column:ve.getArg(o,"generatedColumn",null),lastColumn:ve.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++i]}return s};gy.SourceMapConsumer=Vt;function Jr(t,e){var r=t;typeof t=="string"&&(r=ve.parseSourceMapInput(t));var n=ve.getArg(r,"version"),s=ve.getArg(r,"sources"),i=ve.getArg(r,"names",[]),o=ve.getArg(r,"sourceRoot",null),a=ve.getArg(r,"sourcesContent",null),u=ve.getArg(r,"mappings"),c=ve.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);o&&(o=ve.normalize(o)),s=s.map(String).map(ve.normalize).map(function(l){return o&&ve.isAbsolute(o)&&ve.isAbsolute(l)?ve.relative(o,l):l}),this._names=Kl.fromArray(i.map(String),!0),this._sources=Kl.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map(function(l){return ve.computeSourceURL(o,l,e)}),this.sourceRoot=o,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=c}Jr.prototype=Object.create(Vt.prototype);Jr.prototype.consumer=Vt;Jr.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=ve.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};Jr.fromSourceMap=function(e,r){var n=Object.create(Jr.prototype),s=n._names=Kl.fromArray(e._names.toArray(),!0),i=n._sources=Kl.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(f){return ve.computeSourceURL(n.sourceRoot,f,r)});for(var o=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],c=0,l=o.length;c<l;c++){var d=o[c],p=new s5;p.generatedLine=d.generatedLine,p.generatedColumn=d.generatedColumn,d.source&&(p.source=i.indexOf(d.source),p.originalLine=d.originalLine,p.originalColumn=d.originalColumn,d.name&&(p.name=s.indexOf(d.name)),u.push(p)),a.push(p)}return gp(n.__originalMappings,ve.compareByOriginalPositions),n};Jr.prototype._version=3;Object.defineProperty(Jr.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function s5(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}Jr.prototype._parseMappings=function(e,r){for(var n=1,s=0,i=0,o=0,a=0,u=0,c=e.length,l=0,d={},p={},f=[],h=[],y,g,S,A,w;l<c;)if(e.charAt(l)===";")n++,l++,s=0;else if(e.charAt(l)===",")l++;else{for(y=new s5,y.generatedLine=n,A=l;A<c&&!this._charIsMappingSeparator(e,A);A++);if(g=e.slice(l,A),S=d[g],S)l+=g.length;else{for(S=[];l<A;)Aee.decode(e,l,p),w=p.value,l=p.rest,S.push(w);if(S.length===2)throw new Error("Found a source, but no line and column");if(S.length===3)throw new Error("Found a source and line, but no column");d[g]=S}y.generatedColumn=s+S[0],s=y.generatedColumn,S.length>1&&(y.source=a+S[1],a+=S[1],y.originalLine=i+S[2],i=y.originalLine,y.originalLine+=1,y.originalColumn=o+S[3],o=y.originalColumn,S.length>4&&(y.name=u+S[4],u+=S[4])),h.push(y),typeof y.originalLine=="number"&&f.push(y)}gp(h,ve.compareByGeneratedPositionsDeflated),this.__generatedMappings=h,gp(f,ve.compareByOriginalPositions),this.__originalMappings=f};Jr.prototype._findMapping=function(e,r,n,s,i,o){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[s]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[s]);return q_.search(e,r,i,o)};Jr.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};Jr.prototype.originalPositionFor=function(e){var r={generatedLine:ve.getArg(e,"line"),generatedColumn:ve.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",ve.compareByGeneratedPositionsDeflated,ve.getArg(e,"bias",Vt.GREATEST_LOWER_BOUND));if(n>=0){var s=this._generatedMappings[n];if(s.generatedLine===r.generatedLine){var i=ve.getArg(s,"source",null);i!==null&&(i=this._sources.at(i),i=ve.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var o=ve.getArg(s,"name",null);return o!==null&&(o=this._names.at(o)),{source:i,line:ve.getArg(s,"originalLine",null),column:ve.getArg(s,"originalColumn",null),name:o}}}return{source:null,line:null,column:null,name:null}};Jr.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};Jr.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var s=e;this.sourceRoot!=null&&(s=ve.relative(this.sourceRoot,s));var i;if(this.sourceRoot!=null&&(i=ve.urlParse(this.sourceRoot))){var o=s.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(o))return this.sourcesContent[this._sources.indexOf(o)];if((!i.path||i.path=="/")&&this._sources.has("/"+s))return this.sourcesContent[this._sources.indexOf("/"+s)]}if(r)return null;throw new Error('"'+s+'" is not in the SourceMap.')};Jr.prototype.generatedPositionFor=function(e){var r=ve.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:ve.getArg(e,"line"),originalColumn:ve.getArg(e,"column")},s=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",ve.compareByOriginalPositions,ve.getArg(e,"bias",Vt.GREATEST_LOWER_BOUND));if(s>=0){var i=this._originalMappings[s];if(i.source===n.source)return{line:ve.getArg(i,"generatedLine",null),column:ve.getArg(i,"generatedColumn",null),lastColumn:ve.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};gy.BasicSourceMapConsumer=Jr;function Li(t,e){var r=t;typeof t=="string"&&(r=ve.parseSourceMapInput(t));var n=ve.getArg(r,"version"),s=ve.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new Kl,this._names=new Kl;var i={line:-1,column:0};this._sections=s.map(function(o){if(o.url)throw new Error("Support for url field in sections not implemented.");var a=ve.getArg(o,"offset"),u=ve.getArg(a,"line"),c=ve.getArg(a,"column");if(u<i.line||u===i.line&&c<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:u+1,generatedColumn:c+1},consumer:new Vt(ve.getArg(o,"map"),e)}})}Li.prototype=Object.create(Vt.prototype);Li.prototype.constructor=Vt;Li.prototype._version=3;Object.defineProperty(Li.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});Li.prototype.originalPositionFor=function(e){var r={generatedLine:ve.getArg(e,"line"),generatedColumn:ve.getArg(e,"column")},n=q_.search(r,this._sections,function(i,o){var a=i.generatedLine-o.generatedOffset.generatedLine;return a||i.generatedColumn-o.generatedOffset.generatedColumn}),s=this._sections[n];return s?s.consumer.originalPositionFor({line:r.generatedLine-(s.generatedOffset.generatedLine-1),column:r.generatedColumn-(s.generatedOffset.generatedLine===r.generatedLine?s.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Li.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Li.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var s=this._sections[n],i=s.consumer.sourceContentFor(e,!0);if(i)return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Li.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(ve.getArg(e,"source"))!==-1){var s=n.consumer.generatedPositionFor(e);if(s){var i={line:s.line+(n.generatedOffset.generatedLine-1),column:s.column+(n.generatedOffset.generatedLine===s.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};Li.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var s=this._sections[n],i=s.consumer._generatedMappings,o=0;o<i.length;o++){var a=i[o],u=s.consumer._sources.at(a.source);u=ve.computeSourceURL(s.consumer.sourceRoot,u,this._sourceMapURL),this._sources.add(u),u=this._sources.indexOf(u);var c=null;a.name&&(c=s.consumer._names.at(a.name),this._names.add(c),c=this._names.indexOf(c));var l={source:u,generatedLine:a.generatedLine+(s.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(s.generatedOffset.generatedLine===a.generatedLine?s.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:c};this.__generatedMappings.push(l),typeof l.originalLine=="number"&&this.__originalMappings.push(l)}gp(this.__generatedMappings,ve.compareByGeneratedPositionsDeflated),gp(this.__originalMappings,ve.compareByOriginalPositions)};gy.IndexedSourceMapConsumer=Li});var u5=v(a5=>{var xee=$_().SourceMapGenerator,by=Vl(),Cee=/(\r?\n)/,Pee=10,Hl="$$$isSourceNode$$$";function Wn(t,e,r,n,s){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=s??null,this[Hl]=!0,n!=null&&this.add(n)}Wn.fromStringWithSourceMap=function(e,r,n){var s=new Wn,i=e.split(Cee),o=0,a=function(){var p=h(),f=h()||"";return p+f;function h(){return o<i.length?i[o++]:void 0}},u=1,c=0,l=null;return r.eachMapping(function(p){if(l!==null)if(u<p.generatedLine)d(l,a()),u++,c=0;else{var f=i[o]||"",h=f.substr(0,p.generatedColumn-c);i[o]=f.substr(p.generatedColumn-c),c=p.generatedColumn,d(l,h),l=p;return}for(;u<p.generatedLine;)s.add(a()),u++;if(c<p.generatedColumn){var f=i[o]||"";s.add(f.substr(0,p.generatedColumn)),i[o]=f.substr(p.generatedColumn),c=p.generatedColumn}l=p},this),o<i.length&&(l&&d(l,a()),s.add(i.splice(o).join(""))),r.sources.forEach(function(p){var f=r.sourceContentFor(p);f!=null&&(n!=null&&(p=by.join(n,p)),s.setSourceContent(p,f))}),s;function d(p,f){if(p===null||p.source===void 0)s.add(f);else{var h=n?by.join(n,p.source):p.source;s.add(new Wn(p.originalLine,p.originalColumn,h,f,p.name))}}};Wn.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[Hl]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Wn.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[Hl]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Wn.prototype.walk=function(e){for(var r,n=0,s=this.children.length;n<s;n++)r=this.children[n],r[Hl]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Wn.prototype.join=function(e){var r,n,s=this.children.length;if(s>0){for(r=[],n=0;n<s-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};Wn.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[Hl]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};Wn.prototype.setSourceContent=function(e,r){this.sourceContents[by.toSetString(e)]=r};Wn.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Hl]&&this.children[r].walkSourceContents(e);for(var s=Object.keys(this.sourceContents),r=0,n=s.length;r<n;r++)e(by.fromSetString(s[r]),this.sourceContents[s[r]])};Wn.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};Wn.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new xee(e),s=!1,i=null,o=null,a=null,u=null;return this.walk(function(c,l){r.code+=c,l.source!==null&&l.line!==null&&l.column!==null?((i!==l.source||o!==l.line||a!==l.column||u!==l.name)&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name}),i=l.source,o=l.line,a=l.column,u=l.name,s=!0):s&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,s=!1);for(var d=0,p=c.length;d<p;d++)c.charCodeAt(d)===Pee?(r.line++,r.column=0,d+1===p?(i=null,s=!1):s&&n.addMapping({source:l.source,original:{line:l.line,column:l.column},generated:{line:r.line,column:r.column},name:l.name})):r.column++}),this.walkSourceContents(function(c,l){n.setSourceContent(c,l)}),{code:r.code,map:n}};a5.SourceNode=Wn});var c5=v(vy=>{vy.SourceMapGenerator=$_().SourceMapGenerator;vy.SourceMapConsumer=o5().SourceMapConsumer;vy.SourceNode=u5().SourceNode});var l5=v((X_e,Oee)=>{Oee.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","README.md","bin","escodegen.js","package.json"],version:"1.14.3",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^4.2.0",esutils:"^2.0.2",esprima:"^4.0.1",optionator:"^0.8.1"},optionalDependencies:{"source-map":"~0.6.1"},devDependencies:{acorn:"^7.1.0",bluebird:"^3.4.7","bower-registry-client":"^1.0.0",chai:"^3.5.0","commonjs-everywhere":"^0.9.7",gulp:"^3.8.10","gulp-eslint":"^3.0.1","gulp-mocha":"^3.0.1",semver:"^5.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"./node_modules/.bin/cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"./node_modules/.bin/cjsify -a path: tools/entry-point.js > escodegen.browser.js"}}});var d5=v(Io=>{(function(){"use strict";var t,e,r,n,s,i,o,a,u,c,l,d,p,f,h,y,g,S,A,w,P,D,O,B,F,N;s=II(),i=jI(),t=s.Syntax;function R(m){return At.Expression.hasOwnProperty(m.type)}function q(m){return At.Statement.hasOwnProperty(m.type)}e={Sequence:0,Yield:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Exponentiation:13,Await:14,Unary:14,Postfix:15,Call:16,New:17,TaggedTemplate:18,Member:19,Primary:20},r={"||":e.LogicalOR,"&&":e.LogicalAND,"|":e.BitwiseOR,"^":e.BitwiseXOR,"&":e.BitwiseAND,"==":e.Equality,"!=":e.Equality,"===":e.Equality,"!==":e.Equality,is:e.Equality,isnt:e.Equality,"<":e.Relational,">":e.Relational,"<=":e.Relational,">=":e.Relational,in:e.Relational,instanceof:e.Relational,"<<":e.BitwiseSHIFT,">>":e.BitwiseSHIFT,">>>":e.BitwiseSHIFT,"+":e.Additive,"-":e.Additive,"*":e.Multiplicative,"%":e.Multiplicative,"/":e.Multiplicative,"**":e.Exponentiation};var M=1,Z=2,Q=4,U=8,G=16,ee=32,z=Z|Q,$=M|Z,j=M|Z|Q,Y=M,se=Q,pe=M|Q,oe=M,he=M|ee,Ee=0,Pe=M|G,Ie=M|U;function ze(){return{indent:null,base:null,parse:null,comment:!1,format:{indent:{style:"    ",base:0,adjustMultilineComment:!1},newline:`
`,space:" ",json:!1,renumber:!1,hexadecimal:!1,quotes:"single",escapeless:!1,compact:!1,parentheses:!0,semicolons:!0,safeConcatenation:!1,preserveBlankLines:!1},moz:{comprehensionExpressionStartsWithAssignment:!1,starlessGenerator:!1},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:!1,directive:!1,raw:!0,verbatim:null,sourceCode:null}}function at(m,E){var b="";for(E|=0;E>0;E>>>=1,m+=m)E&1&&(b+=m);return b}function dt(m){return/[\r\n]/g.test(m)}function Je(m){var E=m.length;return E&&i.code.isLineTerminator(m.charCodeAt(E-1))}function qt(m,E){var b;for(b in E)E.hasOwnProperty(b)&&(m[b]=E[b]);return m}function Dt(m,E){var b,_;function x(K){return typeof K=="object"&&K instanceof Object&&!(K instanceof RegExp)}for(b in E)E.hasOwnProperty(b)&&(_=E[b],x(_)?x(m[b])?Dt(m[b],_):m[b]=Dt({},_):m[b]=_);return m}function Qr(m){var E,b,_,x,K;if(m!==m)throw new Error("Numeric literal whose value is NaN");if(m<0||m===0&&1/m<0)throw new Error("Numeric literal whose value is negative");if(m===1/0)return u?"null":c?"1e400":"1e+400";if(E=""+m,!c||E.length<3)return E;for(b=E.indexOf("."),!u&&E.charCodeAt(0)===48&&b===1&&(b=0,E=E.slice(1)),_=E,E=E.replace("e+","e"),x=0,(K=_.indexOf("e"))>0&&(x=+_.slice(K+1),_=_.slice(0,K)),b>=0&&(x-=_.length-b-1,_=+(_.slice(0,b)+_.slice(b+1))+""),K=0;_.charCodeAt(_.length+K-1)===48;)--K;return K!==0&&(x-=K,_=_.slice(0,K)),x!==0&&(_+="e"+x),(_.length<E.length||l&&m>1e12&&Math.floor(m)===m&&(_="0x"+m.toString(16)).length<E.length)&&+_===m&&(E=_),E}function or(m,E){return(m&-2)===8232?(E?"u":"\\u")+(m===8232?"2028":"2029"):m===10||m===13?(E?"":"\\")+(m===10?"n":"r"):String.fromCharCode(m)}function Yi(m){var E,b,_,x,K,X,te,fe;if(b=m.toString(),m.source){if(E=b.match(/\/([^/]*)$/),!E)return b;for(_=E[1],b="",te=!1,fe=!1,x=0,K=m.source.length;x<K;++x)X=m.source.charCodeAt(x),fe?(b+=or(X,fe),fe=!1):(te?X===93&&(te=!1):X===47?b+="\\":X===91&&(te=!0),b+=or(X,fe),fe=X===92);return"/"+b+"/"+_}return b}function Si(m,E){var b;return m===8?"\\b":m===12?"\\f":m===9?"\\t":(b=m.toString(16).toUpperCase(),u||m>255?"\\u"+"0000".slice(b.length)+b:m===0&&!i.code.isDecimalDigit(E)?"\\0":m===11?"\\x0B":"\\x"+"00".slice(b.length)+b)}function zs(m){if(m===92)return"\\\\";if(m===10)return"\\n";if(m===13)return"\\r";if(m===8232)return"\\u2028";if(m===8233)return"\\u2029";throw new Error("Incorrectly classified character")}function ar(m){var E,b,_,x;for(x=d==="double"?'"':"'",E=0,b=m.length;E<b;++E)if(_=m.charCodeAt(E),_===39){x='"';break}else if(_===34){x="'";break}else _===92&&++E;return x+m+x}function vn(m){var E="",b,_,x,K=0,X=0,te,fe;for(b=0,_=m.length;b<_;++b){if(x=m.charCodeAt(b),x===39)++K;else if(x===34)++X;else if(x===47&&u)E+="\\";else if(i.code.isLineTerminator(x)||x===92){E+=zs(x);continue}else if(!i.code.isIdentifierPartES5(x)&&(u&&x<32||!u&&!p&&(x<32||x>126))){E+=Si(x,m.charCodeAt(b+1));continue}E+=String.fromCharCode(x)}if(te=!(d==="double"||d==="auto"&&X<K),fe=te?"'":'"',!(te?K:X))return fe+E+fe;for(m=E,E=fe,b=0,_=m.length;b<_;++b)x=m.charCodeAt(b),(x===39&&te||x===34&&!te)&&(E+="\\"),E+=String.fromCharCode(x);return E+fe}function zo(m){var E,b,_,x="";for(E=0,b=m.length;E<b;++E)_=m[E],x+=Array.isArray(_)?zo(_):_;return x}function ft(m,E){if(!D)return Array.isArray(m)?zo(m):m;if(E==null){if(m instanceof n)return m;E={}}return E.loc==null?new n(null,null,D,m,E.name||null):new n(E.loc.start.line,E.loc.start.column,D===!0?E.loc.source||null:D,m,E.name||null)}function Xt(){return h||" "}function Be(m,E){var b,_,x,K;return b=ft(m).toString(),b.length===0?[E]:(_=ft(E).toString(),_.length===0?[m]:(x=b.charCodeAt(b.length-1),K=_.charCodeAt(0),(x===43||x===45)&&x===K||i.code.isIdentifierPartES5(x)&&i.code.isIdentifierPartES5(K)||x===47&&K===105?[m,Xt(),E]:i.code.isWhiteSpace(x)||i.code.isLineTerminator(x)||i.code.isWhiteSpace(K)||i.code.isLineTerminator(K)?[m,E]:[m,h,E]))}function ur(m){return[o,m]}function bt(m){var E;E=o,o+=a,m(o),o=E}function Zi(m){var E;for(E=m.length-1;E>=0&&!i.code.isLineTerminator(m.charCodeAt(E));--E);return m.length-1-E}function Ka(m,E){var b,_,x,K,X,te,fe,ot;for(b=m.split(/\r\n|[\r\n]/),te=Number.MAX_VALUE,_=1,x=b.length;_<x;++_){for(K=b[_],X=0;X<K.length&&i.code.isWhiteSpace(K.charCodeAt(X));)++X;te>X&&(te=X)}for(typeof E<"u"?(fe=o,b[1][te]==="*"&&(E+=" "),o=E):(te&1&&--te,fe=o),_=1,x=b.length;_<x;++_)ot=ft(ur(b[_].slice(te))),b[_]=D?ot.join(""):ot;return o=fe,b.join(`
`)}function wn(m,E){if(m.type==="Line"){if(Je(m.value))return"//"+m.value;var b="//"+m.value;return B||(b+=`
`),b}return w.format.indent.adjustMultilineComment&&/[\n\r]/.test(m.value)?Ka("/*"+m.value+"*/",E):"/*"+m.value+"*/"}function Qi(m,E){var b,_,x,K,X,te,fe,ot,T,C,k,L,V,ae;if(m.leadingComments&&m.leadingComments.length>0){if(K=E,B){for(x=m.leadingComments[0],E=[],ot=x.extendedRange,T=x.range,k=O.substring(ot[0],T[0]),ae=(k.match(/\n/g)||[]).length,ae>0?(E.push(at(`
`,ae)),E.push(ur(wn(x)))):(E.push(k),E.push(wn(x))),C=T,b=1,_=m.leadingComments.length;b<_;b++)x=m.leadingComments[b],T=x.range,L=O.substring(C[1],T[0]),ae=(L.match(/\n/g)||[]).length,E.push(at(`
`,ae)),E.push(ur(wn(x))),C=T;V=O.substring(T[1],ot[1]),ae=(V.match(/\n/g)||[]).length,E.push(at(`
`,ae))}else for(x=m.leadingComments[0],E=[],S&&m.type===t.Program&&m.body.length===0&&E.push(`
`),E.push(wn(x)),Je(ft(E).toString())||E.push(`
`),b=1,_=m.leadingComments.length;b<_;++b)x=m.leadingComments[b],fe=[wn(x)],Je(ft(fe).toString())||fe.push(`
`),E.push(ur(fe));E.push(ur(K))}if(m.trailingComments)if(B)x=m.trailingComments[0],ot=x.extendedRange,T=x.range,k=O.substring(ot[0],T[0]),ae=(k.match(/\n/g)||[]).length,ae>0?(E.push(at(`
`,ae)),E.push(ur(wn(x)))):(E.push(k),E.push(wn(x)));else for(X=!Je(ft(E).toString()),te=at(" ",Zi(ft([o,E,a]).toString())),b=0,_=m.trailingComments.length;b<_;++b)x=m.trailingComments[b],X?(b===0?E=[E,a]:E=[E,te],E.push(wn(x,te))):E=[E,ur(wn(x))],b!==_-1&&!Je(ft(E).toString())&&(E=[E,`
`]);return E}function Di(m,E,b){var _,x=0;for(_=m;_<E;_++)O[_]===`
`&&x++;for(_=1;_<x;_++)b.push(f)}function nr(m,E,b){return E<b?["(",m,")"]:m}function Dh(m){var E,b,_;for(_=m.split(/\r\n|\n/),E=1,b=_.length;E<b;E++)_[E]=f+o+_[E];return _}function Ah(m,E){var b,_,x;return b=m[w.verbatim],typeof b=="string"?_=nr(Dh(b),e.Sequence,E):(_=Dh(b.content),x=b.precedence!=null?b.precedence:e.Sequence,_=nr(_,x,E)),ft(_,m)}function At(){}At.prototype.maybeBlock=function(m,E){var b,_,x=this;return _=!w.comment||!m.leadingComments,m.type===t.BlockStatement&&_?[h,this.generateStatement(m,E)]:m.type===t.EmptyStatement&&_?";":(bt(function(){b=[f,ur(x.generateStatement(m,E))]}),b)},At.prototype.maybeBlockSuffix=function(m,E){var b=Je(ft(E).toString());return m.type===t.BlockStatement&&(!w.comment||!m.leadingComments)&&!b?[E,h]:b?[E,o]:[E,f,o]};function cn(m){return ft(m.name,m)}function Ha(m,E){return m.async?"async"+(E?Xt():h):""}function Sc(m){var E=m.generator&&!w.moz.starlessGenerator;return E?"*"+h:""}function xh(m){var E=m.value,b="";return E.async&&(b+=Ha(E,!m.computed)),E.generator&&(b+=Sc(E)?"*":""),b}At.prototype.generatePattern=function(m,E,b){return m.type===t.Identifier?cn(m):this.generateExpression(m,E,b)},At.prototype.generateFunctionParams=function(m){var E,b,_,x;if(x=!1,m.type===t.ArrowFunctionExpression&&!m.rest&&(!m.defaults||m.defaults.length===0)&&m.params.length===1&&m.params[0].type===t.Identifier)_=[Ha(m,!0),cn(m.params[0])];else{for(_=m.type===t.ArrowFunctionExpression?[Ha(m,!1)]:[],_.push("("),m.defaults&&(x=!0),E=0,b=m.params.length;E<b;++E)x&&m.defaults[E]?_.push(this.generateAssignment(m.params[E],m.defaults[E],"=",e.Assignment,j)):_.push(this.generatePattern(m.params[E],e.Assignment,j)),E+1<b&&_.push(","+h);m.rest&&(m.params.length&&_.push(","+h),_.push("..."),_.push(cn(m.rest))),_.push(")")}return _},At.prototype.generateFunctionBody=function(m){var E,b;return E=this.generateFunctionParams(m),m.type===t.ArrowFunctionExpression&&(E.push(h),E.push("=>")),m.expression?(E.push(h),b=this.generateExpression(m.body,e.Assignment,j),b.toString().charAt(0)==="{"&&(b=["(",b,")"]),E.push(b)):E.push(this.maybeBlock(m.body,Ie)),E},At.prototype.generateIterationForStatement=function(m,E,b){var _=["for"+(E.await?Xt()+"await":"")+h+"("],x=this;return bt(function(){E.left.type===t.VariableDeclaration?bt(function(){_.push(E.left.kind+Xt()),_.push(x.generateStatement(E.left.declarations[0],Ee))}):_.push(x.generateExpression(E.left,e.Call,j)),_=Be(_,m),_=[Be(_,x.generateExpression(E.right,e.Assignment,j)),")"]}),_.push(this.maybeBlock(E.body,b)),_},At.prototype.generatePropertyKey=function(m,E){var b=[];return E&&b.push("["),b.push(this.generateExpression(m,e.Assignment,j)),E&&b.push("]"),b},At.prototype.generateAssignment=function(m,E,b,_,x){return e.Assignment<_&&(x|=M),nr([this.generateExpression(m,e.Call,x),h+b+h,this.generateExpression(E,e.Assignment,x)],e.Assignment,_)},At.prototype.semicolon=function(m){return!g&&m&ee?"":";"},At.Statement={BlockStatement:function(m,E){var b,_,x=["{",f],K=this;return bt(function(){m.body.length===0&&B&&(b=m.range,b[1]-b[0]>2&&(_=O.substring(b[0]+1,b[1]-1),_[0]===`
`&&(x=["{"]),x.push(_)));var X,te,fe,ot;for(ot=oe,E&U&&(ot|=G),X=0,te=m.body.length;X<te;++X)B&&(X===0&&(m.body[0].leadingComments&&(b=m.body[0].leadingComments[0].extendedRange,_=O.substring(b[0],b[1]),_[0]===`
`&&(x=["{"])),m.body[0].leadingComments||Di(m.range[0],m.body[0].range[0],x)),X>0&&!m.body[X-1].trailingComments&&!m.body[X].leadingComments&&Di(m.body[X-1].range[1],m.body[X].range[0],x)),X===te-1&&(ot|=ee),m.body[X].leadingComments&&B?fe=K.generateStatement(m.body[X],ot):fe=ur(K.generateStatement(m.body[X],ot)),x.push(fe),Je(ft(fe).toString())||B&&X<te-1&&m.body[X+1].leadingComments||x.push(f),B&&X===te-1&&(m.body[X].trailingComments||Di(m.body[X].range[1],m.range[1],x))}),x.push(ur("}")),x},BreakStatement:function(m,E){return m.label?"break "+m.label.name+this.semicolon(E):"break"+this.semicolon(E)},ContinueStatement:function(m,E){return m.label?"continue "+m.label.name+this.semicolon(E):"continue"+this.semicolon(E)},ClassBody:function(m,E){var b=["{",f],_=this;return bt(function(x){var K,X;for(K=0,X=m.body.length;K<X;++K)b.push(x),b.push(_.generateExpression(m.body[K],e.Sequence,j)),K+1<X&&b.push(f)}),Je(ft(b).toString())||b.push(f),b.push(o),b.push("}"),b},ClassDeclaration:function(m,E){var b,_;return b=["class"],m.id&&(b=Be(b,this.generateExpression(m.id,e.Sequence,j))),m.superClass&&(_=Be("extends",this.generateExpression(m.superClass,e.Unary,j)),b=Be(b,_)),b.push(h),b.push(this.generateStatement(m.body,he)),b},DirectiveStatement:function(m,E){return w.raw&&m.raw?m.raw+this.semicolon(E):ar(m.directive)+this.semicolon(E)},DoWhileStatement:function(m,E){var b=Be("do",this.maybeBlock(m.body,oe));return b=this.maybeBlockSuffix(m.body,b),Be(b,["while"+h+"(",this.generateExpression(m.test,e.Sequence,j),")"+this.semicolon(E)])},CatchClause:function(m,E){var b,_=this;return bt(function(){var x;m.param?(b=["catch"+h+"(",_.generateExpression(m.param,e.Sequence,j),")"],m.guard&&(x=_.generateExpression(m.guard,e.Sequence,j),b.splice(2,0," if ",x))):b=["catch"]}),b.push(this.maybeBlock(m.body,oe)),b},DebuggerStatement:function(m,E){return"debugger"+this.semicolon(E)},EmptyStatement:function(m,E){return";"},ExportDefaultDeclaration:function(m,E){var b=["export"],_;return _=E&ee?he:oe,b=Be(b,"default"),q(m.declaration)?b=Be(b,this.generateStatement(m.declaration,_)):b=Be(b,this.generateExpression(m.declaration,e.Assignment,j)+this.semicolon(E)),b},ExportNamedDeclaration:function(m,E){var b=["export"],_,x=this;return _=E&ee?he:oe,m.declaration?Be(b,this.generateStatement(m.declaration,_)):(m.specifiers&&(m.specifiers.length===0?b=Be(b,"{"+h+"}"):m.specifiers[0].type===t.ExportBatchSpecifier?b=Be(b,this.generateExpression(m.specifiers[0],e.Sequence,j)):(b=Be(b,"{"),bt(function(K){var X,te;for(b.push(f),X=0,te=m.specifiers.length;X<te;++X)b.push(K),b.push(x.generateExpression(m.specifiers[X],e.Sequence,j)),X+1<te&&b.push(","+f)}),Je(ft(b).toString())||b.push(f),b.push(o+"}")),m.source?b=Be(b,["from"+h,this.generateExpression(m.source,e.Sequence,j),this.semicolon(E)]):b.push(this.semicolon(E))),b)},ExportAllDeclaration:function(m,E){return["export"+h,"*"+h,"from"+h,this.generateExpression(m.source,e.Sequence,j),this.semicolon(E)]},ExpressionStatement:function(m,E){var b,_;function x(te){var fe;return te.slice(0,5)!=="class"?!1:(fe=te.charCodeAt(5),fe===123||i.code.isWhiteSpace(fe)||i.code.isLineTerminator(fe))}function K(te){var fe;return te.slice(0,8)!=="function"?!1:(fe=te.charCodeAt(8),fe===40||i.code.isWhiteSpace(fe)||fe===42||i.code.isLineTerminator(fe))}function X(te){var fe,ot,T;if(te.slice(0,5)!=="async"||!i.code.isWhiteSpace(te.charCodeAt(5)))return!1;for(ot=6,T=te.length;ot<T&&i.code.isWhiteSpace(te.charCodeAt(ot));++ot);return ot===T||te.slice(ot,ot+8)!=="function"?!1:(fe=te.charCodeAt(ot+8),fe===40||i.code.isWhiteSpace(fe)||fe===42||i.code.isLineTerminator(fe))}return b=[this.generateExpression(m.expression,e.Sequence,j)],_=ft(b).toString(),_.charCodeAt(0)===123||x(_)||K(_)||X(_)||A&&E&G&&m.expression.type===t.Literal&&typeof m.expression.value=="string"?b=["(",b,")"+this.semicolon(E)]:b.push(this.semicolon(E)),b},ImportDeclaration:function(m,E){var b,_,x=this;return m.specifiers.length===0?["import",h,this.generateExpression(m.source,e.Sequence,j),this.semicolon(E)]:(b=["import"],_=0,m.specifiers[_].type===t.ImportDefaultSpecifier&&(b=Be(b,[this.generateExpression(m.specifiers[_],e.Sequence,j)]),++_),m.specifiers[_]&&(_!==0&&b.push(","),m.specifiers[_].type===t.ImportNamespaceSpecifier?b=Be(b,[h,this.generateExpression(m.specifiers[_],e.Sequence,j)]):(b.push(h+"{"),m.specifiers.length-_===1?(b.push(h),b.push(this.generateExpression(m.specifiers[_],e.Sequence,j)),b.push(h+"}"+h)):(bt(function(K){var X,te;for(b.push(f),X=_,te=m.specifiers.length;X<te;++X)b.push(K),b.push(x.generateExpression(m.specifiers[X],e.Sequence,j)),X+1<te&&b.push(","+f)}),Je(ft(b).toString())||b.push(f),b.push(o+"}"+h)))),b=Be(b,["from"+h,this.generateExpression(m.source,e.Sequence,j),this.semicolon(E)]),b)},VariableDeclarator:function(m,E){var b=E&M?j:z;return m.init?[this.generateExpression(m.id,e.Assignment,b),h,"=",h,this.generateExpression(m.init,e.Assignment,b)]:this.generatePattern(m.id,e.Assignment,b)},VariableDeclaration:function(m,E){var b,_,x,K,X,te=this;b=[m.kind],X=E&M?oe:Ee;function fe(){for(K=m.declarations[0],w.comment&&K.leadingComments?(b.push(`
`),b.push(ur(te.generateStatement(K,X)))):(b.push(Xt()),b.push(te.generateStatement(K,X))),_=1,x=m.declarations.length;_<x;++_)K=m.declarations[_],w.comment&&K.leadingComments?(b.push(","+f),b.push(ur(te.generateStatement(K,X)))):(b.push(","+h),b.push(te.generateStatement(K,X)))}return m.declarations.length>1?bt(fe):fe(),b.push(this.semicolon(E)),b},ThrowStatement:function(m,E){return[Be("throw",this.generateExpression(m.argument,e.Sequence,j)),this.semicolon(E)]},TryStatement:function(m,E){var b,_,x,K;if(b=["try",this.maybeBlock(m.block,oe)],b=this.maybeBlockSuffix(m.block,b),m.handlers)for(_=0,x=m.handlers.length;_<x;++_)b=Be(b,this.generateStatement(m.handlers[_],oe)),(m.finalizer||_+1!==x)&&(b=this.maybeBlockSuffix(m.handlers[_].body,b));else{for(K=m.guardedHandlers||[],_=0,x=K.length;_<x;++_)b=Be(b,this.generateStatement(K[_],oe)),(m.finalizer||_+1!==x)&&(b=this.maybeBlockSuffix(K[_].body,b));if(m.handler)if(Array.isArray(m.handler))for(_=0,x=m.handler.length;_<x;++_)b=Be(b,this.generateStatement(m.handler[_],oe)),(m.finalizer||_+1!==x)&&(b=this.maybeBlockSuffix(m.handler[_].body,b));else b=Be(b,this.generateStatement(m.handler,oe)),m.finalizer&&(b=this.maybeBlockSuffix(m.handler.body,b))}return m.finalizer&&(b=Be(b,["finally",this.maybeBlock(m.finalizer,oe)])),b},SwitchStatement:function(m,E){var b,_,x,K,X,te=this;if(bt(function(){b=["switch"+h+"(",te.generateExpression(m.discriminant,e.Sequence,j),")"+h+"{"+f]}),m.cases)for(X=oe,x=0,K=m.cases.length;x<K;++x)x===K-1&&(X|=ee),_=ur(this.generateStatement(m.cases[x],X)),b.push(_),Je(ft(_).toString())||b.push(f);return b.push(ur("}")),b},SwitchCase:function(m,E){var b,_,x,K,X,te=this;return bt(function(){for(m.test?b=[Be("case",te.generateExpression(m.test,e.Sequence,j)),":"]:b=["default:"],x=0,K=m.consequent.length,K&&m.consequent[0].type===t.BlockStatement&&(_=te.maybeBlock(m.consequent[0],oe),b.push(_),x=1),x!==K&&!Je(ft(b).toString())&&b.push(f),X=oe;x<K;++x)x===K-1&&E&ee&&(X|=ee),_=ur(te.generateStatement(m.consequent[x],X)),b.push(_),x+1!==K&&!Je(ft(_).toString())&&b.push(f)}),b},IfStatement:function(m,E){var b,_,x,K=this;return bt(function(){b=["if"+h+"(",K.generateExpression(m.test,e.Sequence,j),")"]}),x=E&ee,_=oe,x&&(_|=ee),m.alternate?(b.push(this.maybeBlock(m.consequent,oe)),b=this.maybeBlockSuffix(m.consequent,b),m.alternate.type===t.IfStatement?b=Be(b,["else ",this.generateStatement(m.alternate,_)]):b=Be(b,Be("else",this.maybeBlock(m.alternate,_)))):b.push(this.maybeBlock(m.consequent,_)),b},ForStatement:function(m,E){var b,_=this;return bt(function(){b=["for"+h+"("],m.init?m.init.type===t.VariableDeclaration?b.push(_.generateStatement(m.init,Ee)):(b.push(_.generateExpression(m.init,e.Sequence,z)),b.push(";")):b.push(";"),m.test&&(b.push(h),b.push(_.generateExpression(m.test,e.Sequence,j))),b.push(";"),m.update&&(b.push(h),b.push(_.generateExpression(m.update,e.Sequence,j))),b.push(")")}),b.push(this.maybeBlock(m.body,E&ee?he:oe)),b},ForInStatement:function(m,E){return this.generateIterationForStatement("in",m,E&ee?he:oe)},ForOfStatement:function(m,E){return this.generateIterationForStatement("of",m,E&ee?he:oe)},LabeledStatement:function(m,E){return[m.label.name+":",this.maybeBlock(m.body,E&ee?he:oe)]},Program:function(m,E){var b,_,x,K,X;for(K=m.body.length,b=[S&&K>0?`
`:""],X=Pe,x=0;x<K;++x)!S&&x===K-1&&(X|=ee),B&&(x===0&&(m.body[0].leadingComments||Di(m.range[0],m.body[x].range[0],b)),x>0&&!m.body[x-1].trailingComments&&!m.body[x].leadingComments&&Di(m.body[x-1].range[1],m.body[x].range[0],b)),_=ur(this.generateStatement(m.body[x],X)),b.push(_),x+1<K&&!Je(ft(_).toString())&&(B&&m.body[x+1].leadingComments||b.push(f)),B&&x===K-1&&(m.body[x].trailingComments||Di(m.body[x].range[1],m.range[1],b));return b},FunctionDeclaration:function(m,E){return[Ha(m,!0),"function",Sc(m)||Xt(),m.id?cn(m.id):"",this.generateFunctionBody(m)]},ReturnStatement:function(m,E){return m.argument?[Be("return",this.generateExpression(m.argument,e.Sequence,j)),this.semicolon(E)]:["return"+this.semicolon(E)]},WhileStatement:function(m,E){var b,_=this;return bt(function(){b=["while"+h+"(",_.generateExpression(m.test,e.Sequence,j),")"]}),b.push(this.maybeBlock(m.body,E&ee?he:oe)),b},WithStatement:function(m,E){var b,_=this;return bt(function(){b=["with"+h+"(",_.generateExpression(m.object,e.Sequence,j),")"]}),b.push(this.maybeBlock(m.body,E&ee?he:oe)),b}},qt(At.prototype,At.Statement),At.Expression={SequenceExpression:function(m,E,b){var _,x,K;for(e.Sequence<E&&(b|=M),_=[],x=0,K=m.expressions.length;x<K;++x)_.push(this.generateExpression(m.expressions[x],e.Assignment,b)),x+1<K&&_.push(","+h);return nr(_,e.Sequence,E)},AssignmentExpression:function(m,E,b){return this.generateAssignment(m.left,m.right,m.operator,E,b)},ArrowFunctionExpression:function(m,E,b){return nr(this.generateFunctionBody(m),e.ArrowFunction,E)},ConditionalExpression:function(m,E,b){return e.Conditional<E&&(b|=M),nr([this.generateExpression(m.test,e.LogicalOR,b),h+"?"+h,this.generateExpression(m.consequent,e.Assignment,b),h+":"+h,this.generateExpression(m.alternate,e.Assignment,b)],e.Conditional,E)},LogicalExpression:function(m,E,b){return this.BinaryExpression(m,E,b)},BinaryExpression:function(m,E,b){var _,x,K,X,te,fe;return X=r[m.operator],x=m.operator==="**"?e.Postfix:X,K=m.operator==="**"?X:X+1,X<E&&(b|=M),te=this.generateExpression(m.left,x,b),fe=te.toString(),fe.charCodeAt(fe.length-1)===47&&i.code.isIdentifierPartES5(m.operator.charCodeAt(0))?_=[te,Xt(),m.operator]:_=Be(te,m.operator),te=this.generateExpression(m.right,K,b),m.operator==="/"&&te.toString().charAt(0)==="/"||m.operator.slice(-1)==="<"&&te.toString().slice(0,3)==="!--"?(_.push(Xt()),_.push(te)):_=Be(_,te),m.operator==="in"&&!(b&M)?["(",_,")"]:nr(_,X,E)},CallExpression:function(m,E,b){var _,x,K;for(_=[this.generateExpression(m.callee,e.Call,$)],_.push("("),x=0,K=m.arguments.length;x<K;++x)_.push(this.generateExpression(m.arguments[x],e.Assignment,j)),x+1<K&&_.push(","+h);return _.push(")"),b&Z?nr(_,e.Call,E):["(",_,")"]},NewExpression:function(m,E,b){var _,x,K,X,te;if(x=m.arguments.length,te=b&Q&&!y&&x===0?pe:Y,_=Be("new",this.generateExpression(m.callee,e.New,te)),!(b&Q)||y||x>0){for(_.push("("),K=0,X=x;K<X;++K)_.push(this.generateExpression(m.arguments[K],e.Assignment,j)),K+1<X&&_.push(","+h);_.push(")")}return nr(_,e.New,E)},MemberExpression:function(m,E,b){var _,x;return _=[this.generateExpression(m.object,e.Call,b&Z?$:Y)],m.computed?(_.push("["),_.push(this.generateExpression(m.property,e.Sequence,b&Z?j:pe)),_.push("]")):(m.object.type===t.Literal&&typeof m.object.value=="number"&&(x=ft(_).toString(),x.indexOf(".")<0&&!/[eExX]/.test(x)&&i.code.isDecimalDigit(x.charCodeAt(x.length-1))&&!(x.length>=2&&x.charCodeAt(0)===48)&&_.push(" ")),_.push("."),_.push(cn(m.property))),nr(_,e.Member,E)},MetaProperty:function(m,E,b){var _;return _=[],_.push(typeof m.meta=="string"?m.meta:cn(m.meta)),_.push("."),_.push(typeof m.property=="string"?m.property:cn(m.property)),nr(_,e.Member,E)},UnaryExpression:function(m,E,b){var _,x,K,X,te;return x=this.generateExpression(m.argument,e.Unary,j),h===""?_=Be(m.operator,x):(_=[m.operator],m.operator.length>2?_=Be(_,x):(X=ft(_).toString(),te=X.charCodeAt(X.length-1),K=x.toString().charCodeAt(0),((te===43||te===45)&&te===K||i.code.isIdentifierPartES5(te)&&i.code.isIdentifierPartES5(K))&&_.push(Xt()),_.push(x))),nr(_,e.Unary,E)},YieldExpression:function(m,E,b){var _;return m.delegate?_="yield*":_="yield",m.argument&&(_=Be(_,this.generateExpression(m.argument,e.Yield,j))),nr(_,e.Yield,E)},AwaitExpression:function(m,E,b){var _=Be(m.all?"await*":"await",this.generateExpression(m.argument,e.Await,j));return nr(_,e.Await,E)},UpdateExpression:function(m,E,b){return m.prefix?nr([m.operator,this.generateExpression(m.argument,e.Unary,j)],e.Unary,E):nr([this.generateExpression(m.argument,e.Postfix,j),m.operator],e.Postfix,E)},FunctionExpression:function(m,E,b){var _=[Ha(m,!0),"function"];return m.id?(_.push(Sc(m)||Xt()),_.push(cn(m.id))):_.push(Sc(m)||h),_.push(this.generateFunctionBody(m)),_},ArrayPattern:function(m,E,b){return this.ArrayExpression(m,E,b,!0)},ArrayExpression:function(m,E,b,_){var x,K,X=this;return m.elements.length?(K=_?!1:m.elements.length>1,x=["[",K?f:""],bt(function(te){var fe,ot;for(fe=0,ot=m.elements.length;fe<ot;++fe)m.elements[fe]?(x.push(K?te:""),x.push(X.generateExpression(m.elements[fe],e.Assignment,j))):(K&&x.push(te),fe+1===ot&&x.push(",")),fe+1<ot&&x.push(","+(K?f:h))}),K&&!Je(ft(x).toString())&&x.push(f),x.push(K?o:""),x.push("]"),x):"[]"},RestElement:function(m,E,b){return"..."+this.generatePattern(m.argument)},ClassExpression:function(m,E,b){var _,x;return _=["class"],m.id&&(_=Be(_,this.generateExpression(m.id,e.Sequence,j))),m.superClass&&(x=Be("extends",this.generateExpression(m.superClass,e.Unary,j)),_=Be(_,x)),_.push(h),_.push(this.generateStatement(m.body,he)),_},MethodDefinition:function(m,E,b){var _,x;return m.static?_=["static"+h]:_=[],m.kind==="get"||m.kind==="set"?x=[Be(m.kind,this.generatePropertyKey(m.key,m.computed)),this.generateFunctionBody(m.value)]:x=[xh(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)],Be(_,x)},Property:function(m,E,b){return m.kind==="get"||m.kind==="set"?[m.kind,Xt(),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:m.shorthand?m.value.type==="AssignmentPattern"?this.AssignmentPattern(m.value,e.Sequence,j):this.generatePropertyKey(m.key,m.computed):m.method?[xh(m),this.generatePropertyKey(m.key,m.computed),this.generateFunctionBody(m.value)]:[this.generatePropertyKey(m.key,m.computed),":"+h,this.generateExpression(m.value,e.Assignment,j)]},ObjectExpression:function(m,E,b){var _,x,K,X=this;return m.properties.length?(_=m.properties.length>1,bt(function(){K=X.generateExpression(m.properties[0],e.Sequence,j)}),!_&&!dt(ft(K).toString())?["{",h,K,h,"}"]:(bt(function(te){var fe,ot;if(x=["{",f,te,K],_)for(x.push(","+f),fe=1,ot=m.properties.length;fe<ot;++fe)x.push(te),x.push(X.generateExpression(m.properties[fe],e.Sequence,j)),fe+1<ot&&x.push(","+f)}),Je(ft(x).toString())||x.push(f),x.push(o),x.push("}"),x)):"{}"},AssignmentPattern:function(m,E,b){return this.generateAssignment(m.left,m.right,"=",E,b)},ObjectPattern:function(m,E,b){var _,x,K,X,te,fe=this;if(!m.properties.length)return"{}";if(X=!1,m.properties.length===1)te=m.properties[0],te.type===t.Property&&te.value.type!==t.Identifier&&(X=!0);else for(x=0,K=m.properties.length;x<K;++x)if(te=m.properties[x],te.type===t.Property&&!te.shorthand){X=!0;break}return _=["{",X?f:""],bt(function(ot){var T,C;for(T=0,C=m.properties.length;T<C;++T)_.push(X?ot:""),_.push(fe.generateExpression(m.properties[T],e.Sequence,j)),T+1<C&&_.push(","+(X?f:h))}),X&&!Je(ft(_).toString())&&_.push(f),_.push(X?o:""),_.push("}"),_},ThisExpression:function(m,E,b){return"this"},Super:function(m,E,b){return"super"},Identifier:function(m,E,b){return cn(m)},ImportDefaultSpecifier:function(m,E,b){return cn(m.id||m.local)},ImportNamespaceSpecifier:function(m,E,b){var _=["*"],x=m.id||m.local;return x&&_.push(h+"as"+Xt()+cn(x)),_},ImportSpecifier:function(m,E,b){var _=m.imported,x=[_.name],K=m.local;return K&&K.name!==_.name&&x.push(Xt()+"as"+Xt()+cn(K)),x},ExportSpecifier:function(m,E,b){var _=m.local,x=[_.name],K=m.exported;return K&&K.name!==_.name&&x.push(Xt()+"as"+Xt()+cn(K)),x},Literal:function(m,E,b){var _;if(m.hasOwnProperty("raw")&&P&&w.raw)try{if(_=P(m.raw).body[0].expression,_.type===t.Literal&&_.value===m.value)return m.raw}catch{}return m.regex?"/"+m.regex.pattern+"/"+m.regex.flags:m.value===null?"null":typeof m.value=="string"?vn(m.value):typeof m.value=="number"?Qr(m.value):typeof m.value=="boolean"?m.value?"true":"false":Yi(m.value)},GeneratorExpression:function(m,E,b){return this.ComprehensionExpression(m,E,b)},ComprehensionExpression:function(m,E,b){var _,x,K,X,te=this;return _=m.type===t.GeneratorExpression?["("]:["["],w.moz.comprehensionExpressionStartsWithAssignment&&(X=this.generateExpression(m.body,e.Assignment,j),_.push(X)),m.blocks&&bt(function(){for(x=0,K=m.blocks.length;x<K;++x)X=te.generateExpression(m.blocks[x],e.Sequence,j),x>0||w.moz.comprehensionExpressionStartsWithAssignment?_=Be(_,X):_.push(X)}),m.filter&&(_=Be(_,"if"+h),X=this.generateExpression(m.filter,e.Sequence,j),_=Be(_,["(",X,")"])),w.moz.comprehensionExpressionStartsWithAssignment||(X=this.generateExpression(m.body,e.Assignment,j),_=Be(_,X)),_.push(m.type===t.GeneratorExpression?")":"]"),_},ComprehensionBlock:function(m,E,b){var _;return m.left.type===t.VariableDeclaration?_=[m.left.kind,Xt(),this.generateStatement(m.left.declarations[0],Ee)]:_=this.generateExpression(m.left,e.Call,j),_=Be(_,m.of?"of":"in"),_=Be(_,this.generateExpression(m.right,e.Sequence,j)),["for"+h+"(",_,")"]},SpreadElement:function(m,E,b){return["...",this.generateExpression(m.argument,e.Assignment,j)]},TaggedTemplateExpression:function(m,E,b){var _=$;b&Z||(_=Y);var x=[this.generateExpression(m.tag,e.Call,_),this.generateExpression(m.quasi,e.Primary,se)];return nr(x,e.TaggedTemplate,E)},TemplateElement:function(m,E,b){return m.value.raw},TemplateLiteral:function(m,E,b){var _,x,K;for(_=["`"],x=0,K=m.quasis.length;x<K;++x)_.push(this.generateExpression(m.quasis[x],e.Primary,j)),x+1<K&&(_.push("${"+h),_.push(this.generateExpression(m.expressions[x],e.Sequence,j)),_.push(h+"}"));return _.push("`"),_},ModuleSpecifier:function(m,E,b){return this.Literal(m,E,b)},ImportExpression:function(m,E,b){return nr(["import(",this.generateExpression(m.source,e.Assignment,j),")"],e.Call,E)}},qt(At.prototype,At.Expression),At.prototype.generateExpression=function(m,E,b){var _,x;return x=m.type||t.Property,w.verbatim&&m.hasOwnProperty(w.verbatim)?Ah(m,E):(_=this[x](m,E,b),w.comment&&(_=Qi(m,_)),ft(_,m))},At.prototype.generateStatement=function(m,E){var b,_;return b=this[m.type](m,E),w.comment&&(b=Qi(m,b)),_=ft(b).toString(),m.type===t.Program&&!S&&f===""&&_.charAt(_.length-1)===`
`&&(b=D?ft(b).replaceRight(/\s+$/,""):_.replace(/\s+$/,"")),ft(b,m)};function Tb(m){var E;if(E=new At,q(m))return E.generateStatement(m,oe);if(R(m))return E.generateExpression(m,e.Sequence,j);throw new Error("Unknown node type: "+m.type)}function Fb(m,E){var b=ze(),_,x;return E!=null?(typeof E.indent=="string"&&(b.format.indent.style=E.indent),typeof E.base=="number"&&(b.format.indent.base=E.base),E=Dt(b,E),a=E.format.indent.style,typeof E.base=="string"?o=E.base:o=at(a,E.format.indent.base)):(E=b,a=E.format.indent.style,o=at(a,E.format.indent.base)),u=E.format.json,c=E.format.renumber,l=u?!1:E.format.hexadecimal,d=u?"double":E.format.quotes,p=E.format.escapeless,f=E.format.newline,h=E.format.space,E.format.compact&&(f=h=a=o=""),y=E.format.parentheses,g=E.format.semicolons,S=E.format.safeConcatenation,A=E.directive,P=u?null:E.parse,D=E.sourceMap,O=E.sourceCode,B=E.format.preserveBlankLines&&O!==null,w=E,D&&(Io.browser?n=globalThis.sourceMap.SourceNode:n=c5().SourceNode),_=Tb(m),D?(x=_.toStringWithSourceMap({file:E.file,sourceRoot:E.sourceMapRoot}),E.sourceContent&&x.map.setSourceContent(E.sourceMap,E.sourceContent),E.sourceMapWithCode?x:x.map.toString()):(x={code:_.toString(),map:null},E.sourceMapWithCode?x:x.code)}F={indent:{style:"",base:0},renumber:!0,hexadecimal:!0,quotes:"auto",escapeless:!0,compact:!0,parentheses:!1,semicolons:!1},N=ze().format,Io.version=l5().version,Io.generate=Fb,Io.attachComments=s.attachComments,Io.Precedence=Dt({},e),Io.browser=!1,Io.FORMAT_MINIFY=F,Io.FORMAT_DEFAULTS=N})()});var p5=v((Z_e,f5)=>{var Bee=d5().generate;f5.exports=function(t,e){e||(e={});var r={},n=function s(i,o){if(i.type==="Literal")return i.value;if(i.type==="UnaryExpression"){var a=s(i.argument);return i.operator==="+"?+a:i.operator==="-"?-a:i.operator==="~"?~a:i.operator==="!"?!a:r}else if(i.type==="ArrayExpression"){for(var u=[],c=0,l=i.elements.length;c<l;c++){var d=s(i.elements[c]);if(d===r)return r;u.push(d)}return u}else if(i.type==="ObjectExpression"){for(var p={},c=0;c<i.properties.length;c++){var f=i.properties[c],h=f.value===null?f.value:s(f.value);if(h===r)return r;p[f.key.value||f.key.name]=h}return p}else if(i.type==="BinaryExpression"||i.type==="LogicalExpression"){var l=s(i.left);if(l===r)return r;var y=s(i.right);if(y===r)return r;var g=i.operator;return g==="=="?l==y:g==="==="?l===y:g==="!="?l!=y:g==="!=="?l!==y:g==="+"?l+y:g==="-"?l-y:g==="*"?l*y:g==="/"?l/y:g==="%"?l%y:g==="<"?l<y:g==="<="?l<=y:g===">"?l>y:g===">="?l>=y:g==="|"?l|y:g==="&"?l&y:g==="^"?l^y:g==="&&"?l&&y:g==="||"?l||y:r}else{if(i.type==="Identifier")return{}.hasOwnProperty.call(e,i.name)?e[i.name]:r;if(i.type==="ThisExpression")return{}.hasOwnProperty.call(e,"this")?e.this:r;if(i.type==="CallExpression"){var S=s(i.callee);if(S===r||typeof S!="function")return r;var A=i.callee.object?s(i.callee.object):r;A===r&&(A=null);for(var w=[],c=0,l=i.arguments.length;c<l;c++){var d=s(i.arguments[c]);if(d===r)return r;w.push(d)}return S.apply(A,w)}else if(i.type==="MemberExpression"){var p=s(i.object);if(p===r||typeof p=="function")return r;if(i.property.type==="Identifier")return p[i.property.name];var f=s(i.property);return f===r?r:p[f]}else if(i.type==="ConditionalExpression"){var a=s(i.test);return a===r?r:s(a?i.consequent:i.alternate)}else if(i.type==="ExpressionStatement"){var a=s(i.expression);return a===r?r:a}else{if(i.type==="ReturnStatement")return s(i.argument);if(i.type==="FunctionExpression"){var P=i.body.body,D={};Object.keys(e).forEach(function(Q){D[Q]=e[Q]});for(var c=0;c<i.params.length;c++){var O=i.params[c];if(O.type=="Identifier")e[O.name]=null;else return r}for(var c in P)if(s(P[c])===r)return r;e=D;var B=Object.keys(e),F=B.map(function(Q){return e[Q]});return Function(B.join(", "),"return "+Bee(i)).apply(null,F)}else if(i.type==="TemplateLiteral"){for(var N="",c=0;c<i.expressions.length;c++)N+=s(i.quasis[c]),N+=s(i.expressions[c]);return N+=s(i.quasis[c]),N}else if(i.type==="TaggedTemplateExpression"){var R=s(i.tag),q=i.quasi,M=q.quasis.map(s),Z=q.expressions.map(s);return R.apply(null,[M].concat(Z))}else return i.type==="TemplateElement"?i.value.cooked:r}}}(t);return n===r?void 0:n}});var b5=v(hi=>{"use strict";var Tee=hi&&hi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fee=hi&&hi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Iee=hi&&hi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Tee(e,t,r);return Fee(e,t),e},kee=hi&&hi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hi,"__esModule",{value:!0});hi.Handlers=void 0;var U_=Iee(OI()),Ree=BI(),y5=mi(),$ee=kee(p5());function h5(t){return function(e,r,n,s){var i=e.value,o=e.path,a=[],u=(function(c,l){g5(c)?(c.forEach(function(d,p){a.length>=s||n(p,d,r)&&a.push({path:l.concat(p),value:d})}),c.forEach(function(d,p){a.length>=s||t&&u(d,l.concat(p))})):Mee(c)&&(Object.keys(c).forEach(function(d){a.length>=s||n(d,c[d],r)&&a.push({path:l.concat(d),value:c[d]})}),Object.keys(c).forEach(function(d){a.length>=s||t&&u(c[d],l.concat(d))}))}).bind(this);return u(i,o),a}}function V_(t,e){try{return(0,$ee.default)(t,e)}catch{}}function wy(t){return function(e,r,n){return this.descend(r,e.expression.value,t,n)}}function Ey(t){return function(e,r,n){return this.traverse(r,e.expression.value,t,n)}}function m5(t){return t=t.filter(function(e){return e}),qee(t,function(e){return e.path.map(function(r){return String(r).replace("-","--")}).join("-")})}function Nee(t){var e=String(t);return e.match(/^-?[0-9]+$/)?parseInt(e):null}function g5(t){return Array.isArray(t)}function Mee(t){return t&&!(t instanceof Array)&&t instanceof Object}function L_(t,e,r){var n=U_.parse(e).body[0].expression,s=V_(n,{"@":t.value}),i=r.replace(/\{\{\s*value\s*\}\}/g,s),o=y5.JSONPath.nodes(t.value,i);return o.forEach(function(a){a.path=t.path.concat(a.path.slice(1))}),o}var jee=function(){function t(){this._fns={"member-child-identifier":function(e,r){var n=e.expression.value,s=r.value;if(s instanceof Object&&n in s)return[{value:s[n],path:r.path.concat(n)}]},"member-descendant-identifier":Ey(function(e,r,n){return e==n}),"subscript-child-numeric_literal":wy(function(e,r,n){return e===n}),"member-child-numeric_literal":wy(function(e,r,n){return String(e)===String(n)}),"subscript-descendant-numeric_literal":Ey(function(e,r,n){return e===n}),"member-child-wildcard":wy(function(){return!0}),"member-descendant-wildcard":Ey(function(){return!0}),"subscript-descendant-wildcard":Ey(function(){return!0}),"subscript-child-wildcard":wy(function(){return!0}),"subscript-child-slice":function(e,r){if(g5(r.value)){var n=e.expression.value.split(":").map(Nee),s=r.value.map(function(i,o){return{value:i,path:r.path.concat(o)}});return Ree.slice.apply(null,[s].concat(n))}},"subscript-child-union":function(e,r){var n=[];return e.expression.value.forEach(function(s){var i={operation:"subscript",scope:"child",expression:s.expression},o=this.resolve(i),a=o(i,r);a&&(n=n.concat(a))},this),m5(n)},"subscript-descendant-union":function(e,r,n){var s=this,i=[],o=y5.JSONPath.nodes(r,"$..*").slice(1);return o.forEach(function(a){i.length>=n||e.expression.value.forEach(function(u){var c={operation:"subscript",scope:"child",expression:u.expression},l=s.resolve(c),d=l(c,a);i=i.concat(d)})}),m5(i)},"subscript-child-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=U_.parse(s).body[0].expression,o=function(a,u){return V_(i,{"@":u})};return this.descend(r,null,o,n)},"subscript-descendant-filter_expression":function(e,r,n){var s=e.expression.value.slice(2,-1),i=U_.parse(s).body[0].expression,o=function(a,u){return V_(i,{"@":u})};return this.traverse(r,null,o,n)},"subscript-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return L_(r,n,"$[{{value}}]")},"member-child-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return L_(r,n,"$.{{value}}")},"member-descendant-script_expression":function(e,r){var n=e.expression.value.slice(1,-1);return L_(r,n,"$..value")}},this.initialize()}return t.prototype.initialize=function(){this.traverse=h5(!0),this.descend=h5(),this._fns["subscript-child-string_literal"]=this._fns["member-child-identifier"],this._fns["member-descendant-numeric_literal"]=this._fns["subscript-descendant-string_literal"]=this._fns["member-descendant-identifier"]},t.prototype.resolve=function(e){var r=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[r];if(!n)throw new Error("couldn't resolve key: "+r);return n.bind(this)},t.prototype.register=function(e,r){if(!(r instanceof Function))throw new Error("handler must be a function");this._fns[e]=r},t}();hi.Handlers=jee;function qee(t,e){for(var r=[],n=[],s=0,i=t?.length;s<i;s++){var o=t[s],a=e?e(o,s):o;n.includes(a)||(n.push(a),r.push(o))}return r}});var v5=v(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});_y.TOKENS=void 0;_y.TOKENS={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}});var w5=v(bp=>{var Sy=function(){var t=function(O,B,F,N){for(F=F||{},N=O.length;N--;F[O[N]]=B);return F},e=[1,5],r=[1,6],n=[1,7],s=[1,8],i=[1,9],o=[1,18],a=[1,19],u=[1,20],c=[1,12,14,22],l=[1,29],d=[1,30],p=[1,33],f=[1,35],h=[1,31],y=[1,36],g=[1,37],S=[24,28],A={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(B,F,N,R,q,M,Z){R.ast||(R.ast=w,w.initialize());var Q=M.length-1;switch(q){case 1:return R.ast.set({expression:{type:"root",value:M[Q]}}),R.ast.unshift(),R.ast.yield();break;case 2:return R.ast.set({expression:{type:"root",value:M[Q-1]}}),R.ast.unshift(),R.ast.yield();break;case 3:return R.ast.unshift(),R.ast.yield();break;case 4:return R.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:M[Q-1]}}),R.ast.unshift(),R.ast.yield();break;case 5:case 6:case 11:case 13:case 18:case 21:case 22:case 23:break;case 7:R.ast.set({operation:"member"}),R.ast.push();break;case 8:R.ast.set({operation:"subscript"}),R.ast.push();break;case 9:case 19:R.ast.set({scope:"child"});break;case 10:case 20:R.ast.set({scope:"descendant"});break;case 12:R.ast.set({scope:"child",operation:"member"});break;case 14:R.ast.set({expression:{type:"wildcard",value:M[Q]}});break;case 15:R.ast.set({expression:{type:"identifier",value:M[Q]}});break;case 16:R.ast.set({expression:{type:"script_expression",value:M[Q]}});break;case 17:R.ast.set({expression:{type:"numeric_literal",value:parseInt(M[Q])}});break;case 24:M[Q].length>1?R.ast.set({expression:{type:"union",value:M[Q]}}):this.$=M[Q];break;case 25:this.$=[M[Q]];break;case 26:this.$=M[Q-2].concat(M[Q]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(M[Q])}},R.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:M[Q]}},R.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:M[Q]}},R.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:M[Q]}},R.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:M[Q]}},R.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:M[Q]}},R.ast.set(this.$);break;case 33:case 34:this.$=M[Q];break}},table:[{3:1,4:[1,2],6:3,13:4,15:e,16:r,17:n,18:s,19:i},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,12]),t(c,[2,14]),t(c,[2,15]),t(c,[2,16]),t(c,[2,17]),t(c,[2,18]),{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,5]),t(c,[2,7]),t(c,[2,8]),t(c,[2,9]),t(c,[2,10]),t(c,[2,19]),t(c,[2,20]),{13:23,15:e,16:r,17:n,18:s,19:i},{13:24,15:e,16:r,17:n,18:s,19:i,22:[1,25]},{15:l,17:d,18:p,23:26,25:27,26:28,27:32,29:34,30:f,31:h,32:y,33:g},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:o,14:a,20:16,21:17,22:u},t(c,[2,6]),t(c,[2,11]),t(c,[2,13]),{15:l,17:d,18:p,23:38,25:27,26:28,27:32,29:34,30:f,31:h,32:y,33:g},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},t(S,[2,25]),t(S,[2,27]),t(S,[2,28]),t(S,[2,29]),t(S,[2,33]),t(S,[2,34]),{24:[1,41]},t(c,[2,21]),{18:p,27:42,29:34,30:f,32:y,33:g},t(c,[2,22]),t(S,[2,26])],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(B,F){if(F.recoverable)this.trace(B);else{var N=new Error(B);throw N.hash=F,N}},parse:function(B){var F=this,N=[0],R=[],q=[null],M=[],Z=this.table,Q="",U=0,G=0,ee=0,z=2,$=1,j=M.slice.call(arguments,1),Y=Object.create(this.lexer),se={yy:{}};for(var pe in this.yy)Object.prototype.hasOwnProperty.call(this.yy,pe)&&(se.yy[pe]=this.yy[pe]);Y.setInput(B,se.yy),se.yy.lexer=Y,se.yy.parser=this,typeof Y.yylloc>"u"&&(Y.yylloc={});var oe=Y.yylloc;M.push(oe);var he=Y.options&&Y.options.ranges;typeof se.yy.parseError=="function"?this.parseError=se.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Ee(ar){N.length=N.length-2*ar,q.length=q.length-ar,M.length=M.length-ar}for(var Pe=function(){var ar;return ar=Y.lex()||$,typeof ar!="number"&&(ar=F.symbols_[ar]||ar),ar},Ie,ze,at,dt,Je,qt,Dt={},Qr,or,Yi,Si;;){if(at=N[N.length-1],this.defaultActions[at]?dt=this.defaultActions[at]:((Ie===null||typeof Ie>"u")&&(Ie=Pe()),dt=Z[at]&&Z[at][Ie]),typeof dt>"u"||!dt.length||!dt[0]){var zs="";Si=[];for(Qr in Z[at])this.terminals_[Qr]&&Qr>z&&Si.push("'"+this.terminals_[Qr]+"'");Y.showPosition?zs="Parse error on line "+(U+1)+`:
`+Y.showPosition()+`
Expecting `+Si.join(", ")+", got '"+(this.terminals_[Ie]||Ie)+"'":zs="Parse error on line "+(U+1)+": Unexpected "+(Ie==$?"end of input":"'"+(this.terminals_[Ie]||Ie)+"'"),this.parseError(zs,{text:Y.match,token:this.terminals_[Ie]||Ie,line:Y.yylineno,loc:oe,expected:Si})}if(dt[0]instanceof Array&&dt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+at+", token: "+Ie);switch(dt[0]){case 1:N.push(Ie),q.push(Y.yytext),M.push(Y.yylloc),N.push(dt[1]),Ie=null,ze?(Ie=ze,ze=null):(G=Y.yyleng,Q=Y.yytext,U=Y.yylineno,oe=Y.yylloc,ee>0&&ee--);break;case 2:if(or=this.productions_[dt[1]][1],Dt.$=q[q.length-or],Dt._$={first_line:M[M.length-(or||1)].first_line,last_line:M[M.length-1].last_line,first_column:M[M.length-(or||1)].first_column,last_column:M[M.length-1].last_column},he&&(Dt._$.range=[M[M.length-(or||1)].range[0],M[M.length-1].range[1]]),qt=this.performAction.apply(Dt,[Q,G,U,se.yy,dt[1],q,M].concat(j)),typeof qt<"u")return qt;or&&(N=N.slice(0,-1*or*2),q=q.slice(0,-1*or),M=M.slice(0,-1*or)),N.push(this.productions_[dt[1]][0]),q.push(Dt.$),M.push(Dt._$),Yi=Z[N[N.length-2]][N[N.length-1]],N.push(Yi);break;case 3:return!0}}return!0}},w={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(O){for(var B in O)this._node[B]=O[B];return this._node},node:function(O){return arguments.length&&(this._node=O),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var O=this._nodes;return this.initialize(),O}},P=function(){var O={EOF:1,parseError:function(F,N){if(this.yy.parser)this.yy.parser.parseError(F,N);else throw new Error(F)},setInput:function(B,F){return this.yy=F||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var F=B.match(/(?:\r\n?|\n).*/g);return F?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},unput:function(B){var F=B.length,N=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-F),this.offset-=F;var R=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var q=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===R.length?this.yylloc.first_column:0)+R[R.length-N.length].length-N[0].length:this.yylloc.first_column-F},this.options.ranges&&(this.yylloc.range=[q[0],q[0]+this.yyleng-F]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(B){this.unput(this.match.slice(B))},pastInput:function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var B=this.pastInput(),F=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+F+"^"},test_match:function(B,F){var N,R,q;if(this.options.backtrack_lexer&&(q={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(q.yylloc.range=this.yylloc.range.slice(0))),R=B[0].match(/(?:\r\n?|\n).*/g),R&&(this.yylineno+=R.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:R?R[R.length-1].length-R[R.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],N=this.performAction.call(this,this.yy,this,F,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var M in q)this[M]=q[M];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,F,N,R;this._more||(this.yytext="",this.match="");for(var q=this._currentRules(),M=0;M<q.length;M++)if(N=this._input.match(this.rules[q[M]]),N&&(!F||N[0].length>F[0].length)){if(F=N,R=M,this.options.backtrack_lexer){if(B=this.test_match(N,q[M]),B!==!1)return B;if(this._backtrack){F=!1;continue}else return!1}else if(!this.options.flex)break}return F?(B=this.test_match(F,q[R]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var F=this.next();return F||this.lex()},begin:function(F){this.conditionStack.push(F)},popState:function(){var F=this.conditionStack.length-1;return F>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(F){return F=this.conditionStack.length-1-Math.abs(F||0),F>=0?this.conditionStack[F]:"INITIAL"},pushState:function(F){this.begin(F)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(F,N,R,q){var M=q;switch(R){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return N.yytext=N.yytext.substr(1,N.yyleng-2),32;break;case 11:return N.yytext=N.yytext.substr(1,N.yyleng-2),33;break;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt\/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return O}();A.lexer=P;function D(){this.yy={}}return D.prototype=A,A.Parser=D,new D}();typeof Ax<"u"&&typeof bp<"u"&&(bp.parser=Sy,bp.Parser=Sy.Parser,bp.parse=function(){return Sy.parse.apply(Sy,arguments)})});var E5=v($s=>{"use strict";var Lee=$s&&$s.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Uee=$s&&$s.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Vee=$s&&$s.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Lee(e,t,r);return Uee(e,t),e};Object.defineProperty($s,"__esModule",{value:!0});$s.Parser=void 0;var Kee=Vee(w5());function Hee(){var t=new Kee.Parser,e=t.parseError;return t.yy.parseError=function(){t.yy.ast&&t.yy.ast.initialize(),e.apply(t,arguments)},t}$s.Parser=Hee});var _5=v(Dy=>{"use strict";Object.defineProperty(Dy,"__esModule",{value:!0});Dy.assert=void 0;var Wee=function(){function t(){}return t.ok=function(e,r){if(!e)throw new Error(r)},t.equal=function(e,r,n){if(e!==r)throw new Error(n)},t}();Dy.assert=Wee});var S5=v(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.JSONPath=void 0;var zee=b5(),Jee=v5(),Ay=E5(),Nr=_5(),Gee=function(){function t(){}return t.parse=function(e){return Nr.assert.ok(typeof e=="string","we need a path"),new Ay.Parser().parse(e)},t.parent=function(e,r){Nr.assert.ok(e instanceof Object,"obj needs to be an object"),Nr.assert.ok(r,"we need a path");var n=this.nodes(e,r)[0],s=n.path.pop();return this.value(e,n.path)},t.apply=function(e,r,n){Nr.assert.ok(e instanceof Object,"obj needs to be an object"),Nr.assert.ok(r,"we need a path"),Nr.assert.equal(typeof n,"function","fn needs to be function");var s=this.nodes(e,r).sort(function(i,o){return o.path.length-i.path.length});return s.forEach(function(i){var o=i.path.pop(),a=this.value(e,this.stringify(i.path)),u=i.value=n.call(e,a[o]);a[o]=u},this),s},t.value=function(e,r,n){if(Nr.assert.ok(e instanceof Object,"obj needs to be an object"),Nr.assert.ok(r,"we need a path"),n!==void 0){var s=this.nodes(e,r).shift();if(!s)return this._vivify(e,r,n);var i=s.path.slice(-1).shift(),o=this.parent(e,this.stringify(s.path));o[i]=n}return this.query(e,this.stringify(r),1).shift()},t._vivify=function(e,r,n){var s=this;Nr.assert.ok(e instanceof Object,"obj needs to be an object"),Nr.assert.ok(r,"we need a path");var i=new Ay.Parser().parse(r).map(function(a){return a.expression.value}),o=function(a,u){var c=a.pop(),l=s.value(e,a);l||(o(a.concat(),typeof c=="string"?{}:[]),l=s.value(e,a)),l[c]=u};return o(i,n),this.query(e,r)[0]},t.query=function(e,r,n){Nr.assert.ok(e instanceof Object,"obj needs to be an object"),Nr.assert.ok(typeof r=="string","we need a path");var s=this.nodes(e,r,n).map(function(i){return i.value});return s},t.paths=function(e,r,n){Nr.assert.ok(e instanceof Object,"obj needs to be an object"),Nr.assert.ok(r,"we need a path");var s=this.nodes(e,r,n).map(function(i){return i.path});return s},t.nodes=function(e,r,n){if(Nr.assert.ok(e instanceof Object,"obj needs to be an object"),Nr.assert.ok(r,"we need a path"),n===0)return[];var s=new Ay.Parser().parse(r),i=new zee.Handlers,o=[{path:["$"],value:e}],a=[];return s.length&&s[0].expression.type=="root"&&s.shift(),s.length?(s.forEach(function(u,c){if(!(a.length>=n)){var l=i.resolve(u),d=[];o.forEach(function(p){if(!(a.length>=n)){var f=l(u,p,n);c==s.length-1?a=a.concat(f||[]):d=d.concat(f||[])}}),o=d}}),n?a.slice(0,n):a):o},t.stringify=function(e){Nr.assert.ok(e,"we need a path");var r="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return e=this._normalize(e),e.forEach(function(s){if(s.expression.type!="root"){var i=[s.scope,s.operation].join("-"),o=n[i],a;if(s.expression.type=="string_literal"?a=JSON.stringify(s.expression.value):a=s.expression.value,!o)throw new Error("couldn't find template "+i);r+=o.replace(/{{value}}/,a)}}),r},t._normalize=function(e){if(Nr.assert.ok(e,"we need a path"),typeof e=="string")return new Ay.Parser().parse(e);if(Array.isArray(e)&&typeof e[0]=="string"){var r=[{expression:{type:"root",value:"$"}}];return e.forEach(function(n,s){if(!(n=="$"&&s===0))if(typeof n=="string"&&n.match("^"+Jee.TOKENS.identifier+"$"))r.push({operation:"member",scope:"child",expression:{value:n,type:"identifier"}});else{var i=typeof n=="number"?"numeric_literal":"string_literal";r.push({operation:"subscript",scope:"child",expression:{value:n,type:i}})}}),r}else if(Array.isArray(e)&&typeof e[0]=="object")return e;throw new Error("couldn't understand path "+e)},t}();xy.JSONPath=Gee});var mi=v(Gu=>{"use strict";var Xee=Gu&&Gu.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Yee=Gu&&Gu.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xee(e,t,r)};Object.defineProperty(Gu,"__esModule",{value:!0});Yee(S5(),Gu)});var x5=v((a2e,A5)=>{"use strict";var Zee="Function.prototype.bind called on incompatible ",Qee=Object.prototype.toString,ete=Math.max,tte="[object Function]",D5=function(e,r){for(var n=[],s=0;s<e.length;s+=1)n[s]=e[s];for(var i=0;i<r.length;i+=1)n[i+e.length]=r[i];return n},rte=function(e,r){for(var n=[],s=r||0,i=0;s<e.length;s+=1,i+=1)n[i]=e[s];return n},nte=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r};A5.exports=function(e){var r=this;if(typeof r!="function"||Qee.apply(r)!==tte)throw new TypeError(Zee+r);for(var n=rte(arguments,1),s,i=function(){if(this instanceof s){var l=r.apply(this,D5(n,arguments));return Object(l)===l?l:this}return r.apply(e,D5(n,arguments))},o=ete(0,r.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(s=Function("binder","return function ("+nte(a,",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var c=function(){};c.prototype=r.prototype,s.prototype=new c,c.prototype=null}return s}});var Cy=v((u2e,C5)=>{"use strict";var ite=x5();C5.exports=Function.prototype.bind||ite});var O5=v((c2e,P5)=>{"use strict";P5.exports=Error});var T5=v((l2e,B5)=>{"use strict";B5.exports=EvalError});var I5=v((d2e,F5)=>{"use strict";F5.exports=RangeError});var R5=v((f2e,k5)=>{"use strict";k5.exports=ReferenceError});var Py=v((p2e,$5)=>{"use strict";$5.exports=SyntaxError});var yt=v((h2e,N5)=>{"use strict";N5.exports=TypeError});var j5=v((m2e,M5)=>{"use strict";M5.exports=URIError});var K_=v((y2e,q5)=>{"use strict";q5.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0}});var Xu=v((g2e,U5)=>{"use strict";var L5=typeof Symbol<"u"&&Symbol,ste=K_();U5.exports=function(){return typeof L5!="function"||typeof Symbol!="function"||typeof L5("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:ste()}});var W_=v((b2e,V5)=>{"use strict";var H_={__proto__:null,foo:{}},ote=Object;V5.exports=function(){return{__proto__:H_}.foo===H_.foo&&!(H_ instanceof ote)}});var Yu=v((v2e,K5)=>{"use strict";var ate=Function.prototype.call,ute=Object.prototype.hasOwnProperty,cte=Cy();K5.exports=cte.call(ate,ute)});var Er=v((w2e,G5)=>{"use strict";var lt,lte=O5(),dte=T5(),fte=I5(),pte=R5(),Gl=Py(),Jl=yt(),hte=j5(),J5=Function,z_=function(t){try{return J5('"use strict"; return ('+t+").constructor;")()}catch{}},Zu=Object.getOwnPropertyDescriptor;if(Zu)try{Zu({},"")}catch{Zu=null}var J_=function(){throw new Jl},mte=Zu?function(){try{return arguments.callee,J_}catch{try{return Zu(arguments,"callee").get}catch{return J_}}}():J_,Wl=Xu()(),yte=W_()(),Mr=Object.getPrototypeOf||(yte?function(t){return t.__proto__}:null),zl={},gte=typeof Uint8Array>"u"||!Mr?lt:Mr(Uint8Array),Qu={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?lt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?lt:ArrayBuffer,"%ArrayIteratorPrototype%":Wl&&Mr?Mr([][Symbol.iterator]()):lt,"%AsyncFromSyncIteratorPrototype%":lt,"%AsyncFunction%":zl,"%AsyncGenerator%":zl,"%AsyncGeneratorFunction%":zl,"%AsyncIteratorPrototype%":zl,"%Atomics%":typeof Atomics>"u"?lt:Atomics,"%BigInt%":typeof BigInt>"u"?lt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?lt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?lt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?lt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":lte,"%eval%":eval,"%EvalError%":dte,"%Float32Array%":typeof Float32Array>"u"?lt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?lt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?lt:FinalizationRegistry,"%Function%":J5,"%GeneratorFunction%":zl,"%Int8Array%":typeof Int8Array>"u"?lt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?lt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?lt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Wl&&Mr?Mr(Mr([][Symbol.iterator]())):lt,"%JSON%":typeof JSON=="object"?JSON:lt,"%Map%":typeof Map>"u"?lt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Wl||!Mr?lt:Mr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?lt:Promise,"%Proxy%":typeof Proxy>"u"?lt:Proxy,"%RangeError%":fte,"%ReferenceError%":pte,"%Reflect%":typeof Reflect>"u"?lt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?lt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Wl||!Mr?lt:Mr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?lt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Wl&&Mr?Mr(""[Symbol.iterator]()):lt,"%Symbol%":Wl?Symbol:lt,"%SyntaxError%":Gl,"%ThrowTypeError%":mte,"%TypedArray%":gte,"%TypeError%":Jl,"%Uint8Array%":typeof Uint8Array>"u"?lt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?lt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?lt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?lt:Uint32Array,"%URIError%":hte,"%WeakMap%":typeof WeakMap>"u"?lt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?lt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?lt:WeakSet};if(Mr)try{null.error}catch(t){H5=Mr(Mr(t)),Qu["%Error.prototype%"]=H5}var H5,bte=function t(e){var r;if(e==="%AsyncFunction%")r=z_("async function () {}");else if(e==="%GeneratorFunction%")r=z_("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=z_("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var s=t("%AsyncGenerator%");s&&Mr&&(r=Mr(s.prototype))}return Qu[e]=r,r},W5={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vp=Cy(),Oy=Yu(),vte=vp.call(Function.call,Array.prototype.concat),wte=vp.call(Function.apply,Array.prototype.splice),z5=vp.call(Function.call,String.prototype.replace),By=vp.call(Function.call,String.prototype.slice),Ete=vp.call(Function.call,RegExp.prototype.exec),_te=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ste=/\\(\\)?/g,Dte=function(e){var r=By(e,0,1),n=By(e,-1);if(r==="%"&&n!=="%")throw new Gl("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Gl("invalid intrinsic syntax, expected opening `%`");var s=[];return z5(e,_te,function(i,o,a,u){s[s.length]=a?z5(u,Ste,"$1"):o||i}),s},Ate=function(e,r){var n=e,s;if(Oy(W5,n)&&(s=W5[n],n="%"+s[0]+"%"),Oy(Qu,n)){var i=Qu[n];if(i===zl&&(i=bte(n)),typeof i>"u"&&!r)throw new Jl("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:s,name:n,value:i}}throw new Gl("intrinsic "+e+" does not exist!")};G5.exports=function(e,r){if(typeof e!="string"||e.length===0)throw new Jl("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Jl('"allowMissing" argument must be a boolean');if(Ete(/^%?[^%]*%?$/,e)===null)throw new Gl("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Dte(e),s=n.length>0?n[0]:"",i=Ate("%"+s+"%",r),o=i.name,a=i.value,u=!1,c=i.alias;c&&(s=c[0],wte(n,vte([0,1],c)));for(var l=1,d=!0;l<n.length;l+=1){var p=n[l],f=By(p,0,1),h=By(p,-1);if((f==='"'||f==="'"||f==="`"||h==='"'||h==="'"||h==="`")&&f!==h)throw new Gl("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(u=!0),s+="."+p,o="%"+s+"%",Oy(Qu,o))a=Qu[o];else if(a!=null){if(!(p in a)){if(!r)throw new Jl("base intrinsic for "+e+" exists, but the property is not available.");return}if(Zu&&l+1>=n.length){var y=Zu(a,p);d=!!y,d&&"get"in y&&!("originalValue"in y.get)?a=y.get:a=a[p]}else d=Oy(a,p),a=a[p];d&&!u&&(Qu[o]=a)}}return a}});var wp=v((E2e,X5)=>{"use strict";var xte=Er(),Ty=xte("%Object.defineProperty%",!0)||!1;if(Ty)try{Ty({},"a",{value:1})}catch{Ty=!1}X5.exports=Ty});var G_=v((_2e,Y5)=>{"use strict";var Cte=Er(),Fy=Cte("%Object.getOwnPropertyDescriptor%",!0);if(Fy)try{Fy([],"length")}catch{Fy=null}Y5.exports=Fy});var Iy=v((S2e,e6)=>{"use strict";var Z5=wp(),Pte=Py(),Xl=yt(),Q5=G_();e6.exports=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Xl("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new Xl("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Xl("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Xl("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Xl("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Xl("`loose`, if provided, must be a boolean");var s=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!Q5&&Q5(e,r);if(Z5)Z5(e,r,{configurable:o===null&&u?u.configurable:!o,enumerable:s===null&&u?u.enumerable:!s,value:n,writable:i===null&&u?u.writable:!i});else if(a||!s&&!i&&!o)e[r]=n;else throw new Pte("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}});var Ep=v((D2e,r6)=>{"use strict";var X_=wp(),t6=function(){return!!X_};t6.hasArrayLengthDefineBug=function(){if(!X_)return null;try{return X_([],"length",{value:1}).length!==1}catch{return!0}};r6.exports=t6});var a6=v((A2e,o6)=>{"use strict";var Ote=Er(),n6=Iy(),Bte=Ep()(),i6=G_(),s6=yt(),Tte=Ote("%Math.floor%");o6.exports=function(e,r){if(typeof e!="function")throw new s6("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Tte(r)!==r)throw new s6("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],s=!0,i=!0;if("length"in e&&i6){var o=i6(e,"length");o&&!o.configurable&&(s=!1),o&&!o.writable&&(i=!1)}return(s||i||!n)&&(Bte?n6(e,"length",r,!0,!0):n6(e,"length",r)),e}});var _p=v((x2e,ky)=>{"use strict";var Y_=Cy(),Ry=Er(),Fte=a6(),Ite=yt(),l6=Ry("%Function.prototype.apply%"),d6=Ry("%Function.prototype.call%"),f6=Ry("%Reflect.apply%",!0)||Y_.call(d6,l6),u6=wp(),kte=Ry("%Math.max%");ky.exports=function(e){if(typeof e!="function")throw new Ite("a function is required");var r=f6(Y_,d6,arguments);return Fte(r,1+kte(0,e.length-(arguments.length-1)),!0)};var c6=function(){return f6(Y_,l6,arguments)};u6?u6(ky.exports,"apply",{value:c6}):ky.exports.apply=c6});var Z_=v((C2e,h6)=>{"use strict";var p6=Object.prototype.toString;h6.exports=function(e){var r=p6.call(e),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&p6.call(e.callee)==="[object Function]"),n}});var S6=v((P2e,_6)=>{"use strict";var E6;Object.keys||(Sp=Object.prototype.hasOwnProperty,Q_=Object.prototype.toString,m6=Z_(),e2=Object.prototype.propertyIsEnumerable,y6=!e2.call({toString:null},"toString"),g6=e2.call(function(){},"prototype"),Dp=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],$y=function(t){var e=t.constructor;return e&&e.prototype===t},b6={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},v6=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!b6["$"+t]&&Sp.call(window,t)&&window[t]!==null&&typeof window[t]=="object")try{$y(window[t])}catch{return!0}}catch{return!0}return!1}(),w6=function(t){if(typeof window>"u"||!v6)return $y(t);try{return $y(t)}catch{return!1}},E6=function(e){var r=e!==null&&typeof e=="object",n=Q_.call(e)==="[object Function]",s=m6(e),i=r&&Q_.call(e)==="[object String]",o=[];if(!r&&!n&&!s)throw new TypeError("Object.keys called on a non-object");var a=g6&&n;if(i&&e.length>0&&!Sp.call(e,0))for(var u=0;u<e.length;++u)o.push(String(u));if(s&&e.length>0)for(var c=0;c<e.length;++c)o.push(String(c));else for(var l in e)!(a&&l==="prototype")&&Sp.call(e,l)&&o.push(String(l));if(y6)for(var d=w6(e),p=0;p<Dp.length;++p)!(d&&Dp[p]==="constructor")&&Sp.call(e,Dp[p])&&o.push(Dp[p]);return o});var Sp,Q_,m6,e2,y6,g6,Dp,$y,b6,v6,w6;_6.exports=E6});var C6=v((O2e,x6)=>{"use strict";var Rte=Array.prototype.slice,$te=Z_(),D6=Object.keys,Ny=D6?function(e){return D6(e)}:S6(),A6=Object.keys;Ny.shim=function(){if(Object.keys){var e=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);e||(Object.keys=function(n){return $te(n)?A6(Rte.call(n)):A6(n)})}else Object.keys=Ny;return Object.keys||Ny};x6.exports=Ny});var xa=v((B2e,T6)=>{"use strict";var Nte=C6(),Mte=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",jte=Object.prototype.toString,qte=Array.prototype.concat,P6=Iy(),Lte=function(t){return typeof t=="function"&&jte.call(t)==="[object Function]"},O6=Ep()(),Ute=function(t,e,r,n){if(e in t){if(n===!0){if(t[e]===r)return}else if(!Lte(n)||!n())return}O6?P6(t,e,r,!0):P6(t,e,r)},B6=function(t,e){var r=arguments.length>2?arguments[2]:{},n=Nte(e);Mte&&(n=qte.call(n,Object.getOwnPropertySymbols(e)));for(var s=0;s<n.length;s+=1)Ute(t,n[s],e[n[s]],r[n[s]])};B6.supportsDescriptors=!!O6;T6.exports=B6});var zn=v((T2e,k6)=>{"use strict";var F6=Er(),I6=_p(),Vte=I6(F6("String.prototype.indexOf"));k6.exports=function(e,r){var n=F6(e,!!r);return typeof n=="function"&&Vte(e,".prototype.")>-1?I6(n):n}});var t2=v((F2e,$6)=>{"use strict";var Kte=Er(),R6=Kte("%Array%"),Hte=!R6.isArray&&zn()("Object.prototype.toString");$6.exports=R6.isArray||function(e){return Hte(e)==="[object Array]"}});var r2=v((I2e,N6)=>{"use strict";N6.exports=t2()});var n2=v((k2e,M6)=>{"use strict";var Wte=Er(),zte=zn(),Jte=yt(),Gte=r2(),Xte=Wte("%Reflect.apply%",!0)||zte("Function.prototype.apply");M6.exports=function(e,r){var n=arguments.length>2?arguments[2]:[];if(!Gte(n))throw new Jte("Assertion failed: optional `argumentsList`, if provided, must be a List");return Xte(e,r,n)}});var j6=v(()=>{});var Pp=v((N2e,ik)=>{var p2=typeof Map=="function"&&Map.prototype,i2=Object.getOwnPropertyDescriptor&&p2?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,jy=p2&&i2&&typeof i2.get=="function"?i2.get:null,q6=p2&&Map.prototype.forEach,h2=typeof Set=="function"&&Set.prototype,s2=Object.getOwnPropertyDescriptor&&h2?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,qy=h2&&s2&&typeof s2.get=="function"?s2.get:null,L6=h2&&Set.prototype.forEach,Yte=typeof WeakMap=="function"&&WeakMap.prototype,xp=Yte?WeakMap.prototype.has:null,Zte=typeof WeakSet=="function"&&WeakSet.prototype,Cp=Zte?WeakSet.prototype.has:null,Qte=typeof WeakRef=="function"&&WeakRef.prototype,U6=Qte?WeakRef.prototype.deref:null,ere=Boolean.prototype.valueOf,tre=Object.prototype.toString,rre=Function.prototype.toString,nre=String.prototype.match,m2=String.prototype.slice,Pa=String.prototype.replace,ire=String.prototype.toUpperCase,V6=String.prototype.toLowerCase,Z6=RegExp.prototype.test,K6=Array.prototype.concat,Ns=Array.prototype.join,sre=Array.prototype.slice,H6=Math.floor,u2=typeof BigInt=="function"?BigInt.prototype.valueOf:null,o2=Object.getOwnPropertySymbols,c2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="object",sn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Yl||!0)?Symbol.toStringTag:null,Q6=Object.prototype.propertyIsEnumerable,W6=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function z6(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Z6.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-H6(-t):H6(t);if(n!==t){var s=String(n),i=m2.call(e,s.length+1);return Pa.call(s,r,"$&_")+"."+Pa.call(Pa.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pa.call(e,r,"$&_")}var l2=j6(),J6=l2.custom,G6=tk(J6)?J6:null;ik.exports=function t(e,r,n,s){var i=r||{};if(Ca(i,"quoteStyle")&&i.quoteStyle!=="single"&&i.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ca(i,"maxStringLength")&&(typeof i.maxStringLength=="number"?i.maxStringLength<0&&i.maxStringLength!==1/0:i.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Ca(i,"customInspect")?i.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ca(i,"indent")&&i.indent!==null&&i.indent!=="	"&&!(parseInt(i.indent,10)===i.indent&&i.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ca(i,"numericSeparator")&&typeof i.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=i.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return nk(e,i);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?z6(e,u):u}if(typeof e=="bigint"){var c=String(e)+"n";return a?z6(e,c):c}var l=typeof i.depth>"u"?5:i.depth;if(typeof n>"u"&&(n=0),n>=l&&l>0&&typeof e=="object")return d2(e)?"[Array]":"[Object]";var d=Sre(i,n);if(typeof s>"u")s=[];else if(rk(s,e)>=0)return"[Circular]";function p(Z,Q,U){if(Q&&(s=sre.call(s),s.push(Q)),U){var G={depth:i.depth};return Ca(i,"quoteStyle")&&(G.quoteStyle=i.quoteStyle),t(Z,G,n+1,s)}return t(Z,i,n+1,s)}if(typeof e=="function"&&!X6(e)){var f=hre(e),h=My(e,p);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(h.length>0?" { "+Ns.call(h,", ")+" }":"")}if(tk(e)){var y=Yl?Pa.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):c2.call(e);return typeof e=="object"&&!Yl?Ap(y):y}if(wre(e)){for(var g="<"+V6.call(String(e.nodeName)),S=e.attributes||[],A=0;A<S.length;A++)g+=" "+S[A].name+"="+ek(ore(S[A].value),"double",i);return g+=">",e.childNodes&&e.childNodes.length&&(g+="..."),g+="</"+V6.call(String(e.nodeName))+">",g}if(d2(e)){if(e.length===0)return"[]";var w=My(e,p);return d&&!_re(w)?"["+f2(w,d)+"]":"[ "+Ns.call(w,", ")+" ]"}if(ure(e)){var P=My(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!Q6.call(e,"cause")?"{ ["+String(e)+"] "+Ns.call(K6.call("[cause]: "+p(e.cause),P),", ")+" }":P.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ns.call(P,", ")+" }"}if(typeof e=="object"&&o){if(G6&&typeof e[G6]=="function"&&l2)return l2(e,{depth:l-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(mre(e)){var D=[];return q6&&q6.call(e,function(Z,Q){D.push(p(Q,e,!0)+" => "+p(Z,e))}),Y6("Map",jy.call(e),D,d)}if(bre(e)){var O=[];return L6&&L6.call(e,function(Z){O.push(p(Z,e))}),Y6("Set",qy.call(e),O,d)}if(yre(e))return a2("WeakMap");if(vre(e))return a2("WeakSet");if(gre(e))return a2("WeakRef");if(lre(e))return Ap(p(Number(e)));if(fre(e))return Ap(p(u2.call(e)));if(dre(e))return Ap(ere.call(e));if(cre(e))return Ap(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===globalThis)return"{ [object globalThis] }";if(!are(e)&&!X6(e)){var B=My(e,p),F=W6?W6(e)===Object.prototype:e instanceof Object||e.constructor===Object,N=e instanceof Object?"":"null prototype",R=!F&&sn&&Object(e)===e&&sn in e?m2.call(Oa(e),8,-1):N?"Object":"",q=F||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",M=q+(R||N?"["+Ns.call(K6.call([],R||[],N||[]),": ")+"] ":"");return B.length===0?M+"{}":d?M+"{"+f2(B,d)+"}":M+"{ "+Ns.call(B,", ")+" }"}return String(e)};function ek(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function ore(t){return Pa.call(String(t),/"/g,"&quot;")}function d2(t){return Oa(t)==="[object Array]"&&(!sn||!(typeof t=="object"&&sn in t))}function are(t){return Oa(t)==="[object Date]"&&(!sn||!(typeof t=="object"&&sn in t))}function X6(t){return Oa(t)==="[object RegExp]"&&(!sn||!(typeof t=="object"&&sn in t))}function ure(t){return Oa(t)==="[object Error]"&&(!sn||!(typeof t=="object"&&sn in t))}function cre(t){return Oa(t)==="[object String]"&&(!sn||!(typeof t=="object"&&sn in t))}function lre(t){return Oa(t)==="[object Number]"&&(!sn||!(typeof t=="object"&&sn in t))}function dre(t){return Oa(t)==="[object Boolean]"&&(!sn||!(typeof t=="object"&&sn in t))}function tk(t){if(Yl)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!c2)return!1;try{return c2.call(t),!0}catch{}return!1}function fre(t){if(!t||typeof t!="object"||!u2)return!1;try{return u2.call(t),!0}catch{}return!1}var pre=Object.prototype.hasOwnProperty||function(t){return t in this};function Ca(t,e){return pre.call(t,e)}function Oa(t){return tre.call(t)}function hre(t){if(t.name)return t.name;var e=nre.call(rre.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function rk(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function mre(t){if(!jy||!t||typeof t!="object")return!1;try{jy.call(t);try{qy.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function yre(t){if(!xp||!t||typeof t!="object")return!1;try{xp.call(t,xp);try{Cp.call(t,Cp)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function gre(t){if(!U6||!t||typeof t!="object")return!1;try{return U6.call(t),!0}catch{}return!1}function bre(t){if(!qy||!t||typeof t!="object")return!1;try{qy.call(t);try{jy.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function vre(t){if(!Cp||!t||typeof t!="object")return!1;try{Cp.call(t,Cp);try{xp.call(t,xp)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function wre(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function nk(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return nk(m2.call(t,0,e.maxStringLength),e)+n}var s=Pa.call(Pa.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Ere);return ek(s,"single",e)}function Ere(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+ire.call(e.toString(16))}function Ap(t){return"Object("+t+")"}function a2(t){return t+" { ? }"}function Y6(t,e,r,n){var s=n?f2(r,n):Ns.call(r,", ");return t+" ("+e+") {"+s+"}"}function _re(t){for(var e=0;e<t.length;e++)if(rk(t[e],`
`)>=0)return!1;return!0}function Sre(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=Ns.call(Array(t.indent+1)," ");else return null;return{base:r,prev:Ns.call(Array(e+1),r)}}function f2(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+Ns.call(t,","+r)+`
`+e.prev}function My(t,e){var r=d2(t),n=[];if(r){n.length=t.length;for(var s=0;s<t.length;s++)n[s]=Ca(t,s)?e(t[s],t):""}var i=typeof o2=="function"?o2(t):[],o;if(Yl){o={};for(var a=0;a<i.length;a++)o["$"+i[a]]=i[a]}for(var u in t)Ca(t,u)&&(r&&String(Number(u))===u&&u<t.length||Yl&&o["$"+u]instanceof Symbol||(Z6.call(/[^\w$]/,u)?n.push(e(u,t)+": "+e(t[u],t)):n.push(u+": "+e(t[u],t))));if(typeof o2=="function")for(var c=0;c<i.length;c++)Q6.call(t,i[c])&&n.push("["+e(i[c])+"]: "+e(t[i[c]],t));return n}});var ec=v((M2e,sk)=>{"use strict";sk.exports=function(e){return typeof e=="string"||typeof e=="symbol"}});var ak=v((j2e,ok)=>{"use strict";ok.exports=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"}});var Ui=v((q2e,uk)=>{"use strict";var Dre=ak();uk.exports=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":Dre(e)}});var Op=v((L2e,lk)=>{"use strict";var ck=yt(),Are=Pp(),xre=ec(),Cre=Ui();lk.exports=function(e,r){if(Cre(e)!=="Object")throw new ck("Assertion failed: Type(O) is not Object");if(!xre(r))throw new ck("Assertion failed: IsPropertyKey(P) is not true, got "+Are(r));return e[r]}});var fk=v((U2e,dk)=>{"use strict";var Pre=yt(),Ore=Pp(),Bre=ec();dk.exports=function(e,r){if(!Bre(r))throw new Pre("Assertion failed: IsPropertyKey(P) is not true, got "+Ore(r));return e[r]}});var w2=v((V2e,mk)=>{"use strict";var hk=Function.prototype.toString,Zl=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,g2,Ly;if(typeof Zl=="function"&&typeof Object.defineProperty=="function")try{g2=Object.defineProperty({},"length",{get:function(){throw Ly}}),Ly={},Zl(function(){throw 42},null,g2)}catch(t){t!==Ly&&(Zl=null)}else Zl=null;var Tre=/^\s*class\b/,b2=function(e){try{var r=hk.call(e);return Tre.test(r)}catch{return!1}},y2=function(e){try{return b2(e)?!1:(hk.call(e),!0)}catch{return!1}},Uy=Object.prototype.toString,Fre="[object Object]",Ire="[object Function]",kre="[object GeneratorFunction]",Rre="[object HTMLAllCollection]",$re="[object HTML document.all class]",Nre="[object HTMLCollection]",Mre=typeof Symbol=="function"&&!!Symbol.toStringTag,jre=!(0 in[,]),v2=function(){return!1};typeof document=="object"&&(pk=document.all,Uy.call(pk)===Uy.call(document.all)&&(v2=function(e){if((jre||!e)&&(typeof e>"u"||typeof e=="object"))try{var r=Uy.call(e);return(r===Rre||r===$re||r===Nre||r===Fre)&&e("")==null}catch{}return!1}));var pk;mk.exports=Zl?function(e){if(v2(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Zl(e,null,g2)}catch(r){if(r!==Ly)return!1}return!b2(e)&&y2(e)}:function(e){if(v2(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Mre)return y2(e);if(b2(e))return!1;var r=Uy.call(e);return r!==Ire&&r!==kre&&!/^\[object HTML/.test(r)?!1:y2(e)}});var Vy=v((K2e,yk)=>{"use strict";yk.exports=w2()});var wk=v((H2e,vk)=>{"use strict";var gk=yt(),qre=fk(),Lre=Vy(),Ure=ec(),bk=Pp();vk.exports=function(e,r){if(!Ure(r))throw new gk("Assertion failed: IsPropertyKey(P) is not true");var n=qre(e,r);if(n!=null){if(!Lre(n))throw new gk(bk(r)+" is not a function: "+bk(n));return n}}});var Ky=v((W2e,Ek)=>{"use strict";var Vre=K_();Ek.exports=function(){return Vre()&&!!Symbol.toStringTag}});var D2=v((z2e,Ak)=>{"use strict";var E2=zn(),_k=Ky()(),Sk,Dk,_2,S2;_k&&(Sk=E2("Object.prototype.hasOwnProperty"),Dk=E2("RegExp.prototype.exec"),_2={},Hy=function(){throw _2},S2={toString:Hy,valueOf:Hy},typeof Symbol.toPrimitive=="symbol"&&(S2[Symbol.toPrimitive]=Hy));var Hy,Kre=E2("Object.prototype.toString"),Hre=Object.getOwnPropertyDescriptor,Wre="[object RegExp]";Ak.exports=_k?function(e){if(!e||typeof e!="object")return!1;var r=Hre(e,"lastIndex"),n=r&&Sk(r,"value");if(!n)return!1;try{Dk(e,S2)}catch(s){return s===_2}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:Kre(e)===Wre}});var A2=v((J2e,xk)=>{"use strict";xk.exports=function(e){return!!e}});var Ok=v((G2e,Pk)=>{"use strict";var zre=Er(),Ck=zre("%Symbol.match%",!0),Jre=D2(),Gre=A2();Pk.exports=function(e){if(!e||typeof e!="object")return!1;if(Ck){var r=e[Ck];if(typeof r<"u")return Gre(r)}return Jre(e)}});var Bp=v((X2e,Bk)=>{"use strict";var Xre=Er(),Yre=Xre("%String%"),Zre=yt();Bk.exports=function(e){if(typeof e=="symbol")throw new Zre("Cannot convert a Symbol value to a string");return Yre(e)}});var Fk=v((Y2e,Tk)=>{"use strict";var Qre=yt();Tk.exports=function(e,r){if(e==null)throw new Qre(r||"Cannot call method on "+e);return e}});var Wy=v((Z2e,Ik)=>{"use strict";Ik.exports=Fk()});var Rk=v((Q2e,kk)=>{"use strict";var Fp=function(){return typeof(function(){}).name=="string"},Tp=Object.getOwnPropertyDescriptor;if(Tp)try{Tp([],"length")}catch{Tp=null}Fp.functionsHaveConfigurableNames=function(){if(!Fp()||!Tp)return!1;var e=Tp(function(){},"name");return!!e&&!!e.configurable};var ene=Function.prototype.bind;Fp.boundFunctionsHaveNames=function(){return Fp()&&typeof ene=="function"&&(function(){}).bind().name!==""};kk.exports=Fp});var x2=v((eSe,Nk)=>{"use strict";var $k=Iy(),tne=Ep()(),rne=Rk().functionsHaveConfigurableNames(),nne=yt();Nk.exports=function(e,r){if(typeof e!="function")throw new nne("`fn` is not a function");var n=arguments.length>2&&!!arguments[2];return(!n||rne)&&(tne?$k(e,"name",r,!0,!0):$k(e,"name",r)),e}});var C2=v((tSe,Mk)=>{"use strict";var ine=x2(),sne=yt(),one=Object;Mk.exports=ine(function(){if(this==null||this!==one(this))throw new sne("RegExp.prototype.flags getter called on non-object");var e="";return this.hasIndices&&(e+="d"),this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.unicodeSets&&(e+="v"),this.sticky&&(e+="y"),e},"get flags",!0)});var P2=v((rSe,jk)=>{"use strict";var ane=C2(),une=xa().supportsDescriptors,cne=Object.getOwnPropertyDescriptor;jk.exports=function(){if(une&&/a/mig.flags==="gim"){var e=cne(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var r="",n={};if(Object.defineProperty(n,"hasIndices",{get:function(){r+="d"}}),Object.defineProperty(n,"sticky",{get:function(){r+="y"}}),r==="dy")return e.get}}return ane}});var Uk=v((nSe,Lk)=>{"use strict";var lne=xa().supportsDescriptors,dne=P2(),fne=Object.getOwnPropertyDescriptor,pne=Object.defineProperty,hne=TypeError,qk=Object.getPrototypeOf,mne=/a/;Lk.exports=function(){if(!lne||!qk)throw new hne("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=dne(),r=qk(mne),n=fne(r,"flags");return(!n||n.get!==e)&&pne(r,"flags",{configurable:!0,enumerable:!1,get:e}),e}});var O2=v((iSe,Hk)=>{"use strict";var yne=xa(),gne=_p(),bne=C2(),Vk=P2(),vne=Uk(),Kk=gne(Vk());yne(Kk,{getPolyfill:Vk,implementation:bne,shim:vne});Hk.exports=Kk});var B2=v((sSe,Wk)=>{"use strict";Wk.exports=function(e){return typeof e=="number"&&e>=55296&&e<=56319}});var T2=v((oSe,zk)=>{"use strict";zk.exports=function(e){return typeof e=="number"&&e>=56320&&e<=57343}});var Xk=v((aSe,Gk)=>{"use strict";var wne=Er(),Ene=yt(),Jk=wne("%String.fromCharCode%"),_ne=B2(),Sne=T2();Gk.exports=function(e,r){if(!_ne(e)||!Sne(r))throw new Ene("Assertion failed: `lead` must be a leading surrogate char code, and `trail` must be a trailing surrogate char code");return Jk(e)+Jk(r)}});var r4=v((uSe,t4)=>{"use strict";var Yk=yt(),e4=zn(),Dne=B2(),Zk=T2(),Ane=Xk(),xne=e4("String.prototype.charAt"),Qk=e4("String.prototype.charCodeAt");t4.exports=function(e,r){if(typeof e!="string")throw new Yk("Assertion failed: `string` must be a String");var n=e.length;if(r<0||r>=n)throw new Yk("Assertion failed: `position` must be >= 0, and < the length of `string`");var s=Qk(e,r),i=xne(e,r),o=Dne(s),a=Zk(s);if(!o&&!a)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!1};if(a||r+1===n)return{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0};var u=Qk(e,r+1);return Zk(u)?{"[[CodePoint]]":Ane(s,u),"[[CodeUnitCount]]":2,"[[IsUnpairedSurrogate]]":!1}:{"[[CodePoint]]":i,"[[CodeUnitCount]]":1,"[[IsUnpairedSurrogate]]":!0}}});var Ip=v((cSe,n4)=>{"use strict";n4.exports=Number.isNaN||function(e){return e!==e}});var F2=v((lSe,i4)=>{"use strict";var Cne=Ip();i4.exports=function(t){return(typeof t=="number"||typeof t=="bigint")&&!Cne(t)&&t!==1/0&&t!==-1/0}});var a4=v((dSe,o4)=>{"use strict";var s4=Er(),Pne=s4("%Math.abs%"),One=s4("%Math.floor%"),Bne=Ip(),Tne=F2();o4.exports=function(e){if(typeof e!="number"||Bne(e)||!Tne(e))return!1;var r=Pne(e);return One(r)===r}});var I2=v((fSe,u4)=>{"use strict";u4.exports=Number.MAX_SAFE_INTEGER||9007199254740991});var l4=v((pSe,c4)=>{"use strict";var Fne=r4(),Ine=a4(),kne=I2(),k2=yt();c4.exports=function(e,r,n){if(typeof e!="string")throw new k2("Assertion failed: `S` must be a String");if(!Ine(r)||r<0||r>kne)throw new k2("Assertion failed: `length` must be an integer >= 0 and <= 2**53");if(typeof n!="boolean")throw new k2("Assertion failed: `unicode` must be a Boolean");if(!n)return r+1;var s=e.length;if(r+1>=s)return r+1;var i=Fne(e,r);return r+i["[[CodeUnitCount]]"]}});var f4=v((hSe,d4)=>{"use strict";var Rne=yt();d4.exports=function(e,r){if(typeof r!="boolean")throw new Rne("Assertion failed: Type(done) is not Boolean");return{value:e,done:r}}});var R2=v((mSe,m4)=>{"use strict";var $ne=Ep(),p4=wp(),h4=$ne.hasArrayLengthDefineBug(),Nne=h4&&t2(),Mne=zn(),jne=Mne("Object.prototype.propertyIsEnumerable");m4.exports=function(e,r,n,s,i,o){if(!p4){if(!e(o)||!o["[[Configurable]]"]||!o["[[Writable]]"]||i in s&&jne(s,i)!==!!o["[[Enumerable]]"])return!1;var a=o["[[Value]]"];return s[i]=a,r(s[i],a)}return h4&&i==="length"&&"[[Value]]"in o&&Nne(s)&&s.length!==o["[[Value]]"]?(s.length=o["[[Value]]"],s.length===o["[[Value]]"]):(p4(s,i,n(o)),!0)}});var zy=v((ySe,y4)=>{"use strict";var qne=yt(),kp=Yu(),Lne={__proto__:null,"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};y4.exports=function(e){if(!e||typeof e!="object")return!1;for(var r in e)if(kp(e,r)&&!Lne[r])return!1;var n=kp(e,"[[Value]]")||kp(e,"[[Writable]]"),s=kp(e,"[[Get]]")||kp(e,"[[Set]]");if(n&&s)throw new qne("Property Descriptors may not be both accessor and data descriptors");return!0}});var b4=v((gSe,g4)=>{"use strict";g4.exports=function(e){if(typeof e>"u")return e;var r={};return"[[Value]]"in e&&(r.value=e["[[Value]]"]),"[[Writable]]"in e&&(r.writable=!!e["[[Writable]]"]),"[[Get]]"in e&&(r.get=e["[[Get]]"]),"[[Set]]"in e&&(r.set=e["[[Set]]"]),"[[Enumerable]]"in e&&(r.enumerable=!!e["[[Enumerable]]"]),"[[Configurable]]"in e&&(r.configurable=!!e["[[Configurable]]"]),r}});var $2=v((bSe,v4)=>{"use strict";var Une=yt(),Vne=zy(),Kne=b4();v4.exports=function(e){if(typeof e<"u"&&!Vne(e))throw new Une("Assertion failed: `Desc` must be a Property Descriptor");return Kne(e)}});var N2=v((vSe,E4)=>{"use strict";var Hne=yt(),w4=Yu(),Wne=zy();E4.exports=function(e){if(typeof e>"u")return!1;if(!Wne(e))throw new Hne("Assertion failed: `Desc` must be a Property Descriptor");return!(!w4(e,"[[Value]]")&&!w4(e,"[[Writable]]"))}});var Jy=v((wSe,S4)=>{"use strict";var _4=Ip();S4.exports=function(e,r){return e===r?e===0?1/e===1/r:!0:_4(e)&&_4(r)}});var x4=v((ESe,A4)=>{"use strict";var D4=yt(),zne=R2(),Jne=$2(),Gne=N2(),Xne=ec(),Yne=Jy(),Zne=Ui();A4.exports=function(e,r,n){if(Zne(e)!=="Object")throw new D4("Assertion failed: Type(O) is not Object");if(!Xne(r))throw new D4("Assertion failed: IsPropertyKey(P) is not true");var s={"[[Configurable]]":!0,"[[Enumerable]]":!1,"[[Value]]":n,"[[Writable]]":!0};return zne(Gne,Yne,Jne,e,r,s)}});var P4=v((_Se,C4)=>{"use strict";C4.exports=function(e,r){for(var n=0;n<e.length;n+=1)r(e[n],n,e)}});var T4=v((SSe,B4)=>{"use strict";var O4=Er(),Ql=zn(),Qne=Pp(),eie=yt(),Gy=O4("%WeakMap%",!0),Xy=O4("%Map%",!0),tie=Ql("WeakMap.prototype.get",!0),rie=Ql("WeakMap.prototype.set",!0),nie=Ql("WeakMap.prototype.has",!0),iie=Ql("Map.prototype.get",!0),sie=Ql("Map.prototype.set",!0),oie=Ql("Map.prototype.has",!0),M2=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},aie=function(t,e){var r=M2(t,e);return r&&r.value},uie=function(t,e,r){var n=M2(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},cie=function(t,e){return!!M2(t,e)};B4.exports=function(){var e,r,n,s={assert:function(i){if(!s.has(i))throw new eie("Side channel does not contain "+Qne(i))},get:function(i){if(Gy&&i&&(typeof i=="object"||typeof i=="function")){if(e)return tie(e,i)}else if(Xy){if(r)return iie(r,i)}else if(n)return aie(n,i)},has:function(i){if(Gy&&i&&(typeof i=="object"||typeof i=="function")){if(e)return nie(e,i)}else if(Xy){if(r)return oie(r,i)}else if(n)return cie(n,i);return!1},set:function(i,o){Gy&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Gy),rie(e,i,o)):Xy?(r||(r=new Xy),sie(r,i,o)):(n||(n={key:{},next:null}),uie(n,i,o))}};return s}});var q2=v((DSe,F4)=>{"use strict";var lie=Yu(),Rp=T4()(),ko=yt(),j2={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ko("`O` is not an object");if(typeof e!="string")throw new ko("`slot` must be a string");if(Rp.assert(t),!j2.has(t,e))throw new ko("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ko("`O` is not an object");if(typeof e!="string")throw new ko("`slot` must be a string");var r=Rp.get(t);return r&&r["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ko("`O` is not an object");if(typeof e!="string")throw new ko("`slot` must be a string");var r=Rp.get(t);return!!r&&lie(r,"$"+e)},set:function(t,e,r){if(!t||typeof t!="object"&&typeof t!="function")throw new ko("`O` is not an object");if(typeof e!="string")throw new ko("`slot` must be a string");var n=Rp.get(t);n||(n={},Rp.set(t,n)),n["$"+e]=r}};Object.freeze&&Object.freeze(j2);F4.exports=j2});var $4=v((ASe,R4)=>{"use strict";var die=Er(),I4=die("%Object.create%",!0),k4=yt(),fie=Py(),pie=r2(),hie=Ui(),mie=P4(),yie=q2(),gie=W_()();R4.exports=function(e){if(e!==null&&hie(e)!=="Object")throw new k4("Assertion failed: `proto` must be null or an object");var r=arguments.length<2?[]:arguments[1];if(!pie(r))throw new k4("Assertion failed: `additionalInternalSlotsList` must be an Array");var n;if(I4)n=I4(e);else if(gie)n={__proto__:e};else{if(e===null)throw new fie("native Object.create support is required to create null objects");var s=function(){};s.prototype=e,n=new s}return r.length>0&&mie(r,function(i){yie.set(n,i,void 0)}),n}});var M4=v((xSe,N4)=>{"use strict";var L2=yt(),bie=zn()("RegExp.prototype.exec"),vie=n2(),wie=Op(),Eie=Vy(),_ie=Ui();N4.exports=function(e,r){if(_ie(e)!=="Object")throw new L2("Assertion failed: `R` must be an Object");if(typeof r!="string")throw new L2("Assertion failed: `S` must be a String");var n=wie(e,"exec");if(Eie(n)){var s=vie(n,e,[r]);if(typeof s=="object")return s;throw new L2('"exec" method must return `null` or an Object')}return bie(e,r)}});var U2=v((CSe,L4)=>{"use strict";var Yy=yt(),Sie=ec(),j4=Jy(),Die=Ui(),q4=function(){try{return delete[].length,!0}catch{return!1}}();L4.exports=function(e,r,n,s){if(Die(e)!=="Object")throw new Yy("Assertion failed: `O` must be an Object");if(!Sie(r))throw new Yy("Assertion failed: `P` must be a Property Key");if(typeof s!="boolean")throw new Yy("Assertion failed: `Throw` must be a Boolean");if(s){if(e[r]=n,q4&&!j4(e[r],n))throw new Yy("Attempted to assign to readonly property.");return!0}try{return e[r]=n,q4?j4(e[r],n):!0}catch{return!1}}});var V4=v((PSe,U4)=>{"use strict";U4.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var H4=v((OSe,K4)=>{"use strict";K4.exports=function(e){return e===null||typeof e!="function"&&typeof e!="object"}});var z4=v((BSe,W4)=>{"use strict";var Aie=Date.prototype.getDay,xie=function(e){try{return Aie.call(e),!0}catch{return!1}},Cie=Object.prototype.toString,Pie="[object Date]",Oie=Ky()();W4.exports=function(e){return typeof e!="object"||e===null?!1:Oie?xie(e):Cie.call(e)===Pie}});var Y4=v((TSe,V2)=>{"use strict";var Bie=Object.prototype.toString,Tie=Xu()();Tie?(J4=Symbol.prototype.toString,G4=/^Symbol\(.*\)$/,X4=function(e){return typeof e.valueOf()!="symbol"?!1:G4.test(J4.call(e))},V2.exports=function(e){if(typeof e=="symbol")return!0;if(Bie.call(e)!=="[object Symbol]")return!1;try{return X4(e)}catch{return!1}}):V2.exports=function(e){return!1};var J4,G4,X4});var tR=v((FSe,eR)=>{"use strict";var Fie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",K2=H4(),Q4=w2(),Iie=z4(),Z4=Y4(),kie=function(e,r){if(typeof e>"u"||e===null)throw new TypeError("Cannot call method on "+e);if(typeof r!="string"||r!=="number"&&r!=="string")throw new TypeError('hint must be "string" or "number"');var n=r==="string"?["toString","valueOf"]:["valueOf","toString"],s,i,o;for(o=0;o<n.length;++o)if(s=e[n[o]],Q4(s)&&(i=s.call(e),K2(i)))return i;throw new TypeError("No default value")},Rie=function(e,r){var n=e[r];if(n!==null&&typeof n<"u"){if(!Q4(n))throw new TypeError(n+" returned for property "+r+" of object "+e+" is not a function");return n}};eR.exports=function(e){if(K2(e))return e;var r="default";arguments.length>1&&(arguments[1]===String?r="string":arguments[1]===Number&&(r="number"));var n;if(Fie&&(Symbol.toPrimitive?n=Rie(e,Symbol.toPrimitive):Z4(e)&&(n=Symbol.prototype.valueOf)),typeof n<"u"){var s=n.call(e,r);if(K2(s))return s;throw new TypeError("unable to convert exotic object to primitive")}return r==="default"&&(Iie(e)||Z4(e))&&(r="string"),kie(e,r==="default"?"number":r)}});var iR=v((ISe,nR)=>{"use strict";var rR=tR();nR.exports=function(e){return arguments.length>1?rR(e,arguments[1]):rR(e)}});var oR=v((kSe,sR)=>{"use strict";var $ie=zn(),Nie=D2(),Mie=$ie("RegExp.prototype.exec"),jie=yt();sR.exports=function(e){if(!Nie(e))throw new jie("`regex` must be a RegExp");return function(n){return Mie(e,n)!==null}}});var H2=v((RSe,cR)=>{"use strict";var qie=Wy(),Lie=Bp(),Uie=zn(),aR=Uie("String.prototype.replace"),uR=/^\s$/.test("\u180E"),Vie=uR?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Kie=uR?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;cR.exports=function(){var e=Lie(qie(this));return aR(aR(e,Vie,""),Kie,"")}});var W2=v(($Se,dR)=>{"use strict";var Hie=H2(),lR="\u200B",ed="\u180E";dR.exports=function(){return String.prototype.trim&&lR.trim()===lR&&ed.trim()===ed&&("_"+ed).trim()==="_"+ed&&(ed+"_").trim()===ed+"_"?String.prototype.trim:Hie}});var pR=v((NSe,fR)=>{"use strict";var Wie=xa(),zie=W2();fR.exports=function(){var e=zie();return Wie(String.prototype,{trim:e},{trim:function(){return String.prototype.trim!==e}}),e}});var gR=v((MSe,yR)=>{"use strict";var Jie=_p(),Gie=xa(),Xie=Wy(),Yie=H2(),hR=W2(),Zie=pR(),Qie=Jie(hR()),mR=function(e){return Xie(e),Qie(e)};Gie(mR,{getPolyfill:hR,implementation:Yie,shim:Zie});yR.exports=mR});var ER=v((jSe,wR)=>{"use strict";var J2=Er(),z2=J2("%Number%"),ese=J2("%RegExp%"),tse=yt(),bR=J2("%parseInt%"),rse=zn(),Zy=oR(),vR=rse("String.prototype.slice"),nse=Zy(/^0b[01]+$/i),ise=Zy(/^0o[0-7]+$/i),sse=Zy(/^[-+]0x[0-9a-f]+$/i),ose=["\x85","\u200B","\uFFFE"].join(""),ase=new ese("["+ose+"]","g"),use=Zy(ase),cse=gR();wR.exports=function t(e){if(typeof e!="string")throw new tse("Assertion failed: `argument` is not a String");if(nse(e))return z2(bR(vR(e,2),2));if(ise(e))return z2(bR(vR(e,2),8));if(use(e)||sse(e))return NaN;var r=cse(e);return r!==e?t(r):z2(e)}});var AR=v((qSe,DR)=>{"use strict";var lse=Er(),_R=yt(),SR=lse("%Number%"),dse=V4(),fse=iR(),pse=ER();DR.exports=function(e){var r=dse(e)?e:fse(e,SR);if(typeof r=="symbol")throw new _R("Cannot convert a Symbol value to a number");if(typeof r=="bigint")throw new _R("Conversion from 'BigInt' to 'number' is not allowed.");return typeof r=="string"?pse(r):SR(r)}});var CR=v((LSe,xR)=>{"use strict";var hse=Math.floor;xR.exports=function(e){return typeof e=="bigint"?e:hse(e)}});var BR=v((USe,OR)=>{"use strict";var PR=CR(),mse=yt();OR.exports=function(e){if(typeof e!="number"&&typeof e!="bigint")throw new mse("argument must be a Number or a BigInt");var r=e<0?-PR(-e):PR(e);return r===0?0:r}});var FR=v((VSe,TR)=>{"use strict";var yse=AR(),gse=BR(),bse=Ip(),vse=F2();TR.exports=function(e){var r=yse(e);return bse(r)||r===0?0:vse(r)?gse(r):r}});var G2=v((KSe,kR)=>{"use strict";var IR=I2(),wse=FR();kR.exports=function(e){var r=wse(e);return r<=0?0:r>IR?IR:r}});var NR=v((HSe,$R)=>{"use strict";var Ese=Er(),RR=Ese("%Object.defineProperty%",!0),_se=Ky()(),Sse=Yu(),Qy=_se?Symbol.toStringTag:null;$R.exports=function(e,r){var n=arguments.length>2&&arguments[2]&&arguments[2].force;Qy&&(n||!Sse(e,Qy))&&(RR?RR(e,Qy,{configurable:!0,enumerable:!1,value:r,writable:!1}):e[Qy]=r)}});var VR=v((WSe,UR)=>{"use strict";var Dse=Er(),Ase=Xu()(),$p=yt(),MR=Dse("%IteratorPrototype%",!0),xse=l4(),eg=f4(),LR=x4(),jR=Op(),Cse=$4(),Pse=M4(),Ose=U2(),Bse=G2(),Tse=Bp(),Fse=Ui(),Gr=q2(),Ise=NR(),tc=function(e,r,n,s){if(typeof r!="string")throw new $p("`S` must be a string");if(typeof n!="boolean")throw new $p("`global` must be a boolean");if(typeof s!="boolean")throw new $p("`fullUnicode` must be a boolean");Gr.set(this,"[[IteratingRegExp]]",e),Gr.set(this,"[[IteratedString]]",r),Gr.set(this,"[[Global]]",n),Gr.set(this,"[[Unicode]]",s),Gr.set(this,"[[Done]]",!1)};MR&&(tc.prototype=Cse(MR));var kse=function(){var e=this;if(Fse(e)!=="Object")throw new $p("receiver must be an object");if(!(e instanceof tc)||!Gr.has(e,"[[IteratingRegExp]]")||!Gr.has(e,"[[IteratedString]]")||!Gr.has(e,"[[Global]]")||!Gr.has(e,"[[Unicode]]")||!Gr.has(e,"[[Done]]"))throw new $p('"this" value must be a RegExpStringIterator instance');if(Gr.get(e,"[[Done]]"))return eg(void 0,!0);var r=Gr.get(e,"[[IteratingRegExp]]"),n=Gr.get(e,"[[IteratedString]]"),s=Gr.get(e,"[[Global]]"),i=Gr.get(e,"[[Unicode]]"),o=Pse(r,n);if(o===null)return Gr.set(e,"[[Done]]",!0),eg(void 0,!0);if(s){var a=Tse(jR(o,"0"));if(a===""){var u=Bse(jR(r,"lastIndex")),c=xse(n,u,i);Ose(r,"lastIndex",c,!0)}return eg(o,!1)}return Gr.set(e,"[[Done]]",!0),eg(o,!1)};LR(tc.prototype,"next",kse);Ase&&(Ise(tc.prototype,"RegExp String Iterator"),Symbol.iterator&&typeof tc.prototype[Symbol.iterator]!="function"&&(qR=function(){return this},LR(tc.prototype,Symbol.iterator,qR)));var qR;UR.exports=function(e,r,n,s){return new tc(e,r,n,s)}});var HR=v((zSe,KR)=>{"use strict";KR.exports=Er()});var JR=v((JSe,zR)=>{"use strict";var Ms=Yu(),tg=yt(),Rse=Ui(),X2=A2(),WR=Vy();zR.exports=function(e){if(Rse(e)!=="Object")throw new tg("ToPropertyDescriptor requires an object");var r={};if(Ms(e,"enumerable")&&(r["[[Enumerable]]"]=X2(e.enumerable)),Ms(e,"configurable")&&(r["[[Configurable]]"]=X2(e.configurable)),Ms(e,"value")&&(r["[[Value]]"]=e.value),Ms(e,"writable")&&(r["[[Writable]]"]=X2(e.writable)),Ms(e,"get")){var n=e.get;if(typeof n<"u"&&!WR(n))throw new tg("getter must be a function");r["[[Get]]"]=n}if(Ms(e,"set")){var s=e.set;if(typeof s<"u"&&!WR(s))throw new tg("setter must be a function");r["[[Set]]"]=s}if((Ms(r,"[[Get]]")||Ms(r,"[[Set]]"))&&(Ms(r,"[[Value]]")||Ms(r,"[[Writable]]")))throw new tg("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return r}});var YR=v((GSe,XR)=>{"use strict";var Y2=yt(),GR=zy(),$se=R2(),Nse=$2(),Mse=N2(),jse=ec(),qse=Jy(),Lse=JR(),Use=Ui();XR.exports=function(e,r,n){if(Use(e)!=="Object")throw new Y2("Assertion failed: Type(O) is not Object");if(!jse(r))throw new Y2("Assertion failed: IsPropertyKey(P) is not true");var s=GR(n)?n:Lse(n);if(!GR(s))throw new Y2("Assertion failed: Desc is not a valid Property Descriptor");return $se(Mse,qse,Nse,e,r,s)}});var QR=v((XSe,eS)=>{"use strict";var Vse=HR(),ZR=Vse("%Reflect.construct%",!0),rg=YR();try{rg({},"",{"[[Get]]":function(){}})}catch{rg=null}rg&&ZR?(Z2={},Q2={},rg(Q2,"length",{"[[Get]]":function(){throw Z2},"[[Enumerable]]":!0}),eS.exports=function(e){try{ZR(e,Q2)}catch(r){return r===Z2}}):eS.exports=function(e){return typeof e=="function"&&!!e.prototype};var Z2,Q2});var n$=v((YSe,r$)=>{"use strict";var Kse=Er(),e$=Kse("%Symbol.species%",!0),tS=yt(),Hse=QR(),t$=Ui();r$.exports=function(e,r){if(t$(e)!=="Object")throw new tS("Assertion failed: Type(O) is not Object");var n=e.constructor;if(typeof n>"u")return r;if(t$(n)!=="Object")throw new tS("O.constructor is not an Object");var s=e$?n[e$]:void 0;if(s==null)return r;if(Hse(s))return s;throw new tS("no constructor found")}});var c$=v((ZSe,u$)=>{"use strict";var Wse=VR(),s$=Op(),zse=U2(),Jse=n$(),Gse=G2(),o$=Bp(),Xse=Ui(),Yse=O2(),Zse=x2(),Qse=zn(),i$=Qse("String.prototype.indexOf"),a$=RegExp,eoe="flags"in RegExp.prototype,toe=function(e,r){var n,s="flags"in r?s$(r,"flags"):o$(Yse(r));return eoe&&typeof s=="string"?n=new e(r,s):e===a$?n=new e(r.source,s):n=new e(r,s),{flags:s,matcher:n}},roe=Zse(function(e){var r=this;if(Xse(r)!=="Object")throw new TypeError('"this" value must be an Object');var n=o$(e),s=Jse(r,a$),i=toe(s,r),o=i.flags,a=i.matcher,u=Gse(s$(r,"lastIndex"));zse(a,"lastIndex",u,!0);var c=i$(o,"g")>-1,l=i$(o,"u")>-1;return Wse(a,n,c,l)},"[Symbol.matchAll]",!0);u$.exports=roe});var rS=v((QSe,l$)=>{"use strict";var noe=Xu()(),ioe=c$();l$.exports=function(){return!noe||typeof Symbol.matchAll!="symbol"||typeof RegExp.prototype[Symbol.matchAll]!="function"?ioe:RegExp.prototype[Symbol.matchAll]}});var nS=v((eDe,y$)=>{"use strict";var d$=n2(),soe=Op(),ooe=wk(),m$=Ok(),f$=Bp(),p$=Wy(),aoe=zn(),uoe=Xu()(),coe=O2(),loe=aoe("String.prototype.indexOf"),doe=rS(),h$=function(e){var r=doe();if(uoe&&typeof Symbol.matchAll=="symbol"){var n=ooe(e,Symbol.matchAll);return n===RegExp.prototype[Symbol.matchAll]&&n!==r?r:n}if(m$(e))return r};y$.exports=function(e){var r=p$(this);if(typeof e<"u"&&e!==null){var n=m$(e);if(n){var s="flags"in e?soe(e,"flags"):coe(e);if(p$(s),loe(f$(s),"g")<0)throw new TypeError("matchAll requires a global regular expression")}var i=h$(e);if(typeof i<"u")return d$(i,e,[r])}var o=f$(r),a=new RegExp(e,"g");return d$(h$(a),a,[o])}});var iS=v((tDe,g$)=>{"use strict";var foe=nS();g$.exports=function(){if(String.prototype.matchAll)try{"".matchAll(RegExp.prototype)}catch{return String.prototype.matchAll}return foe}});var E$=v((rDe,w$)=>{"use strict";var sS=xa(),poe=Xu()(),hoe=iS(),moe=rS(),b$=Object.defineProperty,v$=Object.getOwnPropertyDescriptor;w$.exports=function(){var e=hoe();if(sS(String.prototype,{matchAll:e},{matchAll:function(){return String.prototype.matchAll!==e}}),poe){var r=Symbol.matchAll||(Symbol.for?Symbol.for("Symbol.matchAll"):Symbol("Symbol.matchAll"));if(sS(Symbol,{matchAll:r},{matchAll:function(){return Symbol.matchAll!==r}}),b$&&v$){var n=v$(Symbol,r);(!n||n.configurable)&&b$(Symbol,r,{configurable:!1,enumerable:!1,value:r,writable:!1})}var s=moe(),i={};i[r]=s;var o={};o[r]=function(){return RegExp.prototype[r]!==s},sS(RegExp.prototype,i,o)}return e}});var oS=v((nDe,D$)=>{"use strict";var yoe=_p(),goe=xa(),_$=nS(),boe=iS(),voe=E$(),S$=yoe(_$);goe(S$,{getPolyfill:boe,implementation:_$,shim:voe});D$.exports=S$});var aS=v(ng=>{"use strict";Object.defineProperty(ng,"__esModule",{value:!0});ng.JsonPathUtils=void 0;var woe=mi(),Np=class t{static extractInputField(e,r){let n=[];if(r){for(let s of r)if(n=woe.JSONPath.nodes(e,s),n.length)break}return n}static changePropertyNameRecursively(e,r,n){let s=t.extractInputField(e,["$.."+r]);for(let i of s)this.copyResultPathToDestinationDefinition(i.path,e,n)}static copyResultPathToDestinationDefinition(e,r,n){let s=r;for(let i=1;i<e.length;i++)if(i+1<e.length&&(s=s[e[i]]),e.length==i+1){s[n]=s[e[i]],delete s[e[i]];break}}static changeSpecialPathsRecursively(e){let r=t.extractInputField(e,["$..path"]);for(let n of r)this.modifyPathsWithSpecialCharacter(n.path,e)}static modifyPathsWithSpecialCharacter(e,r){let n=r;for(let s=1;s<e.length;s++)if(s+1<e.length&&(n=n[e[s]]),e.length==s+1){let i=n[e[s]],o=[];for(let a=0;a<i.length;a++)o.push(this.modifyPathWithSpecialCharacter(i[a]));n[e[s]]=o;break}}static modifyPathWithSpecialCharacter(e){let r=this.matchAll(e,this.REGEX_PATH);return e=this.modifyPathRecursive(r,e),e}static modifyPathRecursive(e,r){let n=e.next(),s=!1;for(;n&&!n.done&&!s;){let i=n.value.index;if(i&&i==1)r=r.charAt(0)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r);else if(i&&i>1&&r.substring(i-2,i)!=="['"&&r.substring(i-2,i)!=='["')if(r.substring(i-2,i)===".."){r=r.substring(0,i-2)+"..['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0;let o=this.matchAll(r,this.REGEX_PATH);this.modifyPathRecursive(o,r)}else r.charAt(i-1)==="."&&(r=r.substring(0,i-1)+"['"+n.value[0]+"']"+r.substring(i+n.value[0].length),s=!0,this.modifyPathRecursive(e,r));n=e.next()}return r}};ng.JsonPathUtils=Np;Np.matchAll=oS();Np.REGEX_PATH=/@\w+/g});var cS=v(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});ig.ObjectUtils=void 0;var uS=class t{static asArray(e){return Array.isArray(e)?e:[e]}static isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}static isUrlAbsolute(e){let r=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;t.isString(e)&&r.test(e)}static isString(e){return typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"}static getDistinctFieldInObject(e,r){let n=e.map(s=>s[r]);return Array.from(new Set(n))}};ig.ObjectUtils=uS});var A$=v(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.ObjectValidationUtils=void 0;var lS=class{static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static isValidDIDURI(e){let r="[a-zA-Z-\\._~]|%[0-9a-fA-F]{2}|[!$&'()*+,;=:@]",n="^did:([a-z0-9]+)(:([a-zA-Z0-9\\.\\-_]|%[0-9a-fA-F]{2})+)+(/("+r+")*)?";return""+r+r,new RegExp(n).test(e)}};sg.ObjectValidationUtils=lS});var hS=v(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.PEVersion=Ro.InternalPresentationDefinitionV2=Ro.InternalPresentationDefinitionV1=void 0;var dS=class{constructor(e,r,n,s,i,o){this.id=e,this.input_descriptors=r,this.format=n,this.name=s,this.purpose=i,this.submission_requirements=o}getVersion(){return pS.v1}};Ro.InternalPresentationDefinitionV1=dS;var fS=class{constructor(e,r,n,s,i,o,a){this.format=n,this.frame=s,this.id=e,this.input_descriptors=r,this.name=i,this.purpose=o,this.submission_requirements=a}getVersion(){return pS.v2}};Ro.InternalPresentationDefinitionV2=fS;var pS;(function(t){t.v1="v1",t.v2="v2"})(pS=Ro.PEVersion||(Ro.PEVersion={}))});var C$=v(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.SSITypesBuilder=void 0;var x$=ay(),og=yi(),mS=hS(),yS=class t{static modelEntityToInternalPresentationDefinitionV1(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new mS.InternalPresentationDefinitionV1(r.id,r.input_descriptors,r.format,r.name,r.purpose,r.submission_requirements)}static modelEntityInternalPresentationDefinitionV2(e){let r=t.createCopyAndModifyPresentationDefinition(e);return new mS.InternalPresentationDefinitionV2(r.id,r.input_descriptors,r.format,r.frame,r.name,r.purpose,r.submission_requirements)}static createCopyAndModifyPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e));return og.JsonPathUtils.changePropertyNameRecursively(r,"_const","const"),og.JsonPathUtils.changePropertyNameRecursively(r,"_enum","enum"),og.JsonPathUtils.changeSpecialPathsRecursively(r),r}static mapExternalVerifiablePresentationToWrappedVP(e){return x$.CredentialMapper.toWrappedVerifiablePresentation(e)}static mapExternalVerifiableCredentialsToWrappedVcs(e){return x$.CredentialMapper.toWrappedVerifiableCredentials(Array.isArray(e)?e:[e])}static toInternalPresentationDefinition(e){let r=JSON.parse(JSON.stringify(e)),n=(0,og.definitionVersionDiscovery)(r);if(n.error)throw n.error;return n.version==mS.PEVersion.v1?t.modelEntityToInternalPresentationDefinitionV1(r):t.modelEntityInternalPresentationDefinitionV2(r)}};ag.SSITypesBuilder=yS});var rc=v($o=>{"use strict";var Eoe=$o&&$o.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gS=$o&&$o.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Eoe(e,t,r)};Object.defineProperty($o,"__esModule",{value:!0});gS(Mi(),$o);gS(hS(),$o);gS(C$(),$o)});var ES=v((lDe,wS)=>{"use strict";wS.exports=vS;wS.exports.default=vS;var Pr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{schema:{type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1},issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},filter:{type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Jt={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},P$=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$","u"),O$=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),B$=new RegExp("additionalProperties","u");function cg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(P$.test(a)||O$.test(a)||B$.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Jt,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(P$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].required,parentSchema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items.type,parentSchema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg.type,parentSchema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"].type,parentSchema:Jt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(O$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Jt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(B$.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Jt.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Jt.type,parentSchema:Jt,data:t};i===null?i=[a]:i.push(a),o++}return cg.errors=i,o===0}var xe={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},bS={validate:Mp};function Mp(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:xe.type,parentSchema:xe,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:xe.oneOf[0].required,parentSchema:xe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:xe.oneOf[0].required,parentSchema:xe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:xe.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xe.oneOf[0].properties.name.type,parentSchema:xe.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xe.oneOf[0].properties.purpose.type,parentSchema:xe.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xe.oneOf[0].properties.rule.type,parentSchema:xe.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:xe.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:xe.oneOf[0].properties.rule.enum,parentSchema:xe.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:xe.oneOf[0].properties.count.type,parentSchema:xe.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:xe.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:xe.oneOf[0].properties.min.type,parentSchema:xe.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:xe.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:xe.oneOf[0].properties.max.type,parentSchema:xe.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:xe.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xe.oneOf[0].properties.from.type,parentSchema:xe.oneOf[0].properties.from,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:xe.oneOf[1].required,parentSchema:xe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:xe.oneOf[1].required,parentSchema:xe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:xe.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xe.oneOf[1].properties.name.type,parentSchema:xe.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xe.oneOf[1].properties.purpose.type,parentSchema:xe.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:xe.oneOf[1].properties.rule.type,parentSchema:xe.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:xe.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:xe.oneOf[1].properties.rule.enum,parentSchema:xe.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:xe.oneOf[1].properties.count.type,parentSchema:xe.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:xe.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:xe.oneOf[1].properties.min.type,parentSchema:xe.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:xe.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:xe.oneOf[1].properties.max.type,parentSchema:xe.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:xe.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let y={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:xe.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}let h=f.length;for(let y=0;y<h;y++)bS.validate(f[y],{instancePath:e+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?bS.validate.errors:i.concat(bS.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:xe.oneOf[1].properties.from_nested.type,parentSchema:xe.oneOf[1].properties.from_nested,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:xe.oneOf,parentSchema:xe,data:t};i===null?i=[f]:i.push(f),o++}return Mp.errors=i,o===0}var re={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},group:{type:"array",items:{type:"string"}},schema:{type:"array",items:{$ref:"#/definitions/schema"}},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id","schema"],additionalProperties:!1},No={type:"object",properties:{uri:{type:"string"},required:{type:"boolean"}},required:["uri"],additionalProperties:!1};function lg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.uri===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"uri"},message:"must have required property 'uri'",schema:No.required,parentSchema:No,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="uri"||a==="required")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:No,data:t};i===null?i=[u]:i.push(u),o++}if(t.uri!==void 0){let a=t.uri;if(typeof a!="string"){let u={instancePath:e+"/uri",schemaPath:"#/properties/uri/type",keyword:"type",params:{type:"string"},message:"must be string",schema:No.properties.uri.type,parentSchema:No.properties.uri,data:a};i===null?i=[u]:i.push(u),o++}}if(t.required!==void 0){let a=t.required;if(typeof a!="boolean"){let u={instancePath:e+"/required",schemaPath:"#/properties/required/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:No.properties.required.type,parentSchema:No.properties.required,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:No.type,parentSchema:No,data:t};i===null?i=[a]:i.push(a),o++}return lg.errors=i,o===0}var ug={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function dg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ug.properties.manifest.type,parentSchema:ug.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ug.type,parentSchema:ug,data:t};i===null?i=[a]:i.push(a),o++}return dg.errors=i,o===0}var pt={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},filter:{$ref:"#/definitions/filter"},predicate:{type:"string",enum:["required","preferred"]}},required:["path","filter","predicate"],additionalProperties:!1}]},nt={type:"object",properties:{type:{type:"string"},format:{type:"string"},pattern:{type:"string"},minimum:{type:["number","string"]},minLength:{type:"integer"},maxLength:{type:"integer"},exclusiveMinimum:{type:["number","string"]},exclusiveMaximum:{type:["number","string"]},maximum:{type:["number","string"]},const:{type:["number","string"]},enum:{type:"array",items:{type:["number","string"]}},not:{type:"object",minProperties:1}},required:["type"],additionalProperties:!1},_oe=Object.prototype.hasOwnProperty;function nc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:nt.required,parentSchema:nt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!_oe.call(nt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:nt,data:t};i===null?i=[u]:i.push(u),o++}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nt.properties.type.type,parentSchema:nt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nt.properties.format.type,parentSchema:nt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:nt.properties.pattern.type,parentSchema:nt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0){let a=t.minimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:nt.properties.minimum.type},message:"must be number,string",schema:nt.properties.minimum.type,parentSchema:nt.properties.minimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minLength!==void 0){let a=t.minLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:nt.properties.minLength.type,parentSchema:nt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a))){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:nt.properties.maxLength.type,parentSchema:nt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMinimum!==void 0){let a=t.exclusiveMinimum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:nt.properties.exclusiveMinimum.type},message:"must be number,string",schema:nt.properties.exclusiveMinimum.type,parentSchema:nt.properties.exclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0){let a=t.exclusiveMaximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:nt.properties.exclusiveMaximum.type},message:"must be number,string",schema:nt.properties.exclusiveMaximum.type,parentSchema:nt.properties.exclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0){let a=t.maximum;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:nt.properties.maximum.type},message:"must be number,string",schema:nt.properties.maximum.type,parentSchema:nt.properties.maximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.const!==void 0){let a=t.const;if(typeof a!="number"&&typeof a!="string"){let u={instancePath:e+"/const",schemaPath:"#/properties/const/type",keyword:"type",params:{type:nt.properties.const.type},message:"must be number,string",schema:nt.properties.const.type,parentSchema:nt.properties.const,data:a};i===null?i=[u]:i.push(u),o++}}if(t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="number"&&typeof l!="string"){let d={instancePath:e+"/enum/"+c,schemaPath:"#/properties/enum/items/type",keyword:"type",params:{type:nt.properties.enum.items.type},message:"must be number,string",schema:nt.properties.enum.items.type,parentSchema:nt.properties.enum.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:nt.properties.enum.type,parentSchema:nt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.not!==void 0){let a=t.not;if(a&&typeof a=="object"&&!Array.isArray(a)){if(Object.keys(a).length<1){let u={instancePath:e+"/not",schemaPath:"#/properties/not/minProperties",keyword:"minProperties",params:{limit:1},message:"must NOT have fewer than 1 properties",schema:1,parentSchema:nt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}else{let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nt.properties.not.type,parentSchema:nt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:nt.type,parentSchema:nt,data:t};i===null?i=[a]:i.push(a),o++}return nc.errors=i,o===0}function fg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:pt.type,parentSchema:pt,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:pt.oneOf[0].required,parentSchema:pt.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:pt.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[0].properties.id.type,parentSchema:pt.oneOf[0].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let S={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[0].properties.path.items.type,parentSchema:pt.oneOf[0].properties.path.items,data:g};i===null?i=[S]:i.push(S),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:pt.oneOf[0].properties.path.type,parentSchema:pt.oneOf[0].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[0].properties.purpose.type,parentSchema:pt.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}t.filter!==void 0&&(nc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?nc.errors:i.concat(nc.errors),o=i.length))}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:pt.oneOf[1].required,parentSchema:pt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:pt.oneOf[1].required,parentSchema:pt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:pt.oneOf[1].required,parentSchema:pt.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="filter"||f==="predicate")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:pt.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.id.type,parentSchema:pt.oneOf[1].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let S={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.path.items.type,parentSchema:pt.oneOf[1].properties.path.items,data:g};i===null?i=[S]:i.push(S),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:pt.oneOf[1].properties.path.type,parentSchema:pt.oneOf[1].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.purpose.type,parentSchema:pt.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(nc(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?nc.errors:i.concat(nc.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pt.oneOf[1].properties.predicate.type,parentSchema:pt.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="required"||f==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:pt.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:pt.oneOf[1].properties.predicate.enum,parentSchema:pt.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:pt.oneOf,parentSchema:pt,data:t};i===null?i=[f]:i.push(f),o++}return fg.errors=i,o===0}function pg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:re.required,parentSchema:re,data:t};i===null?i=[a]:i.push(a),o++}if(t.schema===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"schema"},message:"must have required property 'schema'",schema:re.required,parentSchema:re,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="group"||a==="schema"||a==="issuance"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:re,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.id.type,parentSchema:re.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.name.type,parentSchema:re.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.purpose.type,parentSchema:re.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.group.items.type,parentSchema:re.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.group.type,parentSchema:re.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.schema!==void 0){let a=t.schema;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)lg(a[c],{instancePath:e+"/schema/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?lg.errors:i.concat(lg.errors),o=i.length)}else{let u={instancePath:e+"/schema",schemaPath:"#/properties/schema/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.schema.type,parentSchema:re.properties.schema,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)dg(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?dg.errors:i.concat(dg.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.issuance.type,parentSchema:re.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:re.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.limit_disclosure.type,parentSchema:re.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.limit_disclosure.enum,parentSchema:re.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:re.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:re.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.properties.active.type,parentSchema:re.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:re.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:re.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:re.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:re.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.statuses.type,parentSchema:re.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)fg(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?fg.errors:i.concat(fg.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.fields.type,parentSchema:re.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.subject_is_issuer.type,parentSchema:re.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.subject_is_issuer.enum,parentSchema:re.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:re.properties.constraints.properties.is_holder.items.required,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:re.properties.constraints.properties.is_holder.items.required,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:re.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:re.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:re.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:re.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.is_holder.items.type,parentSchema:re.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.is_holder.type,parentSchema:re.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:re.properties.constraints.properties.same_subject.items.required,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:re.properties.constraints.properties.same_subject.items.required,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:re.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:re.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:re.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:re.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:re.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:re.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:re.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.properties.same_subject.items.type,parentSchema:re.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:re.properties.constraints.properties.same_subject.type,parentSchema:re.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.properties.constraints.type,parentSchema:re.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:re.type,parentSchema:re,data:t};i===null?i=[a]:i.push(a),o++}return pg.errors=i,o===0}function vS(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:Pr.properties.presentation_definition.required,parentSchema:Pr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:Pr.properties.presentation_definition.required,parentSchema:Pr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:Pr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pr.properties.presentation_definition.properties.id.type,parentSchema:Pr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pr.properties.presentation_definition.properties.name.type,parentSchema:Pr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Pr.properties.presentation_definition.properties.purpose.type,parentSchema:Pr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(cg(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?cg.errors:i.concat(cg.errors),o=i.length)),a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Mp(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Mp.errors:i.concat(Mp.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:Pr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)pg(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?pg.errors:i.concat(pg.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Pr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:Pr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pr.properties.presentation_definition.type,parentSchema:Pr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Pr.type,parentSchema:Pr,data:t};i===null?i=[a]:i.push(a),o++}return vS.errors=i,o===0}});var _S=v((dDe,T$)=>{"use strict";T$.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!t(e[s],r[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r}});var jp=v(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});var F$=_S();F$.code='require("ajv/dist/runtime/equal").default';SS.default=F$});var TS=v((pDe,BS)=>{"use strict";BS.exports=OS;BS.exports.default=OS;var pr={$schema:"http://json-schema.org/draft-07/schema#",title:"Presentation Definition",definitions:{issuance:{type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0},format:{type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},submission_requirements:{type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},input_descriptors:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},field:{type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]}},type:"object",properties:{presentation_definition:{type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},format:{$ref:"#/definitions/format"},frame:{type:"object",additionalProperties:!0},submission_requirements:{type:"array",items:{$ref:"#/definitions/submission_requirements"}},input_descriptors:{type:"array",items:{$ref:"#/definitions/input_descriptors"}}},required:["id","input_descriptors"],additionalProperties:!1}}},Gt={type:"object",patternProperties:{"^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$":{type:"object",properties:{alg:{type:"array",minItems:1,items:{type:"string"}}},required:["alg"],additionalProperties:!1},"^ldp_vc$|^ldp_vp$|^ldp$":{type:"object",properties:{proof_type:{type:"array",minItems:1,items:{type:"string"}}},required:["proof_type"],additionalProperties:!1},additionalProperties:!1},additionalProperties:!1},I$=new RegExp("^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$","u"),k$=new RegExp("^ldp_vc$|^ldp_vp$|^ldp$","u"),R$=new RegExp("additionalProperties","u");function oc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){for(let a in t)if(!(I$.test(a)||k$.test(a)||R$.test(a))){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Gt,data:t};i===null?i=[u]:i.push(u),o++}for(let a in t)if(I$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.alg===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/required",keyword:"required",params:{missingProperty:"alg"},message:"must have required property 'alg'",schema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].required,parentSchema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="alg"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.alg!==void 0){let c=u.alg;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg/"+d,schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items.type,parentSchema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/alg",schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/properties/alg/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg.type,parentSchema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].properties.alg,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Ejwt%24%7C%5Ejwt_vc%24%7C%5Ejwt_vp%24%7C%5Emso_mdoc%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"].type,parentSchema:Gt.patternProperties["^jwt$|^jwt_vc$|^jwt_vp$|^mso_mdoc$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(k$.test(a)){let u=t[a];if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.proof_type===void 0){let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/required",keyword:"required",params:{missingProperty:"proof_type"},message:"must have required property 'proof_type'",schema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].required,parentSchema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}for(let c in u)if(c!=="proof_type"){let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:c},message:"must NOT have additional properties",schema:!1,parentSchema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[l]:i.push(l),o++}if(u.proof_type!==void 0){let c=u.proof_type;if(Array.isArray(c)){if(c.length<1){let d={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[d]:i.push(d),o++}let l=c.length;for(let d=0;d<l;d++){let p=c[d];if(typeof p!="string"){let f={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type/"+d,schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items.type,parentSchema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.items,data:p};i===null?i=[f]:i.push(f),o++}}}else{let l={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1")+"/proof_type",schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/properties/proof_type/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type.type,parentSchema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].properties.proof_type,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/%5Eldp_vc%24%7C%5Eldp_vp%24%7C%5Eldp%24/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"].type,parentSchema:Gt.patternProperties["^ldp_vc$|^ldp_vp$|^ldp$"],data:u};i===null?i=[c]:i.push(c),o++}}for(let a in t)if(R$.test(a)){let u={instancePath:e+"/"+a.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/patternProperties/additionalProperties/false schema",keyword:"false schema",params:{},message:"boolean schema is false",schema:!1,parentSchema:Gt.patternProperties.additionalProperties,data:t[a]};i===null?i=[u]:i.push(u),o++}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Gt.type,parentSchema:Gt,data:t};i===null?i=[a]:i.push(a),o++}return oc.errors=i,o===0}var Ce={type:"object",oneOf:[{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from:{type:"string"}},required:["rule","from"],additionalProperties:!1},{properties:{name:{type:"string"},purpose:{type:"string"},rule:{type:"string",enum:["all","pick"]},count:{type:"integer",minimum:1},min:{type:"integer",minimum:0},max:{type:"integer",minimum:0},from_nested:{type:"array",minItems:1,items:{$ref:"#/definitions/submission_requirements"}}},required:["rule","from_nested"],additionalProperties:!1}]},DS={validate:Lp};function Lp(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Ce.type,parentSchema:Ce,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ce.oneOf[0].required,parentSchema:Ce.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}if(t.from===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"from"},message:"must have required property 'from'",schema:Ce.oneOf[0].required,parentSchema:Ce.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ce.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.name.type,parentSchema:Ce.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.purpose.type,parentSchema:Ce.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.rule.type,parentSchema:Ce.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/0/properties/rule/enum",keyword:"enum",params:{allowedValues:Ce.oneOf[0].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ce.oneOf[0].properties.rule.enum,parentSchema:Ce.oneOf[0].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.count.type,parentSchema:Ce.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/0/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ce.oneOf[0].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.min.type,parentSchema:Ce.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/0/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[0].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[0].properties.max.type,parentSchema:Ce.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/0/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[0].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from!==void 0){let f=t.from;if(typeof f!="string"){let h={instancePath:e+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[0].properties.from.type,parentSchema:Ce.oneOf[0].properties.from,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.rule===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"rule"},message:"must have required property 'rule'",schema:Ce.oneOf[1].required,parentSchema:Ce.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.from_nested===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"from_nested"},message:"must have required property 'from_nested'",schema:Ce.oneOf[1].required,parentSchema:Ce.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="name"||f==="purpose"||f==="rule"||f==="count"||f==="min"||f==="max"||f==="from_nested")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:Ce.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.name.type,parentSchema:Ce.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.purpose.type,parentSchema:Ce.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.rule!==void 0){let f=t.rule;if(typeof f!="string"){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Ce.oneOf[1].properties.rule.type,parentSchema:Ce.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="all"||f==="pick")){let h={instancePath:e+"/rule",schemaPath:"#/oneOf/1/properties/rule/enum",keyword:"enum",params:{allowedValues:Ce.oneOf[1].properties.rule.enum},message:"must be equal to one of the allowed values",schema:Ce.oneOf[1].properties.rule.enum,parentSchema:Ce.oneOf[1].properties.rule,data:f};i===null?i=[h]:i.push(h),o++}}if(t.count!==void 0){let f=t.count;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.count.type,parentSchema:Ce.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<1||isNaN(f))){let h={instancePath:e+"/count",schemaPath:"#/oneOf/1/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1",schema:1,parentSchema:Ce.oneOf[1].properties.count,data:f};i===null?i=[h]:i.push(h),o++}}if(t.min!==void 0){let f=t.min;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.min.type,parentSchema:Ce.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/min",schemaPath:"#/oneOf/1/properties/min/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[1].properties.min,data:f};i===null?i=[h]:i.push(h),o++}}if(t.max!==void 0){let f=t.max;if(!(typeof f=="number"&&!(f%1)&&!isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:Ce.oneOf[1].properties.max.type,parentSchema:Ce.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}if(typeof f=="number"&&(f<0||isNaN(f))){let h={instancePath:e+"/max",schemaPath:"#/oneOf/1/properties/max/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:Ce.oneOf[1].properties.max,data:f};i===null?i=[h]:i.push(h),o++}}if(t.from_nested!==void 0){let f=t.from_nested;if(Array.isArray(f)){if(f.length<1){let y={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:Ce.oneOf[1].properties.from_nested,data:f};i===null?i=[y]:i.push(y),o++}let h=f.length;for(let y=0;y<h;y++)DS.validate(f[y],{instancePath:e+"/from_nested/"+y,parentData:f,parentDataProperty:y,rootData:s})||(i=i===null?DS.validate.errors:i.concat(DS.validate.errors),o=i.length)}else{let h={instancePath:e+"/from_nested",schemaPath:"#/oneOf/1/properties/from_nested/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Ce.oneOf[1].properties.from_nested.type,parentSchema:Ce.oneOf[1].properties.from_nested,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:Ce.oneOf,parentSchema:Ce,data:t};i===null?i=[f]:i.push(f),o++}return Lp.errors=i,o===0}var ne={type:"object",properties:{id:{type:"string"},name:{type:"string"},purpose:{type:"string"},issuance:{type:"array",items:{$ref:"#/definitions/issuance"}},group:{type:"array",items:{type:"string"}},format:{$ref:"#/definitions/format"},constraints:{type:"object",properties:{limit_disclosure:{type:"string",enum:["required","preferred"]},statuses:{type:"object",properties:{active:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},suspended:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}},revoked:{type:"object",properties:{directive:{type:"string",enum:["required","allowed","disallowed"]}}}}},fields:{type:"array",items:{$ref:"#/definitions/field"}},subject_is_issuer:{type:"string",enum:["required","preferred"]},is_holder:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}},same_subject:{type:"array",items:{type:"object",properties:{field_id:{type:"array",items:{type:"string"}},directive:{type:"string",enum:["required","preferred"]}},required:["field_id","directive"],additionalProperties:!1}}},additionalProperties:!1}},required:["id"],additionalProperties:!1},hg={type:"object",properties:{manifest:{type:"string"}},additionalProperties:!0};function mg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.manifest!==void 0){let a=t.manifest;if(typeof a!="string"){let u={instancePath:e+"/manifest",schemaPath:"#/properties/manifest/type",keyword:"type",params:{type:"string"},message:"must be string",schema:hg.properties.manifest.type,parentSchema:hg.properties.manifest,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:hg.type,parentSchema:hg,data:t};i===null?i=[a]:i.push(a),o++}return mg.errors=i,o===0}var qe={type:"object",oneOf:[{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},name:{type:"string"}},required:["path"],additionalProperties:!1},{properties:{id:{type:"string"},path:{type:"array",items:{type:"string"}},purpose:{type:"string"},intent_to_retain:{type:"boolean"},filter:{$ref:"http://json-schema.org/schema#"},predicate:{type:"string",enum:["required","preferred"]},name:{type:"string"}},required:["path","filter","predicate"],additionalProperties:!1}]},ye={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},AS={type:"integer",minimum:0};function Gn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t))){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"integer"},message:"must be integer",schema:AS.type,parentSchema:AS,data:t};i===null?i=[a]:i.push(a),o++}if(typeof t=="number"&&(t<0||isNaN(t))){let a={instancePath:e,schemaPath:"#/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0",schema:0,parentSchema:AS,data:t};i===null?i=[a]:i.push(a),o++}return Gn.errors=i,o===0}function js(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return Gn(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?Gn.errors:i.concat(Gn.errors),o=i.length),js.errors=i,o===0}var xS={type:"array",minItems:1,items:{$ref:"#"}},CS={validate:Ne};function Jn(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){if(t.length<1){let u={instancePath:e,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:xS,data:t};i===null?i=[u]:i.push(u),o++}let a=t.length;for(let u=0;u<a;u++)CS.validate(t[u],{instancePath:e+"/"+u,parentData:t,parentDataProperty:u,rootData:s})||(i=i===null?CS.validate.errors:i.concat(CS.validate.errors),o=i.length)}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:xS.type,parentSchema:xS,data:t};i===null?i=[a]:i.push(a),o++}return Jn.errors=i,o===0}var qp={type:"array",items:{type:"string"},uniqueItems:!0,default:[]};function ic(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(Array.isArray(t)){let a=t.length;for(let l=0;l<a;l++){let d=t[l];if(typeof d!="string"){let p={instancePath:e+"/"+l,schemaPath:"#/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qp.items.type,parentSchema:qp.items,data:d};i===null?i=[p]:i.push(p),o++}}let u=t.length,c;if(u>1){let l={};for(;u--;){let d=t[u];if(typeof d=="string"){if(typeof l[d]=="number"){c=l[d];let p={instancePath:e,schemaPath:"#/uniqueItems",keyword:"uniqueItems",params:{i:u,j:c},message:"must NOT have duplicate items (items ## "+c+" and "+u+" are identical)",schema:!0,parentSchema:qp,data:t};i===null?i=[p]:i.push(p),o++;break}l[d]=u}}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array",schema:qp.type,parentSchema:qp,data:t};i===null?i=[a]:i.push(a),o++}return ic.errors=i,o===0}var PS={enum:["array","boolean","integer","null","number","object","string"]};function sc(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t==="array"||t==="boolean"||t==="integer"||t==="null"||t==="number"||t==="object"||t==="string")){let a={instancePath:e,schemaPath:"#/enum",keyword:"enum",params:{allowedValues:PS.enum},message:"must be equal to one of the allowed values",schema:PS.enum,parentSchema:PS,data:t};i===null?i=[a]:i.push(a),o++}return sc.errors=i,o===0}var $$=jp().default;function Ne(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))&&typeof t!="boolean"){let d={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:ye.type},message:"must be object,boolean",schema:ye.type,parentSchema:ye,data:t};i===null?i=[d]:i.push(d),o++}if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.$id!==void 0){let d=t.$id;if(typeof d!="string"){let p={instancePath:e+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.$id.type,parentSchema:ye.properties.$id,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$schema!==void 0){let d=t.$schema;if(typeof d!="string"){let p={instancePath:e+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.$schema.type,parentSchema:ye.properties.$schema,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$ref!==void 0){let d=t.$ref;if(typeof d!="string"){let p={instancePath:e+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.$ref.type,parentSchema:ye.properties.$ref,data:d};i===null?i=[p]:i.push(p),o++}}if(t.$comment!==void 0){let d=t.$comment;if(typeof d!="string"){let p={instancePath:e+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.$comment.type,parentSchema:ye.properties.$comment,data:d};i===null?i=[p]:i.push(p),o++}}if(t.title!==void 0){let d=t.title;if(typeof d!="string"){let p={instancePath:e+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.title.type,parentSchema:ye.properties.title,data:d};i===null?i=[p]:i.push(p),o++}}if(t.description!==void 0){let d=t.description;if(typeof d!="string"){let p={instancePath:e+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.description.type,parentSchema:ye.properties.description,data:d};i===null?i=[p]:i.push(p),o++}}if(t.readOnly!==void 0){let d=t.readOnly;if(typeof d!="boolean"){let p={instancePath:e+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ye.properties.readOnly.type,parentSchema:ye.properties.readOnly,data:d};i===null?i=[p]:i.push(p),o++}}if(t.examples!==void 0){let d=t.examples;if(!Array.isArray(d)){let p={instancePath:e+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ye.properties.examples.type,parentSchema:ye.properties.examples,data:d};i===null?i=[p]:i.push(p),o++}}if(t.multipleOf!==void 0){let d=t.multipleOf;if(typeof d=="number"){if(d<=0||isNaN(d)){let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0",schema:0,parentSchema:ye.properties.multipleOf,data:d};i===null?i=[p]:i.push(p),o++}}else{let p={instancePath:e+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ye.properties.multipleOf.type,parentSchema:ye.properties.multipleOf,data:d};i===null?i=[p]:i.push(p),o++}}if(t.maximum!==void 0){let d=t.maximum;if(typeof d!="number"){let p={instancePath:e+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ye.properties.maximum.type,parentSchema:ye.properties.maximum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMaximum!==void 0){let d=t.exclusiveMaximum;if(typeof d!="number"){let p={instancePath:e+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ye.properties.exclusiveMaximum.type,parentSchema:ye.properties.exclusiveMaximum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.minimum!==void 0){let d=t.minimum;if(typeof d!="number"){let p={instancePath:e+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ye.properties.minimum.type,parentSchema:ye.properties.minimum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.exclusiveMinimum!==void 0){let d=t.exclusiveMinimum;if(typeof d!="number"){let p={instancePath:e+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number",schema:ye.properties.exclusiveMinimum.type,parentSchema:ye.properties.exclusiveMinimum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.maxLength!==void 0&&(Gn(t.maxLength,{instancePath:e+"/maxLength",parentData:t,parentDataProperty:"maxLength",rootData:s})||(i=i===null?Gn.errors:i.concat(Gn.errors),o=i.length)),t.minLength!==void 0&&(js(t.minLength,{instancePath:e+"/minLength",parentData:t,parentDataProperty:"minLength",rootData:s})||(i=i===null?js.errors:i.concat(js.errors),o=i.length)),t.pattern!==void 0){let d=t.pattern;if(typeof d!="string"){let p={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.pattern.type,parentSchema:ye.properties.pattern,data:d};i===null?i=[p]:i.push(p),o++}}if(t.additionalItems!==void 0&&(Ne(t.additionalItems,{instancePath:e+"/additionalItems",parentData:t,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.items!==void 0){let d=t.items,p=o,f=!1,h=o;Ne(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);var a=h===o;if(f=f||a,!f){let y=o;Jn(d,{instancePath:e+"/items",parentData:t,parentDataProperty:"items",rootData:s})||(i=i===null?Jn.errors:i.concat(Jn.errors),o=i.length);var a=y===o;f=f||a}if(f)o=p,i!==null&&(p?i.length=p:i=null);else{let y={instancePath:e+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ye.properties.items.anyOf,parentSchema:ye.properties.items,data:d};i===null?i=[y]:i.push(y),o++}}if(t.maxItems!==void 0&&(Gn(t.maxItems,{instancePath:e+"/maxItems",parentData:t,parentDataProperty:"maxItems",rootData:s})||(i=i===null?Gn.errors:i.concat(Gn.errors),o=i.length)),t.minItems!==void 0&&(js(t.minItems,{instancePath:e+"/minItems",parentData:t,parentDataProperty:"minItems",rootData:s})||(i=i===null?js.errors:i.concat(js.errors),o=i.length)),t.uniqueItems!==void 0){let d=t.uniqueItems;if(typeof d!="boolean"){let p={instancePath:e+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:ye.properties.uniqueItems.type,parentSchema:ye.properties.uniqueItems,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contains!==void 0&&(Ne(t.contains,{instancePath:e+"/contains",parentData:t,parentDataProperty:"contains",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.maxProperties!==void 0&&(Gn(t.maxProperties,{instancePath:e+"/maxProperties",parentData:t,parentDataProperty:"maxProperties",rootData:s})||(i=i===null?Gn.errors:i.concat(Gn.errors),o=i.length)),t.minProperties!==void 0&&(js(t.minProperties,{instancePath:e+"/minProperties",parentData:t,parentDataProperty:"minProperties",rootData:s})||(i=i===null?js.errors:i.concat(js.errors),o=i.length)),t.required!==void 0&&(ic(t.required,{instancePath:e+"/required",parentData:t,parentDataProperty:"required",rootData:s})||(i=i===null?ic.errors:i.concat(ic.errors),o=i.length)),t.additionalProperties!==void 0&&(Ne(t.additionalProperties,{instancePath:e+"/additionalProperties",parentData:t,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.definitions!==void 0){let d=t.definitions;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d)Ne(d[p],{instancePath:e+"/definitions/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);else{let p={instancePath:e+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ye.properties.definitions.type,parentSchema:ye.properties.definitions,data:d};i===null?i=[p]:i.push(p),o++}}if(t.properties!==void 0){let d=t.properties;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d)Ne(d[p],{instancePath:e+"/properties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);else{let p={instancePath:e+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ye.properties.properties.type,parentSchema:ye.properties.properties,data:d};i===null?i=[p]:i.push(p),o++}}if(t.patternProperties!==void 0){let d=t.patternProperties;if(d&&typeof d=="object"&&!Array.isArray(d)){for(let p in d){var u=o===o;if(!u){let h={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:p},message:"property name must be valid",schema:ye.properties.patternProperties.propertyNames,parentSchema:ye.properties.patternProperties,data:d};i===null?i=[h]:i.push(h),o++}}for(let p in d)Ne(d[p],{instancePath:e+"/patternProperties/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)}else{let p={instancePath:e+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ye.properties.patternProperties.type,parentSchema:ye.properties.patternProperties,data:d};i===null?i=[p]:i.push(p),o++}}if(t.dependencies!==void 0){let d=t.dependencies;if(d&&typeof d=="object"&&!Array.isArray(d))for(let p in d){let f=d[p],h=o,y=!1,g=o;Ne(f,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length);var c=g===o;if(y=y||c,!y){let S=o;ic(f,{instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:d,parentDataProperty:p,rootData:s})||(i=i===null?ic.errors:i.concat(ic.errors),o=i.length);var c=S===o;y=y||c}if(y)o=h,i!==null&&(h?i.length=h:i=null);else{let S={instancePath:e+"/dependencies/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ye.properties.dependencies.additionalProperties.anyOf,parentSchema:ye.properties.dependencies.additionalProperties,data:f};i===null?i=[S]:i.push(S),o++}}else{let p={instancePath:e+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ye.properties.dependencies.type,parentSchema:ye.properties.dependencies,data:d};i===null?i=[p]:i.push(p),o++}}if(t.propertyNames!==void 0&&(Ne(t.propertyNames,{instancePath:e+"/propertyNames",parentData:t,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.enum!==void 0){let d=t.enum;if(Array.isArray(d)){if(d.length<1){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ye.properties.enum,data:d};i===null?i=[h]:i.push(h),o++}let p=d.length,f;if(p>1){e:for(;p--;)for(f=p;f--;)if($$(d[p],d[f])){let h={instancePath:e+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:p,j:f},message:"must NOT have duplicate items (items ## "+f+" and "+p+" are identical)",schema:!0,parentSchema:ye.properties.enum,data:d};i===null?i=[h]:i.push(h),o++;break e}}}else{let p={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ye.properties.enum.type,parentSchema:ye.properties.enum,data:d};i===null?i=[p]:i.push(p),o++}}if(t.type!==void 0){let d=t.type,p=o,f=!1,h=o;sc(d,{instancePath:e+"/type",parentData:t,parentDataProperty:"type",rootData:s})||(i=i===null?sc.errors:i.concat(sc.errors),o=i.length);var l=h===o;if(f=f||l,!f){let y=o;if(Array.isArray(d)){if(d.length<1){let P={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items",schema:1,parentSchema:ye.properties.type.anyOf[1],data:d};i===null?i=[P]:i.push(P),o++}let S=d.length;for(let P=0;P<S;P++)sc(d[P],{instancePath:e+"/type/"+P,parentData:d,parentDataProperty:P,rootData:s})||(i=i===null?sc.errors:i.concat(sc.errors),o=i.length);let A=d.length,w;if(A>1){e:for(;A--;)for(w=A;w--;)if($$(d[A],d[w])){let P={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:A,j:w},message:"must NOT have duplicate items (items ## "+w+" and "+A+" are identical)",schema:!0,parentSchema:ye.properties.type.anyOf[1],data:d};i===null?i=[P]:i.push(P),o++;break e}}}else{let S={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ye.properties.type.anyOf[1].type,parentSchema:ye.properties.type.anyOf[1],data:d};i===null?i=[S]:i.push(S),o++}var l=y===o;f=f||l}if(f)o=p,i!==null&&(p?i.length=p:i=null);else{let y={instancePath:e+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf",schema:ye.properties.type.anyOf,parentSchema:ye.properties.type,data:d};i===null?i=[y]:i.push(y),o++}}if(t.format!==void 0){let d=t.format;if(typeof d!="string"){let p={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.format.type,parentSchema:ye.properties.format,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contentMediaType!==void 0){let d=t.contentMediaType;if(typeof d!="string"){let p={instancePath:e+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.contentMediaType.type,parentSchema:ye.properties.contentMediaType,data:d};i===null?i=[p]:i.push(p),o++}}if(t.contentEncoding!==void 0){let d=t.contentEncoding;if(typeof d!="string"){let p={instancePath:e+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ye.properties.contentEncoding.type,parentSchema:ye.properties.contentEncoding,data:d};i===null?i=[p]:i.push(p),o++}}t.if!==void 0&&(Ne(t.if,{instancePath:e+"/if",parentData:t,parentDataProperty:"if",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.then!==void 0&&(Ne(t.then,{instancePath:e+"/then",parentData:t,parentDataProperty:"then",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.else!==void 0&&(Ne(t.else,{instancePath:e+"/else",parentData:t,parentDataProperty:"else",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.allOf!==void 0&&(Jn(t.allOf,{instancePath:e+"/allOf",parentData:t,parentDataProperty:"allOf",rootData:s})||(i=i===null?Jn.errors:i.concat(Jn.errors),o=i.length)),t.anyOf!==void 0&&(Jn(t.anyOf,{instancePath:e+"/anyOf",parentData:t,parentDataProperty:"anyOf",rootData:s})||(i=i===null?Jn.errors:i.concat(Jn.errors),o=i.length)),t.oneOf!==void 0&&(Jn(t.oneOf,{instancePath:e+"/oneOf",parentData:t,parentDataProperty:"oneOf",rootData:s})||(i=i===null?Jn.errors:i.concat(Jn.errors),o=i.length)),t.not!==void 0&&(Ne(t.not,{instancePath:e+"/not",parentData:t,parentDataProperty:"not",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length))}return Ne.errors=i,o===0}function yg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(!(t&&typeof t=="object"&&!Array.isArray(t))){let f={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:qe.type,parentSchema:qe,data:t};i===null?i=[f]:i.push(f),o++}let a=o,u=!1,c=null,l=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:qe.oneOf[0].required,parentSchema:qe.oneOf[0],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="name")){let h={instancePath:e,schemaPath:"#/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:qe.oneOf[0],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/0/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.id.type,parentSchema:qe.oneOf[0].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let S={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/0/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.path.items.type,parentSchema:qe.oneOf[0].properties.path.items,data:g};i===null?i=[S]:i.push(S),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/0/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:qe.oneOf[0].properties.path.type,parentSchema:qe.oneOf[0].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/0/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.purpose.type,parentSchema:qe.oneOf[0].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/0/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:qe.oneOf[0].properties.intent_to_retain.type,parentSchema:qe.oneOf[0].properties.intent_to_retain,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Ne(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/0/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[0].properties.name.type,parentSchema:qe.oneOf[0].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}}var p=l===o;p&&(u=!0,c=0);let d=o;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.path===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"path"},message:"must have required property 'path'",schema:qe.oneOf[1].required,parentSchema:qe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.filter===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"filter"},message:"must have required property 'filter'",schema:qe.oneOf[1].required,parentSchema:qe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}if(t.predicate===void 0){let f={instancePath:e,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:"predicate"},message:"must have required property 'predicate'",schema:qe.oneOf[1].required,parentSchema:qe.oneOf[1],data:t};i===null?i=[f]:i.push(f),o++}for(let f in t)if(!(f==="id"||f==="path"||f==="purpose"||f==="intent_to_retain"||f==="filter"||f==="predicate"||f==="name")){let h={instancePath:e,schemaPath:"#/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:f},message:"must NOT have additional properties",schema:!1,parentSchema:qe.oneOf[1],data:t};i===null?i=[h]:i.push(h),o++}if(t.id!==void 0){let f=t.id;if(typeof f!="string"){let h={instancePath:e+"/id",schemaPath:"#/oneOf/1/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.id.type,parentSchema:qe.oneOf[1].properties.id,data:f};i===null?i=[h]:i.push(h),o++}}if(t.path!==void 0){let f=t.path;if(Array.isArray(f)){let h=f.length;for(let y=0;y<h;y++){let g=f[y];if(typeof g!="string"){let S={instancePath:e+"/path/"+y,schemaPath:"#/oneOf/1/properties/path/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.path.items.type,parentSchema:qe.oneOf[1].properties.path.items,data:g};i===null?i=[S]:i.push(S),o++}}}else{let h={instancePath:e+"/path",schemaPath:"#/oneOf/1/properties/path/type",keyword:"type",params:{type:"array"},message:"must be array",schema:qe.oneOf[1].properties.path.type,parentSchema:qe.oneOf[1].properties.path,data:f};i===null?i=[h]:i.push(h),o++}}if(t.purpose!==void 0){let f=t.purpose;if(typeof f!="string"){let h={instancePath:e+"/purpose",schemaPath:"#/oneOf/1/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.purpose.type,parentSchema:qe.oneOf[1].properties.purpose,data:f};i===null?i=[h]:i.push(h),o++}}if(t.intent_to_retain!==void 0){let f=t.intent_to_retain;if(typeof f!="boolean"){let h={instancePath:e+"/intent_to_retain",schemaPath:"#/oneOf/1/properties/intent_to_retain/type",keyword:"type",params:{type:"boolean"},message:"must be boolean",schema:qe.oneOf[1].properties.intent_to_retain.type,parentSchema:qe.oneOf[1].properties.intent_to_retain,data:f};i===null?i=[h]:i.push(h),o++}}if(t.filter!==void 0&&(Ne(t.filter,{instancePath:e+"/filter",parentData:t,parentDataProperty:"filter",rootData:s})||(i=i===null?Ne.errors:i.concat(Ne.errors),o=i.length)),t.predicate!==void 0){let f=t.predicate;if(typeof f!="string"){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.predicate.type,parentSchema:qe.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}if(!(f==="required"||f==="preferred")){let h={instancePath:e+"/predicate",schemaPath:"#/oneOf/1/properties/predicate/enum",keyword:"enum",params:{allowedValues:qe.oneOf[1].properties.predicate.enum},message:"must be equal to one of the allowed values",schema:qe.oneOf[1].properties.predicate.enum,parentSchema:qe.oneOf[1].properties.predicate,data:f};i===null?i=[h]:i.push(h),o++}}if(t.name!==void 0){let f=t.name;if(typeof f!="string"){let h={instancePath:e+"/name",schemaPath:"#/oneOf/1/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:qe.oneOf[1].properties.name.type,parentSchema:qe.oneOf[1].properties.name,data:f};i===null?i=[h]:i.push(h),o++}}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let f={instancePath:e,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf",schema:qe.oneOf,parentSchema:qe,data:t};i===null?i=[f]:i.push(f),o++}return yg.errors=i,o===0}function gg(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.id===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:ne.required,parentSchema:ne,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!(a==="id"||a==="name"||a==="purpose"||a==="issuance"||a==="group"||a==="format"||a==="constraints")){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:ne,data:t};i===null?i=[u]:i.push(u),o++}if(t.id!==void 0){let a=t.id;if(typeof a!="string"){let u={instancePath:e+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.id.type,parentSchema:ne.properties.id,data:a};i===null?i=[u]:i.push(u),o++}}if(t.name!==void 0){let a=t.name;if(typeof a!="string"){let u={instancePath:e+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.name.type,parentSchema:ne.properties.name,data:a};i===null?i=[u]:i.push(u),o++}}if(t.purpose!==void 0){let a=t.purpose;if(typeof a!="string"){let u={instancePath:e+"/purpose",schemaPath:"#/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.purpose.type,parentSchema:ne.properties.purpose,data:a};i===null?i=[u]:i.push(u),o++}}if(t.issuance!==void 0){let a=t.issuance;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)mg(a[c],{instancePath:e+"/issuance/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?mg.errors:i.concat(mg.errors),o=i.length)}else{let u={instancePath:e+"/issuance",schemaPath:"#/properties/issuance/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.issuance.type,parentSchema:ne.properties.issuance,data:a};i===null?i=[u]:i.push(u),o++}}if(t.group!==void 0){let a=t.group;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++){let l=a[c];if(typeof l!="string"){let d={instancePath:e+"/group/"+c,schemaPath:"#/properties/group/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.group.items.type,parentSchema:ne.properties.group.items,data:l};i===null?i=[d]:i.push(d),o++}}}else{let u={instancePath:e+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.group.type,parentSchema:ne.properties.group,data:a};i===null?i=[u]:i.push(u),o++}}if(t.format!==void 0&&(oc(t.format,{instancePath:e+"/format",parentData:t,parentDataProperty:"format",rootData:s})||(i=i===null?oc.errors:i.concat(oc.errors),o=i.length)),t.constraints!==void 0){let a=t.constraints;if(a&&typeof a=="object"&&!Array.isArray(a)){for(let u in a)if(!(u==="limit_disclosure"||u==="statuses"||u==="fields"||u==="subject_is_issuer"||u==="is_holder"||u==="same_subject")){let c={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:ne.properties.constraints,data:a};i===null?i=[c]:i.push(c),o++}if(a.limit_disclosure!==void 0){let u=a.limit_disclosure;if(typeof u!="string"){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.limit_disclosure.type,parentSchema:ne.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/limit_disclosure",schemaPath:"#/properties/constraints/properties/limit_disclosure/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.limit_disclosure.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.limit_disclosure.enum,parentSchema:ne.properties.constraints.properties.limit_disclosure,data:u};i===null?i=[c]:i.push(c),o++}}if(a.statuses!==void 0){let u=a.statuses;if(u&&typeof u=="object"&&!Array.isArray(u)){if(u.active!==void 0){let c=u.active;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.statuses.properties.active.properties.directive.type,parentSchema:ne.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/active/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/active/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.statuses.properties.active.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.statuses.properties.active.properties.directive.enum,parentSchema:ne.properties.constraints.properties.statuses.properties.active.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/active",schemaPath:"#/properties/constraints/properties/statuses/properties/active/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.properties.active.type,parentSchema:ne.properties.constraints.properties.statuses.properties.active,data:c};i===null?i=[l]:i.push(l),o++}}if(u.suspended!==void 0){let c=u.suspended;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive.type,parentSchema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/suspended/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive.enum,parentSchema:ne.properties.constraints.properties.statuses.properties.suspended.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/suspended",schemaPath:"#/properties/constraints/properties/statuses/properties/suspended/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.properties.suspended.type,parentSchema:ne.properties.constraints.properties.statuses.properties.suspended,data:c};i===null?i=[l]:i.push(l),o++}}if(u.revoked!==void 0){let c=u.revoked;if(c&&typeof c=="object"&&!Array.isArray(c)){if(c.directive!==void 0){let l=c.directive;if(typeof l!="string"){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive.type,parentSchema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}if(!(l==="required"||l==="allowed"||l==="disallowed")){let d={instancePath:e+"/constraints/statuses/revoked/directive",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive.enum,parentSchema:ne.properties.constraints.properties.statuses.properties.revoked.properties.directive,data:l};i===null?i=[d]:i.push(d),o++}}}else{let l={instancePath:e+"/constraints/statuses/revoked",schemaPath:"#/properties/constraints/properties/statuses/properties/revoked/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.properties.revoked.type,parentSchema:ne.properties.constraints.properties.statuses.properties.revoked,data:c};i===null?i=[l]:i.push(l),o++}}}else{let c={instancePath:e+"/constraints/statuses",schemaPath:"#/properties/constraints/properties/statuses/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.statuses.type,parentSchema:ne.properties.constraints.properties.statuses,data:u};i===null?i=[c]:i.push(c),o++}}if(a.fields!==void 0){let u=a.fields;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)yg(u[l],{instancePath:e+"/constraints/fields/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?yg.errors:i.concat(yg.errors),o=i.length)}else{let c={instancePath:e+"/constraints/fields",schemaPath:"#/properties/constraints/properties/fields/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.fields.type,parentSchema:ne.properties.constraints.properties.fields,data:u};i===null?i=[c]:i.push(c),o++}}if(a.subject_is_issuer!==void 0){let u=a.subject_is_issuer;if(typeof u!="string"){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.subject_is_issuer.type,parentSchema:ne.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}if(!(u==="required"||u==="preferred")){let c={instancePath:e+"/constraints/subject_is_issuer",schemaPath:"#/properties/constraints/properties/subject_is_issuer/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.subject_is_issuer.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.subject_is_issuer.enum,parentSchema:ne.properties.constraints.properties.subject_is_issuer,data:u};i===null?i=[c]:i.push(c),o++}}if(a.is_holder!==void 0){let u=a.is_holder;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ne.properties.constraints.properties.is_holder.items.required,parentSchema:ne.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ne.properties.constraints.properties.is_holder.items.required,parentSchema:ne.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ne.properties.constraints.properties.is_holder.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/is_holder/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.is_holder.items.properties.field_id.items.type,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/is_holder/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.is_holder.items.properties.field_id.type,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.is_holder.items.properties.directive.type,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/is_holder/"+l+"/directive",schemaPath:"#/properties/constraints/properties/is_holder/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.is_holder.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.is_holder.items.properties.directive.enum,parentSchema:ne.properties.constraints.properties.is_holder.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/is_holder/"+l,schemaPath:"#/properties/constraints/properties/is_holder/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.is_holder.items.type,parentSchema:ne.properties.constraints.properties.is_holder.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/is_holder",schemaPath:"#/properties/constraints/properties/is_holder/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.is_holder.type,parentSchema:ne.properties.constraints.properties.is_holder,data:u};i===null?i=[c]:i.push(c),o++}}if(a.same_subject!==void 0){let u=a.same_subject;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++){let d=u[l];if(d&&typeof d=="object"&&!Array.isArray(d)){if(d.field_id===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"field_id"},message:"must have required property 'field_id'",schema:ne.properties.constraints.properties.same_subject.items.required,parentSchema:ne.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}if(d.directive===void 0){let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/required",keyword:"required",params:{missingProperty:"directive"},message:"must have required property 'directive'",schema:ne.properties.constraints.properties.same_subject.items.required,parentSchema:ne.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}for(let p in d)if(!(p==="field_id"||p==="directive")){let f={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties",schema:!1,parentSchema:ne.properties.constraints.properties.same_subject.items,data:d};i===null?i=[f]:i.push(f),o++}if(d.field_id!==void 0){let p=d.field_id;if(Array.isArray(p)){let f=p.length;for(let h=0;h<f;h++){let y=p[h];if(typeof y!="string"){let g={instancePath:e+"/constraints/same_subject/"+l+"/field_id/"+h,schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/items/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.same_subject.items.properties.field_id.items.type,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.field_id.items,data:y};i===null?i=[g]:i.push(g),o++}}}else{let f={instancePath:e+"/constraints/same_subject/"+l+"/field_id",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/field_id/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.same_subject.items.properties.field_id.type,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.field_id,data:p};i===null?i=[f]:i.push(f),o++}}if(d.directive!==void 0){let p=d.directive;if(typeof p!="string"){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/type",keyword:"type",params:{type:"string"},message:"must be string",schema:ne.properties.constraints.properties.same_subject.items.properties.directive.type,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}if(!(p==="required"||p==="preferred")){let f={instancePath:e+"/constraints/same_subject/"+l+"/directive",schemaPath:"#/properties/constraints/properties/same_subject/items/properties/directive/enum",keyword:"enum",params:{allowedValues:ne.properties.constraints.properties.same_subject.items.properties.directive.enum},message:"must be equal to one of the allowed values",schema:ne.properties.constraints.properties.same_subject.items.properties.directive.enum,parentSchema:ne.properties.constraints.properties.same_subject.items.properties.directive,data:p};i===null?i=[f]:i.push(f),o++}}}else{let p={instancePath:e+"/constraints/same_subject/"+l,schemaPath:"#/properties/constraints/properties/same_subject/items/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.properties.same_subject.items.type,parentSchema:ne.properties.constraints.properties.same_subject.items,data:d};i===null?i=[p]:i.push(p),o++}}}else{let c={instancePath:e+"/constraints/same_subject",schemaPath:"#/properties/constraints/properties/same_subject/type",keyword:"type",params:{type:"array"},message:"must be array",schema:ne.properties.constraints.properties.same_subject.type,parentSchema:ne.properties.constraints.properties.same_subject,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.properties.constraints.type,parentSchema:ne.properties.constraints,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:ne.type,parentSchema:ne,data:t};i===null?i=[a]:i.push(a),o++}return gg.errors=i,o===0}function OS(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.presentation_definition!==void 0){let a=t.presentation_definition;if(a&&typeof a=="object"&&!Array.isArray(a)){if(a.id===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"id"},message:"must have required property 'id'",schema:pr.properties.presentation_definition.required,parentSchema:pr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}if(a.input_descriptors===void 0){let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/required",keyword:"required",params:{missingProperty:"input_descriptors"},message:"must have required property 'input_descriptors'",schema:pr.properties.presentation_definition.required,parentSchema:pr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}for(let u in a)if(!(u==="id"||u==="name"||u==="purpose"||u==="format"||u==="frame"||u==="submission_requirements"||u==="input_descriptors")){let c={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:u},message:"must NOT have additional properties",schema:!1,parentSchema:pr.properties.presentation_definition,data:a};i===null?i=[c]:i.push(c),o++}if(a.id!==void 0){let u=a.id;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/id",schemaPath:"#/properties/presentation_definition/properties/id/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pr.properties.presentation_definition.properties.id.type,parentSchema:pr.properties.presentation_definition.properties.id,data:u};i===null?i=[c]:i.push(c),o++}}if(a.name!==void 0){let u=a.name;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/name",schemaPath:"#/properties/presentation_definition/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pr.properties.presentation_definition.properties.name.type,parentSchema:pr.properties.presentation_definition.properties.name,data:u};i===null?i=[c]:i.push(c),o++}}if(a.purpose!==void 0){let u=a.purpose;if(typeof u!="string"){let c={instancePath:e+"/presentation_definition/purpose",schemaPath:"#/properties/presentation_definition/properties/purpose/type",keyword:"type",params:{type:"string"},message:"must be string",schema:pr.properties.presentation_definition.properties.purpose.type,parentSchema:pr.properties.presentation_definition.properties.purpose,data:u};i===null?i=[c]:i.push(c),o++}}if(a.format!==void 0&&(oc(a.format,{instancePath:e+"/presentation_definition/format",parentData:a,parentDataProperty:"format",rootData:s})||(i=i===null?oc.errors:i.concat(oc.errors),o=i.length)),a.frame!==void 0){let u=a.frame;if(!(u&&typeof u=="object"&&!Array.isArray(u))){let c={instancePath:e+"/presentation_definition/frame",schemaPath:"#/properties/presentation_definition/properties/frame/type",keyword:"type",params:{type:"object"},message:"must be object",schema:pr.properties.presentation_definition.properties.frame.type,parentSchema:pr.properties.presentation_definition.properties.frame,data:u};i===null?i=[c]:i.push(c),o++}}if(a.submission_requirements!==void 0){let u=a.submission_requirements;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)Lp(u[l],{instancePath:e+"/presentation_definition/submission_requirements/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?Lp.errors:i.concat(Lp.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/submission_requirements",schemaPath:"#/properties/presentation_definition/properties/submission_requirements/type",keyword:"type",params:{type:"array"},message:"must be array",schema:pr.properties.presentation_definition.properties.submission_requirements.type,parentSchema:pr.properties.presentation_definition.properties.submission_requirements,data:u};i===null?i=[c]:i.push(c),o++}}if(a.input_descriptors!==void 0){let u=a.input_descriptors;if(Array.isArray(u)){let c=u.length;for(let l=0;l<c;l++)gg(u[l],{instancePath:e+"/presentation_definition/input_descriptors/"+l,parentData:u,parentDataProperty:l,rootData:s})||(i=i===null?gg.errors:i.concat(gg.errors),o=i.length)}else{let c={instancePath:e+"/presentation_definition/input_descriptors",schemaPath:"#/properties/presentation_definition/properties/input_descriptors/type",keyword:"type",params:{type:"array"},message:"must be array",schema:pr.properties.presentation_definition.properties.input_descriptors.type,parentSchema:pr.properties.presentation_definition.properties.input_descriptors,data:u};i===null?i=[c]:i.push(c),o++}}}else{let u={instancePath:e+"/presentation_definition",schemaPath:"#/properties/presentation_definition/type",keyword:"type",params:{type:"object"},message:"must be object",schema:pr.properties.presentation_definition.type,parentSchema:pr.properties.presentation_definition,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:pr.type,parentSchema:pr,data:t};i===null?i=[a]:i.push(a),o++}return OS.errors=i,o===0}});var q$=v(on=>{"use strict";var j$=on&&on.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(on,"__esModule",{value:!0});on.filterToRestrictedDIDs=on.isRestrictedDID=on.uniformDIDMethods=on.definitionVersionDiscovery=on.getIssuerString=on.getSubjectIdsAsString=void 0;var N$=rc(),Soe=j$(ES()),Doe=j$(TS()),Aoe=cS(),M$=aS();function xoe(t){return(Array.isArray(t.credentialSubject)?t.credentialSubject:[t.credentialSubject]).filter(r=>!!r.id).map(r=>r.id)}on.getSubjectIdsAsString=xoe;function Coe(t){return Aoe.ObjectUtils.isString(t.issuer)?t.issuer:t.issuer.id}on.getIssuerString=Coe;function Poe(t){let e=JSON.parse(JSON.stringify(t));M$.JsonPathUtils.changePropertyNameRecursively(e,"_const","const"),M$.JsonPathUtils.changePropertyNameRecursively(e,"_enum","enum");let r={presentation_definition:e},n=(0,Doe.default)(r);return n?{version:N$.PEVersion.v2}:(n=(0,Soe.default)(r),n?{version:N$.PEVersion.v1}:{error:"This is not a valid PresentationDefinition"})}on.definitionVersionDiscovery=Poe;function FS(t,e){var r;let n=(r=t?.map(s=>s.toLowerCase()).map(s=>s.startsWith("did:")?s:`did:${s}`))!==null&&r!==void 0?r:[];if(e?.removePrefix){let s=e.removePrefix.endsWith(":")?e.removePrefix.length:e.removePrefix.length+1;n=n.map(i=>i.startsWith(e.removePrefix)?i.substring(s):i)}return n.includes("did")?[]:n}on.uniformDIDMethods=FS;function Ooe(t,e){let r=FS(e);return r.length===0||r.some(n=>t.toLowerCase().startsWith(n))}on.isRestrictedDID=Ooe;function Boe(t,e){let r=FS(e);return r.length===0?t:r.flatMap(n=>t.filter(s=>s.toLowerCase().startsWith(n)))}on.filterToRestrictedDIDs=Boe});var yi=v(qs=>{"use strict";var Toe=qs&&qs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bg=qs&&qs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Toe(e,t,r)};Object.defineProperty(qs,"__esModule",{value:!0});bg(aS(),qs);bg(cS(),qs);bg(A$(),qs);bg(q$(),qs)});var gi=v(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.AbstractEvaluationHandler=void 0;var Foe=mi(),Ioe=Cr(),IS=class{constructor(e){this._client=e}setNext(e){return this.nextHandler=e,e}getNext(){return this.nextHandler}hasNext(){return this.nextHandler!=null}get client(){return this._client}get wrappedVcs(){return this._client.wrappedVcs}set wrappedVcs(e){this._client.wrappedVcs=e}get presentationSubmission(){return this._client.presentationSubmission}set presentationSubmission(e){this._client.presentationSubmission=e}getResults(){return this._client.results}updatePresentationSubmission(e){this._client.assertPresentationSubmission(),this.presentationSubmission.descriptor_map.forEach((r,n,s)=>{let i;this.getResults().filter(a=>a.status===Ioe.Status.ERROR&&a.evaluator===this.getName()).find(a=>(i=Foe.JSONPath.query(e,a.input_descriptor_path)[0],a.verifiable_credential_path===r.path&&i?.id===r.id))&&delete s[n]})}removeDuplicate(e){return e.reduce((r,n)=>r.find(i=>i.input_descriptor_path===n.input_descriptor_path&&i.verifiable_credential_path===n.verifiable_credential_path)?r:r.concat([n]),[])}};vg.AbstractEvaluationHandler=IS});var U$=v(L$=>{"use strict";Object.defineProperty(L$,"__esModule",{value:!0})});var Kp=v(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.regexpCode=wt.getEsmExportName=wt.getProperty=wt.safeStringify=wt.stringify=wt.strConcat=wt.addCodeArg=wt.str=wt._=wt.nil=wt._Code=wt.Name=wt.IDENTIFIER=wt._CodeOrName=void 0;var Up=class{};wt._CodeOrName=Up;wt.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ac=class extends Up{constructor(e){if(super(),!wt.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};wt.Name=ac;var bi=class extends Up{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,n)=>(n instanceof ac&&(r[n.str]=(r[n.str]||0)+1),r),{})}};wt._Code=bi;wt.nil=new bi("");function V$(t,...e){let r=[t[0]],n=0;for(;n<e.length;)RS(r,e[n]),r.push(t[++n]);return new bi(r)}wt._=V$;var kS=new bi("+");function K$(t,...e){let r=[Vp(t[0])],n=0;for(;n<e.length;)r.push(kS),RS(r,e[n]),r.push(kS,Vp(t[++n]));return koe(r),new bi(r)}wt.str=K$;function RS(t,e){e instanceof bi?t.push(...e._items):e instanceof ac?t.push(e):t.push(Noe(e))}wt.addCodeArg=RS;function koe(t){let e=1;for(;e<t.length-1;){if(t[e]===kS){let r=Roe(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function Roe(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof ac||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof ac))return`"${t}${e.slice(1)}`}function $oe(t,e){return e.emptyStr()?t:t.emptyStr()?e:K$`${t}${e}`}wt.strConcat=$oe;function Noe(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:Vp(Array.isArray(t)?t.join(","):t)}function Moe(t){return new bi(Vp(t))}wt.stringify=Moe;function Vp(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}wt.safeStringify=Vp;function joe(t){return typeof t=="string"&&wt.IDENTIFIER.test(t)?new bi(`.${t}`):V$`[${t}]`}wt.getProperty=joe;function qoe(t){if(typeof t=="string"&&wt.IDENTIFIER.test(t))return new bi(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}wt.getEsmExportName=qoe;function Loe(t){return new bi(t.toString())}wt.regexpCode=Loe});var jS=v(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.ValueScope=mn.ValueScopeName=mn.Scope=mn.varKinds=mn.UsedValueState=void 0;var In=Kp(),$S=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},NS;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(NS=mn.UsedValueState||(mn.UsedValueState={}));mn.varKinds={const:new In.Name("const"),let:new In.Name("let"),var:new In.Name("var")};var wg=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof In.Name?e:this.name(e)}name(e){return new In.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};mn.Scope=wg;var Eg=class extends In.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:n}){this.value=e,this.scopePath=(0,In._)`.${new In.Name(r)}[${n}]`}};mn.ValueScopeName=Eg;var Uoe=(0,In._)`\n`,MS=class extends wg{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Uoe:In.nil}}get(){return this._scope}name(e){return new Eg(e,this._newName(e))}value(e,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(e,r){let n=this._values[e];if(n)return n.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,In._)`${e}${n.scopePath}`})}scopeCode(e=this._values,r,n){return this._reduceValues(e,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(e,r,n={},s){let i=In.nil;for(let o in e){let a=e[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,NS.Started);let l=r(c);if(l){let d=this.opts.es5?mn.varKinds.var:mn.varKinds.const;i=(0,In._)`${i}${d} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,In._)`${i}${l}${this.opts._n}`;else throw new $S(c);u.set(c,NS.Completed)})}return i}};mn.ValueScope=MS});var Qe=v(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.or=it.and=it.not=it.CodeGen=it.operators=it.varKinds=it.ValueScopeName=it.ValueScope=it.Scope=it.Name=it.regexpCode=it.stringify=it.getProperty=it.nil=it.strConcat=it.str=it._=void 0;var ht=Kp(),Vi=jS(),Ba=Kp();Object.defineProperty(it,"_",{enumerable:!0,get:function(){return Ba._}});Object.defineProperty(it,"str",{enumerable:!0,get:function(){return Ba.str}});Object.defineProperty(it,"strConcat",{enumerable:!0,get:function(){return Ba.strConcat}});Object.defineProperty(it,"nil",{enumerable:!0,get:function(){return Ba.nil}});Object.defineProperty(it,"getProperty",{enumerable:!0,get:function(){return Ba.getProperty}});Object.defineProperty(it,"stringify",{enumerable:!0,get:function(){return Ba.stringify}});Object.defineProperty(it,"regexpCode",{enumerable:!0,get:function(){return Ba.regexpCode}});Object.defineProperty(it,"Name",{enumerable:!0,get:function(){return Ba.Name}});var Ag=jS();Object.defineProperty(it,"Scope",{enumerable:!0,get:function(){return Ag.Scope}});Object.defineProperty(it,"ValueScope",{enumerable:!0,get:function(){return Ag.ValueScope}});Object.defineProperty(it,"ValueScopeName",{enumerable:!0,get:function(){return Ag.ValueScopeName}});Object.defineProperty(it,"varKinds",{enumerable:!0,get:function(){return Ag.varKinds}});it.operators={GT:new ht._Code(">"),GTE:new ht._Code(">="),LT:new ht._Code("<"),LTE:new ht._Code("<="),EQ:new ht._Code("==="),NEQ:new ht._Code("!=="),NOT:new ht._Code("!"),OR:new ht._Code("||"),AND:new ht._Code("&&"),ADD:new ht._Code("+")};var Mo=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},qS=class extends Mo{constructor(e,r,n){super(),this.varKind=e,this.name=r,this.rhs=n}render({es5:e,_n:r}){let n=e?Vi.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=rd(this.rhs,e,r)),this}get names(){return this.rhs instanceof ht._CodeOrName?this.rhs.names:{}}},_g=class extends Mo{constructor(e,r,n){super(),this.lhs=e,this.rhs=r,this.sideEffects=n}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof ht.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=rd(this.rhs,e,r),this}get names(){let e=this.lhs instanceof ht.Name?{}:{...this.lhs.names};return Dg(e,this.rhs)}},LS=class extends _g{constructor(e,r,n,s){super(e,n,s),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},US=class extends Mo{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},VS=class extends Mo{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},KS=class extends Mo{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},HS=class extends Mo{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=rd(this.code,e,r),this}get names(){return this.code instanceof ht._CodeOrName?this.code.names:{}}},Hp=class extends Mo{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,n)=>r+n.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let n=e[r].optimizeNodes();Array.isArray(n)?e.splice(r,1,...n):n?e[r]=n:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(e,r)||(Voe(e,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>lc(e,r.names),{})}},jo=class extends Hp{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},WS=class extends Hp{},td=class extends jo{};td.kind="else";var uc=class t extends jo{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new td(n):n}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(H$(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=rd(this.condition,e,r),this}get names(){let e=super.names;return Dg(e,this.condition),this.else&&lc(e,this.else.names),e}};uc.kind="if";var cc=class extends jo{};cc.kind="for";var zS=class extends cc{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=rd(this.iteration,e,r),this}get names(){return lc(super.names,this.iteration.names)}},JS=class extends cc{constructor(e,r,n,s){super(),this.varKind=e,this.name=r,this.from=n,this.to=s}render(e){let r=e.es5?Vi.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(e)}get names(){let e=Dg(super.names,this.from);return Dg(e,this.to)}},Sg=class extends cc{constructor(e,r,n,s){super(),this.loop=e,this.varKind=r,this.name=n,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=rd(this.iterable,e,r),this}get names(){return lc(super.names,this.iterable.names)}},Wp=class extends jo{constructor(e,r,n){super(),this.name=e,this.args=r,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Wp.kind="func";var zp=class extends Hp{render(e){return"return "+super.render(e)}};zp.kind="return";var GS=class extends jo{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var n,s;return super.optimizeNames(e,r),(n=this.catch)===null||n===void 0||n.optimizeNames(e,r),(s=this.finally)===null||s===void 0||s.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&lc(e,this.catch.names),this.finally&&lc(e,this.finally.names),e}},Jp=class extends jo{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};Jp.kind="catch";var Gp=class extends jo{render(e){return"finally"+super.render(e)}};Gp.kind="finally";var XS=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new Vi.Scope({parent:e}),this._nodes=[new WS]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let n=this._extScope.value(e,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new qS(e,i,n)),i}const(e,r,n){return this._def(Vi.varKinds.const,e,r,n)}let(e,r,n){return this._def(Vi.varKinds.let,e,r,n)}var(e,r,n){return this._def(Vi.varKinds.var,e,r,n)}assign(e,r,n){return this._leafNode(new _g(e,r,n))}add(e,r){return this._leafNode(new LS(e,it.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==ht.nil&&this._leafNode(new HS(e)),this}object(...e){let r=["{"];for(let[n,s]of e)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,ht.addCodeArg)(r,s));return r.push("}"),new ht._Code(r)}if(e,r,n){if(this._blockNode(new uc(e)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new uc(e))}else(){return this._elseNode(new td)}endIf(){return this._endBlockNode(uc,td)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new zS(e),r)}forRange(e,r,n,s,i=this.opts.es5?Vi.varKinds.var:Vi.varKinds.let){let o=this._scope.toName(e);return this._for(new JS(i,o,r,n),()=>s(o))}forOf(e,r,n,s=Vi.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let o=r instanceof ht.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,ht._)`${o}.length`,a=>{this.var(i,(0,ht._)`${o}[${a}]`),n(i)})}return this._for(new Sg("of",s,i,r),()=>n(i))}forIn(e,r,n,s=this.opts.es5?Vi.varKinds.var:Vi.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,ht._)`Object.keys(${r})`,n);let i=this._scope.toName(e);return this._for(new Sg("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(cc)}label(e){return this._leafNode(new US(e))}break(e){return this._leafNode(new VS(e))}return(e){let r=new zp;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(zp)}try(e,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new GS;if(this._blockNode(s),this.code(e),r){let i=this.name("e");this._currNode=s.catch=new Jp(i),r(i)}return n&&(this._currNode=s.finally=new Gp,this.code(n)),this._endBlockNode(Jp,Gp)}throw(e){return this._leafNode(new KS(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||e!==void 0&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=ht.nil,n,s){return this._blockNode(new Wp(e,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Wp)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let n=this._currNode;if(n instanceof e||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof uc))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};it.CodeGen=XS;function lc(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function Dg(t,e){return e instanceof ht._CodeOrName?lc(t,e.names):t}function rd(t,e,r){if(t instanceof ht.Name)return n(t);if(!s(t))return t;return new ht._Code(t._items.reduce((i,o)=>(o instanceof ht.Name&&(o=n(o)),o instanceof ht._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||e[i.str]!==1?i:(delete e[i.str],o)}function s(i){return i instanceof ht._Code&&i._items.some(o=>o instanceof ht.Name&&e[o.str]===1&&r[o.str]!==void 0)}}function Voe(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function H$(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,ht._)`!${YS(t)}`}it.not=H$;var Koe=W$(it.operators.AND);function Hoe(...t){return t.reduce(Koe)}it.and=Hoe;var Woe=W$(it.operators.OR);function zoe(...t){return t.reduce(Woe)}it.or=zoe;function W$(t){return(e,r)=>e===ht.nil?r:r===ht.nil?e:(0,ht._)`${YS(e)} ${t} ${YS(r)}`}function YS(t){return t instanceof ht.Name?t:(0,ht._)`(${t})`}});var Et=v(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.checkStrictMode=st.getErrorPath=st.Type=st.useFunc=st.setEvaluated=st.evaluatedPropsToName=st.mergeEvaluated=st.eachItem=st.unescapeJsonPointer=st.escapeJsonPointer=st.escapeFragment=st.unescapeFragment=st.schemaRefOrVal=st.schemaHasRulesButRef=st.schemaHasRules=st.checkUnknownRules=st.alwaysValidSchema=st.toHash=void 0;var jt=Qe(),Joe=Kp();function Goe(t){let e={};for(let r of t)e[r]=!0;return e}st.toHash=Goe;function Xoe(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(G$(t,e),!X$(e,t.self.RULES.all))}st.alwaysValidSchema=Xoe;function G$(t,e=t.schema){let{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;let s=n.RULES.keywords;for(let i in e)s[i]||eN(t,`unknown keyword: "${i}"`)}st.checkUnknownRules=G$;function X$(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}st.schemaHasRules=X$;function Yoe(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}st.schemaHasRulesButRef=Yoe;function Zoe({topSchemaRef:t,schemaPath:e},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,jt._)`${r}`}return(0,jt._)`${t}${e}${(0,jt.getProperty)(n)}`}st.schemaRefOrVal=Zoe;function Qoe(t){return Y$(decodeURIComponent(t))}st.unescapeFragment=Qoe;function eae(t){return encodeURIComponent(ZS(t))}st.escapeFragment=eae;function ZS(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}st.escapeJsonPointer=ZS;function Y$(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}st.unescapeJsonPointer=Y$;function tae(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}st.eachItem=tae;function z$({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof jt.Name?(i instanceof jt.Name?t(s,i,o):e(s,i,o),o):i instanceof jt.Name?(e(s,o,i),i):r(i,o);return a===jt.Name&&!(u instanceof jt.Name)?n(s,u):u}}st.mergeEvaluated={props:z$({mergeNames:(t,e,r)=>t.if((0,jt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,jt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,jt._)`${r} || {}`).code((0,jt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,jt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,jt._)`${r} || {}`),QS(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Z$}),items:z$({mergeNames:(t,e,r)=>t.if((0,jt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,jt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,jt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,jt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Z$(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,jt._)`{}`);return e!==void 0&&QS(t,r,e),r}st.evaluatedPropsToName=Z$;function QS(t,e,r){Object.keys(r).forEach(n=>t.assign((0,jt._)`${e}${(0,jt.getProperty)(n)}`,!0))}st.setEvaluated=QS;var J$={};function rae(t,e){return t.scopeValue("func",{ref:e,code:J$[e.code]||(J$[e.code]=new Joe._Code(e.code))})}st.useFunc=rae;var Q$;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(Q$=st.Type||(st.Type={}));function nae(t,e,r){if(t instanceof jt.Name){let n=e===Q$.Num;return r?n?(0,jt._)`"[" + ${t} + "]"`:(0,jt._)`"['" + ${t} + "']"`:n?(0,jt._)`"/" + ${t}`:(0,jt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,jt.getProperty)(t).toString():"/"+ZS(t)}st.getErrorPath=nae;function eN(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}st.checkStrictMode=eN});var qo=v(eD=>{"use strict";Object.defineProperty(eD,"__esModule",{value:!0});var an=Qe(),iae={data:new an.Name("data"),valCxt:new an.Name("valCxt"),instancePath:new an.Name("instancePath"),parentData:new an.Name("parentData"),parentDataProperty:new an.Name("parentDataProperty"),rootData:new an.Name("rootData"),dynamicAnchors:new an.Name("dynamicAnchors"),vErrors:new an.Name("vErrors"),errors:new an.Name("errors"),this:new an.Name("this"),self:new an.Name("self"),scope:new an.Name("scope"),json:new an.Name("json"),jsonPos:new an.Name("jsonPos"),jsonLen:new an.Name("jsonLen"),jsonPart:new an.Name("jsonPart")};eD.default=iae});var Xp=v(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.extendErrors=un.resetErrorsCount=un.reportExtraError=un.reportError=un.keyword$DataError=un.keywordError=void 0;var gt=Qe(),xg=Et(),yn=qo();un.keywordError={message:({keyword:t})=>(0,gt.str)`must pass "${t}" keyword validation`};un.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,gt.str)`"${t}" keyword must be ${e} ($data)`:(0,gt.str)`"${t}" keyword is invalid ($data)`};function sae(t,e=un.keywordError,r,n){let{it:s}=t,{gen:i,compositeRule:o,allErrors:a}=s,u=nN(t,e,r);n??(o||a)?tN(i,u):rN(s,(0,gt._)`[${u}]`)}un.reportError=sae;function oae(t,e=un.keywordError,r){let{it:n}=t,{gen:s,compositeRule:i,allErrors:o}=n,a=nN(t,e,r);tN(s,a),i||o||rN(n,yn.default.vErrors)}un.reportExtraError=oae;function aae(t,e){t.assign(yn.default.errors,e),t.if((0,gt._)`${yn.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,gt._)`${yn.default.vErrors}.length`,e),()=>t.assign(yn.default.vErrors,null)))}un.resetErrorsCount=aae;function uae({gen:t,keyword:e,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=t.name("err");t.forRange("i",s,yn.default.errors,a=>{t.const(o,(0,gt._)`${yn.default.vErrors}[${a}]`),t.if((0,gt._)`${o}.instancePath === undefined`,()=>t.assign((0,gt._)`${o}.instancePath`,(0,gt.strConcat)(yn.default.instancePath,i.errorPath))),t.assign((0,gt._)`${o}.schemaPath`,(0,gt.str)`${i.errSchemaPath}/${e}`),i.opts.verbose&&(t.assign((0,gt._)`${o}.schema`,r),t.assign((0,gt._)`${o}.data`,n))})}un.extendErrors=uae;function tN(t,e){let r=t.const("err",e);t.if((0,gt._)`${yn.default.vErrors} === null`,()=>t.assign(yn.default.vErrors,(0,gt._)`[${r}]`),(0,gt._)`${yn.default.vErrors}.push(${r})`),t.code((0,gt._)`${yn.default.errors}++`)}function rN(t,e){let{gen:r,validateName:n,schemaEnv:s}=t;s.$async?r.throw((0,gt._)`new ${t.ValidationError}(${e})`):(r.assign((0,gt._)`${n}.errors`,e),r.return(!1))}var dc={keyword:new gt.Name("keyword"),schemaPath:new gt.Name("schemaPath"),params:new gt.Name("params"),propertyName:new gt.Name("propertyName"),message:new gt.Name("message"),schema:new gt.Name("schema"),parentSchema:new gt.Name("parentSchema")};function nN(t,e,r){let{createErrors:n}=t.it;return n===!1?(0,gt._)`{}`:cae(t,e,r)}function cae(t,e,r={}){let{gen:n,it:s}=t,i=[lae(s,r),dae(t,r)];return fae(t,e,i),n.object(...i)}function lae({errorPath:t},{instancePath:e}){let r=e?(0,gt.str)`${t}${(0,xg.getErrorPath)(e,xg.Type.Str)}`:t;return[yn.default.instancePath,(0,gt.strConcat)(yn.default.instancePath,r)]}function dae({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:n}){let s=n?e:(0,gt.str)`${e}/${t}`;return r&&(s=(0,gt.str)`${s}${(0,xg.getErrorPath)(r,xg.Type.Str)}`),[dc.schemaPath,s]}function fae(t,{params:e,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=t,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:d}=a;n.push([dc.keyword,s],[dc.params,typeof e=="function"?e(t):e||(0,gt._)`{}`]),u.messages&&n.push([dc.message,typeof r=="function"?r(t):r]),u.verbose&&n.push([dc.schema,o],[dc.parentSchema,(0,gt._)`${l}${d}`],[yn.default.data,i]),c&&n.push([dc.propertyName,c])}});var sN=v(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.boolOrEmptySchema=nd.topBoolOrEmptySchema=void 0;var pae=Xp(),hae=Qe(),mae=qo(),yae={message:"boolean schema is false"};function gae(t){let{gen:e,schema:r,validateName:n}=t;r===!1?iN(t,!1):typeof r=="object"&&r.$async===!0?e.return(mae.default.data):(e.assign((0,hae._)`${n}.errors`,null),e.return(!0))}nd.topBoolOrEmptySchema=gae;function bae(t,e){let{gen:r,schema:n}=t;n===!1?(r.var(e,!1),iN(t)):r.var(e,!0)}nd.boolOrEmptySchema=bae;function iN(t,e){let{gen:r,data:n}=t,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,pae.reportError)(s,yae,void 0,e)}});var tD=v(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.getRules=id.isJSONType=void 0;var vae=["string","number","integer","boolean","null","object","array"],wae=new Set(vae);function Eae(t){return typeof t=="string"&&wae.has(t)}id.isJSONType=Eae;function _ae(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}id.getRules=_ae});var rD=v(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.shouldUseRule=Ta.shouldUseGroup=Ta.schemaHasRulesForType=void 0;function Sae({schema:t,self:e},r){let n=e.RULES.types[r];return n&&n!==!0&&oN(t,n)}Ta.schemaHasRulesForType=Sae;function oN(t,e){return e.rules.some(r=>aN(t,r))}Ta.shouldUseGroup=oN;function aN(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}Ta.shouldUseRule=aN});var Zp=v(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.reportTypeError=Xr.checkDataTypes=Xr.checkDataType=Xr.coerceAndCheckDataType=Xr.getJSONTypes=Xr.getSchemaTypes=Xr.DataType=void 0;var Dae=tD(),Aae=rD(),xae=Xp(),We=Qe(),uN=Et(),Yp;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Yp=Xr.DataType||(Xr.DataType={}));function Cae(t){let e=cN(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Xr.getSchemaTypes=Cae;function cN(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Dae.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Xr.getJSONTypes=cN;function Pae(t,e){let{gen:r,data:n,opts:s}=t,i=Oae(e,s.coerceTypes),o=e.length>0&&!(i.length===0&&e.length===1&&(0,Aae.schemaHasRulesForType)(t,e[0]));if(o){let a=iD(e,n,s.strictNumbers,Yp.Wrong);r.if(a,()=>{i.length?Bae(t,e,i):sD(t)})}return o}Xr.coerceAndCheckDataType=Pae;var lN=new Set(["string","number","integer","boolean","null"]);function Oae(t,e){return e?t.filter(r=>lN.has(r)||e==="array"&&r==="array"):[]}function Bae(t,e,r){let{gen:n,data:s,opts:i}=t,o=n.let("dataType",(0,We._)`typeof ${s}`),a=n.let("coerced",(0,We._)`undefined`);i.coerceTypes==="array"&&n.if((0,We._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,We._)`${s}[0]`).assign(o,(0,We._)`typeof ${s}`).if(iD(e,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,We._)`${a} !== undefined`);for(let c of r)(lN.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),sD(t),n.endIf(),n.if((0,We._)`${a} !== undefined`,()=>{n.assign(s,a),Tae(t,a)});function u(c){switch(c){case"string":n.elseIf((0,We._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,We._)`"" + ${s}`).elseIf((0,We._)`${s} === null`).assign(a,(0,We._)`""`);return;case"number":n.elseIf((0,We._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,We._)`+${s}`);return;case"integer":n.elseIf((0,We._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,We._)`+${s}`);return;case"boolean":n.elseIf((0,We._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,We._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,We._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,We._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,We._)`[${s}]`)}}}function Tae({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,We._)`${e} !== undefined`,()=>t.assign((0,We._)`${e}[${r}]`,n))}function nD(t,e,r,n=Yp.Correct){let s=n===Yp.Correct?We.operators.EQ:We.operators.NEQ,i;switch(t){case"null":return(0,We._)`${e} ${s} null`;case"array":i=(0,We._)`Array.isArray(${e})`;break;case"object":i=(0,We._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":i=o((0,We._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":i=o();break;default:return(0,We._)`typeof ${e} ${s} ${t}`}return n===Yp.Correct?i:(0,We.not)(i);function o(a=We.nil){return(0,We.and)((0,We._)`typeof ${e} == "number"`,a,r?(0,We._)`isFinite(${e})`:We.nil)}}Xr.checkDataType=nD;function iD(t,e,r,n){if(t.length===1)return nD(t[0],e,r,n);let s,i=(0,uN.toHash)(t);if(i.array&&i.object){let o=(0,We._)`typeof ${e} != "object"`;s=i.null?o:(0,We._)`!${e} || ${o}`,delete i.null,delete i.array,delete i.object}else s=We.nil;i.number&&delete i.integer;for(let o in i)s=(0,We.and)(s,nD(o,e,r,n));return s}Xr.checkDataTypes=iD;var Fae={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,We._)`{type: ${t}}`:(0,We._)`{type: ${e}}`};function sD(t){let e=Iae(t);(0,xae.reportError)(e,Fae)}Xr.reportTypeError=sD;function Iae(t){let{gen:e,data:r,schema:n}=t,s=(0,uN.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:t}}});var fN=v(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.assignDefaults=void 0;var sd=Qe(),kae=Et();function Rae(t,e){let{properties:r,items:n}=t.schema;if(e==="object"&&r)for(let s in r)dN(t,s,r[s].default);else e==="array"&&Array.isArray(n)&&n.forEach((s,i)=>dN(t,i,s.default))}Cg.assignDefaults=Rae;function dN(t,e,r){let{gen:n,compositeRule:s,data:i,opts:o}=t;if(r===void 0)return;let a=(0,sd._)`${i}${(0,sd.getProperty)(e)}`;if(s){(0,kae.checkStrictMode)(t,`default is ignored for: ${a}`);return}let u=(0,sd._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,sd._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,sd._)`${a} = ${(0,sd.stringify)(r)}`)}});var vi=v(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.validateUnion=kt.validateArray=kt.usePattern=kt.callValidateCode=kt.schemaProperties=kt.allSchemaProperties=kt.noPropertyInData=kt.propertyInData=kt.isOwnProperty=kt.hasPropFunc=kt.reportMissingProp=kt.checkMissingProp=kt.checkReportMissingProp=void 0;var Kt=Qe(),oD=Et(),Fa=qo(),$ae=Et();function Nae(t,e){let{gen:r,data:n,it:s}=t;r.if(uD(r,n,e,s.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Kt._)`${e}`},!0),t.error()})}kt.checkReportMissingProp=Nae;function Mae({gen:t,data:e,it:{opts:r}},n,s){return(0,Kt.or)(...n.map(i=>(0,Kt.and)(uD(t,e,i,r.ownProperties),(0,Kt._)`${s} = ${i}`)))}kt.checkMissingProp=Mae;function jae(t,e){t.setParams({missingProperty:e},!0),t.error()}kt.reportMissingProp=jae;function pN(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Kt._)`Object.prototype.hasOwnProperty`})}kt.hasPropFunc=pN;function aD(t,e,r){return(0,Kt._)`${pN(t)}.call(${e}, ${r})`}kt.isOwnProperty=aD;function qae(t,e,r,n){let s=(0,Kt._)`${e}${(0,Kt.getProperty)(r)} !== undefined`;return n?(0,Kt._)`${s} && ${aD(t,e,r)}`:s}kt.propertyInData=qae;function uD(t,e,r,n){let s=(0,Kt._)`${e}${(0,Kt.getProperty)(r)} === undefined`;return n?(0,Kt.or)(s,(0,Kt.not)(aD(t,e,r))):s}kt.noPropertyInData=uD;function hN(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}kt.allSchemaProperties=hN;function Lae(t,e){return hN(e).filter(r=>!(0,oD.alwaysValidSchema)(t,e[r]))}kt.schemaProperties=Lae;function Uae({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,Kt._)`${t}, ${e}, ${n}${s}`:e,d=[[Fa.default.instancePath,(0,Kt.strConcat)(Fa.default.instancePath,i)],[Fa.default.parentData,o.parentData],[Fa.default.parentDataProperty,o.parentDataProperty],[Fa.default.rootData,Fa.default.rootData]];o.opts.dynamicRef&&d.push([Fa.default.dynamicAnchors,Fa.default.dynamicAnchors]);let p=(0,Kt._)`${l}, ${r.object(...d)}`;return u!==Kt.nil?(0,Kt._)`${a}.call(${u}, ${p})`:(0,Kt._)`${a}(${p})`}kt.callValidateCode=Uae;var Vae=(0,Kt._)`new RegExp`;function Kae({gen:t,it:{opts:e}},r){let n=e.unicodeRegExp?"u":"",{regExp:s}=e.code,i=s(r,n);return t.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Kt._)`${s.code==="new RegExp"?Vae:(0,$ae.useFunc)(t,s)}(${r}, ${n})`})}kt.usePattern=Kae;function Hae(t){let{gen:e,data:r,keyword:n,it:s}=t,i=e.name("valid");if(s.allErrors){let a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(i,!0),o(()=>e.break()),i;function o(a){let u=e.const("len",(0,Kt._)`${r}.length`);e.forRange("i",0,u,c=>{t.subschema({keyword:n,dataProp:c,dataPropType:oD.Type.Num},i),e.if((0,Kt.not)(i),a)})}}kt.validateArray=Hae;function Wae(t){let{gen:e,schema:r,keyword:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,oD.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((u,c)=>{let l=t.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);e.assign(o,(0,Kt._)`${o} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,Kt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}kt.validateUnion=Wae});var gN=v(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.validateKeywordUsage=Ls.validSchemaType=Ls.funcKeywordCode=Ls.macroKeywordCode=void 0;var gn=Qe(),fc=qo(),zae=vi(),Jae=Xp();function Gae(t,e){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=t,a=e.macro.call(o.self,s,i,o),u=yN(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");t.subschema({schema:a,schemaPath:gn.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),t.pass(c,()=>t.error(!0))}Ls.macroKeywordCode=Gae;function Xae(t,e){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=t;Zae(u,e);let c=!a&&e.compile?e.compile.call(u.self,i,o,u):e.validate,l=yN(n,s,c),d=n.let("valid");t.block$data(d,p),t.ok((r=e.valid)!==null&&r!==void 0?r:d);function p(){if(e.errors===!1)y(),e.modifying&&mN(t),g(()=>t.error());else{let S=e.async?f():h();e.modifying&&mN(t),g(()=>Yae(t,S))}}function f(){let S=n.let("ruleErrs",null);return n.try(()=>y((0,gn._)`await `),A=>n.assign(d,!1).if((0,gn._)`${A} instanceof ${u.ValidationError}`,()=>n.assign(S,(0,gn._)`${A}.errors`),()=>n.throw(A))),S}function h(){let S=(0,gn._)`${l}.errors`;return n.assign(S,null),y(gn.nil),S}function y(S=e.async?(0,gn._)`await `:gn.nil){let A=u.opts.passContext?fc.default.this:fc.default.self,w=!("compile"in e&&!a||e.schema===!1);n.assign(d,(0,gn._)`${S}${(0,zae.callValidateCode)(t,l,A,w)}`,e.modifying)}function g(S){var A;n.if((0,gn.not)((A=e.valid)!==null&&A!==void 0?A:d),S)}}Ls.funcKeywordCode=Xae;function mN(t){let{gen:e,data:r,it:n}=t;e.if(n.parentData,()=>e.assign(r,(0,gn._)`${n.parentData}[${n.parentDataProperty}]`))}function Yae(t,e){let{gen:r}=t;r.if((0,gn._)`Array.isArray(${e})`,()=>{r.assign(fc.default.vErrors,(0,gn._)`${fc.default.vErrors} === null ? ${e} : ${fc.default.vErrors}.concat(${e})`).assign(fc.default.errors,(0,gn._)`${fc.default.vErrors}.length`),(0,Jae.extendErrors)(t)},()=>t.error())}function Zae({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function yN(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,gn.stringify)(r)})}function Qae(t,e,r=!1){return!e.length||e.some(n=>n==="array"?Array.isArray(t):n==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==n||r&&typeof t>"u")}Ls.validSchemaType=Qae;function eue({schema:t,opts:e,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(t[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Ls.validateKeywordUsage=eue});var vN=v(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.extendSubschemaMode=Ia.extendSubschemaData=Ia.getSubschema=void 0;var Us=Qe(),bN=Et();function tue(t,{keyword:e,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(e!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,Us._)`${t.schemaPath}${(0,Us.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,Us._)`${t.schemaPath}${(0,Us.getProperty)(e)}${(0,Us.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,bN.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}Ia.getSubschema=tue;function rue(t,e,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:d}=e,p=a.let("data",(0,Us._)`${e.data}${(0,Us.getProperty)(r)}`,!0);u(p),t.errorPath=(0,Us.str)`${c}${(0,bN.getErrorPath)(r,n,d.jsPropertySyntax)}`,t.parentDataProperty=(0,Us._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(s!==void 0){let c=s instanceof Us.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(t.propertyName=o)}i&&(t.dataTypes=i);function u(c){t.data=c,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,c]}}Ia.extendSubschemaData=rue;function nue(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(t.compositeRule=n),s!==void 0&&(t.createErrors=s),i!==void 0&&(t.allErrors=i),t.jtdDiscriminator=e,t.jtdMetadata=r}Ia.extendSubschemaMode=nue});var EN=v((FDe,wN)=>{"use strict";var ka=wN.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Pg(e,n,s,t,"",t)};ka.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ka.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ka.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ka.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Pg(t,e,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,s,i,o,a,u,c);for(var l in n){var d=n[l];if(Array.isArray(d)){if(l in ka.arrayKeywords)for(var p=0;p<d.length;p++)Pg(t,e,r,d[p],s+"/"+l+"/"+p,i,s,l,n,p)}else if(l in ka.propsKeywords){if(d&&typeof d=="object")for(var f in d)Pg(t,e,r,d[f],s+"/"+l+"/"+iue(f),i,s,l,n,f)}else(l in ka.keywords||t.allKeys&&!(l in ka.skipKeywords))&&Pg(t,e,r,d,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function iue(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Qp=v(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.getSchemaRefs=kn.resolveUrl=kn.normalizeId=kn._getFullPath=kn.getFullPath=kn.inlineRef=void 0;var sue=Et(),oue=_S(),aue=EN(),uue=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function cue(t,e=!0){return typeof t=="boolean"?!0:e===!0?!cD(t):e?_N(t)<=e:!1}kn.inlineRef=cue;var lue=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function cD(t){for(let e in t){if(lue.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(cD)||typeof r=="object"&&cD(r))return!0}return!1}function _N(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!uue.has(r)&&(typeof t[r]=="object"&&(0,sue.eachItem)(t[r],n=>e+=_N(n)),e===1/0))return 1/0}return e}function SN(t,e="",r){r!==!1&&(e=od(e));let n=t.parse(e);return DN(t,n)}kn.getFullPath=SN;function DN(t,e){return t.serialize(e).split("#")[0]+"#"}kn._getFullPath=DN;var due=/#\/?$/;function od(t){return t?t.replace(due,""):""}kn.normalizeId=od;function fue(t,e,r){return r=od(r),t.resolve(e,r)}kn.resolveUrl=fue;var pue=/^[a-z_][-a-z0-9._]*$/i;function hue(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=od(t[r]||e),i={"":s},o=SN(n,s,!1),a={},u=new Set;return aue(t,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let y=o+p,g=i[h];typeof d[r]=="string"&&(g=S.call(this,d[r])),A.call(this,d.$anchor),A.call(this,d.$dynamicAnchor),i[p]=g;function S(w){let P=this.opts.uriResolver.resolve;if(w=od(g?P(g,w):w),u.has(w))throw l(w);u.add(w);let D=this.refs[w];return typeof D=="string"&&(D=this.refs[D]),typeof D=="object"?c(d,D.schema,w):w!==od(y)&&(w[0]==="#"?(c(d,a[w],w),a[w]=d):this.refs[w]=y),w}function A(w){if(typeof w=="string"){if(!pue.test(w))throw new Error(`invalid anchor "${w}"`);S.call(this,`#${w}`)}}}),a;function c(d,p,f){if(p!==void 0&&!oue(d,p))throw l(f)}function l(d){return new Error(`reference "${d}" resolves to more than one schema`)}}kn.getSchemaRefs=hue});var rh=v(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.getData=Ra.KeywordCxt=Ra.validateFunctionCode=void 0;var ON=sN(),AN=Zp(),dD=rD(),Og=Zp(),mue=fN(),th=gN(),lD=vN(),De=Qe(),Me=qo(),yue=Qp(),Lo=Et(),eh=Xp();function gue(t){if(FN(t)&&(IN(t),TN(t))){wue(t);return}BN(t,()=>(0,ON.topBoolOrEmptySchema)(t))}Ra.validateFunctionCode=gue;function BN({gen:t,validateName:e,schema:r,schemaEnv:n,opts:s},i){s.code.es5?t.func(e,(0,De._)`${Me.default.data}, ${Me.default.valCxt}`,n.$async,()=>{t.code((0,De._)`"use strict"; ${xN(r,s)}`),vue(t,s),t.code(i)}):t.func(e,(0,De._)`${Me.default.data}, ${bue(s)}`,n.$async,()=>t.code(xN(r,s)).code(i))}function bue(t){return(0,De._)`{${Me.default.instancePath}="", ${Me.default.parentData}, ${Me.default.parentDataProperty}, ${Me.default.rootData}=${Me.default.data}${t.dynamicRef?(0,De._)`, ${Me.default.dynamicAnchors}={}`:De.nil}}={}`}function vue(t,e){t.if(Me.default.valCxt,()=>{t.var(Me.default.instancePath,(0,De._)`${Me.default.valCxt}.${Me.default.instancePath}`),t.var(Me.default.parentData,(0,De._)`${Me.default.valCxt}.${Me.default.parentData}`),t.var(Me.default.parentDataProperty,(0,De._)`${Me.default.valCxt}.${Me.default.parentDataProperty}`),t.var(Me.default.rootData,(0,De._)`${Me.default.valCxt}.${Me.default.rootData}`),e.dynamicRef&&t.var(Me.default.dynamicAnchors,(0,De._)`${Me.default.valCxt}.${Me.default.dynamicAnchors}`)},()=>{t.var(Me.default.instancePath,(0,De._)`""`),t.var(Me.default.parentData,(0,De._)`undefined`),t.var(Me.default.parentDataProperty,(0,De._)`undefined`),t.var(Me.default.rootData,Me.default.data),e.dynamicRef&&t.var(Me.default.dynamicAnchors,(0,De._)`{}`)})}function wue(t){let{schema:e,opts:r,gen:n}=t;BN(t,()=>{r.$comment&&e.$comment&&RN(t),Aue(t),n.let(Me.default.vErrors,null),n.let(Me.default.errors,0),r.unevaluated&&Eue(t),kN(t),Pue(t)})}function Eue(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,De._)`${r}.evaluated`),e.if((0,De._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,De._)`${t.evaluated}.props`,(0,De._)`undefined`)),e.if((0,De._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,De._)`${t.evaluated}.items`,(0,De._)`undefined`))}function xN(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,De._)`/*# sourceURL=${r} */`:De.nil}function _ue(t,e){if(FN(t)&&(IN(t),TN(t))){Sue(t,e);return}(0,ON.boolOrEmptySchema)(t,e)}function TN({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function FN(t){return typeof t.schema!="boolean"}function Sue(t,e){let{schema:r,gen:n,opts:s}=t;s.$comment&&r.$comment&&RN(t),xue(t),Cue(t);let i=n.const("_errs",Me.default.errors);kN(t,i),n.var(e,(0,De._)`${i} === ${Me.default.errors}`)}function IN(t){(0,Lo.checkUnknownRules)(t),Due(t)}function kN(t,e){if(t.opts.jtd)return CN(t,[],!1,e);let r=(0,AN.getSchemaTypes)(t.schema),n=(0,AN.coerceAndCheckDataType)(t,r);CN(t,r,!n,e)}function Due(t){let{schema:e,errSchemaPath:r,opts:n,self:s}=t;e.$ref&&n.ignoreKeywordsWithRef&&(0,Lo.schemaHasRulesButRef)(e,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Aue(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Lo.checkStrictMode)(t,"default is ignored in the schema root")}function xue(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,yue.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Cue(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function RN({gen:t,schemaEnv:e,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)t.code((0,De._)`${Me.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,De.str)`${n}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,De._)`${Me.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Pue(t){let{gen:e,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=t;r.$async?e.if((0,De._)`${Me.default.errors} === 0`,()=>e.return(Me.default.data),()=>e.throw((0,De._)`new ${s}(${Me.default.vErrors})`)):(e.assign((0,De._)`${n}.errors`,Me.default.vErrors),i.unevaluated&&Oue(t),e.return((0,De._)`${Me.default.errors} === 0`))}function Oue({gen:t,evaluated:e,props:r,items:n}){r instanceof De.Name&&t.assign((0,De._)`${e}.props`,r),n instanceof De.Name&&t.assign((0,De._)`${e}.items`,n)}function CN(t,e,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=t,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,Lo.schemaHasRulesButRef)(i,l))){s.block(()=>NN(t,"$ref",l.all.$ref.definition));return}u.jtd||Bue(t,e),s.block(()=>{for(let p of l.rules)d(p);d(l.post)});function d(p){(0,dD.shouldUseGroup)(i,p)&&(p.type?(s.if((0,Og.checkDataType)(p.type,o,u.strictNumbers)),PN(t,p),e.length===1&&e[0]===p.type&&r&&(s.else(),(0,Og.reportTypeError)(t)),s.endIf()):PN(t,p),a||s.if((0,De._)`${Me.default.errors} === ${n||0}`))}}function PN(t,e){let{gen:r,schema:n,opts:{useDefaults:s}}=t;s&&(0,mue.assignDefaults)(t,e.type),r.block(()=>{for(let i of e.rules)(0,dD.shouldUseRule)(n,i)&&NN(t,i.keyword,i.definition,e.type)})}function Bue(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Tue(t,e),t.opts.allowUnionTypes||Fue(t,e),Iue(t,t.dataTypes))}function Tue(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{$N(t.dataTypes,r)||fD(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),Rue(t,e)}}function Fue(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&fD(t,"use allowUnionTypes to allow union type keyword")}function Iue(t,e){let r=t.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,dD.shouldUseRule)(t.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>kue(e,o))&&fD(t,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function kue(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function $N(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function Rue(t,e){let r=[];for(let n of t.dataTypes)$N(e,n)?r.push(n):e.includes("integer")&&n==="number"&&r.push("integer");t.dataTypes=r}function fD(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,Lo.checkStrictMode)(t,e,t.opts.strictTypes)}var Bg=class{constructor(e,r,n){if((0,th.validateKeywordUsage)(e,r,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Lo.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",MN(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,th.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",Me.default.errors))}result(e,r,n){this.failResult((0,De.not)(e),r,n)}failResult(e,r,n){this.gen.if(e),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,De.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,De._)`${r} !== undefined && (${(0,De.or)(this.invalid$data(),e)})`)}error(e,r,n){if(r){this.setParams(r),this._error(e,n),this.setParams({});return}this._error(e,n)}_error(e,r){(e?eh.reportExtraError:eh.reportError)(this,this.def.error,r)}$dataError(){(0,eh.reportError)(this,this.def.$dataError||eh.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,eh.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,n=De.nil){this.gen.block(()=>{this.check$data(e,n),r()})}check$data(e=De.nil,r=De.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,De.or)((0,De._)`${s} === undefined`,r)),e!==De.nil&&n.assign(e,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==De.nil&&n.assign(e,!1)),n.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,De.or)(o(),a());function o(){if(n.length){if(!(r instanceof De.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,De._)`${(0,Og.checkDataTypes)(u,r,i.opts.strictNumbers,Og.DataType.Wrong)}`}return De.nil}function a(){if(s.validateSchema){let u=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,De._)`!${u}(${r})`}return De.nil}}subschema(e,r){let n=(0,lD.getSubschema)(this.it,e);(0,lD.extendSubschemaData)(n,this.it,e),(0,lD.extendSubschemaMode)(n,e);let s={...this.it,...n,items:void 0,props:void 0};return _ue(s,r),s}mergeEvaluated(e,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&e.props!==void 0&&(n.props=Lo.mergeEvaluated.props(s,e.props,n.props,r)),n.items!==!0&&e.items!==void 0&&(n.items=Lo.mergeEvaluated.items(s,e.items,n.items,r)))}mergeValidEvaluated(e,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(e,De.Name)),!0}};Ra.KeywordCxt=Bg;function NN(t,e,r,n){let s=new Bg(t,r,e);"code"in r?r.code(s,n):s.$data&&r.validate?(0,th.funcKeywordCode)(s,r):"macro"in r?(0,th.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,th.funcKeywordCode)(s,r)}var $ue=/^\/(?:[^~]|~0|~1)*$/,Nue=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function MN(t,{dataLevel:e,dataNames:r,dataPathArr:n}){let s,i;if(t==="")return Me.default.rootData;if(t[0]==="/"){if(!$ue.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);s=t,i=Me.default.rootData}else{let c=Nue.exec(t);if(!c)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=e)throw new Error(u("property/index",l));return n[e-l]}if(l>e)throw new Error(u("data",l));if(i=r[e-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,De._)`${i}${(0,De.getProperty)((0,Lo.unescapeJsonPointer)(c))}`,o=(0,De._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${e}`}}Ra.getData=MN});var Tg=v(hD=>{"use strict";Object.defineProperty(hD,"__esModule",{value:!0});var pD=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};hD.default=pD});var Fg=v(gD=>{"use strict";Object.defineProperty(gD,"__esModule",{value:!0});var mD=Qp(),yD=class extends Error{constructor(e,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,mD.resolveUrl)(e,r,n),this.missingSchema=(0,mD.normalizeId)((0,mD.getFullPath)(e,this.missingRef))}};gD.default=yD});var kg=v(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.resolveSchema=wi.getCompilingSchema=wi.resolveRef=wi.compileSchema=wi.SchemaEnv=void 0;var Ki=Qe(),Mue=Tg(),pc=qo(),Hi=Qp(),jN=Et(),jue=rh(),ad=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Hi.normalizeId)(n?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n?.$async,this.refs={}}};wi.SchemaEnv=ad;function vD(t){let e=qN.call(this,t);if(e)return e;let r=(0,Hi.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Ki.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;t.$async&&(a=o.scopeValue("Error",{ref:Mue.default,code:(0,Ki._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");t.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:pc.default.data,parentData:pc.default.parentData,parentDataProperty:pc.default.parentDataProperty,dataNames:[pc.default.data],dataPathArr:[Ki.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,Ki.stringify)(t.schema)}:{ref:t.schema}),validateName:u,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:Ki.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ki._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,jue.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();l=`${o.scopeRefs(pc.default.scope)}return ${d}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let f=new Function(`${pc.default.self}`,`${pc.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=t.schema,f.schemaEnv=t,t.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:u,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:y}=c;f.evaluated={props:h instanceof Ki.Name?void 0:h,items:y instanceof Ki.Name?void 0:y,dynamicProps:h instanceof Ki.Name,dynamicItems:y instanceof Ki.Name},f.source&&(f.source.evaluated=(0,Ki.stringify)(f.evaluated))}return t.validate=f,t}catch(d){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),d}finally{this._compilations.delete(t)}}wi.compileSchema=vD;function que(t,e,r){var n;r=(0,Hi.resolveUrl)(this.opts.uriResolver,e,r);let s=t.refs[r];if(s)return s;let i=Vue.call(this,t,r);if(i===void 0){let o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new ad({schema:o,schemaId:a,root:t,baseId:e}))}if(i!==void 0)return t.refs[r]=Lue.call(this,i)}wi.resolveRef=que;function Lue(t){return(0,Hi.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:vD.call(this,t)}function qN(t){for(let e of this._compilations)if(Uue(e,t))return e}wi.getCompilingSchema=qN;function Uue(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Vue(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||Ig.call(this,t,e)}function Ig(t,e){let r=this.opts.uriResolver.parse(e),n=(0,Hi._getFullPath)(this.opts.uriResolver,r),s=(0,Hi.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===s)return bD.call(this,r,t);let i=(0,Hi.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Ig.call(this,t,o);return typeof a?.schema!="object"?void 0:bD.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||vD.call(this,o),i===(0,Hi.normalizeId)(e)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,Hi.resolveUrl)(this.opts.uriResolver,s,c)),new ad({schema:a,schemaId:u,root:t,baseId:s})}return bD.call(this,r,o)}}wi.resolveSchema=Ig;var Kue=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function bD(t,{baseId:e,schema:r,root:n}){var s;if(((s=t.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,jN.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!Kue.has(a)&&c&&(e=(0,Hi.resolveUrl)(this.opts.uriResolver,e,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,jN.schemaHasRulesButRef)(r,this.RULES)){let a=(0,Hi.resolveUrl)(this.opts.uriResolver,e,r.$ref);i=Ig.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new ad({schema:r,schemaId:o,root:n,baseId:e}),i.schema!==i.root.schema)return i}});var LN=v((MDe,Hue)=>{Hue.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var VN=v(wD=>{"use strict";Object.defineProperty(wD,"__esModule",{value:!0});var UN=uE();UN.code='require("ajv/dist/runtime/uri").default';wD.default=UN});var YN=v(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.CodeGen=Yr.Name=Yr.nil=Yr.stringify=Yr.str=Yr._=Yr.KeywordCxt=void 0;var Wue=rh();Object.defineProperty(Yr,"KeywordCxt",{enumerable:!0,get:function(){return Wue.KeywordCxt}});var ud=Qe();Object.defineProperty(Yr,"_",{enumerable:!0,get:function(){return ud._}});Object.defineProperty(Yr,"str",{enumerable:!0,get:function(){return ud.str}});Object.defineProperty(Yr,"stringify",{enumerable:!0,get:function(){return ud.stringify}});Object.defineProperty(Yr,"nil",{enumerable:!0,get:function(){return ud.nil}});Object.defineProperty(Yr,"Name",{enumerable:!0,get:function(){return ud.Name}});Object.defineProperty(Yr,"CodeGen",{enumerable:!0,get:function(){return ud.CodeGen}});var zue=Tg(),JN=Fg(),Jue=tD(),nh=kg(),Gue=Qe(),ih=Qp(),Rg=Zp(),_D=Et(),KN=LN(),Xue=VN(),GN=(t,e)=>new RegExp(t,e);GN.code="new RegExp";var Yue=["removeAdditional","useDefaults","coerceTypes"],Zue=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Que={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},ece={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},HN=200;function tce(t){var e,r,n,s,i,o,a,u,c,l,d,p,f,h,y,g,S,A,w,P,D,O,B,F,N;let R=t.strict,q=(e=t.code)===null||e===void 0?void 0:e.optimize,M=q===!0||q===void 0?1:q||0,Z=(n=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:GN,Q=(s=t.uriResolver)!==null&&s!==void 0?s:Xue.default;return{strictSchema:(o=(i=t.strictSchema)!==null&&i!==void 0?i:R)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=t.strictNumbers)!==null&&a!==void 0?a:R)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=t.strictTypes)!==null&&c!==void 0?c:R)!==null&&l!==void 0?l:"log",strictTuples:(p=(d=t.strictTuples)!==null&&d!==void 0?d:R)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=t.strictRequired)!==null&&f!==void 0?f:R)!==null&&h!==void 0?h:!1,code:t.code?{...t.code,optimize:M,regExp:Z}:{optimize:M,regExp:Z},loopRequired:(y=t.loopRequired)!==null&&y!==void 0?y:HN,loopEnum:(g=t.loopEnum)!==null&&g!==void 0?g:HN,meta:(S=t.meta)!==null&&S!==void 0?S:!0,messages:(A=t.messages)!==null&&A!==void 0?A:!0,inlineRefs:(w=t.inlineRefs)!==null&&w!==void 0?w:!0,schemaId:(P=t.schemaId)!==null&&P!==void 0?P:"$id",addUsedSchema:(D=t.addUsedSchema)!==null&&D!==void 0?D:!0,validateSchema:(O=t.validateSchema)!==null&&O!==void 0?O:!0,validateFormats:(B=t.validateFormats)!==null&&B!==void 0?B:!0,unicodeRegExp:(F=t.unicodeRegExp)!==null&&F!==void 0?F:!0,int32range:(N=t.int32range)!==null&&N!==void 0?N:!0,uriResolver:Q}}var sh=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...tce(e)};let{es5:r,lines:n}=this.opts.code;this.scope=new Gue.ValueScope({scope:{},prefixes:Zue,es5:r,lines:n}),this.logger=ace(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Jue.getRules)(),WN.call(this,Que,e,"NOT SUPPORTED"),WN.call(this,ece,e,"DEPRECATED","warn"),this._metaOpts=sce.call(this),e.formats&&nce.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&ice.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),rce.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:n}=this.opts,s=KN;n==="id"&&(s={...KN},s.id=s.$id,delete s.$id),r&&e&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(e,r){let n=this._addSchema(e,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,e,r);async function s(l,d){await i.call(this,l.$schema);let p=this._addSchema(l,d);return p.validate||o.call(this,p)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(d){if(!(d instanceof JN.default))throw d;return a.call(this,d),await u.call(this,d.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:d}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${d} cannot be resolved`)}async function u(l){let d=await c.call(this,l);this.refs[l]||await i.call(this,d.$schema),this.refs[l]||this.addSchema(d,l,r)}async function c(l){let d=this._loading[l];if(d)return d;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(e,r,n,s=this.opts.validateSchema){if(Array.isArray(e)){for(let o of e)this.addSchema(o,void 0,n,s);return this}let i;if(typeof e=="object"){let{schemaId:o}=this.opts;if(i=e[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,ih.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(e,n,r,s,!0),this}addMetaSchema(e,r,n=this.opts.validateSchema){return this.addSchema(e,r,!0,n),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let n;if(n=e.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,e);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(e){let r;for(;typeof(r=zN.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:n}=this.opts,s=new nh.SchemaEnv({schema:{},schemaId:n});if(r=nh.resolveSchema.call(this,s,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=zN.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let n=e[this.opts.schemaId];return n&&(n=(0,ih.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let n;if(typeof e=="string")n=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof e=="object"&&r===void 0){if(r=e,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(cce.call(this,n,r),!r)return(0,_D.eachItem)(n,i=>ED.call(this,i)),this;dce.call(this,r);let s={...r,type:(0,Rg.getJSONTypes)(r.type),schemaType:(0,Rg.getJSONTypes)(r.schemaType)};return(0,_D.eachItem)(n,s.type.length===0?i=>ED.call(this,i,s):i=>s.type.forEach(o=>ED.call(this,i,s,o))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===e);s>=0&&n.rules.splice(s,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!e||e.length===0?"No errors":e.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(e,r){let n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let s of r){let i=s.split("/").slice(1),o=e;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=XN(l))}}return e}_removeAllSchemas(e,r){for(let n in e){let s=e[n];(!r||r.test(n))&&(typeof s=="string"?delete e[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[n]))}}_addSchema(e,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof e=="object")o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(e);if(u!==void 0)return u;n=(0,ih.normalizeId)(o||n);let c=ih.getSchemaRefs.call(this,e,n);return u=new nh.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(e,!0),u}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):nh.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{nh.compileSchema.call(this,e)}finally{this.opts=r}}};Yr.default=sh;sh.ValidationError=zue.default;sh.MissingRefError=JN.default;function WN(t,e,r,n="error"){for(let s in t){let i=s;i in e&&this.logger[n](`${r}: option ${s}. ${t[i]}`)}}function zN(t){return t=(0,ih.normalizeId)(t),this.schemas[t]||this.refs[t]}function rce(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function nce(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function ice(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function sce(){let t={...this.opts};for(let e of Yue)delete t[e];return t}var oce={log(){},warn(){},error(){}};function ace(t){if(t===!1)return oce;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var uce=/^[a-z_$][a-z0-9_$:-]*$/i;function cce(t,e){let{RULES:r}=this;if((0,_D.eachItem)(t,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!uce.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function ED(t,e,r){var n;let s=e?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,Rg.getJSONTypes)(e.type),schemaType:(0,Rg.getJSONTypes)(e.schemaType)}};e.before?lce.call(this,o,a,e.before):o.rules.push(a),i.all[t]=a,(n=e.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function lce(t,e,r){let n=t.rules.findIndex(s=>s.keyword===r);n>=0?t.rules.splice(n,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function dce(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=XN(e)),t.validateSchema=this.compile(e,!0))}var fce={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function XN(t){return{anyOf:[t,fce]}}});var ZN=v(SD=>{"use strict";Object.defineProperty(SD,"__esModule",{value:!0});var pce={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};SD.default=pce});var r9=v(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.callRef=hc.getValidate=void 0;var hce=Fg(),QN=vi(),Rn=Qe(),cd=qo(),e9=kg(),$g=Et(),mce={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:n}=t,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let l=e9.resolveRef.call(u,c,s,r);if(l===void 0)throw new hce.default(n.opts.uriResolver,s,r);if(l instanceof e9.SchemaEnv)return p(l);return f(l);function d(){if(i===c)return Ng(t,o,i,i.$async);let h=e.scopeValue("root",{ref:c});return Ng(t,(0,Rn._)`${h}.validate`,c,c.$async)}function p(h){let y=t9(t,h);Ng(t,y,h,h.$async)}function f(h){let y=e.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Rn.stringify)(h)}:{ref:h}),g=e.name("valid"),S=t.subschema({schema:h,dataTypes:[],schemaPath:Rn.nil,topSchemaRef:y,errSchemaPath:r},g);t.mergeEvaluated(S),t.ok(g)}}};function t9(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Rn._)`${r.scopeValue("wrapper",{ref:e})}.validate`}hc.getValidate=t9;function Ng(t,e,r,n){let{gen:s,it:i}=t,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?cd.default.this:Rn.nil;n?l():d();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,Rn._)`await ${(0,QN.callValidateCode)(t,e,c)}`),f(e),o||s.assign(h,!0)},y=>{s.if((0,Rn._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),p(y),o||s.assign(h,!1)}),t.ok(h)}function d(){t.result((0,QN.callValidateCode)(t,e,c),()=>f(e),()=>p(e))}function p(h){let y=(0,Rn._)`${h}.errors`;s.assign(cd.default.vErrors,(0,Rn._)`${cd.default.vErrors} === null ? ${y} : ${cd.default.vErrors}.concat(${y})`),s.assign(cd.default.errors,(0,Rn._)`${cd.default.vErrors}.length`)}function f(h){var y;if(!i.opts.unevaluated)return;let g=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=$g.mergeEvaluated.props(s,g.props,i.props));else{let S=s.var("props",(0,Rn._)`${h}.evaluated.props`);i.props=$g.mergeEvaluated.props(s,S,i.props,Rn.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=$g.mergeEvaluated.items(s,g.items,i.items));else{let S=s.var("items",(0,Rn._)`${h}.evaluated.items`);i.items=$g.mergeEvaluated.items(s,S,i.items,Rn.Name)}}}hc.callRef=Ng;hc.default=mce});var n9=v(DD=>{"use strict";Object.defineProperty(DD,"__esModule",{value:!0});var yce=ZN(),gce=r9(),bce=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",yce.default,gce.default];DD.default=bce});var i9=v(AD=>{"use strict";Object.defineProperty(AD,"__esModule",{value:!0});var Mg=Qe(),$a=Mg.operators,jg={maximum:{okStr:"<=",ok:$a.LTE,fail:$a.GT},minimum:{okStr:">=",ok:$a.GTE,fail:$a.LT},exclusiveMaximum:{okStr:"<",ok:$a.LT,fail:$a.GTE},exclusiveMinimum:{okStr:">",ok:$a.GT,fail:$a.LTE}},vce={message:({keyword:t,schemaCode:e})=>(0,Mg.str)`must be ${jg[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Mg._)`{comparison: ${jg[t].okStr}, limit: ${e}}`},wce={keyword:Object.keys(jg),type:"number",schemaType:"number",$data:!0,error:vce,code(t){let{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Mg._)`${r} ${jg[e].fail} ${n} || isNaN(${r})`)}};AD.default=wce});var s9=v(xD=>{"use strict";Object.defineProperty(xD,"__esModule",{value:!0});var oh=Qe(),Ece={message:({schemaCode:t})=>(0,oh.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,oh._)`{multipleOf: ${t}}`},_ce={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ece,code(t){let{gen:e,data:r,schemaCode:n,it:s}=t,i=s.opts.multipleOfPrecision,o=e.let("res"),a=i?(0,oh._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,oh._)`${o} !== parseInt(${o})`;t.fail$data((0,oh._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};xD.default=_ce});var a9=v(CD=>{"use strict";Object.defineProperty(CD,"__esModule",{value:!0});function o9(t){let e=t.length,r=0,n=0,s;for(;n<e;)r++,s=t.charCodeAt(n++),s>=55296&&s<=56319&&n<e&&(s=t.charCodeAt(n),(s&64512)===56320&&n++);return r}CD.default=o9;o9.code='require("ajv/dist/runtime/ucs2length").default'});var u9=v(PD=>{"use strict";Object.defineProperty(PD,"__esModule",{value:!0});var mc=Qe(),Sce=Et(),Dce=a9(),Ace={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,mc.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,mc._)`{limit: ${t}}`},xce={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ace,code(t){let{keyword:e,data:r,schemaCode:n,it:s}=t,i=e==="maxLength"?mc.operators.GT:mc.operators.LT,o=s.opts.unicode===!1?(0,mc._)`${r}.length`:(0,mc._)`${(0,Sce.useFunc)(t.gen,Dce.default)}(${r})`;t.fail$data((0,mc._)`${o} ${i} ${n}`)}};PD.default=xce});var c9=v(OD=>{"use strict";Object.defineProperty(OD,"__esModule",{value:!0});var Cce=vi(),qg=Qe(),Pce={message:({schemaCode:t})=>(0,qg.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,qg._)`{pattern: ${t}}`},Oce={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Pce,code(t){let{data:e,$data:r,schema:n,schemaCode:s,it:i}=t,o=i.opts.unicodeRegExp?"u":"",a=r?(0,qg._)`(new RegExp(${s}, ${o}))`:(0,Cce.usePattern)(t,n);t.fail$data((0,qg._)`!${a}.test(${e})`)}};OD.default=Oce});var l9=v(BD=>{"use strict";Object.defineProperty(BD,"__esModule",{value:!0});var ah=Qe(),Bce={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,ah.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,ah._)`{limit: ${t}}`},Tce={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Bce,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxProperties"?ah.operators.GT:ah.operators.LT;t.fail$data((0,ah._)`Object.keys(${r}).length ${s} ${n}`)}};BD.default=Tce});var d9=v(TD=>{"use strict";Object.defineProperty(TD,"__esModule",{value:!0});var uh=vi(),ch=Qe(),Fce=Et(),Ice={message:({params:{missingProperty:t}})=>(0,ch.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,ch._)`{missingProperty: ${t}}`},kce={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Ice,code(t){let{gen:e,schema:r,schemaCode:n,data:s,$data:i,it:o}=t,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let f=t.parentSchema.properties,{definedProperties:h}=t.it;for(let y of r)if(f?.[y]===void 0&&!h.has(y)){let g=o.schemaEnv.baseId+o.errSchemaPath,S=`required property "${y}" is not defined at "${g}" (strictRequired)`;(0,Fce.checkStrictMode)(o,S,o.opts.strictRequired)}}function c(){if(u||i)t.block$data(ch.nil,d);else for(let f of r)(0,uh.checkReportMissingProp)(t,f)}function l(){let f=e.let("missing");if(u||i){let h=e.let("valid",!0);t.block$data(h,()=>p(f,h)),t.ok(h)}else e.if((0,uh.checkMissingProp)(t,r,f)),(0,uh.reportMissingProp)(t,f),e.else()}function d(){e.forOf("prop",n,f=>{t.setParams({missingProperty:f}),e.if((0,uh.noPropertyInData)(e,s,f,a.ownProperties),()=>t.error())})}function p(f,h){t.setParams({missingProperty:f}),e.forOf(f,n,()=>{e.assign(h,(0,uh.propertyInData)(e,s,f,a.ownProperties)),e.if((0,ch.not)(h),()=>{t.error(),e.break()})},ch.nil)}}};TD.default=kce});var f9=v(FD=>{"use strict";Object.defineProperty(FD,"__esModule",{value:!0});var lh=Qe(),Rce={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,lh.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,lh._)`{limit: ${t}}`},$ce={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Rce,code(t){let{keyword:e,data:r,schemaCode:n}=t,s=e==="maxItems"?lh.operators.GT:lh.operators.LT;t.fail$data((0,lh._)`${r}.length ${s} ${n}`)}};FD.default=$ce});var p9=v(kD=>{"use strict";Object.defineProperty(kD,"__esModule",{value:!0});var ID=Zp(),Zr=Qe(),Nce=Et(),Mce=jp(),jce={message:({params:{i:t,j:e}})=>(0,Zr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,Zr._)`{i: ${t}, j: ${e}}`},qce={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:jce,code(t){let{gen:e,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=t;if(!n&&!s)return;let u=e.let("valid"),c=i.items?(0,ID.getSchemaTypes)(i.items):[];t.block$data(u,l,(0,Zr._)`${o} === false`),t.ok(u);function l(){let h=e.let("i",(0,Zr._)`${r}.length`),y=e.let("j");t.setParams({i:h,j:y}),e.assign(u,!0),e.if((0,Zr._)`${h} > 1`,()=>(d()?p:f)(h,y))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,y){let g=e.name("item"),S=(0,ID.checkDataTypes)(c,g,a.opts.strictNumbers,ID.DataType.Wrong),A=e.const("indices",(0,Zr._)`{}`);e.for((0,Zr._)`;${h}--;`,()=>{e.let(g,(0,Zr._)`${r}[${h}]`),e.if(S,(0,Zr._)`continue`),c.length>1&&e.if((0,Zr._)`typeof ${g} == "string"`,(0,Zr._)`${g} += "_"`),e.if((0,Zr._)`typeof ${A}[${g}] == "number"`,()=>{e.assign(y,(0,Zr._)`${A}[${g}]`),t.error(),e.assign(u,!1).break()}).code((0,Zr._)`${A}[${g}] = ${h}`)})}function f(h,y){let g=(0,Nce.useFunc)(e,Mce.default),S=e.name("outer");e.label(S).for((0,Zr._)`;${h}--;`,()=>e.for((0,Zr._)`${y} = ${h}; ${y}--;`,()=>e.if((0,Zr._)`${g}(${r}[${h}], ${r}[${y}])`,()=>{t.error(),e.assign(u,!1).break(S)})))}}};kD.default=qce});var h9=v($D=>{"use strict";Object.defineProperty($D,"__esModule",{value:!0});var RD=Qe(),Lce=Et(),Uce=jp(),Vce={message:"must be equal to constant",params:({schemaCode:t})=>(0,RD._)`{allowedValue: ${t}}`},Kce={keyword:"const",$data:!0,error:Vce,code(t){let{gen:e,data:r,$data:n,schemaCode:s,schema:i}=t;n||i&&typeof i=="object"?t.fail$data((0,RD._)`!${(0,Lce.useFunc)(e,Uce.default)}(${r}, ${s})`):t.fail((0,RD._)`${i} !== ${r}`)}};$D.default=Kce});var m9=v(ND=>{"use strict";Object.defineProperty(ND,"__esModule",{value:!0});var dh=Qe(),Hce=Et(),Wce=jp(),zce={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,dh._)`{allowedValues: ${t}}`},Jce={keyword:"enum",schemaType:"array",$data:!0,error:zce,code(t){let{gen:e,data:r,$data:n,schema:s,schemaCode:i,it:o}=t;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,Hce.useFunc)(e,Wce.default)),l;if(a||n)l=e.let("valid"),t.block$data(l,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=e.const("vSchema",i);l=(0,dh.or)(...s.map((h,y)=>p(f,y)))}t.pass(l);function d(){e.assign(l,!1),e.forOf("v",i,f=>e.if((0,dh._)`${c()}(${r}, ${f})`,()=>e.assign(l,!0).break()))}function p(f,h){let y=s[h];return typeof y=="object"&&y!==null?(0,dh._)`${c()}(${r}, ${f}[${h}])`:(0,dh._)`${r} === ${y}`}}};ND.default=Jce});var y9=v(MD=>{"use strict";Object.defineProperty(MD,"__esModule",{value:!0});var Gce=i9(),Xce=s9(),Yce=u9(),Zce=c9(),Qce=l9(),ele=d9(),tle=f9(),rle=p9(),nle=h9(),ile=m9(),sle=[Gce.default,Xce.default,Yce.default,Zce.default,Qce.default,ele.default,tle.default,rle.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},nle.default,ile.default];MD.default=sle});var qD=v(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});fh.validateAdditionalItems=void 0;var yc=Qe(),jD=Et(),ole={message:({params:{len:t}})=>(0,yc.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,yc._)`{limit: ${t}}`},ale={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:ole,code(t){let{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,jD.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}g9(t,n)}};function g9(t,e){let{gen:r,schema:n,data:s,keyword:i,it:o}=t;o.items=!0;let a=r.const("len",(0,yc._)`${s}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,yc._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,jD.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,yc._)`${a} <= ${e.length}`);r.if((0,yc.not)(c),()=>u(c)),t.ok(c)}function u(c){r.forRange("i",e.length,a,l=>{t.subschema({keyword:i,dataProp:l,dataPropType:jD.Type.Num},c),o.allErrors||r.if((0,yc.not)(c),()=>r.break())})}}fh.validateAdditionalItems=g9;fh.default=ale});var LD=v(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.validateTuple=void 0;var b9=Qe(),Lg=Et(),ule=vi(),cle={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return v9(t,"additionalItems",e);r.items=!0,!(0,Lg.alwaysValidSchema)(r,e)&&t.ok((0,ule.validateArray)(t))}};function v9(t,e,r=t.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=t;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Lg.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,b9._)`${i}.length`);r.forEach((d,p)=>{(0,Lg.alwaysValidSchema)(a,d)||(n.if((0,b9._)`${c} > ${p}`,()=>t.subschema({keyword:o,schemaProp:p,dataProp:p},u)),t.ok(u))});function l(d){let{opts:p,errSchemaPath:f}=a,h=r.length,y=h===d.minItems&&(h===d.maxItems||d[e]===!1);if(p.strictTuples&&!y){let g=`"${o}" is ${h}-tuple, but minItems or maxItems/${e} are not specified or different at path "${f}"`;(0,Lg.checkStrictMode)(a,g,p.strictTuples)}}}ph.validateTuple=v9;ph.default=cle});var w9=v(UD=>{"use strict";Object.defineProperty(UD,"__esModule",{value:!0});var lle=LD(),dle={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,lle.validateTuple)(t,"items")};UD.default=dle});var _9=v(VD=>{"use strict";Object.defineProperty(VD,"__esModule",{value:!0});var E9=Qe(),fle=Et(),ple=vi(),hle=qD(),mle={message:({params:{len:t}})=>(0,E9.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,E9._)`{limit: ${t}}`},yle={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:mle,code(t){let{schema:e,parentSchema:r,it:n}=t,{prefixItems:s}=r;n.items=!0,!(0,fle.alwaysValidSchema)(n,e)&&(s?(0,hle.validateAdditionalItems)(t,s):t.ok((0,ple.validateArray)(t)))}};VD.default=yle});var S9=v(KD=>{"use strict";Object.defineProperty(KD,"__esModule",{value:!0});var Ei=Qe(),Ug=Et(),gle={message:({params:{min:t,max:e}})=>e===void 0?(0,Ei.str)`must contain at least ${t} valid item(s)`:(0,Ei.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Ei._)`{minContains: ${t}}`:(0,Ei._)`{minContains: ${t}, maxContains: ${e}}`},ble={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:gle,code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=e.const("len",(0,Ei._)`${s}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Ug.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Ug.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Ug.alwaysValidSchema)(i,r)){let y=(0,Ei._)`${l} >= ${o}`;a!==void 0&&(y=(0,Ei._)`${y} && ${l} <= ${a}`),t.pass(y);return}i.items=!0;let d=e.name("valid");a===void 0&&o===1?f(d,()=>e.if(d,()=>e.break())):o===0?(e.let(d,!0),a!==void 0&&e.if((0,Ei._)`${s}.length > 0`,p)):(e.let(d,!1),p()),t.result(d,()=>t.reset());function p(){let y=e.name("_valid"),g=e.let("count",0);f(y,()=>e.if(y,()=>h(g)))}function f(y,g){e.forRange("i",0,l,S=>{t.subschema({keyword:"contains",dataProp:S,dataPropType:Ug.Type.Num,compositeRule:!0},y),g()})}function h(y){e.code((0,Ei._)`${y}++`),a===void 0?e.if((0,Ei._)`${y} >= ${o}`,()=>e.assign(d,!0).break()):(e.if((0,Ei._)`${y} > ${a}`,()=>e.assign(d,!1).break()),o===1?e.assign(d,!0):e.if((0,Ei._)`${y} >= ${o}`,()=>e.assign(d,!0)))}}};KD.default=ble});var x9=v(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.validateSchemaDeps=Vs.validatePropertyDeps=Vs.error=void 0;var HD=Qe(),vle=Et(),hh=vi();Vs.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let n=e===1?"property":"properties";return(0,HD.str)`must have ${n} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:n}})=>(0,HD._)`{property: ${t},
    missingProperty: ${n},
    depsCount: ${e},
    deps: ${r}}`};var wle={keyword:"dependencies",type:"object",schemaType:"object",error:Vs.error,code(t){let[e,r]=Ele(t);D9(t,e),A9(t,r)}};function Ele({schema:t}){let e={},r={};for(let n in t){if(n==="__proto__")continue;let s=Array.isArray(t[n])?e:r;s[n]=t[n]}return[e,r]}function D9(t,e=t.schema){let{gen:r,data:n,it:s}=t;if(Object.keys(e).length===0)return;let i=r.let("missing");for(let o in e){let a=e[o];if(a.length===0)continue;let u=(0,hh.propertyInData)(r,n,o,s.opts.ownProperties);t.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,hh.checkReportMissingProp)(t,c)}):(r.if((0,HD._)`${u} && (${(0,hh.checkMissingProp)(t,a,i)})`),(0,hh.reportMissingProp)(t,i),r.else())}}Vs.validatePropertyDeps=D9;function A9(t,e=t.schema){let{gen:r,data:n,keyword:s,it:i}=t,o=r.name("valid");for(let a in e)(0,vle.alwaysValidSchema)(i,e[a])||(r.if((0,hh.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=t.subschema({keyword:s,schemaProp:a},o);t.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),t.ok(o))}Vs.validateSchemaDeps=A9;Vs.default=wle});var P9=v(WD=>{"use strict";Object.defineProperty(WD,"__esModule",{value:!0});var C9=Qe(),_le=Et(),Sle={message:"property name must be valid",params:({params:t})=>(0,C9._)`{propertyName: ${t.propertyName}}`},Dle={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Sle,code(t){let{gen:e,schema:r,data:n,it:s}=t;if((0,_le.alwaysValidSchema)(s,r))return;let i=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),e.if((0,C9.not)(i),()=>{t.error(!0),s.allErrors||e.break()})}),t.ok(i)}};WD.default=Dle});var JD=v(zD=>{"use strict";Object.defineProperty(zD,"__esModule",{value:!0});var Vg=vi(),Wi=Qe(),Ale=qo(),Kg=Et(),xle={message:"must NOT have additional properties",params:({params:t})=>(0,Wi._)`{additionalProperty: ${t.additionalProperty}}`},Cle={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:xle,code(t){let{gen:e,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=t;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,Kg.alwaysValidSchema)(o,r))return;let c=(0,Vg.allSchemaProperties)(n.properties),l=(0,Vg.allSchemaProperties)(n.patternProperties);d(),t.ok((0,Wi._)`${i} === ${Ale.default.errors}`);function d(){e.forIn("key",s,g=>{!c.length&&!l.length?h(g):e.if(p(g),()=>h(g))})}function p(g){let S;if(c.length>8){let A=(0,Kg.schemaRefOrVal)(o,n.properties,"properties");S=(0,Vg.isOwnProperty)(e,A,g)}else c.length?S=(0,Wi.or)(...c.map(A=>(0,Wi._)`${g} === ${A}`)):S=Wi.nil;return l.length&&(S=(0,Wi.or)(S,...l.map(A=>(0,Wi._)`${(0,Vg.usePattern)(t,A)}.test(${g})`))),(0,Wi.not)(S)}function f(g){e.code((0,Wi._)`delete ${s}[${g}]`)}function h(g){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){f(g);return}if(r===!1){t.setParams({additionalProperty:g}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Kg.alwaysValidSchema)(o,r)){let S=e.name("valid");u.removeAdditional==="failing"?(y(g,S,!1),e.if((0,Wi.not)(S),()=>{t.reset(),f(g)})):(y(g,S),a||e.if((0,Wi.not)(S),()=>e.break()))}}function y(g,S,A){let w={keyword:"additionalProperties",dataProp:g,dataPropType:Kg.Type.Str};A===!1&&Object.assign(w,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(w,S)}}};zD.default=Cle});var T9=v(XD=>{"use strict";Object.defineProperty(XD,"__esModule",{value:!0});var Ple=rh(),O9=vi(),GD=Et(),B9=JD(),Ole={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:n,data:s,it:i}=t;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&B9.default.code(new Ple.KeywordCxt(i,B9.default,"additionalProperties"));let o=(0,O9.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=GD.mergeEvaluated.props(e,(0,GD.toHash)(o),i.props));let a=o.filter(d=>!(0,GD.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let u=e.name("valid");for(let d of a)c(d)?l(d):(e.if((0,O9.propertyInData)(e,s,d,i.opts.ownProperties)),l(d),i.allErrors||e.else().var(u,!0),e.endIf()),t.it.definedProperties.add(d),t.ok(u);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function l(d){t.subschema({keyword:"properties",schemaProp:d,dataProp:d},u)}}};XD.default=Ole});var R9=v(YD=>{"use strict";Object.defineProperty(YD,"__esModule",{value:!0});var F9=vi(),Hg=Qe(),I9=Et(),k9=Et(),Ble={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:n,parentSchema:s,it:i}=t,{opts:o}=i,a=(0,F9.allSchemaProperties)(r),u=a.filter(y=>(0,I9.alwaysValidSchema)(i,r[y]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=e.name("valid");i.props!==!0&&!(i.props instanceof Hg.Name)&&(i.props=(0,k9.evaluatedPropsToName)(e,i.props));let{props:d}=i;p();function p(){for(let y of a)c&&f(y),i.allErrors?h(y):(e.var(l,!0),h(y),e.if(l))}function f(y){for(let g in c)new RegExp(y).test(g)&&(0,I9.checkStrictMode)(i,`property ${g} matches pattern ${y} (use allowMatchingProperties)`)}function h(y){e.forIn("key",n,g=>{e.if((0,Hg._)`${(0,F9.usePattern)(t,y)}.test(${g})`,()=>{let S=u.includes(y);S||t.subschema({keyword:"patternProperties",schemaProp:y,dataProp:g,dataPropType:k9.Type.Str},l),i.opts.unevaluated&&d!==!0?e.assign((0,Hg._)`${d}[${g}]`,!0):!S&&!i.allErrors&&e.if((0,Hg.not)(l),()=>e.break())})})}}};YD.default=Ble});var $9=v(ZD=>{"use strict";Object.defineProperty(ZD,"__esModule",{value:!0});var Tle=Et(),Fle={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:n}=t;if((0,Tle.alwaysValidSchema)(n,r)){t.fail();return}let s=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),t.failResult(s,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};ZD.default=Fle});var N9=v(QD=>{"use strict";Object.defineProperty(QD,"__esModule",{value:!0});var Ile=vi(),kle={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Ile.validateUnion,error:{message:"must match a schema in anyOf"}};QD.default=kle});var M9=v(eA=>{"use strict";Object.defineProperty(eA,"__esModule",{value:!0});var Wg=Qe(),Rle=Et(),$le={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Wg._)`{passingSchemas: ${t.passing}}`},Nle={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:$le,code(t){let{gen:e,schema:r,parentSchema:n,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=e.let("valid",!1),a=e.let("passing",null),u=e.name("_valid");t.setParams({passing:a}),e.block(c),t.result(o,()=>t.reset(),()=>t.error(!0));function c(){i.forEach((l,d)=>{let p;(0,Rle.alwaysValidSchema)(s,l)?e.var(u,!0):p=t.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},u),d>0&&e.if((0,Wg._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Wg._)`[${a}, ${d}]`).else(),e.if(u,()=>{e.assign(o,!0),e.assign(a,d),p&&t.mergeEvaluated(p,Wg.Name)})})}}};eA.default=Nle});var j9=v(tA=>{"use strict";Object.defineProperty(tA,"__esModule",{value:!0});var Mle=Et(),jle={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=e.name("valid");r.forEach((i,o)=>{if((0,Mle.alwaysValidSchema)(n,i))return;let a=t.subschema({keyword:"allOf",schemaProp:o},s);t.ok(s),t.mergeEvaluated(a)})}};tA.default=jle});var U9=v(rA=>{"use strict";Object.defineProperty(rA,"__esModule",{value:!0});var zg=Qe(),L9=Et(),qle={message:({params:t})=>(0,zg.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,zg._)`{failingKeyword: ${t.ifClause}}`},Lle={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:qle,code(t){let{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,L9.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=q9(n,"then"),i=q9(n,"else");if(!s&&!i)return;let o=e.let("valid",!0),a=e.name("_valid");if(u(),t.reset(),s&&i){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,c("then",l),c("else",l))}else s?e.if(a,c("then")):e.if((0,zg.not)(a),c("else"));t.pass(o,()=>t.error(!0));function u(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function c(l,d){return()=>{let p=t.subschema({keyword:l},a);e.assign(o,a),t.mergeValidEvaluated(p,o),d?e.assign(d,(0,zg._)`${l}`):t.setParams({ifClause:l})}}}};function q9(t,e){let r=t.schema[e];return r!==void 0&&!(0,L9.alwaysValidSchema)(t,r)}rA.default=Lle});var V9=v(nA=>{"use strict";Object.defineProperty(nA,"__esModule",{value:!0});var Ule=Et(),Vle={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Ule.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};nA.default=Vle});var K9=v(iA=>{"use strict";Object.defineProperty(iA,"__esModule",{value:!0});var Kle=qD(),Hle=w9(),Wle=LD(),zle=_9(),Jle=S9(),Gle=x9(),Xle=P9(),Yle=JD(),Zle=T9(),Qle=R9(),ede=$9(),tde=N9(),rde=M9(),nde=j9(),ide=U9(),sde=V9();function ode(t=!1){let e=[ede.default,tde.default,rde.default,nde.default,ide.default,sde.default,Xle.default,Yle.default,Gle.default,Zle.default,Qle.default];return t?e.push(Hle.default,zle.default):e.push(Kle.default,Wle.default),e.push(Jle.default),e}iA.default=ode});var H9=v(sA=>{"use strict";Object.defineProperty(sA,"__esModule",{value:!0});var hr=Qe(),ade={message:({schemaCode:t})=>(0,hr.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,hr._)`{format: ${t}}`},ude={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:ade,code(t,e){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=t,{opts:u,errSchemaPath:c,schemaEnv:l,self:d}=a;if(!u.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),y=r.const("fDef",(0,hr._)`${h}[${o}]`),g=r.let("fType"),S=r.let("format");r.if((0,hr._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(g,(0,hr._)`${y}.type || "string"`).assign(S,(0,hr._)`${y}.validate`),()=>r.assign(g,(0,hr._)`"string"`).assign(S,y)),t.fail$data((0,hr.or)(A(),w()));function A(){return u.strictSchema===!1?hr.nil:(0,hr._)`${o} && !${S}`}function w(){let P=l.$async?(0,hr._)`(${y}.async ? await ${S}(${n}) : ${S}(${n}))`:(0,hr._)`${S}(${n})`,D=(0,hr._)`(typeof ${S} == "function" ? ${P} : ${S}.test(${n}))`;return(0,hr._)`${S} && ${S} !== true && ${g} === ${e} && !${D}`}}function f(){let h=d.formats[i];if(!h){A();return}if(h===!0)return;let[y,g,S]=w(h);y===e&&t.pass(P());function A(){if(u.strictSchema===!1){d.logger.warn(D());return}throw new Error(D());function D(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function w(D){let O=D instanceof RegExp?(0,hr.regexpCode)(D):u.code.formats?(0,hr._)`${u.code.formats}${(0,hr.getProperty)(i)}`:void 0,B=r.scopeValue("formats",{key:i,ref:D,code:O});return typeof D=="object"&&!(D instanceof RegExp)?[D.type||"string",D.validate,(0,hr._)`${B}.validate`]:["string",D,B]}function P(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!l.$async)throw new Error("async format in sync schema");return(0,hr._)`await ${S}(${n})`}return typeof g=="function"?(0,hr._)`${S}(${n})`:(0,hr._)`${S}.test(${n})`}}}};sA.default=ude});var W9=v(oA=>{"use strict";Object.defineProperty(oA,"__esModule",{value:!0});var cde=H9(),lde=[cde.default];oA.default=lde});var z9=v(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.contentVocabulary=ld.metadataVocabulary=void 0;ld.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ld.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var G9=v(aA=>{"use strict";Object.defineProperty(aA,"__esModule",{value:!0});var dde=n9(),fde=y9(),pde=K9(),hde=W9(),J9=z9(),mde=[dde.default,fde.default,(0,pde.default)(),hde.default,J9.metadataVocabulary,J9.contentVocabulary];aA.default=mde});var X9=v(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.DiscrError=void 0;var yde;(function(t){t.Tag="tag",t.Mapping="mapping"})(yde=mh.DiscrError||(mh.DiscrError={}))});var Z9=v(cA=>{"use strict";Object.defineProperty(cA,"__esModule",{value:!0});var dd=Qe(),uA=X9(),Y9=kg(),gde=Et(),bde={message:({params:{discrError:t,tagName:e}})=>t===uA.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,dd._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},vde={keyword:"discriminator",type:"object",schemaType:"object",error:bde,code(t){let{gen:e,data:r,schema:n,parentSchema:s,it:i}=t,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=e.let("valid",!1),c=e.const("tag",(0,dd._)`${r}${(0,dd.getProperty)(a)}`);e.if((0,dd._)`typeof ${c} == "string"`,()=>l(),()=>t.error(!1,{discrError:uA.DiscrError.Tag,tag:c,tagName:a})),t.ok(u);function l(){let f=p();e.if(!1);for(let h in f)e.elseIf((0,dd._)`${c} === ${h}`),e.assign(u,d(f[h]));e.else(),t.error(!1,{discrError:uA.DiscrError.Mapping,tag:c,tagName:a}),e.endIf()}function d(f){let h=e.name("valid"),y=t.subschema({keyword:"oneOf",schemaProp:f},h);return t.mergeEvaluated(y,dd.Name),h}function p(){var f;let h={},y=S(s),g=!0;for(let P=0;P<o.length;P++){let D=o[P];D?.$ref&&!(0,gde.schemaHasRulesButRef)(D,i.self.RULES)&&(D=Y9.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,D?.$ref),D instanceof Y9.SchemaEnv&&(D=D.schema));let O=(f=D?.properties)===null||f===void 0?void 0:f[a];if(typeof O!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(y||S(D)),A(O,P)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return h;function S({required:P}){return Array.isArray(P)&&P.includes(a)}function A(P,D){if(P.const)w(P.const,D);else if(P.enum)for(let O of P.enum)w(O,D);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function w(P,D){if(typeof P!="string"||P in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[P]=D}}}};cA.default=vde});var Q9=v((AAe,wde)=>{wde.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var lA=v((tr,tM)=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.MissingRefError=tr.ValidationError=tr.CodeGen=tr.Name=tr.nil=tr.stringify=tr.str=tr._=tr.KeywordCxt=void 0;var Ede=YN(),_de=G9(),Sde=Z9(),eM=Q9(),Dde=["/properties"],Jg="http://json-schema.org/draft-07/schema",Gg=class extends Ede.default{_addVocabularies(){super._addVocabularies(),_de.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Sde.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(eM,Dde):eM;this.addMetaSchema(e,Jg,!1),this.refs["http://json-schema.org/schema"]=Jg}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Jg)?Jg:void 0)}};tM.exports=tr=Gg;Object.defineProperty(tr,"__esModule",{value:!0});tr.default=Gg;var Ade=rh();Object.defineProperty(tr,"KeywordCxt",{enumerable:!0,get:function(){return Ade.KeywordCxt}});var fd=Qe();Object.defineProperty(tr,"_",{enumerable:!0,get:function(){return fd._}});Object.defineProperty(tr,"str",{enumerable:!0,get:function(){return fd.str}});Object.defineProperty(tr,"stringify",{enumerable:!0,get:function(){return fd.stringify}});Object.defineProperty(tr,"nil",{enumerable:!0,get:function(){return fd.nil}});Object.defineProperty(tr,"Name",{enumerable:!0,get:function(){return fd.Name}});Object.defineProperty(tr,"CodeGen",{enumerable:!0,get:function(){return fd.CodeGen}});var xde=Tg();Object.defineProperty(tr,"ValidationError",{enumerable:!0,get:function(){return xde.default}});var Cde=Fg();Object.defineProperty(tr,"MissingRefError",{enumerable:!0,get:function(){return Cde.default}})});var aM=v(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.formatNames=Ks.fastFormats=Ks.fullFormats=void 0;function pd(t,e){return{validate:t,compare:e}}Ks.fullFormats={date:pd(iM,pA),time:pd(sM,hA),"date-time":pd(Tde,oM),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:kde,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:Lde,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Rde,int32:{type:"number",validate:Mde},int64:{type:"number",validate:jde},float:{type:"number",validate:nM},double:{type:"number",validate:nM},password:!0,binary:!0};Ks.fastFormats={...Ks.fullFormats,date:pd(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,pA),time:pd(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,hA),"date-time":pd(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,oM),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Ks.formatNames=Object.keys(Ks.fullFormats);function Pde(t){return t%4===0&&(t%100!==0||t%400===0)}var Ode=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Bde=[0,31,28,31,30,31,30,31,31,30,31,30,31];function iM(t){let e=Ode.exec(t);if(!e)return!1;let r=+e[1],n=+e[2],s=+e[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&Pde(r)?29:Bde[n])}function pA(t,e){if(t&&e)return t>e?1:t<e?-1:0}var dA=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function sM(t,e){let r=dA.exec(t);if(!r)return!1;let n=+r[1],s=+r[2],i=+r[3],o=r[5];return(n<=23&&s<=59&&i<=59||n===23&&s===59&&i===60)&&(!e||o!=="")}function hA(t,e){if(!(t&&e))return;let r=dA.exec(t),n=dA.exec(e);if(r&&n)return t=r[1]+r[2]+r[3]+(r[4]||""),e=n[1]+n[2]+n[3]+(n[4]||""),t>e?1:t<e?-1:0}var fA=/t|\s/i;function Tde(t){let e=t.split(fA);return e.length===2&&iM(e[0])&&sM(e[1],!0)}function oM(t,e){if(!(t&&e))return;let[r,n]=t.split(fA),[s,i]=e.split(fA),o=pA(r,s);if(o!==void 0)return o||hA(n,i)}var Fde=/\/|:/,Ide=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function kde(t){return Fde.test(t)&&Ide.test(t)}var rM=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Rde(t){return rM.lastIndex=0,rM.test(t)}var $de=-(2**31),Nde=2**31-1;function Mde(t){return Number.isInteger(t)&&t<=Nde&&t>=$de}function jde(t){return Number.isInteger(t)}function nM(){return!0}var qde=/[^\\]\\Z/;function Lde(t){if(qde.test(t))return!1;try{return new RegExp(t),!0}catch{return!1}}});var uM=v(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.formatLimitDefinition=void 0;var Ude=lA(),zi=Qe(),Na=zi.operators,Xg={formatMaximum:{okStr:"<=",ok:Na.LTE,fail:Na.GT},formatMinimum:{okStr:">=",ok:Na.GTE,fail:Na.LT},formatExclusiveMaximum:{okStr:"<",ok:Na.LT,fail:Na.GTE},formatExclusiveMinimum:{okStr:">",ok:Na.GT,fail:Na.LTE}},Vde={message:({keyword:t,schemaCode:e})=>zi.str`should be ${Xg[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>zi._`{comparison: ${Xg[t].okStr}, limit: ${e}}`};hd.formatLimitDefinition={keyword:Object.keys(Xg),type:"string",schemaType:"string",$data:!0,error:Vde,code(t){let{gen:e,data:r,schemaCode:n,keyword:s,it:i}=t,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new Ude.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let p=e.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=e.const("fmt",zi._`${p}[${u.schemaCode}]`);t.fail$data(zi.or(zi._`typeof ${f} != "object"`,zi._`${f} instanceof RegExp`,zi._`typeof ${f}.compare != "function"`,d(f)))}function l(){let p=u.schema,f=a.formats[p];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=e.scopeValue("formats",{key:p,ref:f,code:o.code.formats?zi._`${o.code.formats}${zi.getProperty(p)}`:void 0});t.fail$data(d(h))}function d(p){return zi._`${p}.compare(${r}, ${n}) ${Xg[s].fail} 0`}},dependencies:["format"]};var Kde=t=>(t.addKeyword(hd.formatLimitDefinition),t);hd.default=Kde});var fM=v((yh,dM)=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});var md=aM(),Hde=uM(),mA=Qe(),cM=new mA.Name("fullFormats"),Wde=new mA.Name("fastFormats"),yA=(t,e={keywords:!0})=>{if(Array.isArray(e))return lM(t,e,md.fullFormats,cM),t;let[r,n]=e.mode==="fast"?[md.fastFormats,Wde]:[md.fullFormats,cM],s=e.formats||md.formatNames;return lM(t,s,r,n),e.keywords&&Hde.default(t),t};yA.get=(t,e="full")=>{let n=(e==="fast"?md.fastFormats:md.fullFormats)[t];if(!n)throw new Error(`Unknown format "${t}"`);return n};function lM(t,e,r,n){var s,i;(s=(i=t.opts.code).formats)!==null&&s!==void 0||(i.formats=mA._`require("ajv-formats/dist/formats").${n}`);for(let o of e)t.addFormat(o,r[o])}dM.exports=yh=yA;Object.defineProperty(yh,"__esModule",{value:!0});yh.default=yA});var hM=v(yd=>{"use strict";var wA=yd&&yd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yd,"__esModule",{value:!0});yd.InputDescriptorFilterEvaluationHandler=void 0;var gA=mi(),zde=wA(lA()),Jde=wA(fM()),pM=Cr(),bA=wA(Mi()),Gde=yi(),Xde=gi(),vA=class extends Xde.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FilterEvaluation"}handle(e,r){let n=gA.JSONPath.nodes(e,"$..fields[*]");r.forEach((s,i)=>{this.createNoFieldResults(e,i,s),n.forEach(o=>{let a=[];o.value.path&&(a=Gde.JsonPathUtils.extractInputField(s.credential,o.value.path));let u=!1;for(let c of a)if(this.evaluateFilter(c,o.value)){u=!0;let l={result:Object.assign({},a[0]),valid:!0,format:s.format};this.getResults().push(Object.assign({},this.createResultObject(gA.JSONPath.stringify(o.path.slice(0,3)),i,l)))}if(!u)if(a.length){let c={result:Object.assign({},a[0]),valid:!1,format:s.format};this.createResponse(o,i,c,bA.default.INPUT_CANDIDATE_FAILED_FILTER_EVALUATION)}else{let c={valid:!1,format:s.format};this.createResponse(o,i,c,bA.default.INPUT_CANDIDATE_DOESNT_CONTAIN_PROPERTY)}})}),this.updatePresentationSubmission(e)}createNoFieldResults(e,r,n){e.input_descriptors.map((i,o)=>({index:o,inDesc:i})).filter(i=>{var o,a,u;return((o=i.inDesc.constraints)===null||o===void 0?void 0:o.fields)===void 0||((u=(a=i.inDesc.constraints)===null||a===void 0?void 0:a.fields)===null||u===void 0?void 0:u.length)===0}).forEach(i=>{let o={result:[],valid:!0,format:n.format};this.getResults().push(Object.assign({},this.createResultObject(`$.input_descriptors[${i.index}]`,r,o)))})}createResponse(e,r,n,s){this.getResults().push(Object.assign(Object.assign({},this.createResultObject(gA.JSONPath.stringify(e.path.slice(0,3)),r,n)),{status:pM.Status.ERROR,message:s}))}createResultObject(e,r,n){return{input_descriptor_path:e,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:pM.Status.INFO,message:bA.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}evaluateFilter(e,r){var n;!((n=r.filter)===null||n===void 0)&&n.format&&r.filter.format==="date"&&this.transformDateFormat(e);let s=new zde.default({verbose:!0,code:{source:!0,lines:!0,esm:!1},allowUnionTypes:!0,allErrors:!0,strict:!1});return(0,Jde.default)(s),r.filter?s.validate(r.filter,e.value):!0}transformDateFormat(e){let r=new Date(e.value),n=r.getUTCMonth()+1+"";n.length===1&&(n="0"+n);let s=r.getUTCDate()+"";s.length===1&&(s="0"+s),e.value=r.getUTCFullYear()+"-"+n+"-"+s,e.value=r.toISOString().substring(0,r.toISOString().indexOf("T"))}};yd.InputDescriptorFilterEvaluationHandler=vA});var yM=v(mM=>{"use strict";Object.defineProperty(mM,"__esModule",{value:!0})});var bM=v(gM=>{"use strict";Object.defineProperty(gM,"__esModule",{value:!0})});var wM=v(vM=>{"use strict";Object.defineProperty(vM,"__esModule",{value:!0})});var _M=v(EM=>{"use strict";Object.defineProperty(EM,"__esModule",{value:!0})});var DM=v(SM=>{"use strict";Object.defineProperty(SM,"__esModule",{value:!0})});var xM=v(AM=>{"use strict";Object.defineProperty(AM,"__esModule",{value:!0})});var CM=v(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.Directives=void 0;Yg.Directives={Required:"required",Allowed:"allowed",Disallowed:"disallowed"}});var PM=v(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.ExchangeStatus=void 0;Zg.ExchangeStatus={Created:"CREATED",Submitted:"SUBMITTED",HolderDeclined:"HOLDER_DECLINED",Expired:"EXPIRED",Accepted:"ACCEPTED",VerifierDeclined:"VERIFIER_DECLINED"}});var BM=v(OM=>{"use strict";Object.defineProperty(OM,"__esModule",{value:!0})});var FM=v(TM=>{"use strict";Object.defineProperty(TM,"__esModule",{value:!0})});var kM=v(IM=>{"use strict";Object.defineProperty(IM,"__esModule",{value:!0})});var $M=v(RM=>{"use strict";Object.defineProperty(RM,"__esModule",{value:!0})});var MM=v(NM=>{"use strict";Object.defineProperty(NM,"__esModule",{value:!0})});var qM=v(jM=>{"use strict";Object.defineProperty(jM,"__esModule",{value:!0})});var UM=v(LM=>{"use strict";Object.defineProperty(LM,"__esModule",{value:!0})});var KM=v(VM=>{"use strict";Object.defineProperty(VM,"__esModule",{value:!0})});var WM=v(HM=>{"use strict";Object.defineProperty(HM,"__esModule",{value:!0})});var JM=v(zM=>{"use strict";Object.defineProperty(zM,"__esModule",{value:!0})});var XM=v(GM=>{"use strict";Object.defineProperty(GM,"__esModule",{value:!0})});var ZM=v(YM=>{"use strict";Object.defineProperty(YM,"__esModule",{value:!0})});var ej=v(QM=>{"use strict";Object.defineProperty(QM,"__esModule",{value:!0})});var rj=v(tj=>{"use strict";Object.defineProperty(tj,"__esModule",{value:!0})});var ij=v(nj=>{"use strict";Object.defineProperty(nj,"__esModule",{value:!0})});var oj=v(sj=>{"use strict";Object.defineProperty(sj,"__esModule",{value:!0})});var aj=v(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.Optionality=void 0;Qg.Optionality={Required:"required",Preferred:"preferred"}});var cj=v(uj=>{"use strict";Object.defineProperty(uj,"__esModule",{value:!0})});var dj=v(lj=>{"use strict";Object.defineProperty(lj,"__esModule",{value:!0})});var pj=v(fj=>{"use strict";Object.defineProperty(fj,"__esModule",{value:!0})});var mj=v(hj=>{"use strict";Object.defineProperty(hj,"__esModule",{value:!0})});var gj=v(yj=>{"use strict";Object.defineProperty(yj,"__esModule",{value:!0})});var vj=v(bj=>{"use strict";Object.defineProperty(bj,"__esModule",{value:!0})});var Ej=v(wj=>{"use strict";Object.defineProperty(wj,"__esModule",{value:!0})});var Sj=v(_j=>{"use strict";Object.defineProperty(_j,"__esModule",{value:!0})});var Aj=v(Dj=>{"use strict";Object.defineProperty(Dj,"__esModule",{value:!0})});var xj=v(eb=>{"use strict";Object.defineProperty(eb,"__esModule",{value:!0});eb.Rules=void 0;eb.Rules={All:"all",Pick:"pick"}});var Pj=v(Cj=>{"use strict";Object.defineProperty(Cj,"__esModule",{value:!0})});var Bj=v(Oj=>{"use strict";Object.defineProperty(Oj,"__esModule",{value:!0})});var Tj=v(tb=>{"use strict";Object.defineProperty(tb,"__esModule",{value:!0});tb.Status=void 0;tb.Status={Success:"SUCCESS",Warn:"WARN",Error:"ERROR"}});var Ij=v(Fj=>{"use strict";Object.defineProperty(Fj,"__esModule",{value:!0})});var Rj=v(kj=>{"use strict";Object.defineProperty(kj,"__esModule",{value:!0})});var Nj=v($j=>{"use strict";Object.defineProperty($j,"__esModule",{value:!0})});var jj=v(Mj=>{"use strict";Object.defineProperty(Mj,"__esModule",{value:!0})});var qj=v($e=>{"use strict";var Yde=$e&&$e.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ue=$e&&$e.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Yde(e,t,r)};Object.defineProperty($e,"__esModule",{value:!0});Ue(yM(),$e);Ue(bM(),$e);Ue(wM(),$e);Ue(_M(),$e);Ue(DM(),$e);Ue(xM(),$e);Ue(CM(),$e);Ue(PM(),$e);Ue(BM(),$e);Ue(FM(),$e);Ue(kM(),$e);Ue($M(),$e);Ue(MM(),$e);Ue(qM(),$e);Ue(UM(),$e);Ue(KM(),$e);Ue(WM(),$e);Ue(JM(),$e);Ue(XM(),$e);Ue(ZM(),$e);Ue(ej(),$e);Ue(rj(),$e);Ue(ij(),$e);Ue(oj(),$e);Ue(aj(),$e);Ue(cj(),$e);Ue(dj(),$e);Ue(pj(),$e);Ue(mj(),$e);Ue(gj(),$e);Ue(vj(),$e);Ue(Ej(),$e);Ue(Sj(),$e);Ue(Aj(),$e);Ue(xj(),$e);Ue(Pj(),$e);Ue(Bj(),$e);Ue(Tj(),$e);Ue(Ij(),$e);Ue(Rj(),$e);Ue(Nj(),$e);Ue(jj(),$e)});var Uo=v(gc=>{"use strict";var Zde=gc&&gc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Qde=gc&&gc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Zde(e,t,r)};Object.defineProperty(gc,"__esModule",{value:!0});Qde(qj(),gc)});var Lj=v(nb=>{"use strict";Object.defineProperty(nb,"__esModule",{value:!0});nb.SubjectIsHolderEvaluationHandler=void 0;var Ma=mi(),rb=Uo(),bc=Cr(),efe=gi(),EA=class extends efe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIdzInputDescriptorsSameSubjectRequired=new Map,this.fieldIdzInputDescriptorsSameSubjectPreferred=new Map,this.isHolder=[],this.fieldIds=[],this.credentialsSubjectsByPath=new Map,this.credentialsByPath=new Map,this.messages=new Map,this.messages.set(bc.Status.INFO,"The field ids requiring the subject to be the holder"),this.messages.set(bc.Status.WARN,"The field ids preferring the subject to be the holder"),this.messages.set(bc.Status.ERROR,"The field id missing")}getName(){return"IsHolderEvaluation"}handle(e,r){this.findIsHolderFieldIdsToInputDescriptorsSets(e),this.findAllCredentialSubjects(r),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectRequired,bc.Status.INFO,rb.Optionality.Required),this.confirmAllFieldSetHasSameSubject(this.fieldIdzInputDescriptorsSameSubjectPreferred,bc.Status.WARN,rb.Optionality.Preferred),this.updatePresentationSubmission(e)}findIsHolderFieldIdsToInputDescriptorsSets(e){var r;this.fieldIds.push(...Ma.JSONPath.nodes(e,"$..fields[*].id")),this.isHolder.push(...Ma.JSONPath.nodes(e,"$..is_holder[*]"));let n=(r=this.fieldIds)===null||r===void 0?void 0:r.map(i=>i.value),s=[];s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectPreferred,this.isHolder,n,rb.Optionality.Preferred)),s.push(...this.evaluateFields(this.fieldIdzInputDescriptorsSameSubjectRequired,this.isHolder,n,rb.Optionality.Required)),s.forEach(i=>this.getResults().push(this.createResult(i[1],i[0],["",{}],bc.Status.ERROR,void 0)))}evaluateFields(e,r,n,s){let i=[];return r.filter(o=>o.value.directive===s).filter(o=>o.value.field_id.every(a=>n.includes(a))).forEach(o=>e.set(Ma.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id)),r.filter(o=>o.value.directive===s).filter(o=>!o.value.field_id.every(a=>n.includes(a))).forEach(o=>i.push([Ma.JSONPath.stringify(o.path.slice(0,3)),o.value.field_id])),i}findAllCredentialSubjects(e){let r=Ma.JSONPath.nodes(e.map(n=>n.credential),"$..credentialSubject");for(let n=0;n<r.length;n++){let s=r[n],i=Ma.JSONPath.stringify(s.path.slice(0,2));this.credentialsSubjectsByPath.set(i,s.value),this.credentialsByPath.set(i,e[n])}}confirmAllFieldSetHasSameSubject(e,r,n){let s=Array.from(e).flatMap(u=>Array.from(this.credentialsSubjectsByPath).filter(c=>u[1].find(l=>Object.keys(c[1]).includes(l)))),i=this.mapCredentialPathsToInputDescriptors(n),o=Array.from(s).flatMap(u=>Object.keys(u[1]).filter(c=>c!=="id")),a=Array.from(e.values()).flatMap(u=>u.every(c=>o.includes(c)))[0];s.forEach(u=>{let c=i.get(u[0]);a&&u[1].id&&this.client.dids.includes(u[1].id)?this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,r,this.credentialsByPath.get(u[0]))):this.getResults().push(this.createResult(Object.keys(u[1]).filter(l=>l!=="id"),c,u,bc.Status.ERROR,this.credentialsByPath.get(u[0])))})}mapCredentialPathsToInputDescriptors(e){var r;let n=new Map;return(r=this.fieldIds)===null||r===void 0||r.forEach(s=>{let i=Ma.JSONPath.stringify(s.path.slice(0,3));this.credentialsSubjectsByPath.forEach((o,a)=>{let u=this.isHolder.find(c=>Ma.JSONPath.stringify(c.path.slice(0,3))===i);Object.keys(o).includes(s.value)&&u?.value.directive===e&&n.set(a,i)})}),n}createResult(e,r,n,s,i,o){return{input_descriptor_path:r,verifiable_credential_path:n[0],evaluator:this.getName(),status:s,payload:Object.assign({fieldIdSet:e,credentialSubject:n[1]},i?{format:i.format}:{}),message:o??this.messages.get(s)}}};nb.SubjectIsHolderEvaluationHandler=EA});var Uj=v(gd=>{"use strict";var tfe=gd&&gd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gd,"__esModule",{value:!0});gd.LimitDisclosureEvaluationHandler=void 0;var ib=Uo(),sb=Cr(),_A=tfe(Mi()),rfe=yi(),nfe=gi(),SA=class extends nfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"LimitDisclosureEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{var i,o,a;!((i=n.constraints)===null||i===void 0)&&i.fields&&(((o=n.constraints)===null||o===void 0?void 0:o.limit_disclosure)===ib.Optionality.Required||((a=n.constraints)===null||a===void 0?void 0:a.limit_disclosure)===ib.Optionality.Preferred)&&this.evaluateLimitDisclosure(r,n.constraints,s)})}isLimitDisclosureSupported(e,r,n,s){let i=this.client.limitDisclosureSignatureSuites,o=e.decoded.proof;return!o||Array.isArray(o)||!o.type?!1:i?.includes(o.type)?!0:(s==ib.Optionality.Required&&this.createLimitDisclosureNotSupportedResult(n,r),!1)}evaluateLimitDisclosure(e,r,n){let s=r?.fields,i=r.limit_disclosure;e.forEach((o,a)=>{i&&this.isLimitDisclosureSupported(o,a,n,i)&&this.enforceLimitDisclosure(o.credential,s,n,a,e,i)})}enforceLimitDisclosure(e,r,n,s,i,o){let a=this.createVcWithRequiredFields(e,r,n,s);a&&(i[s].credential=a,this.createSuccessResult(n,`$[${s}]`,o))}createVcWithRequiredFields(e,r,n,s){let i={};i=Object.assign(i,e),i.credentialSubject={};for(let o of r)if(o.path){let a=rfe.JsonPathUtils.extractInputField(e,o.path);if(a.length>0)i=this.copyResultPathToDestinationCredential(a[0],e,i);else{this.createMandatoryFieldNotFoundResult(n,s,o.path);return}}return i}copyResultPathToDestinationCredential(e,r,n){let s=Object.assign({},r.credentialSubject);return e.path.forEach(i=>{s[i]&&(s={[i]:s[i]})}),n.credentialSubject=Object.assign(Object.assign({},n.credentialSubject),s),n}createSuccessResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`${r}`,evaluator:this.getName(),status:n===ib.Optionality.Required?sb.Status.INFO:sb.Status.WARN,message:_A.default.LIMIT_DISCLOSURE_APPLIED,payload:void 0})}createMandatoryFieldNotFoundResult(e,r,n){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:sb.Status.ERROR,message:_A.default.VERIFIABLE_CREDENTIAL_MANDATORY_FIELD_NOT_PRESENT,payload:n})}createLimitDisclosureNotSupportedResult(e,r){return this.getResults().push({input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:sb.Status.ERROR,message:_A.default.LIMIT_DISCLOSURE_NOT_SUPPORTED})}};gd.LimitDisclosureEvaluationHandler=SA});var Kj=v(bd=>{"use strict";var ife=bd&&bd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bd,"__esModule",{value:!0});bd.MarkForSubmissionEvaluationHandler=void 0;var sfe=mi(),DA=Cr(),Vj=ife(Mi()),ofe=gi(),AA=class extends ofe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"MarkForSubmissionEvaluation"}handle(e,r){let n=[...this.getResults()],s=n.filter(o=>o.status===DA.Status.ERROR),i=this.retrieveNoErrorStatus(n,s);this.client.wrappedVcs=r,this.produceErrorResults(s),this.produceSuccessResults(i,e)}retrieveNoErrorStatus(e,r){return e.filter(s=>s.status!==DA.Status.ERROR).filter(s=>!r.find(i=>s.input_descriptor_path===i.input_descriptor_path&&s.verifiable_credential_path===i.verifiable_credential_path))}produceSuccessResults(e,r){this.removeDuplicate(e).forEach(n=>{let i=sfe.JSONPath.nodes(r,n.input_descriptor_path)[0].value.group;this.getResults().push({input_descriptor_path:n.input_descriptor_path,verifiable_credential_path:n.verifiable_credential_path,evaluator:this.getName(),status:DA.Status.INFO,payload:{group:i},message:Vj.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION})})}produceErrorResults(e){this.removeDuplicate(e).forEach(r=>{let n=Object.assign({},r.payload);n.evaluator=r.evaluator,this.getResults().push(Object.assign(Object.assign({},r),{evaluator:this.getName(),message:Vj.default.INPUT_CANDIDATE_IS_NOT_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}))})}};bd.MarkForSubmissionEvaluationHandler=AA});var Hj=v(vd=>{"use strict";var afe=vd&&vd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vd,"__esModule",{value:!0});vd.PredicateRelatedFieldEvaluationHandler=void 0;var ufe=Uo(),cfe=Cr(),lfe=afe(Mi()),dfe=gi(),xA=class extends dfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"PredicateRelatedFieldEvaluation"}handle(e){e.input_descriptors.forEach((r,n)=>{r.constraints&&this.examinePredicateRelatedField(n,r.constraints)})}examinePredicateRelatedField(e,r){if(r?.fields)for(let n=0;n<r.fields.length;n++)for(let s=0;s<this.getResults().length;s++)this.examinePredicateForFilterEvaluationResult(this.getResults(),s,e,r,n)}examinePredicateForFilterEvaluationResult(e,r,n,s,i){var o;let a=this.retrieveResultInputDescriptorIdx(e[r].input_descriptor_path);if(e[r].payload&&e[r].payload.result&&e[r].payload.result.path&&e[r].evaluator==="FilterEvaluation"&&n===a&&s&&s.fields&&s.fields[i]&&s.fields[i].predicate&&s.fields[i].path&&(!((o=s.fields[i].path)===null||o===void 0)&&o.includes(this.concatenatePath(e[r].payload.result.path)))){let u=Object.assign({},e[r].payload.result),c=this.createResultObject(n,r,u,e);s.fields[i].predicate===ufe.Optionality.Required||(c.payload.value=!0),e.push(c)}}retrieveResultInputDescriptorIdx(e){let r="$.input_descriptors[",n=e.indexOf(r),s=e.substring(n+r.length),i=s.indexOf("]"),o=s.substring(0,i);return parseInt(o)}concatenatePath(e){let r="";for(let n=0;n<e.length;n++)typeof e[n]=="number"?(r=r.substring(0,r.length-1),r+="[*]."):r+=e[n]+".";return r.substring(0,r.length-1)}createResultObject(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:s[r].verifiable_credential_path,evaluator:this.getName(),status:cfe.Status.INFO,message:lfe.default.INPUT_CANDIDATE_IS_ELIGIBLE_FOR_PRESENTATION_SUBMISSION,payload:n}}};vd.PredicateRelatedFieldEvaluationHandler=xA});var zj=v(ob=>{"use strict";Object.defineProperty(ob,"__esModule",{value:!0});ob.SameSubjectEvaluationHandler=void 0;var ja=mi(),Wj=Uo(),Vo=Cr(),ffe=gi(),CA=class extends ffe.AbstractEvaluationHandler{constructor(e){super(e),this.fieldIds=[],this.sameSubject=[],this.messages=new Map,this.messages.set(Vo.Status.INFO,"The field ids requiring the same subject to belong to same subject"),this.messages.set(Vo.Status.WARN,"The field ids preferring the same subject to belong to same subject"),this.messages.set(Vo.Status.ERROR,"The fields ids not belong to the same subject")}getName(){return"SameSubjectEvaluation"}handle(e,r){let n=this.mapSameSubjectFieldIdsToInputDescriptors(e),s=this.mapCredentialsToResultObjecs(r,n),i=this.countSameSubjectOccurrences(n,s);this.generateErrorResults(i,s),this.updatePresentationSubmission(e)}mapSameSubjectFieldIdsToInputDescriptors(e){this.fieldIds.push(...ja.JSONPath.nodes(e,"$..fields[*].id")),this.sameSubject.push(...ja.JSONPath.nodes(e,"$..same_subject[*]"));let r=[];return this.fieldIds.forEach(n=>{let s=this.sameSubject.find(i=>i.value.field_id.includes(n.value));s&&r.push([n,s])}),r}generateErrorResults(e,r){e.forEach((n,s)=>{let i=r.filter(o=>s===o.payload.fieldIdSet).map(o=>o.payload.credentialSubject.id);(i.length!==n||new Set(i).size!==1)&&r.forEach((o,a,u)=>{o.payload.fieldIdSet===s&&(o.status=Vo.Status.ERROR,o.message=this.messages.get(Vo.Status.ERROR),u[a]=o)})}),this.client.results.push(...r)}countSameSubjectOccurrences(e,r){let n=new Map;return e.forEach(s=>{r.filter(o=>s[1].value.field_id===o.payload.fieldIdSet)&&(n.has(s[1].value.field_id)&&n.get(s[1].value.field_id)?n.set(s[1].value.field_id,n.get(s[1].value.field_id)+1):n.set(s[1].value.field_id,1))}),n}mapCredentialsToResultObjecs(e,r){let n=[...ja.JSONPath.nodes(e.map(i=>i.credential),"$..credentialSubject")],s=[];return n.forEach(i=>{let o=r.find(a=>ja.JSONPath.query(i.value,`$..${a[0].value}`).length!==0);o&&o[1].value.directive===Wj.Optionality.Required?s.push({input_descriptor_path:ja.JSONPath.stringify(o[0].path.slice(0,3)),status:Vo.Status.INFO,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Vo.Status.INFO),verifiable_credential_path:ja.JSONPath.stringify(i.path.slice(0,2))}):o&&o[1].value.directive===Wj.Optionality.Preferred&&s.push({input_descriptor_path:ja.JSONPath.stringify(o[0].path.slice(0,3)),status:Vo.Status.WARN,evaluator:this.getName(),payload:{fieldIdSet:o[1].value.field_id,credentialSubject:i.value},message:this.messages.get(Vo.Status.WARN),verifiable_credential_path:ja.JSONPath.stringify(i.path.slice(0,2))})}),s}};ob.SameSubjectEvaluationHandler=CA});var Yj=v(wd=>{"use strict";var pfe=wd&&wd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wd,"__esModule",{value:!0});wd.SubjectIsIssuerEvaluationHandler=void 0;var hfe=Uo(),Jj=ay(),Gj=Cr(),Xj=pfe(Mi()),PA=yi(),mfe=gi(),OA=class extends mfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"SubjectIsIssuerEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{let i=n.constraints;i?.subject_is_issuer===hfe.Optionality.Required?this.checkSubjectIsIssuer(n.id,r,s):this.getResults().push(...r.map((o,a)=>this.generateSuccessResult(s,`$[${a}]`,o,"not applicable")))}),this.updatePresentationSubmission(e)}checkSubjectIsIssuer(e,r,n){this.client.presentationSubmission.descriptor_map.forEach(s=>{if(s.id===e){let i=PA.JsonPathUtils.extractInputField(r.map(o=>o.credential),[s.path]);for(let o of i){let a=(0,PA.getIssuerString)(o.value);o&&o.value&&(0,PA.getSubjectIdsAsString)(o.value).every(u=>u===a)?this.getResults().push(this.generateSuccessResult(n,s.path,Jj.CredentialMapper.toWrappedVerifiableCredential(o.value))):this.getResults().push(this.generateErrorResult(n,s.path,Jj.CredentialMapper.toWrappedVerifiableCredential(o.value)))}}})}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Gj.Status.ERROR,message:Xj.default.SUBJECT_IS_NOT_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:Gj.Status.INFO,message:s??Xj.default.SUBJECT_IS_ISSUER,verifiable_credential_path:r,payload:{format:n.format}}}};wd.SubjectIsIssuerEvaluationHandler=OA});var Zj,Qj=St(()=>{Zj="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var rq={};cr(rq,{customAlphabet:()=>yfe,customRandom:()=>tq,nanoid:()=>gfe,random:()=>eq,urlAlphabet:()=>Zj});var eq,tq,yfe,gfe,nq=St(()=>{Qj();eq=t=>crypto.getRandomValues(new Uint8Array(t)),tq=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,s=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let a=r(s),u=s;for(;u--;)if(o+=t[a[u]&n]||"",o.length===i)return o}}},yfe=(t,e=21)=>tq(t,e,eq),gfe=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,r)=>(r&=63,r<36?e+=r.toString(36):r<62?e+=(r-26).toString(36).toUpperCase():r>62?e+="-":e+="_",e),"")});var iq=v(_d=>{"use strict";var bfe=_d&&_d.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(_d,"__esModule",{value:!0});_d.UriEvaluationHandler=void 0;var vfe=mi(),wfe=(nq(),Th(rq)),gh=Cr(),BA=rc(),ab=bfe(Mi()),Efe=gi(),Ed=class t extends Efe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"UriEvaluation"}handle(e,r){e.input_descriptors.forEach((s,i)=>{let o=e.getVersion()!==BA.PEVersion.v2?s.schema.map(a=>a.uri):[];r.forEach((a,u)=>{let c=t.buildVcContextAndSchemaUris(a.credential,e.getVersion());this.evaluateUris(a,c,o,i,u,e.getVersion())})});let n=this.getResults().filter(s=>s.status===gh.Status.INFO).map(s=>{var i;return{id:vfe.JSONPath.nodes(e,s.input_descriptor_path)[0].value.id,format:(i=s.payload)===null||i===void 0?void 0:i.format,path:s.verifiable_credential_path}});this.client.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0)&&(this.presentationSubmission={id:(0,wfe.nanoid)(),definition_id:e.id,descriptor_map:n})}evaluateUris(e,r,n,s,i,o){let a=!1;if(o===BA.PEVersion.v1){for(let u=0;u<n.length;u++)t.containsHashlink(n[u])&&this.getResults().push(this.createWarnResultObject(s,i));for(let u=0;u<r.length;u++)n.find(c=>c===r[u])!=null&&(a=!0)}else a=!0;a?this.getResults().push(this.createSuccessResultObject(e,n,s,i)):this.getResults().push(this.createErrorResultObject(e,n,s,i))}static buildVcContextAndSchemaUris(e,r){let n=[];return Array.isArray(e["@context"])?e["@context"].forEach(s=>n.push(s)):n.push(e["@context"]),Array.isArray(e.credentialSchema)&&e.credentialSchema.length>0?e.credentialSchema.forEach(s=>n.push(s.id)):e.credentialSchema&&n.push(e.credentialSchema.id),r===BA.PEVersion.v1&&(Array.isArray(e.type)?e.type.forEach(s=>n.push(s)):e.type&&n.push(e.type)),n}createSuccessResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=gh.Status.INFO,i.message=ab.default.URI_EVALUATION_PASSED,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createErrorResultObject(e,r,n,s){let i=this.createResult(n,s);return i.status=gh.Status.ERROR,i.message=ab.default.URI_EVALUATION_DIDNT_PASS,i.payload={format:e.format,vcContext:e.credential["@context"],vcCredentialSchema:e.credential.credentialSchema,inputDescriptorsUris:r},i}createWarnResultObject(e,r){let n=this.createResult(e,r);return n.status=gh.Status.WARN,n.message=ab.default.URI_EVALUATION_DIDNT_PASS,n.payload=ab.default.INPUT_DESCRIPTOR_CONTEXT_CONTAINS_HASHLINK_VERIFICATION_NOT_SUPPORTED,n}createResult(e,r){return{input_descriptor_path:`$.input_descriptors[${e}]`,verifiable_credential_path:`$[${r}]`,evaluator:this.getName(),status:gh.Status.INFO,message:void 0}}static containsHashlink(e){return!(this.matchAll(e,t.HASHLINK_QUERY_URL_REGEX).next().done&&this.matchAll(e,t.HASHLINK_URL_ENCODED_REGEX).next().done)}};_d.UriEvaluationHandler=Ed;Ed.matchAll=oS();Ed.HASHLINK_URL_ENCODED_REGEX=/hl:[a-zA-Z0-9]+:[a-zA-Z0-9]+/g;Ed.HASHLINK_QUERY_URL_REGEX=/https*?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)(hl=[a-zA-Z0-9]+)/g});var aq=v(Sd=>{"use strict";var _fe=Sd&&Sd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Sd,"__esModule",{value:!0});Sd.FormatRestrictionEvaluationHandler=void 0;var sq=Cr(),oq=_fe(Mi()),Sfe=gi(),TA=class extends Sfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"FormatRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{!this.client.restrictToFormats||Object.keys(this.client.restrictToFormats).includes(i.format)?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${i.format} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:sq.Status.ERROR,message:oq.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:sq.Status.INFO,message:s??oq.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Sd.FormatRestrictionEvaluationHandler=TA});var lq=v(Dd=>{"use strict";var Dfe=Dd&&Dd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dd,"__esModule",{value:!0});Dd.DIDRestrictionEvaluationHandler=void 0;var uq=Cr(),cq=Dfe(Mi()),Afe=yi(),xfe=gi(),FA=class extends xfe.AbstractEvaluationHandler{constructor(e){super(e)}getName(){return"DIDRestrictionEvaluation"}handle(e,r){e.input_descriptors.forEach((n,s)=>{r.forEach((i,o)=>{let a=typeof i.credential.issuer=="object"?i.credential.issuer.id:i.credential.issuer;!this.client.hasRestrictToDIDMethods()||!a||(0,Afe.isRestrictedDID)(a,this.client.restrictToDIDMethods)||!a.toLowerCase().startsWith("did:")?this.getResults().push(this.generateSuccessResult(s,`$[${o}]`,i,`${a} is allowed`)):this.getResults().push(this.generateErrorResult(s,`$[${o}]`,i))})}),this.updatePresentationSubmission(e)}generateErrorResult(e,r,n){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:uq.Status.ERROR,message:cq.default.FORMAT_RESTRICTION_DIDNT_PASS,verifiable_credential_path:r,payload:{format:n.format}}}generateSuccessResult(e,r,n,s){return{input_descriptor_path:`$.input_descriptors[${e}]`,evaluator:this.getName(),status:uq.Status.INFO,message:s??cq.default.FORMAT_RESTRICTION_PASSED,verifiable_credential_path:r,payload:{format:n.format}}}};Dd.DIDRestrictionEvaluationHandler=FA});var dq=v(jr=>{"use strict";var Cfe=jr&&jr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),_i=jr&&jr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Cfe(e,t,r)};Object.defineProperty(jr,"__esModule",{value:!0});_i(gi(),jr);_i(U$(),jr);_i(hM(),jr);_i(Lj(),jr);_i(Uj(),jr);_i(Kj(),jr);_i(Hj(),jr);_i(zj(),jr);_i(Yj(),jr);_i(iq(),jr);_i(aq(),jr);_i(lq(),jr)});var RA=v(Ad=>{"use strict";var Pfe=Ad&&Ad.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ad,"__esModule",{value:!0});Ad.EvaluationClient=void 0;var Ofe=ay(),Bfe=Cr(),Tfe=Pfe(Mi()),IA=yi(),Hs=dq(),fq=[Ofe.IProofType.BbsBlsSignatureProof2020],kA=class{constructor(){this.failed_catched={tag:"root",status:Bfe.Status.ERROR,message:Tfe.default.UNKNOWN_EXCEPTION,stacktrace:""},this._results=[],this._wrappedVcs=[],this._presentationSubmission={},this._dids=[],this._limitDisclosureSignatureSuites=fq,this._restrictToDIDMethods=[],this._generatePresentationSubmission=!0}evaluate(e,r,n){this._restrictToDIDMethods=n?.restrictToDIDMethods?(0,IA.uniformDIDMethods)(n?.restrictToDIDMethods):[],this._dids=n?.holderDIDs?(0,IA.filterToRestrictedDIDs)(n.holderDIDs,this._restrictToDIDMethods):[],this._limitDisclosureSignatureSuites=n?.limitDisclosureSignatureSuites,this._restrictToFormats=n?.restrictToFormats,this._generatePresentationSubmission=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:!0,n?.presentationSubmission&&(this._presentationSubmission=n.presentationSubmission);let s=this.initEvaluationHandlers();for(s?.handle(e,r);s?.hasNext();){s=s.getNext();try{s?.handle(e,r)}catch(i){throw this.failed_catched.message+=i.message,this.failed_catched.stacktrace=i,this.failed_catched}}}get results(){return this._results}get dids(){return this._dids}set dids(e){this._dids=e}assertPresentationSubmission(){if(!this.generatePresentationSubmission&&(!this.presentationSubmission||Object.keys(this.presentationSubmission).length===0))throw Error("No presentation submission present, but required option was set")}get generatePresentationSubmission(){return this._generatePresentationSubmission}set generatePresentationSubmission(e){this._generatePresentationSubmission=e}get presentationSubmission(){return this._presentationSubmission}set presentationSubmission(e){this._presentationSubmission=e}get wrappedVcs(){return this._wrappedVcs}set wrappedVcs(e){this._wrappedVcs=e}get limitDisclosureSignatureSuites(){return this._limitDisclosureSignatureSuites||fq}set limitDisclosureSignatureSuites(e){this._limitDisclosureSignatureSuites=e}get restrictToDIDMethods(){return this._restrictToDIDMethods}set restrictToDIDMethods(e){this._restrictToDIDMethods=(0,IA.uniformDIDMethods)(e)}hasRestrictToDIDMethods(){return this.restrictToDIDMethods&&this.restrictToDIDMethods.length>0}get restrictToFormats(){return this._restrictToFormats}set restrictToFormats(e){this._restrictToFormats=e}initEvaluationHandlers(){let e=new Hs.UriEvaluationHandler(this);return e.setNext(new Hs.DIDRestrictionEvaluationHandler(this)).setNext(new Hs.FormatRestrictionEvaluationHandler(this)).setNext(new Hs.InputDescriptorFilterEvaluationHandler(this)).setNext(new Hs.PredicateRelatedFieldEvaluationHandler(this)).setNext(new Hs.LimitDisclosureEvaluationHandler(this)).setNext(new Hs.SubjectIsIssuerEvaluationHandler(this)).setNext(new Hs.SubjectIsHolderEvaluationHandler(this)).setNext(new Hs.SameSubjectEvaluationHandler(this)).setNext(new Hs.MarkForSubmissionEvaluationHandler(this)),e}};Ad.EvaluationClient=kA});var pq=v(lb=>{"use strict";Object.defineProperty(lb,"__esModule",{value:!0});lb.EvaluationClientWrapper=void 0;var ub=mi(),xd=Uo(),je=Cr(),cb=yi(),Ffe=RA(),$A=class{constructor(){this._client=new Ffe.EvaluationClient}getEvaluationClient(){return this._client}selectFrom(e,r,n){var s;let i;this._client.evaluate(e,r,n);let o=[...this.formatNotInfo(je.Status.WARN)],a=[...this.formatNotInfo(je.Status.ERROR)];if(e.submission_requirements){let u=this._client.results.filter(h=>h.evaluator==="MarkForSubmissionEvaluation"&&h.payload.group&&h.status!==je.Status.ERROR),c=Array.from(new Set(u)),l;try{l=this.matchSubmissionRequirements(e,e.submission_requirements,c)}catch(h){let y={status:je.Status.ERROR,message:JSON.stringify(h),tag:"matchSubmissionRequirements"};return{errors:a?[...a,y]:[y],warnings:o,areRequiredCredentialsPresent:je.Status.ERROR}}let p=this.extractMatches(l).map(h=>ub.JSONPath.nodes(this._client.wrappedVcs.map(y=>y.original),h)[0].value),f=this.determineAreRequiredCredentialsPresent(e,l);i={errors:f===je.Status.INFO?[]:a,matches:[...l],areRequiredCredentialsPresent:f,verifiableCredential:p,warnings:o}}else{let u=this._client.results.filter(l=>l.evaluator==="MarkForSubmissionEvaluation"&&l.status!==je.Status.ERROR);if(this.checkWithoutSubmissionRequirements(u,e).length)return{errors:a,matches:[],areRequiredCredentialsPresent:je.Status.ERROR,verifiableCredential:r.map(l=>l.original),warnings:o};{let l=this.matchWithoutSubmissionRequirements(u,e),p=this.extractMatches(l).map(f=>ub.JSONPath.nodes(this._client.wrappedVcs.map(h=>h.original),f)[0].value);i={errors:[],matches:[...l],areRequiredCredentialsPresent:je.Status.INFO,verifiableCredential:p,warnings:o}}}return this.fillSelectableCredentialsToVerifiableCredentialsMapping(i,r),i.areRequiredCredentialsPresent=this.determineAreRequiredCredentialsPresent(e,i?.matches),this.remapMatches(r.map(u=>u.original),i.matches,i?.verifiableCredential),(s=i.matches)===null||s===void 0||s.forEach(u=>{this.updateSubmissionRequirementMatchPathToAlias(u,"verifiableCredential")}),i.areRequiredCredentialsPresent===je.Status.INFO?i.errors=[]:(i.errors=a,i.warnings=o,i.verifiableCredential=r.map(u=>u.original)),i}remapMatches(e,r,n){r?.forEach(s=>{s.from_nested?this.remapMatches(e,s.from_nested,n):(s.vc_path.forEach((i,o,a)=>{let u=ub.JSONPath.query(e,i)[0],c=n?.findIndex(l=>JSON.stringify(l)===JSON.stringify(u));if(c===-1)throw new Error(`The index of the VerifiableCredential in your current call can't be found in your previously submitted credentials. Are you trying to send a new Credential?
verifiableCredential: ${u}`);a[o]=`$[${c}]`}),s.name)})}extractMatches(e){let r=[];return e.forEach(n=>{r.push(...n.vc_path),n.from_nested&&r.push(...this.extractMatches(n.from_nested))}),Array.from(new Set(r))}checkWithoutSubmissionRequirements(e,r){let n=[];if(!r.input_descriptors)return[];if(!e.length)return[{input_descriptor_path:"",evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:je.Status.ERROR,payload:"Not all the InputDescriptors are addressed"}];let s=r.input_descriptors,i=cb.ObjectUtils.getDistinctFieldInObject(e,"input_descriptor_path");if(i.length!==s.length){let o=i.map(a=>cb.JsonPathUtils.extractInputField(r,[a])[0].value).map(a=>a.id);for(let a=0;a<r.input_descriptors.length;a++)o.indexOf(r.input_descriptors[a].id)==-1&&n.push({input_descriptor_path:`$.input_descriptors[${a}]`,evaluator:"checkWithoutSubmissionRequirement",verifiable_credential_path:"",status:je.Status.ERROR,payload:"Not all the InputDescriptors are addressed"})}return n}matchSubmissionRequirements(e,r,n){let s=[];for(let i of r){let o={name:e.name||e.id,rule:i.rule,vc_path:[]};if(i.from&&(o.from=i.from),i.min&&(o.min=i.min),i.max&&(o.max=i.max),i.count&&(o.count=i.count),i.from){let a=this.mapMatchingDescriptors(e,i,n);a&&(o.vc_path.push(...a.vc_path),o.name=a.name,s.push(o))}else if(i.from_nested)try{o.from_nested=this.matchSubmissionRequirements(e,i.from_nested,n),s.push(o)}catch(a){throw new Error(`Error in handling value of from_nested: ${i.from_nested}: err: ${a}`)}else throw new Error("Invalid SubmissionRequirement object: Must contain either 'from' or 'from_nested'")}return s}matchWithoutSubmissionRequirements(e,r){let n=[],s=this.createIdToVcMap(e);for(let[i,o]of s.entries())if(!(!o||!o.length))for(let a of o){let u=cb.JsonPathUtils.extractInputField(r,[i]);u.length&&n.push({name:u[0].value.name||u[0].value.id,rule:xd.Rules.All,vc_path:[a]})}return this.removeDuplicateSubmissionRequirementMatches(n)}mapMatchingDescriptors(e,r,n){var s;let i={rule:r.rule,vc_path:[]};if(r?.from){i.from=r.from;for(let o of n){let a=ub.JSONPath.query(e,o.input_descriptor_path)[0];a.group&&a.group.indexOf(r.from)===-1||(i.name=a.name||a.id,o.payload.group.includes(r.from)&&((s=i.vc_path)===null||s===void 0?void 0:s.indexOf(o.verifiable_credential_path))===-1&&i.vc_path.push(o.verifiable_credential_path))}}return i}evaluate(e,r,n){var s,i,o,a;this._client.evaluate(e,r,n);let u={areRequiredCredentialsPresent:je.Status.INFO,verifiableCredential:r.map(c=>c.original)};if(u.warnings=this.formatNotInfo(je.Status.WARN),u.errors=this.formatNotInfo(je.Status.ERROR),this._client.assertPresentationSubmission(),!((s=this._client.presentationSubmission)===null||s===void 0)&&s.descriptor_map.length){let c=(i=this._client.presentationSubmission)===null||i===void 0?void 0:i.descriptor_map.length;for(let l=0;l<c;l++)this._client.presentationSubmission.descriptor_map[l]&&this._client.presentationSubmission.descriptor_map.push(this._client.presentationSubmission.descriptor_map[l]);this._client.presentationSubmission.descriptor_map.splice(0,c),u.value=JSON.parse(JSON.stringify(this._client.presentationSubmission))}return this._client.generatePresentationSubmission&&this.updatePresentationSubmissionPathToAlias("verifiableCredential",u.value),u.verifiableCredential=this._client.wrappedVcs.map(c=>c.original),u.areRequiredCredentialsPresent=!((a=(o=u.value)===null||o===void 0?void 0:o.descriptor_map)===null||a===void 0)&&a.length?je.Status.INFO:je.Status.ERROR,u}formatNotInfo(e){return this._client.results.filter(r=>r.status===e).map(r=>{let n=r.verifiable_credential_path.substring(1);return{tag:r.evaluator,status:r.status,message:`${r.message}: ${r.input_descriptor_path}: $.verifiableCredential${n}`}})}submissionFrom(e,r){if(!this._client.results.length)throw Error("You need to call evaluate() before pex.presentationFrom()");if(!this._client.generatePresentationSubmission)return this._client.presentationSubmission;if(e.submission_requirements){let i=this._client.results.filter(d=>d.evaluator==="MarkForSubmissionEvaluation"&&d.payload.group&&d.status!==je.Status.ERROR),[o,a]=this.matchUserSelectedVcs(i,r),u=new Map;"input_descriptors"in e&&e.input_descriptors.forEach(d=>{d.group&&d.group.forEach(p=>{u.has(p)?u.set(p,u.get(p)+1):u.set(p,1)})});let c=this.evaluateRequirements(e.submission_requirements,o,u,0),l=a.filter(d=>c[1].find(p=>p.verifiable_credential_path===d[1]));return this.updatePresentationSubmission(l),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}let n=this._client.results.filter(i=>i.evaluator==="MarkForSubmissionEvaluation"&&i.status!==je.Status.ERROR),s=this.matchUserSelectedVcs(n,r);return this.updatePresentationSubmission(s[1]),this.updatePresentationSubmissionPathToAlias("verifiableCredential"),this._client.presentationSubmission}updatePresentationSubmission(e){this._client.generatePresentationSubmission&&(this._client.presentationSubmission.descriptor_map=this._client.presentationSubmission.descriptor_map.filter(r=>e.find(n=>n[0]===r.path)).map(r=>{let n=e.find(s=>s[0]===r.path);return n&&(r.path=n[1]),r}))}matchUserSelectedVcs(e,r){let n=r.map((o,a)=>[a,JSON.stringify(o.original)]),s=this._client.wrappedVcs.map((o,a)=>[a,JSON.stringify(o.original)]),i=[];return n.forEach((o,a)=>{s.forEach((u,c)=>{u[1]===o[1]&&i.push([`$[${c}]`,`$[${a}]`])})}),e=e.filter(o=>i.find(a=>a[0]===o.verifiable_credential_path)).map(o=>{let a=i.find(u=>u[0]===o.verifiable_credential_path);return a&&(o.verifiable_credential_path=a[1]),o}),[e,i]}evaluateRequirements(e,r,n,s){let i=0,o=[];for(let a of e)if(a.from){if(a.rule===xd.Rules.All){let[u,c]=this.countMatchingInputDescriptors(a,r);if(u!==n.get(a.from))throw Error(`Not all input descriptors are members of group ${a.from}`);i++,o.push(...c)}else if(a.rule===xd.Rules.Pick){let[u,c]=this.countMatchingInputDescriptors(a,r);try{this.handleCount(a,u,s),i++}catch(l){if(s===0)throw l}o.push(...c)}}else if(a.from_nested){let[u,c]=this.evaluateRequirements(a.from_nested,r,n,++s);i+=u,o.push(...c),this.handleCount(a,u,s)}return[i,o]}countMatchingInputDescriptors(e,r){let n=0,s=[];for(let i of r)i.payload.group.includes(e.from)&&(s.push(i),n++);return[n,s]}handleCount(e,r,n){if(e.count&&r!==e.count)throw Error(`Count: expected: ${e.count} actual: ${r} at level: ${n}`);if(e.min&&r<e.min)throw Error(`Min: expected: ${e.min} actual: ${r} at level: ${n}`);if(e.max&&r>e.max)throw Error(`Max: expected: ${e.max} actual: ${r} at level: ${n}`)}removeDuplicateSubmissionRequirementMatches(e){return e.filter((r,n)=>{let s=JSON.stringify(r);return n===e.findIndex(i=>JSON.stringify(i)===s)})}fillSelectableCredentialsToVerifiableCredentialsMapping(e,r){var n;e&&((n=e.verifiableCredential)===null||n===void 0||n.forEach(s=>{var i;let o=cb.ObjectUtils.isString(s)?r.findIndex(a=>s===a.original):r.findIndex(a=>JSON.stringify(s.proof)===JSON.stringify(a.credential.proof));if(o===-1)throw new Error("index is not right");(i=e.vcIndexes)===null||i===void 0||i.push(o)}))}determineAreRequiredCredentialsPresent(e,r,n){if(!r||!r.length)return je.Status.ERROR;let s=r.map(i=>this.determineSubmissionRequirementStatus(e,i));if(n){if(n.rule===xd.Rules.All&&s.includes(je.Status.ERROR))return je.Status.ERROR;let i=s.filter(o=>o!==je.Status.ERROR).length;if(n.count)return n.count>i?je.Status.ERROR:n.count<i?je.Status.WARN:je.Status.INFO;if(n.min&&n.min>i)return je.Status.ERROR;if(n.max&&n.max<i)return je.Status.WARN}else return s.includes(je.Status.ERROR)?je.Status.ERROR:s.includes(je.Status.WARN)?je.Status.WARN:je.Status.INFO;return je.Status.INFO}determineSubmissionRequirementStatus(e,r){if(r.from&&r.from_nested)throw new Error("Invalid submission_requirement object: MUST contain either a from or from_nested property.");if(!r.from&&!r.from_nested&&r.vc_path.length!==1)return je.Status.ERROR;if(r.from){let n=this.countGroupIDs(e.input_descriptors,r.from);switch(r.rule){case xd.Rules.All:return r.vc_path.length===n?je.Status.INFO:je.Status.WARN;case xd.Rules.Pick:return this.getPickRuleStatus(r);default:return je.Status.ERROR}}else if(r.from_nested)return this.determineAreRequiredCredentialsPresent(e,r.from_nested,r);return je.Status.INFO}getPickRuleStatus(e){return e.vc_path.length===0?je.Status.ERROR:e.count&&e.vc_path.length!==e.count?e.vc_path.length>e.count?je.Status.WARN:je.Status.ERROR:e.min&&e.vc_path.length<e.min?je.Status.ERROR:e.max&&e.vc_path.length>e.max?je.Status.WARN:je.Status.INFO}updateSubmissionRequirementMatchPathToAlias(e,r){let n=[];e.vc_path.forEach(s=>{n.push(s.replace("$","$."+r))}),e.vc_path=n,e.from_nested&&e.from_nested.forEach(s=>{this.updateSubmissionRequirementMatchPathToAlias(s,r)})}updatePresentationSubmissionPathToAlias(e,r){r?r.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)}):this._client.generatePresentationSubmission&&this._client.presentationSubmission.descriptor_map.forEach(n=>{this.replacePathWithAlias(n,e)})}replacePathWithAlias(e,r){e.path=e.path.replace("$","$."+r),e.path_nested&&this.replacePathWithAlias(e.path_nested,r)}createIdToVcMap(e){let r=new Map,n=new Map;for(let s=0;s<e.length;s++){let i=e[s].input_descriptor_path;if(n.has(i)){let o=n.get(i);o&&o.push(e[s])}else n.set(i,[e[s]])}for(let[s,i]of n.entries()){let o=[];for(let a=0;a<i.length;a++)o.indexOf(i[a].verifiable_credential_path)===-1&&o.push(i[a].verifiable_credential_path);r.set(s,o)}return r}countGroupIDs(e,r){let n=0;for(let s of e)s.group&&s.group.includes(r)&&n++;return n}};lb.EvaluationClientWrapper=$A});var bh=v(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.HandlerCheckResult=qa.EvaluationClientWrapper=qa.EvaluationClient=void 0;var Ife=XF();Object.defineProperty(qa,"HandlerCheckResult",{enumerable:!0,get:function(){return Ife.HandlerCheckResult}});var kfe=RA();Object.defineProperty(qa,"EvaluationClient",{enumerable:!0,get:function(){return kfe.EvaluationClient}});var Rfe=pq();Object.defineProperty(qa,"EvaluationClientWrapper",{enumerable:!0,get:function(){return Rfe.EvaluationClientWrapper}})});var hq=v(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.KeyEncoding=La.PresentationSubmissionLocation=void 0;var $fe;(function(t){t[t.EXTERNAL=0]="EXTERNAL",t[t.PRESENTATION=1]="PRESENTATION"})($fe=La.PresentationSubmissionLocation||(La.PresentationSubmissionLocation={}));var Nfe;(function(t){t.Jwk="Jwk",t.Base58="Base58",t.Hex="Hex",t.Multibase="Multibase"})(Nfe=La.KeyEncoding||(La.KeyEncoding={}))});var vh=v(vc=>{"use strict";var Mfe=vc&&vc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jfe=vc&&vc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Mfe(e,t,r)};Object.defineProperty(vc,"__esModule",{value:!0});jfe(hq(),vc)});var mq=v(($xe,jA)=>{"use strict";jA.exports=MA;jA.exports.default=MA;var _r={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},qfe=Object.prototype.hasOwnProperty,NA={type:["number","string"]};function Or(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:NA.type},message:"must be number,string",schema:NA.type,parentSchema:NA,data:t};i===null?i=[a]:i.push(a),o++}return Or.errors=i,o===0}function db(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:_r.required,parentSchema:_r,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!qfe.call(_r.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:_r,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Or(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Or.errors:i.concat(Or.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Or(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Or.errors:i.concat(Or.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:_r.properties.enum.type,parentSchema:_r.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Or(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Or.errors:i.concat(Or.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Or(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Or.errors:i.concat(Or.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:_r.properties.format.type,parentSchema:_r.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:_r.properties.maxLength.type,parentSchema:_r.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Or(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Or.errors:i.concat(Or.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:_r.properties.minLength.type,parentSchema:_r.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Or(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Or.errors:i.concat(Or.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:_r.properties.not.type,parentSchema:_r.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:_r.properties.pattern.type,parentSchema:_r.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:_r.properties.type.type,parentSchema:_r.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:_r.type,parentSchema:_r,data:t};i===null?i=[a]:i.push(a),o++}return db.errors=i,o===0}function MA(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return db(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?db.errors:i.concat(db.errors),o=i.length),MA.errors=i,o===0}});var yq=v((Nxe,UA)=>{"use strict";UA.exports=LA;UA.exports.default=LA;var Rt={additionalProperties:!1,properties:{const:{$ref:"#/definitions/OneOfNumberString"},enum:{items:{$ref:"#/definitions/OneOfNumberString"},type:"array"},exclusiveMaximum:{$ref:"#/definitions/OneOfNumberString"},exclusiveMinimum:{$ref:"#/definitions/OneOfNumberString"},format:{type:"string"},formatExclusiveMaximum:{type:"string"},formatExclusiveMinimum:{type:"string"},formatMaximum:{type:"string"},formatMinimum:{type:"string"},maxLength:{type:"number"},maximum:{$ref:"#/definitions/OneOfNumberString"},minLength:{type:"number"},minimum:{$ref:"#/definitions/OneOfNumberString"},not:{type:"object"},pattern:{type:"string"},type:{type:"string"}},required:["type"],type:"object"},Lfe=Object.prototype.hasOwnProperty,qA={type:["number","string"]};function Br(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(typeof t!="number"&&typeof t!="string"){let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:qA.type},message:"must be number,string",schema:qA.type,parentSchema:qA,data:t};i===null?i=[a]:i.push(a),o++}return Br.errors=i,o===0}function fb(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.type===void 0){let a={instancePath:e,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'",schema:Rt.required,parentSchema:Rt,data:t};i===null?i=[a]:i.push(a),o++}for(let a in t)if(!Lfe.call(Rt.properties,a)){let u={instancePath:e,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties",schema:!1,parentSchema:Rt,data:t};i===null?i=[u]:i.push(u),o++}if(t.const!==void 0&&(Br(t.const,{instancePath:e+"/const",parentData:t,parentDataProperty:"const",rootData:s})||(i=i===null?Br.errors:i.concat(Br.errors),o=i.length)),t.enum!==void 0){let a=t.enum;if(Array.isArray(a)){let u=a.length;for(let c=0;c<u;c++)Br(a[c],{instancePath:e+"/enum/"+c,parentData:a,parentDataProperty:c,rootData:s})||(i=i===null?Br.errors:i.concat(Br.errors),o=i.length)}else{let u={instancePath:e+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array",schema:Rt.properties.enum.type,parentSchema:Rt.properties.enum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.exclusiveMaximum!==void 0&&(Br(t.exclusiveMaximum,{instancePath:e+"/exclusiveMaximum",parentData:t,parentDataProperty:"exclusiveMaximum",rootData:s})||(i=i===null?Br.errors:i.concat(Br.errors),o=i.length)),t.exclusiveMinimum!==void 0&&(Br(t.exclusiveMinimum,{instancePath:e+"/exclusiveMinimum",parentData:t,parentDataProperty:"exclusiveMinimum",rootData:s})||(i=i===null?Br.errors:i.concat(Br.errors),o=i.length)),t.format!==void 0){let a=t.format;if(typeof a!="string"){let u={instancePath:e+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Rt.properties.format.type,parentSchema:Rt.properties.format,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMaximum!==void 0){let a=t.formatExclusiveMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMaximum",schemaPath:"#/properties/formatExclusiveMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Rt.properties.formatExclusiveMaximum.type,parentSchema:Rt.properties.formatExclusiveMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatExclusiveMinimum!==void 0){let a=t.formatExclusiveMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatExclusiveMinimum",schemaPath:"#/properties/formatExclusiveMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Rt.properties.formatExclusiveMinimum.type,parentSchema:Rt.properties.formatExclusiveMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMaximum!==void 0){let a=t.formatMaximum;if(typeof a!="string"){let u={instancePath:e+"/formatMaximum",schemaPath:"#/properties/formatMaximum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Rt.properties.formatMaximum.type,parentSchema:Rt.properties.formatMaximum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.formatMinimum!==void 0){let a=t.formatMinimum;if(typeof a!="string"){let u={instancePath:e+"/formatMinimum",schemaPath:"#/properties/formatMinimum/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Rt.properties.formatMinimum.type,parentSchema:Rt.properties.formatMinimum,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maxLength!==void 0){let a=t.maxLength;if(typeof a!="number"){let u={instancePath:e+"/maxLength",schemaPath:"#/properties/maxLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Rt.properties.maxLength.type,parentSchema:Rt.properties.maxLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.maximum!==void 0&&(Br(t.maximum,{instancePath:e+"/maximum",parentData:t,parentDataProperty:"maximum",rootData:s})||(i=i===null?Br.errors:i.concat(Br.errors),o=i.length)),t.minLength!==void 0){let a=t.minLength;if(typeof a!="number"){let u={instancePath:e+"/minLength",schemaPath:"#/properties/minLength/type",keyword:"type",params:{type:"number"},message:"must be number",schema:Rt.properties.minLength.type,parentSchema:Rt.properties.minLength,data:a};i===null?i=[u]:i.push(u),o++}}if(t.minimum!==void 0&&(Br(t.minimum,{instancePath:e+"/minimum",parentData:t,parentDataProperty:"minimum",rootData:s})||(i=i===null?Br.errors:i.concat(Br.errors),o=i.length)),t.not!==void 0){let a=t.not;if(!(a&&typeof a=="object"&&!Array.isArray(a))){let u={instancePath:e+"/not",schemaPath:"#/properties/not/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Rt.properties.not.type,parentSchema:Rt.properties.not,data:a};i===null?i=[u]:i.push(u),o++}}if(t.pattern!==void 0){let a=t.pattern;if(typeof a!="string"){let u={instancePath:e+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Rt.properties.pattern.type,parentSchema:Rt.properties.pattern,data:a};i===null?i=[u]:i.push(u),o++}}if(t.type!==void 0){let a=t.type;if(typeof a!="string"){let u={instancePath:e+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string",schema:Rt.properties.type.type,parentSchema:Rt.properties.type,data:a};i===null?i=[u]:i.push(u),o++}}}else{let a={instancePath:e,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object",schema:Rt.type,parentSchema:Rt,data:t};i===null?i=[a]:i.push(a),o++}return fb.errors=i,o===0}function LA(t,{instancePath:e="",parentData:r,parentDataProperty:n,rootData:s=t}={}){let i=null,o=0;return fb(t,{instancePath:e,parentData:r,parentDataProperty:n,rootData:s})||(i=i===null?fb.errors:i.concat(fb.errors),o=i.length),LA.errors=i,o===0}});var Ji=v(pb=>{"use strict";Object.defineProperty(pb,"__esModule",{value:!0});pb.ValidationBundler=void 0;var gq=Cr(),VA=class{constructor(e,r){this.parentTag=e,this.myTag=r}getTag(){return this.parentTag!=null?this.parentTag+"."+this.myTag:this.myTag}toChecked(e){return new gq.Checked(this.getTag(),gq.Status.ERROR,e)}};pb.ValidationBundler=VA});var HA=v(Cd=>{"use strict";var vq=Cd&&Cd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cd,"__esModule",{value:!0});Cd.FieldsVB=void 0;var Ufe=mi(),bq=Uo(),Vfe=vq(mq()),Kfe=vq(yq()),Hfe=Ji(),KA=class t extends Hfe.ValidationBundler{constructor(e){super(e,"fields"),this.mustHaveValidJsonPathsMsg='field object "path" property must contain array of valid json paths',this.pathObjMustHaveValidJsonPathMsg='field object "path" property must contain valid json paths.',this.filterMustBeValidJsonSchemaMsg='field object "filter" property must be valid json schema',this.filterIsMustInPresenceOfPredicateMsg='field object must have a "filter" property if "predicate" is present',this.filterIsNotValidJsonSchemaDescriptorMsg='could not parse "filter" object as a valid json schema descriptor.',this.purposeShouldBeANonEmptyStringMsg="purpose should be a non empty string",this.shouldBeKnownOptionMsg="Unknown predicate property"}getValidations(e){let r=[];if(e)for(let n=0;n<e.length;n++)r=[...r,...this.getValidationsFor(e[n],n)];return r}getValidationsFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:this.mustHaveValidJsonPaths(),message:this.mustHaveValidJsonPathsMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterMustBeValidJsonSchema(),message:this.filterMustBeValidJsonSchemaMsg},{tag:this.getMyTag(r),target:e,predicate:this.filterIsMustInPresenceOfPredicate(),message:this.filterIsMustInPresenceOfPredicateMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeANonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>t.shouldBeKnownOption(n?.predicate),message:this.shouldBeKnownOptionMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}mustHaveValidJsonPaths(){return e=>e.path!=null&&e.path.length>0&&this._validateJsonPaths(e.path)}_validateJsonPaths(e){let r=[];if(e.forEach(n=>{try{Ufe.JSONPath.parse(n)}catch{r.push(n)}}),r.length>0)throw this.toChecked(this.pathObjMustHaveValidJsonPathMsg+" Got: "+JSON.stringify(r));return!0}filterMustBeValidJsonSchema(){return e=>this._validateFilter(e.filter)}_validateFilter(e){if(e==null)return!0;let r=!1;try{r=(0,Kfe.default)(e),r||(r=(0,Vfe.default)(e))}catch{throw this.toChecked(this.filterIsNotValidJsonSchemaDescriptorMsg+" Got "+JSON.stringify(e))}return r}filterIsMustInPresenceOfPredicate(){return e=>!(e.predicate!=null&&e.filter==null)}static optionalNonEmptyString(e){return e==null||e.length>0}static shouldBeKnownOption(e){return e==null||e==bq.Optionality.Required||e==bq.Optionality.Preferred}};Cd.FieldsVB=KA});var mb=v(hb=>{"use strict";Object.defineProperty(hb,"__esModule",{value:!0});hb.ConstraintsVB=void 0;var Ko=Uo(),Wfe=HA(),zfe=Ji(),WA=class t extends zfe.ValidationBundler{constructor(e){super(e,"constraints"),this.disclosureLimitShouldHaveKnownValueMsg="limit_disclosure should have known value",this.statusShouldHaveKnownValueMsg="Unknown status property",this.statusDirectiveShouldHaveKnownValueMsg="status directive should have known value",this.subjectIsIssuerShouldBeKnownValueMsg="subject_is_issuer should be known value",this.fieldIdIsMandatoryMsg="field_id property is mandatory",this.fieldIdMustBeArrayOfStringsMsg="field_id property must be an array of strings",this.fieldIdMustCorrespondToFieldIdMsg="field_id must correspond to a present field object id property",this.directivePropertyIsMandatoryMsg="directive property is mandatory",this.oneOfTheKnownDirectivePropertiesMandatoryMsg="directive property must be one of [required, preferred]"}getValidations(e){let r=[];return e&&(r=[{tag:this.getTag(),target:e,predicate:n=>t.disclosureLimitShouldHaveKnownValue(n.limit_disclosure),message:this.disclosureLimitShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.statusShouldHaveKnownValue(n.statuses),message:this.statusShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:t.statusDirectiveShouldHaveKnownValue(),message:this.statusDirectiveShouldHaveKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>t.shouldBeKnownOption(n.is_holder),message:this.subjectIsIssuerShouldBeKnownValueMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.is_holder),message:this.fieldIdMustCorrespondToFieldIdMsg},{tag:this.getTag(),target:e,predicate:n=>this.fieldIdInSubjectMustCorrespondToFieldId(n,n.same_subject),message:this.fieldIdMustCorrespondToFieldIdMsg},...this.getSubjectsValidations(e?.is_holder),...this.getSubjectsValidations(e?.same_subject),...this.getFieldsValidations(e)]),r}getFieldsValidations(e){var r;return!((r=e?.fields)===null||r===void 0)&&r.length?new Wfe.FieldsVB(this.getTag()).getValidations(e.fields):[]}static disclosureLimitShouldHaveKnownValue(e){return!e||e===Ko.Optionality.Preferred||e===Ko.Optionality.Required}static statusShouldHaveKnownValue(e){return e==null||e.active!=null||e.revoked!=null||e.suspended!=null}static statusDirectiveShouldHaveKnownValue(){return e=>{var r,n,s;return this.pdStatusShouldBeKnown((r=e?.statuses)===null||r===void 0?void 0:r.active)&&this.pdStatusShouldBeKnown((n=e?.statuses)===null||n===void 0?void 0:n.revoked)&&this.pdStatusShouldBeKnown((s=e?.statuses)===null||s===void 0?void 0:s.suspended)}}static pdStatusShouldBeKnown(e){return!e||e.directive===Ko.Directives.Allowed||e.directive===Ko.Directives.Disallowed||e.directive===Ko.Directives.Required}static shouldBeKnownOption(e){return e?e.filter(r=>r.directive!==Ko.Optionality.Preferred&&r.directive!==Ko.Optionality.Required).length===0:!0}getSubjectsValidations(e){if(e){let r=[];for(let n=0;n<e.length;n++)r=[{tag:this.getMyTag(n),target:e[n],predicate:s=>Array.isArray(s.field_id),message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>!!s.field_id,message:this.fieldIdIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.field_id.length===s.field_id.filter(i=>typeof i=="string").length,message:this.fieldIdMustBeArrayOfStringsMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive!==void 0,message:this.directivePropertyIsMandatoryMsg},{tag:this.getMyTag(n),target:e[n],predicate:s=>s.directive===Ko.Optionality.Preferred||s.directive===Ko.Optionality.Required,message:this.oneOfTheKnownDirectivePropertiesMandatoryMsg}];return r}return[]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}fieldIdInSubjectMustCorrespondToFieldId(e,r){if(r){for(let n of r)for(let s of n.field_id)if(!t.isValidFieldId(e,s))return!1}return!0}static isValidFieldId(e,r){return e?.fields?e.fields.map(n=>n.id).includes(r):!1}};hb.ConstraintsVB=WA});var JA=v(yb=>{"use strict";Object.defineProperty(yb,"__esModule",{value:!0});yb.InputDescriptorsV1VB=void 0;var wh=yi(),Jfe=mb(),Gfe=Ji(),zA=class extends Gfe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string",this.shouldHaveValidSchemaURIMsg="schema should have valid URI"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>wh.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:this.isValidSchema(),message:this.shouldHaveValidSchemaURIMsg},{tag:this.getMyTag(r),target:e,predicate:n=>wh.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>wh.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}isValidSchema(){return e=>e.schema.filter(r=>this.isAValidURI(r.uri)&&(r.required==null||typeof r.required=="boolean")).length>0}isAValidURI(e){if(e){if(!wh.ObjectValidationUtils.nonEmptyString(e))return!1}else return!1;if(e.startsWith("http://")||e.startsWith("https://"))try{new URL(e)}catch{return wh.ObjectValidationUtils.isValidDIDURI(e)}return!0}constraintsValidations(e,r){return e.constraints?new Jfe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}};yb.InputDescriptorsV1VB=zA});var YA=v(gb=>{"use strict";Object.defineProperty(gb,"__esModule",{value:!0});gb.InputDescriptorsV2VB=void 0;var GA=yi(),Xfe=mb(),Yfe=Ji(),XA=class extends Yfe.ValidationBundler{constructor(e){super(e,"input_descriptor"),this.idMustBeNonEmptyStringMsg="input descriptor id must be non-empty string",this.nameShouldBeNonEmptyStringMsg="input descriptor name should be non-empty string",this.purposeShouldBeNonEmptyStringMsg="input descriptor purpose should be non-empty string"}getValidations(e){let r=[];return r.push({tag:this.getTag(),target:e,predicate:n=>this.shouldNotHaveSchema(n),message:"input descriptor should not have schema property"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueIds(n),message:"input descriptor ids must be unique"},{tag:this.getTag(),target:e,predicate:n=>this.shouldHaveUniqueFieldsIds(n),message:"fields id must be unique"}),e.forEach((n,s)=>{r=[...r,...this.getValidationFor(n,s),...this.constraintsValidations(n,s)]}),r}getValidationFor(e,r){return[{tag:this.getMyTag(r),target:e,predicate:n=>GA.ObjectValidationUtils.nonEmptyString(n?.id),message:this.idMustBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>GA.ObjectValidationUtils.optionalNonEmptyString(n?.name),message:this.nameShouldBeNonEmptyStringMsg},{tag:this.getMyTag(r),target:e,predicate:n=>GA.ObjectValidationUtils.optionalNonEmptyString(n?.purpose),message:this.purposeShouldBeNonEmptyStringMsg}]}shouldHaveUniqueFieldsIds(e){let r=[],n=new Set,s=[];return e.map(i=>{var o;return(o=i.constraints)===null||o===void 0?void 0:o.fields}).forEach(i=>{i&&s.push(...i)}),s.forEach(i=>{i.id&&r.push(i.id)}),r.forEach(i=>n.add(i)),r.length===n.size}shouldHaveUniqueIds(e){let r=[],n=new Set;return e.forEach(s=>r.push(s.id)),r.forEach(s=>n.add(s)),r.length===n.size}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}constraintsValidations(e,r){return e.constraints?new Xfe.ConstraintsVB(this.getMyTag(r)).getValidations(e.constraints):[]}shouldNotHaveSchema(e){let r=!1;return e.forEach(n=>{n.schema&&(r=!0)}),!r}};gb.InputDescriptorsV2VB=XA});var QA=v(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});bb.JwtAlgos=void 0;var ZA=class{static getJwtAlgos(){return["HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512","none","RSA1_5","RSA-OAEP","RSA-OAEP-256","A128KW","A192KW","A256KW","dir","ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW","A128GCMKW","A192GCMKW","A256GCMKW","PBES2-HS256+A128KW","PBES2-HS384+A192KW","PBES2-HS512+A256KW"]}};bb.JwtAlgos=ZA});var tx=v(vb=>{"use strict";Object.defineProperty(vb,"__esModule",{value:!0});vb.LdpTypes=void 0;var ex=class{static getLdpTypes(){return["Ed25519VerificationKey2018","Ed25519Signature2018","RsaSignature2018","EcdsaSecp256k1Signature2019","EcdsaSecp256k1RecoverySignature2020","JsonWebSignature2020","GpgSignature2020","JcsEd25519Signature2020","BbsBlsSignature2020","Bls12381G2Key2020"]}};vb.LdpTypes=ex});var Eb=v(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0});wb.SubmissionRequirementVB=void 0;var Zfe=Ji(),rx=class t extends Zfe.ValidationBundler{constructor(e){super(e,"submission_requirements"),this.ruleIsMandatoryMsg="rule is a mandatory field",this.needsOneFromOrFromNestedMsg="needs exactly one of from or from_nested",this.fromNestedShouldBeArrayMsg="The value of the from_nested property MUST be an array",this.isCountPositiveIntMsg="count must be a practical positive number",this.isMinPositiveIntMsg="min must be a practical positive number",this.isMaxPositiveIntMsg="max must be a practical positive number",this.ruleShouldBePickOrAllMsg="rule should be either pick or all"}getValidations(e){let r=[];if(e!=null&&e.length>0)for(let n=0;n<e.length;n++)r=[...r,...this.getMyValidations(n,e),...this.getSubValidations(n,e)];return r}getMyValidations(e,r){return[{tag:this.getMyTag(e),target:r[e],predicate:t.ruleIsMandatory,message:this.ruleIsMandatoryMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.needsOneFromOrFromNested,message:this.needsOneFromOrFromNestedMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.fromNestedShouldBeArray,message:this.fromNestedShouldBeArrayMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isCountPositiveInt,message:this.isCountPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMinPositiveInt,message:this.isMinPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:this.isMaxPositiveInt,message:this.isMaxPositiveIntMsg},{tag:this.getMyTag(e),target:r[e],predicate:t.ruleShouldBePickOrAll,message:this.ruleShouldBePickOrAllMsg}]}getMyTag(e){return this.parentTag+"."+this.myTag+"["+e+"]"}getSubValidations(e,r){let n=r[e].from_nested;return n!=null?new t(this.getFromNestedTag(e)).getValidations(n):[]}getFromNestedTag(e){return this.getMyTag(e)+".from_nested"}isCountPositiveInt(e){return e.rule!=="pick"||e.count==null||0<e.count}isMinPositiveInt(e){return e.rule!=="pick"||e.min==null||0<=e.min}isMaxPositiveInt(e){return e.rule!=="pick"||e.max==null||0<e.max}static ruleIsMandatory(e){return e.rule!=null}static needsOneFromOrFromNested(e){return e.from==null!=(e.from_nested==null)}static fromNestedShouldBeArray(e){return e.from_nested==null||Array.isArray(e.from_nested)}static ruleShouldBePickOrAll(e){return e.rule==="pick"||e.rule==="all"}};wb.SubmissionRequirementVB=rx});var Eq=v(Pd=>{"use strict";var Qfe=Pd&&Pd.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.PresentationDefinitionV1VB=void 0;var epe=QA(),tpe=tx(),rpe=Qfe(ES()),wq=JA(),npe=Eb(),ipe=Ji(),nx=class t extends ipe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){return e.submission_requirements?[...this.myValidations(e),...new wq.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors),...new npe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:[...this.myValidations(e),...new wq.InputDescriptorsV1VB(this.myTag).getValidations(e.input_descriptors)]}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."},{tag:this.getTag(),target:e,predicate:r=>t.shouldNotHaveFrameProperty(r),message:"input descriptor should not have frame property."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=epe.JwtAlgos.getJwtAlgos(),s=tpe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&(Array.isArray(a.from)?s.push(...a.from):s.push(a.from))});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,rpe.default)({presentation_definition:e})}static shouldNotHaveFrameProperty(e){return!e.frame}};Pd.PresentationDefinitionV1VB=nx});var _q=v(_b=>{"use strict";Object.defineProperty(_b,"__esModule",{value:!0});_b.FrameVB=void 0;var Ua=yi(),spe=Ji(),ix=class t extends spe.ValidationBundler{constructor(e){super(e,"frame"),this.frameIsValidMsg="frame value is not valid"}getValidations(e){let r=[];return r=[...r,...this.getMyValidations(e)],r}getMyValidations(e){return[{tag:this.getMyTag(),target:e,predicate:t.frameIsValid,message:this.frameIsValidMsg}]}getMyTag(){return this.parentTag+"."+this.myTag}static frameIsValid(e){if(!e||Array.isArray(e)||typeof e!="object")return!1;let r=e;if(r&&r["@id"]){for(let n of Ua.ObjectUtils.asArray(e["@id"]))if(!(Ua.ObjectUtils.isObject(n)||Ua.ObjectUtils.isUrlAbsolute(n))||Ua.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}if(r["@types"]){for(let n of Ua.ObjectUtils.asArray(e["@types"]))if(!(Ua.ObjectUtils.isObject(n)||Ua.ObjectUtils.isUrlAbsolute(n))||Ua.ObjectUtils.isString(n)&&n.indexOf("_:")===0)return!1}return!0}};_b.FrameVB=ix});var Dq=v(Od=>{"use strict";var ope=Od&&Od.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Od,"__esModule",{value:!0});Od.PresentationDefinitionV2VB=void 0;var ape=QA(),upe=tx(),cpe=ope(TS()),lpe=_q(),Sq=YA(),dpe=Eb(),fpe=Ji(),sx=class t extends fpe.ValidationBundler{constructor(e){super(e,"presentation_definition")}getValidations(e){let r=[];return e.submission_requirements?r=[...this.myValidations(e),...new Sq.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors),...new dpe.SubmissionRequirementVB(this.myTag).getValidations(e.submission_requirements)]:r=[...this.myValidations(e),...new Sq.InputDescriptorsV2VB(this.myTag).getValidations(e.input_descriptors)],e.frame&&r.push(...new lpe.FrameVB(this.myTag).getValidations(e.frame)),r}myValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_definition should be non null."},{tag:this.getTag(),target:e,predicate:this.shouldBeAsPerJsonSchema(),message:"presentation_definition should be as per json schema."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.name),message:"name should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.optionalNonEmptyString(r?.purpose),message:"purpose should be a non-empty string"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldNotBeEmpty(r?.format),message:"formats values should not empty"},{tag:this.getTag(),target:e,predicate:r=>t.formatValuesShouldBeAmongKnownValues(r?.format),message:"formats should only have known identifiers for alg or proof_type"},{tag:this.getTag(),target:e,predicate:r=>t.groupShouldMatchSubmissionRequirements(r),message:"input descriptor group should match the from in submission requirements."}]}static optionalNonEmptyString(e){return e==null||e.length>0}static nonEmptyString(e){return e!=null&&e.length>0}static formatValuesShouldNotBeEmpty(e){var r,n,s,i,o,a;let u=!0;return e?.jwt!=null&&(u=u&&((r=e.jwt.alg)===null||r===void 0?void 0:r.length)>0),e?.jwt_vc!=null&&(u=u&&((n=e.jwt_vc.alg)===null||n===void 0?void 0:n.length)>0),e?.jwt_vp!=null&&(u=u&&((s=e.jwt_vp.alg)===null||s===void 0?void 0:s.length)>0),e?.ldp!=null&&(u=u&&((i=e.ldp.proof_type)===null||i===void 0?void 0:i.length)>0),e?.ldp_vc!=null&&(u=u&&((o=e.ldp_vc.proof_type)===null||o===void 0?void 0:o.length)>0),e?.ldp_vp!=null&&(u=u&&((a=e.ldp_vp.proof_type)===null||a===void 0?void 0:a.length)>0),u}static formatValuesShouldBeAmongKnownValues(e){let r=[];if(e){let n=ape.JwtAlgos.getJwtAlgos(),s=upe.LdpTypes.getLdpTypes();r=[];for(let[i,o]of Object.entries(e))i.startsWith("jwt")?r.push(...t.isJWTAlgoKnown(o,n)):r.push(...t.isLDPProofKnown(o,s))}return r.length===0}static isJWTAlgoKnown(e,r){let n=[];if(e!=null&&e.alg!=null)for(let s of e.alg)r.includes(s)||n.push(s);return n}static isLDPProofKnown(e,r){let n=[];if(e!=null&&e.proof_type!=null)for(let s of e.proof_type)r.includes(s)||n.push(s);return n}static groupShouldMatchSubmissionRequirements(e){if(e.submission_requirements!=null&&e.submission_requirements.length>0){let r=[];e.input_descriptors.forEach(a=>{a.group&&r.push(...a.group)});let n=new Set(r),s=[];t.flatten(e.submission_requirements).forEach(a=>{a.from&&s.push(...a.from)});let i=new Set(s);return new Set([...i].filter(a=>a!=null&&a.length>0&&!n.has(a))).size===0}return!0}static flatten(e){return e?.reduce((r,n)=>r.concat(Array.isArray(n.from_nested)?this.flatten(n.from_nested):n),[])}shouldBeAsPerJsonSchema(){return e=>(0,cpe.default)({presentation_definition:e})}};Od.PresentationDefinitionV2VB=sx});var xq=v(Sb=>{"use strict";Object.defineProperty(Sb,"__esModule",{value:!0});Sb.PresentationSubmissionVB=void 0;var ppe=mi(),Aq=Cr(),hpe=Ji(),ox=class t extends hpe.ValidationBundler{constructor(e){super(e,"presentation_submission")}getValidations(e){return[{tag:this.getTag(),target:e,predicate:r=>r!=null,message:"presentation_submission should be non null."},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.id),message:"id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.nonEmptyString(r?.definition_id),message:"presentation_definition_id should not be empty"},{tag:this.getTag(),target:e,predicate:r=>t.descriptorMapMustBePresent(r?.descriptor_map),message:"descriptor_map should be a non-empty list"},{tag:this.getTag(),target:e,predicate:r=>t.idMustBeSameForEachLevelOfNesting(r?.descriptor_map),message:"each descriptor should have a one id in it, on all levels"},{tag:this.getTag(),target:e,predicate:r=>t.formatsShouldBeKnown(r?.descriptor_map),message:"each format should be one of the known format"},{tag:this.getTag(),target:e,predicate:r=>t.pathsShouldBeValidJsonPaths(r?.descriptor_map),message:"each path should be a valid jsonPath"}]}static nonEmptyString(e){return e!=null&&e.length>0}static descriptorMapMustBePresent(e){return e!=null&&e.length>0}static idMustBeSameForEachLevelOfNesting(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=r&&t.isIdSameForEachLevelOfNesting(e[n],e[n].id);return r}static isIdSameForEachLevelOfNesting(e,r){let n=!0;return e!=null&&e.path_nested!=null&&(e.path_nested.id==r?n=n&&t.isIdSameForEachLevelOfNesting(e.path_nested,r):n=!1),n}static formatsShouldBeKnown(e){let r=!0;if(e!=null){let n=["jwt","jwt_vc","jwt_vp","ldp","ldp_vc","ldp_vp"];for(let s=0;s<e.length;s++)r=t.formatShouldBeKnown(e[s],n)}return r}static formatShouldBeKnown(e,r){let n=!0;return e!=null&&(n=r.includes(e.format)),e.path_nested!=null&&(n=n&&t.formatShouldBeKnown(e.path_nested,r)),n}static pathsShouldBeValidJsonPaths(e){let r=!0;if(e!=null)for(let n=0;n<e.length;n++)r=t.pathShouldBeValid(e[n],[]);return r}static pathShouldBeValid(e,r){if(e!=null){try{ppe.JSONPath.parse(e.path)}catch{r.push(e.path)}e.path_nested!=null&&t.pathShouldBeValid(e.path_nested,r)}if(r.length>0)throw new Aq.Checked("",Aq.Status.ERROR,"These were not parsable json paths: "+JSON.stringify(r));return!0}};Sb.PresentationSubmissionVB=ox});var Cq=v(bn=>{"use strict";var mpe=bn&&bn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ho=bn&&bn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&mpe(e,t,r)};Object.defineProperty(bn,"__esModule",{value:!0});Ho(HA(),bn);Ho(JA(),bn);Ho(YA(),bn);Ho(Eq(),bn);Ho(Dq(),bn);Ho(xq(),bn);Ho(Eb(),bn);Ho(Ji(),bn);Ho(mb(),bn)});var Pq=v(Db=>{"use strict";Object.defineProperty(Db,"__esModule",{value:!0});Db.validate=void 0;var Bd=Cr(),ype=t=>{let e=t.map(a=>s(a));function r(a){return new Bd.Checked(a.tag,Bd.Status.ERROR,a.message)}function n(a){return new Bd.Checked(a,Bd.Status.INFO,"ok")}function s(a){let u;try{a.predicate(a.target)?u=n(a.tag):u=r(a)}catch{u=r(a)}return u}let i=(a,u)=>(u.status!==Bd.Status.INFO&&a.push(u),a),o=e.reduce(i,[]);return(0,Bd.hasErrors)(o)?o:[n("root")]};Db.validate=ype});var Bq=v(Oq=>{"use strict";Object.defineProperty(Oq,"__esModule",{value:!0})});var Tq=v(Ab=>{"use strict";Object.defineProperty(Ab,"__esModule",{value:!0});Ab.ValidationEngine=void 0;var gpe=ux(),ax=class{validate(e){let r=[];for(let n of e)r=r.concat(n.bundler.getValidations(n.target));return(0,gpe.validate)(r)}};Ab.ValidationEngine=ax});var ux=v(Wo=>{"use strict";var bpe=Wo&&Wo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),cx=Wo&&Wo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&bpe(e,t,r)};Object.defineProperty(Wo,"__esModule",{value:!0});cx(Pq(),Wo);cx(Bq(),Wo);cx(Tq(),Wo)});var Eh=v(Va=>{"use strict";var vpe=Va&&Va.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fq=Va&&Va.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vpe(e,t,r)};Object.defineProperty(Va,"__esModule",{value:!0});Fq(Cq(),Va);Fq(ux(),Va)});var xb=v(Td=>{"use strict";var wpe=Td&&Td.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Td,"__esModule",{value:!0});Td.PEX=void 0;var Iq=Cr(),_h=bh(),lx=vh(),Gi=rc(),kq=yi(),Sh=Eh(),dx=class t{constructor(){this._evaluationClientWrapper=new _h.EvaluationClientWrapper}evaluatePresentation(e,r,n){let s=n?.generatePresentationSubmission!==void 0?n.generatePresentationSubmission:n?.presentationSubmission!==void 0,i=Gi.SSITypesBuilder.toInternalPresentationDefinition(e),o=JSON.parse(JSON.stringify(r)),a=Gi.SSITypesBuilder.mapExternalVerifiablePresentationToWrappedVP(o),u=n?.presentationSubmission||a.presentation.presentation_submission;if(!u&&!s)throw Error("Either a presentation submission as part of the VP or provided separately was expected");let c=a.presentation.holder?[a.presentation.holder]:[],l=Object.assign(Object.assign({},n),{holderDIDs:c,presentationSubmission:u,generatePresentationSubmission:s}),d=this._evaluationClientWrapper.evaluate(i,a.vcs,l);return d.value&&d.value.descriptor_map.length&&new _h.EvaluationClientWrapper().selectFrom(i,a.vcs,l).areRequiredCredentialsPresent!==Iq.Status.ERROR&&(d.errors=[]),d}evaluateCredentials(e,r,n){let s=Gi.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r);this._evaluationClientWrapper=new _h.EvaluationClientWrapper;let i=Gi.SSITypesBuilder.toInternalPresentationDefinition(e),o=this._evaluationClientWrapper.evaluate(i,s,n);if(o.value&&o.value.descriptor_map.length){let u=new _h.EvaluationClientWrapper().selectFrom(i,s,n);o.areRequiredCredentialsPresent=u.areRequiredCredentialsPresent,o.errors=u.errors}else o.areRequiredCredentialsPresent=Iq.Status.ERROR;return o}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r)),i=Gi.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper=new _h.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(i,Gi.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationSubmissionFrom(e,r){let n=Gi.SSITypesBuilder.toInternalPresentationDefinition(e);return this._evaluationClientWrapper.submissionFrom(n,Gi.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r))}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:lx.PresentationSubmissionLocation.PRESENTATION,o=this.presentationSubmissionFrom(e,r);return{presentation:t.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===lx.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static constructPresentation(e,r){var n,s,i,o;let a=r?.holderDID,u=Array.isArray((n=r?.basePresentationPayload)===null||n===void 0?void 0:n.type)?((s=r?.basePresentationPayload)===null||s===void 0?void 0:s.type)||[]:!((i=r?.basePresentationPayload)===null||i===void 0)&&i.type?[r.basePresentationPayload.type]:[],c=!((o=r?.basePresentationPayload)===null||o===void 0)&&o["@context"]?Array.isArray(r.basePresentationPayload["@context"])?r.basePresentationPayload["@context"]:[r.basePresentationPayload["@context"]]:[];return c.includes("https://www.w3.org/2018/credentials/v1")||c.push("https://www.w3.org/2018/credentials/v1"),u.includes("VerifiablePresentation")||u.push("VerifiablePresentation"),r?.presentationSubmission&&(u.includes("PresentationSubmission")||u.push("PresentationSubmission"),c.includes("https://identity.foundation/presentation-exchange/submission/v1")||c.push("https://identity.foundation/presentation-exchange/submission/v1")),Object.assign(Object.assign(Object.assign(Object.assign({},r?.basePresentationPayload),{"@context":c,type:u,holder:a}),!!r?.presentationSubmission&&{presentation_submission:r.presentationSubmission}),{verifiableCredential:Array.isArray(e)?e:[e]})}static validateDefinition(e){let r=(0,kq.definitionVersionDiscovery)(e);if(r.error)throw r.error;let n=[];return r.version===Gi.PEVersion.v1?n.push({bundler:new Sh.PresentationDefinitionV1VB("root"),target:Gi.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e)}):n.push({bundler:new Sh.PresentationDefinitionV2VB("root"),target:Gi.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e)}),new Sh.ValidationEngine().validate(n)}static validateSubmission(e){return new Sh.ValidationEngine().validate([{bundler:new Sh.PresentationSubmissionVB("root"),target:e}])}verifiablePresentationFrom(e,r,n,s){var i;return wpe(this,void 0,void 0,function*(){let{holderDID:o,signatureOptions:a,proofOptions:u}=s,c=(i=s.presentationSubmissionLocation)!==null&&i!==void 0?i:lx.PresentationSubmissionLocation.PRESENTATION;function l(){let w=[];if(u?.typeSupportsSelectiveDisclosure){if(!u?.type)throw Error("Please provide a proof type if you enable selective disclosure");w=[u.type]}return w}let d=o?[o]:[],p=l(),f=this.evaluateCredentials(e,r,{holderDIDs:d,limitDisclosureSignatureSuites:p}),h=this.presentationFrom(e,f.verifiableCredential,Object.assign(Object.assign({},s),{presentationSubmissionLocation:c})),y=this.evaluatePresentation(e,h.presentation,{limitDisclosureSignatureSuites:p});if(!y.value)throw new Error("Could not get evaluation results from presentationResult");let g={type:u?.type,verificationMethod:a?.verificationMethod,created:u?.created?u.created:new Date().toISOString(),proofPurpose:u?.proofPurpose,proofValue:a?.proofValue,jws:a?.jws,challenge:u?.challenge,nonce:u?.nonce,domain:u?.domain},S={options:s,presentation:h.presentation,presentationDefinition:e,selectedCredentials:r,proof:g,presentationSubmission:y.value,evaluationResults:y};return{verifiablePresentation:yield n(S),presentationSubmissionLocation:c,presentationSubmission:y.value}})}static definitionVersionDiscovery(e){return(0,kq.definitionVersionDiscovery)(e)}};Td.PEX=dx});var Nq=v(Cb=>{"use strict";Object.defineProperty(Cb,"__esModule",{value:!0});Cb.PEXv1=void 0;var fx=xb(),Epe=bh(),Rq=vh(),wc=rc(),$q=Eh(),px=class extends fx.PEX{constructor(){super()}evaluatePresentation(e,r,n){return wc.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return wc.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){let s=JSON.parse(JSON.stringify(r));return this._evaluationClientWrapper=new Epe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(wc.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),wc.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(s),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:Rq.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(wc.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e),wc.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:fx.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===Rq.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=wc.SSITypesBuilder.modelEntityToInternalPresentationDefinitionV1(e);return new $q.ValidationEngine().validate([{bundler:new $q.PresentationDefinitionV1VB("root"),target:r}])}static validateSubmission(e){return fx.PEX.validateSubmission(e)}};Cb.PEXv1=px});var qq=v(Pb=>{"use strict";Object.defineProperty(Pb,"__esModule",{value:!0});Pb.PEXv2=void 0;var hx=xb(),_pe=bh(),Mq=vh(),Ec=rc(),jq=Eh(),mx=class extends hx.PEX{constructor(){super()}evaluatePresentation(e,r,n){return Ec.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluatePresentation(e,r,n)}evaluateCredentials(e,r,n){return Ec.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),super.evaluateCredentials(e,r,n)}selectFrom(e,r,n){return this._evaluationClientWrapper=new _pe.EvaluationClientWrapper,this._evaluationClientWrapper.selectFrom(Ec.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),Ec.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r),n)}presentationFrom(e,r,n){var s;let i=(s=n?.presentationSubmissionLocation)!==null&&s!==void 0?s:Mq.PresentationSubmissionLocation.PRESENTATION,o=this._evaluationClientWrapper.submissionFrom(Ec.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e),Ec.SSITypesBuilder.mapExternalVerifiableCredentialsToWrappedVcs(r));return{presentation:hx.PEX.constructPresentation(r,Object.assign(Object.assign({},n),{presentationSubmission:i===Mq.PresentationSubmissionLocation.PRESENTATION?o:void 0})),presentationSubmissionLocation:i,presentationSubmission:o}}static validateDefinition(e){let r=Ec.SSITypesBuilder.modelEntityInternalPresentationDefinitionV2(e);return new jq.ValidationEngine().validate([{bundler:new jq.PresentationDefinitionV2VB("root"),target:r}])}static validateSubmission(e){return hx.PEX.validateSubmission(e)}};Pb.PEXv2=mx});var Uq=v(rr=>{"use strict";var Spe=rr&&rr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Dpe=rr&&rr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Spe(e,t,r)};Object.defineProperty(rr,"__esModule",{value:!0});rr.PEXv2=rr.PEXv1=rr.PEX=rr.Status=rr.Checked=rr.PEVersion=rr.ValidationEngine=rr.HandlerCheckResult=void 0;var Lq=Cr();Object.defineProperty(rr,"Checked",{enumerable:!0,get:function(){return Lq.Checked}});Object.defineProperty(rr,"Status",{enumerable:!0,get:function(){return Lq.Status}});var Ape=xb();Object.defineProperty(rr,"PEX",{enumerable:!0,get:function(){return Ape.PEX}});var xpe=Nq();Object.defineProperty(rr,"PEXv1",{enumerable:!0,get:function(){return xpe.PEXv1}});var Cpe=qq();Object.defineProperty(rr,"PEXv2",{enumerable:!0,get:function(){return Cpe.PEXv2}});var Ppe=bh();Object.defineProperty(rr,"HandlerCheckResult",{enumerable:!0,get:function(){return Ppe.HandlerCheckResult}});var Ope=rc();Object.defineProperty(rr,"PEVersion",{enumerable:!0,get:function(){return Ope.PEVersion}});var Bpe=Eh();Object.defineProperty(rr,"ValidationEngine",{enumerable:!0,get:function(){return Bpe.ValidationEngine}});Dpe(vh(),rr)});var Vq=v(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.PresentationSubmissionLocation=sr.HandlerCheckResult=sr.ValidationEngine=sr.PEVersion=sr.Checked=sr.Status=sr.KeyEncoding=sr.PEXv2=sr.PEXv1=sr.PEX=void 0;var Ws=Uq();Object.defineProperty(sr,"Checked",{enumerable:!0,get:function(){return Ws.Checked}});Object.defineProperty(sr,"HandlerCheckResult",{enumerable:!0,get:function(){return Ws.HandlerCheckResult}});Object.defineProperty(sr,"KeyEncoding",{enumerable:!0,get:function(){return Ws.KeyEncoding}});Object.defineProperty(sr,"PEVersion",{enumerable:!0,get:function(){return Ws.PEVersion}});Object.defineProperty(sr,"PEX",{enumerable:!0,get:function(){return Ws.PEX}});Object.defineProperty(sr,"PEXv1",{enumerable:!0,get:function(){return Ws.PEXv1}});Object.defineProperty(sr,"PEXv2",{enumerable:!0,get:function(){return Ws.PEXv2}});Object.defineProperty(sr,"PresentationSubmissionLocation",{enumerable:!0,get:function(){return Ws.PresentationSubmissionLocation}});Object.defineProperty(sr,"Status",{enumerable:!0,get:function(){return Ws.Status}});Object.defineProperty(sr,"ValidationEngine",{enumerable:!0,get:function(){return Ws.ValidationEngine}})});var u7=ts(Px(),1);function c7(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(r[o]!==255)throw new TypeError(i+" is ambiguous");r[o]=s}var a=t.length,u=t.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var y=0,g=0,S=0,A=h.length;S!==A&&h[S]===0;)S++,y++;for(var w=(A-S)*l+1>>>0,P=new Uint8Array(w);S!==A;){for(var D=h[S],O=0,B=w-1;(D!==0||O<g)&&B!==-1;B--,O++)D+=256*P[B]>>>0,P[B]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");g=O,S++}for(var F=w-g;F!==w&&P[F]===0;)F++;for(var N=u.repeat(y);F<w;++F)N+=t.charAt(P[F]);return N}function p(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var y=0;if(h[y]!==" "){for(var g=0,S=0;h[y]===u;)g++,y++;for(var A=(h.length-y)*c+1>>>0,w=new Uint8Array(A);h[y];){var P=r[h.charCodeAt(y)];if(P===255)return;for(var D=0,O=A-1;(P!==0||D<S)&&O!==-1;O--,D++)P+=a*w[O]>>>0,w[O]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");S=D,y++}if(h[y]!==" "){for(var B=A-S;B!==A&&w[B]===0;)B++;for(var F=new Uint8Array(g+(A-B)),N=g;B!==A;)F[N++]=w[B++];return F}}}function f(h){var y=p(h);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:p,decode:f}}var l7=c7,d7=l7,Ox=d7;var Kpe=new Uint8Array(0);var Bx=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},Bc=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Nb=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Mb=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Tx(this,e)}},jb=class{constructor(e){this.decoders=e}or(e){return Tx(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Tx=(t,e)=>new jb({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),qb=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Nb(e,r,n),this.decoder=new Mb(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Fx=({name:t,prefix:e,encode:r,decode:n})=>new qb(t,e,r,n),Lb=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:s}=Ox(r,e);return Fx({prefix:t,name:e,encode:n,decode:i=>Bc(s(i))})},p7=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},h7=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},ln=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Fx({prefix:e,name:t,encode(s){return h7(s,n,r)},decode(s){return p7(s,n,r,t)}});var qd=ln({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gpe=ln({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xpe=ln({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ype=ln({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Zpe=ln({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Qpe=ln({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ehe=ln({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),the=ln({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ub=ln({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var En=Lb({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ihe=Lb({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ahe=ln({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),uhe=ln({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rs=ln({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),che=ln({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function Ix(t){return t.byteOffset!==0||t.byteLength!==t.buffer.byteLength}function kx(t){return typeof t!="object"||t===null?!1:typeof t[Symbol.asyncIterator]=="function"}function Tc(t){let r=Object.prototype.toString.call(t).match(/\s([a-zA-Z0-9]+)/),[n,s]=r;return s}var Ld=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Rx=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,u){o=t[i](o),s(a,u,o.done,o.value)})}}function s(i,o,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},o)}},Ih=new TextEncoder,Ga=new TextDecoder,ce=class t{constructor(e,r){this.data=e,this.format=r}static arrayBuffer(e){return new t(e,"ArrayBuffer")}static asyncIterable(e){if(!kx(e))throw new TypeError("Input must be of type AsyncIterable.");return new t(e,"AsyncIterable")}static base32Z(e){return new t(e,"Base32Z")}static base58Btc(e){return new t(e,"Base58Btc")}static base64Url(e){return new t(e,"Base64Url")}static bufferSource(e){return new t(e,"BufferSource")}static hex(e){if(typeof e!="string")throw new TypeError("Hex input must be a string.");if(e.length%2!==0)throw new TypeError("Hex input must have an even number of characters.");return new t(e,"Hex")}static multibase(e){return new t(e,"Multibase")}static object(e){return new t(e,"Object")}static string(e){return new t(e,"String")}static uint8Array(e){return new t(e,"Uint8Array")}toArrayBuffer(){switch(this.format){case"Base58Btc":return En.baseDecode(this.data).buffer;case"Base64Url":return rs.baseDecode(this.data).buffer;case"BufferSource":{if(Tc(this.data)==="ArrayBuffer")return this.data;if(ArrayBuffer.isView(this.data))return Ix(this.data)?this.data.buffer.slice(this.data.byteOffset,this.data.byteOffset+this.data.byteLength):this.data.buffer;throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":return this.toUint8Array().buffer;case"String":return this.toUint8Array().buffer;case"Uint8Array":return this.data.buffer;default:throw new TypeError(`Conversion from ${this.format} to ArrayBuffer is not supported.`)}}toArrayBufferAsync(){return Ld(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":return yield(yield this.toBlobAsync()).arrayBuffer();default:throw new TypeError(`Asynchronous conversion from ${this.format} to ArrayBuffer is not supported.`)}})}toBase32Z(){switch(this.format){case"Uint8Array":return Ub.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Z is not supported.`)}}toBase58Btc(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return En.baseEncode(e)}case"Multibase":return this.data.substring(1);case"Uint8Array":return En.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base58Btc is not supported.`)}}toBase64Url(){switch(this.format){case"ArrayBuffer":{let e=new Uint8Array(this.data);return rs.baseEncode(e)}case"BufferSource":{let e=this.toUint8Array();return rs.baseEncode(e)}case"Object":{let e=JSON.stringify(this.data),r=Ih.encode(e);return rs.baseEncode(r)}case"String":{let e=Ih.encode(this.data);return rs.baseEncode(e)}case"Uint8Array":return rs.baseEncode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Base64Url is not supported.`)}}toBlobAsync(){var e,r,n,s;return Ld(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u=[];try{for(var i=!0,o=Rx(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let l=s;u.push(l)}}catch(l){r={error:l}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return new Blob(u)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Blob is not supported.`)}})}toHex(){let e=Array.from({length:256},(r,n)=>n.toString(16).padStart(2,"0"));switch(this.format){case"ArrayBuffer":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Base64Url":{let r=this.toUint8Array();return t.uint8Array(r).toHex()}case"Uint8Array":{let r="";for(let n=0;n<this.data.length;n++)r+=e[this.data[n]];return r}default:throw new TypeError(`Conversion from ${this.format} to Hex is not supported.`)}}toMultibase(){switch(this.format){case"Base58Btc":return`z${this.data}`;default:throw new TypeError(`Conversion from ${this.format} to Multibase is not supported.`)}}toObject(){switch(this.format){case"Base64Url":{let e=rs.baseDecode(this.data),r=Ga.decode(e);return JSON.parse(r)}case"String":return JSON.parse(this.data);case"Uint8Array":{let e=Ga.decode(this.data);return JSON.parse(e)}default:throw new TypeError(`Conversion from ${this.format} to Object is not supported.`)}}toObjectAsync(){return Ld(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toStringAsync();return JSON.parse(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Object is not supported.`)}})}toString(){switch(this.format){case"ArrayBuffer":return Ga.decode(this.data);case"Base64Url":{let e=rs.baseDecode(this.data);return Ga.decode(e)}case"Object":return JSON.stringify(this.data);case"Uint8Array":return Ga.decode(this.data);default:throw new TypeError(`Conversion from ${this.format} to String is not supported.`)}}toStringAsync(){var e,r,n,s;return Ld(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let u="";try{for(var i=!0,o=Rx(this.data),a;a=yield o.next(),e=a.done,!e;i=!0){s=a.value,i=!1;let c=s;typeof c=="string"?u+=c:u+=Ga.decode(c,{stream:!0})}}catch(c){r={error:c}}finally{try{!i&&!e&&(n=o.return)&&(yield n.call(o))}finally{if(r)throw r.error}}return u+=Ga.decode(void 0,{stream:!1}),u}default:throw new TypeError(`Asynchronous conversion from ${this.format} to String is not supported.`)}})}toUint8Array(){switch(this.format){case"ArrayBuffer":return new Uint8Array(this.data);case"Base32Z":return Ub.baseDecode(this.data);case"Base58Btc":return En.baseDecode(this.data);case"Base64Url":return rs.baseDecode(this.data);case"BufferSource":{let e=Tc(this.data);if(e==="Uint8Array")return this.data;if(e==="ArrayBuffer")return new Uint8Array(this.data);if(ArrayBuffer.isView(this.data))return new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength);throw new TypeError(`${this.format} value is not of type: ArrayBuffer, DataView, or TypedArray.`)}case"Hex":{let e=new Uint8Array(this.data.length/2);for(let r=0;r<this.data.length;r+=2){let n=parseInt(this.data.substring(r,r+2),16);if(isNaN(n))throw new TypeError("Input is not a valid hexadecimal string.");e[r/2]=n}return e}case"Object":{let e=JSON.stringify(this.data);return Ih.encode(e)}case"String":return Ih.encode(this.data);default:throw new TypeError(`Conversion from ${this.format} to Uint8Array is not supported.`)}}toUint8ArrayAsync(){return Ld(this,void 0,void 0,function*(){switch(this.format){case"AsyncIterable":{let e=yield this.toArrayBufferAsync();return new Uint8Array(e)}default:throw new TypeError(`Asynchronous conversion from ${this.format} to Uint8Array is not supported.`)}})}};var Ys={};cr(Ys,{decode:()=>Fc,encodeTo:()=>Xa,encodingLength:()=>Ya});var m7=Mx,$x=128,y7=127,g7=~y7,b7=Math.pow(2,31);function Mx(t,e,r){e=e||[],r=r||0;for(var n=r;t>=b7;)e[r++]=t&255|$x,t/=128;for(;t&g7;)e[r++]=t&255|$x,t>>>=7;return e[r]=t|0,Mx.bytes=r-n+1,e}var v7=Vb,w7=128,Nx=127;function Vb(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw Vb.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&Nx)<<s:(o&Nx)*Math.pow(2,s),s+=7}while(o>=w7);return Vb.bytes=i-n,r}var E7=Math.pow(2,7),_7=Math.pow(2,14),S7=Math.pow(2,21),D7=Math.pow(2,28),A7=Math.pow(2,35),x7=Math.pow(2,42),C7=Math.pow(2,49),P7=Math.pow(2,56),O7=Math.pow(2,63),B7=function(t){return t<E7?1:t<_7?2:t<S7?3:t<D7?4:t<A7?5:t<x7?6:t<C7?7:t<P7?8:t<O7?9:10},T7={encode:m7,decode:v7,encodingLength:B7},F7=T7,Ud=F7;var Fc=(t,e=0)=>[Ud.decode(t,e),Ud.decode.bytes],Xa=(t,e,r=0)=>(Ud.encode(t,e,r),e),Ya=t=>Ud.encodingLength(t);var Kb=(t,e)=>{let r=e.byteLength,n=Ya(t),s=n+Ya(r),i=new Uint8Array(s+r);return Xa(t,i,0),Xa(r,i,n),i.set(e,s),new Ic(t,r,e,i)},jx=t=>{let e=Bc(t),[r,n]=Fc(e),[s,i]=Fc(e.subarray(n)),o=e.subarray(n+i);if(o.byteLength!==s)throw new Error("Incorrect length");return new Ic(r,s,o,e)},qx=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Bx(t.bytes,r.bytes)}},Ic=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var Lx=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return k7(r,Wb(t),e||En.encoder);default:return R7(r,Wb(t),e||qd.encoder)}};var Ux=new WeakMap,Wb=t=>{let e=Ux.get(t);if(e==null){let r=new Map;return Ux.set(t,r),r}return e},zb=class t{constructor(e,r,n,s){this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Vd)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==$7)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Kb(e,r);return t.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return t.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&qx(e.multihash,n.multihash)}toString(e){return Lx(this,e)}toJSON(){return{"/":Lx(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof t)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:s,multihash:i,bytes:o}=r;return new t(n,s,i,o||Vx(n,s,i.bytes))}else if(r[N7]===!0){let{version:n,multihash:s,code:i}=r,o=jx(s);return t.create(n,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Vd)throw new Error(`Version 0 CID must use dag-pb (code: ${Vd}) block encoding`);return new t(e,r,n,n.bytes)}case 1:{let s=Vx(e,r,n.bytes);return new t(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return t.create(0,Vd,e)}static createV1(e,r){return t.create(1,e,r)}static decode(e){let[r,n]=t.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=t.inspectBytes(e),n=r.size-r.multihashSize,s=Bc(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");let i=s.subarray(r.multihashSize-r.digestSize),o=new Ic(r.multihashCode,r.digestSize,i,s);return[r.version===0?t.createV0(o):t.createV1(r.codec,o),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[d,p]=Fc(e.subarray(r));return r+=p,d},s=n(),i=Vd;if(s===18?(s=0,r=0):i=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);let o=r,a=n(),u=n(),c=r+u,l=c-o;return{version:s,codec:i,multihashCode:a,digestSize:u,multihashSize:l,size:c}}static parse(e,r){let[n,s]=I7(e,r),i=t.decode(s);if(i.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Wb(i).set(n,e),i}},I7=(t,e)=>{switch(t[0]){case"Q":{let r=e||En;return[En.prefix,r.decode(`${En.prefix}${t}`)]}case En.prefix:{let r=e||En;return[En.prefix,r.decode(t)]}case qd.prefix:{let r=e||qd;return[qd.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},k7=(t,e,r)=>{let{prefix:n}=r;if(n!==En.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let s=e.get(n);if(s==null){let i=r.encode(t).slice(1);return e.set(n,i),i}else return s},R7=(t,e,r)=>{let{prefix:n}=r,s=e.get(n);if(s==null){let i=r.encode(t);return e.set(n,i),i}else return s},Vd=112,$7=18,Vx=(t,e,r)=>{let n=Ya(t),s=n+Ya(e),i=new Uint8Array(s+r.byteLength);return Xa(t,i,0),Xa(e,i,n),i.set(r,s),i},N7=Symbol.for("@ipld/js-cid/CID");var en=class t{static addPrefix(e){var r;let{code:n,data:s,name:i}=e;if(!(i?!n:n))throw new Error("Either 'name' or 'code' must be defined, but not both.");if(n=t.codeToName.has(n)?n:t.nameToCode.get(i),n===void 0)throw new Error(`Unsupported multicodec: ${(r=e.name)!==null&&r!==void 0?r:e.code}`);let o=Ys.encodingLength(n),a=new Uint8Array(o+s.byteLength);return a.set(s,o),Ys.encodeTo(n,a),a}static getCodeFromData(e){let{prefixedData:r}=e,[n,s]=Ys.decode(r);return n}static getCodeFromName(e){let{name:r}=e,n=t.nameToCode.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static getNameFromCode(e){let{code:r}=e,n=t.codeToName.get(r);if(n===void 0)throw new Error(`Unsupported multicodec: ${r}`);return n}static registerCodec(e){t.codeToName.set(e.code,e.name),t.nameToCode.set(e.name,e.code)}static removePrefix(e){let{prefixedData:r}=e,[n,s]=Ys.decode(r),i=t.codeToName.get(n);if(i===void 0)throw new Error(`Unsupported multicodec: ${n}`);return{code:n,data:r.slice(s),name:i}}};en.codeToName=new Map;en.nameToCode=new Map;en.registerCodec({code:237,name:"ed25519-pub"});en.registerCodec({code:4864,name:"ed25519-priv"});en.registerCodec({code:236,name:"x25519-pub"});en.registerCodec({code:4866,name:"x25519-priv"});en.registerCodec({code:231,name:"secp256k1-pub"});en.registerCodec({code:4865,name:"secp256k1-priv"});function Jb(t){Object.keys(t).forEach(e=>{t[e]===void 0?delete t[e]:typeof t[e]=="object"&&Jb(t[e])})}var _U=ts(Xv(),1),hu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};var lm=class{constructor(){this.store=new Map}clear(){return hu(this,void 0,void 0,function*(){this.store.clear()})}close(){return hu(this,void 0,void 0,function*(){})}delete(e){return hu(this,void 0,void 0,function*(){return this.store.delete(e)})}get(e){return hu(this,void 0,void 0,function*(){return this.store.get(e)})}has(e){return hu(this,void 0,void 0,function*(){return this.store.has(e)})}list(){return hu(this,void 0,void 0,function*(){return Array.from(this.store.values())})}set(e,r){return hu(this,void 0,void 0,function*(){this.store.set(e,r)})}};var vz=ts(uw(),1);var wz=ts(uw(),1);function o8(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ez(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function cw(t,...e){if(!Ez(t))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function a8(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");o8(t.outputLen),o8(t.blockLen)}function il(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function u8(t,e){cw(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var sl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function c8(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Um=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Bi=(t,e)=>t<<32-e|t>>>e,_z=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!_z)throw new Error("Non little-endian hardware is not supported");function lw(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function Sf(t){if(typeof t=="string"&&(t=lw(t)),!c8(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Vm(...t){let e=0;for(let n=0;n<t.length;n++){let s=t[n];if(!c8(s))throw new Error("Uint8Array expected");e+=s.length}let r=new Uint8Array(e);for(let n=0,s=0;n<t.length;n++){let i=t[n];r.set(i,s),s+=i.length}return r}var ol=class{clone(){return this._cloneInto()}},s0e={}.toString;function Km(t){let e=n=>t().update(Sf(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Cu(t=32){if(sl&&typeof sl.getRandomValues=="function")return sl.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function Sz(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var al=class extends ol{constructor(e,r,n,s){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Um(this.buffer)}update(e){il(this);let{view:r,buffer:n,blockLen:s}=this;e=Sf(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let u=Um(e);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){il(this),u8(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let d=o;d<s;d++)r[d]=0;Sz(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=Um(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<c;d++)a.setUint32(4*d,l[d],i)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%r&&e.buffer.set(n),e}};var Dz=(t,e,r)=>t&e^~t&r,Az=(t,e,r)=>t&e^t&r^e&r,xz=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),aa=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ua=new Uint32Array(64),dw=class extends al{constructor(){super(64,32,8,!1),this.A=aa[0]|0,this.B=aa[1]|0,this.C=aa[2]|0,this.D=aa[3]|0,this.E=aa[4]|0,this.F=aa[5]|0,this.G=aa[6]|0,this.H=aa[7]|0}get(){let{A:e,B:r,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[e,r,n,s,i,o,a,u]}set(e,r,n,s,i,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let d=0;d<16;d++,r+=4)ua[d]=e.getUint32(r,!1);for(let d=16;d<64;d++){let p=ua[d-15],f=ua[d-2],h=Bi(p,7)^Bi(p,18)^p>>>3,y=Bi(f,17)^Bi(f,19)^f>>>10;ua[d]=y+ua[d-7]+h+ua[d-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:c,H:l}=this;for(let d=0;d<64;d++){let p=Bi(a,6)^Bi(a,11)^Bi(a,25),f=l+p+Dz(a,u,c)+xz[d]+ua[d]|0,y=(Bi(n,2)^Bi(n,13)^Bi(n,22))+Az(n,s,i)|0;l=c,c=u,u=a,a=o+f|0,o=i,i=s,s=n,n=f+y|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,s,i,o,a,u,c,l)}roundClean(){ua.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var ii=Km(()=>new dw);var Cz=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ul=class{static digest({data:e}){return Cz(this,void 0,void 0,function*(){return ii(e)})}};var gs=class{};var Pz=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Hm=class extends gs{digest({algorithm:e,data:r}){return Pz(this,void 0,void 0,function*(){switch(e){case"SHA-256":return yield ul.digest({data:r})}})}};var zm={};cr(zm,{bitGet:()=>Rz,bitLen:()=>kz,bitMask:()=>Df,bitSet:()=>$z,bytesToHex:()=>ho,bytesToNumberBE:()=>mo,bytesToNumberLE:()=>Fi,concatBytes:()=>go,createHmacDrbg:()=>hw,ensureBytes:()=>Lt,equalBytes:()=>Fz,hexToBytes:()=>Pu,hexToNumber:()=>pw,isBytes:()=>Ti,numberToBytesBE:()=>Dn,numberToBytesLE:()=>yo,numberToHexUnpadded:()=>p8,numberToVarBytesBE:()=>Tz,utf8ToBytes:()=>Iz,validateObject:()=>si});var f8=BigInt(0),Wm=BigInt(1),Oz=BigInt(2);function Ti(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var Bz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ho(t){if(!Ti(t))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=Bz[t[r]];return e}function p8(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function pw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var po={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function l8(t){if(t>=po._0&&t<=po._9)return t-po._0;if(t>=po._A&&t<=po._F)return t-(po._A-10);if(t>=po._a&&t<=po._f)return t-(po._a-10)}function Pu(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let s=0,i=0;s<r;s++,i+=2){let o=l8(t.charCodeAt(i)),a=l8(t.charCodeAt(i+1));if(o===void 0||a===void 0){let u=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function mo(t){return pw(ho(t))}function Fi(t){if(!Ti(t))throw new Error("Uint8Array expected");return pw(ho(Uint8Array.from(t).reverse()))}function Dn(t,e){return Pu(t.toString(16).padStart(e*2,"0"))}function yo(t,e){return Dn(t,e).reverse()}function Tz(t){return Pu(p8(t))}function Lt(t,e,r){let n;if(typeof e=="string")try{n=Pu(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Ti(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let s=n.length;if(typeof r=="number"&&s!==r)throw new Error(`${t} expected ${r} bytes, got ${s}`);return n}function go(...t){let e=0;for(let s=0;s<t.length;s++){let i=t[s];if(!Ti(i))throw new Error("Uint8Array expected");e+=i.length}let r=new Uint8Array(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return r}function Fz(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function Iz(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function kz(t){let e;for(e=0;t>f8;t>>=Wm,e+=1);return e}function Rz(t,e){return t>>BigInt(e)&Wm}var $z=(t,e,r)=>t|(r?Wm:f8)<<BigInt(e),Df=t=>(Oz<<BigInt(t-1))-Wm,fw=t=>new Uint8Array(t),d8=t=>Uint8Array.from(t);function hw(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=fw(t),s=fw(t),i=0,o=()=>{n.fill(1),s.fill(0),i=0},a=(...d)=>r(s,n,...d),u=(d=fw())=>{s=a(d8([0]),d),n=a(),d.length!==0&&(s=a(d8([1]),d),n=a())},c=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0,p=[];for(;d<e;){n=a();let f=n.slice();p.push(f),d+=n.length}return go(...p)};return(d,p)=>{o(),u(d);let f;for(;!(f=p(c()));)u();return o(),f}}var Nz={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ti(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function si(t,e,r={}){let n=(s,i,o)=>{let a=Nz[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let u=t[s];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${i}`)};for(let[s,i]of Object.entries(e))n(s,i,!1);for(let[s,i]of Object.entries(r))n(s,i,!0);return t}var Dr=BigInt(0),Wt=BigInt(1),Ou=BigInt(2),Mz=BigInt(3),mw=BigInt(4),h8=BigInt(5),m8=BigInt(8),jz=BigInt(9),qz=BigInt(16);function xt(t,e){let r=t%e;return r>=Dr?r:e+r}function yw(t,e,r){if(r<=Dr||e<Dr)throw new Error("Expected power/modulo > 0");if(r===Wt)return Dr;let n=Wt;for(;e>Dr;)e&Wt&&(n=n*t%r),t=t*t%r,e>>=Wt;return n}function Ut(t,e,r){let n=t;for(;e-- >Dr;)n*=n,n%=r;return n}function Jm(t,e){if(t===Dr||e<=Dr)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=xt(t,e),n=e,s=Dr,i=Wt,o=Wt,a=Dr;for(;r!==Dr;){let c=n/r,l=n%r,d=s-o*c,p=i-a*c;n=r,r=l,s=o,i=a,o=d,a=p}if(n!==Wt)throw new Error("invert: does not exist");return xt(s,e)}function Lz(t){let e=(t-Wt)/Ou,r,n,s;for(r=t-Wt,n=0;r%Ou===Dr;r/=Ou,n++);for(s=Ou;s<t&&yw(s,e,t)!==t-Wt;s++);if(n===1){let o=(t+Wt)/mw;return function(u,c){let l=u.pow(c,o);if(!u.eql(u.sqr(l),c))throw new Error("Cannot find square root");return l}}let i=(r+Wt)/Ou;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,s),r),d=a.pow(u,i),p=a.pow(u,r);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let f=1;for(let y=a.sqr(p);f<c&&!a.eql(y,a.ONE);f++)y=a.sqr(y);let h=a.pow(l,Wt<<BigInt(c-f-1));l=a.sqr(h),d=a.mul(d,h),p=a.mul(p,l),c=f}return d}}function Uz(t){if(t%mw===Mz){let e=(t+Wt)/mw;return function(n,s){let i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%m8===h8){let e=(t-h8)/m8;return function(n,s){let i=n.mul(s,Ou),o=n.pow(i,e),a=n.mul(s,o),u=n.mul(n.mul(a,Ou),o),c=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(c),s))throw new Error("Cannot find square root");return c}}return t%qz,Lz(t)}var y8=(t,e)=>(xt(t,e)&Wt)===Wt,Vz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gw(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Vz.reduce((n,s)=>(n[s]="function",n),e);return si(t,r)}function Kz(t,e,r){if(r<Dr)throw new Error("Expected power > 0");if(r===Dr)return t.ONE;if(r===Wt)return e;let n=t.ONE,s=e;for(;r>Dr;)r&Wt&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Wt;return n}function Hz(t,e){let r=new Array(e.length),n=e.reduce((i,o,a)=>t.is0(o)?i:(r[a]=i,t.mul(i,o)),t.ONE),s=t.inv(n);return e.reduceRight((i,o,a)=>t.is0(o)?i:(r[a]=t.mul(i,r[a]),t.mul(i,o)),s),r}function bw(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function cl(t,e,r=!1,n={}){if(t<=Dr)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:s,nByteLength:i}=bw(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=Uz(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:Df(s),ZERO:Dr,ONE:Wt,create:u=>xt(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Dr<=u&&u<t},is0:u=>u===Dr,isOdd:u=>(u&Wt)===Wt,neg:u=>xt(-u,t),eql:(u,c)=>u===c,sqr:u=>xt(u*u,t),add:(u,c)=>xt(u+c,t),sub:(u,c)=>xt(u-c,t),mul:(u,c)=>xt(u*c,t),pow:(u,c)=>Kz(a,u,c),div:(u,c)=>xt(u*Jm(c,t),t),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>Jm(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>Hz(a,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>r?yo(u,i):Dn(u,i),fromBytes:u=>{if(u.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${u.length}`);return r?Fi(u):mo(u)}});return Object.freeze(a)}function g8(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function b8(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function vw(t){let e=b8(t);return e+Math.ceil(e/2)}function v8(t,e,r=!1){let n=t.length,s=b8(e),i=vw(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let o=r?mo(t):Fi(t),a=xt(o,e-Wt)+Wt;return r?yo(a,s):Dn(a,s)}var zz=BigInt(0),ww=BigInt(1);function Gm(t,e){let r=(s,i)=>{let o=i.negate();return s?o:i},n=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:r,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>zz;)i&ww&&(o=o.add(a)),a=a.double(),i>>=ww;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=n(i),u=[],c=s,l=c;for(let d=0;d<o;d++){l=c,u.push(l);for(let p=1;p<a;p++)l=l.add(c),u.push(l);c=l.double()}return u},wNAF(s,i,o){let{windows:a,windowSize:u}=n(s),c=t.ZERO,l=t.BASE,d=BigInt(2**s-1),p=2**s,f=BigInt(s);for(let h=0;h<a;h++){let y=h*u,g=Number(o&d);o>>=f,g>u&&(g-=p,o+=ww);let S=y,A=y+Math.abs(g)-1,w=h%2!==0,P=g<0;g===0?l=l.add(r(w,i[S])):c=c.add(r(P,i[A]))}return{p:c,f:l}},wNAFCached(s,i,o,a){let u=s._WINDOW_SIZE||1,c=i.get(s);return c||(c=this.precomputeWindow(s,u),u!==1&&i.set(s,a(c))),this.wNAF(u,c,o)}}}function Af(t){return gw(t.Fp),si(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bw(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}function Jz(t){let e=Af(t);si(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=e;if(r){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:Gz,hexToBytes:Xz}=zm,Bu={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=Bu;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Gz(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=Bu,r=typeof t=="string"?Xz(t):t;if(!Ti(r))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=Bu._parseInt(r.subarray(2)),{d:o,l:a}=Bu._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){let e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{let l=c.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),s=e(r(t.r)),i=n.length/2,o=s.length/2,a=r(i),u=r(o);return`30${r(o+i+4)}02${u}${s}02${a}${n}`}},bo=BigInt(0),oi=BigInt(1),x0e=BigInt(2),w8=BigInt(3),C0e=BigInt(4);function Yz(t){let e=Jz(t),{Fp:r}=e,n=e.toBytes||((h,y,g)=>{let S=y.toAffine();return go(Uint8Array.from([4]),r.toBytes(S.x),r.toBytes(S.y))}),s=e.fromBytes||(h=>{let y=h.subarray(1),g=r.fromBytes(y.subarray(0,r.BYTES)),S=r.fromBytes(y.subarray(r.BYTES,2*r.BYTES));return{x:g,y:S}});function i(h){let{a:y,b:g}=e,S=r.sqr(h),A=r.mul(S,h);return r.add(r.add(A,r.mul(h,y)),g)}if(!r.eql(r.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(h){return typeof h=="bigint"&&bo<h&&h<e.n}function a(h){if(!o(h))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(h){let{allowedPrivateKeyLengths:y,nByteLength:g,wrapPrivateKey:S,n:A}=e;if(y&&typeof h!="bigint"){if(Ti(h)&&(h=ho(h)),typeof h!="string"||!y.includes(h.length))throw new Error("Invalid key");h=h.padStart(g*2,"0")}let w;try{w=typeof h=="bigint"?h:mo(Lt("private key",h,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof h}`)}return S&&(w=xt(w,A)),a(w),w}let c=new Map;function l(h){if(!(h instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(y,g,S){if(this.px=y,this.py=g,this.pz=S,y==null||!r.isValid(y))throw new Error("x required");if(g==null||!r.isValid(g))throw new Error("y required");if(S==null||!r.isValid(S))throw new Error("z required")}static fromAffine(y){let{x:g,y:S}=y||{};if(!y||!r.isValid(g)||!r.isValid(S))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");let A=w=>r.eql(w,r.ZERO);return A(g)&&A(S)?d.ZERO:new d(g,S,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){let g=r.invertBatch(y.map(S=>S.pz));return y.map((S,A)=>S.toAffine(g[A])).map(d.fromAffine)}static fromHex(y){let g=d.fromAffine(s(Lt("pointHex",y)));return g.assertValidity(),g}static fromPrivateKey(y){return d.BASE.multiply(u(y))}_setWindowSize(y){this._WINDOW_SIZE=y,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:y,y:g}=this.toAffine();if(!r.isValid(y)||!r.isValid(g))throw new Error("bad point: x or y not FE");let S=r.sqr(g),A=i(y);if(!r.eql(S,A))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y}=this.toAffine();if(r.isOdd)return!r.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){l(y);let{px:g,py:S,pz:A}=this,{px:w,py:P,pz:D}=y,O=r.eql(r.mul(g,D),r.mul(w,A)),B=r.eql(r.mul(S,D),r.mul(P,A));return O&&B}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:y,b:g}=e,S=r.mul(g,w8),{px:A,py:w,pz:P}=this,D=r.ZERO,O=r.ZERO,B=r.ZERO,F=r.mul(A,A),N=r.mul(w,w),R=r.mul(P,P),q=r.mul(A,w);return q=r.add(q,q),B=r.mul(A,P),B=r.add(B,B),D=r.mul(y,B),O=r.mul(S,R),O=r.add(D,O),D=r.sub(N,O),O=r.add(N,O),O=r.mul(D,O),D=r.mul(q,D),B=r.mul(S,B),R=r.mul(y,R),q=r.sub(F,R),q=r.mul(y,q),q=r.add(q,B),B=r.add(F,F),F=r.add(B,F),F=r.add(F,R),F=r.mul(F,q),O=r.add(O,F),R=r.mul(w,P),R=r.add(R,R),F=r.mul(R,q),D=r.sub(D,F),B=r.mul(R,N),B=r.add(B,B),B=r.add(B,B),new d(D,O,B)}add(y){l(y);let{px:g,py:S,pz:A}=this,{px:w,py:P,pz:D}=y,O=r.ZERO,B=r.ZERO,F=r.ZERO,N=e.a,R=r.mul(e.b,w8),q=r.mul(g,w),M=r.mul(S,P),Z=r.mul(A,D),Q=r.add(g,S),U=r.add(w,P);Q=r.mul(Q,U),U=r.add(q,M),Q=r.sub(Q,U),U=r.add(g,A);let G=r.add(w,D);return U=r.mul(U,G),G=r.add(q,Z),U=r.sub(U,G),G=r.add(S,A),O=r.add(P,D),G=r.mul(G,O),O=r.add(M,Z),G=r.sub(G,O),F=r.mul(N,U),O=r.mul(R,Z),F=r.add(O,F),O=r.sub(M,F),F=r.add(M,F),B=r.mul(O,F),M=r.add(q,q),M=r.add(M,q),Z=r.mul(N,Z),U=r.mul(R,U),M=r.add(M,Z),Z=r.sub(q,Z),Z=r.mul(N,Z),U=r.add(U,Z),q=r.mul(M,U),B=r.add(B,q),q=r.mul(G,U),O=r.mul(Q,O),O=r.sub(O,q),q=r.mul(Q,M),F=r.mul(G,F),F=r.add(F,q),new d(O,B,F)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return f.wNAFCached(this,c,y,g=>{let S=r.invertBatch(g.map(A=>A.pz));return g.map((A,w)=>A.toAffine(S[w])).map(d.fromAffine)})}multiplyUnsafe(y){let g=d.ZERO;if(y===bo)return g;if(a(y),y===oi)return this;let{endo:S}=e;if(!S)return f.unsafeLadder(this,y);let{k1neg:A,k1:w,k2neg:P,k2:D}=S.splitScalar(y),O=g,B=g,F=this;for(;w>bo||D>bo;)w&oi&&(O=O.add(F)),D&oi&&(B=B.add(F)),F=F.double(),w>>=oi,D>>=oi;return A&&(O=O.negate()),P&&(B=B.negate()),B=new d(r.mul(B.px,S.beta),B.py,B.pz),O.add(B)}multiply(y){a(y);let g=y,S,A,{endo:w}=e;if(w){let{k1neg:P,k1:D,k2neg:O,k2:B}=w.splitScalar(g),{p:F,f:N}=this.wNAF(D),{p:R,f:q}=this.wNAF(B);F=f.constTimeNegate(P,F),R=f.constTimeNegate(O,R),R=new d(r.mul(R.px,w.beta),R.py,R.pz),S=F.add(R),A=N.add(q)}else{let{p:P,f:D}=this.wNAF(g);S=P,A=D}return d.normalizeZ([S,A])[0]}multiplyAndAddUnsafe(y,g,S){let A=d.BASE,w=(D,O)=>O===bo||O===oi||!D.equals(A)?D.multiplyUnsafe(O):D.multiply(O),P=w(this,g).add(w(y,S));return P.is0()?void 0:P}toAffine(y){let{px:g,py:S,pz:A}=this,w=this.is0();y==null&&(y=w?r.ONE:r.inv(A));let P=r.mul(g,y),D=r.mul(S,y),O=r.mul(A,y);if(w)return{x:r.ZERO,y:r.ZERO};if(!r.eql(O,r.ONE))throw new Error("invZ was invalid");return{x:P,y:D}}isTorsionFree(){let{h:y,isTorsionFree:g}=e;if(y===oi)return!0;if(g)return g(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:y,clearCofactor:g}=e;return y===oi?this:g?g(d,this):this.multiplyUnsafe(e.h)}toRawBytes(y=!0){return this.assertValidity(),n(d,this,y)}toHex(y=!0){return ho(this.toRawBytes(y))}}d.BASE=new d(e.Gx,e.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let p=e.nBitLength,f=Gm(d,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:i,isWithinCurveOrder:o}}function Zz(t){let e=Af(t);return si(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function E8(t){let e=Zz(t),{Fp:r,n}=e,s=r.BYTES+1,i=2*r.BYTES+1;function o(U){return bo<U&&U<r.ORDER}function a(U){return xt(U,n)}function u(U){return Jm(U,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:d,isWithinCurveOrder:p}=Yz({...e,toBytes(U,G,ee){let z=G.toAffine(),$=r.toBytes(z.x),j=go;return ee?j(Uint8Array.from([G.hasEvenY()?2:3]),$):j(Uint8Array.from([4]),$,r.toBytes(z.y))},fromBytes(U){let G=U.length,ee=U[0],z=U.subarray(1);if(G===s&&(ee===2||ee===3)){let $=mo(z);if(!o($))throw new Error("Point is not on curve");let j=d($),Y=r.sqrt(j),se=(Y&oi)===oi;return(ee&1)===1!==se&&(Y=r.neg(Y)),{x:$,y:Y}}else if(G===i&&ee===4){let $=r.fromBytes(z.subarray(0,r.BYTES)),j=r.fromBytes(z.subarray(r.BYTES,2*r.BYTES));return{x:$,y:j}}else throw new Error(`Point of length ${G} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=U=>ho(Dn(U,e.nByteLength));function h(U){let G=n>>oi;return U>G}function y(U){return h(U)?a(-U):U}let g=(U,G,ee)=>mo(U.slice(G,ee));class S{constructor(G,ee,z){this.r=G,this.s=ee,this.recovery=z,this.assertValidity()}static fromCompact(G){let ee=e.nByteLength;return G=Lt("compactSignature",G,ee*2),new S(g(G,0,ee),g(G,ee,2*ee))}static fromDER(G){let{r:ee,s:z}=Bu.toSig(Lt("DER",G));return new S(ee,z)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(G){return new S(this.r,this.s,G)}recoverPublicKey(G){let{r:ee,s:z,recovery:$}=this,j=B(Lt("msgHash",G));if($==null||![0,1,2,3].includes($))throw new Error("recovery id invalid");let Y=$===2||$===3?ee+e.n:ee;if(Y>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let se=$&1?"03":"02",pe=c.fromHex(se+f(Y)),oe=u(Y),he=a(-j*oe),Ee=a(z*oe),Pe=c.BASE.multiplyAndAddUnsafe(pe,he,Ee);if(!Pe)throw new Error("point at infinify");return Pe.assertValidity(),Pe}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new S(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Pu(this.toDERHex())}toDERHex(){return Bu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Pu(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}let A={isValidPrivateKey(U){try{return l(U),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let U=vw(e.n);return v8(e.randomBytes(U),e.n)},precompute(U=8,G=c.BASE){return G._setWindowSize(U),G.multiply(BigInt(3)),G}};function w(U,G=!0){return c.fromPrivateKey(U).toRawBytes(G)}function P(U){let G=Ti(U),ee=typeof U=="string",z=(G||ee)&&U.length;return G?z===s||z===i:ee?z===2*s||z===2*i:U instanceof c}function D(U,G,ee=!0){if(P(U))throw new Error("first arg must be private key");if(!P(G))throw new Error("second arg must be public key");return c.fromHex(G).multiply(l(U)).toRawBytes(ee)}let O=e.bits2int||function(U){let G=mo(U),ee=U.length*8-e.nBitLength;return ee>0?G>>BigInt(ee):G},B=e.bits2int_modN||function(U){return a(O(U))},F=Df(e.nBitLength);function N(U){if(typeof U!="bigint")throw new Error("bigint expected");if(!(bo<=U&&U<F))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Dn(U,e.nByteLength)}function R(U,G,ee=q){if(["recovered","canonical"].some(ze=>ze in ee))throw new Error("sign() legacy options not supported");let{hash:z,randomBytes:$}=e,{lowS:j,prehash:Y,extraEntropy:se}=ee;j==null&&(j=!0),U=Lt("msgHash",U),Y&&(U=Lt("prehashed msgHash",z(U)));let pe=B(U),oe=l(G),he=[N(oe),N(pe)];if(se!=null){let ze=se===!0?$(r.BYTES):se;he.push(Lt("extraEntropy",ze))}let Ee=go(...he),Pe=pe;function Ie(ze){let at=O(ze);if(!p(at))return;let dt=u(at),Je=c.BASE.multiply(at).toAffine(),qt=a(Je.x);if(qt===bo)return;let Dt=a(dt*a(Pe+qt*oe));if(Dt===bo)return;let Qr=(Je.x===qt?0:2)|Number(Je.y&oi),or=Dt;return j&&h(Dt)&&(or=y(Dt),Qr^=1),new S(qt,or,Qr)}return{seed:Ee,k2sig:Ie}}let q={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function Z(U,G,ee=q){let{seed:z,k2sig:$}=R(U,G,ee),j=e;return hw(j.hash.outputLen,j.nByteLength,j.hmac)(z,$)}c.BASE._setWindowSize(8);function Q(U,G,ee,z=M){let $=U;if(G=Lt("msgHash",G),ee=Lt("publicKey",ee),"strict"in z)throw new Error("options.strict was renamed to lowS");let{lowS:j,prehash:Y}=z,se,pe;try{if(typeof $=="string"||Ti($))try{se=S.fromDER($)}catch(Je){if(!(Je instanceof Bu.Err))throw Je;se=S.fromCompact($)}else if(typeof $=="object"&&typeof $.r=="bigint"&&typeof $.s=="bigint"){let{r:Je,s:qt}=$;se=new S(Je,qt)}else throw new Error("PARSE");pe=c.fromHex(ee)}catch(Je){if(Je.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&se.hasHighS())return!1;Y&&(G=e.hash(G));let{r:oe,s:he}=se,Ee=B(G),Pe=u(he),Ie=a(Ee*Pe),ze=a(oe*Pe),at=c.BASE.multiplyAndAddUnsafe(pe,Ie,ze)?.toAffine();return at?a(at.x)===oe:!1}return{CURVE:e,getPublicKey:w,getSharedSecret:D,sign:Z,verify:Q,ProjectivePoint:c,Signature:S,utils:A}}var Xm=class extends ol{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,a8(e);let n=Sf(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return il(this),this.iHash.update(e),this}digestInto(e){il(this),cw(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ew=(t,e,r)=>new Xm(t,e).update(r).digest();Ew.create=(t,e)=>new Xm(t,e);function Qz(t){return{hash:t,hmac:(e,...r)=>Ew(t,e,Vm(...r)),randomBytes:Cu}}function Ym(t,e){let r=n=>E8({...t,...Qz(n)});return Object.freeze({...r(e),create:r})}var D8=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),_8=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),eJ=BigInt(1),_w=BigInt(2),S8=(t,e)=>(t+e/_w)/e;function tJ(t){let e=D8,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,l=c*c*t%e,d=Ut(l,r,e)*l%e,p=Ut(d,r,e)*l%e,f=Ut(p,_w,e)*c%e,h=Ut(f,s,e)*f%e,y=Ut(h,i,e)*h%e,g=Ut(y,a,e)*y%e,S=Ut(g,u,e)*g%e,A=Ut(S,a,e)*y%e,w=Ut(A,r,e)*l%e,P=Ut(w,o,e)*h%e,D=Ut(P,n,e)*c%e,O=Ut(D,_w,e);if(!Sw.eql(Sw.sqr(O),t))throw new Error("Cannot find square root");return O}var Sw=cl(D8,void 0,void 0,{sqrt:tJ}),An=Ym({a:BigInt(0),b:BigInt(7),Fp:Sw,n:_8,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=_8,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-eJ*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,o=BigInt("0x100000000000000000000000000000000"),a=S8(i*t,e),u=S8(-n*t,e),c=xt(t-a*r-u*s,e),l=xt(-a*n-u*i,e),d=c>o,p=l>o;if(d&&(c=e-c),p&&(l=e-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:c,k2neg:p,k2:l}}}},ii),j0e=BigInt(0);var q0e=An.ProjectivePoint;function A8(t){let e=n=>{if(n!==null&&typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n).sort(),i={};for(let o of s)i[o]=e(n[o]);return i}return n},r=e(t);return JSON.stringify(r)}var rJ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Dw="urn:jwk:";function Xe({jwk:t}){return rJ(this,void 0,void 0,function*(){let e=t.kty,r;if(e==="EC")r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};else if(e==="oct")r={k:t.k,kty:t.kty};else if(e==="OKP")r={crv:t.crv,kty:t.kty,x:t.x};else if(e==="RSA")r={e:t.e,kty:t.kty,n:t.n};else throw new Error(`Unsupported key type: ${e}`);Jb(r);let n=A8(r),s=ce.string(n).toUint8Array(),i=yield ul.digest({data:s});return ce.uint8Array(i).toBase64Url()})}function bs(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="EC"||typeof t.d!="string"||typeof t.x!="string")}function ll(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t)||"d"in t||t.kty!=="EC"||typeof t.x!="string")}function vs(t){return!(!t||typeof t!="object"||!("kty"in t&&"crv"in t&&"x"in t&&"d"in t)||t.kty!=="OKP"||typeof t.d!="string"||typeof t.x!="string")}function dl(t){return!(!t||typeof t!="object"||"d"in t||!("kty"in t&&"crv"in t&&"x"in t)||t.kty!=="OKP"||typeof t.x!="string")}function x8(t){if(!t||typeof t!="object")return!1;switch(t.kty){case"EC":case"OKP":case"RSA":return"d"in t;case"oct":return"k"in t;default:return!1}}var Lr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},nJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},xn=class t{static adjustSignatureToLowS({signature:e}){return Lr(this,void 0,void 0,function*(){let r=An.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return Lr(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",d:ce.uint8Array(e).toBase64Url(),x:ce.uint8Array(r.x).toBase64Url(),y:ce.uint8Array(r.y).toBase64Url()};return n.kid=yield Xe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Lr(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"secp256k1",x:ce.uint8Array(r.x).toBase64Url(),y:ce.uint8Array(r.y).toBase64Url()};return n.kid=yield Xe({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return Lr(this,void 0,void 0,function*(){return An.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return Lr(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"secp256k1",x:ce.uint8Array(n.x).toBase64Url(),y:ce.uint8Array(n.y).toBase64Url()};return s.kid=yield Xe({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return Lr(this,void 0,void 0,function*(){return An.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return Lr(this,void 0,void 0,function*(){return An.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return Lr(this,void 0,void 0,function*(){let e=An.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Xe({jwk:r}),r})}static getPublicKey({key:e}){var r;return Lr(this,void 0,void 0,function*(){if(!(bs(e)&&e.crv==="secp256k1"))throw new Error("Secp256k1: The provided key is not a secp256k1 private JWK.");let{d:n}=e,s=nJ(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Xe({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Lr(this,void 0,void 0,function*(){if(!bs(e))throw new Error("Secp256k1: The provided key is not a valid EC private key.");return ce.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Lr(this,void 0,void 0,function*(){if(!(ll(e)&&e.y))throw new Error("Secp256k1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ce.base64Url(e.x).toUint8Array(),s=ce.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Lr(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256k1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return An.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return Lr(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),s=ii(e);return An.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return Lr(this,void 0,void 0,function*(){return An.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return Lr(this,void 0,void 0,function*(){try{An.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Lr(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e}),i=ii(n);return An.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return Lr(this,void 0,void 0,function*(){e.byteLength===32&&(e=An.getPublicKey(e));let r=An.ProjectivePoint.fromHex(e),n=Dn(r.x,32),s=Dn(r.y,32);return{x:n,y:s}})}};var C8=cl(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),iJ=C8.create(BigInt("-3")),sJ=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),oJ=Ym({a:iJ,b:sJ,Fp:C8,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},ii),Ln=oJ;var Ur=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},aJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Un=class t{static adjustSignatureToLowS({signature:e}){return Ur(this,void 0,void 0,function*(){let r=Ln.Signature.fromCompact(e);return r.hasHighS()?r.normalizeS().toCompactRawBytes():e})}static bytesToPrivateKey({privateKeyBytes:e}){return Ur(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",d:ce.uint8Array(e).toBase64Url(),x:ce.uint8Array(r.x).toBase64Url(),y:ce.uint8Array(r.y).toBase64Url()};return n.kid=yield Xe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return Ur(this,void 0,void 0,function*(){let r=yield t.getCurvePoint({keyBytes:e}),n={kty:"EC",crv:"P-256",x:ce.uint8Array(r.x).toBase64Url(),y:ce.uint8Array(r.y).toBase64Url()};return n.kid=yield Xe({jwk:n}),n})}static compressPublicKey({publicKeyBytes:e}){return Ur(this,void 0,void 0,function*(){return Ln.ProjectivePoint.fromHex(e).toRawBytes(!0)})}static computePublicKey({key:e}){return Ur(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=yield t.getCurvePoint({keyBytes:r}),s={kty:"EC",crv:"P-256",x:ce.uint8Array(n.x).toBase64Url(),y:ce.uint8Array(n.y).toBase64Url()};return s.kid=yield Xe({jwk:s}),s})}static convertDerToCompactSignature({derSignature:e}){return Ur(this,void 0,void 0,function*(){return Ln.Signature.fromDER(e).toCompactRawBytes()})}static decompressPublicKey({publicKeyBytes:e}){return Ur(this,void 0,void 0,function*(){return Ln.ProjectivePoint.fromHex(e).toRawBytes(!1)})}static generateKey(){return Ur(this,void 0,void 0,function*(){let e=Ln.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Xe({jwk:r}),r})}static getPublicKey({key:e}){var r;return Ur(this,void 0,void 0,function*(){if(!(bs(e)&&e.crv==="P-256"))throw new Error("Secp256r1: The provided key is not a 'P-256' private JWK.");let{d:n}=e,s=aJ(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Xe({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return Ur(this,void 0,void 0,function*(){if(!bs(e))throw new Error("Secp256r1: The provided key is not a valid EC private key.");return ce.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return Ur(this,void 0,void 0,function*(){if(!(ll(e)&&e.y))throw new Error("Secp256r1: The provided key is not a valid EC public key.");let r=new Uint8Array([4]),n=ce.base64Url(e.x).toUint8Array(),s=ce.base64Url(e.y).toUint8Array();return new Uint8Array([...r,...n,...s])})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return Ur(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("Secp256r1: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return Ln.getSharedSecret(n,s,!0).slice(1)})}static sign({data:e,key:r}){return Ur(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:r}),s=ii(e);return Ln.sign(s,n).toCompactRawBytes()})}static validatePrivateKey({privateKeyBytes:e}){return Ur(this,void 0,void 0,function*(){return Ln.utils.isValidPrivateKey(e)})}static validatePublicKey({publicKeyBytes:e}){return Ur(this,void 0,void 0,function*(){try{Ln.ProjectivePoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return Ur(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e}),i=ii(n);return Ln.verify(r,i,s,{lowS:!1})})}static getCurvePoint({keyBytes:e}){return Ur(this,void 0,void 0,function*(){e.byteLength===32&&(e=Ln.getPublicKey(e));let r=Ln.ProjectivePoint.fromHex(e),n=Dn(r.x,32),s=Dn(r.y,32);return{x:n,y:s}})}};var xf=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Cf=class extends gs{computePublicKey({key:e}){return xf(this,void 0,void 0,function*(){if(!bs(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield xn.computePublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield Un.computePublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return xf(this,void 0,void 0,function*(){switch(e){case"ES256K":case"secp256k1":{let r=yield xn.generateKey();return r.alg="ES256K",r}case"ES256":case"secp256r1":{let r=yield Un.generateKey();return r.alg="ES256",r}}})}getPublicKey({key:e}){return xf(this,void 0,void 0,function*(){if(!bs(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":{let r=yield xn.getPublicKey({key:e});return r.alg="ES256K",r}case"P-256":{let r=yield Un.getPublicKey({key:e});return r.alg="ES256",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return xf(this,void 0,void 0,function*(){if(!bs(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) private key.");switch(e.crv){case"secp256k1":return yield xn.sign({key:e,data:r});case"P-256":return yield Un.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return xf(this,void 0,void 0,function*(){if(!ll(e))throw new TypeError("Invalid key provided. Must be an elliptic curve (EC) public key.");switch(e.crv){case"secp256k1":return yield xn.verify({key:e,signature:r,data:n});case"P-256":return yield Un.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var Zm=BigInt(4294967295),Aw=BigInt(32);function P8(t,e=!1){return e?{h:Number(t&Zm),l:Number(t>>Aw&Zm)}:{h:Number(t>>Aw&Zm)|0,l:Number(t&Zm)|0}}function uJ(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){let{h:i,l:o}=P8(t[s],e);[r[s],n[s]]=[i,o]}return[r,n]}var cJ=(t,e)=>BigInt(t>>>0)<<Aw|BigInt(e>>>0),lJ=(t,e,r)=>t>>>r,dJ=(t,e,r)=>t<<32-r|e>>>r,fJ=(t,e,r)=>t>>>r|e<<32-r,pJ=(t,e,r)=>t<<32-r|e>>>r,hJ=(t,e,r)=>t<<64-r|e>>>r-32,mJ=(t,e,r)=>t>>>r-32|e<<64-r,yJ=(t,e)=>e,gJ=(t,e)=>t,bJ=(t,e,r)=>t<<r|e>>>32-r,vJ=(t,e,r)=>e<<r|t>>>32-r,wJ=(t,e,r)=>e<<r-32|t>>>64-r,EJ=(t,e,r)=>t<<r-32|e>>>64-r;function _J(t,e,r,n){let s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}var SJ=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),DJ=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,AJ=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),xJ=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,CJ=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),PJ=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0;var OJ={fromBig:P8,split:uJ,toBig:cJ,shrSH:lJ,shrSL:dJ,rotrSH:fJ,rotrSL:pJ,rotrBH:hJ,rotrBL:mJ,rotr32H:yJ,rotr32L:gJ,rotlSH:bJ,rotlSL:vJ,rotlBH:wJ,rotlBL:EJ,add:_J,add3L:SJ,add3H:DJ,add4L:AJ,add4H:xJ,add5H:PJ,add5L:CJ},Ke=OJ;var[BJ,TJ]=Ke.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ca=new Uint32Array(80),la=new Uint32Array(80),xw=class extends al{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:r,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:c,El:l,Fh:d,Fl:p,Gh:f,Gl:h,Hh:y,Hl:g}=this;return[e,r,n,s,i,o,a,u,c,l,d,p,f,h,y,g]}set(e,r,n,s,i,o,a,u,c,l,d,p,f,h,y,g){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=c|0,this.El=l|0,this.Fh=d|0,this.Fl=p|0,this.Gh=f|0,this.Gl=h|0,this.Hh=y|0,this.Hl=g|0}process(e,r){for(let w=0;w<16;w++,r+=4)ca[w]=e.getUint32(r),la[w]=e.getUint32(r+=4);for(let w=16;w<80;w++){let P=ca[w-15]|0,D=la[w-15]|0,O=Ke.rotrSH(P,D,1)^Ke.rotrSH(P,D,8)^Ke.shrSH(P,D,7),B=Ke.rotrSL(P,D,1)^Ke.rotrSL(P,D,8)^Ke.shrSL(P,D,7),F=ca[w-2]|0,N=la[w-2]|0,R=Ke.rotrSH(F,N,19)^Ke.rotrBH(F,N,61)^Ke.shrSH(F,N,6),q=Ke.rotrSL(F,N,19)^Ke.rotrBL(F,N,61)^Ke.shrSL(F,N,6),M=Ke.add4L(B,q,la[w-7],la[w-16]),Z=Ke.add4H(M,O,R,ca[w-7],ca[w-16]);ca[w]=Z|0,la[w]=M|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:c,Dl:l,Eh:d,El:p,Fh:f,Fl:h,Gh:y,Gl:g,Hh:S,Hl:A}=this;for(let w=0;w<80;w++){let P=Ke.rotrSH(d,p,14)^Ke.rotrSH(d,p,18)^Ke.rotrBH(d,p,41),D=Ke.rotrSL(d,p,14)^Ke.rotrSL(d,p,18)^Ke.rotrBL(d,p,41),O=d&f^~d&y,B=p&h^~p&g,F=Ke.add5L(A,D,B,TJ[w],la[w]),N=Ke.add5H(F,S,P,O,BJ[w],ca[w]),R=F|0,q=Ke.rotrSH(n,s,28)^Ke.rotrBH(n,s,34)^Ke.rotrBH(n,s,39),M=Ke.rotrSL(n,s,28)^Ke.rotrBL(n,s,34)^Ke.rotrBL(n,s,39),Z=n&i^n&a^i&a,Q=s&o^s&u^o&u;S=y|0,A=g|0,y=f|0,g=h|0,f=d|0,h=p|0,{h:d,l:p}=Ke.add(c|0,l|0,N|0,R|0),c=a|0,l=u|0,a=i|0,u=o|0,i=n|0,o=s|0;let U=Ke.add3L(R,M,Q);n=Ke.add3H(U,N,q,Z),s=U|0}({h:n,l:s}=Ke.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Ke.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=Ke.add(this.Ch|0,this.Cl|0,a|0,u|0),{h:c,l}=Ke.add(this.Dh|0,this.Dl|0,c|0,l|0),{h:d,l:p}=Ke.add(this.Eh|0,this.El|0,d|0,p|0),{h:f,l:h}=Ke.add(this.Fh|0,this.Fl|0,f|0,h|0),{h:y,l:g}=Ke.add(this.Gh|0,this.Gl|0,y|0,g|0),{h:S,l:A}=Ke.add(this.Hh|0,this.Hl|0,S|0,A|0),this.set(n,s,i,o,a,u,c,l,d,p,f,h,y,g,S,A)}roundClean(){ca.fill(0),la.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Cw=Km(()=>new xw);var Ii=BigInt(0),Vn=BigInt(1),Qm=BigInt(2),FJ=BigInt(8),IJ={zip215:!0};function kJ(t){let e=Af(t);return si(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function e0(t){let e=kJ(t),{Fp:r,n,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:u}=e,c=Qm<<BigInt(a*8)-Vn,l=r.create,d=e.uvRatio||((z,$)=>{try{return{isValid:!0,value:r.sqrt(z*r.inv($))}}catch{return{isValid:!1,value:Ii}}}),p=e.adjustScalarBytes||(z=>z),f=e.domain||((z,$,j)=>{if($.length||j)throw new Error("Contexts/pre-hash are not supported");return z}),h=z=>typeof z=="bigint"&&Ii<z,y=(z,$)=>h(z)&&h($)&&z<$,g=z=>z===Ii||y(z,c);function S(z,$){if(y(z,$))return z;throw new Error(`Expected valid scalar < ${$}, got ${typeof z} ${z}`)}function A(z){return z===Ii?z:S(z,n)}let w=new Map;function P(z){if(!(z instanceof D))throw new Error("ExtendedPoint expected")}class D{constructor($,j,Y,se){if(this.ex=$,this.ey=j,this.ez=Y,this.et=se,!g($))throw new Error("x required");if(!g(j))throw new Error("y required");if(!g(Y))throw new Error("z required");if(!g(se))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine($){if($ instanceof D)throw new Error("extended point not allowed");let{x:j,y:Y}=$||{};if(!g(j)||!g(Y))throw new Error("invalid affine point");return new D(j,Y,Vn,l(j*Y))}static normalizeZ($){let j=r.invertBatch($.map(Y=>Y.ez));return $.map((Y,se)=>Y.toAffine(j[se])).map(D.fromAffine)}_setWindowSize($){this._WINDOW_SIZE=$,w.delete(this)}assertValidity(){let{a:$,d:j}=e;if(this.is0())throw new Error("bad point: ZERO");let{ex:Y,ey:se,ez:pe,et:oe}=this,he=l(Y*Y),Ee=l(se*se),Pe=l(pe*pe),Ie=l(Pe*Pe),ze=l(he*$),at=l(Pe*l(ze+Ee)),dt=l(Ie+l(j*l(he*Ee)));if(at!==dt)throw new Error("bad point: equation left != right (1)");let Je=l(Y*se),qt=l(pe*oe);if(Je!==qt)throw new Error("bad point: equation left != right (2)")}equals($){P($);let{ex:j,ey:Y,ez:se}=this,{ex:pe,ey:oe,ez:he}=$,Ee=l(j*he),Pe=l(pe*se),Ie=l(Y*he),ze=l(oe*se);return Ee===Pe&&Ie===ze}is0(){return this.equals(D.ZERO)}negate(){return new D(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:$}=e,{ex:j,ey:Y,ez:se}=this,pe=l(j*j),oe=l(Y*Y),he=l(Qm*l(se*se)),Ee=l($*pe),Pe=j+Y,Ie=l(l(Pe*Pe)-pe-oe),ze=Ee+oe,at=ze-he,dt=Ee-oe,Je=l(Ie*at),qt=l(ze*dt),Dt=l(Ie*dt),Qr=l(at*ze);return new D(Je,qt,Qr,Dt)}add($){P($);let{a:j,d:Y}=e,{ex:se,ey:pe,ez:oe,et:he}=this,{ex:Ee,ey:Pe,ez:Ie,et:ze}=$;if(j===BigInt(-1)){let zo=l((pe-se)*(Pe+Ee)),ft=l((pe+se)*(Pe-Ee)),Xt=l(ft-zo);if(Xt===Ii)return this.double();let Be=l(oe*Qm*ze),ur=l(he*Qm*Ie),bt=ur+Be,Zi=ft+zo,Ka=ur-Be,wn=l(bt*Xt),Qi=l(Zi*Ka),Di=l(bt*Ka),nr=l(Xt*Zi);return new D(wn,Qi,nr,Di)}let at=l(se*Ee),dt=l(pe*Pe),Je=l(he*Y*ze),qt=l(oe*Ie),Dt=l((se+pe)*(Ee+Pe)-at-dt),Qr=qt-Je,or=qt+Je,Yi=l(dt-j*at),Si=l(Dt*Qr),zs=l(or*Yi),ar=l(Dt*Yi),vn=l(Qr*or);return new D(Si,zs,vn,ar)}subtract($){return this.add($.negate())}wNAF($){return F.wNAFCached(this,w,$,D.normalizeZ)}multiply($){let{p:j,f:Y}=this.wNAF(S($,n));return D.normalizeZ([j,Y])[0]}multiplyUnsafe($){let j=A($);return j===Ii?B:this.equals(B)||j===Vn?this:this.equals(O)?this.wNAF(j).p:F.unsafeLadder(this,j)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return F.unsafeLadder(this,n).is0()}toAffine($){let{ex:j,ey:Y,ez:se}=this,pe=this.is0();$==null&&($=pe?FJ:r.inv(se));let oe=l(j*$),he=l(Y*$),Ee=l(se*$);if(pe)return{x:Ii,y:Vn};if(Ee!==Vn)throw new Error("invZ was invalid");return{x:oe,y:he}}clearCofactor(){let{h:$}=e;return $===Vn?this:this.multiplyUnsafe($)}static fromHex($,j=!1){let{d:Y,a:se}=e,pe=r.BYTES;$=Lt("pointHex",$,pe);let oe=$.slice(),he=$[pe-1];oe[pe-1]=he&-129;let Ee=Fi(oe);Ee===Ii||(j?S(Ee,c):S(Ee,r.ORDER));let Pe=l(Ee*Ee),Ie=l(Pe-Vn),ze=l(Y*Pe-se),{isValid:at,value:dt}=d(Ie,ze);if(!at)throw new Error("Point.fromHex: invalid y coordinate");let Je=(dt&Vn)===Vn,qt=(he&128)!==0;if(!j&&dt===Ii&&qt)throw new Error("Point.fromHex: x=0 and x_0=1");return qt!==Je&&(dt=l(-dt)),D.fromAffine({x:dt,y:Ee})}static fromPrivateKey($){return q($).point}toRawBytes(){let{x:$,y:j}=this.toAffine(),Y=yo(j,r.BYTES);return Y[Y.length-1]|=$&Vn?128:0,Y}toHex(){return ho(this.toRawBytes())}}D.BASE=new D(e.Gx,e.Gy,Vn,l(e.Gx*e.Gy)),D.ZERO=new D(Ii,Vn,Vn,Ii);let{BASE:O,ZERO:B}=D,F=Gm(D,a*8);function N(z){return xt(z,n)}function R(z){return N(Fi(z))}function q(z){let $=a;z=Lt("private key",z,$);let j=Lt("hashed private key",i(z),2*$),Y=p(j.slice(0,$)),se=j.slice($,2*$),pe=R(Y),oe=O.multiply(pe),he=oe.toRawBytes();return{head:Y,prefix:se,scalar:pe,point:oe,pointBytes:he}}function M(z){return q(z).pointBytes}function Z(z=new Uint8Array,...$){let j=go(...$);return R(i(f(j,Lt("context",z),!!s)))}function Q(z,$,j={}){z=Lt("message",z),s&&(z=s(z));let{prefix:Y,scalar:se,pointBytes:pe}=q($),oe=Z(j.context,Y,z),he=O.multiply(oe).toRawBytes(),Ee=Z(j.context,he,pe,z),Pe=N(oe+Ee*se);A(Pe);let Ie=go(he,yo(Pe,r.BYTES));return Lt("result",Ie,a*2)}let U=IJ;function G(z,$,j,Y=U){let{context:se,zip215:pe}=Y,oe=r.BYTES;z=Lt("signature",z,2*oe),$=Lt("message",$),s&&($=s($));let he=Fi(z.slice(oe,2*oe)),Ee,Pe,Ie;try{Ee=D.fromHex(j,pe),Pe=D.fromHex(z.slice(0,oe),pe),Ie=O.multiplyUnsafe(he)}catch{return!1}if(!pe&&Ee.isSmallOrder())return!1;let ze=Z(se,Pe.toRawBytes(),Ee.toRawBytes(),$);return Pe.add(Ee.multiplyUnsafe(ze)).subtract(Ie).clearCofactor().equals(D.ZERO)}return O._setWindowSize(8),{CURVE:e,getPublicKey:M,sign:Q,verify:G,ExtendedPoint:D,utils:{getExtendedPublicKey:q,randomPrivateKey:()=>o(r.BYTES),precompute(z=8,$=D.BASE){return $._setWindowSize(z),$.multiply(BigInt(3)),$}}}}var Pf=BigInt(0),Pw=BigInt(1);function RJ(t){return si(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function O8(t){let e=RJ(t),{P:r}=e,n=w=>xt(w,r),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(w=>w),u=e.powPminus2||(w=>yw(w,r-BigInt(2),r));function c(w,P,D){let O=n(w*(P-D));return P=n(P-O),D=n(D+O),[P,D]}function l(w){if(typeof w=="bigint"&&Pf<=w&&w<r)return w;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}let d=(e.a-BigInt(2))/BigInt(4);function p(w,P){let D=l(w),O=l(P),B=D,F=Pw,N=Pf,R=D,q=Pw,M=Pf,Z;for(let U=BigInt(s-1);U>=Pf;U--){let G=O>>U&Pw;M^=G,Z=c(M,F,R),F=Z[0],R=Z[1],Z=c(M,N,q),N=Z[0],q=Z[1],M=G;let ee=F+N,z=n(ee*ee),$=F-N,j=n($*$),Y=z-j,se=R+q,pe=R-q,oe=n(pe*ee),he=n(se*$),Ee=oe+he,Pe=oe-he;R=n(Ee*Ee),q=n(B*n(Pe*Pe)),F=n(z*j),N=n(Y*(z+n(d*Y)))}Z=c(M,F,R),F=Z[0],R=Z[1],Z=c(M,N,q),N=Z[0],q=Z[1];let Q=u(N);return n(F*Q)}function f(w){return yo(n(w),i)}function h(w){let P=Lt("u coordinate",w,i);return o===32&&(P[31]&=127),Fi(P)}function y(w){let P=Lt("scalar",w),D=P.length;if(D!==i&&D!==o)throw new Error(`Expected ${i} or ${o} bytes, got ${D}`);return Fi(a(P))}function g(w,P){let D=h(P),O=y(w),B=p(D,O);if(B===Pf)throw new Error("Invalid private or public key received");return f(B)}let S=f(e.Gu);function A(w){return g(w,S)}return{scalarMult:g,scalarMultBase:A,getSharedSecret:(w,P)=>g(w,P),getPublicKey:w=>A(w),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:S}}var Of=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),B8=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Tye=BigInt(0),$J=BigInt(1),Ow=BigInt(2),NJ=BigInt(5),T8=BigInt(10),MJ=BigInt(20),jJ=BigInt(40),F8=BigInt(80);function I8(t){let e=Of,n=t*t%e*t%e,s=Ut(n,Ow,e)*n%e,i=Ut(s,$J,e)*t%e,o=Ut(i,NJ,e)*i%e,a=Ut(o,T8,e)*o%e,u=Ut(a,MJ,e)*a%e,c=Ut(u,jJ,e)*u%e,l=Ut(c,F8,e)*c%e,d=Ut(l,F8,e)*c%e,p=Ut(d,T8,e)*o%e;return{pow_p_5_8:Ut(p,Ow,e)*t%e,b2:n}}function k8(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function qJ(t,e){let r=Of,n=xt(e*e*e,r),s=xt(n*n*e,r),i=I8(t*s).pow_p_5_8,o=xt(t*n*i,r),a=xt(e*o*o,r),u=o,c=xt(o*B8,r),l=a===t,d=a===xt(-t,r),p=a===xt(-t*B8,r);return l&&(o=u),(d||p)&&(o=c),y8(o,r)&&(o=xt(-o,r)),{isValid:l||d,value:o}}var ai=cl(Of,void 0,!0),Bf={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ai,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Cw,randomBytes:Cu,adjustScalarBytes:k8,uvRatio:qJ},da=e0(Bf);function R8(t,e,r){if(e.length>255)throw new Error("Context is too big");return Vm(lw("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,e.length]),e,t)}var Fye=e0({...Bf,domain:R8}),Iye=e0({...Bf,domain:R8,prehash:Cw}),Tu=O8({P:Of,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{let e=Of,{pow_p_5_8:r,b2:n}=I8(t);return xt(Ut(r,BigInt(3),e)*n,e)},adjustScalarBytes:k8,randomBytes:Cu});function $8(t){let{y:e}=da.ExtendedPoint.fromHex(t),r=BigInt(1);return ai.toBytes(ai.create((r+e)*ai.inv(r-e)))}function N8(t){let e=Bf.hash(t.subarray(0,32));return Bf.adjustScalarBytes(e).subarray(0,32)}var LJ=(ai.ORDER+BigInt(3))/BigInt(8),kye=ai.pow(Ow,LJ),Rye=ai.sqrt(ai.neg(ai.ONE)),$ye=(ai.ORDER-BigInt(5))/BigInt(8),Nye=BigInt(486662);var Mye=g8(ai,ai.neg(BigInt(486664)));var jye=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),qye=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Lye=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Uye=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");var Vye=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var ui=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},UJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},Fr=class t{static bytesToPrivateKey({privateKeyBytes:e}){return ui(this,void 0,void 0,function*(){let r=da.getPublicKey(e),n={crv:"Ed25519",d:ce.uint8Array(e).toBase64Url(),kty:"OKP",x:ce.uint8Array(r).toBase64Url()};return n.kid=yield Xe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return ui(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"Ed25519",x:ce.uint8Array(e).toBase64Url()};return r.kid=yield Xe({jwk:r}),r})}static computePublicKey({key:e}){return ui(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=da.getPublicKey(r),s={kty:"OKP",crv:"Ed25519",x:ce.uint8Array(n).toBase64Url()};return s.kid=yield Xe({jwk:s}),s})}static convertPrivateKeyToX25519({privateKey:e}){return ui(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=N8(r),s=Tu.getPublicKey(n),i={kty:"OKP",crv:"X25519",d:ce.uint8Array(n).toBase64Url(),x:ce.uint8Array(s).toBase64Url()};return i.kid=yield Xe({jwk:i}),i})}static convertPublicKeyToX25519({publicKey:e}){return ui(this,void 0,void 0,function*(){let r=yield t.publicKeyToBytes({publicKey:e});if(!(yield t.validatePublicKey({publicKeyBytes:r})))throw new Error("Ed25519: Invalid public key.");let s=$8(r),i={kty:"OKP",crv:"X25519",x:ce.uint8Array(s).toBase64Url()};return i.kid=yield Xe({jwk:i}),i})}static generateKey(){return ui(this,void 0,void 0,function*(){let e=da.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Xe({jwk:r}),r})}static getPublicKey({key:e}){var r;return ui(this,void 0,void 0,function*(){if(!(vs(e)&&e.crv==="Ed25519"))throw new Error("Ed25519: The provided key is not an Ed25519 private JWK.");let{d:n}=e,s=UJ(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Xe({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return ui(this,void 0,void 0,function*(){if(!vs(e))throw new Error("Ed25519: The provided key is not a valid OKP private key.");return ce.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return ui(this,void 0,void 0,function*(){if(!dl(e))throw new Error("Ed25519: The provided key is not a valid OKP public key.");return ce.base64Url(e.x).toUint8Array()})}static sign({key:e,data:r}){return ui(this,void 0,void 0,function*(){let n=yield t.privateKeyToBytes({privateKey:e});return da.sign(r,n)})}static validatePublicKey({publicKeyBytes:e}){return ui(this,void 0,void 0,function*(){try{da.ExtendedPoint.fromHex(e).assertValidity()}catch{return!1}return!0})}static verify({key:e,signature:r,data:n}){return ui(this,void 0,void 0,function*(){let s=yield t.publicKeyToBytes({publicKey:e});return da.verify(r,n,s)})}};var Tf=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},t0=class extends gs{computePublicKey({key:e}){return Tf(this,void 0,void 0,function*(){if(!vs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Fr.computePublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}generateKey({algorithm:e}){return Tf(this,void 0,void 0,function*(){switch(e){case"Ed25519":{let r=yield Fr.generateKey();return r.alg="EdDSA",r}}})}getPublicKey({key:e}){return Tf(this,void 0,void 0,function*(){if(!vs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":{let r=yield Fr.getPublicKey({key:e});return r.alg="EdDSA",r}default:throw new Error(`Unsupported curve: ${e.crv}`)}})}sign({key:e,data:r}){return Tf(this,void 0,void 0,function*(){if(!vs(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) private key.");switch(e.crv){case"Ed25519":return yield Fr.sign({key:e,data:r});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}verify({key:e,signature:r,data:n}){return Tf(this,void 0,void 0,function*(){if(!dl(e))throw new TypeError("Invalid key provided. Must be an octet key pair (OKP) public key.");switch(e.crv){case"Ed25519":return yield Fr.verify({key:e,signature:r,data:n});default:throw new Error(`Unsupported curve: ${e.crv}`)}})}};var vo=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Bw={Ed25519:{implementation:t0,names:["Ed25519"]},secp256k1:{implementation:Cf,names:["ES256K","secp256k1"]},secp256r1:{implementation:Cf,names:["ES256","secp256r1"]},"SHA-256":{implementation:Hm,names:["SHA-256"]}},Ir=class{constructor(e){var r;this._algorithmInstances=new Map,this._keyStore=(r=e?.keyStore)!==null&&r!==void 0?r:new lm}digest({algorithm:e,data:r}){return vo(this,void 0,void 0,function*(){return yield this.getAlgorithm({algorithm:e}).digest({algorithm:e,data:r})})}exportKey({keyUri:e}){return vo(this,void 0,void 0,function*(){return yield this.getPrivateKey({keyUri:e})})}generateKey({algorithm:e}){return vo(this,void 0,void 0,function*(){let n=yield this.getAlgorithm({algorithm:e}).generateKey({algorithm:e});if(n?.kid===void 0)throw new Error("Generated key is missing a required property: kid");let s=`${Dw}${n.kid}`;return yield this._keyStore.set(s,n),s})}getKeyUri({key:e}){return vo(this,void 0,void 0,function*(){let r=yield Xe({jwk:e});return`${Dw}${r}`})}getPublicKey({keyUri:e}){return vo(this,void 0,void 0,function*(){let r=yield this.getPrivateKey({keyUri:e}),n=this.getAlgorithmName({key:r});return yield this.getAlgorithm({algorithm:n}).getPublicKey({key:r})})}importKey({key:e}){var r;return vo(this,void 0,void 0,function*(){if(!x8(e))throw new TypeError("Invalid key provided. Must be a private key in JWK format.");let n=structuredClone(e);(r=n.kid)!==null&&r!==void 0||(n.kid=yield Xe({jwk:n}));let s=yield this.getKeyUri({key:n});return yield this._keyStore.set(s,n),s})}sign({keyUri:e,data:r}){return vo(this,void 0,void 0,function*(){let n=yield this.getPrivateKey({keyUri:e}),s=this.getAlgorithmName({key:n});return this.getAlgorithm({algorithm:s}).sign({data:r,key:n})})}verify({key:e,signature:r,data:n}){return vo(this,void 0,void 0,function*(){let s=this.getAlgorithmName({key:e});return this.getAlgorithm({algorithm:s}).verify({key:e,signature:r,data:n})})}getAlgorithm({algorithm:e}){var r;let n=(r=Bw[e])===null||r===void 0?void 0:r.implementation;if(!n)throw new Error(`Algorithm not supported: ${e}`);return this._algorithmInstances.has(n)||this._algorithmInstances.set(n,new n),this._algorithmInstances.get(n)}getAlgorithmName({key:e}){let r=e.alg,n=e.crv;for(let s in Bw){let i=Bw[s];if(r&&i.names.includes(r))return s;if(n&&i.names.includes(n))return s}throw new Error(`Unable to determine algorithm based on provided input: alg=${r}, crv=${n}`)}getPrivateKey({keyUri:e}){return vo(this,void 0,void 0,function*(){let r=yield this._keyStore.get(e);if(!r)throw new Error(`Key not found: ${e}`);return r})}};var fa={};cr(fa,{checkRequiredProperty:()=>VJ,checkValidProperty:()=>KJ,getJoseSignatureAlgorithmFromPublicKey:()=>HJ,isWebCryptoSupported:()=>WJ,randomBytes:()=>zJ,randomUuid:()=>JJ});function VJ(t){if(!t||t.property===void 0||t.inObject===void 0)throw new TypeError("One or more required parameters missing: 'property, properties'");let{property:e,inObject:r}=t;if(!(e in r))throw new TypeError(`Required parameter missing: '${e}'`)}function KJ(t){if(!t||t.property===void 0||t.allowedProperties===void 0)throw new TypeError("One or more required parameters missing: 'property, allowedProperties'");let{property:e,allowedProperties:r}=t;if(Array.isArray(r)&&!r.includes(e)||r instanceof Set&&!r.has(e)||r instanceof Map&&!r.has(e)){let n=Array.from(r instanceof Map?r.keys():r).join(", ");throw new TypeError(`Out of range: '${e}'. Must be one of '${n}'`)}}function HJ(t){let e={Ed25519:"EdDSA","P-256":"ES256","P-384":"ES384","P-521":"ES512",secp256k1:"ES256K"};if(t.alg&&Object.values(e).includes(t.alg))return t.alg;if(t.crv&&Object.keys(e).includes(t.crv))return e[t.crv];throw new Error(`Unable to determine algorithm based on provided input: alg=${t.alg}, crv=${t.crv}. Supported 'alg' values: ${Object.values(e).join(", ")}. Supported 'crv' values: ${Object.keys(e).join(", ")}.`)}function WJ(){return!!(globalThis.crypto&&globalThis.crypto.subtle)}function zJ(t){return Cu(t)}function JJ(){return sl.randomUUID()}var GJ=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var wo=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));function M8(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}var j8=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),XJ=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!XJ)throw new Error("Non little-endian hardware is not supported");function r0(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function n0(t){if(typeof t=="string")t=r0(t);else if(M8(t))t=t.slice();else throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var YJ=t=>Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object;function q8(t,e){if(e!==void 0&&(typeof e!="object"||!YJ(e)))throw new Error("options must be object or undefined");return Object.assign(t,e)}function Fu(t,e){if(!M8(t))throw new Error("Uint8Array expected");if(typeof e=="number"&&t.length!==e)throw new Error(`Uint8Array length ${e} expected`)}function L8(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var Tw=(t,e)=>(Object.assign(e,t),e);function Fw(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(r>>s&i),a=Number(r&i),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}function Ff(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`wrong positive integer: ${t}`)}function Iw(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function ZJ(t){return t!=null&&typeof t=="object"&&(t instanceof Uint8Array||t.constructor.name==="Uint8Array")}function fl(t,...e){if(!ZJ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function kw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function U8(t,e){fl(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var pa=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},QJ=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},i0=class t{static bytesToPrivateKey({privateKeyBytes:e}){return pa(this,void 0,void 0,function*(){let r=Tu.getPublicKey(e),n={kty:"OKP",crv:"X25519",d:ce.uint8Array(e).toBase64Url(),x:ce.uint8Array(r).toBase64Url()};return n.kid=yield Xe({jwk:n}),n})}static bytesToPublicKey({publicKeyBytes:e}){return pa(this,void 0,void 0,function*(){let r={kty:"OKP",crv:"X25519",x:ce.uint8Array(e).toBase64Url()};return r.kid=yield Xe({jwk:r}),r})}static computePublicKey({key:e}){return pa(this,void 0,void 0,function*(){let r=yield t.privateKeyToBytes({privateKey:e}),n=Tu.getPublicKey(r),s={kty:"OKP",crv:"X25519",x:ce.uint8Array(n).toBase64Url()};return s.kid=yield Xe({jwk:s}),s})}static generateKey(){return pa(this,void 0,void 0,function*(){let e=Tu.utils.randomPrivateKey(),r=yield t.bytesToPrivateKey({privateKeyBytes:e});return r.kid=yield Xe({jwk:r}),r})}static getPublicKey({key:e}){var r;return pa(this,void 0,void 0,function*(){if(!(vs(e)&&e.crv==="X25519"))throw new Error("X25519: The provided key is not an X25519 private JWK.");let{d:n}=e,s=QJ(e,["d"]);return(r=s.kid)!==null&&r!==void 0||(s.kid=yield Xe({jwk:s})),s})}static privateKeyToBytes({privateKey:e}){return pa(this,void 0,void 0,function*(){if(!vs(e))throw new Error("X25519: The provided key is not a valid OKP private key.");return ce.base64Url(e.d).toUint8Array()})}static publicKeyToBytes({publicKey:e}){return pa(this,void 0,void 0,function*(){if(!dl(e))throw new Error("X25519: The provided key is not a valid OKP public key.");return ce.base64Url(e.x).toUint8Array()})}static sharedSecret({privateKeyA:e,publicKeyB:r}){return pa(this,void 0,void 0,function*(){if("x"in e&&"x"in r&&e.x===r.x)throw new Error("X25519: ECDH shared secret cannot be computed from a single key pair's public and private keys.");let n=yield t.privateKeyToBytes({privateKey:e}),s=yield t.publicKeyToBytes({publicKey:r});return Tu.getSharedSecret(n,s)})}};var Vr=(t,e)=>t[e++]&255|(t[e++]&255)<<8,Nw=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=n0(e),Fu(e,32);let r=Vr(e,0),n=Vr(e,2),s=Vr(e,4),i=Vr(e,6),o=Vr(e,8),a=Vr(e,10),u=Vr(e,12),c=Vr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|u<<5)&8065,this.r[8]=(u>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let l=0;l<8;l++)this.pad[l]=Vr(e,16+2*l)}process(e,r,n=!1){let s=n?0:2048,{h:i,r:o}=this,a=o[0],u=o[1],c=o[2],l=o[3],d=o[4],p=o[5],f=o[6],h=o[7],y=o[8],g=o[9],S=Vr(e,r+0),A=Vr(e,r+2),w=Vr(e,r+4),P=Vr(e,r+6),D=Vr(e,r+8),O=Vr(e,r+10),B=Vr(e,r+12),F=Vr(e,r+14),N=i[0]+(S&8191),R=i[1]+((S>>>13|A<<3)&8191),q=i[2]+((A>>>10|w<<6)&8191),M=i[3]+((w>>>7|P<<9)&8191),Z=i[4]+((P>>>4|D<<12)&8191),Q=i[5]+(D>>>1&8191),U=i[6]+((D>>>14|O<<2)&8191),G=i[7]+((O>>>11|B<<5)&8191),ee=i[8]+((B>>>8|F<<8)&8191),z=i[9]+(F>>>5|s),$=0,j=$+N*a+R*(5*g)+q*(5*y)+M*(5*h)+Z*(5*f);$=j>>>13,j&=8191,j+=Q*(5*p)+U*(5*d)+G*(5*l)+ee*(5*c)+z*(5*u),$+=j>>>13,j&=8191;let Y=$+N*u+R*a+q*(5*g)+M*(5*y)+Z*(5*h);$=Y>>>13,Y&=8191,Y+=Q*(5*f)+U*(5*p)+G*(5*d)+ee*(5*l)+z*(5*c),$+=Y>>>13,Y&=8191;let se=$+N*c+R*u+q*a+M*(5*g)+Z*(5*y);$=se>>>13,se&=8191,se+=Q*(5*h)+U*(5*f)+G*(5*p)+ee*(5*d)+z*(5*l),$+=se>>>13,se&=8191;let pe=$+N*l+R*c+q*u+M*a+Z*(5*g);$=pe>>>13,pe&=8191,pe+=Q*(5*y)+U*(5*h)+G*(5*f)+ee*(5*p)+z*(5*d),$+=pe>>>13,pe&=8191;let oe=$+N*d+R*l+q*c+M*u+Z*a;$=oe>>>13,oe&=8191,oe+=Q*(5*g)+U*(5*y)+G*(5*h)+ee*(5*f)+z*(5*p),$+=oe>>>13,oe&=8191;let he=$+N*p+R*d+q*l+M*c+Z*u;$=he>>>13,he&=8191,he+=Q*a+U*(5*g)+G*(5*y)+ee*(5*h)+z*(5*f),$+=he>>>13,he&=8191;let Ee=$+N*f+R*p+q*d+M*l+Z*c;$=Ee>>>13,Ee&=8191,Ee+=Q*u+U*a+G*(5*g)+ee*(5*y)+z*(5*h),$+=Ee>>>13,Ee&=8191;let Pe=$+N*h+R*f+q*p+M*d+Z*l;$=Pe>>>13,Pe&=8191,Pe+=Q*c+U*u+G*a+ee*(5*g)+z*(5*y),$+=Pe>>>13,Pe&=8191;let Ie=$+N*y+R*h+q*f+M*p+Z*d;$=Ie>>>13,Ie&=8191,Ie+=Q*l+U*c+G*u+ee*a+z*(5*g),$+=Ie>>>13,Ie&=8191;let ze=$+N*g+R*y+q*h+M*f+Z*p;$=ze>>>13,ze&=8191,ze+=Q*d+U*l+G*c+ee*u+z*a,$+=ze>>>13,ze&=8191,$=($<<2)+$|0,$=$+j|0,j=$&8191,$=$>>>13,Y+=$,i[0]=j,i[1]=Y,i[2]=se,i[3]=pe,i[4]=oe,i[5]=he,i[6]=Ee,i[7]=Pe,i[8]=Ie,i[9]=ze}finalize(){let{h:e,pad:r}=this,n=new Uint16Array(10),s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,n[0]=e[0]+5,s=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+s,s=n[a]>>>13,n[a]&=8191;n[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)n[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535}update(e){kw(this);let{buffer:r,blockLen:n}=this;e=n0(e);let s=e.length;for(let i=0;i<s;){let o=Math.min(n-this.pos,s-i);if(o===n){for(;n<=s-i;i+=n)this.process(e,i);continue}r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){kw(this),U8(e,this),this.finished=!0;let{buffer:r,h:n}=this,{pos:s}=this;if(s){for(r[s++]=1;s<16;s++)r[s]=0;this.process(r,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}};function eG(t){let e=(n,s)=>t(s).update(n0(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}var V8=eG(t=>new Nw(t));var tG=r0("expand 16-byte k"),rG=r0("expand 32-byte k"),nG=wo(tG),iG=wo(rG);function me(t,e){return t<<e|t>>>32-e}function Mw(t){return t.byteOffset%4===0}var s0=64,sG=16,H8=2**32-1,K8=new Uint32Array;function oG(t,e,r,n,s,i,o,a){let u=s.length,c=new Uint8Array(s0),l=wo(c),d=Mw(s)&&Mw(i),p=d?wo(s):K8,f=d?wo(i):K8;for(let h=0;h<u;o++){if(t(e,r,n,l,o,a),o>=H8)throw new Error("arx: counter overflow");let y=Math.min(s0,u-h);if(d&&y===s0){let g=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let S=0,A;S<sG;S++)A=g+S,f[A]=p[A]^l[S];h+=s0;continue}for(let g=0,S;g<y;g++)S=h+g,i[S]=s[S]^c[g];h+=y}}function jw(t,e){let{allowShortKeys:r,extendNonceFn:n,counterLength:s,counterRight:i,rounds:o}=q8({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ff(s),Ff(o),Iw(i),Iw(r),(a,u,c,l,d=0)=>{fl(a),fl(u),fl(c);let p=c.length;if(l||(l=new Uint8Array(p)),fl(l),Ff(d),d<0||d>=H8)throw new Error("arx: counter overflow");if(l.length<p)throw new Error(`arx: output (${l.length}) is shorter than data (${p})`);let f=[],h=a.length,y,g;if(h===32)y=a.slice(),f.push(y),g=iG;else if(h===16&&r)y=new Uint8Array(32),y.set(a),y.set(a,16),g=nG,f.push(y);else throw new Error(`arx: invalid 32-byte key, got length=${h}`);Mw(u)||(u=u.slice(),f.push(u));let S=wo(y);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(g,S,wo(u.subarray(0,16)),S),u=u.subarray(16)}let A=16-s;if(A!==u.length)throw new Error(`arx: nonce must be ${A} or 16 bytes`);if(A!==12){let P=new Uint8Array(12);P.set(u,i?0:12-u.length),u=P,f.push(u)}let w=wo(u);for(oG(t,g,S,w,c,l,d,o);f.length>0;)f.pop().fill(0);return l}}function J8(t,e,r,n,s,i=20){let o=t[0],a=t[1],u=t[2],c=t[3],l=e[0],d=e[1],p=e[2],f=e[3],h=e[4],y=e[5],g=e[6],S=e[7],A=s,w=r[0],P=r[1],D=r[2],O=o,B=a,F=u,N=c,R=l,q=d,M=p,Z=f,Q=h,U=y,G=g,ee=S,z=A,$=w,j=P,Y=D;for(let pe=0;pe<i;pe+=2)O=O+R|0,z=me(z^O,16),Q=Q+z|0,R=me(R^Q,12),O=O+R|0,z=me(z^O,8),Q=Q+z|0,R=me(R^Q,7),B=B+q|0,$=me($^B,16),U=U+$|0,q=me(q^U,12),B=B+q|0,$=me($^B,8),U=U+$|0,q=me(q^U,7),F=F+M|0,j=me(j^F,16),G=G+j|0,M=me(M^G,12),F=F+M|0,j=me(j^F,8),G=G+j|0,M=me(M^G,7),N=N+Z|0,Y=me(Y^N,16),ee=ee+Y|0,Z=me(Z^ee,12),N=N+Z|0,Y=me(Y^N,8),ee=ee+Y|0,Z=me(Z^ee,7),O=O+q|0,Y=me(Y^O,16),G=G+Y|0,q=me(q^G,12),O=O+q|0,Y=me(Y^O,8),G=G+Y|0,q=me(q^G,7),B=B+M|0,z=me(z^B,16),ee=ee+z|0,M=me(M^ee,12),B=B+M|0,z=me(z^B,8),ee=ee+z|0,M=me(M^ee,7),F=F+Z|0,$=me($^F,16),Q=Q+$|0,Z=me(Z^Q,12),F=F+Z|0,$=me($^F,8),Q=Q+$|0,Z=me(Z^Q,7),N=N+R|0,j=me(j^N,16),U=U+j|0,R=me(R^U,12),N=N+R|0,j=me(j^N,8),U=U+j|0,R=me(R^U,7);let se=0;n[se++]=o+O|0,n[se++]=a+B|0,n[se++]=u+F|0,n[se++]=c+N|0,n[se++]=l+R|0,n[se++]=d+q|0,n[se++]=p+M|0,n[se++]=f+Z|0,n[se++]=h+Q|0,n[se++]=y+U|0,n[se++]=g+G|0,n[se++]=S+ee|0,n[se++]=A+z|0,n[se++]=w+$|0,n[se++]=P+j|0,n[se++]=D+Y|0}function aG(t,e,r,n){let s=t[0],i=t[1],o=t[2],a=t[3],u=e[0],c=e[1],l=e[2],d=e[3],p=e[4],f=e[5],h=e[6],y=e[7],g=r[0],S=r[1],A=r[2],w=r[3];for(let D=0;D<20;D+=2)s=s+u|0,g=me(g^s,16),p=p+g|0,u=me(u^p,12),s=s+u|0,g=me(g^s,8),p=p+g|0,u=me(u^p,7),i=i+c|0,S=me(S^i,16),f=f+S|0,c=me(c^f,12),i=i+c|0,S=me(S^i,8),f=f+S|0,c=me(c^f,7),o=o+l|0,A=me(A^o,16),h=h+A|0,l=me(l^h,12),o=o+l|0,A=me(A^o,8),h=h+A|0,l=me(l^h,7),a=a+d|0,w=me(w^a,16),y=y+w|0,d=me(d^y,12),a=a+d|0,w=me(w^a,8),y=y+w|0,d=me(d^y,7),s=s+c|0,w=me(w^s,16),h=h+w|0,c=me(c^h,12),s=s+c|0,w=me(w^s,8),h=h+w|0,c=me(c^h,7),i=i+l|0,g=me(g^i,16),y=y+g|0,l=me(l^y,12),i=i+l|0,g=me(g^i,8),y=y+g|0,l=me(l^y,7),o=o+d|0,S=me(S^o,16),p=p+S|0,d=me(d^p,12),o=o+d|0,S=me(S^o,8),p=p+S|0,d=me(d^p,7),a=a+u|0,A=me(A^a,16),f=f+A|0,u=me(u^f,12),a=a+u|0,A=me(A^a,8),f=f+A|0,u=me(u^f,7);let P=0;n[P++]=s,n[P++]=i,n[P++]=o,n[P++]=a,n[P++]=g,n[P++]=S,n[P++]=A,n[P++]=w}var uG=jw(J8,{counterRight:!1,counterLength:4,allowShortKeys:!1}),G8=jw(J8,{counterRight:!1,counterLength:8,extendNonceFn:aG,allowShortKeys:!1});var cG=new Uint8Array(16),W8=(t,e)=>{t.update(e);let r=e.length%16;r&&t.update(cG.subarray(r))},lG=new Uint8Array(32);function z8(t,e,r,n,s){let i=t(e,r,lG),o=V8.create(i);s&&W8(o,s),W8(o,n);let a=new Uint8Array(16),u=j8(a);Fw(u,0,BigInt(s?s.length:0),!0),Fw(u,8,BigInt(n.length),!0),o.update(a);let c=o.digest();return i.fill(0),c}var X8=t=>(e,r,n)=>(Fu(e,32),Fu(r),{encrypt:(i,o)=>{let a=i.length,u=a+16;o?Fu(o,u):o=new Uint8Array(u),t(e,r,i,o,1);let c=z8(t,e,r,o.subarray(0,-16),n);return o.set(c,a),o},decrypt:(i,o)=>{let a=i.length,u=a-16;if(a<16)throw new Error("encrypted data must be at least 16 bytes");o?Fu(o,u):o=new Uint8Array(u);let c=i.subarray(0,-16),l=i.subarray(-16),d=z8(t,e,r,c,n);if(!L8(l,d))throw new Error("invalid tag");return t(e,r,c,o,1),o}}),zge=Tw({blockSize:64,nonceLength:12,tagLength:16},X8(uG)),dG=Tw({blockSize:64,nonceLength:24,tagLength:16},X8(G8));var Iu;(function(t){t.authentication="authentication",t.assertionMethod="assertionMethod",t.keyAgreement="keyAgreement",t.capabilityDelegation="capabilityDelegation",t.capabilityInvocation="capabilityInvocation"})(Iu||(Iu={}));var er={"@context":"https://w3id.org/did-resolution/v1",didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};var tt=class t{constructor({method:e,id:r,path:n,query:s,fragment:i,params:o}){this.uri=`did:${e}:${r}`,this.method=e,this.id=r,this.path=n,this.query=s,this.fragment=i,this.params=o}static parse(e){if(!e)return null;let r=t.DID_URI_PATTERN.exec(e);if(!r||!r.groups)return null;let{method:n,id:s,path:i,query:o,fragment:a}=r.groups,u={uri:`did:${n}:${s}`,method:n,id:s};if(i&&(u.path=i),o&&(u.query=o.slice(1)),a&&(u.fragment=a.slice(1)),o){let c={},l=o.slice(1).split("&");for(let d of l){let[p,f]=d.split("=");c[p]=f}u.params=c}return u}};tt.METHOD_PATTERN="([a-z0-9]+)";tt.PCT_ENCODED_PATTERN="(?:%[0-9a-fA-F]{2})";tt.ID_CHAR_PATTERN=`(?:[a-zA-Z0-9._-]|${tt.PCT_ENCODED_PATTERN})`;tt.METHOD_ID_PATTERN=`((?:${tt.ID_CHAR_PATTERN}*:)*(${tt.ID_CHAR_PATTERN}+))`;tt.PATH_PATTERN="(/[^#?]*)?";tt.QUERY_PATTERN="([?][^#]*)?";tt.FRAGMENT_PATTERN="(#.*)?";tt.DID_URI_PATTERN=new RegExp(`^did:(?<method>${tt.METHOD_PATTERN}):(?<id>${tt.METHOD_ID_PATTERN})(?<path>${tt.PATH_PATTERN})(?<query>${tt.QUERY_PATTERN})(?<fragment>${tt.FRAGMENT_PATTERN})$`);var _e=class t extends Error{constructor(e,r){super(r),this.code=e,this.name="DidError",Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t)}},ge;(function(t){t.InvalidDid="invalidDid",t.MethodNotSupported="methodNotSupported",t.InternalError="internalError",t.InvalidDidDocument="invalidDidDocument",t.InvalidDidDocumentLength="invalidDidDocumentLength",t.InvalidDidUrl="invalidDidUrl",t.InvalidPublicKey="invalidPublicKey",t.InvalidPublicKeyLength="invalidPublicKeyLength",t.InvalidPublicKeyType="invalidPublicKeyType",t.InvalidSignature="invalidSignature",t.NotFound="notFound",t.RepresentationNotSupported="representationNotSupported",t.UnsupportedPublicKeyType="unsupportedPublicKeyType"})(ge||(ge={}));var c0={};cr(c0,{extractDidFragment:()=>Cn,getServices:()=>pG,getVerificationMethodByKey:()=>hG,getVerificationMethodTypes:()=>qw,getVerificationMethods:()=>If,getVerificationRelationshipsById:()=>Lw,isDidService:()=>Y8,isDidVerificationMethod:()=>o0,isDwnDidService:()=>mG,keyBytesToMultibaseId:()=>a0,multibaseIdToKeyBytes:()=>u0});var fG=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})};function Cn(t){if(typeof t=="string"&&t.length!==0)return t.split("#").pop()}function pG({didDocument:t,id:e,type:r}){var n,s;return(s=(n=t?.service)===null||n===void 0?void 0:n.filter(i=>!(e&&i.id!==e||r&&i.type!==r)))!==null&&s!==void 0?s:[]}function hG({didDocument:t,publicKeyJwk:e,publicKeyMultibase:r}){return fG(this,void 0,void 0,function*(){let n=If({didDocument:t});for(let s of n)if(e&&s.publicKeyJwk){if((yield Xe({jwk:e}))===(yield Xe({jwk:s.publicKeyJwk})))return s}else if(r&&s.publicKeyMultibase&&r===s.publicKeyMultibase)return s;return null})}function If({didDocument:t}){var e,r;if(!t)throw new TypeError("Required parameter missing: 'didDocument'");let n=[];return n.push(...(r=(e=t.verificationMethod)===null||e===void 0?void 0:e.filter(o0))!==null&&r!==void 0?r:[]),Object.keys(Iu).forEach(s=>{var i,o;n.push(...(o=(i=t[s])===null||i===void 0?void 0:i.filter(o0))!==null&&o!==void 0?o:[])}),n}function qw({didDocument:t}){let r=If({didDocument:t}).map(n=>n.type);return[...new Set(r)]}function Lw({didDocument:t,methodId:e}){let r=[];return Object.keys(Iu).forEach(n=>{if(Array.isArray(t[n])){let s=t[n],i=Cn(e);s.some(a=>{let u=Cn(a)===i,c=o0(a)&&Cn(a.id)===i;return u||c})&&r.push(n)}}),r}function Y8(t){return!t||typeof t!="object"||t===null?!1:"id"in t&&"type"in t&&"serviceEndpoint"in t}function mG(t){if(!Y8(t)||t.type!=="DecentralizedWebNode"||!("enc"in t&&"sig"in t))return!1;let e=r=>typeof r=="string"||Array.isArray(r)&&r.every(n=>typeof n=="string");return e(t.enc)&&e(t.sig)}function o0(t){return!(!t||typeof t!="object"||t===null||!("id"in t&&"type"in t&&"controller"in t)||typeof t.id!="string"||typeof t.type!="string"||typeof t.controller!="string")}function a0({keyBytes:t,multicodecCode:e,multicodecName:r}){let n=en.addPrefix({code:e,data:t,name:r}),s=ce.uint8Array(n).toBase58Btc();return ce.base58Btc(s).toMultibase()}function u0({multibaseKeyId:t}){try{let e=ce.multibase(t).toBase58Btc(),r=ce.base58Btc(e).toUint8Array(),{code:n,data:s,name:i}=en.removePrefix({prefixedData:r});return{keyBytes:s,multicodecCode:n,multicodecName:i}}catch{throw new _e(ge.InvalidDid,`Invalid multibase identifier: ${t}`)}}var kf=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Pn=class t{constructor({uri:e,document:r,metadata:n,keyManager:s}){this.uri=e,this.document=r,this.metadata=n,this.keyManager=s}export(){return kf(this,void 0,void 0,function*(){if(!(Array.isArray(this.document.verificationMethod)&&this.document.verificationMethod.length>0))throw new Error(`DID document for '${this.uri}' is missing verification methods`);let e={uri:this.uri,document:this.document,metadata:this.metadata};if("exportKey"in this.keyManager&&typeof this.keyManager.exportKey=="function"){let r=[];for(let n of this.document.verificationMethod){if(!n.publicKeyJwk)throw new Error(`Verification method '${n.id}' does not contain a public key in JWK format`);let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.exportKey({keyUri:s});r.push(Object.assign({},i))}e.privateKeys=r}return e})}getSigner(e){var r;return kf(this,void 0,void 0,function*(){let n=(r=this.document.verificationMethod)===null||r===void 0?void 0:r.find(u=>{var c,l;return Cn(u.id)===((c=Cn(e?.methodId))!==null&&c!==void 0?c:Cn((l=this.document.assertionMethod)===null||l===void 0?void 0:l[0]))});if(!(n&&n.publicKeyJwk))throw new _e(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");let s=yield this.keyManager.getKeyUri({key:n.publicKeyJwk}),i=yield this.keyManager.getPublicKey({keyUri:s}),o=this.keyManager;return{algorithm:fa.getJoseSignatureAlgorithmFromPublicKey(i),keyId:n.id,sign({data:u}){return kf(this,void 0,void 0,function*(){return yield o.sign({data:u,keyUri:s})})},verify({data:u,signature:c}){return kf(this,void 0,void 0,function*(){return yield o.verify({data:u,key:i,signature:c})})}}})}static import({portableDid:e,keyManager:r=new Ir}){var n;return kf(this,void 0,void 0,function*(){let s=If({didDocument:e.document});if(s.length===0)throw new _e(ge.InvalidDidDocument,"At least one verification method is required but 0 were given");for(let o of(n=e.privateKeys)!==null&&n!==void 0?n:[])yield r.importKey({key:o});for(let o of s){if(!o.publicKeyJwk)throw new Error(`Verification method '${o.id}' does not contain a public key in JWK format`);let a=yield r.getKeyUri({key:o.publicKeyJwk});yield r.getPublicKey({keyUri:a})}return new t({uri:e.uri,document:e.document,metadata:e.metadata,keyManager:r})})}};var Uw="0123456789abcdef",Q8=[],Z8=[];for(let t=0;t<256;t++)Q8[t]=Uw[t>>4&15]+Uw[t&15],t<16&&(t<10?Z8[48+t]=t:Z8[87+t]=t);var Vw=t=>{let e=t.length,r="",n=0;for(;n<e;)r+=Q8[t[n++]];return r};var eB=(t,e=0)=>{let r=t.length||0;if(!e){let o=r;for(;o--;)e+=t[o].length}let n=new Uint8Array(e),s=e,i=r;for(;i--;)s-=t[i].length,n.set(t[i],s);return n};var tB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yG=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Rf=0;Rf<tB.length;Rf++)yG[tB.charCodeAt(Rf)]=Rf;var Rf;var gG=new TextDecoder,Kw=(t,e)=>e?new TextDecoder(e).decode(t):gG.decode(t),bG=new TextEncoder,ci=t=>bG.encode(t);var rB=typeof window<"u"?window:self,nB=rB.crypto||rB.msCrypto||{},Jbe=nB.subtle||nB.webkitSubtle;function pl(t){let e=t<0?1:0;return t=Math.abs(Number(t||1)),Math.floor(Math.log10(t))+1+e}function l0(t){return ArrayBuffer.isView(t)?"arraybufferview":Array.isArray(t)?"array":t instanceof Number?"number":t instanceof Boolean?"boolean":t instanceof Set?"set":t instanceof Map?"map":t instanceof String?"string":t instanceof ArrayBuffer?"arraybuffer":typeof t}function Ct(t,e,r){let n=[],s=null;return Ct._encode(n,t),s=eB(n),Ct.bytes=s.length,ArrayBuffer.isView(e)?(e.set(s,r),e):s}Ct.bytes=-1;Ct._floatConversionDetected=!1;Ct._encode=function(t,e){if(e!=null)switch(l0(e)){case"object":Ct.dict(t,e);break;case"map":Ct.dictMap(t,e);break;case"array":Ct.list(t,e);break;case"set":Ct.listSet(t,e);break;case"string":Ct.string(t,e);break;case"number":Ct.number(t,e);break;case"boolean":Ct.number(t,e);break;case"arraybufferview":Ct.buffer(t,new Uint8Array(e.buffer,e.byteOffset,e.byteLength));break;case"arraybuffer":Ct.buffer(t,new Uint8Array(e));break}};var d0=new Uint8Array([101]),iB=new Uint8Array([100]),sB=new Uint8Array([108]);Ct.buffer=function(t,e){t.push(ci(e.length+":"),e)};Ct.string=function(t,e){t.push(ci(ci(e).byteLength+":"+e))};Ct.number=function(t,e){if(Number.isInteger(e))return t.push(ci("i"+BigInt(e)+"e"));let r=2147483648,n=e/r<<0,s=e%r<<0,i=n*r+s;t.push(ci("i"+i+"e")),i!==e&&!Ct._floatConversionDetected&&(Ct._floatConversionDetected=!0,console.warn('WARNING: Possible data corruption detected with value "'+e+'":','Bencoding only defines support for integers, value was converted to "'+i+'"'),console.trace())};Ct.dict=function(t,e){t.push(iB);let r=0,n,s=Object.keys(e).sort(),i=s.length;for(;r<i;r++)n=s[r],e[n]!=null&&(Ct.string(t,n),Ct._encode(t,e[n]));t.push(d0)};Ct.dictMap=function(t,e){t.push(iB);let r=Array.from(e.keys()).sort();for(let n of r)e.get(n)!=null&&(ArrayBuffer.isView(n)?Ct._encode(t,n):Ct.string(t,String(n)),Ct._encode(t,e.get(n)));t.push(d0)};Ct.list=function(t,e){let r=0,n=e.length;for(t.push(sB);r<n;r++)e[r]!=null&&Ct._encode(t,e[r]);t.push(d0)};Ct.listSet=function(t,e){t.push(sB);for(let r of e)r!=null&&Ct._encode(t,r);t.push(d0)};var oB=Ct;var vG=105,wG=58,EG=100,_G=108,Hw=101;function aB(t,e,r){let n=0,s=1;for(let i=e;i<r;i++){let o=t[i];if(o<58&&o>=48){n=n*10+(o-48);continue}if(!(i===e&&o===43)){if(i===e&&o===45){s=-1;continue}if(o===46)break;throw new Error("not a number: buffer["+i+"] = "+o)}}return n*s}function ke(t,e,r,n){return t==null||t.length===0?null:(typeof e!="number"&&n==null&&(n=e,e=void 0),typeof r!="number"&&n==null&&(n=r,r=void 0),ke.position=0,ke.encoding=n||null,ke.data=ArrayBuffer.isView(t)?new Uint8Array(t.slice(e,r)):ci(t),ke.bytes=ke.data.length,ke.next())}ke.bytes=0;ke.position=0;ke.data=null;ke.encoding=null;ke.next=function(){switch(ke.data[ke.position]){case EG:return ke.dictionary();case _G:return ke.list();case vG:return ke.integer();default:return ke.buffer()}};ke.find=function(t){let e=ke.position,r=ke.data.length,n=ke.data;for(;e<r;){if(n[e]===t)return e;e++}throw new Error('Invalid data: Missing delimiter "'+String.fromCharCode(t)+'" [0x'+t.toString(16)+"]")};ke.dictionary=function(){ke.position++;let t={};for(;ke.data[ke.position]!==Hw;){let e=ke.buffer(),r=Kw(e);r.includes("\uFFFD")&&(r=Vw(e)),t[r]=ke.next()}return ke.position++,t};ke.list=function(){ke.position++;let t=[];for(;ke.data[ke.position]!==Hw;)t.push(ke.next());return ke.position++,t};ke.integer=function(){let t=ke.find(Hw),e=aB(ke.data,ke.position+1,t);return ke.position+=t+1-ke.position,e};ke.buffer=function(){let t=ke.find(wG),e=aB(ke.data,ke.position,t),r=++t+e;return ke.position=r,ke.encoding?Kw(ke.data.slice(t,r)):ke.data.slice(t,r)};var uB=ke;function SG(t){let e=2;for(let r of t)e+=f0(r);return e}function DG(t){let e=2;for(let[r,n]of t){let s=ci(r).byteLength;e+=pl(s)+1+s,e+=f0(n)}return e}function AG(t){let e=2,r=Object.keys(t);for(let n=0;n<r.length;n++){let s=ci(r[n]).byteLength;e+=pl(s)+1+s,e+=f0(t[r[n]])}return e}function xG(t){let e=ci(t).byteLength;return pl(e)+1+e}function CG(t){let e=t.byteLength-t.byteOffset;return pl(e)+1+e}function f0(t){if(t==null)return 0;let r=l0(t);switch(r){case"arraybufferview":return CG(t);case"string":return xG(t);case"array":case"set":return SG(t);case"number":return 1+pl(Math.floor(t))+1;case"bigint":return 1+t.toString().length+1;case"object":return AG(t);case"map":return DG(t);default:throw new TypeError(`Unsupported value of type "${r}"`)}}var Ww=f0;var PG=Ww,zw={encode:oB,decode:uB,byteLength:Ww,encodingLength:PG};var OG=/^(\d{1,3}\.){3,3}\d{1,3}$/;var BG=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;var ki={name:"v4",size:4,isFormat:t=>OG.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+4);let n=t.length,s=0;for(let i=0;i<n;){let o=t.charCodeAt(i++);o===46?(e[r++]=s,s=0):s=s*10+(o-48)}return e[r]=s,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}},Eo={name:"v6",size:16,isFormat:t=>t.length>0&&BG.test(t),encode(t,e,r){r=~~r;let n=r+16,s=-1,i=0,o=0,a=!0,u=!1;e=e||new Uint8Array(r+16);for(let c=0;c<t.length;c++){let l=t.charCodeAt(c);l===58?(a?s!==-1?(r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2):r<n&&(s=r):(u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2),i=0,o=0),a=!0,u=!1):l===46?(r<n&&(e[r]=o),r++,o=0,i=0,a=!1,u=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:(l-=48,o=o*10+l),i=(i<<4)+l)}if(a===!1)u===!0?(r<n&&(e[r]=o),r++):(r<n&&(e[r]=i>>8),r<n-1&&(e[r+1]=i&255),r+=2);else if(s===0)r<n&&(e[r]=0),r<n-1&&(e[r+1]=0),r+=2;else if(s!==-1){r+=2;for(let c=Math.min(r-1,n-1);c>=s+2;c--)e[c]=e[c-2];e[s]=0,e[s+1]=0,s=r}if(s!==r&&s!==-1)for(r>n-2&&(r=n-2);n>s;)e[--n]=r<n&&r>s?e[--r]:0;else for(;r<n;)e[r++]=0;return e},decode(t,e){e=~~e;let r="";for(let n=0;n<16;n+=2)n!==0&&(r+=":"),r+=(t[e+n]<<8|t[e+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function cB(t){if(ki.isFormat(t))return ki.size;if(Eo.isFormat(t))return Eo.size;throw Error(`Invalid ip address: ${t}`)}function lB(t){return cB(t)===ki.size?1:2}function dB(t,e,r){r=~~r;let n=cB(t);return typeof e=="function"&&(e=e(r+n)),n===ki.size?ki.encode(t,e,r):Eo.encode(t,e,r)}function fB(t,e,r){if(e=~~e,r=r||t.length-e,r===ki.size)return ki.decode(t,e,r);if(r===Eo.size)return Eo.decode(t,e,r);throw Error(`Invalid buffer size needs to be ${ki.size} for v4 or ${Eo.size} for v6.`)}function $f(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t}function hl(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}function pB(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t}function hB(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t}function Jw(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t}function Gw(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function mB(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`}function Xw(t){if(typeof t=="number")return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}let e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}function Yw(t){let e=0,r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s<=127)e+=1;else if(s<=2047)e+=2;else if((s&63488)!==55296)e+=3;else{let i=n+1;i===r||s>=56320||(t.charCodeAt(i)&64512)!==56320?e+=3:(n=i,e+=4)}}return e}function ml(t,e,r){let n=t.length;r==null&&(r=0),e===void 0&&(e=new Uint8Array(Yw(t)+r));let s=r;for(let i=0;i<n;i+=1){let o=t.charCodeAt(i);if(o<=127)e[s++]=o;else if(o<=2047)e[s++]=192|(o&1984)>>6,e[s++]=128|o&63;else if((o&63488)!==55296)e[s++]=224|(o&61440)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63;else{let a=i+1;if(a===n||o>=56320)e[s++]=239,e[s++]=191,e[s++]=189;else{let u=t.charCodeAt(a);(u&64512)!==56320?(e[s++]=239,e[s++]=191,e[s++]=189):(i=a,o=65536|(o&1023)<<10|u&1023,e[s++]=240|(o&1835008)>>18,e[s++]=128|(o&258048)>>12,e[s++]=128|(o&4032)>>6,e[s++]=128|o&63)}}}return ml.bytes=s-r,e}ml.bytes=0;function yl(t,e,r){let n="";e==null&&(e=0),r==null&&(r=t.length);for(let s=e;s<r;){let i=t[s++],o;if(i<=128)o=i;else if(i>191&&i<224)o=(i&31)<<6|t[s++]&63;else if(i>239&&i<365){o=((i&7)<<18|(t[s++]&63)<<12|(t[s++]&63)<<6|t[s++]&63)-65536;let a=55296|o>>10&1023;n+=String.fromCharCode(a),o=56320|o&1023}else o=(i&15)<<12|(t[s++]&63)<<6|t[s++]&63;n+=String.fromCharCode(o)}return yl.bytes=r-e,n}yl.bytes=0;var ha=t=>t instanceof Uint8Array;function _o(t){return typeof t=="string"?Yw(t):t.byteLength}function p0(t){return t instanceof Uint8Array?t:Array.isArray(t)?new Uint8Array(t):ml(t)}function h0(t,e,r){if(typeof e!="string")throw new Error("unknown input type");return ml(e,t,r),ml.bytes}var Nf={},yB=new Array(255);for(let t=0;t<=15;t+=1){let e=t.toString(16),r=e.toUpperCase();for(let n=0;n<=15;n+=1){let s=n.toString(16),i=s.toUpperCase(),o=t<<4|n,a=`${e}${s}`;yB[o]=a,Nf[a]=o,Nf[`${r}${s}`]=o,Nf[`${e}${i}`]=o,Nf[`${r}${i}`]=o}}function gB(t,e,r){let n="";for(let s=e;s<r;){let i=t[s++];n+=yB[i]}return n}function Zw(t){return t.length>>>1}function bB(t,e,r,n){let s=0;for(;r<n;){let i=e.substr(s,2),o=Nf[i];if(o===void 0)return;t[r++]=o,s+=2}return t}var MG=Math.pow(2,24),jG=Math.pow(2,16),qG=Math.pow(2,8),ws=(t,e)=>t[e]*MG+t[e+1]*jG+t[e+2]*qG+t[e+3],He=(t,e)=>t[e]<<8|t[e+1],Es=(t,e,r)=>(e=+e,t[r+3]=e,e=e>>>8,t[r+2]=e,e=e>>>8,t[r+1]=e,e=e>>>8,t[r]=e,r+4),Oe=(t,e,r)=>(t[r]=e>>8,t[r+1]=e&255,r+2);function On(t,e,r,n,s){return r<0&&(n-=r,r=0),n<0&&(n=0),s<0?new Uint8Array(0):r>=e.length||n>=s?0:LG(t,e,r,n,s)}function LG(t,e,r,n,s){s-n>e.length-r&&(s=n+e.length-r);let i=s-n,o=t.length-n;return i>o&&(i=o),(n!==0||s<t.length)&&(t=new Uint8Array(t.buffer,t.byteOffset+n,i)),e.set(t,r),i}var VG=0,vB=32768,eE=32768,KG=~eE,EB=32768,HG=~EB;function Nt({bytes:t=0,encode:e,decode:r,encodingLength:n}){return e.bytes=t,r.bytes=t,{encode:e,decode:r,encodingLength:n||(()=>t)}}var be=Nt({encode(t,e,r){e||(e=new Uint8Array(be.encodingLength(t))),r||(r=0);let n=r,s=t.replace(/^\.|\.$/gm,"");if(s.length){let i=s.split(".");for(let o=0;o<i.length;o++){let a=h0(e,i[o],r+1);e[r]=a,r+=a+1}}return e[r++]=0,be.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=[],n=e,s=0,i=0,o=!1;for(;;){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");let a=t[e++];if(i+=o?0:1,a===0)break;if(a&192)if((a&192)===192){if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");let u=He(t,e-1)-49152;if(u>=n)throw new Error("Cannot decode name (bad pointer)");e=u,n=u,i+=o?0:1,o=!0}else throw new Error("Cannot decode name (bad label)");else{if(e+a>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=a+1,s>254)throw new Error("Cannot decode name (name too long)");r.push(yl(t,e,e+a)),e+=a,i+=o?0:a}}return be.decode.bytes=i,r.length===0?".":r.join(".")},encodingLength(t){return t==="."||t===".."?1:_o(t.replace(/^\.|\.$/gm,""))+2}}),Ar=Nt({encode(t,e,r){e||(e=new Uint8Array(Ar.encodingLength(t))),r||(r=0);let n=h0(e,t,r+1);return e[r]=n,Ar.encode.bytes=n+1,e},decode(t,e){e||(e=0);let r=t[e],n=yl(t,e+1,e+1+r);return Ar.decode.bytes=r+1,n},encodingLength(t){return _o(t)+1}}),gl=Nt({bytes:12,encode(t,e,r){e||(e=new Uint8Array(gl.encodingLength(t))),r||(r=0);let n=(t.flags||0)&32767,s=t.type==="response"?vB:VG;return Oe(e,t.id||0,r),Oe(e,n|s,r+2),Oe(e,t.questions.length,r+4),Oe(e,t.answers.length,r+6),Oe(e,t.authorities.length,r+8),Oe(e,t.additionals.length,r+10),e},decode(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");let r=He(t,e+2);return{id:He(t,e),type:r&vB?"response":"query",flags:r&32767,flag_qr:(r>>15&1)===1,opcode:hB(r>>11&15),flag_aa:(r>>10&1)===1,flag_tc:(r>>9&1)===1,flag_rd:(r>>8&1)===1,flag_ra:(r>>7&1)===1,flag_z:(r>>6&1)===1,flag_ad:(r>>5&1)===1,flag_cd:(r>>4&1)===1,rcode:pB(r&15),questions:new Array(He(t,e+4)),answers:new Array(He(t,e+6)),authorities:new Array(He(t,e+8)),additionals:new Array(He(t,e+10))}},encodingLength(){return 12}}),y0=Nt({encode(t,e,r){e||(e=new Uint8Array(y0.encodingLength(t))),r||(r=0);let n=t.length;return Oe(e,n,r),On(t,e,r+2,0,n),y0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=He(t,e),n=t.slice(e+2,e+2+r);return y0.decode.bytes=r+2,n},encodingLength(t){return t.length+2}}),g0=Nt({encode(t,e,r){return e||(e=new Uint8Array(g0.encodingLength(t))),r||(r=0),be.encode(t,e,r+2),Oe(e,be.encode.bytes,r),g0.encode.bytes=be.encode.bytes+2,e},decode(t,e){e||(e=0);let r=He(t,e),n=be.decode(t,e+2);return g0.decode.bytes=r+2,n},encodingLength(t){return be.encodingLength(t)+2}}),b0=Nt({encode(t,e,r){e||(e=new Uint8Array(b0.encodingLength(t))),r||(r=0);let n=r;return r+=2,be.encode(t.mname,e,r),r+=be.encode.bytes,be.encode(t.rname,e,r),r+=be.encode.bytes,Es(e,t.serial||0,r),r+=4,Es(e,t.refresh||0,r),r+=4,Es(e,t.retry||0,r),r+=4,Es(e,t.expire||0,r),r+=4,Es(e,t.minimum||0,r),r+=4,Oe(e,r-n-2,n),b0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mname=be.decode(t,e),e+=be.decode.bytes,n.rname=be.decode(t,e),e+=be.decode.bytes,n.serial=ws(t,e),e+=4,n.refresh=ws(t,e),e+=4,n.retry=ws(t,e),e+=4,n.expire=ws(t,e),e+=4,n.minimum=ws(t,e),e+=4,b0.decode.bytes=e-r,n},encodingLength(t){return 22+be.encodingLength(t.mname)+be.encodingLength(t.rname)}}),v0=Nt({encode(t,e,r){Array.isArray(t)||(t=[t]);for(let s=0;s<t.length;s++)if(typeof t[s]=="string"&&(t[s]=p0(t[s])),!ha(t[s]))throw new Error("Must be a Buffer");e||(e=new Uint8Array(v0.encodingLength(t))),r||(r=0);let n=r;return r+=2,t.forEach(function(s){e[r++]=s.length,On(s,e,r,0,s.length),r+=s.length}),Oe(e,r-n-2,n),v0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=He(t,e);e+=2;let s=[];for(;n>0;){let i=t[e++];if(--n,n<i)throw new Error("Buffer overflow");s.push(t.slice(e,e+i)),e+=i,n-=i}return v0.decode.bytes=e-r,s},encodingLength(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach(function(r){typeof r=="string"?e+=_o(r)+1:e+=r.length+1}),e}}),w0=Nt({encode(t,e,r){e||(e=new Uint8Array(w0.encodingLength(t))),r||(r=0),typeof t=="string"&&(t=p0(t)),t||(t=new Uint8Array(0));let n=r;r+=2;let s=t.length;return On(t,e,r,0,s),r+=s,Oe(e,r-n-2,n),w0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=He(t,e);e+=2;let s=t.slice(e,e+n);return e+=n,w0.decode.bytes=e-r,s},encodingLength(t){return t?(ha(t)?t.length:_o(t))+2:2}}),E0=Nt({encode(t,e,r){e||(e=new Uint8Array(E0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Ar.encode(t.cpu,e,r),r+=Ar.encode.bytes,Ar.encode(t.os,e,r),r+=Ar.encode.bytes,Oe(e,r-n-2,n),E0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.cpu=Ar.decode(t,e),e+=Ar.decode.bytes,n.os=Ar.decode(t,e),e+=Ar.decode.bytes,E0.decode.bytes=e-r,n},encodingLength(t){return Ar.encodingLength(t.cpu)+Ar.encodingLength(t.os)+2}}),wl=Nt({encode(t,e,r){return e||(e=new Uint8Array(wl.encodingLength(t))),r||(r=0),be.encode(t,e,r+2),Oe(e,be.encode.bytes,r),wl.encode.bytes=be.encode.bytes+2,e},decode(t,e){e||(e=0);let r=be.decode(t,e+2);return wl.decode.bytes=be.decode.bytes+2,r},encodingLength(t){return be.encodingLength(t)+2}}),_0=Nt({encode(t,e,r){e||(e=new Uint8Array(_0.encodingLength(t))),r||(r=0),Oe(e,t.priority||0,r+2),Oe(e,t.weight||0,r+4),Oe(e,t.port||0,r+6),be.encode(t.target,e,r+8);let n=be.encode.bytes+6;return Oe(e,n,r),_0.encode.bytes=n+2,e},decode(t,e){e||(e=0);let r=He(t,e),n={};return n.priority=He(t,e+2),n.weight=He(t,e+4),n.port=He(t,e+6),n.target=be.decode(t,e+8),_0.decode.bytes=r+2,n},encodingLength(t){return 8+be.encodingLength(t.target)}}),ma=Nt({encode(t,e,r){let n=ma.encodingLength(t);return e||(e=new Uint8Array(ma.encodingLength(t))),r||(r=0),t.issuerCritical&&(t.flags=ma.ISSUER_CRITICAL),Oe(e,n-2,r),r+=2,e[r]=t.flags||0,r+=1,Ar.encode(t.tag,e,r),r+=Ar.encode.bytes,h0(e,t.value,r),r+=_o(t.value),ma.encode.bytes=n,e},decode(t,e){e||(e=0);let r=He(t,e);e+=2;let n=e,s={};return s.flags=t[e],e+=1,s.tag=Ar.decode(t,e),e+=Ar.decode.bytes,s.value=yl(t,e,n+r),s.issuerCritical=!!(s.flags&ma.ISSUER_CRITICAL),ma.decode.bytes=r+2,s},encodingLength(t){return Ar.encodingLength(t.tag)+Ar.encodingLength(t.value)+2}});ma.ISSUER_CRITICAL=128;var S0=Nt({encode(t,e,r){e||(e=new Uint8Array(S0.encodingLength(t))),r||(r=0);let n=r;return r+=2,Oe(e,t.preference||0,r),r+=2,be.encode(t.exchange,e,r),r+=be.encode.bytes,Oe(e,r-n-2,n),S0.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.preference=He(t,e),e+=2,n.exchange=be.decode(t,e),e+=be.decode.bytes,S0.decode.bytes=e-r,n},encodingLength(t){return 4+be.encodingLength(t.exchange)}}),_B=Nt({encode(t,e,r){return e||(e=new Uint8Array(_B.encodingLength(t))),r||(r=0),Oe(e,4,r),r+=2,ki.encode(t,e,r),e},decode(t,e){return e||(e=0),e+=2,ki.decode(t,e)},bytes:6}),D0=Nt({encode(t,e,r){return e||(e=new Uint8Array(D0.encodingLength(t))),r||(r=0),Oe(e,16,r),r+=2,Eo.encode(t,e,r),D0.encode.bytes=18,e},decode(t,e){e||(e=0),e+=2;let r=Eo.decode(t,e);return D0.decode.bytes=18,r},bytes:18}),wB=t=>new Uint8Array(t),So=Nt({encode(t,e,r){e||(e=new Uint8Array(So.encodingLength(t))),r||(r=0);let n=r,s=Xw(t.code);if(Oe(e,s,r),r+=2,t.data)Oe(e,t.data.length,r),r+=2,On(t.data,e,r),r+=t.data.length;else switch(s){case 8:{let i=t.sourcePrefixLength||0,o=t.family||lB(t.ip,wB),a=dB(t.ip,wB),u=Math.ceil(i/8);Oe(e,u+4,r),r+=2,Oe(e,o,r),r+=2,e[r++]=i,e[r++]=t.scopePrefixLength||0,On(a,e,r,0,u),r+=u}break;case 11:t.timeout?(Oe(e,2,r),r+=2,Oe(e,t.timeout,r),r+=2):(Oe(e,0,r),r+=2);break;case 12:{let i=t.length||0;Oe(e,i,r),r+=2,e.fill(0,r,r+i),r+=i}break;case 14:{let i=t.tags.length*2;Oe(e,i,r),r+=2;for(let o of t.tags)Oe(e,o,r),r+=2}break;default:throw new Error(`Unknown roption code: ${t.code}`)}return So.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={};r.code=He(t,e),r.type=mB(r.code),e+=2;let n=He(t,e);switch(e+=2,r.data=t.slice(e,e+n),r.code){case 8:r.family=He(t,e),e+=2,r.sourcePrefixLength=t[e++],r.scopePrefixLength=t[e++];{let s=new Uint8Array(r.family===1?4:16);On(t,s,0,e,e+n-4),r.ip=fB(s)}break;case 11:n>0&&(r.timeout=He(t,e),e+=2);break;case 14:r.tags=[];for(let s=0;s<n;s+=2)r.tags.push(He(t,e)),e+=2}return So.decode.bytes=n+4,r},encodingLength(t){if(t.data)return t.data.length+4;switch(Xw(t.code)){case 8:{let r=t.sourcePrefixLength||0;return Math.ceil(r/8)+8}case 11:return typeof t.timeout=="number"?6:4;case 12:return t.length+4;case 14:return 4+t.tags.length*2}throw new Error(`Unknown roption code: ${t.code}`)}}),ya=Nt({encode(t,e,r){e||(e=new Uint8Array(ya.encodingLength(t))),r||(r=0);let n=r,s=vl(t,So);return Oe(e,s,r),r=Vf(t,So,e,r+2),ya.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r=e,n=[],s=He(t,e);e+=2;let i=0;for(;s>0;)n[i++]=So.decode(t,e),e+=So.decode.bytes,s-=So.decode.bytes;return ya.decode.bytes=e-r,n},encodingLength(t){return 2+vl(t||[],So)}}),_s=Nt({encode(t,e,r){e||(e=new Uint8Array(_s.encodingLength(t))),r||(r=0);let n=r,s=t.key;if(!ha(s))throw new Error("Key must be a Buffer");return r+=2,Oe(e,t.flags,r),r+=2,e[r]=_s.PROTOCOL_DNSSEC,r+=1,e[r]=t.algorithm,r+=1,On(s,e,r,0,s.length),r+=s.length,_s.encode.bytes=r-n,Oe(e,_s.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=He(t,e);if(e+=2,n.flags=He(t,e),e+=2,t[e]!==_s.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,n.algorithm=t[e],e+=1,n.key=t.slice(e,r+s+2),e+=n.key.length,_s.decode.bytes=e-r,n},encodingLength(t){return 6+_o(t.key)}});_s.PROTOCOL_DNSSEC=3;_s.ZONE_KEY=128;_s.SECURE_ENTRYPOINT=32768;var Mf=Nt({encode(t,e,r){e||(e=new Uint8Array(Mf.encodingLength(t))),r||(r=0);let n=r,s=t.signature;if(!ha(s))throw new Error("Signature must be a Buffer");return r+=2,Oe(e,hl(t.typeCovered),r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.labels,r+=1,Es(e,t.originalTTL,r),r+=4,Es(e,t.expiration,r),r+=4,Es(e,t.inception,r),r+=4,Oe(e,t.keyTag,r),r+=2,be.encode(t.signersName,e,r),r+=be.encode.bytes,On(s,e,r,0,s.length),r+=s.length,Mf.encode.bytes=r-n,Oe(e,Mf.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=He(t,e);return e+=2,n.typeCovered=$f(He(t,e)),e+=2,n.algorithm=t[e],e+=1,n.labels=t[e],e+=1,n.originalTTL=ws(t,e),e+=4,n.expiration=ws(t,e),e+=4,n.inception=ws(t,e),e+=4,n.keyTag=He(t,e),e+=2,n.signersName=be.decode(t,e),e+=be.decode.bytes,n.signature=t.slice(e,r+s+2),e+=n.signature.length,Mf.decode.bytes=e-r,n},encodingLength(t){return 20+be.encodingLength(t.signersName)+_o(t.signature)}}),jf=Nt({encode(t,e,r){e||(e=new Uint8Array(jf.encodingLength(t))),r||(r=0);let n=r;return r+=2,be.encode(t.mbox||".",e,r),r+=be.encode.bytes,be.encode(t.txt||".",e,r),r+=be.encode.bytes,jf.encode.bytes=r-n,Oe(e,jf.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};return e+=2,n.mbox=be.decode(t,e)||".",e+=be.decode.bytes,n.txt=be.decode(t,e)||".",e+=be.decode.bytes,jf.decode.bytes=e-r,n},encodingLength(t){return 2+be.encodingLength(t.mbox||".")+be.encodingLength(t.txt||".")}}),Kn=Nt({encode(t,e,r){e||(e=new Uint8Array(Kn.encodingLength(t))),r||(r=0);let n=r,s=[];for(let i=0;i<t.length;i++){let o=hl(t[i]);s[o>>8]===void 0&&(s[o>>8]=[]),s[o>>8][o>>3&31]|=1<<7-(o&7)}for(let i=0;i<s.length;i++)if(s[i]!==void 0){let o=p0(s[i]);e[r]=i,r+=1,e[r]=o.length,r+=1,On(o,e,r,0,o.length),r+=o.length}return Kn.encode.bytes=r-n,e},decode(t,e,r){e||(e=0);let n=e,s=[];for(;e-n<r;){let i=t[e];e+=1;let o=t[e];e+=1;for(let a=0;a<o;a++){let u=t[e+a];for(let c=0;c<8;c++)if(u&1<<7-c){let l=$f(i<<8|a<<3|c);s.push(l)}}e+=o}return Kn.decode.bytes=e-n,s},encodingLength(t){let e=[];for(let n=0;n<t.length;n++){let s=hl(t[n]);e[s>>8]=Math.max(e[s>>8]||0,s&255)}let r=0;for(let n=0;n<e.length;n++)e[n]!==void 0&&(r+=2+Math.ceil((e[n]+1)/8));return r}}),qf=Nt({encode(t,e,r){e||(e=new Uint8Array(qf.encodingLength(t))),r||(r=0);let n=r;return r+=2,be.encode(t.nextDomain,e,r),r+=be.encode.bytes,Kn.encode(t.rrtypes,e,r),r+=Kn.encode.bytes,qf.encode.bytes=r-n,Oe(e,qf.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=He(t,e);return e+=2,n.nextDomain=be.decode(t,e),e+=be.decode.bytes,n.rrtypes=Kn.decode(t,e,s-(e-r)),e+=Kn.decode.bytes,qf.decode.bytes=e-r,n},encodingLength(t){return 2+be.encodingLength(t.nextDomain)+Kn.encodingLength(t.rrtypes)}}),Lf=Nt({encode(t,e,r){e||(e=new Uint8Array(Lf.encodingLength(t))),r||(r=0);let n=r,s=t.salt;if(!ha(s))throw new Error("salt must be a Buffer");let i=t.nextDomain;if(!ha(i))throw new Error("nextDomain must be a Buffer");return r+=2,e[r]=t.algorithm,r+=1,e[r]=t.flags,r+=1,Oe(e,t.iterations,r),r+=2,e[r]=s.length,r+=1,On(s,e,r,0,s.length),r+=s.length,e[r]=i.length,r+=1,On(i,e,r,0,i.length),r+=i.length,Kn.encode(t.rrtypes,e,r),r+=Kn.encode.bytes,Lf.encode.bytes=r-n,Oe(e,Lf.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=He(t,e);e+=2,n.algorithm=t[e],e+=1,n.flags=t[e],e+=1,n.iterations=He(t,e),e+=2;let i=t[e];e+=1,n.salt=t.slice(e,e+i),e+=i;let o=t[e];return e+=1,n.nextDomain=t.slice(e,e+o),e+=o,n.rrtypes=Kn.decode(t,e,s-(e-r)),e+=Kn.decode.bytes,Lf.decode.bytes=e-r,n},encodingLength(t){return 8+t.salt.length+t.nextDomain.length+Kn.encodingLength(t.rrtypes)}}),Uf=Nt({encode(t,e,r){e||(e=new Uint8Array(Uf.encodingLength(t))),r||(r=0);let n=r,s=t.digest;if(!ha(s))throw new Error("Digest must be a Buffer");return r+=2,Oe(e,t.keyTag,r),r+=2,e[r]=t.algorithm,r+=1,e[r]=t.digestType,r+=1,On(s,e,r,0,s.length),r+=s.length,Uf.encode.bytes=r-n,Oe(e,Uf.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={},s=He(t,e);return e+=2,n.keyTag=He(t,e),e+=2,n.algorithm=t[e],e+=1,n.digestType=t[e],e+=1,n.digest=t.slice(e,r+s+2),e+=n.digest.length,Uf.decode.bytes=e-r,n},encodingLength(t){return 6+_o(t.digest)}}),bl=Nt({encode(t,e,r){e||(e=new Uint8Array(bl.encodingLength(t))),r||(r=0);let n=r;r+=2,e[r]=t.algorithm,r+=1,e[r]=t.hash,r+=1;let s=Zw(t.fingerprint),i=tE(t.hash);if(s!==i)throw new Error(`Invalid length of fingerprint "${t.fingerprint}" for hashType=${t.hash}: ${s} != ${i}`);return bB(e,t.fingerprint,r,r+=s),bl.encode.bytes=r-n,Oe(e,bl.encode.bytes-2,n),e},decode(t,e){e||(e=0);let r=e,n={};e+=2,n.algorithm=t[e],e+=1,n.hash=t[e],e+=1;let s=tE(n.hash);return n.fingerprint=gB(t,e,e+s),e+=s,bl.decode.bytes=e-r,n},encodingLength(t){return 4+Zw(t.fingerprint)}});function tE(t){if(t===1)return 20;if(t===2)return 32;throw new Error(`Invalid hashType=${t}, supported=1,2`)}bl.getFingerprintLengthForHashType=tE;function Qw(t){switch(t.toUpperCase()){case"A":return _B;case"PTR":return wl;case"CNAME":return wl;case"DNAME":return wl;case"TXT":return v0;case"NULL":return w0;case"AAAA":return D0;case"SRV":return _0;case"HINFO":return E0;case"CAA":return ma;case"NS":return g0;case"SOA":return b0;case"MX":return S0;case"OPT":return ya;case"DNSKEY":return _s;case"RRSIG":return Mf;case"RP":return jf;case"NSEC":return qf;case"NSEC3":return Lf;case"SSHFP":return bl;case"DS":return Uf}return y0}var li=Nt({encode(t,e,r){e||(e=new Uint8Array(li.encodingLength(t))),r||(r=0);let n=r;if(be.encode(t.name,e,r),r+=be.encode.bytes,Oe(e,hl(t.type),r),t.type.toUpperCase()==="OPT"){if(t.name!==".")throw new Error("OPT name must be root.");Oe(e,t.udpPayloadSize||4096,r+2),e[r+4]=t.extendedRcode||0,e[r+5]=t.ednsVersion||0,Oe(e,t.flags||0,r+6),r+=8,ya.encode(t.options||[],e,r),r+=ya.encode.bytes}else{let s=Gw(t.class===void 0?"IN":t.class);t.flush&&(s|=eE),Oe(e,s,r+2),Es(e,t.ttl||0,r+4),r+=8;let i=Qw(t.type);i.encode(t.data,e,r),r+=i.encode.bytes}return li.encode.bytes=r-n,e},decode(t,e){e||(e=0);let r={},n=e;if(r.name=be.decode(t,e),e+=be.decode.bytes,r.type=$f(He(t,e)),r.type==="OPT")r.udpPayloadSize=He(t,e+2),r.extendedRcode=t[e+4],r.ednsVersion=t[e+5],r.flags=He(t,e+6),r.flag_do=(r.flags>>15&1)===1,r.options=ya.decode(t,e+8),e+=8+ya.decode.bytes;else{let s=He(t,e+2);r.ttl=ws(t,e+4),r.class=Jw(s&KG),r.flush=!!(s&eE);let i=Qw(r.type);r.data=i.decode(t,e+8),e+=8+i.decode.bytes}return li.decode.bytes=e-n,r},encodingLength(t){let e=t.data!==null&&t.data!==void 0?t.data:t.options;return be.encodingLength(t.name)+8+Qw(t.type).encodingLength(e)}}),El=Nt({encode(t,e,r){e||(e=new Uint8Array(El.encodingLength(t))),r||(r=0);let n=r;return be.encode(t.name,e,r),r+=be.encode.bytes,Oe(e,hl(t.type),r),r+=2,Oe(e,Gw(t.class===void 0?"IN":t.class),r),r+=2,El.encode.bytes=r-n,t},decode(t,e){e||(e=0);let r=e,n={};return n.name=be.decode(t,e),e+=be.decode.bytes,n.type=$f(He(t,e)),e+=2,n.class=Jw(He(t,e)),e+=2,!!(n.class&EB)&&(n.class&=HG),El.decode.bytes=e-r,n},encodingLength(t){return be.encodingLength(t.name)+4}});var SB=1024;var Kr={encode:function(t,e,r){let n=!e;n&&(e=new Uint8Array(WG(t))),r||(r=0);let s=r;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),gl.encode(t,e,r),r+=gl.encode.bytes,r=Vf(t.questions,El,e,r),r=Vf(t.answers,li,e,r),r=Vf(t.authorities,li,e,r),r=Vf(t.additionals,li,e,r),Kr.encode.bytes=r-s,n&&Kf.bytes!==e.length?e.slice(0,Kf.bytes):e},decode:function(t,e){e||(e=0);let r=e,n=gl.decode(t,e);return e+=gl.decode.bytes,e=m0(n.questions,El,t,e),e=m0(n.answers,li,t,e),e=m0(n.authorities,li,t,e),e=m0(n.additionals,li,t,e),Kr.decode.bytes=e-r,n},encodingLength:function(t){return gl.encodingLength(t)+vl(t.questions||[],El)+vl(t.answers||[],li)+vl(t.authorities||[],li)+vl(t.additionals||[],li)}};Kr.encode.bytes=0;Kr.decode.bytes=0;function A0(t,e){if(t.questions)throw new Error("Only one .question object expected instead of a .questions array!");let r=Object.assign({type:e},t);return r.question&&(r.questions=[r.question],delete r.question),r}var x0={encode:function(t,e,r){return e=Kr.encode(A0(t,"query"),e,r),x0.encode.bytes=Kr.encode.bytes,e},decode:function(t,e){let r=Kr.decode(t,e);return x0.decode.bytes=Kr.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Kr.encodingLength(A0(t,"query"))}};x0.encode.bytes=0;x0.decode.bytes=0;var C0={encode:function(t,e,r){return e=Kr.encode(A0(t,"response"),e,r),C0.encode.bytes=Kr.encode.bytes,e},decode:function(t,e){let r=Kr.decode(t,e);return C0.decode.bytes=Kr.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(t){return Kr.encodingLength(A0(t,"response"))}};C0.encode.bytes=0;C0.decode.bytes=0;var Kf=Kr.encode,P0=Kr.decode,WG=Kr.encodingLength;function DB(t){let e=Kf(t),r=new Uint8Array(2+e.byteLength);return Oe(r,e.byteLength),On(e,r,2,0,e.length),DB.bytes=r.byteLength,r}DB.bytes=0;function AB(t){let e=He(t,0);if(t.byteLength<e+2)return null;let r=P0(t.slice(2));return AB.bytes=P0.bytes,r}AB.bytes=0;function vl(t,e){let r=0;for(let n=0;n<t.length;n++)r+=e.encodingLength(t[n]);return r}function Vf(t,e,r,n){for(let s=0;s<t.length;s++)e.encode(t[s],r,n),n+=e.encode.bytes;return n}function m0(t,e,r,n){for(let s=0;s<t.length;s++)t[s]=e.decode(r,n),n+=e.decode.bytes;return n}var xB=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},di=class{static getSigningMethod(e){return xB(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement getSigningMethod()")})}static resolve(e,r){return xB(this,void 0,void 0,function*(){throw new Error("Not implemented: Classes extending DidMethod must implement resolve()")})}};var hn=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},CB=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r},PB="https://diddht.tbddev.org",zG=0,_l=7200,O0=";",pn=",",rE;(function(t){t[t.Discoverable=0]="Discoverable",t[t.Organization=1]="Organization",t[t.Government=2]="Government",t[t.Corporation=3]="Corporation",t[t.LocalBusiness=4]="LocalBusiness",t[t.SoftwarePackage=5]="SoftwarePackage",t[t.WebApp=6]="WebApp",t[t.FinancialInstitution=7]="FinancialInstitution"})(rE||(rE={}));var Ss;(function(t){t[t.Ed25519=0]="Ed25519",t[t.secp256k1=1]="secp256k1",t[t.secp256r1=2]="secp256r1"})(Ss||(Ss={}));var nE;(function(t){t.authentication="auth",t.assertionMethod="asm",t.capabilityDelegation="del",t.capabilityInvocation="inv",t.keyAgreement="agm"})(nE||(nE={}));var OB={Ed25519:Ss.Ed25519,ES256K:Ss.secp256k1,ES256:Ss.secp256r1,"P-256":Ss.secp256r1,secp256k1:Ss.secp256k1,secp256r1:Ss.secp256r1},ku=class t extends di{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o,a,u,c,l,d,p,f;return hn(this,void 0,void 0,function*(){if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(D=>!(D.algorithm in OB)))throw new Error("One or more verification method algorithms are not supported");let h=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(D=>"id"in D).map(D=>D.id);if(h&&h.length!==new Set(h).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(D=>!D.id||!D.type||!D.serviceEndpoint))throw new Error("One or more services are missing required properties");let y=yield e.generateKey({algorithm:"Ed25519"}),g=yield e.getPublicKey({keyUri:y}),S=yield rn.identityKeyToIdentifier({identityKey:g}),A=Object.assign(Object.assign({id:S},r.alsoKnownAs&&{alsoKnownAs:r.alsoKnownAs}),r.controllers&&{controller:r.controllers}),w=[...(o=r.verificationMethods)!==null&&o!==void 0?o:[]];w?.some(D=>{var O;return((O=D.id)===null||O===void 0?void 0:O.split("#").pop())==="0"})||w.unshift({algorithm:"Ed25519",id:"0",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]});for(let D of w){let O=D.id&&D.id.split("#").pop()==="0"?y:yield e.generateKey({algorithm:D.algorithm}),B=yield e.getPublicKey({keyUri:O}),F=(u=(a=D.id)!==null&&a!==void 0?a:B.kid)!==null&&u!==void 0?u:yield Xe({jwk:B});F=`${S}#${Cn(F)}`,(c=A.verificationMethod)!==null&&c!==void 0||(A.verificationMethod=[]),A.verificationMethod.push({id:F,type:"JsonWebKey",controller:(l=D.controller)!==null&&l!==void 0?l:S,publicKeyJwk:B});for(let N of(d=D.purposes)!==null&&d!==void 0?d:[])A[N]||(A[N]=[]),A[N].push(F)}(p=r.services)===null||p===void 0||p.forEach(D=>{var O;(O=A.service)!==null&&O!==void 0||(A.service=[]),D.id=`${S}#${D.id.split("#").pop()}`,A.service.push(D)});let P=new Pn({uri:S,document:A,metadata:Object.assign({published:!1},r.types&&{types:r.types}),keyManager:e});if(!((f=r.publish)!==null&&f!==void 0)||f){let D=yield t.publish({did:P,gatewayUri:r.gatewayUri});P.metadata=D.didDocumentMetadata}return P})}static import({portableDid:e,keyManager:r=new Ir}){var n;return hn(this,void 0,void 0,function*(){let s=tt.parse(e.uri);if(s?.method!==t.methodName)throw new _e(ge.MethodNotSupported,"Method not supported");let i=yield Pn.import({portableDid:e,keyManager:r});if(!(!((n=i.document.verificationMethod)===null||n===void 0)&&n.some(o=>{var a;return((a=o.id)===null||a===void 0?void 0:a.split("#").pop())==="0"})))throw new _e(ge.InvalidDidDocument,"DID document must contain an Identity Key");return i})}static getSigningMethod({didDocument:e,methodId:r="#0"}){var n;return hn(this,void 0,void 0,function*(){let s=tt.parse(e.id);if(s&&s.method!==this.methodName)throw new _e(ge.MethodNotSupported,`Method not supported: ${s.method}`);let i=(n=e.verificationMethod)===null||n===void 0?void 0:n.find(o=>{var a,u;return Cn(o.id)===((a=Cn(r))!==null&&a!==void 0?a:Cn((u=e.assertionMethod)===null||u===void 0?void 0:u[0]))});if(!(i&&i.publicKeyJwk))throw new _e(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static publish({did:e,gatewayUri:r=PB}){return hn(this,void 0,void 0,function*(){return yield B0.put({did:e,gatewayUri:r})})}static resolve(e,r={}){var n;return hn(this,void 0,void 0,function*(){let s=(n=r?.gatewayUri)!==null&&n!==void 0?n:PB;try{yield rn.identifierToIdentityKey({didUri:e});let{didDocument:i,didDocumentMetadata:o}=yield B0.get({didUri:e,gatewayUri:s});return Object.assign(Object.assign({},er),{didDocument:i,didDocumentMetadata:o})}catch(i){if(!(i instanceof _e))throw new Error(i);return Object.assign(Object.assign({},er),{didResolutionMetadata:Object.assign({error:i.code},i.message&&{errorMessage:i.message})})}})}};ku.methodName="dht";var B0=class t{static get({didUri:e,gatewayUri:r}){return hn(this,void 0,void 0,function*(){let n=rn.identifierToIdentityKeyBytes({didUri:e}),s=yield t.pkarrGet({gatewayUri:r,publicKeyBytes:n}),i=yield rn.parseBep44GetMessage({bep44Message:s}),o=yield t.fromDnsPacket({didUri:e,dnsPacket:i});return o.didDocumentMetadata.versionId=s.seq.toString(),o})}static put({did:e,gatewayUri:r}){return hn(this,void 0,void 0,function*(){let n=yield t.toDnsPacket({didDocument:e.document,didMetadata:e.metadata}),s=yield rn.createBep44PutMessage({dnsPacket:n,publicKeyBytes:rn.identifierToIdentityKeyBytes({didUri:e.uri}),signer:yield e.getSigner({methodId:"0"})}),i=yield t.pkarrPut({gatewayUri:r,bep44Message:s});return{didDocument:e.document,didDocumentMetadata:Object.assign(Object.assign({},e.metadata),{published:i,versionId:s.seq.toString()}),didRegistrationMetadata:{}}})}static pkarrGet({gatewayUri:e,publicKeyBytes:r}){return hn(this,void 0,void 0,function*(){let n=ce.uint8Array(r).toBase32Z(),s=new URL(n,e).href,i;try{if(i=yield fetch(s,{method:"GET"}),!i.ok)throw new _e(ge.NotFound,`Pkarr record not found for: ${n}`)}catch(u){throw u instanceof _e?u:new _e(ge.InternalError,`Failed to fetch Pkarr record: ${u.message}`)}let o=yield i.arrayBuffer();if(!o)throw new _e(ge.NotFound,`Pkarr record not found for: ${n}`);if(o.byteLength<72)throw new _e(ge.InvalidDidDocumentLength,`Pkarr response must be at least 72 bytes but got: ${o.byteLength}`);if(o.byteLength>1072)throw new _e(ge.InvalidDidDocumentLength,`Pkarr response exceeds 1000 byte limit: ${o.byteLength}`);return{k:r,seq:Number(new DataView(o).getBigUint64(64)),sig:new Uint8Array(o,0,64),v:new Uint8Array(o,72)}})}static pkarrPut({gatewayUri:e,bep44Message:r}){return hn(this,void 0,void 0,function*(){let n=ce.uint8Array(r.k).toBase32Z(),s=new URL(n,e).href,i=new Uint8Array(r.v.length+72);i.set(r.sig,0),new DataView(i.buffer).setBigUint64(r.sig.length,BigInt(r.seq)),i.set(r.v,r.sig.length+8);let o;try{o=yield fetch(s,{method:"PUT",headers:{"Content-Type":"application/octet-stream"},body:i})}catch(a){throw new _e(ge.InternalError,`Failed to put Pkarr record: ${a.message}`)}return o.ok})}static fromDnsPacket({didUri:e,dnsPacket:r}){var n,s,i;return hn(this,void 0,void 0,function*(){let o={id:e},a={published:!0},u=new Map;for(let c of(n=r?.answers)!==null&&n!==void 0?n:[]){if(c.type!=="TXT")continue;let l=c.name.split(".")[0].substring(1);switch(!0){case l.startsWith("aka"):{let d=rn.parseTxtDataToString(c.data);o.alsoKnownAs=d.split(pn);break}case l.startsWith("cnt"):{let d=rn.parseTxtDataToString(c.data);o.controller=d.includes(pn)?d.split(pn):d;break}case l.startsWith("k"):{let{id:d,t:p,k:f,c:h}=rn.parseTxtDataToObject(c.data),y=ce.base64Url(f).toUint8Array(),g=Ss[Number(p)],S=yield rn.keyConverter(g).bytesToPublicKey({publicKeyBytes:y});(s=o.verificationMethod)!==null&&s!==void 0||(o.verificationMethod=[]);let A=`${e}#${d}`;o.verificationMethod.push({id:A,type:"JsonWebKey",controller:h??e,publicKeyJwk:S}),u.set(l,A);break}case l.startsWith("s"):{let d=rn.parseTxtDataToObject(c.data),{id:p,t:f,se:h}=d,y=CB(d,["id","t","se"]),g=h.includes(pn)?h.split(pn):h,S=Object.fromEntries(Object.entries(y).map(([A,w])=>[A,w.includes(pn)?w.split(pn):w]));(i=o.service)!==null&&i!==void 0||(o.service=[]),o.service.push(Object.assign(Object.assign({},S),{id:`${e}#${p}`,type:f,serviceEndpoint:g}));break}case l.startsWith("typ"):{let{id:d}=rn.parseTxtDataToObject(c.data);a.types=d.split(pn).map(p=>Number(p));break}case l.startsWith("did"):{let d=S=>S.split(pn).map(A=>u.get(A)).filter(A=>typeof A=="string"),{auth:p,asm:f,del:h,inv:y,agm:g}=rn.parseTxtDataToObject(c.data);p&&(o.authentication=d(p)),f&&(o.assertionMethod=d(f)),h&&(o.capabilityDelegation=d(h)),y&&(o.capabilityInvocation=d(y)),g&&(o.keyAgreement=d(g));break}}}return{didDocument:o,didDocumentMetadata:a,didResolutionMetadata:{}}})}static toDnsPacket({didDocument:e,didMetadata:r}){var n,s,i,o,a;return hn(this,void 0,void 0,function*(){let u=[],c=new Map,l=[],d=[];if(e.alsoKnownAs&&u.push({type:"TXT",name:"_aka.did.",ttl:_l,data:e.alsoKnownAs.join(pn)}),e.controller){let y=Array.isArray(e.controller)?e.controller.join(pn):e.controller;u.push({type:"TXT",name:"_cnt.did.",ttl:_l,data:y})}for(let[y,g]of(s=(n=e.verificationMethod)===null||n===void 0?void 0:n.entries())!==null&&s!==void 0?s:[]){let S=`k${y}`;d.push(S);let A=g.id.split("#").pop();c.set(A,S);let w=g.publicKeyJwk;if(!(w?.crv&&w.crv in OB))throw new _e(ge.InvalidPublicKeyType,`Verification method '${g.id}' contains an unsupported key type: ${(i=w?.crv)!==null&&i!==void 0?i:"undefined"}`);let P=Ss[w.crv],D=yield rn.keyConverter(w.crv).publicKeyToBytes({publicKey:w}),O=ce.uint8Array(D).toBase64Url(),B=[`id=${A}`,`t=${P}`,`k=${O}`];g.controller!==e.id&&B.push(`c=${g.controller}`),u.push({type:"TXT",name:`_${S}._did.`,ttl:_l,data:B.join(O0)})}(o=e.service)===null||o===void 0||o.forEach((y,g)=>{let S=`s${g}`;l.push(S);let{id:A,type:w,serviceEndpoint:P}=y,D=CB(y,["id","type","serviceEndpoint"]);A=Cn(A),P=Array.isArray(P)?P.join(","):P;let O=Object.entries(Object.assign({id:A,t:w,se:P},D)).map(([B,F])=>`${B}=${F}`);u.push({type:"TXT",name:`_${S}._did.`,ttl:_l,data:O.join(O0)})});let p=[`v=${zG}`];if(d.length&&p.push(`vm=${d.join(pn)}`),Object.keys(Iu).forEach(y=>{var g;let S=(g=e[y])===null||g===void 0?void 0:g.map(A=>c.get(A.split("#").pop()));if(S){let A=nE[y];p.push(`${A}=${S.join(pn)}`)}}),l.length&&p.push(`svc=${l.join(pn)}`),!((a=r.types)===null||a===void 0)&&a.length){let g=r.types.map(S=>typeof S=="string"?rE[S]:S);u.push({type:"TXT",name:"_typ._did.",ttl:_l,data:`id=${g.join(pn)}`})}u.push({type:"TXT",name:"_did.",ttl:_l,data:p.join(O0)});let[,,f]=e.id.split(":");return u.forEach(y=>y.name+=f),{id:0,type:"response",flags:SB,answers:u}})}},rn=class t{static createBep44PutMessage({dnsPacket:e,publicKeyBytes:r,signer:n}){return hn(this,void 0,void 0,function*(){let s=Math.ceil(Date.now()/1e3),i=Kf(e),o=zw.encode({seq:s,v:i}).subarray(1,-1);if(o.length>1e3)throw new _e(ge.InvalidDidDocumentLength,`DNS packet exceeds the 1000 byte maximum size: ${o.length} bytes`);let a=yield n.sign({data:o});return{k:r,seq:s,sig:a,v:i}})}static identifierToIdentityKey({didUri:e}){return hn(this,void 0,void 0,function*(){let r=t.identifierToIdentityKeyBytes({didUri:e});return yield Fr.bytesToPublicKey({publicKeyBytes:r})})}static identifierToIdentityKeyBytes({didUri:e}){let r=tt.parse(e);if(!r)throw new _e(ge.InvalidDid,`Invalid DID URI: ${e}`);if(r.method!==ku.methodName)throw new _e(ge.MethodNotSupported,`Method not supported: ${r.method}`);let n;try{n=ce.base32Z(r.id).toUint8Array()}catch{throw new _e(ge.InvalidPublicKey,"Failed to decode method-specific identifier")}if(n.length!==32)throw new _e(ge.InvalidPublicKeyLength,`Invalid public key length: ${n.length}`);return n}static identityKeyToIdentifier({identityKey:e}){return hn(this,void 0,void 0,function*(){let r=yield Fr.publicKeyToBytes({publicKey:e}),n=ce.uint8Array(r).toBase32Z();return`did:${ku.methodName}:${n}`})}static keyConverter(e){let n={Ed25519:Fr,"P-256":Un,secp256k1:xn}[e];if(!n)throw new _e(ge.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static parseBep44GetMessage({bep44Message:e}){return hn(this,void 0,void 0,function*(){let r=yield Fr.bytesToPublicKey({publicKeyBytes:e.k}),n=zw.encode({seq:e.seq,v:e.v}).subarray(1,-1);if(!(yield Fr.verify({key:r,signature:e.sig,data:n})))throw new _e(ge.InvalidSignature,"Invalid signature for DHT BEP44 message");return P0(e.v)})}static parseTxtDataToObject(e){return this.parseTxtDataToString(e).split(O0).reduce((r,n)=>{let[s,i]=n.split("=");return r[s]=i,r},{})}static parseTxtDataToString(e){if(typeof e=="string")return e;if(e instanceof Uint8Array)return ce.uint8Array(e).toString();if(Array.isArray(e))return e.map(r=>this.parseTxtDataToString(r)).join("");throw new _e(ge.InternalError,"Pkarr returned DNS TXT record with invalid data type")}};var zt={DeltaExceedsMaximumSize:"DeltaExceedsMaximumSize",DidDocumentPublicKeyIdDuplicated:"DidDocumentPublicKeyIdDuplicated",DidDocumentPublicKeyMissingOrIncorrectType:"DidDocumentPublicKeyMissingOrIncorrectType",DidDocumentServiceIdDuplicated:"DidDocumentServiceIdDuplicated",DidSuffixIncorrectLength:"DidSuffixIncorrectLength",EncodedStringIncorrectEncoding:"EncodedStringIncorrectEncoding",IdNotUsingBase64UrlCharacterSet:"IdNotUsingBase64UrlCharacterSet",IdTooLong:"IdTooLong",JwkEs256kMissingOrInvalidCrv:"JwkEs256kMissingOrInvalidCrv",JwkEs256kMissingOrInvalidKty:"JwkEs256kMissingOrInvalidKty",JwkEs256kHasIncorrectLengthOfX:"JwkEs256kHasIncorrectLengthOfX",JwkEs256kHasIncorrectLengthOfY:"JwkEs256kHasIncorrectLengthOfY",JwkEs256kHasIncorrectLengthOfD:"JwkEs256kHasIncorrectLengthOfD",MultihashStringNotAMultihash:"MultihashStringNotAMultihash",MultihashUnsupportedHashAlgorithm:"MultihashUnsupportedHashAlgorithm",PublicKeyJwkEs256kHasUnexpectedProperty:"PublicKeyJwkEs256kHasUnexpectedProperty",PublicKeyPurposeDuplicated:"PublicKeyPurposeDuplicated",ServiceEndpointCannotBeAnArray:"ServiceEndpointCannotBeAnArray",ServiceEndpointStringNotValidUri:"ServiceEndpointStringNotValidUri",ServiceTypeTooLong:"ServiceTypeTooLong"};var Mt=class extends Error{constructor(e,r){super(`${e}: ${r}`),this.code=e,Object.setPrototypeOf(this,new.target.prototype)}};var Pve=new Uint8Array(0);var iE=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},sE=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return BB(this,e)}},oE=class{constructor(e){this.decoders=e}or(e){return BB(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},BB=(t,e)=>new oE({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),aE=class{constructor(e,r,n,s){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new iE(e,r,n),this.decoder=new sE(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},GG=({name:t,prefix:e,encode:r,decode:n})=>new aE(t,e,r,n);var XG=(t,e,r,n)=>{let s={};for(let l=0;l<e.length;++l)s[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),a=0,u=0,c=0;for(let l=0;l<i;++l){let d=s[t[l]];if(d===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|d,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},YG=(t,e,r)=>{let n=e[e.length-1]==="=",s=(1<<r)-1,i="",o=0,a=0;for(let u=0;u<t.length;++u)for(a=a<<8|t[u],o+=8;o>r;)o-=r,i+=e[s&a>>o];if(o&&(i+=e[s&a<<r-o]),n)for(;i.length*r&7;)i+="=";return i},Hf=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>GG({prefix:e,name:t,encode(s){return YG(s,n,r)},decode(s){return XG(s,n,r,t)}});var Rve=Hf({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$ve=Hf({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Wf=Hf({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Nve=Hf({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Bn=class t{static encode(e){return Wf.baseEncode(e)}static decodeAsBytes(e,r){if(!t.isBase64UrlString(e))throw new Mt(zt.EncodedStringIncorrectEncoding,`Given ${r} must be base64url string.`);return Wf.baseDecode(e)}static decodeAsString(e,r){let n=t.decodeAsBytes(e,r);return t.bytesToString(n)}static isBase64UrlString(e){return/^[A-Za-z0-9_-]+$/.test(e)}static stringToBytes(e){return new TextEncoder().encode(e)}static bytesToString(e){return new TextDecoder().decode(e)}};var uF=ts(uE(),1);var cE;(function(t){t.Public="public",t.Private="private"})(cE||(cE={}));var Hn=cE;var xr=class{static validateEs256kOperationKey(e,r){let n=new Set(["kty","crv","x","y"]);r===Hn.Private&&n.add("d");for(let s in e)if(!n.has(s))throw new Mt(zt.PublicKeyJwkEs256kHasUnexpectedProperty,`SECP256K1 JWK key has unexpected property '${s}'.`);if(e.crv!=="secp256k1")throw new Mt(zt.JwkEs256kMissingOrInvalidCrv,`SECP256K1 JWK 'crv' property must be 'secp256k1' but got '${e.crv}.'`);if(e.kty!=="EC")throw new Mt(zt.JwkEs256kMissingOrInvalidKty,`SECP256K1 JWK 'kty' property must be 'EC' but got '${e.kty}.'`);if(e.x.length!==43)throw new Mt(zt.JwkEs256kHasIncorrectLengthOfX,"SECP256K1 JWK 'x' property must be 43 bytes.");if(e.y.length!==43)throw new Mt(zt.JwkEs256kHasIncorrectLengthOfY,"SECP256K1 JWK 'y' property must be 43 bytes.");if(r===Hn.Private&&(e.d===void 0||e.d.length!==43))throw new Mt(zt.JwkEs256kHasIncorrectLengthOfD,"SECP256K1 JWK 'd' property must be 43 bytes.")}static validateId(e){if(e.length>50)throw new Mt(zt.IdTooLong,`Key ID length ${e.length} exceed max allowed length of 50.`);if(!Bn.isBase64UrlString(e))throw new Mt(zt.IdNotUsingBase64UrlCharacterSet,`Key ID '${e}' is not a Base64URL string.`)}static validatePublicKeyPurposes(e){if(e===void 0)return;let r=new Set;for(let n of e){if(r.has(n))throw new Mt(zt.PublicKeyPurposeDuplicated,`Public key purpose '${n}' already specified.`);r.add(n)}}};var br=class{};br.hashAlgorithmInMultihashCode=18;br.maxCanonicalizedDeltaSizeInBytes=1e3;var kB=ts(IB(),1);var Ri=class t{static canonicalizeAsBytes(e){let r=t.removeAllUndefinedProperties(e),n=kB.default(r);return Bn.stringToBytes(n)}static removeAllUndefinedProperties(e){for(let r in e)typeof e[r]=="object"?t.removeAllUndefinedProperties(e[r]):e[r]===void 0&&delete e[r];return e}};var V0=ts(nF(),1);var nZ=oF,iF=128,iZ=127,sZ=~iZ,oZ=Math.pow(2,31);function oF(t,e,r){e=e||[],r=r||0;for(var n=r;t>=oZ;)e[r++]=t&255|iF,t/=128;for(;t&sZ;)e[r++]=t&255|iF,t>>>=7;return e[r]=t|0,oF.bytes=r-n+1,e}var aZ=jE,uZ=128,sF=127;function jE(t,n){var r=0,n=n||0,s=0,i=n,o,a=t.length;do{if(i>=a)throw jE.bytes=0,new RangeError("Could not decode varint");o=t[i++],r+=s<28?(o&sF)<<s:(o&sF)*Math.pow(2,s),s+=7}while(o>=uZ);return jE.bytes=i-n,r}var cZ=Math.pow(2,7),lZ=Math.pow(2,14),dZ=Math.pow(2,21),fZ=Math.pow(2,28),pZ=Math.pow(2,35),hZ=Math.pow(2,42),mZ=Math.pow(2,49),yZ=Math.pow(2,56),gZ=Math.pow(2,63),bZ=function(t){return t<cZ?1:t<lZ?2:t<dZ?3:t<fZ?4:t<pZ?5:t<hZ?6:t<mZ?7:t<yZ?8:t<gZ?9:10},vZ={encode:nZ,decode:aZ,encodingLength:bZ},wZ=vZ,qE=wZ;var LE=(t,e,r=0)=>(qE.encode(t,e,r),e),UE=t=>qE.encodingLength(t);var KE=(t,e)=>{let r=e.byteLength,n=UE(t),s=n+UE(r),i=new Uint8Array(s+r);return LE(t,i,0),LE(r,i,n),i.set(e,s),new VE(t,r,e,i)};var VE=class{constructor(e,r,n,s){this.code=e,this.size=r,this.digest=n,this.bytes=s}};var WE=({name:t,code:e,encode:r})=>new HE(t,e,r),HE=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?KE(this.code,r):r.then(n=>KE(this.code,n))}else throw Error("Unknown type, must be binary type")}};var aF=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),zE=WE({name:"sha2-256",code:18,encode:aF("SHA-256")}),awe=WE({name:"sha2-512",code:19,encode:aF("SHA-512")});var ep=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},kr=class t{static hash(e,r){return ep(this,void 0,void 0,function*(){let n=yield this.hashAsNonMultihashBytes(e,r);return V0.encode(n,r)})}static hashAsNonMultihashBytes(e,r){return ep(this,void 0,void 0,function*(){let n;switch(r){case 18:n=yield zE.encode(e);break;default:throw new Mt(zt.MultihashUnsupportedHashAlgorithm,`Hash algorithm defined in multihash code ${r} is not supported.`)}return n})}static canonicalizeThenHashThenEncode(e,r){return ep(this,void 0,void 0,function*(){let n=Ri.canonicalizeAsBytes(e);return yield t.hashThenEncode(n,r)})}static canonicalizeThenDoubleHashThenEncode(e,r){return ep(this,void 0,void 0,function*(){let n=Ri.canonicalizeAsBytes(e),s=yield t.hashAsNonMultihashBytes(n,r);return yield t.hashThenEncode(s,r)})}static hashThenEncode(e,r){return ep(this,void 0,void 0,function*(){let n=yield t.hash(e,r);return Bn.encode(n)})}static validateEncodedHashComputedUsingSupportedHashAlgorithm(e,r){let n,s=Bn.decodeAsBytes(e,r);try{n=V0.decode(s)}catch{throw new Mt(zt.MultihashStringNotAMultihash,`Given ${r} string '${e}' is not a multihash after decoding.`)}let i=br.hashAlgorithmInMultihashCode;if(i!==n.code)throw new Mt(zt.MultihashUnsupportedHashAlgorithm,`Given ${r} uses unsupported multihash algorithm with code ${n.code}, should use ${i} or change IonSdkConfig to desired hashing algorithm.`)}};var JE;(function(t){t.Create="create",t.Update="update",t.Deactivate="deactivate",t.Recover="recover"})(JE||(JE={}));var tp=JE;var GE;(function(t){t.Replace="replace",t.AddPublicKeys="add-public-keys",t.RemovePublicKeys="remove-public-keys",t.AddServices="add-services",t.RemoveServices="remove-services"})(GE||(GE={}));var Nu=GE;var K0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},va=class t{static createCreateRequest(e){return K0(this,void 0,void 0,function*(){let r=e.recoveryKey,n=e.updateKey,s=e.document.publicKeys,i=e.document.services;xr.validateEs256kOperationKey(r,Hn.Public),xr.validateEs256kOperationKey(n,Hn.Public),t.validateDidDocumentKeys(s),t.validateServices(i);let o=br.hashAlgorithmInMultihashCode,a=[{action:Nu.Replace,document:e.document}],u={updateCommitment:yield kr.canonicalizeThenDoubleHashThenEncode(n,o),patches:a};t.validateDeltaSize(u);let l={deltaHash:yield kr.canonicalizeThenHashThenEncode(u,o),recoveryCommitment:yield kr.canonicalizeThenDoubleHashThenEncode(r,o)};return{type:tp.Create,suffixData:l,delta:u}})}static createDeactivateRequest(e){return K0(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),xr.validateEs256kOperationKey(e.recoveryPublicKey,Hn.Public);let r=br.hashAlgorithmInMultihashCode,n=yield kr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s={didSuffix:e.didSuffix,recoveryKey:e.recoveryPublicKey},i=yield e.signer.sign({alg:"ES256K"},s);return{type:tp.Deactivate,didSuffix:e.didSuffix,revealValue:n,signedData:i}})}static createRecoverRequest(e){return K0(this,void 0,void 0,function*(){t.validateDidSuffix(e.didSuffix),xr.validateEs256kOperationKey(e.recoveryPublicKey,Hn.Public),xr.validateEs256kOperationKey(e.nextRecoveryPublicKey,Hn.Public),xr.validateEs256kOperationKey(e.nextUpdatePublicKey,Hn.Public),t.validateDidDocumentKeys(e.document.publicKeys),t.validateServices(e.document.services);let r=br.hashAlgorithmInMultihashCode,n=yield kr.canonicalizeThenHashThenEncode(e.recoveryPublicKey,r),s=[{action:Nu.Replace,document:e.document}],i=yield kr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,r),o={patches:s,updateCommitment:i},a=yield kr.canonicalizeThenHashThenEncode(o,r),c={recoveryCommitment:yield kr.canonicalizeThenDoubleHashThenEncode(e.nextRecoveryPublicKey,r),recoveryKey:e.recoveryPublicKey,deltaHash:a},l=yield e.signer.sign({alg:"ES256K"},c);return{type:tp.Recover,didSuffix:e.didSuffix,revealValue:n,delta:o,signedData:l}})}static createUpdateRequest(e){return K0(this,void 0,void 0,function*(){if(t.validateDidSuffix(e.didSuffix),xr.validateEs256kOperationKey(e.updatePublicKey,Hn.Public),xr.validateEs256kOperationKey(e.nextUpdatePublicKey,Hn.Public),t.validateServices(e.servicesToAdd),t.validateDidDocumentKeys(e.publicKeysToAdd),e.idsOfServicesToRemove!==void 0)for(let h of e.idsOfServicesToRemove)xr.validateId(h);if(e.idsOfPublicKeysToRemove!==void 0)for(let h of e.idsOfPublicKeysToRemove)xr.validateId(h);let r=[],n=e.servicesToAdd;if(n!==void 0&&n.length>0){let h={action:Nu.AddServices,services:n};r.push(h)}let s=e.idsOfServicesToRemove;if(s!==void 0&&s.length>0){let h={action:Nu.RemoveServices,ids:s};r.push(h)}let i=e.publicKeysToAdd;if(i!==void 0&&i.length>0){let h={action:Nu.AddPublicKeys,publicKeys:i};r.push(h)}let o=e.idsOfPublicKeysToRemove;if(o!==void 0&&o.length>0){let h={action:Nu.RemovePublicKeys,ids:o};r.push(h)}let a=br.hashAlgorithmInMultihashCode,u=yield kr.canonicalizeThenHashThenEncode(e.updatePublicKey,a),c=yield kr.canonicalizeThenDoubleHashThenEncode(e.nextUpdatePublicKey,a),l={patches:r,updateCommitment:c},d=yield kr.canonicalizeThenHashThenEncode(l,a),p={updateKey:e.updatePublicKey,deltaHash:d},f=yield e.signer.sign({alg:"ES256K"},p);return{type:tp.Update,didSuffix:e.didSuffix,revealValue:u,delta:l,signedData:f}})}static validateDidSuffix(e){kr.validateEncodedHashComputedUsingSupportedHashAlgorithm(e,"didSuffix")}static validateDidDocumentKeys(e){if(e===void 0)return;let r=new Set;for(let n of e){if(Array.isArray(n.publicKeyJwk))throw new Mt(zt.DidDocumentPublicKeyMissingOrIncorrectType,"DID Document key 'publicKeyJwk' property is not a non-array object.");if(xr.validateId(n.id),r.has(n.id))throw new Mt(zt.DidDocumentPublicKeyIdDuplicated,`DID Document key with ID '${n.id}' already exists.`);r.add(n.id),xr.validatePublicKeyPurposes(n.purposes)}}static validateServices(e){if(e!==void 0&&e.length!==0){let r=new Set;for(let n of e){if(t.validateService(n),r.has(n.id))throw new Mt(zt.DidDocumentServiceIdDuplicated,"Service id has to be unique");r.add(n.id)}}}static validateService(e){xr.validateId(e.id);let r=30;if(e.type.length>r){let n=`Service endpoint type length ${e.type.length} exceeds max allowed length of ${r}.`;throw new Mt(zt.ServiceTypeTooLong,n)}if(Array.isArray(e.serviceEndpoint)){let n="Service endpoint value cannot be an array.";throw new Mt(zt.ServiceEndpointCannotBeAnArray,n)}if(typeof e.serviceEndpoint=="string"&&uF.parse(e.serviceEndpoint).error!==void 0)throw new Mt(zt.ServiceEndpointStringNotValidUri,`Service endpoint string '${e.serviceEndpoint}' is not a URI.`)}static validateDeltaSize(e){let r=Ri.canonicalizeAsBytes(e);if(r.length>br.maxCanonicalizedDeltaSizeInBytes){let n=`Delta of ${r.length} bytes exceeded limit of ${br.maxCanonicalizedDeltaSizeInBytes} bytes.`;throw new Mt(zt.DeltaExceedsMaximumSize,n)}}};var cF=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Fl=class t{static createLongFormDid(e){return cF(this,void 0,void 0,function*(){let r=yield va.createCreateRequest(e),n=yield t.computeDidUniqueSuffix(r.suffixData),s;br.network===void 0||br.network==="mainnet"?s=`did:ion:${n}`:s=`did:ion:${br.network}:${n}`;let i={suffixData:r.suffixData,delta:r.delta},o=Ri.canonicalizeAsBytes(i),a=Bn.encode(o);return`${s}:${a}`})}static computeDidUniqueSuffix(e){return cF(this,void 0,void 0,function*(){let r=Ri.canonicalizeAsBytes(e),n=yield kr.hash(r,br.hashAlgorithmInMultihashCode);return Bn.encode(n)})}};var Wr=2n**255n-19n,W0=2n**252n+27742317777372353535851937790883648493n,YE=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,ZE=0x6666666666666666666666666666666666666666666666666666666666666658n,H0={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,p:Wr,n:W0,h:8,Gx:YE,Gy:ZE},Tn=(t="")=>{throw new Error(t)},mF=t=>typeof t=="string",QE=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?Tn("Uint8Array expected"):t,Il=t=>new Uint8Array(t),SZ=(t,e)=>QE(mF(t)?t_(t):Il(t),e),Fe=(t,e=Wr)=>{let r=t%e;return r>=0n?r:e+r},lF=t=>t instanceof wa?t:Tn("Point expected"),dF,wa=class t{constructor(e,r,n,s){this.ex=e,this.ey=r,this.ez=n,this.et=s}static fromAffine(e){return new t(e.x,e.y,1n,Fe(e.x*e.y))}static fromHex(e,r=!0){let{d:n}=H0;e=SZ(e,32);let s=e.slice();s[31]=e[31]&-129;let i=AZ(s);i===0n||(r&&!(0n<i&&i<Wr)&&Tn("bad y coord 1"),!r&&!(0n<i&&i<2n**256n)&&Tn("bad y coord 2"));let o=Fe(i*i),a=Fe(o-1n),u=Fe(n*o+1n),{isValid:c,value:l}=CZ(a,u);c||Tn("bad y coordinate 3");let d=(l&1n)===1n;return(e[31]&128)!==0!==d&&(l=Fe(-l)),new t(l,i,1n,Fe(l*i))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(e){let{ex:r,ey:n,ez:s}=this,{ex:i,ey:o,ez:a}=lF(e),u=Fe(r*a),c=Fe(i*s),l=Fe(n*a),d=Fe(o*s);return u===c&&l===d}is0(){return this.equals(z0)}negate(){return new t(Fe(-this.ex),this.ey,this.ez,Fe(-this.et))}double(){let{ex:e,ey:r,ez:n}=this,{a:s}=H0,i=Fe(e*e),o=Fe(r*r),a=Fe(2n*Fe(n*n)),u=Fe(s*i),c=e+r,l=Fe(Fe(c*c)-i-o),d=u+o,p=d-a,f=u-o,h=Fe(l*p),y=Fe(d*f),g=Fe(l*f),S=Fe(p*d);return new t(h,y,S,g)}add(e){let{ex:r,ey:n,ez:s,et:i}=this,{ex:o,ey:a,ez:u,et:c}=lF(e),{a:l,d}=H0,p=Fe(r*o),f=Fe(n*a),h=Fe(i*d*c),y=Fe(s*u),g=Fe((r+n)*(o+a)-p-f),S=Fe(y-h),A=Fe(y+h),w=Fe(f-l*p),P=Fe(g*S),D=Fe(A*w),O=Fe(g*w),B=Fe(S*A);return new t(P,D,B,O)}mul(e,r=!0){if(e===0n)return r===!0?Tn("cannot multiply by 0"):z0;if(typeof e=="bigint"&&0n<e&&e<W0||Tn("invalid scalar, must be < L"),!r&&this.is0()||e===1n)return this;if(this.equals(J0))return OZ(e).p;let n=z0,s=J0;for(let i=this;e>0n;i=i.double(),e>>=1n)e&1n?n=n.add(i):r&&(s=s.add(i));return n}multiply(e){return this.mul(e)}clearCofactor(){return this.mul(BigInt(H0.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let e=this.mul(W0/2n,!1).double();return W0%2n&&(e=e.add(this)),e.is0()}toAffine(){let{ex:e,ey:r,ez:n}=this;if(this.is0())return{x:0n,y:0n};let s=gF(n);return Fe(n*s)!==1n&&Tn("invalid inverse"),{x:Fe(e*s),y:Fe(r*s)}}toRawBytes(){let{x:e,y:r}=this.toAffine(),n=DZ(r);return n[31]|=e&1n?128:0,n}toHex(){return e_(this.toRawBytes())}};wa.BASE=new wa(YE,ZE,1n,Fe(YE*ZE));wa.ZERO=new wa(0n,1n,1n,0n);var{BASE:J0,ZERO:z0}=wa,yF=(t,e)=>t.toString(16).padStart(e,"0"),e_=t=>Array.from(t).map(e=>yF(e,2)).join(""),t_=t=>{let e=t.length;(!mF(t)||e%2)&&Tn("hex invalid 1");let r=Il(e/2);for(let n=0;n<r.length;n++){let s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);(Number.isNaN(o)||o<0)&&Tn("hex invalid 2"),r[n]=o}return r},DZ=t=>t_(yF(t,32*2)).reverse(),AZ=t=>BigInt("0x"+e_(Il(QE(t)).reverse())),fF=(...t)=>{let e=Il(t.reduce((n,s)=>n+QE(s).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},gF=(t,e=Wr)=>{(t===0n||e<=0n)&&Tn("no inverse n="+t+" mod="+e);let r=Fe(t,e),n=e,s=0n,i=1n,o=1n,a=0n;for(;r!==0n;){let u=n/r,c=n%r,l=s-o*u,d=i-a*u;n=r,r=c,s=o,i=a,o=l,a=d}return n===1n?Fe(s,e):Tn("no inverse")},As=(t,e)=>{let r=t;for(;e-- >0n;)r*=r,r%=Wr;return r},xZ=t=>{let r=t*t%Wr*t%Wr,n=As(r,2n)*r%Wr,s=As(n,1n)*t%Wr,i=As(s,5n)*s%Wr,o=As(i,10n)*i%Wr,a=As(o,20n)*o%Wr,u=As(a,40n)*a%Wr,c=As(u,80n)*u%Wr,l=As(c,80n)*u%Wr,d=As(l,10n)*i%Wr;return{pow_p_5_8:As(d,2n)*t%Wr,b2:r}},pF=19681161376707505956807079304988542015446066515923890162744021073123829784752n,CZ=(t,e)=>{let r=Fe(e*e*e),n=Fe(r*r*e),s=xZ(t*n).pow_p_5_8,i=Fe(t*r*s),o=Fe(e*i*i),a=i,u=Fe(i*pF),c=o===t,l=o===Fe(-t),d=o===Fe(-t*pF);return c&&(i=a),(l||d)&&(i=u),(Fe(i)&1n)===1n&&(i=Fe(-i)),{isValid:c||l,value:i}};var XE;var hF=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,bF={bytesToHex:e_,hexToBytes:t_,concatBytes:fF,mod:Fe,invert:gF,randomBytes:t=>{let e=hF();return e||Tn("crypto.getRandomValues must be defined"),e.getRandomValues(Il(t))},sha512Async:async(...t)=>{let e=hF();e||Tn("crypto.subtle or etc.sha512Async must be defined");let r=fF(...t);return Il(await e.subtle.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(bF,{sha512Sync:{configurable:!1,get(){return XE},set(t){XE||(XE=t)}}});var Mu=8,PZ=()=>{let t=[],e=256/Mu+1,r=J0,n=r;for(let s=0;s<e;s++){n=r,t.push(n);for(let i=1;i<2**(Mu-1);i++)n=n.add(r),t.push(n);r=n.double()}return t},OZ=t=>{let e=dF||(dF=PZ()),r=(l,d)=>{let p=d.negate();return l?p:d},n=z0,s=J0,i=1+256/Mu,o=2**(Mu-1),a=BigInt(2**Mu-1),u=2**Mu,c=BigInt(Mu);for(let l=0;l<i;l++){let d=l*o,p=Number(t&a);t>>=c,p>o&&(p-=u,t+=1n);let f=d,h=d+Math.abs(p)-1,y=l%2!==0,g=p<0;p===0?s=s.add(r(y,e[f])):n=n.add(r(g,e[h]))}return{p:n,f:s}};var n_=2n**256n,qu=n_-0x1000003d1n,i_=n_-0x14551231950b75fc4402da1732fc9bebfn,xF=0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798n,CF=0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8n,PF={p:qu,n:i_,a:0n,b:7n,Gx:xF,Gy:CF},kl=32,vF=t=>Se(Se(t*t)*t+PF.b),Rr=(t="")=>{throw new Error(t)},Y0=t=>typeof t=="bigint",OF=t=>typeof t=="string",r_=t=>Y0(t)&&0n<t&&t<qu,BF=t=>Y0(t)&&0n<t&&t<i_,TF=(t,e)=>!(t instanceof Uint8Array)||typeof e=="number"&&e>0&&t.length!==e?Rr("Uint8Array expected"):t,np=t=>new Uint8Array(t),s_=(t,e)=>TF(OF(t)?Z0(t):np(t),e),Se=(t,e=qu)=>{let r=t%e;return r>=0n?r:e+r},wF=t=>t instanceof xo?t:Rr("Point expected"),EF,xo=class t{constructor(e,r,n){this.px=e,this.py=r,this.pz=n}static fromAffine(e){return new t(e.x,e.y,1n)}static fromHex(e){e=s_(e);let r,n=e[0],s=e.subarray(1),i=_F(s,0,kl),o=e.length;if(o===33&&[2,3].includes(n)){r_(i)||Rr("Point hex invalid: x not FE");let a=TZ(vF(i)),u=(a&1n)===1n;(n&1)===1!==u&&(a=Se(-a)),r=new t(i,a,1n)}return o===65&&n===4&&(r=new t(i,_F(s,kl,2*kl),1n)),r?r.ok():Rr("Point is not on curve")}static fromPrivateKey(e){return rp.mul(FZ(e))}get x(){return this.aff().x}get y(){return this.aff().y}equals(e){let{px:r,py:n,pz:s}=this,{px:i,py:o,pz:a}=wF(e),u=Se(r*a),c=Se(i*s),l=Se(n*a),d=Se(o*s);return u===c&&l===d}negate(){return new t(this.px,Se(-this.py),this.pz)}double(){return this.add(this)}add(e){let{px:r,py:n,pz:s}=this,{px:i,py:o,pz:a}=wF(e),{a:u,b:c}=PF,l=0n,d=0n,p=0n,f=Se(c*3n),h=Se(r*i),y=Se(n*o),g=Se(s*a),S=Se(r+n),A=Se(i+o);S=Se(S*A),A=Se(h+y),S=Se(S-A),A=Se(r+s);let w=Se(i+a);return A=Se(A*w),w=Se(h+g),A=Se(A-w),w=Se(n+s),l=Se(o+a),w=Se(w*l),l=Se(y+g),w=Se(w-l),p=Se(u*A),l=Se(f*g),p=Se(l+p),l=Se(y-p),p=Se(y+p),d=Se(l*p),y=Se(h+h),y=Se(y+h),g=Se(u*g),A=Se(f*A),y=Se(y+g),g=Se(h-g),g=Se(u*g),A=Se(A+g),h=Se(y*A),d=Se(d+h),h=Se(w*A),l=Se(S*l),l=Se(l-h),h=Se(S*y),p=Se(w*p),p=Se(p+h),new t(l,d,p)}mul(e,r=!0){if(!r&&e===0n)return G0;if(BF(e)||Rr("invalid scalar"),this.equals(rp))return RZ(e).p;let n=G0,s=rp;for(let i=this;e>0n;i=i.double(),e>>=1n)e&1n?n=n.add(i):r&&(s=s.add(i));return n}mulAddQUns(e,r,n){return this.mul(r,!1).add(e.mul(n,!1)).ok()}toAffine(){let{px:e,py:r,pz:n}=this;if(this.equals(G0))return{x:0n,y:0n};if(n===1n)return{x:e,y:r};let s=IF(n);return Se(n*s)!==1n&&Rr("invalid inverse"),{x:Se(e*s),y:Se(r*s)}}assertValidity(){let{x:e,y:r}=this.aff();return(!r_(e)||!r_(r))&&Rr("Point invalid: x or y"),Se(r*r)===vF(e)?this:Rr("Point invalid: not on curve")}multiply(e){return this.mul(e)}aff(){return this.toAffine()}ok(){return this.assertValidity()}toHex(e=!0){let{x:r,y:n}=this.aff();return(e?(n&1n)===0n?"02":"03":"04")+SF(r)+(e?"":SF(n))}toRawBytes(e=!0){return Z0(this.toHex(e))}};xo.BASE=new xo(xF,CF,1n);xo.ZERO=new xo(0n,1n,0n);var{BASE:rp,ZERO:G0}=xo,FF=(t,e)=>t.toString(16).padStart(e,"0"),o_=t=>Array.from(t).map(e=>FF(e,2)).join(""),Z0=t=>{let e=t.length;(!OF(t)||e%2)&&Rr("hex invalid 1");let r=np(e/2);for(let n=0;n<r.length;n++){let s=n*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);(Number.isNaN(o)||o<0)&&Rr("hex invalid 2"),r[n]=o}return r},Q0=t=>BigInt("0x"+(o_(t)||"0")),_F=(t,e,r)=>Q0(t.slice(e,r)),a_=t=>Y0(t)&&t>=0n&&t<n_?Z0(FF(t,2*kl)):Rr("bigint expected"),SF=t=>o_(a_(t)),DF=(...t)=>{let e=np(t.reduce((n,s)=>n+TF(s).length,0)),r=0;return t.forEach(n=>{e.set(n,r),r+=n.length}),e},IF=(t,e=qu)=>{(t===0n||e<=0n)&&Rr("no inverse n="+t+" mod="+e);let r=Se(t,e),n=e,s=0n,i=1n,o=1n,a=0n;for(;r!==0n;){let u=n/r,c=n%r,l=s-o*u,d=i-a*u;n=r,r=c,s=o,i=a,o=l,a=d}return n===1n?Se(s,e):Rr("no inverse")},TZ=t=>{let e=1n;for(let r=t,n=(qu+1n)/4n;n>0n;n>>=1n)n&1n&&(e=e*r%qu),r=r*r%qu;return Se(e*e)===t?e:Rr("sqrt invalid")},FZ=t=>(Y0(t)||(t=Q0(s_(t,kl))),BF(t)?t:Rr("private key out of range"));var AF=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,X0;function IZ(t){t=s_(t);let e=kl+8;(t.length<e||t.length>1024)&&Rr("expected proper params");let r=Se(Q0(t),i_-1n)+1n;return a_(r)}var kF={hexToBytes:Z0,bytesToHex:o_,concatBytes:DF,bytesToNumberBE:Q0,numberToBytesBE:a_,mod:Se,invert:IF,hmacSha256Async:async(t,...e)=>{let r=AF();if(!r)return Rr("etc.hmacSha256Async not set");let n=r.subtle,s=await n.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return np(await n.sign("HMAC",s,DF(...e)))},hmacSha256Sync:X0,hashToPrivateKey:IZ,randomBytes:t=>{let e=AF();return e||Rr("crypto.getRandomValues must be defined"),e.getRandomValues(np(t))}};Object.defineProperties(kF,{hmacSha256Sync:{configurable:!1,get(){return X0},set(t){X0||(X0=t)}}});var ju=8,kZ=()=>{let t=[],e=256/ju+1,r=rp,n=r;for(let s=0;s<e;s++){n=r,t.push(n);for(let i=1;i<2**(ju-1);i++)n=n.add(r),t.push(n);r=n.double()}return t},RZ=t=>{let e=EF||(EF=kZ()),r=(l,d)=>{let p=d.negate();return l?p:d},n=G0,s=rp,i=1+256/ju,o=2**(ju-1),a=BigInt(2**ju-1),u=2**ju,c=BigInt(ju);for(let l=0;l<i;l++){let d=l*o,p=Number(t&a);t>>=c,p>o&&(p-=u,t+=1n);let f=d,h=d+Math.abs(p)-1,y=l%2!==0,g=p<0;p===0?s=s.add(r(y,e[f])):n=n.add(r(g,e[h]))}return{p:n,f:s}};var $F;(function(t){t.Mainnet="mainnet",t.Testnet="test"})($F||($F={}));var NF;(function(t){t.Authentication="authentication",t.AssertionMethod="assertionMethod",t.CapabilityInvocation="capabilityInvocation",t.CapabilityDelegation="capabilityDelegation",t.KeyAgreement="keyAgreement"})(NF||(NF={}));var Ea=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},xs;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(xs||(xs={}));var $Z={Ed25519:xs.Ed25519,ES256K:xs.secp256k1,ES256:xs.secp256r1,"P-256":xs.secp256r1,secp256k1:xs.secp256k1,secp256r1:xs.secp256r1},MF="https://ion.tbd.engineering",ip=class t extends di{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o,a,u,c;return Ea(this,void 0,void 0,function*(){if(!((n=r.verificationMethods)===null||n===void 0)&&n.some(D=>!(D.algorithm in $Z)))throw new Error("One or more verification method algorithms are not supported");let l=(s=r.verificationMethods)===null||s===void 0?void 0:s.filter(D=>"id"in D).map(D=>D.id);if(l&&l.length!==new Set(l).size)throw new Error("One or more verification method IDs are not unique");if(!((i=r.services)===null||i===void 0)&&i.some(D=>!D.id||!D.type||!D.serviceEndpoint))throw new Error("One or more services are missing required properties");let d={algorithm:"Ed25519",purposes:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]},p=[];for(let D of(o=r.verificationMethods)!==null&&o!==void 0?o:[d]){let O=yield e.generateKey({algorithm:D.algorithm}),B=yield e.getPublicKey({keyUri:O});p.push({id:D.id,publicKeyJwk:B,purposes:(a=D.purposes)!==null&&a!==void 0?a:["authentication","assertionMethod","capabilityDelegation","capabilityInvocation"]})}let f=yield e.generateKey({algorithm:xs.secp256k1}),h=yield e.getPublicKey({keyUri:f}),y=yield e.generateKey({algorithm:xs.secp256k1}),g=yield e.getPublicKey({keyUri:y}),S=yield Lu.computeLongFormDidUri({recoveryKey:h,updateKey:g,services:(u=r.services)!==null&&u!==void 0?u:[],verificationMethods:p}),{didDocument:A,didResolutionMetadata:w}=yield t.resolve(S,{gatewayUri:r.gatewayUri});if(A===null)throw new Error(`Unable to resolve DID during creation: ${w?.error}`);let P=new Pn({uri:S,document:A,metadata:{published:!1,canonicalId:S.split(":",3).join(":"),recoveryKey:h,updateKey:g},keyManager:e});if(!((c=r.publish)!==null&&c!==void 0)||c){let D=yield t.publish({did:P,gatewayUri:r.gatewayUri});P.metadata=D.didDocumentMetadata}return P})}static getSigningMethod({didDocument:e,methodId:r}){var n;return Ea(this,void 0,void 0,function*(){let s=tt.parse(e.id);if(s&&s.method!==this.methodName)throw new _e(ge.MethodNotSupported,`Method not supported: ${s.method}`);let i=(n=e.verificationMethod)===null||n===void 0?void 0:n.find(o=>{var a;return o.id===(r??((a=e.assertionMethod)===null||a===void 0?void 0:a[0]))});if(!(i&&i.publicKeyJwk))throw new _e(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import({portableDid:e,keyManager:r=new Ir}){return Ea(this,void 0,void 0,function*(){let n=tt.parse(e.uri);if(n?.method!==t.methodName)throw new _e(ge.MethodNotSupported,"Method not supported");return yield Pn.import({portableDid:e,keyManager:r})})}static publish({did:e,gatewayUri:r=MF}){var n,s,i;return Ea(this,void 0,void 0,function*(){let o=(s=(n=e.document.verificationMethod)===null||n===void 0?void 0:n.map(c=>({id:c.id,publicKeyJwk:c.publicKeyJwk,purposes:Lw({didDocument:e.document,methodId:c.id})})))!==null&&s!==void 0?s:[],a=yield Lu.createIonDocument({services:(i=e.document.service)!==null&&i!==void 0?i:[],verificationMethods:o}),u=yield Lu.constructCreateRequest({ionDocument:a,recoveryKey:e.metadata.recoveryKey,updateKey:e.metadata.updateKey});try{let c=Lu.appendPathToUrl({baseUrl:r,path:"/operations"}),l=yield fetch(c,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});return{didDocument:e.document,didDocumentMetadata:Object.assign(Object.assign({},e.metadata),{published:l.ok}),didRegistrationMetadata:{}}}catch{return{didDocument:null,didDocumentMetadata:{published:!1},didRegistrationMetadata:{error:ge.InternalError,errorMessage:`Failed to publish DID document for: ${e.uri}`}}}})}static resolve(e,r={}){var n,s;return Ea(this,void 0,void 0,function*(){let i=tt.parse(e);if(!i)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:"invalidDid"}});if(i.method!==t.methodName)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:"methodNotSupported"}});let o=(n=r?.gatewayUri)!==null&&n!==void 0?n:MF;try{let a=Lu.appendPathToUrl({baseUrl:o,path:`/identifiers/${e}`}),u=yield fetch(a);if(!u.ok)throw new _e(ge.NotFound,`Unable to find DID document for: ${e}`);let{didDocument:c,didDocumentMetadata:l}=yield u.json();return Object.assign(Object.assign(Object.assign({},er),c&&{didDocument:c}),{didDocumentMetadata:Object.assign({published:(s=l?.method)===null||s===void 0?void 0:s.published},l)})}catch(a){if(!(a instanceof _e))throw new Error(a);return Object.assign(Object.assign({},er),{didResolutionMetadata:Object.assign({error:a.code},a.message&&{errorMessage:a.message})})}})}};ip.methodName="ion";var Lu=class t{static appendPathToUrl({baseUrl:e,path:r}){let n=new URL(e);return n.pathname=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",n.pathname+=r.startsWith("/")?r.substring(1):r,n.toString()}static computeLongFormDidUri({recoveryKey:e,updateKey:r,services:n,verificationMethods:s}){return Ea(this,void 0,void 0,function*(){let i=yield t.createIonDocument({services:n,verificationMethods:s}),o=t.normalizeJwk(e),a=t.normalizeJwk(r);return yield Fl.createLongFormDid({document:i,recoveryKey:o,updateKey:a})})}static constructCreateRequest({ionDocument:e,recoveryKey:r,updateKey:n}){return Ea(this,void 0,void 0,function*(){return yield va.createCreateRequest({document:e,recoveryKey:t.normalizeJwk(r),updateKey:t.normalizeJwk(n)})})}static createIonDocument({services:e,verificationMethods:r}){var n,s;return Ea(this,void 0,void 0,function*(){let i=[];for(let u of r){let c=(s=(n=u.id)!==null&&n!==void 0?n:u.publicKeyJwk.kid)!==null&&s!==void 0?s:yield Xe({jwk:u.publicKeyJwk});c=`${c.split("#").pop()}`;let l={id:c,publicKeyJwk:t.normalizeJwk(u.publicKeyJwk),purposes:u.purposes,type:"JsonWebKey2020"};i.push(l)}let o=e.map(u=>Object.assign(Object.assign({},u),{id:`${u.id.split("#").pop()}`}));return{publicKeys:i,services:o}})}static normalizeJwk(e){let r=e.kty,n;if(r==="EC")n={crv:e.crv,kty:e.kty,x:e.x,y:e.y};else if(r==="oct")n={k:e.k,kty:e.kty};else if(r==="OKP")n={crv:e.crv,kty:e.kty,x:e.x};else if(r==="RSA")n={e:e.e,kty:e.kty,n:e.n};else throw new Error(`Unsupported key type: ${r}`);return n}};var ey=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},sp=class t extends di{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o;return ey(this,void 0,void 0,function*(){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=ce.object(c).toBase64Url(),d=`did:${t.methodName}:${l}`,f=(yield t.resolve(d)).didDocument;return new Pn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod({didDocument:e}){var r;return ey(this,void 0,void 0,function*(){let n=tt.parse(e.id);if(n&&n.method!==this.methodName)throw new _e(ge.MethodNotSupported,`Method not supported: ${n.method}`);let[s]=(r=e.verificationMethod)!==null&&r!==void 0?r:[];if(!(s&&s.publicKeyJwk))throw new _e(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return s})}static import({portableDid:e,keyManager:r=new Ir}){return ey(this,void 0,void 0,function*(){let n=tt.parse(e.uri);if(n?.method!==t.methodName)throw new _e(ge.MethodNotSupported,"Method not supported");let s=yield Pn.import({portableDid:e,keyManager:r});if(s.document.verificationMethod.length!==1)throw new _e(ge.InvalidDidDocument,"DID document must contain exactly one verification method");return s})}static resolve(e,r){return ey(this,void 0,void 0,function*(){let n=tt.parse(e),s;try{s=ce.base64Url(n.id).toObject()}catch{}if(!n||!s)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:"methodNotSupported"}});let i={"@context":["https://www.w3.org/ns/did/v1"],id:n.uri},o=`${i.id}#0`;switch(i.verificationMethod=[{id:o,type:"JsonWebKey",controller:i.id,publicKeyJwk:s}],i.authentication=[o],i.assertionMethod=[o],i.capabilityInvocation=[o],i.capabilityDelegation=[o],i.keyAgreement=[o],s.use){case"sig":{delete i.keyAgreement;break}case"enc":{delete i.authentication,delete i.assertionMethod,delete i.capabilityInvocation,delete i.capabilityDelegation;break}}return Object.assign(Object.assign({},er),{didDocument:i})})}};sp.methodName="jwk";var Ni=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},Co;(function(t){t.Ed25519="Ed25519",t.secp256k1="secp256k1",t.secp256r1="secp256r1",t.X25519="X25519"})(Co||(Co={}));var u_={Ed25519VerificationKey2020:"https://w3id.org/security/suites/ed25519-2020/v1",JsonWebKey2020:"https://w3id.org/security/suites/jws-2020/v1",X25519KeyAgreementKey2020:"https://w3id.org/security/suites/x25519-2020/v1"},NZ={Ed25519:Co.Ed25519,ES256K:Co.secp256k1,ES256:Co.secp256r1,"P-256":Co.secp256r1,secp256k1:Co.secp256k1,secp256r1:Co.secp256r1,X25519:Co.X25519},op=class t extends di{static create({keyManager:e=new Ir,options:r={}}={}){var n,s,i,o;return Ni(this,void 0,void 0,function*(){if(r.algorithm&&r.verificationMethods)throw new Error("The 'algorithm' and 'verificationMethods' options are mutually exclusive");if(r.verificationMethods&&r.verificationMethods.length!==1)throw new Error("The 'verificationMethods' option must contain exactly one entry");let a=(o=(n=r.algorithm)!==null&&n!==void 0?n:(i=(s=r.verificationMethods)===null||s===void 0?void 0:s[0])===null||i===void 0?void 0:i.algorithm)!==null&&o!==void 0?o:"Ed25519",u=yield e.generateKey({algorithm:a}),c=yield e.getPublicKey({keyUri:u}),l=yield Fn.publicKeyToMultibaseId({publicKey:c}),d=`did:${t.methodName}:${l}`,f=(yield t.resolve(d,r)).didDocument;return new Pn({uri:d,document:f,metadata:{},keyManager:e})})}static getSigningMethod({didDocument:e}){var r;return Ni(this,void 0,void 0,function*(){let n=tt.parse(e.id);if(n&&n.method!==this.methodName)throw new _e(ge.MethodNotSupported,`Method not supported: ${n.method}`);let[s]=e.assertionMethod||[],i=(r=e.verificationMethod)===null||r===void 0?void 0:r.find(o=>o.id===s);if(!(i&&i.publicKeyJwk))throw new _e(ge.InternalError,"A verification method intended for signing could not be determined from the DID Document");return i})}static import({portableDid:e,keyManager:r=new Ir}){return Ni(this,void 0,void 0,function*(){let n=tt.parse(e.uri);if(n?.method!==t.methodName)throw new _e(ge.MethodNotSupported,"Method not supported");let s=yield Pn.import({portableDid:e,keyManager:r});if(s.document.verificationMethod.length!==1)throw new _e(ge.InvalidDidDocument,"DID document must contain exactly one verification method");return s})}static resolve(e,r){return Ni(this,void 0,void 0,function*(){try{let n=yield t.createDocument({didUri:e,options:r});return Object.assign(Object.assign({},er),{didDocument:n})}catch(n){if(!(n instanceof _e))throw new Error(n);return Object.assign(Object.assign({},er),{didResolutionMetadata:Object.assign({error:n.code},n.message&&{errorMessage:n.message})})}})}static createDocument({didUri:e,options:r={}}){return Ni(this,void 0,void 0,function*(){let{defaultContext:n="https://www.w3.org/ns/did/v1",enableEncryptionKeyDerivation:s=!1,enableExperimentalPublicKeyTypes:i=!1,publicKeyFormat:o="JsonWebKey2020"}=r,a={id:""},u=tt.parse(e);if(!u)throw new _e(ge.InvalidDid,`Invalid DID URI: ${e}`);let c=u.id;if(u.method!==t.methodName)throw new _e(ge.MethodNotSupported,`Method not supported: ${u.method}`);if(!t.validateIdentifier(u))throw new _e(ge.InvalidDid,`Invalid DID URI: ${e}`);let l=yield t.createSignatureMethod({didUri:e,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:i,publicKeyFormat:o}});if(a.id=u.uri,a.verificationMethod=[l],a.authentication=[l.id],a.assertionMethod=[l.id],a.capabilityInvocation=[l.id],a.capabilityDelegation=[l.id],s===!0){let f=o==="Ed25519VerificationKey2020"?"X25519KeyAgreementKey2020":"JsonWebKey2020",h=yield this.createEncryptionMethod({didUri:e,multibaseValue:c,options:{enableExperimentalPublicKeyTypes:i,publicKeyFormat:f}});a.verificationMethod.push(h),a.keyAgreement=[h.id]}let d=[n];return qw({didDocument:a}).forEach(f=>{let h=u_[f];d.push(h)}),a["@context"]=d,a})}static createEncryptionMethod({didUri:e,multibaseValue:r,options:n}){return Ni(this,void 0,void 0,function*(){let{enableExperimentalPublicKeyTypes:s,publicKeyFormat:i}=n,o={id:"",type:"",controller:""},{keyBytes:a,multicodecCode:u}=yield t.deriveEncryptionKey({multibaseValue:r}),c=a.byteLength,l=Fn.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(c!==l)throw new _e(ge.InvalidPublicKeyLength,`Expected ${c} bytes. Actual: ${l}`);let d=a0({keyBytes:a,multicodecCode:u});o.id=`${e}#${d}`;try{new URL(o.id)}catch{throw new _e(ge.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(i in u_))throw new _e(ge.UnsupportedPublicKeyType,`Unsupported format: ${i}`);if(s===!1&&!["Multikey","JsonWebKey2020","X25519KeyAgreementKey2020"].includes(i))throw new _e(ge.InvalidPublicKeyType,`Specified '${i}' without setting enableExperimentalPublicKeyTypes to true.`);if(o.type=i,o.controller=e,i==="X25519KeyAgreementKey2020"&&(o.publicKeyMultibase=d),i==="JsonWebKey2020"){let{crv:f}=yield Fn.multicodecToJwk({code:u});o.publicKeyJwk=yield Fn.keyConverter(f).bytesToPublicKey({publicKeyBytes:a})}return o})}static createSignatureMethod({didUri:e,multibaseValue:r,options:n}){return Ni(this,void 0,void 0,function*(){let{enableExperimentalPublicKeyTypes:s,publicKeyFormat:i}=n,o={id:"",type:"",controller:""},{keyBytes:a,multicodecCode:u,multicodecName:c}=u0({multibaseKeyId:r}),l=a.byteLength,d=Fn.MULTICODEC_PUBLIC_KEY_LENGTH[u];if(l!==d)throw new _e(ge.InvalidPublicKeyLength,`Expected ${l} bytes. Actual: ${d}`);let p=!1;switch(c){case"secp256k1-pub":p=yield xn.validatePublicKey({publicKeyBytes:a});break;case"ed25519-pub":p=yield Fr.validatePublicKey({publicKeyBytes:a});break;case"x25519-pub":p=!0;break}if(!p)throw new _e(ge.InvalidPublicKey,"Invalid public key detected.");o.id=`${e}#${r}`;try{new URL(o.id)}catch{throw new _e(ge.InvalidDidUrl,"Verification Method ID is not a valid DID URL.")}if(!(i in u_))throw new _e(ge.UnsupportedPublicKeyType,`Unsupported format: ${i}`);if(s===!1&&!["Multikey","JsonWebKey2020","Ed25519VerificationKey2020"].includes(i))throw new _e(ge.InvalidPublicKeyType,`Specified '${i}' without setting enableExperimentalPublicKeyTypes to true.`);if(o.type=i,o.controller=e,i==="Ed25519VerificationKey2020"&&(o.publicKeyMultibase=r),i==="JsonWebKey2020"){let{crv:h}=yield Fn.multicodecToJwk({code:u});o.publicKeyJwk=yield Fn.keyConverter(h).bytesToPublicKey({publicKeyBytes:a})}return o})}static deriveEncryptionKey({multibaseValue:e}){return Ni(this,void 0,void 0,function*(){let r={keyBytes:new Uint8Array,multicodecCode:0},{keyBytes:n,multicodecCode:s}=u0({multibaseKeyId:e});if(s===237){let i=yield Fn.keyConverter("Ed25519").bytesToPublicKey({publicKeyBytes:n}),o=yield Fr.convertPublicKeyToX25519({publicKey:i});r={keyBytes:yield Fn.keyConverter("Ed25519").publicKeyToBytes({publicKey:o}),multicodecCode:236}}return r})}static validateIdentifier(e){let{method:r,id:n}=e,[s]=e.uri.split(":",1);return s==="did"&&r==="key"&&Number("1")>0&&Tc(n)==="String"&&n.startsWith("z")}};op.methodName="key";var Fn=class t{static jwkToMulticodec({jwk:e}){return Ni(this,void 0,void 0,function*(){let r=[];e.crv&&(r.push(e.crv),e.d?r.push("private"):r.push("public"));let n=r.join(":"),s=t.JWK_TO_MULTICODEC[n];if(s===void 0)throw new Error(`Unsupported JWK to Multicodec conversion: '${n}'`);return{code:en.getCodeFromName({name:s}),name:s}})}static keyCompressor(e){let n={"P-256":Un.compressPublicKey,secp256k1:xn.compressPublicKey}[e];if(!n)throw new _e(ge.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static keyConverter(e){let n={Ed25519:Fr,"P-256":Un,secp256k1:xn,X25519:i0}[e];if(!n)throw new _e(ge.InvalidPublicKeyType,`Unsupported curve: ${e}`);return n}static multicodecToJwk({code:e,name:r}){return Ni(this,void 0,void 0,function*(){if(!(r?!e:e))throw new Error("Either 'name' or 'code' must be defined, but not both.");r=r===void 0?en.getNameFromCode({code:e}):r;let n=r,s=t.MULTICODEC_TO_JWK[n];if(s===void 0)throw new Error("Unsupported Multicodec to JWK conversion");return Object.assign({},s)})}static publicKeyToMultibaseId({publicKey:e}){var r;return Ni(this,void 0,void 0,function*(){if(!(e?.crv&&e.crv in NZ))throw new _e(ge.InvalidPublicKeyType,`Public key contains an unsupported key type: ${(r=e?.crv)!==null&&r!==void 0?r:"undefined"}`);let n=yield t.keyConverter(e.crv).publicKeyToBytes({publicKey:e});/^(secp256k1|P-256|P-384|P-521)$/.test(e.crv)&&(n=yield t.keyCompressor(e.crv)({publicKeyBytes:n}));let{name:s}=yield t.jwkToMulticodec({jwk:e});return a0({keyBytes:n,multicodecName:s})})}};Fn.JWK_TO_MULTICODEC={"Ed25519:public":"ed25519-pub","Ed25519:private":"ed25519-priv","secp256k1:public":"secp256k1-pub","secp256k1:private":"secp256k1-priv","X25519:public":"x25519-pub","X25519:private":"x25519-priv"};Fn.MULTICODEC_PUBLIC_KEY_LENGTH={231:33,236:32,237:32};Fn.MULTICODEC_TO_JWK={"ed25519-pub":{crv:"Ed25519",kty:"OKP",x:""},"ed25519-priv":{crv:"Ed25519",kty:"OKP",x:"",d:""},"secp256k1-pub":{crv:"secp256k1",kty:"EC",x:"",y:""},"secp256k1-priv":{crv:"secp256k1",kty:"EC",x:"",y:"",d:""},"x25519-pub":{crv:"X25519",kty:"OKP",x:""},"x25519-priv":{crv:"X25519",kty:"OKP",x:"",d:""}};var MZ=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ap=class t extends di{static resolve(e,r){return MZ(this,void 0,void 0,function*(){let n=tt.parse(e);if(!n)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:"invalidDid"}});if(n.method!==t.methodName)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:"methodNotSupported"}});let s=`https://${n.id.replace(/:/g,"/")}`;s=decodeURIComponent(s);let i=n.id.includes(":")?`${s}/did.json`:`${s}/.well-known/did.json`;try{let o=yield fetch(i);if(!o.ok)throw new Error("HTTP error status code returned");let a=yield o.json();return Object.assign(Object.assign({},er),{didDocument:a})}catch{return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:"notFound"}})}})}};ap.methodName="web";var KZ=ts(qF(),1),HZ=ts(Xv(),1);var LF={get:function(t){return null},set:function(t,e){return null},delete:function(t){return null},clear:function(){return null},close:function(){return null}};var UF=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{c(n.next(l))}catch(d){o(d)}}function u(l){try{c(n.throw(l))}catch(d){o(d)}}function c(l){l.done?i(l.value):s(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})},ry=class{constructor({cache:e,didResolvers:r}){this.didResolvers=new Map,this.cache=e||LF;for(let n of r)this.didResolvers.set(n.methodName,n)}resolve(e,r){return UF(this,void 0,void 0,function*(){let n=tt.parse(e);if(!n)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:ge.InvalidDid,errorMessage:`Invalid DID URI: ${e}`}});let s=this.didResolvers.get(n.method);if(!s)return Object.assign(Object.assign({},er),{didResolutionMetadata:{error:ge.MethodNotSupported,errorMessage:`Method not supported: ${n.method}`}});let i=yield this.cache.get(n.uri);if(i)return i;{let o=yield s.resolve(n.uri,r);return yield this.cache.set(n.uri,o),o}})}dereference(e,r){return UF(this,void 0,void 0,function*(){let n=tt.parse(e);if(!n)return{dereferencingMetadata:{error:ge.InvalidDidUrl},contentStream:null,contentMetadata:{}};let{didDocument:s,didResolutionMetadata:i,didDocumentMetadata:o}=yield this.resolve(n.uri);if(!s)return{dereferencingMetadata:{error:i.error},contentStream:null,contentMetadata:{}};if(!n.fragment||n.query)return{dereferencingMetadata:{contentType:"application/did+json"},contentStream:s,contentMetadata:o};let{service:a=[],verificationMethod:u=[]}=s,c=new Set([e,n.fragment,`#${n.fragment}`]),l;for(let d of u)if(c.has(d.id)){l=d;break}for(let d of a)if(c.has(d.id)){l=d;break}return l?{dereferencingMetadata:{contentType:"application/did+json"},contentStream:l,contentMetadata:i}:{dereferencingMetadata:{error:ge.NotFound},contentStream:null,contentMetadata:{}}})}};var WZ=new Ir,up=class up{static async sign(e){let{signerDid:r,payload:n}=e,s=await r.getSigner(),i=s.keyId;i.charAt(0)==="#"&&(i=`${r.uri}${i}`);let o={typ:"JWT",alg:s.algorithm,kid:i},a=ce.object(o).toBase64Url(),u=ce.object(n).toBase64Url(),c=`${a}.${u}`,l=ce.string(c).toUint8Array(),d=await s.sign({data:l}),p=ce.uint8Array(d).toBase64Url();return`${c}.${p}`}static async verify(e){let{decoded:r,encoded:n}=up.parse({jwt:e.jwt});if(r.payload.exp&&Math.floor(Date.now()/1e3)>r.payload.exp)throw new Error("Verification failed: JWT is expired");let s=await up.didResolver.dereference(r.header.kid);if(s.dereferencingMetadata.error)throw new Error(`Failed to resolve ${r.header.kid}`);let i=s.contentStream;if(!i||!c0.isDidVerificationMethod(i))throw new Error("Verification failed: Expected kid in JWT header to dereference a DID Document Verification Method");let o=i.publicKeyJwk;if(!o)throw new Error("Verification failed: Expected kid in JWT header to dereference to a DID Document Verification Method with publicKeyJwk");if(o.alg&&o.alg!==r.header.alg)throw new Error("Verification failed: Expected alg in JWT header to match DID Document Verification Method alg");let a=`${n.header}.${n.payload}`,u=ce.string(a).toUint8Array(),c=ce.base64Url(n.signature).toUint8Array();if(!await WZ.verify({key:o,signature:c,data:u}))throw new Error("Signature verification failed: Integrity mismatch");return r}static parse(e){let r=e.jwt.split(".");if(r.length!==3)throw new Error(`Verification failed: Malformed JWT. expected 3 parts. got ${r.length}`);let[n,s,i]=r,o,a;try{o=ce.base64Url(n).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT header")}if(!o.typ||o.typ!=="JWT")throw new Error("Verification failed: Expected JWT header to contain typ property set to JWT");if(!o.alg||!o.kid)throw new Error("Verification failed: Expected JWT header to contain alg and kid");try{a=ce.base64Url(s).toObject()}catch{throw new Error("Verification failed: Malformed JWT. Invalid base64url encoding for JWT payload")}return{decoded:{header:o,payload:a},encoded:{header:n,payload:s,signature:i}}}};up.didResolver=new ry({didResolvers:[ku,ip,op,sp,ap]});var Cs=up;var _c=ts(Vq(),1),yx=class{static selectCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.selectFrom(r,e);return n.errors?.length!==0?[]:Array.from(new Set(n.verifiableCredential??[]))}static satisfiesPresentationDefinition({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=this.pex.evaluateCredentials(r,e);if(n.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(n.warnings)),n.areRequiredCredentialsPresent.toString()!=="info"||n.errors?.length){let s="Failed to create Verifiable Presentation JWT due to: ";throw n.areRequiredCredentialsPresent&&(s+="Required Credentials Not Present: "+JSON.stringify(n.areRequiredCredentialsPresent)),n.errors?.length&&(s+="Errors: "+JSON.stringify(n.errors)),new Error(s)}}static createPresentationFromCredentials({vcJwts:e,presentationDefinition:r}){this.resetPex();let n=_c.PEX.validateDefinition(r);Kq(n);let s=this.pex.evaluateCredentials(r,e);if(s.warnings?.length&&console.warn("Warnings were generated during the evaluation process: "+JSON.stringify(s.warnings)),s.areRequiredCredentialsPresent.toString()!=="info"||s.errors?.length){let a="Failed to create Verifiable Presentation JWT due to: ";throw s.areRequiredCredentialsPresent&&(a+="Required Credentials Not Present: "+JSON.stringify(s.areRequiredCredentialsPresent)),s.errors?.length&&(a+="Errors: "+JSON.stringify(s.errors)),new Error(a)}let i=this.pex.presentationFrom(r,e),o=_c.PEX.validateSubmission(i.presentationSubmission);return Kq(o),i}static validateDefinition({presentationDefinition:e}){return _c.PEX.validateDefinition(e)}static validateSubmission({presentationSubmission:e}){return _c.PEX.validateSubmission(e)}static evaluatePresentation({presentationDefinition:e,presentation:r}){return this.resetPex(),this.pex.evaluatePresentation(e,r)}static resetPex(){this.pex=new _c.PEX}};yx.pex=new _c.PEX;function Kq(t){let e="Failed to pass validation check due to: ";if(Array.isArray(t)){if(!t.every(r=>r.status==="info"))throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}else if(t.status!=="info")throw e+="Validation Errors: "+JSON.stringify(t),new Error(e)}var Hq={};cr(Hq,{getCurrentXmlSchema112Timestamp:()=>gx,getFutureXmlSchema112Timestamp:()=>Tpe,getXmlSchema112Timestamp:()=>Ob,isValidRFC3339Timestamp:()=>vx,isValidXmlSchema112Timestamp:()=>bx});function gx(){return new Date().toISOString().replace(/\.\d+Z$/,"Z")}function Ob(t){return new Date(t*1e3).toISOString().replace(/\.\d{3}/,"")}function Tpe(t){return new Date(Date.now()+t*1e3).toISOString().replace(/\.\d+Z$/,"Z")}function bx(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}function vx(t){if(!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+-]\d{2}:\d{2})$/.test(t))return!1;let r=new Date(t);return!isNaN(r.getTime())}var Fd="VerifiablePresentation",Wq=class t{constructor(e){this.vpDataModel=e}get type(){return this.vpDataModel.type[this.vpDataModel.type.length-1]}get holder(){return this.vpDataModel.holder.toString()}get verifiableCredential(){return this.vpDataModel.verifiableCredential}async sign(e){return await Cs.sign({signerDid:e.did,payload:{vp:this.vpDataModel,iss:e.did.uri,sub:e.did.uri,jti:this.vpDataModel.id,iat:Math.floor(Date.now()/1e3)}})}toString(){return JSON.stringify(this.vpDataModel)}static async create(e){let{type:r,holder:n,vcJwts:s,additionalData:i}=e;if(i&&typeof JSON.parse(JSON.stringify(i))!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n)throw new Error("Holder must be defined");if(typeof n!="string")throw new Error("Holder must be of type string");let o={"@context":[Id],type:Array.isArray(r)?[Fd,...r]:r?[Fd,r]:[Fd],id:`urn:uuid:${fa.randomUuid()}`,holder:n,verifiableCredential:s,...i};return zq(o),new t(o)}static async verify({vpJwt:e}){let{payload:r}=await Cs.verify({jwt:e}),n=r.vp;if(!n)throw new Error("vp property missing.");zq(n);for(let s of n.verifiableCredential)await Bb.verify({vcJwt:s});return{issuer:r.iss,subject:r.sub,vp:r.vp}}static parseJwt({vpJwt:e}){let n=Cs.parse({jwt:e}).decoded.payload.vp;if(!n)throw Error("Jwt payload missing vp property");return new t(n)}};function zq(t){Xi.validateContext(t["@context"]),Xi.validateVpType(t.type)}var Xi=class{static validateCredentialPayload(e){this.validateContext(e.vcDataModel["@context"]),this.validateVcType(e.type),this.validateCredentialSubject(e.vcDataModel.credentialSubject),e.vcDataModel.issuanceDate&&this.validateTimestamp(e.vcDataModel.issuanceDate),e.vcDataModel.expirationDate&&this.validateTimestamp(e.vcDataModel.expirationDate)}static validateContext(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Id)===-1)throw new Error(`@context is missing default context "${Id}"`)}static validateVcType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(kd)===-1)throw new Error(`type is missing default "${kd}"`)}static validateVpType(e){let r=this.asArray(e);if(r.length<1||r.indexOf(Fd)===-1)throw new Error(`type is missing default "${Fd}"`)}static validateCredentialSubject(e){if(Object.keys(e).length===0)throw new Error("credentialSubject must not be empty")}static validateTimestamp(e){if(!bx(e)&&!vx(e))throw new Error("timestamp is not valid xml schema 112 timestamp")}static asArray(e){return Array.isArray(e)?e:[e]}};var Id="https://www.w3.org/2018/credentials/v1",kd="VerifiableCredential",Bb=class t{constructor(e){this.vcDataModel=e}get type(){return this.vcDataModel.type[this.vcDataModel.type.length-1]}get issuer(){return this.vcDataModel.issuer.toString()}get subject(){return Array.isArray(this.vcDataModel.credentialSubject)?this.vcDataModel.credentialSubject[0].id:this.vcDataModel.credentialSubject.id}async sign(e){return await Cs.sign({signerDid:e.did,payload:{vc:this.vcDataModel,nbf:Math.floor(new Date(this.vcDataModel.issuanceDate).getTime()/1e3),jti:this.vcDataModel.id,iss:e.did.uri,sub:this.subject,iat:Math.floor(Date.now()/1e3),...this.vcDataModel.expirationDate&&{exp:Math.floor(new Date(this.vcDataModel.expirationDate).getTime()/1e3)}}})}toString(){return JSON.stringify(this.vcDataModel)}static async create(e){let{type:r,issuer:n,subject:s,data:i,issuanceDate:o,expirationDate:a,evidence:u}=e,c=JSON.parse(JSON.stringify(i));if(typeof c!="object")throw new Error("Expected data to be parseable into a JSON object");if(!n||!s)throw new Error("Issuer and subject must be defined");if(typeof n!="string"||typeof s!="string")throw new Error("Issuer and subject must be of type string");let l={id:s,...c},d={"@context":[Id],type:Array.isArray(r)?[kd,...r]:r?[kd,r]:[kd],id:`urn:uuid:${fa.randomUuid()}`,issuer:n,issuanceDate:o||gx(),credentialSubject:l,...a&&{expirationDate:a},...u&&{evidence:u}};return wx(d),new t(d)}static async verify({vcJwt:e}){let{payload:r}=await Cs.verify({jwt:e}),{exp:n,iss:s,nbf:i,jti:o,sub:a,vc:u}=r;if(!u)throw new Error("vc property missing.");let c=r.vc;if(n&&c.expirationDate&&n!==Math.floor(new Date(c.expirationDate).getTime()/1e3))throw new Error("Verification failed: exp claim does not match expirationDate");if(n&&(c.expirationDate=Ob(n)),!s)throw new Error("Verification failed: iss claim is required");if(s!==c.issuer)throw new Error("Verification failed: iss claim does not match expected issuer");if(i&&i>Math.floor(Date.now()/1e3))throw new Error("Verification failed: nbf claim is in the future");if(i&&c.issuanceDate&&i!==Math.floor(new Date(c.issuanceDate).getTime()/1e3))throw new Error("Verification failed: nbf claim does not match issuanceDate");if(i&&(c.issuanceDate=Ob(i)),a&&!Array.isArray(c.credentialSubject)&&a!==c.credentialSubject.id)throw new Error("Verification failed: sub claim does not match credentialSubject.id");if(a&&!Array.isArray(c.credentialSubject)&&(c.credentialSubject.id=a),o&&o!==c.id)throw new Error("Verification failed: jti claim does not match id");return o&&(c.id=o),wx(c),{issuer:r.iss,subject:r.sub,vc:c}}static parseJwt({vcJwt:e}){let n=Cs.parse({jwt:e}).decoded.payload.vc;if(!n)throw Error("Jwt payload missing vc property");return wx(n),new t(n)}};function wx(t){Xi.validateContext(t["@context"]),Xi.validateVcType(t.type),Xi.validateCredentialSubject(t.credentialSubject),t.issuanceDate&&Xi.validateTimestamp(t.issuanceDate),t.expirationDate&&Xi.validateTimestamp(t.expirationDate)}export{Id as DEFAULT_VC_CONTEXT,kd as DEFAULT_VC_TYPE,Fd as DEFAULT_VP_TYPE,Cs as Jwt,yx as PresentationExchange,Bb as VerifiableCredential,Wq as VerifiablePresentation,Hq as utils};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/p256.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/edwards.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/montgomery.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/ed25519.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

uint8-util/util.js:
  (* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)
  *
  * @author   Jimmy Wrting <jimmy@warting.se> (https://jimmy.warting.se/opensource)
  * @license  MIT
  *)

@noble/ed25519/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=browser.mjs.map
